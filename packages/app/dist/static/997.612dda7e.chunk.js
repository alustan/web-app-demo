(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[997],{54748:(G,A,n)=>{"use strict";n.d(A,{M:()=>y});var x=n(58837),d=n(71677),p=n(14041),f=n(72501);const C=(0,x.A)({container:{overflow:"visible !important"},typo:{fontSize:"inherit",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":({line:P})=>P||1,"-webkit-box-orient":"vertical"}},{name:"BackstageOverflowTooltip"});function y(P){var z;const X=C(P);return p.createElement(d.Ay,{title:(z=P.title)!=null?z:P.text||"",placement:P.placement},p.createElement(f.A,{className:X.typo,variant:"inherit"},P.text))}},80997:(G,A,n)=>{"use strict";n.r(A),n.d(A,{GroupProfileCard:()=>yt,MembersListCard:()=>it,MyGroupsSidebarItem:()=>Xt.k,OwnershipCard:()=>Vt,UserProfileCard:()=>$t});var x=n(55488),d=n(78560),p=n(37281),f=n(16400),C=n(30043),y=n(77125),P=n(42899),X=n(73643),z=n(72501),B=n(58837),$=n(99703),c=n(89575),r=n(39850),t=n(14041),E=n(9546),S=n(7031),M=n(83705),fe=n(90689),me=n(45065);function ye(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=a.boundaryCount,s=e===void 0?1:e,o=a.componentName,i=o===void 0?"usePagination":o,u=a.count,l=u===void 0?1:u,g=a.defaultPage,b=g===void 0?1:g,v=a.disabled,h=v===void 0?!1:v,m=a.hideNextButton,U=m===void 0?!1:m,R=a.hidePrevButton,L=R===void 0?!1:R,D=a.onChange,w=a.page,N=a.showFirstButton,T=N===void 0?!1:N,k=a.showLastButton,K=k===void 0?!1:k,Q=a.siblingCount,W=Q===void 0?1:Q,J=(0,r.A)(a,["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"]),I=(0,me.A)({controlled:w,default:b,name:i,state:"page"}),Y=(0,fe.A)(I,2),F=Y[0],ue=Y[1],Z=function(_,ee){w||ue(ee),D&&D(_,ee)},q=function(_,ee){var Qt=ee-_+1;return Array.from({length:Qt},function(Jt,Yt){return _+Yt})},ce=q(1,Math.min(s,l)),V=q(Math.max(l-s+1,s+1),l),j=Math.max(Math.min(F-W,l-s-W*2-1),s+2),de=Math.min(Math.max(F+W,s+W*2+2),V[0]-2),jt=[].concat((0,M.A)(T?["first"]:[]),(0,M.A)(L?[]:["previous"]),(0,M.A)(ce),(0,M.A)(j>s+2?["start-ellipsis"]:s+1<l-s?[s+1]:[]),(0,M.A)(q(j,de)),(0,M.A)(de<l-s-1?["end-ellipsis"]:l-s>s?[l-s]:[]),(0,M.A)(V),(0,M.A)(U?[]:["next"]),(0,M.A)(K?["last"]:[])),We=function(_){switch(_){case"first":return 1;case"previous":return F-1;case"next":return F+1;case"last":return l;default:return null}},Ht=jt.map(function(O){return typeof O=="number"?{onClick:function(ee){Z(ee,O)},type:"page",page:O,selected:O===F,disabled:h,"aria-current":O===F?"true":void 0}:{onClick:function(ee){Z(ee,We(O))},type:O,page:We(O),selected:!1,disabled:h||O.indexOf("ellipsis")===-1&&(O==="next"||O==="last"?F>=l:F<=1)}});return(0,c.A)({items:Ht},J)}var H=n(268),ge=n(54917),Ee=n(97740),te=n(38483);const ze=(0,te.A)(t.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Se=(0,te.A)(t.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Me=(0,te.A)(t.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Ie=(0,te.A)(t.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");var Ae=n(11192),Fe=function(e){return{root:(0,c.A)({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:e.palette.text.primary}),page:{transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&$focusVisible":{backgroundColor:e.palette.action.focus},"&$selected":{backgroundColor:e.palette.action.selected,"&:hover, &$focusVisible":{backgroundColor:(0,H.X4)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.palette.action.selected}},"&$disabled":{opacity:1,color:e.palette.action.disabled,backgroundColor:e.palette.action.selected}},"&$disabled":{opacity:e.palette.action.disabledOpacity}},sizeSmall:{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px","& $icon":{fontSize:e.typography.pxToRem(18)}},sizeLarge:{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15),"& $icon":{fontSize:e.typography.pxToRem(22)}},textPrimary:{"&$selected":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover, &$focusVisible":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}},"&$disabled":{color:e.palette.action.disabled}}},textSecondary:{"&$selected":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover, &$focusVisible":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}},"&$disabled":{color:e.palette.action.disabled}}},outlined:{border:"1px solid ".concat(e.palette.type==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$selected":{"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}}},outlinedPrimary:{"&$selected":{color:e.palette.primary.main,border:"1px solid ".concat((0,H.X4)(e.palette.primary.main,.5)),backgroundColor:(0,H.X4)(e.palette.primary.main,e.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:(0,H.X4)(e.palette.primary.main,e.palette.action.activatedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}},outlinedSecondary:{"&$selected":{color:e.palette.secondary.main,border:"1px solid ".concat((0,H.X4)(e.palette.secondary.main,.5)),backgroundColor:(0,H.X4)(e.palette.secondary.main,e.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:(0,H.X4)(e.palette.secondary.main,e.palette.action.activatedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}},rounded:{borderRadius:e.shape.borderRadius},ellipsis:{height:"auto","&$disabled":{opacity:e.palette.action.disabledOpacity}},focusVisible:{},disabled:{},selected:{},icon:{fontSize:e.typography.pxToRem(20),margin:"0 -8px"}}},Ke=t.forwardRef(function(e,s){var o=e.classes,i=e.className,u=e.color,l=u===void 0?"standard":u,g=e.component,b=e.disabled,v=b===void 0?!1:b,h=e.page,m=e.selected,U=m===void 0?!1:m,R=e.shape,L=R===void 0?"round":R,D=e.size,w=D===void 0?"medium":D,N=e.type,T=N===void 0?"page":N,k=e.variant,K=k===void 0?"text":k,Q=(0,r.A)(e,["classes","className","color","component","disabled","page","selected","shape","size","type","variant"]),W=(0,ge.A)(),J=W.direction==="rtl"?{previous:Ie,next:Me,last:ze,first:Se}:{previous:Me,next:Ie,first:ze,last:Se},I=J[T];return T==="start-ellipsis"||T==="end-ellipsis"?t.createElement("div",{ref:s,className:(0,E.default)(o.root,o.ellipsis,v&&o.disabled,w!=="medium"&&o["size".concat((0,Ae.A)(w))])},"\u2026"):t.createElement(Ee.A,(0,c.A)({ref:s,component:g,disabled:v,focusVisibleClassName:o.focusVisible,className:(0,E.default)(o.root,o.page,o[K],o[L],i,l!=="standard"&&o["".concat(K).concat((0,Ae.A)(l))],v&&o.disabled,U&&o.selected,w!=="medium"&&o["size".concat((0,Ae.A)(w))])},Q),T==="page"&&h,I?t.createElement(I,{className:o.icon}):null)});const Ve=(0,S.A)(Fe,{name:"MuiPaginationItem"})(Ke);var Xe={root:{},ul:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}};function je(a,e,s){return a==="page"?"".concat(s?"":"Go to ","page ").concat(e):"Go to ".concat(a," page")}var He=t.forwardRef(function(e,s){var o=e.boundaryCount,i=e.classes,u=e.className,l=e.color,g=l===void 0?"standard":l,b=e.count,v=e.defaultPage,h=e.disabled,m=e.getItemAriaLabel,U=m===void 0?je:m,R=e.hideNextButton,L=e.hidePrevButton,D=e.onChange,w=e.page,N=e.renderItem,T=N===void 0?function(V){return t.createElement(Ve,V)}:N,k=e.shape,K=k===void 0?"round":k,Q=e.showFirstButton,W=e.showLastButton,J=e.siblingCount,I=e.size,Y=I===void 0?"medium":I,F=e.variant,ue=F===void 0?"text":F,Z=(0,r.A)(e,["boundaryCount","classes","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"]),q=ye((0,c.A)({},e,{componentName:"Pagination"})),ce=q.items;return t.createElement("nav",(0,c.A)({"aria-label":"pagination navigation",className:(0,E.default)(i.root,u),ref:s},Z),t.createElement("ul",{className:i.ul},ce.map(function(V,j){return t.createElement("li",{key:j},T((0,c.A)({},V,{color:g,"aria-label":U(V.type,V.page,V.selected),shape:K,size:Y,variant:ue})))})))});const Qe=(0,S.A)(Xe,{name:"MuiPagination"})(He);var $e=n(73466),Ye=n(19087);function Je(a){let e=0;for(let o=0;o<a.length;o++)e=a.charCodeAt(o)+((e<<5)-e);let s="#";for(let o=0;o<3;o++){const i=e>>o*8&255;s+=`00${i.toString(16)}`.slice(-2)}return s}function Ze(a){var i;const e=a.trim().split(" "),s=(i=e[0])!=null?i:"",o=e.length>1?e[e.length-1]:"";return s&&o?`${s.charAt(0)}${o.charAt(0)}`:s.charAt(0)}var qe=n(53373),Be=n.n(qe);const _e=(0,B.A)(a=>({avatar:{width:"4rem",height:"4rem",color:a.palette.common.white,backgroundColor:e=>e.backgroundColor},avatarText:{fontWeight:a.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function be(a){var v,h;const{displayName:e,picture:s,customStyles:o}=a,i={...o},u={fontFamily:i.fontFamily,fontSize:i.fontSize,fontWeight:i.fontWeight},l=_e(s?{}:{backgroundColor:Je(e||"")}),g=Be()((v=a.classes)==null?void 0:v.avatar,l.avatar),b=Be()((h=a.classes)==null?void 0:h.avatarText,l.avatarText);return t.createElement(Ye.A,{alt:e,src:s,className:g,style:i},e&&t.createElement(z.A,{variant:"h6",component:"span",className:b,style:u},Ze(e)))}var ae=n(75202),we=n(54748),Ce=n(96872),Te=n(99424),pe=n(21332),he=n(18139),re=n(97214),se=n(699);const et=async(a,e,s="memberof")=>(a.length===0?{items:[]}:await e.getEntities({filter:{kind:"User",[`relations.${s.toLocaleLowerCase("en-US")}`]:a.map(i=>(0,d.U2)({kind:"group",namespace:i.namespace.toLocaleLowerCase("en-US"),name:i.name.toLocaleLowerCase("en-US")}))}})).items,tt=async(a,e)=>{var l;const s=new Map,i=[{kind:a.kind,namespace:(l=a.metadata.namespace)!=null?l:x.oQ,name:a.metadata.name}],u=[];for(;i.length>0;){const g=i.shift(),b=await e.getEntityByRef(g);s.set((0,d.U2)(g),!0);const v=(0,se.t)(b,re.Kx,{kind:"Group"}).filter(h=>!s.has((0,d.U2)(h)));v.forEach(h=>s.set((0,d.U2)(h),!0)),i.push(...v),u.push(...v)}return u},at=async(a,e,s="memberof")=>et(await tt(a,e),e,s),nt=a=>{const e=new Map;return a.filter(s=>{const o=(0,d.U2)(s),i=e.has(o);return e.set(o,!0),!i})},ot=(0,B.A)(a=>(0,$.A)({card:{border:`1px solid ${a.palette.divider}`,boxShadow:a.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:a.spacing(4,1,1),flex:"1",minWidth:"0px"},avatar:{position:"absolute",top:"-2rem"}}),{name:"MembersListCardComponent"}),rt=a=>{var l;const e=ot(),{metadata:{name:s,description:o},spec:{profile:i}}=a.member,u=(l=i==null?void 0:i.displayName)!=null?l:s;return t.createElement(y.A,{className:e.card},t.createElement(y.A,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},t.createElement(be,{displayName:u,picture:i==null?void 0:i.picture,classes:e}),t.createElement(y.A,{pt:2,sx:{width:"100%"},textAlign:"center"},t.createElement(z.A,{variant:"h6"},t.createElement(p.z,{"data-testid":"user-link",entityRef:a.member,title:u})),(i==null?void 0:i.email)&&t.createElement(ae.N_,{to:`mailto:${i.email}`},t.createElement(we.M,{text:i.email})),o&&t.createElement(z.A,{variant:"subtitle2"},o))))},st=(0,B.A)(a=>({root:{height:"100%"},cardContent:{overflow:"auto"},memberList:{display:"grid",gap:a.spacing(1.5),gridTemplateColumns:`repeat(auto-fit, minmax(auto, ${a.spacing(34)}px))`}})),it=a=>{var q,ce,V;const{memberDisplayTitle:e="Members",pageSize:s=50,showAggregateMembersToggle:o,relationType:i="memberof"}=a,u=(ce=(q=a.relationAggregation)!=null?q:a.relationsType)!=null?ce:"direct",l=st(),{entity:g}=(0,f.tN)(),{metadata:{name:b,namespace:v},spec:{profile:h}}=g,m=(0,he.gf)(C.v),U=(V=h==null?void 0:h.displayName)!=null?V:b,R=v||x.oQ,[L,D]=t.useState(1),w=(j,de)=>{D(de)},[N,T]=(0,t.useState)(u==="aggregated"),{loading:k,value:K}=(0,$e.A)(async()=>N?await at(g,m,i):[],[m,g,N]),{loading:Q,error:W,value:J}=(0,$e.A)(async()=>(await m.getEntities({filter:{kind:"User",[`relations.${i.toLocaleLowerCase("en-US")}`]:[(0,d.U2)({kind:"group",namespace:R.toLocaleLowerCase("en-US"),name:b.toLocaleLowerCase("en-US")})]}})).items,[m,g]),I=nt([...J!=null?J:[],...K&&N?K:[]].sort((j,de)=>(0,d.U2)(j).localeCompare((0,d.U2)(de))));if(Q)return t.createElement(Ce.k,null);if(W)return t.createElement(Te._,{error:W});const Y=Math.ceil(((I==null?void 0:I.length)||0)/s),F=Y<2?"":`, page ${L} of ${Y}`,ue=t.createElement(Qe,{count:Y,page:L,onChange:w,showFirstButton:!0,showLastButton:!0});let Z;return I&&I.length>0?Z=t.createElement(y.A,{className:l.memberList},I.slice(s*(L-1),s*L).map(j=>t.createElement(rt,{member:j,key:(0,d.U2)(j)}))):Z=t.createElement(y.A,{p:2},t.createElement(z.A,null,"This group has no ",e.toLocaleLowerCase(),".")),t.createElement(P.A,{item:!0,className:l.root},t.createElement(pe.n,{title:`${e} (${(I==null?void 0:I.length)||0}${F})`,subheader:`of ${U}`,...Y<=1?{}:{actions:ue},className:l.root,cardClassName:l.cardContent},o&&t.createElement(t.Fragment,null,"Direct Members",t.createElement(X.A,{color:"primary",checked:N,onChange:()=>{T(!N)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),N&&k?t.createElement(Ce.k,null):Z))};var lt=n(98890),ve=n(29365),xe=n(58007),ne=n(8109),ie=n(46423),oe=n(5951),le=n(71677),Pe=n(14158),ct=n(34477),dt=n(86486),ke=n(74219),ut=n(74011),Re=n(75625),Ue=n(85121),Le=n(47966),mt=n(95208),Ne=n(23127),gt=n(37197);const pt=({href:a,Icon:e,text:s})=>t.createElement(ne.A,{key:a},t.createElement(ie.A,null,e?t.createElement(e,null):t.createElement(Ne.A,null)),t.createElement(oe.A,null,t.createElement(ae.N_,{to:a},s))),Oe=({links:a})=>{const e=(0,mt.n)(),s=o=>{var i;return o&&(i=e.getSystemIcon(o))!=null?i:Ne.A};return a===void 0?null:t.createElement(t.Fragment,null,t.createElement(gt.A,null),a.map(o=>t.createElement(pt,{key:o.url,href:o.url,text:o.title,Icon:s(o.icon)})))};var ht=n(56299),vt=n(71913);const ft=a=>t.createElement(y.A,{display:"flex",alignItems:"center"},t.createElement(Le.A,{fontSize:"inherit"}),t.createElement(y.A,{ml:1},a.title)),yt=a=>{var K,Q,W;const e=(0,he.gf)(C.v),s=(0,he.gf)(ct.k),{entity:o}=(0,f.tN)(),{allowed:i}=(0,ht.A)(vt.tS),u=(0,t.useCallback)(async()=>{await e.refreshEntity((0,d.U2)(o)),s.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[e,s,o]);if(!o)return t.createElement(ke.A,{severity:"error"},"Group not found");const{metadata:{name:l,description:g,title:b,annotations:v,links:h},spec:{profile:m}}=o,U=(0,se.t)(o,re.Kx,{kind:"Group"}),R=(0,se.t)(o,re.Qz,{kind:"group"}),L=v==null?void 0:v[lt.Eo],D=(L==null?void 0:L.startsWith("url:"))||(L==null?void 0:L.startsWith("file:")),w=(K=o.metadata.annotations)==null?void 0:K[x.P],N=(W=(Q=m==null?void 0:m.displayName)!=null?Q:b)!=null?W:l,T=m!=null&&m.email?`mailto:${m.email}`:"#",k=w?t.createElement(ve.A,{"aria-label":"Edit",title:"Edit Metadata",component:ae.N_,to:w},t.createElement(Re.A,null)):t.createElement(ve.A,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},t.createElement(Re.A,null));return t.createElement(pe.n,{title:t.createElement(ft,{title:N}),subheader:g,variant:a.variant,action:t.createElement(t.Fragment,null,D&&i&&t.createElement(ve.A,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:u},t.createElement(ut.A,null)),k)},t.createElement(P.A,{container:!0,spacing:3},t.createElement(P.A,{item:!0,xs:12,sm:2,xl:1},t.createElement(be,{displayName:N,picture:m==null?void 0:m.picture})),t.createElement(P.A,{item:!0,md:10,xl:11},t.createElement(xe.A,null,(m==null?void 0:m.email)&&t.createElement(ne.A,null,t.createElement(ie.A,null,t.createElement(le.Ay,{title:"Email"},t.createElement(Ue.A,null))),t.createElement(oe.A,{primary:t.createElement(ae.N_,{to:T},m.email),secondary:"Email"})),t.createElement(ne.A,null,t.createElement(ie.A,null,t.createElement(le.Ay,{title:"Parent Group"},t.createElement(dt.A,null))),t.createElement(oe.A,{primary:R.length?t.createElement(Pe.i,{entityRefs:R,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),t.createElement(ne.A,null,t.createElement(ie.A,null,t.createElement(le.Ay,{title:"Child Groups"},t.createElement(Le.A,null))),t.createElement(oe.A,{primary:U.length?t.createElement(Pe.i,{entityRefs:U,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(a==null?void 0:a.showLinks)&&t.createElement(Oe,{links:h})))))};var Et=n(48108);const At=a=>a.title?t.createElement(y.A,{display:"flex",alignItems:"center"},t.createElement(Et.A,{fontSize:"inherit"}),t.createElement(y.A,{ml:1},a.title)):null,$t=a=>{var h,m;const{entity:e}=(0,f.tN)();if(!e)return t.createElement(ke.A,{severity:"error"},"User not found");const s=(h=e.metadata.annotations)==null?void 0:h[x.P],{metadata:{name:o,description:i,links:u},spec:{profile:l}}=e,g=(m=l==null?void 0:l.displayName)!=null?m:o,b=l!=null&&l.email?`mailto:${l.email}`:void 0,v=(0,se.t)(e,re.u0,{kind:"Group"});return t.createElement(pe.n,{title:t.createElement(At,{title:g}),subheader:i,variant:a.variant,action:t.createElement(t.Fragment,null,s&&t.createElement(ve.A,{"aria-label":"Edit",title:"Edit Metadata",component:ae.N_,to:s},t.createElement(Re.A,null)))},t.createElement(P.A,{container:!0,spacing:3,alignItems:"flex-start"},t.createElement(P.A,{item:!0,xs:12,sm:2,xl:1},t.createElement(be,{displayName:g,picture:l==null?void 0:l.picture})),t.createElement(P.A,{item:!0,md:10,xl:11},t.createElement(xe.A,null,(l==null?void 0:l.email)&&t.createElement(ne.A,null,t.createElement(ie.A,null,t.createElement(le.Ay,{title:"Email"},t.createElement(Ue.A,null))),t.createElement(oe.A,null,t.createElement(ae.N_,{to:b!=null?b:""},l.email))),t.createElement(ne.A,null,t.createElement(ie.A,null,t.createElement(le.Ay,{title:"Member of"},t.createElement(Le.A,null))),t.createElement(oe.A,null,t.createElement(Pe.i,{entityRefs:v,defaultKind:"Group"}))),(a==null?void 0:a.showLinks)&&t.createElement(Oe,{links:u})))))};var bt=n(65569),Ct=n(72814),xt=n(65398),Pt=n.n(xt),Rt=n(14920),Lt=n(53318),Nt=n(50308),zt=n.n(Nt),St=n(45810),Mt=n.n(St),Ge=n(45250);const It=zt()(5),Bt=(a,e)=>{const{kind:s,type:o}=e,i=a.map(l=>(0,Lt.S)((0,d.KU)(l),{defaultKind:"group"})),u={kind:s.toLocaleLowerCase("en-US"),type:o,owners:i,user:"all"};return Mt().stringify({filters:u},{arrayFormat:"repeat"})},wt=a=>[...(0,se.t)(a,re.u0,{kind:"Group"}).map(({kind:o,namespace:i,name:u})=>(0,d.U2)({kind:o,namespace:i,name:u})),(0,d.U2)(a)],Tt=a=>a!==void 0,De=async(a,e,s=[])=>{const o=(0,se.t)(a,re.Kx,{kind:"Group"}),i=o.length>0,u=(0,d.U2)(a);if(i){const l=o.map(m=>(0,d.U2)(m)),v=(await It(()=>e.getEntitiesByRefs({fields:["kind","metadata.namespace","metadata.name","relations"],entityRefs:l}))).items.filter(Tt).filter(m=>!s.includes((0,d.U2)(m))),h=(await Promise.all(v.map(m=>De(m,e,[...s,u])))).flatMap(m=>m);return(0,Ge.uniq)([...h,u])}return[u]},kt=async(a,e,s)=>{const o=a.kind==="Group",i=e==="aggregated",u=a.kind==="User";return i&&o?De(a,s):i&&u?wt(a):[(0,d.U2)(a)]},Ut=a=>new Promise(e=>setTimeout(e,a)),Ot=async(a,e,s,o=100,i=100)=>{const u=[];for(let l=0;l<a.length;l+=o){const g=a.slice(l,l+o),b=await s.getEntities({filter:[{kind:e,"relations.ownedBy":g}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]});u.push(...b.items),l+o<a.length&&await Ut(i)}return(0,Ge.uniqBy)(u,d.U2)};function Gt(a,e,s,o=6){const i=(0,he.gf)(C.v),u=s!=null?s:["Component","API","System"],{loading:l,error:g,value:b}=(0,$e.A)(async()=>{const v=await kt(a,e,i);return(await Ot(v,u,i)).reduce((R,L)=>{var w,N;const D=R.find(T=>{var k;return T.kind===L.kind&&T.type===((k=L.spec)==null?void 0:k.type)});return D?D.count+=1:R.push({kind:L.kind,type:(N=(w=L.spec)==null?void 0:w.type)==null?void 0:N.toString(),count:1}),R},[]).sort((R,L)=>L.count-R.count).slice(0,o).map(R=>({counter:R.count,type:R.type,kind:R.kind,queryParams:Bt(v,R)}))},[i,a,e]);return{componentsWithCounters:b,loading:l,error:g}}const Dt=(0,B.A)(a=>(0,$.A)({card:{border:`1px solid ${a.palette.divider}`,boxShadow:a.shadows[2],borderRadius:"4px",padding:a.spacing(2),transition:`${a.transitions.duration.standard}ms`,"&:hover":{boxShadow:a.shadows[4]},height:"100%"},bold:{fontWeight:a.typography.fontWeightBold},smallFont:{fontSize:a.typography.body2.fontSize},entityTypeBox:{background:e=>a.getPageTheme({themeId:e.type}).backgroundImage,color:e=>a.getPageTheme({themeId:e.type}).fontColor}})),Wt=({counter:a,type:e,kind:s,url:o})=>{const i=Dt({type:e!=null?e:s}),u=e!=null?e:s,l=u.length>10,g=t.createElement(y.A,{className:`${i.card} ${i.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},t.createElement(z.A,{className:i.bold,variant:"h6"},a),t.createElement(y.A,{sx:{width:"100%",textAlign:"center"}},t.createElement(z.A,{className:`${i.bold} ${l&&i.smallFont}`,variant:"h6"},t.createElement(we.M,{text:Pt()(u.toLocaleUpperCase("en-US"),a)}))),e&&t.createElement(z.A,{variant:"subtitle1"},s));return o?t.createElement(ae.N_,{to:o,variant:"body2"},g):g},Ft=({className:a,entity:e,relationsType:s,relationAggregation:o,entityFilterKind:i,entityLimit:u=6})=>{const l=(0,Ct.S)(Rt.E);if(!s&&!o)throw new Error("The relationAggregation property must be set as an EntityRelationAggregation type.");const{componentsWithCounters:g,loading:b,error:v}=Gt(e,o!=null?o:s,i,u);return b?t.createElement(Ce.k,null):v?t.createElement(Te._,{error:v}):t.createElement(P.A,{container:!0,className:a},g==null?void 0:g.map(h=>{var m;return t.createElement(P.A,{item:!0,xs:6,md:6,lg:4,key:(m=h.type)!=null?m:h.kind},t.createElement(Wt,{counter:h.counter,kind:h.kind,type:h.type,url:l&&`${l()}/?${h.queryParams}`}))}))},Kt=(0,B.A)(a=>({card:{maxHeight:"100%"},cardContent:{display:"flex",flexDirection:"column",overflow:"hidden"},list:{[a.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[a.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[a.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}},grid:{overflowY:"auto",marginTop:0}})),Vt=a=>{var U;const{variant:e,entityFilterKind:s,hideRelationsToggle:o,entityLimit:i=6}=a,u=(U=a.relationAggregation)!=null?U:a.relationsType,l=o===void 0?!1:o,g=Kt(),{entity:b}=(0,f.tN)(),v=b.kind==="User"?"aggregated":"direct",[h,m]=(0,t.useState)(u!=null?u:v);return(0,t.useEffect)(()=>{u||m(v)},[m,v,u]),t.createElement(pe.n,{title:"Ownership",variant:e,className:g.card,cardClassName:g.cardContent},!l&&t.createElement(xe.A,{dense:!0},t.createElement(ne.A,{className:g.list},t.createElement(oe.A,{className:g.listItemText}),t.createElement(bt.A,{className:g.listItemSecondaryAction},"Direct Relations",t.createElement(le.Ay,{placement:"top",arrow:!0,title:`${h==="direct"?"Direct":"Aggregated"} Relations`},t.createElement(X.A,{color:"primary",checked:h!=="direct",onChange:()=>{m(h==="direct"?"aggregated":"direct")},name:"pin",inputProps:{"aria-label":"Ownership Type Switch"}})),"Aggregated Relations"))),t.createElement(Ft,{className:g.grid,entity:b,entityLimit:i,relationAggregation:h,entityFilterKind:s}))};var Xt=n(75103)},73643:(G,A,n)=>{"use strict";n.d(A,{A:()=>$});var x=n(89575),d=n(39850),p=n(14041),f=n(9546),C=n(7031),y=n(268),P=n(11192),X=n(137),z=function(r){return{root:{display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:r.palette.type==="light"?r.palette.grey[50]:r.palette.grey[400],transition:r.transitions.create(["left","transform"],{duration:r.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:r.palette.type==="light"?r.palette.grey[400]:r.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:r.palette.type==="light"?.12:.1}},colorPrimary:{"&$checked":{color:r.palette.primary.main,"&:hover":{backgroundColor:(0,y.X4)(r.palette.primary.main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:r.palette.type==="light"?r.palette.grey[400]:r.palette.grey[800]},"&$checked + $track":{backgroundColor:r.palette.primary.main},"&$disabled + $track":{backgroundColor:r.palette.type==="light"?r.palette.common.black:r.palette.common.white}},colorSecondary:{"&$checked":{color:r.palette.secondary.main,"&:hover":{backgroundColor:(0,y.X4)(r.palette.secondary.main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:r.palette.type==="light"?r.palette.grey[400]:r.palette.grey[800]},"&$checked + $track":{backgroundColor:r.palette.secondary.main},"&$disabled + $track":{backgroundColor:r.palette.type==="light"?r.palette.common.black:r.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:r.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:r.transitions.create(["opacity","background-color"],{duration:r.transitions.duration.shortest}),backgroundColor:r.palette.type==="light"?r.palette.common.black:r.palette.common.white,opacity:r.palette.type==="light"?.38:.3}}},B=p.forwardRef(function(r,t){var E=r.classes,S=r.className,M=r.color,fe=M===void 0?"secondary":M,me=r.edge,ye=me===void 0?!1:me,H=r.size,ge=H===void 0?"medium":H,Ee=(0,d.A)(r,["classes","className","color","edge","size"]),te=p.createElement("span",{className:E.thumb});return p.createElement("span",{className:(0,f.default)(E.root,S,{start:E.edgeStart,end:E.edgeEnd}[ye],ge==="small"&&E["size".concat((0,P.A)(ge))])},p.createElement(X.A,(0,x.A)({type:"checkbox",icon:te,checkedIcon:te,classes:{root:(0,f.default)(E.switchBase,E["color".concat((0,P.A)(fe))]),input:E.input,checked:E.checked,disabled:E.disabled},ref:t},Ee)),p.createElement("span",{className:E.track}))});const $=(0,C.A)(z,{name:"MuiSwitch"})(B)},86486:(G,A,n)=>{"use strict";var x,d=n(4293),p=n(78920);x={value:!0},A.A=void 0;var f=p(n(14041)),C=d(n(74044)),y=(0,C.default)(f.createElement("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree");A.A=y},74011:(G,A,n)=>{"use strict";var x,d=n(4293),p=n(78920);x={value:!0},A.A=void 0;var f=p(n(14041)),C=d(n(74044)),y=(0,C.default)(f.createElement("path",{d:"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}),"Cached");A.A=y},75625:(G,A,n)=>{"use strict";var x,d=n(4293),p=n(78920);x={value:!0},A.A=void 0;var f=p(n(14041)),C=d(n(74044)),y=(0,C.default)(f.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");A.A=y},47966:(G,A,n)=>{"use strict";var x,d=n(4293),p=n(78920);x={value:!0},A.A=void 0;var f=p(n(14041)),C=d(n(74044)),y=(0,C.default)(f.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");A.A=y},23127:(G,A,n)=>{"use strict";var x,d=n(4293),p=n(78920);x={value:!0},A.A=void 0;var f=p(n(14041)),C=d(n(74044)),y=(0,C.default)(f.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}),"Language");A.A=y},50308:(G,A,n)=>{"use strict";const x=n(25192),d=p=>{if(!((Number.isInteger(p)||p===1/0)&&p>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const f=new x;let C=0;const y=()=>{C--,f.size>0&&f.dequeue()()},P=async(B,$,...c)=>{C++;const r=(async()=>B(...c))();$(r);try{await r}catch{}y()},X=(B,$,...c)=>{f.enqueue(P.bind(null,B,$,...c)),(async()=>(await Promise.resolve(),C<p&&f.size>0&&f.dequeue()()))()},z=(B,...$)=>new Promise(c=>{X(B,c,...$)});return Object.defineProperties(z,{activeCount:{get:()=>C},pendingCount:{get:()=>f.size},clearQueue:{value:()=>{f.clear()}}}),z};G.exports=d},65398:function(G){(function(A,n){G.exports=n()})(this,function(){var A=[],n=[],x={},d={},p={};function f(c){return typeof c=="string"?new RegExp("^"+c+"$","i"):c}function C(c,r){return c===r?r:c===c.toLowerCase()?r.toLowerCase():c===c.toUpperCase()?r.toUpperCase():c[0]===c[0].toUpperCase()?r.charAt(0).toUpperCase()+r.substr(1).toLowerCase():r.toLowerCase()}function y(c,r){return c.replace(/\$(\d{1,2})/g,function(t,E){return r[E]||""})}function P(c,r){return c.replace(r[0],function(t,E){var S=y(r[1],arguments);return C(t===""?c[E-1]:t,S)})}function X(c,r,t){if(!c.length||x.hasOwnProperty(c))return r;for(var E=t.length;E--;){var S=t[E];if(S[0].test(r))return P(r,S)}return r}function z(c,r,t){return function(E){var S=E.toLowerCase();return r.hasOwnProperty(S)?C(E,S):c.hasOwnProperty(S)?C(E,c[S]):X(S,E,t)}}function B(c,r,t,E){return function(S){var M=S.toLowerCase();return r.hasOwnProperty(M)?!0:c.hasOwnProperty(M)?!1:X(M,M,t)===M}}function $(c,r,t){var E=r===1?$.singular(c):$.plural(c);return(t?r+" ":"")+E}return $.plural=z(p,d,A),$.isPlural=B(p,d,A),$.singular=z(d,p,n),$.isSingular=B(d,p,n),$.addPluralRule=function(c,r){A.push([f(c),r])},$.addSingularRule=function(c,r){n.push([f(c),r])},$.addUncountableRule=function(c){if(typeof c=="string"){x[c.toLowerCase()]=!0;return}$.addPluralRule(c,"$0"),$.addSingularRule(c,"$0")},$.addIrregularRule=function(c,r){r=r.toLowerCase(),c=c.toLowerCase(),p[c]=r,d[r]=c},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(c){return $.addIrregularRule(c[0],c[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(c){return $.addPluralRule(c[0],c[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(c){return $.addSingularRule(c[0],c[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach($.addUncountableRule),$})},25192:G=>{class A{constructor(d){this.value=d,this.next=void 0}}class n{constructor(){this.clear()}enqueue(d){const p=new A(d);this._head?(this._tail.next=p,this._tail=p):(this._head=p,this._tail=p),this._size++}dequeue(){const d=this._head;if(d)return this._head=this._head.next,this._size--,d.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let d=this._head;for(;d;)yield d.value,d=d.next}}G.exports=n}}]);})();

//# sourceMappingURL=997.612dda7e.chunk.js.map