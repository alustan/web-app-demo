(()=>{var S6=Object.defineProperty;var EA=se=>{throw TypeError(se)};var x6=(se,L,S)=>L in se?S6(se,L,{enumerable:!0,configurable:!0,writable:!0,value:S}):se[L]=S;var $p=(se,L,S)=>x6(se,typeof L!="symbol"?L+"":L,S),wA=(se,L,S)=>L.has(se)||EA("Cannot "+S);var dt=(se,L,S)=>(wA(se,L,"read from private field"),S?S.call(se):L.get(se)),ri=(se,L,S)=>L.has(se)?EA("Cannot add the same private member more than once"):L instanceof WeakSet?L.add(se):L.set(se,S),Mr=(se,L,S,D)=>(wA(se,L,"write to private field"),D?D.call(se,S):L.set(se,S),S);(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1742],{67296:(se,L,S)=>{"use strict";S.d(L,{r:()=>N});var D=S(14041),g=S(95208);const _=(0,D.lazy)(()=>S.e(7434).then(S.bind(S,97434)).then(X=>({default:X.RealLogViewer})));function N(X){const{Progress:U}=(0,g.n)().getComponents();return D.createElement(D.Suspense,{fallback:D.createElement(U,null)},D.createElement(_,{...X}))}},17174:(se,L,S)=>{"use strict";S.d(L,{s:()=>j});var D=S(77125),g=S(99703),_=S(58837),N=S(14041);const X=F=>(0,g.A)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:F.spacing(2)}}),U=(0,_.A)(X,{name:"BackstageItemCardGrid"});function j(F){const{children:O,...P}=F,G=U(P);return N.createElement(D.A,{className:G.root,...P},O)}},45575:(se,L,S)=>{"use strict";S.d(L,{f:()=>F});var D=S(77125),g=S(99703),_=S(58837),N=S(72501),X=S(14041);const U=O=>(0,g.A)({root:{color:O.palette.common.white,padding:O.spacing(2,2,3),backgroundImage:O.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),j=(0,_.A)(U,{name:"BackstageItemCardHeader"});function F(O){const{title:P,subtitle:G,children:Y}=O,Q=j(O);return X.createElement(D.A,{className:Q.root},G&&X.createElement(N.A,{variant:"subtitle2",component:"h3"},G),P&&X.createElement(N.A,{variant:"h6",component:"h4"},P),Y)}},99409:(se,L,S)=>{"use strict";S.d(L,{m:()=>H});var D=S(81252),g=S(18139),_=S(34477),N=S(77125),X=S(14041),U=S(49724),j=S(18453),F=S(46343),O=S(40074),P=S(46123),G=S(96403),Y=S(73466),Q=S(30043);function ee(){const y=(0,g.gf)(Q.v),{error:k,loading:M,value:I}=(0,Y.A)(async()=>await y.getEntityFacets({facets:["kind"]}).then(K=>{var $;return(($=K.facets.kind)==null?void 0:$.map(ne=>ne.value).sort())||[]}),[y]);return{loading:M,error:k,allKinds:I!=null?I:[]}}function ie(y,k,M){let I=y;return k&&(I=I.filter(K=>k.some($=>$.toLocaleLowerCase("en-US")===K.toLocaleLowerCase("en-US")))),M&&!y.some(K=>K.toLocaleLowerCase("en-US")===M.toLocaleLowerCase("en-US"))&&(I=I.concat([M])),I.sort().reduce((K,$)=>(K[$.toLocaleLowerCase("en-US")]=$,K),{})}var te=S(80084),q=S(10265);function R(y){var re,me;const{filters:k,queryParameters:{kind:M},updateFilters:I}=(0,j.nK)(),T=(0,X.useMemo)(()=>[M].flat()[0],[M]),[K,$]=(0,X.useState)((me=T!=null?T:(re=k.kind)==null?void 0:re.value)!=null?me:y.initialFilter);(0,X.useEffect)(()=>{T&&$(T)},[T]),(0,X.useEffect)(()=>{var Le,ze;(Le=k.kind)!=null&&Le.value&&$((ze=k.kind)==null?void 0:ze.value)},[k.kind]),(0,X.useEffect)(()=>{I({kind:K?new U.gM(K):void 0})},[K,I]);const{allKinds:ne,loading:ae,error:oe}=ee();return{loading:ae,error:oe,allKinds:ne!=null?ne:[],selectedKind:K,setSelectedKind:$}}const H=y=>{const{allowedKinds:k,hidden:M,initialFilter:I="component"}=y,{t:T}=(0,q.i)(te.j),K=(0,g.gf)(_.k),{error:$,allKinds:ne,selectedKind:ae,setSelectedKind:oe}=R({initialFilter:I});if((0,X.useEffect)(()=>{$&&K.post({message:T("entityKindPicker.errorMessage"),severity:"error"})},[$,K,T]),$)return null;const re=ie(ne,k,ae),me=Object.keys(re).map(Le=>({value:Le,label:re[Le]}));return M?null:X.createElement(N.A,{pb:1,pt:1},X.createElement(D.w,{label:T("entityKindPicker.title"),items:me,selected:ae.toLocaleLowerCase("en-US"),onChange:Le=>oe(String(Le))}))}},79533:(se,L,S)=>{"use strict";S.d(L,{l:()=>te});var D=S(95061),g=S(29365),_=S(63301),N=S(34839),X=S(75173),U=S(58837),j=S(64704),F=S(45917),O=S(14041),P=S(16983),G=S(18453),Y=S(49724),Q=S(80084),ee=S(10265);const ie=(0,U.A)(q=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),te=()=>{const q=ie(),{t:R}=(0,ee.i)(Q.j),{updateFilters:H,queryParameters:{text:y}}=(0,G.nK)(),k=(0,O.useMemo)(()=>[y].flat()[0],[y]),[M,I]=(0,O.useState)(k!=null?k:"");return(0,P.A)(()=>{H({text:M.length?new Y.V3(M):void 0})},250,[M,H]),(0,O.useEffect)(()=>{k&&I(k)},[k]),O.createElement(X.A,{className:q.searchToolbar},O.createElement(D.A,null,O.createElement(_.A,{"aria-label":"search",id:"input-with-icon-adornment",className:q.input,placeholder:R("entitySearchBar.placeholder"),autoComplete:"off",onChange:T=>I(T.target.value),value:M,startAdornment:O.createElement(N.A,{position:"start"},O.createElement(F.A,null)),endAdornment:O.createElement(N.A,{position:"end"},O.createElement(g.A,{"aria-label":"clear search",onClick:()=>I(""),edge:"end",disabled:M.length===0},O.createElement(j.A,null)))})))}},57278:(se,L,S)=>{"use strict";S.d(L,{j:()=>G});var D=S(14041),g=S(73466),_=S(46343),N=S.n(_),X=S(40074),U=S.n(X),j=S(18139),F=S(30043),O=S(18453),P=S(49724);function G(){var ne;const Y=(0,j.gf)(F.v),{filters:{kind:Q,type:ee},queryParameters:{type:ie},updateFilters:te}=(0,O.nK)(),q=(0,D.useMemo)(()=>[ie].flat().filter(Boolean),[ie]),[R,H]=(0,D.useState)(q.length?q:(ne=ee==null?void 0:ee.getTypes())!=null?ne:[]);(0,D.useEffect)(()=>{q.length&&H(q)},[q]);const[y,k]=(0,D.useState)([]),M=(0,D.useMemo)(()=>Q==null?void 0:Q.value,[Q]),{error:I,loading:T,value:K}=(0,g.A)(async()=>M?await Y.getEntityFacets({filter:{kind:M},facets:["spec.type"]}).then(oe=>oe.facets["spec.type"]||[]):[],[M,Y]),$=(0,D.useRef)(K);return(0,D.useEffect)(()=>{const ae=$.current;if($.current=K,T||!M||ae===K||!K)return;const oe=[...new Set(U()(K,me=>-me.count).map(me=>me.value.toLocaleLowerCase("en-US")))];k(oe);const re=R.filter(me=>oe.includes(me));N()(R,re)||H(re)},[T,M,R,H,K]),(0,D.useEffect)(()=>{te({type:R.length?new P.qA(R):void 0})},[R,te]),{loading:T,error:I,availableTypes:y,selectedTypes:R,setSelectedTypes:H}}},51742:(se,L,S)=>{"use strict";var Us,fs,Bn,Hs,Ll,Qo,wi,Ks,qo;S.r(L),S.d(L,{Router:()=>h6});var D={};S.r(D),S.d(D,{DescriptionField:()=>qD});var g=S(14041),_=S(18690),N=S(77026),X=S(75706);const U=s=>(0,N.O)(s,e=>e.selectByComponentData({key:X.R}).findComponentData({key:X.b})),j="scaffolder.layout.v1",F="scaffolder.layouts.wrapper.v1",O=s=>(0,N.O)(s,e=>e.selectByComponentData({key:F}).findComponentData({key:j}));var P=S(97909),G=S(17875),Y=S(79541),Q=S(62416),ee=S(7793),ie=S(6451),te=S(36611),q=S(77795),R=S(9739),H=S(34861),y=S(28364),k=S(95061),M=S(58837);const I=(0,M.A)(s=>({markdownDescription:{fontSize:s.typography.caption.fontSize,margin:0,color:s.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),T=s=>{const{children:e,displayLabel:i=!0,rawErrors:a=[],errors:l,help:c,rawDescription:u,required:f,disabled:d}=s,h=I();return g.createElement(k.A,{fullWidth:!0,error:!!a.length,required:f,disabled:d},e,i&&u?g.createElement(y.h,{content:u,linkTarget:"_blank",className:h.markdownDescription}):null,l,c)};var K=S(48543),$=S(63301);const ne=s=>{var u;const{setSecrets:e,secrets:i}=(0,P.Z)(),{name:a,onChange:l,schema:{title:c}}=s;return g.createElement(g.Fragment,null,g.createElement(K.A,{htmlFor:c},c),g.createElement($.A,{id:c,"aria-describedby":c,onChange:f=>{var d,h;l(Array((d=f.target)==null?void 0:d.value.length).fill("*").join("")),e({[a]:(h=f.target)==null?void 0:h.value})},value:(u=i[a])!=null?u:"",type:"password",autoComplete:"off"}))},ae=s=>{const{schema:{description:e},rawErrors:i,disabled:a,errors:l,required:c}=s;return g.createElement(T,{rawErrors:i,rawDescription:e,disabled:a,errors:l,required:c},g.createElement(ne,{...s}))};var oe=S(22139),re=S(95201),me=S(71004),Le=S(8886),ze=S(21775),_e=S(63653),Ie=S(19742),De=S(63374),xt=S(23654);const ut=[{component:G.q,name:"EntityPicker",schema:re.f2},{component:Y.R,name:"EntityNamePicker",validation:Q._,schema:me.a},{component:ee.t,name:"EntityTagsPicker",schema:Le.u},{component:te.e,name:"RepoUrlPicker",validation:q._,schema:ze.d},{component:ie.u,name:"OwnerPicker",schema:_e.h},{component:R.F,name:"OwnedEntityPicker",schema:Ie.M},{component:H.T,name:"MyGroupsPicker",schema:De.M},{component:ae,name:"Secret"},{component:oe.RT,name:"MultiEntityPicker",schema:xt.mG,validation:oe.eR}];var Xe=S(23986),jn=S(41544),Kt=S(73466),dn=S(63163),tt=S(8973),Bl=S(91567),Js=S(29655),pe=S(77125),Ue=S(69621),Ce=S(42899),st=S(4321),Rt=S(61009),Gt=S(13677),Xt=S(54801),Nt=S(10985),hr=S(47625),xn=S(9719),Ve=S(72501),mr=S(53373),Qt=S.n(mr),ht=S(6924),Ir=S(23164),gt=S(18139),bt=S(72814),bf=S(62112),Ti=S(96872),Zs=S(12554),Bp=S(65995),_s=S(82326),Xs=S(16654),ps=S(16454),Sf=S(67720),En=S(29365),Wn=S(46423),Vn=S(5951),zn=S(26343),xf=S(28233),Ef=S(55197),jp=S(25534),Wp=S(4832),Vp=S(75625),AA=S(20353),wf=S(71407);const OA=(0,M.A)(s=>({button:{color:s.page.fontColor}}));function jl(s){const{onEditorClicked:e,onActionsClicked:i,onTasksClicked:a,onCreateClicked:l}=s,c=OA(),[u,f]=(0,g.useState)();if(!e&&!i)return null;const d=m=>{f(m.currentTarget)},h=()=>{f(void 0)};return g.createElement(g.Fragment,null,g.createElement(En.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!u,"aria-haspopup":"true",role:"button",onClick:d,"data-testid":"menu-button",color:"inherit",className:c.button},g.createElement(wf.A,null)),g.createElement(Ef.Ay,{"aria-labelledby":"long-menu",open:!!u,onClose:h,anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(xf.A,null,l&&g.createElement(zn.A,{onClick:l},g.createElement(Wn.A,null,g.createElement(jp.A,{fontSize:"small"})),g.createElement(Vn.A,{primary:"Create"})),e&&g.createElement(zn.A,{onClick:e},g.createElement(Wn.A,null,g.createElement(Vp.A,{fontSize:"small"})),g.createElement(Vn.A,{primary:"Template Editor"})),i&&g.createElement(zn.A,{onClick:i},g.createElement(Wn.A,null,g.createElement(Wp.A,{fontSize:"small"})),g.createElement(Vn.A,{primary:"Installed Actions"})),a&&g.createElement(zn.A,{onClick:a},g.createElement(Wn.A,null,g.createElement(AA.A,{fontSize:"small"})),g.createElement(Vn.A,{primary:"Task List"})))))}const CA=(0,M.A)(s=>({code:{fontFamily:"Menlo, monospace",padding:s.spacing(1),backgroundColor:s.palette.type==="dark"?s.palette.grey[700]:s.palette.grey[300],display:"inline-block",borderRadius:5,border:`1px solid ${s.palette.grey[500]}`,position:"relative"},codeRequired:{"&::after":{position:"absolute",content:'"*"',top:0,right:s.spacing(.5),fontWeight:"bolder",color:s.palette.error.light}}})),kA=s=>g.createElement(Ce.A,{container:!0},s.examples.map((e,i)=>g.createElement(g.Fragment,{key:`example-${i}`},g.createElement(Ce.A,{item:!0,lg:3},g.createElement(pe.A,{padding:4},g.createElement(Ve.A,null,e.description))),g.createElement(Ce.A,{item:!0,lg:9},g.createElement(pe.A,{padding:1},g.createElement(bf.z,{text:e.example,showLineNumbers:!0,showCopyCodeButton:!0,language:"yaml"})))))),TA=()=>{const s=(0,gt.gf)(dn.z),e=CA(),{loading:i,value:a,error:l}=(0,Kt.A)(async()=>s.listActions()),[c,u]=(0,g.useState)({});if(i)return g.createElement(Ti.k,null);if(l)return g.createElement(g.Fragment,null,g.createElement(Zs.b,{error:l}),g.createElement(Bp.p,{missing:"info",title:"No information to display",description:"There are no actions installed or there was an issue communicating with backend."}));const f=p=>!p||p.length<1?g.createElement(Ve.A,null,"No schema defined"):g.createElement(Nt.A,{component:st.A},g.createElement(Rt.A,{size:"small"},g.createElement(hr.A,null,g.createElement(xn.A,null,g.createElement(Xt.A,null,"Name"),g.createElement(Xt.A,null,"Title"),g.createElement(Xt.A,null,"Description"),g.createElement(Xt.A,null,"Type"))),g.createElement(Gt.A,null,p))),d=p=>{var b,v;return p.type?p.type!=="array"?[p.type].flat():[`${p.type}(${(v=(b=p.items)==null?void 0:b.type)!=null?v:"unknown"})`]:["unknown"]},h=(p,b)=>{const v=b==null?void 0:b.properties;if(v)return Object.entries(v).map(x=>{var B,V,J;const[E]=x,w=`${p}.${E}`,A=x[1],C=Qt()(e.code,{[e.codeRequired]:(B=b.required)==null?void 0:B.includes(E)}),W=d(A);return g.createElement(g.Fragment,{key:w},g.createElement(xn.A,{key:w},g.createElement(Xt.A,null,g.createElement("div",{className:C},E)),g.createElement(Xt.A,null,A.title),g.createElement(Xt.A,null,A.description),g.createElement(Xt.A,null,W.map(Z=>Z.includes("object")?g.createElement(Sf.A,{label:Z,key:Z,icon:c[w]?g.createElement(Ir.A,null):g.createElement(ht.A,null),variant:"outlined",onClick:()=>u(le=>{const ce={...le};return ce[w]=!le[w],ce})}):g.createElement(Sf.A,{label:Z,key:Z,variant:"outlined"})))),g.createElement(xn.A,null,g.createElement(Xt.A,{style:{paddingBottom:0,paddingTop:0},colSpan:6},g.createElement(Ue.A,{in:c[w],timeout:"auto",unmountOnExit:!0},g.createElement(pe.A,{sx:{margin:1}},g.createElement(Ve.A,{variant:"h6",component:"div"},E),f(h(w,A.type==="array"?{properties:(J=(V=A.items)==null?void 0:V.properties)!=null?J:{}}:A)))))))})},m=(p,b,v)=>{if(v)return g.createElement(g.Fragment,null,g.createElement(Ve.A,{variant:"h6",component:"h4"},p),v.map((x,E)=>g.createElement("div",{key:E},f(h(`${b}.${E}`,x)))))};return a==null?void 0:a.map(p=>{var v,x,E,w,A,C;if(p.id.startsWith("legacy:"))return;const b=m("oneOf",`${p.id}.input`,(x=(v=p.schema)==null?void 0:v.input)==null?void 0:x.oneOf);return g.createElement(pe.A,{pb:4,key:p.id},g.createElement(Ve.A,{variant:"h4",component:"h2",className:e.code},p.id),p.description&&g.createElement(y.h,{content:p.description}),((E=p.schema)==null?void 0:E.input)&&g.createElement(pe.A,{pb:2},g.createElement(Ve.A,{variant:"h5",component:"h3"},"Input"),f(h(`${p.id}.input`,(w=p==null?void 0:p.schema)==null?void 0:w.input)),b),((A=p.schema)==null?void 0:A.output)&&g.createElement(pe.A,{pb:2},g.createElement(Ve.A,{variant:"h5",component:"h3"},"Output"),f(h(`${p.id}.output`,(C=p==null?void 0:p.schema)==null?void 0:C.output))),p.examples&&g.createElement(tt.A,null,g.createElement(Js.A,{expandIcon:g.createElement(ht.A,null)},g.createElement(Ve.A,{variant:"h5",component:"h3"},"Examples")),g.createElement(Bl.A,null,g.createElement(pe.A,{pb:2},g.createElement(kA,{examples:p.examples})))))})},PA=()=>{const s=(0,_.Zp)(),e=(0,bt.S)(Xe.Dg),i=(0,bt.S)(Xe.JX),a=(0,bt.S)(Xe.rQ),l={onEditorClicked:()=>s(e()),onActionsClicked:void 0,onTasksClicked:()=>s(i()),onCreateClicked:()=>s(a())};return g.createElement(_s.Y,{themeId:"home"},g.createElement(Xs.Y,{pageTitleOverride:"Create a New Component",title:"Installed actions",subtitle:"This is the collection of all installed actions"},g.createElement(jl,{...l})),g.createElement(ps.U,null,g.createElement(TA,null)))};var DA=S(29021),na=S(75202),Qs=S(77509),Pi=S(40703),qs=S(58007),MA=S(9684),IA=S(53364);const RA=(0,M.A)(s=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:s.spacing(1,0,1,0)},title:{margin:s.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:s.palette.text.primary},menuItem:{minHeight:s.spacing(6)},groupWrapper:{margin:s.spacing(1,1,2,1)}}),{name:"ScaffolderReactOwnerListPicker"});function NA(){return[{name:"Task Owner",items:[{id:"owned",label:"Owned",icon:MA.A},{id:"all",label:"All",icon:IA.A}]}]}const FA=s=>{const{filter:e,onSelectOwner:i}=s,a=RA(),l=NA();return g.createElement(Pi.A,{className:a.root},l.map(c=>g.createElement(g.Fragment,{key:c.name},g.createElement(Ve.A,{variant:"subtitle2",component:"span",className:a.title},c.name),g.createElement(Pi.A,{className:a.groupWrapper},g.createElement(qs.A,{disablePadding:!0,dense:!0,role:"menu"},c.items.map(u=>g.createElement(zn.A,{key:u.id,divider:!0,ContainerProps:{role:"menuitem"},onClick:()=>i(u.id),selected:u.id===e,className:a.menuItem,"data-testid":`owner-picker-${u.id}`},u.icon&&g.createElement(Wn.A,{className:a.listIcon},g.createElement(u.icon,{fontSize:"small"})),g.createElement(Vn.A,null,g.createElement(Ve.A,{variant:"body1"},u.label)))))))))};class gs extends Error{}class LA extends gs{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class $A extends gs{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class BA extends gs{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class eo extends gs{}class zp extends gs{constructor(e){super(`Invalid unit ${e}`)}}class Mn extends gs{}class Di extends gs{constructor(){super("Zone is an abstract class")}}const Oe="numeric",pr="short",Un="long",Wl={year:Oe,month:Oe,day:Oe},Up={year:Oe,month:pr,day:Oe},jA={year:Oe,month:pr,day:Oe,weekday:pr},Hp={year:Oe,month:Un,day:Oe},Kp={year:Oe,month:Un,day:Oe,weekday:Un},Gp={hour:Oe,minute:Oe},Yp={hour:Oe,minute:Oe,second:Oe},Jp={hour:Oe,minute:Oe,second:Oe,timeZoneName:pr},Zp={hour:Oe,minute:Oe,second:Oe,timeZoneName:Un},_p={hour:Oe,minute:Oe,hourCycle:"h23"},Xp={hour:Oe,minute:Oe,second:Oe,hourCycle:"h23"},Qp={hour:Oe,minute:Oe,second:Oe,hourCycle:"h23",timeZoneName:pr},qp={hour:Oe,minute:Oe,second:Oe,hourCycle:"h23",timeZoneName:Un},eg={year:Oe,month:Oe,day:Oe,hour:Oe,minute:Oe},tg={year:Oe,month:Oe,day:Oe,hour:Oe,minute:Oe,second:Oe},ng={year:Oe,month:pr,day:Oe,hour:Oe,minute:Oe},rg={year:Oe,month:pr,day:Oe,hour:Oe,minute:Oe,second:Oe},WA={year:Oe,month:pr,day:Oe,weekday:pr,hour:Oe,minute:Oe},ig={year:Oe,month:Un,day:Oe,hour:Oe,minute:Oe,timeZoneName:pr},sg={year:Oe,month:Un,day:Oe,hour:Oe,minute:Oe,second:Oe,timeZoneName:pr},og={year:Oe,month:Un,day:Oe,weekday:Un,hour:Oe,minute:Oe,timeZoneName:Un},ag={year:Oe,month:Un,day:Oe,weekday:Un,hour:Oe,minute:Oe,second:Oe,timeZoneName:Un};class ra{get type(){throw new Di}get name(){throw new Di}get ianaName(){return this.name}get isUniversal(){throw new Di}offsetName(e,i){throw new Di}formatOffset(e,i){throw new Di}offset(e){throw new Di}equals(e){throw new Di}get isValid(){throw new Di}}let Af=null;class Vl extends ra{static get instance(){return Af===null&&(Af=new Vl),Af}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:a}){return Mg(e,i,a)}formatOffset(e,i){return aa(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let zl={};function VA(s){return zl[s]||(zl[s]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:s,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),zl[s]}const zA={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function UA(s,e){const i=s.format(e).replace(/\u200E/g,""),a=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,l,c,u,f,d,h,m]=a;return[u,l,c,f,d,h,m]}function HA(s,e){const i=s.formatToParts(e),a=[];for(let l=0;l<i.length;l++){const{type:c,value:u}=i[l],f=zA[c];c==="era"?a[f]=u:Ge(f)||(a[f]=parseInt(u,10))}return a}let Ul={};class ii extends ra{static create(e){return Ul[e]||(Ul[e]=new ii(e)),Ul[e]}static resetCache(){Ul={},zl={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=ii.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:a}){return Mg(e,i,a,this.name)}formatOffset(e,i){return aa(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const a=VA(this.name);let[l,c,u,f,d,h,m]=a.formatToParts?HA(a,i):UA(a,i);f==="BC"&&(l=-Math.abs(l)+1);const b=Jl({year:l,month:c,day:u,hour:d===24?0:d,minute:h,second:m,millisecond:0});let v=+i;const x=v%1e3;return v-=x>=0?x:1e3+x,(b-v)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let lg={};function KA(s,e={}){const i=JSON.stringify([s,e]);let a=lg[i];return a||(a=new Intl.ListFormat(s,e),lg[i]=a),a}let Of={};function Cf(s,e={}){const i=JSON.stringify([s,e]);let a=Of[i];return a||(a=new Intl.DateTimeFormat(s,e),Of[i]=a),a}let kf={};function GA(s,e={}){const i=JSON.stringify([s,e]);let a=kf[i];return a||(a=new Intl.NumberFormat(s,e),kf[i]=a),a}let Tf={};function YA(s,e={}){const{base:i,...a}=e,l=JSON.stringify([s,a]);let c=Tf[l];return c||(c=new Intl.RelativeTimeFormat(s,e),Tf[l]=c),c}let ia=null;function JA(){return ia||(ia=new Intl.DateTimeFormat().resolvedOptions().locale,ia)}let cg={};function ZA(s){let e=cg[s];if(!e){const i=new Intl.Locale(s);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,cg[s]=e}return e}function _A(s){const e=s.indexOf("-x-");e!==-1&&(s=s.substring(0,e));const i=s.indexOf("-u-");if(i===-1)return[s];{let a,l;try{a=Cf(s).resolvedOptions(),l=s}catch{const d=s.substring(0,i);a=Cf(d).resolvedOptions(),l=d}const{numberingSystem:c,calendar:u}=a;return[l,c,u]}}function XA(s,e,i){return(i||e)&&(s.includes("-u-")||(s+="-u"),i&&(s+=`-ca-${i}`),e&&(s+=`-nu-${e}`)),s}function QA(s){const e=[];for(let i=1;i<=12;i++){const a=Ke.utc(2009,i,1);e.push(s(a))}return e}function qA(s){const e=[];for(let i=1;i<=7;i++){const a=Ke.utc(2016,11,13+i);e.push(s(a))}return e}function Hl(s,e,i,a){const l=s.listingMode();return l==="error"?null:l==="en"?i(e):a(e)}function eO(s){return s.numberingSystem&&s.numberingSystem!=="latn"?!1:s.numberingSystem==="latn"||!s.locale||s.locale.startsWith("en")||new Intl.DateTimeFormat(s.intl).resolvedOptions().numberingSystem==="latn"}class tO{constructor(e,i,a){this.padTo=a.padTo||0,this.floor=a.floor||!1;const{padTo:l,floor:c,...u}=a;if(!i||Object.keys(u).length>0){const f={useGrouping:!1,...a};a.padTo>0&&(f.minimumIntegerDigits=a.padTo),this.inf=GA(e,f)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):Ff(e,3);return Yt(i,this.padTo)}}}class nO{constructor(e,i,a){this.opts=a,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const u=-1*(e.offset/60),f=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;e.offset!==0&&ii.create(f).valid?(l=f,this.dt=e):(l="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,l=e.zone.name):(l="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const c={...this.opts};c.timeZone=c.timeZone||l,this.dtf=Cf(i,c)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const a=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:a}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class rO{constructor(e,i,a){this.opts={style:"long",...a},!i&&kg()&&(this.rtf=YA(e,a))}format(e,i){return this.rtf?this.rtf.format(e,i):wO(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const iO={firstDay:1,minimalDays:4,weekend:[6,7]};class St{static fromOpts(e){return St.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,a,l,c=!1){const u=e||zt.defaultLocale,f=u||(c?"en-US":JA()),d=i||zt.defaultNumberingSystem,h=a||zt.defaultOutputCalendar,m=Rf(l)||zt.defaultWeekSettings;return new St(f,d,h,m,u)}static resetCache(){ia=null,Of={},kf={},Tf={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:a,weekSettings:l}={}){return St.create(e,i,a,l)}constructor(e,i,a,l,c){const[u,f,d]=_A(e);this.locale=u,this.numberingSystem=i||f||null,this.outputCalendar=a||d||null,this.weekSettings=l,this.intl=XA(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=c,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=eO(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:St.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Rf(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return Hl(this,e,Ng,()=>{const a=i?{month:e,day:"numeric"}:{month:e},l=i?"format":"standalone";return this.monthsCache[l][e]||(this.monthsCache[l][e]=QA(c=>this.extract(c,a,"month"))),this.monthsCache[l][e]})}weekdays(e,i=!1){return Hl(this,e,$g,()=>{const a=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},l=i?"format":"standalone";return this.weekdaysCache[l][e]||(this.weekdaysCache[l][e]=qA(c=>this.extract(c,a,"weekday"))),this.weekdaysCache[l][e]})}meridiems(){return Hl(this,void 0,()=>Bg,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ke.utc(2016,11,13,9),Ke.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Hl(this,e,jg,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[Ke.utc(-40,1,1),Ke.utc(2017,1,1)].map(a=>this.extract(a,i,"era"))),this.eraCache[e]})}extract(e,i,a){const l=this.dtFormatter(e,i),c=l.formatToParts(),u=c.find(f=>f.type.toLowerCase()===a);return u?u.value:null}numberFormatter(e={}){return new tO(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new nO(e,this.intl,i)}relFormatter(e={}){return new rO(this.intl,this.isEnglish(),e)}listFormatter(e={}){return KA(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Tg()?ZA(this.locale):iO}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let Pf=null;class wn extends ra{static get utcInstance(){return Pf===null&&(Pf=new wn(0)),Pf}static instance(e){return e===0?wn.utcInstance:new wn(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new wn(Zl(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${aa(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${aa(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return aa(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class sO extends ra{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Mi(s,e){let i;if(Ge(s)||s===null)return e;if(s instanceof ra)return s;if(lO(s)){const a=s.toLowerCase();return a==="default"?e:a==="local"||a==="system"?Vl.instance:a==="utc"||a==="gmt"?wn.utcInstance:wn.parseSpecifier(a)||ii.create(s)}else return ys(s)?wn.instance(s):typeof s=="object"&&"offset"in s&&typeof s.offset=="function"?s:new sO(s)}let ug=()=>Date.now(),fg="system",dg=null,hg=null,mg=null,pg=60,gg,yg=null;class zt{static get now(){return ug}static set now(e){ug=e}static set defaultZone(e){fg=e}static get defaultZone(){return Mi(fg,Vl.instance)}static get defaultLocale(){return dg}static set defaultLocale(e){dg=e}static get defaultNumberingSystem(){return hg}static set defaultNumberingSystem(e){hg=e}static get defaultOutputCalendar(){return mg}static set defaultOutputCalendar(e){mg=e}static get defaultWeekSettings(){return yg}static set defaultWeekSettings(e){yg=Rf(e)}static get twoDigitCutoffYear(){return pg}static set twoDigitCutoffYear(e){pg=e%100}static get throwOnInvalid(){return gg}static set throwOnInvalid(e){gg=e}static resetCaches(){St.resetCache(),ii.resetCache()}}class gr{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const vg=[0,31,59,90,120,151,181,212,243,273,304,334],bg=[0,31,60,91,121,152,182,213,244,274,305,335];function nr(s,e){return new gr("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${s}, which is invalid`)}function Df(s,e,i){const a=new Date(Date.UTC(s,e-1,i));s<100&&s>=0&&a.setUTCFullYear(a.getUTCFullYear()-1900);const l=a.getUTCDay();return l===0?7:l}function Sg(s,e,i){return i+(sa(s)?bg:vg)[e-1]}function xg(s,e){const i=sa(s)?bg:vg,a=i.findIndex(c=>c<e),l=e-i[a];return{month:a+1,day:l}}function Mf(s,e){return(s-e+7)%7+1}function Kl(s,e=4,i=1){const{year:a,month:l,day:c}=s,u=Sg(a,l,c),f=Mf(Df(a,l,c),i);let d=Math.floor((u-f+14-e)/7),h;return d<1?(h=a-1,d=oa(h,e,i)):d>oa(a,e,i)?(h=a+1,d=1):h=a,{weekYear:h,weekNumber:d,weekday:f,...Xl(s)}}function Eg(s,e=4,i=1){const{weekYear:a,weekNumber:l,weekday:c}=s,u=Mf(Df(a,1,e),i),f=no(a);let d=l*7+c-u-7+e,h;d<1?(h=a-1,d+=no(h)):d>f?(h=a+1,d-=no(a)):h=a;const{month:m,day:p}=xg(h,d);return{year:h,month:m,day:p,...Xl(s)}}function If(s){const{year:e,month:i,day:a}=s,l=Sg(e,i,a);return{year:e,ordinal:l,...Xl(s)}}function wg(s){const{year:e,ordinal:i}=s,{month:a,day:l}=xg(e,i);return{year:e,month:a,day:l,...Xl(s)}}function Ag(s,e){if(!Ge(s.localWeekday)||!Ge(s.localWeekNumber)||!Ge(s.localWeekYear)){if(!Ge(s.weekday)||!Ge(s.weekNumber)||!Ge(s.weekYear))throw new eo("Cannot mix locale-based week fields with ISO-based week fields");return Ge(s.localWeekday)||(s.weekday=s.localWeekday),Ge(s.localWeekNumber)||(s.weekNumber=s.localWeekNumber),Ge(s.localWeekYear)||(s.weekYear=s.localWeekYear),delete s.localWeekday,delete s.localWeekNumber,delete s.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function oO(s,e=4,i=1){const a=Gl(s.weekYear),l=rr(s.weekNumber,1,oa(s.weekYear,e,i)),c=rr(s.weekday,1,7);return a?l?c?!1:nr("weekday",s.weekday):nr("week",s.weekNumber):nr("weekYear",s.weekYear)}function aO(s){const e=Gl(s.year),i=rr(s.ordinal,1,no(s.year));return e?i?!1:nr("ordinal",s.ordinal):nr("year",s.year)}function Og(s){const e=Gl(s.year),i=rr(s.month,1,12),a=rr(s.day,1,Yl(s.year,s.month));return e?i?a?!1:nr("day",s.day):nr("month",s.month):nr("year",s.year)}function Cg(s){const{hour:e,minute:i,second:a,millisecond:l}=s,c=rr(e,0,23)||e===24&&i===0&&a===0&&l===0,u=rr(i,0,59),f=rr(a,0,59),d=rr(l,0,999);return c?u?f?d?!1:nr("millisecond",l):nr("second",a):nr("minute",i):nr("hour",e)}function Ge(s){return typeof s=="undefined"}function ys(s){return typeof s=="number"}function Gl(s){return typeof s=="number"&&s%1===0}function lO(s){return typeof s=="string"}function cO(s){return Object.prototype.toString.call(s)==="[object Date]"}function kg(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Tg(){try{return typeof Intl!="undefined"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function uO(s){return Array.isArray(s)?s:[s]}function Pg(s,e,i){if(s.length!==0)return s.reduce((a,l)=>{const c=[e(l),l];return a&&i(a[0],c[0])===a[0]?a:c},null)[1]}function fO(s,e){return e.reduce((i,a)=>(i[a]=s[a],i),{})}function to(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Rf(s){if(s==null)return null;if(typeof s!="object")throw new Mn("Week settings must be an object");if(!rr(s.firstDay,1,7)||!rr(s.minimalDays,1,7)||!Array.isArray(s.weekend)||s.weekend.some(e=>!rr(e,1,7)))throw new Mn("Invalid week settings");return{firstDay:s.firstDay,minimalDays:s.minimalDays,weekend:Array.from(s.weekend)}}function rr(s,e,i){return Gl(s)&&s>=e&&s<=i}function dO(s,e){return s-e*Math.floor(s/e)}function Yt(s,e=2){const i=s<0;let a;return i?a="-"+(""+-s).padStart(e,"0"):a=(""+s).padStart(e,"0"),a}function Ii(s){if(!(Ge(s)||s===null||s===""))return parseInt(s,10)}function vs(s){if(!(Ge(s)||s===null||s===""))return parseFloat(s)}function Nf(s){if(!(Ge(s)||s===null||s==="")){const e=parseFloat("0."+s)*1e3;return Math.floor(e)}}function Ff(s,e,i=!1){const a=10**e;return(i?Math.trunc:Math.round)(s*a)/a}function sa(s){return s%4===0&&(s%100!==0||s%400===0)}function no(s){return sa(s)?366:365}function Yl(s,e){const i=dO(e-1,12)+1,a=s+(e-i)/12;return i===2?sa(a)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Jl(s){let e=Date.UTC(s.year,s.month-1,s.day,s.hour,s.minute,s.second,s.millisecond);return s.year<100&&s.year>=0&&(e=new Date(e),e.setUTCFullYear(s.year,s.month-1,s.day)),+e}function Dg(s,e,i){return-Mf(Df(s,1,e),i)+e-1}function oa(s,e=4,i=1){const a=Dg(s,e,i),l=Dg(s+1,e,i);return(no(s)-a+l)/7}function Lf(s){return s>99?s:s>zt.twoDigitCutoffYear?1900+s:2e3+s}function Mg(s,e,i,a=null){const l=new Date(s),c={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};a&&(c.timeZone=a);const u={timeZoneName:e,...c},f=new Intl.DateTimeFormat(i,u).formatToParts(l).find(d=>d.type.toLowerCase()==="timezonename");return f?f.value:null}function Zl(s,e){let i=parseInt(s,10);Number.isNaN(i)&&(i=0);const a=parseInt(e,10)||0,l=i<0||Object.is(i,-0)?-a:a;return i*60+l}function Ig(s){const e=Number(s);if(typeof s=="boolean"||s===""||Number.isNaN(e))throw new Mn(`Invalid unit value ${s}`);return e}function _l(s,e){const i={};for(const a in s)if(to(s,a)){const l=s[a];if(l==null)continue;i[e(a)]=Ig(l)}return i}function aa(s,e){const i=Math.trunc(Math.abs(s/60)),a=Math.trunc(Math.abs(s%60)),l=s>=0?"+":"-";switch(e){case"short":return`${l}${Yt(i,2)}:${Yt(a,2)}`;case"narrow":return`${l}${i}${a>0?`:${a}`:""}`;case"techie":return`${l}${Yt(i,2)}${Yt(a,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Xl(s){return fO(s,["hour","minute","second","millisecond"])}function Ft(s){return JSON.stringify(s,Object.keys(s).sort())}const hO=["January","February","March","April","May","June","July","August","September","October","November","December"],Rg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mO=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ng(s){switch(s){case"narrow":return[...mO];case"short":return[...Rg];case"long":return[...hO];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Fg=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Lg=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],pO=["M","T","W","T","F","S","S"];function $g(s){switch(s){case"narrow":return[...pO];case"short":return[...Lg];case"long":return[...Fg];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Bg=["AM","PM"],gO=["Before Christ","Anno Domini"],yO=["BC","AD"],vO=["B","A"];function jg(s){switch(s){case"narrow":return[...vO];case"short":return[...yO];case"long":return[...gO];default:return null}}function bO(s){return Bg[s.hour<12?0:1]}function SO(s,e){return $g(e)[s.weekday-1]}function xO(s,e){return Ng(e)[s.month-1]}function EO(s,e){return jg(e)[s.year<0?0:1]}function wO(s,e,i="always",a=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},c=["hours","minutes","seconds"].indexOf(s)===-1;if(i==="auto"&&c){const p=s==="days";switch(e){case 1:return p?"tomorrow":`next ${l[s][0]}`;case-1:return p?"yesterday":`last ${l[s][0]}`;case 0:return p?"today":`this ${l[s][0]}`;default:}}const u=Object.is(e,-0)||e<0,f=Math.abs(e),d=f===1,h=l[s],m=a?d?h[1]:h[2]||h[1]:d?l[s][0]:s;return u?`${f} ${m} ago`:`in ${f} ${m}`}function E6(s){const e=pick(s,["weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle"]),i=Ft(e),a="EEEE, LLLL d, yyyy, h:mm a";switch(i){case Ft(Formats.DATE_SHORT):return"M/d/yyyy";case Ft(Formats.DATE_MED):return"LLL d, yyyy";case Ft(Formats.DATE_MED_WITH_WEEKDAY):return"EEE, LLL d, yyyy";case Ft(Formats.DATE_FULL):return"LLLL d, yyyy";case Ft(Formats.DATE_HUGE):return"EEEE, LLLL d, yyyy";case Ft(Formats.TIME_SIMPLE):return"h:mm a";case Ft(Formats.TIME_WITH_SECONDS):return"h:mm:ss a";case Ft(Formats.TIME_WITH_SHORT_OFFSET):return"h:mm a";case Ft(Formats.TIME_WITH_LONG_OFFSET):return"h:mm a";case Ft(Formats.TIME_24_SIMPLE):return"HH:mm";case Ft(Formats.TIME_24_WITH_SECONDS):return"HH:mm:ss";case Ft(Formats.TIME_24_WITH_SHORT_OFFSET):return"HH:mm";case Ft(Formats.TIME_24_WITH_LONG_OFFSET):return"HH:mm";case Ft(Formats.DATETIME_SHORT):return"M/d/yyyy, h:mm a";case Ft(Formats.DATETIME_MED):return"LLL d, yyyy, h:mm a";case Ft(Formats.DATETIME_FULL):return"LLLL d, yyyy, h:mm a";case Ft(Formats.DATETIME_HUGE):return a;case Ft(Formats.DATETIME_SHORT_WITH_SECONDS):return"M/d/yyyy, h:mm:ss a";case Ft(Formats.DATETIME_MED_WITH_SECONDS):return"LLL d, yyyy, h:mm:ss a";case Ft(Formats.DATETIME_MED_WITH_WEEKDAY):return"EEE, d LLL yyyy, h:mm a";case Ft(Formats.DATETIME_FULL_WITH_SECONDS):return"LLLL d, yyyy, h:mm:ss a";case Ft(Formats.DATETIME_HUGE_WITH_SECONDS):return"EEEE, LLLL d, yyyy, h:mm:ss a";default:return a}}function Wg(s,e){let i="";for(const a of s)a.literal?i+=a.val:i+=e(a.val);return i}const AO={D:Wl,DD:Up,DDD:Hp,DDDD:Kp,t:Gp,tt:Yp,ttt:Jp,tttt:Zp,T:_p,TT:Xp,TTT:Qp,TTTT:qp,f:eg,ff:ng,fff:ig,ffff:og,F:tg,FF:rg,FFF:sg,FFFF:ag};class hn{static create(e,i={}){return new hn(e,i)}static parseFormat(e){let i=null,a="",l=!1;const c=[];for(let u=0;u<e.length;u++){const f=e.charAt(u);f==="'"?(a.length>0&&c.push({literal:l||/^\s+$/.test(a),val:a}),i=null,a="",l=!l):l||f===i?a+=f:(a.length>0&&c.push({literal:/^\s+$/.test(a),val:a}),a=f,i=f)}return a.length>0&&c.push({literal:l||/^\s+$/.test(a),val:a}),c}static macroTokenToFormatOpts(e){return AO[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Yt(e,i);const a={...this.opts};return i>0&&(a.padTo=i),this.loc.numberFormatter(a).format(e)}formatDateTimeFromString(e,i){const a=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",c=(v,x)=>this.loc.extract(e,v,x),u=v=>e.isOffsetFixed&&e.offset===0&&v.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,v.format):"",f=()=>a?bO(e):c({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(v,x)=>a?xO(e,v):c(x?{month:v}:{month:v,day:"numeric"},"month"),h=(v,x)=>a?SO(e,v):c(x?{weekday:v}:{weekday:v,month:"long",day:"numeric"},"weekday"),m=v=>{const x=hn.macroTokenToFormatOpts(v);return x?this.formatWithSystemDefault(e,x):v},p=v=>a?EO(e,v):c({era:v},"era"),b=v=>{switch(v){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return f();case"d":return l?c({day:"numeric"},"day"):this.num(e.day);case"dd":return l?c({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return l?c({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return l?c({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return l?c({month:"numeric"},"month"):this.num(e.month);case"MM":return l?c({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return l?c({year:"numeric"},"year"):this.num(e.year);case"yy":return l?c({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return l?c({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return l?c({year:"numeric"},"year"):this.num(e.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return m(v)}};return Wg(hn.parseFormat(i),b)}formatDurationFromString(e,i){const a=d=>{switch(d[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},l=d=>h=>{const m=a(h);return m?this.num(d.get(m),h.length):h},c=hn.parseFormat(i),u=c.reduce((d,{literal:h,val:m})=>h?d:d.concat(m),[]),f=e.shiftTo(...u.map(a).filter(d=>d));return Wg(c,l(f))}}const Vg=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ro(...s){const e=s.reduce((i,a)=>i+a.source,"");return RegExp(`^${e}$`)}function io(...s){return e=>s.reduce(([i,a,l],c)=>{const[u,f,d]=c(e,l);return[{...i,...u},f||a,d]},[{},null,1]).slice(0,2)}function so(s,...e){if(s==null)return[null,null];for(const[i,a]of e){const l=i.exec(s);if(l)return a(l)}return[null,null]}function zg(...s){return(e,i)=>{const a={};let l;for(l=0;l<s.length;l++)a[s[l]]=Ii(e[i+l]);return[a,null,i+l]}}const Ug=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,OO=`(?:${Ug.source}?(?:\\[(${Vg.source})\\])?)?`,$f=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Hg=RegExp(`${$f.source}${OO}`),Bf=RegExp(`(?:T${Hg.source})?`),CO=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,kO=/(\d{4})-?W(\d\d)(?:-?(\d))?/,TO=/(\d{4})-?(\d{3})/,PO=zg("weekYear","weekNumber","weekDay"),DO=zg("year","ordinal"),MO=/(\d{4})-(\d\d)-(\d\d)/,Kg=RegExp(`${$f.source} ?(?:${Ug.source}|(${Vg.source}))?`),IO=RegExp(`(?: ${Kg.source})?`);function oo(s,e,i){const a=s[e];return Ge(a)?i:Ii(a)}function RO(s,e){return[{year:oo(s,e),month:oo(s,e+1,1),day:oo(s,e+2,1)},null,e+3]}function ao(s,e){return[{hours:oo(s,e,0),minutes:oo(s,e+1,0),seconds:oo(s,e+2,0),milliseconds:Nf(s[e+3])},null,e+4]}function la(s,e){const i=!s[e]&&!s[e+1],a=Zl(s[e+1],s[e+2]),l=i?null:wn.instance(a);return[{},l,e+3]}function ca(s,e){const i=s[e]?ii.create(s[e]):null;return[{},i,e+1]}const NO=RegExp(`^T?${$f.source}$`),FO=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function LO(s){const[e,i,a,l,c,u,f,d,h]=s,m=e[0]==="-",p=d&&d[0]==="-",b=(v,x=!1)=>v!==void 0&&(x||v&&m)?-v:v;return[{years:b(vs(i)),months:b(vs(a)),weeks:b(vs(l)),days:b(vs(c)),hours:b(vs(u)),minutes:b(vs(f)),seconds:b(vs(d),d==="-0"),milliseconds:b(Nf(h),p)}]}const $O={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function jf(s,e,i,a,l,c,u){const f={year:e.length===2?Lf(Ii(e)):Ii(e),month:Rg.indexOf(i)+1,day:Ii(a),hour:Ii(l),minute:Ii(c)};return u&&(f.second=Ii(u)),s&&(f.weekday=s.length>3?Fg.indexOf(s)+1:Lg.indexOf(s)+1),f}const BO=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function jO(s){const[,e,i,a,l,c,u,f,d,h,m,p]=s,b=jf(e,l,a,i,c,u,f);let v;return d?v=$O[d]:h?v=0:v=Zl(m,p),[b,new wn(v)]}function WO(s){return s.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const VO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,zO=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,UO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Gg(s){const[,e,i,a,l,c,u,f]=s;return[jf(e,l,a,i,c,u,f),wn.utcInstance]}function HO(s){const[,e,i,a,l,c,u,f]=s;return[jf(e,f,i,a,l,c,u),wn.utcInstance]}const KO=ro(CO,Bf),GO=ro(kO,Bf),YO=ro(TO,Bf),JO=ro(Hg),Yg=io(RO,ao,la,ca),ZO=io(PO,ao,la,ca),_O=io(DO,ao,la,ca),XO=io(ao,la,ca);function QO(s){return so(s,[KO,Yg],[GO,ZO],[YO,_O],[JO,XO])}function qO(s){return so(WO(s),[BO,jO])}function eC(s){return so(s,[VO,Gg],[zO,Gg],[UO,HO])}function tC(s){return so(s,[FO,LO])}const nC=io(ao);function rC(s){return so(s,[NO,nC])}const iC=ro(MO,IO),sC=ro(Kg),oC=io(ao,la,ca);function aC(s){return so(s,[iC,Yg],[sC,oC])}const Jg="Invalid Duration",Zg={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},lC={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Zg},ir=146097/400,lo=146097/4800,cC={years:{quarters:4,months:12,weeks:ir/7,days:ir,hours:ir*24,minutes:ir*24*60,seconds:ir*24*60*60,milliseconds:ir*24*60*60*1e3},quarters:{months:3,weeks:ir/28,days:ir/4,hours:ir*24/4,minutes:ir*24*60/4,seconds:ir*24*60*60/4,milliseconds:ir*24*60*60*1e3/4},months:{weeks:lo/7,days:lo,hours:lo*24,minutes:lo*24*60,seconds:lo*24*60*60,milliseconds:lo*24*60*60*1e3},...Zg},bs=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],uC=bs.slice(0).reverse();function Ri(s,e,i=!1){const a={values:i?e.values:{...s.values,...e.values||{}},loc:s.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||s.conversionAccuracy,matrix:e.matrix||s.matrix};return new ot(a)}function _g(s,e){var a;let i=(a=e.milliseconds)!=null?a:0;for(const l of uC.slice(1))e[l]&&(i+=e[l]*s[l].milliseconds);return i}function Xg(s,e){const i=_g(s,e)<0?-1:1;bs.reduceRight((a,l)=>{if(Ge(e[l]))return a;if(a){const c=e[a]*i,u=s[l][a],f=Math.floor(c/u);e[l]+=f*i,e[a]-=f*u*i}return l},null),bs.reduce((a,l)=>{if(Ge(e[l]))return a;if(a){const c=e[a]%1;e[a]-=c,e[l]+=c*s[a][l]}return l},null)}function fC(s){const e={};for(const[i,a]of Object.entries(s))a!==0&&(e[i]=a);return e}class ot{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let a=i?cC:lC;e.matrix&&(a=e.matrix),this.values=e.values,this.loc=e.loc||St.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=a,this.isLuxonDuration=!0}static fromMillis(e,i){return ot.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Mn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new ot({values:_l(e,ot.normalizeUnit),loc:St.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(ys(e))return ot.fromMillis(e);if(ot.isDuration(e))return e;if(typeof e=="object")return ot.fromObject(e);throw new Mn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[a]=tC(e);return a?ot.fromObject(a,i):ot.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[a]=rC(e);return a?ot.fromObject(a,i):ot.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Mn("need to specify a reason the Duration is invalid");const a=e instanceof gr?e:new gr(e,i);if(zt.throwOnInvalid)throw new BA(a);return new ot({invalid:a})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new zp(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const a={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?hn.create(this.loc,a).formatDurationFromString(this,e):Jg}toHuman(e={}){if(!this.isValid)return Jg;const i=bs.map(a=>{const l=this.values[a];return Ge(l)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:a.slice(0,-1)}).format(l)}).filter(a=>a);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Ff(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Ke.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?_g(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=ot.fromDurationLike(e),a={};for(const l of bs)(to(i.values,l)||to(this.values,l))&&(a[l]=i.get(l)+this.get(l));return Ri(this,{values:a},!0)}minus(e){if(!this.isValid)return this;const i=ot.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const a of Object.keys(this.values))i[a]=Ig(e(this.values[a],a));return Ri(this,{values:i},!0)}get(e){return this[ot.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,..._l(e,ot.normalizeUnit)};return Ri(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:a,matrix:l}={}){const u={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:l,conversionAccuracy:a};return Ri(this,u)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Xg(this.matrix,e),Ri(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=fC(this.normalize().shiftToAll().toObject());return Ri(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(u=>ot.normalizeUnit(u));const i={},a={},l=this.toObject();let c;for(const u of bs)if(e.indexOf(u)>=0){c=u;let f=0;for(const h in a)f+=this.matrix[h][u]*a[h],a[h]=0;ys(l[u])&&(f+=l[u]);const d=Math.trunc(f);i[u]=d,a[u]=(f*1e3-d*1e3)/1e3}else ys(l[u])&&(a[u]=l[u]);for(const u in a)a[u]!==0&&(i[c]+=u===c?a[u]:a[u]/this.matrix[c][u]);return Xg(this.matrix,i),Ri(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Ri(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(a,l){return a===void 0||a===0?l===void 0||l===0:a===l}for(const a of bs)if(!i(this.values[a],e.values[a]))return!1;return!0}}const co="Invalid Interval";function dC(s,e){return!s||!s.isValid?Pt.invalid("missing or invalid start"):!e||!e.isValid?Pt.invalid("missing or invalid end"):e<s?Pt.invalid("end before start",`The end of an interval must be after its start, but you had start=${s.toISO()} and end=${e.toISO()}`):null}class Pt{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Mn("need to specify a reason the Interval is invalid");const a=e instanceof gr?e:new gr(e,i);if(zt.throwOnInvalid)throw new $A(a);return new Pt({invalid:a})}static fromDateTimes(e,i){const a=fa(e),l=fa(i),c=dC(a,l);return c==null?new Pt({start:a,end:l}):c}static after(e,i){const a=ot.fromDurationLike(i),l=fa(e);return Pt.fromDateTimes(l,l.plus(a))}static before(e,i){const a=ot.fromDurationLike(i),l=fa(e);return Pt.fromDateTimes(l.minus(a),l)}static fromISO(e,i){const[a,l]=(e||"").split("/",2);if(a&&l){let c,u;try{c=Ke.fromISO(a,i),u=c.isValid}catch{u=!1}let f,d;try{f=Ke.fromISO(l,i),d=f.isValid}catch{d=!1}if(u&&d)return Pt.fromDateTimes(c,f);if(u){const h=ot.fromISO(l,i);if(h.isValid)return Pt.after(c,h)}else if(d){const h=ot.fromISO(a,i);if(h.isValid)return Pt.before(f,h)}}return Pt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const a=this.start.startOf(e,i);let l;return i!=null&&i.useLocaleWeeks?l=this.end.reconfigure({locale:a.locale}):l=this.end,l=l.startOf(e,i),Math.floor(l.diff(a,e).get(e))+(l.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Pt.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(fa).filter(u=>this.contains(u)).sort((u,f)=>u.toMillis()-f.toMillis()),a=[];let{s:l}=this,c=0;for(;l<this.e;){const u=i[c]||this.e,f=+u>+this.e?this.e:u;a.push(Pt.fromDateTimes(l,f)),l=f,c+=1}return a}splitBy(e){const i=ot.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:a}=this,l=1,c;const u=[];for(;a<this.e;){const f=this.start.plus(i.mapUnits(d=>d*l));c=+f>+this.e?this.e:f,u.push(Pt.fromDateTimes(a,c)),a=c,l+=1}return u}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,a=this.e<e.e?this.e:e.e;return i>=a?null:Pt.fromDateTimes(i,a)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,a=this.e>e.e?this.e:e.e;return Pt.fromDateTimes(i,a)}static merge(e){const[i,a]=e.sort((l,c)=>l.s-c.s).reduce(([l,c],u)=>c?c.overlaps(u)||c.abutsStart(u)?[l,c.union(u)]:[l.concat([c]),u]:[l,u],[[],null]);return a&&i.push(a),i}static xor(e){let i=null,a=0;const l=[],c=e.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),u=Array.prototype.concat(...c),f=u.sort((d,h)=>d.time-h.time);for(const d of f)a+=d.type==="s"?1:-1,a===1?i=d.time:(i&&+i!=+d.time&&l.push(Pt.fromDateTimes(i,d.time)),i=null);return Pt.merge(l)}difference(...e){return Pt.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:co}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Wl,i={}){return this.isValid?hn.create(this.s.loc.clone(i),e).formatInterval(this):co}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:co}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:co}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:co}toFormat(e,{separator:i=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:co}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):ot.invalid(this.invalidReason)}mapEndpoints(e){return Pt.fromDateTimes(e(this.s),e(this.e))}}class Ql{static hasDST(e=zt.defaultZone){const i=Ke.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return ii.isValidZone(e)}static normalizeZone(e){return Mi(e,zt.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||St.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||St.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||St.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:a=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||St.create(i,a,c)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:a=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||St.create(i,a,c)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:a=null,locObj:l=null}={}){return(l||St.create(i,a,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:a=null,locObj:l=null}={}){return(l||St.create(i,a,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return St.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return St.create(i,null,"gregory").eras(e)}static features(){return{relative:kg(),localeWeek:Tg()}}}function Qg(s,e){const i=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),a=i(e)-i(s);return Math.floor(ot.fromMillis(a).as("days"))}function hC(s,e,i){const a=[["years",(d,h)=>h.year-d.year],["quarters",(d,h)=>h.quarter-d.quarter+(h.year-d.year)*4],["months",(d,h)=>h.month-d.month+(h.year-d.year)*12],["weeks",(d,h)=>{const m=Qg(d,h);return(m-m%7)/7}],["days",Qg]],l={},c=s;let u,f;for(const[d,h]of a)i.indexOf(d)>=0&&(u=d,l[d]=h(s,e),f=c.plus(l),f>e?(l[d]--,s=c.plus(l),s>e&&(f=s,l[d]--,s=c.plus(l))):s=f);return[s,l,f,u]}function mC(s,e,i,a){let[l,c,u,f]=hC(s,e,i);const d=e-l,h=i.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);h.length===0&&(u<e&&(u=l.plus({[f]:1})),u!==l&&(c[f]=(c[f]||0)+d/(u-l)));const m=ot.fromObject(c,a);return h.length>0?ot.fromMillis(d,a).shiftTo(...h).plus(m):m}const Wf={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},qg={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},pC=Wf.hanidec.replace(/[\[|\]]/g,"").split("");function gC(s){let e=parseInt(s,10);if(isNaN(e)){e="";for(let i=0;i<s.length;i++){const a=s.charCodeAt(i);if(s[i].search(Wf.hanidec)!==-1)e+=pC.indexOf(s[i]);else for(const l in qg){const[c,u]=qg[l];a>=c&&a<=u&&(e+=a-c)}}return parseInt(e,10)}else return e}function yr({numberingSystem:s},e=""){return new RegExp(`${Wf[s||"latn"]}${e}`)}const yC="missing Intl.DateTimeFormat.formatToParts support";function yt(s,e=i=>i){return{regex:s,deser:([i])=>e(gC(i))}}const e0="[ \xA0]",t0=new RegExp(e0,"g");function vC(s){return s.replace(/\./g,"\\.?").replace(t0,e0)}function n0(s){return s.replace(/\./g,"").replace(t0," ").toLowerCase()}function vr(s,e){return s===null?null:{regex:RegExp(s.map(vC).join("|")),deser:([i])=>s.findIndex(a=>n0(i)===n0(a))+e}}function r0(s,e){return{regex:s,deser:([,i,a])=>Zl(i,a),groups:e}}function ql(s){return{regex:s,deser:([e])=>e}}function bC(s){return s.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function SC(s,e){const i=yr(e),a=yr(e,"{2}"),l=yr(e,"{3}"),c=yr(e,"{4}"),u=yr(e,"{6}"),f=yr(e,"{1,2}"),d=yr(e,"{1,3}"),h=yr(e,"{1,6}"),m=yr(e,"{1,9}"),p=yr(e,"{2,4}"),b=yr(e,"{4,6}"),v=w=>({regex:RegExp(bC(w.val)),deser:([A])=>A,literal:!0}),E=(w=>{if(s.literal)return v(w);switch(w.val){case"G":return vr(e.eras("short"),0);case"GG":return vr(e.eras("long"),0);case"y":return yt(h);case"yy":return yt(p,Lf);case"yyyy":return yt(c);case"yyyyy":return yt(b);case"yyyyyy":return yt(u);case"M":return yt(f);case"MM":return yt(a);case"MMM":return vr(e.months("short",!0),1);case"MMMM":return vr(e.months("long",!0),1);case"L":return yt(f);case"LL":return yt(a);case"LLL":return vr(e.months("short",!1),1);case"LLLL":return vr(e.months("long",!1),1);case"d":return yt(f);case"dd":return yt(a);case"o":return yt(d);case"ooo":return yt(l);case"HH":return yt(a);case"H":return yt(f);case"hh":return yt(a);case"h":return yt(f);case"mm":return yt(a);case"m":return yt(f);case"q":return yt(f);case"qq":return yt(a);case"s":return yt(f);case"ss":return yt(a);case"S":return yt(d);case"SSS":return yt(l);case"u":return ql(m);case"uu":return ql(f);case"uuu":return yt(i);case"a":return vr(e.meridiems(),0);case"kkkk":return yt(c);case"kk":return yt(p,Lf);case"W":return yt(f);case"WW":return yt(a);case"E":case"c":return yt(i);case"EEE":return vr(e.weekdays("short",!1),1);case"EEEE":return vr(e.weekdays("long",!1),1);case"ccc":return vr(e.weekdays("short",!0),1);case"cccc":return vr(e.weekdays("long",!0),1);case"Z":case"ZZ":return r0(new RegExp(`([+-]${f.source})(?::(${a.source}))?`),2);case"ZZZ":return r0(new RegExp(`([+-]${f.source})(${a.source})?`),2);case"z":return ql(/[a-z_+-/]{1,256}?/i);case" ":return ql(/[^\S\n\r]/);default:return v(w)}})(s)||{invalidReason:yC};return E.token=s,E}const xC={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function EC(s,e,i){const{type:a,value:l}=s;if(a==="literal"){const d=/^\s+$/.test(l);return{literal:!d,val:d?" ":l}}const c=e[a];let u=a;a==="hour"&&(e.hour12!=null?u=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?u="hour12":u="hour24":u=i.hour12?"hour12":"hour24");let f=xC[u];if(typeof f=="object"&&(f=f[c]),f)return{literal:!1,val:f}}function wC(s){return[`^${s.map(i=>i.regex).reduce((i,a)=>`${i}(${a.source})`,"")}$`,s]}function AC(s,e,i){const a=s.match(e);if(a){const l={};let c=1;for(const u in i)if(to(i,u)){const f=i[u],d=f.groups?f.groups+1:1;!f.literal&&f.token&&(l[f.token.val[0]]=f.deser(a.slice(c,c+d))),c+=d}return[a,l]}else return[a,{}]}function OC(s){const e=c=>{switch(c){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,a;return Ge(s.z)||(i=ii.create(s.z)),Ge(s.Z)||(i||(i=new wn(s.Z)),a=s.Z),Ge(s.q)||(s.M=(s.q-1)*3+1),Ge(s.h)||(s.h<12&&s.a===1?s.h+=12:s.h===12&&s.a===0&&(s.h=0)),s.G===0&&s.y&&(s.y=-s.y),Ge(s.u)||(s.S=Nf(s.u)),[Object.keys(s).reduce((c,u)=>{const f=e(u);return f&&(c[f]=s[u]),c},{}),i,a]}let Vf=null;function CC(){return Vf||(Vf=Ke.fromMillis(1555555555555)),Vf}function kC(s,e){if(s.literal)return s;const i=hn.macroTokenToFormatOpts(s.val),a=o0(i,e);return a==null||a.includes(void 0)?s:a}function i0(s,e){return Array.prototype.concat(...s.map(i=>kC(i,e)))}function s0(s,e,i){const a=i0(hn.parseFormat(i),s),l=a.map(u=>SC(u,s)),c=l.find(u=>u.invalidReason);if(c)return{input:e,tokens:a,invalidReason:c.invalidReason};{const[u,f]=wC(l),d=RegExp(u,"i"),[h,m]=AC(e,d,f),[p,b,v]=m?OC(m):[null,null,void 0];if(to(m,"a")&&to(m,"H"))throw new eo("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:a,regex:d,rawMatches:h,matches:m,result:p,zone:b,specificOffset:v}}}function TC(s,e,i){const{result:a,zone:l,specificOffset:c,invalidReason:u}=s0(s,e,i);return[a,l,c,u]}function o0(s,e){if(!s)return null;const a=hn.create(e,s).dtFormatter(CC()),l=a.formatToParts(),c=a.resolvedOptions();return l.map(u=>EC(u,s,c))}const zf="Invalid DateTime",a0=864e13;function ec(s){return new gr("unsupported zone",`the zone "${s.name}" is not supported`)}function Uf(s){return s.weekData===null&&(s.weekData=Kl(s.c)),s.weekData}function Hf(s){return s.localWeekData===null&&(s.localWeekData=Kl(s.c,s.loc.getMinDaysInFirstWeek(),s.loc.getStartOfWeek())),s.localWeekData}function Ss(s,e){const i={ts:s.ts,zone:s.zone,c:s.c,o:s.o,loc:s.loc,invalid:s.invalid};return new Ke({...i,...e,old:i})}function l0(s,e,i){let a=s-e*60*1e3;const l=i.offset(a);if(e===l)return[a,e];a-=(l-e)*60*1e3;const c=i.offset(a);return l===c?[a,l]:[s-Math.min(l,c)*60*1e3,Math.max(l,c)]}function tc(s,e){s+=e*60*1e3;const i=new Date(s);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function nc(s,e,i){return l0(Jl(s),e,i)}function c0(s,e){const i=s.o,a=s.c.year+Math.trunc(e.years),l=s.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,c={...s.c,year:a,month:l,day:Math.min(s.c.day,Yl(a,l))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},u=ot.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),f=Jl(c);let[d,h]=l0(f,i,s.zone);return u!==0&&(d+=u,h=s.zone.offset(d)),{ts:d,o:h}}function ua(s,e,i,a,l,c){const{setZone:u,zone:f}=i;if(s&&Object.keys(s).length!==0||e){const d=e||f,h=Ke.fromObject(s,{...i,zone:d,specificOffset:c});return u?h:h.setZone(f)}else return Ke.invalid(new gr("unparsable",`the input "${l}" can't be parsed as ${a}`))}function rc(s,e,i=!0){return s.isValid?hn.create(St.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(s,e):null}function Kf(s,e){const i=s.c.year>9999||s.c.year<0;let a="";return i&&s.c.year>=0&&(a+="+"),a+=Yt(s.c.year,i?6:4),e?(a+="-",a+=Yt(s.c.month),a+="-",a+=Yt(s.c.day)):(a+=Yt(s.c.month),a+=Yt(s.c.day)),a}function u0(s,e,i,a,l,c){let u=Yt(s.c.hour);return e?(u+=":",u+=Yt(s.c.minute),(s.c.millisecond!==0||s.c.second!==0||!i)&&(u+=":")):u+=Yt(s.c.minute),(s.c.millisecond!==0||s.c.second!==0||!i)&&(u+=Yt(s.c.second),(s.c.millisecond!==0||!a)&&(u+=".",u+=Yt(s.c.millisecond,3))),l&&(s.isOffsetFixed&&s.offset===0&&!c?u+="Z":s.o<0?(u+="-",u+=Yt(Math.trunc(-s.o/60)),u+=":",u+=Yt(Math.trunc(-s.o%60))):(u+="+",u+=Yt(Math.trunc(s.o/60)),u+=":",u+=Yt(Math.trunc(s.o%60)))),c&&(u+="["+s.zone.ianaName+"]"),u}const f0={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},PC={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},DC={ordinal:1,hour:0,minute:0,second:0,millisecond:0},d0=["year","month","day","hour","minute","second","millisecond"],MC=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],IC=["year","ordinal","hour","minute","second","millisecond"];function RC(s){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[s.toLowerCase()];if(!e)throw new zp(s);return e}function h0(s){switch(s.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return RC(s)}}function m0(s,e){const i=Mi(e.zone,zt.defaultZone),a=St.fromObject(e),l=zt.now();let c,u;if(Ge(s.year))c=l;else{for(const h of d0)Ge(s[h])&&(s[h]=f0[h]);const f=Og(s)||Cg(s);if(f)return Ke.invalid(f);const d=i.offset(l);[c,u]=nc(s,d,i)}return new Ke({ts:c,zone:i,loc:a,o:u})}function p0(s,e,i){const a=Ge(i.round)?!0:i.round,l=(u,f)=>(u=Ff(u,a||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(u,f)),c=u=>i.calendary?e.hasSame(s,u)?0:e.startOf(u).diff(s.startOf(u),u).get(u):e.diff(s,u).get(u);if(i.unit)return l(c(i.unit),i.unit);for(const u of i.units){const f=c(u);if(Math.abs(f)>=1)return l(f,u)}return l(s>e?-0:0,i.units[i.units.length-1])}function g0(s){let e={},i;return s.length>0&&typeof s[s.length-1]=="object"?(e=s[s.length-1],i=Array.from(s).slice(0,s.length-1)):i=Array.from(s),[e,i]}class Ke{constructor(e){const i=e.zone||zt.defaultZone;let a=e.invalid||(Number.isNaN(e.ts)?new gr("invalid input"):null)||(i.isValid?null:ec(i));this.ts=Ge(e.ts)?zt.now():e.ts;let l=null,c=null;if(!a)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[l,c]=[e.old.c,e.old.o];else{const f=i.offset(this.ts);l=tc(this.ts,f),a=Number.isNaN(l.year)?new gr("invalid input"):null,l=a?null:l,c=a?null:f}this._zone=i,this.loc=e.loc||St.create(),this.invalid=a,this.weekData=null,this.localWeekData=null,this.c=l,this.o=c,this.isLuxonDateTime=!0}static now(){return new Ke({})}static local(){const[e,i]=g0(arguments),[a,l,c,u,f,d,h]=i;return m0({year:a,month:l,day:c,hour:u,minute:f,second:d,millisecond:h},e)}static utc(){const[e,i]=g0(arguments),[a,l,c,u,f,d,h]=i;return e.zone=wn.utcInstance,m0({year:a,month:l,day:c,hour:u,minute:f,second:d,millisecond:h},e)}static fromJSDate(e,i={}){const a=cO(e)?e.valueOf():NaN;if(Number.isNaN(a))return Ke.invalid("invalid input");const l=Mi(i.zone,zt.defaultZone);return l.isValid?new Ke({ts:a,zone:l,loc:St.fromObject(i)}):Ke.invalid(ec(l))}static fromMillis(e,i={}){if(ys(e))return e<-a0||e>a0?Ke.invalid("Timestamp out of range"):new Ke({ts:e,zone:Mi(i.zone,zt.defaultZone),loc:St.fromObject(i)});throw new Mn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(ys(e))return new Ke({ts:e*1e3,zone:Mi(i.zone,zt.defaultZone),loc:St.fromObject(i)});throw new Mn("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const a=Mi(i.zone,zt.defaultZone);if(!a.isValid)return Ke.invalid(ec(a));const l=St.fromObject(i),c=_l(e,h0),{minDaysInFirstWeek:u,startOfWeek:f}=Ag(c,l),d=zt.now(),h=Ge(i.specificOffset)?a.offset(d):i.specificOffset,m=!Ge(c.ordinal),p=!Ge(c.year),b=!Ge(c.month)||!Ge(c.day),v=p||b,x=c.weekYear||c.weekNumber;if((v||m)&&x)throw new eo("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&m)throw new eo("Can't mix ordinal dates with month/day");const E=x||c.weekday&&!v;let w,A,C=tc(d,h);E?(w=MC,A=PC,C=Kl(C,u,f)):m?(w=IC,A=DC,C=If(C)):(w=d0,A=f0);let W=!1;for(const he of w){const ge=c[he];Ge(ge)?W?c[he]=A[he]:c[he]=C[he]:W=!0}const B=E?oO(c,u,f):m?aO(c):Og(c),V=B||Cg(c);if(V)return Ke.invalid(V);const J=E?Eg(c,u,f):m?wg(c):c,[Z,le]=nc(J,h,a),ce=new Ke({ts:Z,zone:a,o:le,loc:l});return c.weekday&&v&&e.weekday!==ce.weekday?Ke.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${ce.toISO()}`):ce}static fromISO(e,i={}){const[a,l]=QO(e);return ua(a,l,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[a,l]=qO(e);return ua(a,l,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[a,l]=eC(e);return ua(a,l,i,"HTTP",i)}static fromFormat(e,i,a={}){if(Ge(e)||Ge(i))throw new Mn("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:c=null}=a,u=St.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0}),[f,d,h,m]=TC(u,e,i);return m?Ke.invalid(m):ua(f,d,a,`format ${i}`,e,h)}static fromString(e,i,a={}){return Ke.fromFormat(e,i,a)}static fromSQL(e,i={}){const[a,l]=aC(e);return ua(a,l,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Mn("need to specify a reason the DateTime is invalid");const a=e instanceof gr?e:new gr(e,i);if(zt.throwOnInvalid)throw new LA(a);return new Ke({invalid:a})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const a=o0(e,St.fromObject(i));return a?a.map(l=>l?l.val:null).join(""):null}static expandFormat(e,i={}){return i0(hn.parseFormat(e),St.fromObject(i)).map(l=>l.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Uf(this).weekYear:NaN}get weekNumber(){return this.isValid?Uf(this).weekNumber:NaN}get weekday(){return this.isValid?Uf(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Hf(this).weekday:NaN}get localWeekNumber(){return this.isValid?Hf(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Hf(this).weekYear:NaN}get ordinal(){return this.isValid?If(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ql.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ql.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ql.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ql.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,a=Jl(this.c),l=this.zone.offset(a-e),c=this.zone.offset(a+e),u=this.zone.offset(a-l*i),f=this.zone.offset(a-c*i);if(u===f)return[this];const d=a-u*i,h=a-f*i,m=tc(d,u),p=tc(h,f);return m.hour===p.hour&&m.minute===p.minute&&m.second===p.second&&m.millisecond===p.millisecond?[Ss(this,{ts:d}),Ss(this,{ts:h})]:[this]}get isInLeapYear(){return sa(this.year)}get daysInMonth(){return Yl(this.year,this.month)}get daysInYear(){return this.isValid?no(this.year):NaN}get weeksInWeekYear(){return this.isValid?oa(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?oa(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:a,calendar:l}=hn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:a,outputCalendar:l}}toUTC(e=0,i={}){return this.setZone(wn.instance(e),i)}toLocal(){return this.setZone(zt.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:a=!1}={}){if(e=Mi(e,zt.defaultZone),e.equals(this.zone))return this;if(e.isValid){let l=this.ts;if(i||a){const c=e.offset(this.ts),u=this.toObject();[l]=nc(u,c,e)}return Ss(this,{ts:l,zone:e})}else return Ke.invalid(ec(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:a}={}){const l=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:a});return Ss(this,{loc:l})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=_l(e,h0),{minDaysInFirstWeek:a,startOfWeek:l}=Ag(i,this.loc),c=!Ge(i.weekYear)||!Ge(i.weekNumber)||!Ge(i.weekday),u=!Ge(i.ordinal),f=!Ge(i.year),d=!Ge(i.month)||!Ge(i.day),h=f||d,m=i.weekYear||i.weekNumber;if((h||u)&&m)throw new eo("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&u)throw new eo("Can't mix ordinal dates with month/day");let p;c?p=Eg({...Kl(this.c,a,l),...i},a,l):Ge(i.ordinal)?(p={...this.toObject(),...i},Ge(i.day)&&(p.day=Math.min(Yl(p.year,p.month),p.day))):p=wg({...If(this.c),...i});const[b,v]=nc(p,this.o,this.zone);return Ss(this,{ts:b,o:v})}plus(e){if(!this.isValid)return this;const i=ot.fromDurationLike(e);return Ss(this,c0(this,i))}minus(e){if(!this.isValid)return this;const i=ot.fromDurationLike(e).negate();return Ss(this,c0(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const a={},l=ot.normalizeUnit(e);switch(l){case"years":a.month=1;case"quarters":case"months":a.day=1;case"weeks":case"days":a.hour=0;case"hours":a.minute=0;case"minutes":a.second=0;case"seconds":a.millisecond=0;break;case"milliseconds":break}if(l==="weeks")if(i){const c=this.loc.getStartOfWeek(),{weekday:u}=this;u<c&&(a.weekNumber=this.weekNumber-1),a.weekday=c}else a.weekday=1;if(l==="quarters"){const c=Math.ceil(this.month/3);a.month=(c-1)*3+1}return this.set(a)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?hn.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):zf}toLocaleString(e=Wl,i={}){return this.isValid?hn.create(this.loc.clone(i),e).formatDateTime(this):zf}toLocaleParts(e={}){return this.isValid?hn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:a=!1,includeOffset:l=!0,extendedZone:c=!1}={}){if(!this.isValid)return null;const u=e==="extended";let f=Kf(this,u);return f+="T",f+=u0(this,u,i,a,l,c),f}toISODate({format:e="extended"}={}){return this.isValid?Kf(this,e==="extended"):null}toISOWeekDate(){return rc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:a=!0,includePrefix:l=!1,extendedZone:c=!1,format:u="extended"}={}){return this.isValid?(l?"T":"")+u0(this,u==="extended",i,e,a,c):null}toRFC2822(){return rc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return rc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Kf(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:a=!0}={}){let l="HH:mm:ss.SSS";return(i||e)&&(a&&(l+=" "),i?l+="z":e&&(l+="ZZ")),rc(this,l,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():zf}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",a={}){if(!this.isValid||!e.isValid)return ot.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...a},c=uO(i).map(ot.normalizeUnit),u=e.valueOf()>this.valueOf(),f=u?this:e,d=u?e:this,h=mC(f,d,c,l);return u?h.negate():h}diffNow(e="milliseconds",i={}){return this.diff(Ke.now(),e,i)}until(e){return this.isValid?Pt.fromDateTimes(this,e):this}hasSame(e,i,a){if(!this.isValid)return!1;const l=e.valueOf(),c=this.setZone(e.zone,{keepLocalTime:!0});return c.startOf(i,a)<=l&&l<=c.endOf(i,a)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||Ke.fromObject({},{zone:this.zone}),a=e.padding?this<i?-e.padding:e.padding:0;let l=["years","months","days","hours","minutes","seconds"],c=e.unit;return Array.isArray(e.unit)&&(l=e.unit,c=void 0),p0(i,this.plus(a),{...e,numeric:"always",units:l,unit:c})}toRelativeCalendar(e={}){return this.isValid?p0(e.base||Ke.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Ke.isDateTime))throw new Mn("min requires all arguments be DateTimes");return Pg(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(Ke.isDateTime))throw new Mn("max requires all arguments be DateTimes");return Pg(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,a={}){const{locale:l=null,numberingSystem:c=null}=a,u=St.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});return s0(u,e,i)}static fromStringExplain(e,i,a={}){return Ke.fromFormatExplain(e,i,a)}static get DATE_SHORT(){return Wl}static get DATE_MED(){return Up}static get DATE_MED_WITH_WEEKDAY(){return jA}static get DATE_FULL(){return Hp}static get DATE_HUGE(){return Kp}static get TIME_SIMPLE(){return Gp}static get TIME_WITH_SECONDS(){return Yp}static get TIME_WITH_SHORT_OFFSET(){return Jp}static get TIME_WITH_LONG_OFFSET(){return Zp}static get TIME_24_SIMPLE(){return _p}static get TIME_24_WITH_SECONDS(){return Xp}static get TIME_24_WITH_SHORT_OFFSET(){return Qp}static get TIME_24_WITH_LONG_OFFSET(){return qp}static get DATETIME_SHORT(){return eg}static get DATETIME_SHORT_WITH_SECONDS(){return tg}static get DATETIME_MED(){return ng}static get DATETIME_MED_WITH_SECONDS(){return rg}static get DATETIME_MED_WITH_WEEKDAY(){return WA}static get DATETIME_FULL(){return ig}static get DATETIME_FULL_WITH_SECONDS(){return sg}static get DATETIME_HUGE(){return og}static get DATETIME_HUGE_WITH_SECONDS(){return ag}}function fa(s){if(Ke.isDateTime(s))return s;if(s&&s.valueOf&&ys(s.valueOf()))return Ke.fromJSDate(s);if(s&&typeof s=="object")return Ke.fromObject(s);throw new Mn(`Unknown datetime argument: ${s}, of type ${typeof s}`)}const A6="3.4.4";var NC=S(4794),Gf=S.n(NC);const FC=({createdAt:s})=>{const e=Ke.fromISO(s),i=Pt.fromDateTimes(e,Ke.local()).toDuration().valueOf();return g.createElement(Ve.A,{paragraph:!0},Gf()(i,{round:!0})," ago")};var ic=S(30043),y0=S(37281),br=S(78560);const LC=({entityRef:s})=>{var c,u,f;const e=(0,gt.gf)(ic.v),{value:i,loading:a,error:l}=(0,Kt.A)(()=>e.getEntityByRef(s||""),[e,s]);return s?a||l?null:g.createElement(y0.z,{entityRef:(0,br.KU)(s),title:(f=(u=(c=i==null?void 0:i.spec)==null?void 0:c.profile)==null?void 0:u.displayName)!=null?f:i==null?void 0:i.metadata.name}):g.createElement(Ve.A,{paragraph:!0},"Unknown")};var v0=S(7707),b0=S(9181);const $C=({className:s,dataTestId:e})=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",className:s,"data-testid":e},g.createElement("path",{d:"M280-420q25 0 42.5-17.5T340-480q0-25-17.5-42.5T280-540q-25 0-42.5 17.5T220-480q0 25 17.5 42.5T280-420Zm200 0q25 0 42.5-17.5T540-480q0-25-17.5-42.5T480-540q-25 0-42.5 17.5T420-480q0 25 17.5 42.5T480-420Zm200 0q25 0 42.5-17.5T740-480q0-25-17.5-42.5T680-540q-25 0-42.5 17.5T620-480q0 25 17.5 42.5T680-420ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})),uo=(0,M.A)(s=>({status:{fontWeight:s.typography.fontWeightMedium,alignItems:"baseline",display:"flex"},statusIcon:{flexShrink:0,position:"relative",top:"0.125em",marginRight:s.spacing(1)},statusIconSize:{width:"0.8em",height:"0.8em"},statusIconSizeForImg:{width:"1.2em",height:"1.2em"},ok:{fill:s.palette.status.ok||"#3E8635"},warning:{fill:s.palette.status.warning||"#F0AB00"},error:{fill:s.palette.status.error||"#C9190B"},pending:{fill:s.palette.status.aborted||"#6A6E73"},running:{fill:s.palette.status.aborted||"#6A6E73"},aborted:{fill:s.palette.status.aborted||"#6A6E73"}}),{name:"BackstageStatus"});function BC(s){const{children:e,...i}=s,a=uo(i);return g.createElement(Ve.A,{component:"span",className:Qt()(a.status),"aria-label":"Status ok","aria-hidden":"true",...i},g.createElement(v0.A,{"data-testid":"status-ok",className:Qt()(a.ok,a.statusIconSize,a.statusIcon)}),e)}function O6(s){const{children:e,...i}=s,a=uo(i);return React__default.createElement(Typography,{component:"span",className:classNames(a.status),"aria-label":"Status warning","aria-hidden":"true",...i},React__default.createElement(WarningOutline,{"data-testid":"status-warning",className:classNames(a.warning,a.statusIconSize,a.statusIcon)}),e)}function jC(s){const{children:e,...i}=s,a=uo(i);return g.createElement(Ve.A,{component:"span",className:Qt()(a.status),"aria-label":"Status error","aria-hidden":"true",...i},g.createElement(b0.A,{"data-testid":"status-error",className:Qt()(a.error,a.statusIconSize,a.statusIcon)}),e)}function WC(s){const{children:e,...i}=s,a=uo(i);return g.createElement(Ve.A,{component:"span",className:Qt()(a.status),"aria-label":"Status pending","aria-hidden":"true",...i},g.createElement($C,{dataTestId:"status-pending",className:Qt()(a.pending,a.statusIconSizeForImg,a.statusIcon)}),e)}function C6(s){const{children:e,...i}=s,a=uo(i);return React__default.createElement(Typography,{component:"span",className:classNames(a.status),"aria-label":"Status running","aria-hidden":"true",...i},React__default.createElement(RunningIcon,{dataTestId:"status-running",className:classNames(a.running,a.statusIcon,a.statusIconSizeForImg)}),e)}function k6(s){const{children:e,...i}=s,a=uo(i);return React__default.createElement(Typography,{component:"span",className:classNames(a.status),"aria-label":"Status aborted","aria-hidden":"true",...i},React__default.createElement(AbortedIcon,{dataTestId:"status-aborted",className:classNames(a.aborted,a.statusIcon,a.statusIconSizeForImg)}),e)}const VC=({status:s})=>{switch(s){case"processing":return g.createElement(WC,null,s);case"completed":return g.createElement(BC,null,s);case"error":default:return g.createElement(jC,null,s)}},zC=({entityRef:s})=>{const e=(0,gt.gf)(dn.z),{value:i,loading:a,error:l}=(0,Kt.A)(()=>e.getTemplateParameterSchema(s||""),[e,s]);return a||l||!s?null:g.createElement(y0.z,{entityRef:(0,br.KU)(s),title:i==null?void 0:i.title})},UC=s=>{var h;const{initiallySelectedFilter:e="owned"}=s,i=(0,gt.gf)(dn.z),a=(0,bt.S)(Xe.rQ),[l,c]=(0,g.useState)(e),{value:u,loading:f,error:d}=(0,Kt.A)(()=>{var m;return i.listTasks?(m=i.listTasks)==null?void 0:m.call(i,{filterByOwnership:l}):(console.warn("listTasks is not implemented in the scaffolderApi, please make sure to implement this method."),Promise.resolve({tasks:[]}))},[i,l]);return f?g.createElement(Ti.k,null):d?g.createElement(g.Fragment,null,g.createElement(Zs.b,{error:d}),g.createElement(Bp.p,{missing:"info",title:"No information to display",description:"There are no tasks or there was an issue communicating with backend."})):g.createElement(Qs.GI,null,g.createElement(Qs.GI.Filters,null,g.createElement(FA,{filter:l,onSelectOwner:m=>c(m)})),g.createElement(Qs.GI.Content,null,g.createElement(DA.X,{data:(h=u==null?void 0:u.tasks)!=null?h:[],title:"Tasks",columns:[{title:"Task ID",field:"id",render:m=>g.createElement(na.N_,{to:`${a()}/tasks/${m.id}`},m.id)},{title:"Template",field:"spec.templateInfo.entity.metadata.title",render:m=>{var p;return g.createElement(zC,{entityRef:(p=m.spec.templateInfo)==null?void 0:p.entityRef})}},{title:"Created",field:"createdAt",render:m=>g.createElement(FC,{createdAt:m.createdAt})},{title:"Owner",field:"createdBy",render:m=>{var p,b;return g.createElement(LC,{entityRef:(b=(p=m.spec)==null?void 0:p.user)==null?void 0:b.ref})}},{title:"Status",field:"status",render:m=>g.createElement(VC,{status:m.status})}]})))},HC=s=>{const e=(0,_.Zp)(),i=(0,bt.S)(Xe.Dg),a=(0,bt.S)(Xe.GF),l=(0,bt.S)(Xe.rQ),c={onEditorClicked:()=>e(i()),onActionsClicked:()=>e(a()),onTasksClicked:void 0,onCreateClicked:()=>e(l())};return g.createElement(_s.Y,{themeId:"home"},g.createElement(Xs.Y,{pageTitleOverride:"Templates Tasks",title:"List template tasks",subtitle:"All tasks that have been started"},g.createElement(jl,{...c})),g.createElement(ps.U,null,g.createElement(UC,{...s})))};var da=S(95208),S0=S(92483),x0=S(17138),KC=S(56420),E0=S(18453),GC=S(79533),YC=S(99409),JC=S(30117),ZC=S(56829),_C=S(56005),XC=S.n(_C),Yf=S(69076),sc=S(86901),oc=S(16249),QC=S(44148),qC=S(41260),ek=S(61783),tk=S(57278),w0=S(34477);const nk=g.createElement(qC.A,{fontSize:"small"}),rk=g.createElement(QC.A,{fontSize:"small"}),ik=(0,M.A)({root:{},label:{}},{name:"ScaffolderReactTemplateCategoryPicker"}),sk=()=>{const s=ik(),e=(0,gt.gf)(w0.k),{error:i,loading:a,availableTypes:l,selectedTypes:c,setSelectedTypes:u}=(0,tk.j)();return a?g.createElement(Ti.k,null):i?(e.post({message:`Failed to load entity types with error: ${i}`,severity:"error"}),null):l?g.createElement(pe.A,{className:s.root,pb:1,pt:1},g.createElement(Ve.A,{className:s.label,variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),g.createElement(ek.Ay,{PopperComponent:f=>g.createElement("div",{...f},f.children),multiple:!0,id:"categories-picker",options:l,value:c,onChange:(f,d)=>u(d),renderOption:(f,{selected:d})=>g.createElement(sc.A,{control:g.createElement(Yf.A,{icon:nk,checkedIcon:rk,checked:d}),label:XC()(f)}),size:"small",popupIcon:g.createElement(ht.A,null),renderInput:f=>g.createElement(oc.A,{...f,variant:"outlined"})})):null};var ok=S(45281),A0=S(24453),ak=S(17174),lk=S(97214),ha=S(52262),ck=S(699),uk=S(14158),fk=S(59469),fo=S(48653),si=S(37197),Hn=S(64947),ma=S(23127),Jf=S(54917),dk=S(45575),hk=S(25999);const mk=(0,M.A)(()=>({header:{backgroundImage:({cardBackgroundImage:s})=>s,color:({cardFontColor:s})=>s},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),pk=s=>{const{template:{metadata:{title:e,name:i},spec:{type:a}}}=s,{getPageTheme:l}=(0,Jf.A)(),c=l({themeId:a}),u=mk({cardFontColor:c.fontColor,cardBackgroundImage:c.backgroundImage}),f=g.createElement("div",{className:u.subtitleWrapper},g.createElement("div",null,a),g.createElement("div",null,g.createElement(hk.u,{entity:s.template,style:{padding:0}})));return g.createElement(dk.f,{title:e!=null?e:i,subtitle:f,classes:{root:u.header}})},gk=(0,M.A)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),O0=({icon:s,text:e,url:i})=>{const a=gk();return g.createElement("div",{className:a.linkText},g.createElement(s,{fontSize:"small"}),g.createElement(na.N_,{style:{marginLeft:"8px"},to:i},e||i))};var Ni=S(90712),xs=S(31627);const yk=(0,M.A)(s=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:s.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:s.palette.link}})),vk=s=>{var v,x,E,w,A,C,W;const{onSelected:e,template:i}=s,a=yk(),l=(0,ha.s)(),c=(0,ck.t)(i,lk.vv),u=(0,da.n)(),f=B=>{var V;return B&&(V=u.getSystemIcon(B))!=null?V:ma.A},d=!!((v=i.metadata.tags)!=null&&v.length),h=!!((x=s.additionalLinks)!=null&&x.length)||!!((E=i.metadata.links)!=null&&E.length),m=!d&&!h,{allowed:p}=(0,Ni.J)({permission:xs.X6}),b=(0,g.useCallback)(()=>{l.captureEvent("click","Template has been opened"),e==null||e(i)},[l,e,i]);return g.createElement(Pi.A,null,g.createElement(pk,{template:i}),g.createElement(fo.A,null,g.createElement(Ce.A,{container:!0,spacing:2},g.createElement(Ce.A,{item:!0,xs:12},g.createElement(pe.A,{className:a.box},g.createElement(y.h,{className:a.markdown,content:(w=i.metadata.description)!=null?w:"No description"}))),m&&g.createElement(Ce.A,{item:!0,xs:12},g.createElement(si.A,{"data-testid":"template-card-separator"})),d&&g.createElement(g.Fragment,null,g.createElement(Ce.A,{item:!0,xs:12},g.createElement(si.A,{"data-testid":"template-card-separator--tags"})),g.createElement(Ce.A,{item:!0,xs:12},g.createElement(Ce.A,{container:!0,spacing:2},(A=i.metadata.tags)==null?void 0:A.map(B=>g.createElement(Ce.A,{key:`grid-${B}`,item:!0},g.createElement(Sf.A,{style:{margin:0},size:"small",label:B,key:B})))))),h&&g.createElement(g.Fragment,null,g.createElement(Ce.A,{item:!0,xs:12},g.createElement(si.A,{"data-testid":"template-card-separator--links"})),g.createElement(Ce.A,{item:!0,xs:12},g.createElement(Ce.A,{container:!0,spacing:2},(C=s.additionalLinks)==null?void 0:C.map(({icon:B,text:V,url:J},Z)=>g.createElement(Ce.A,{className:a.linkText,item:!0,xs:6,key:Z},g.createElement(O0,{icon:B,text:V,url:J}))),(W=i.metadata.links)==null?void 0:W.map(({url:B,icon:V,title:J},Z)=>g.createElement(Ce.A,{className:a.linkText,item:!0,xs:6,key:Z},g.createElement(O0,{icon:f(V),text:J||B,url:B})))))))),g.createElement(fk.A,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},g.createElement("div",{className:a.footer},g.createElement("div",{className:a.ownedBy},c.length>0&&g.createElement(g.Fragment,null,g.createElement(S0.ny,{fontSize:"small"}),g.createElement(uk.i,{style:{marginLeft:"8px"},entityRefs:c,defaultKind:"Group",hideIcons:!0}))),p?g.createElement(Hn.A,{size:"small",variant:"outlined",color:"primary",onClick:b},"Choose"):null)))},bk=s=>{const{templates:e,title:i,components:{CardComponent:a}={},onSelected:l}=s,c=typeof i=="string"?g.createElement(x0.d,{title:i}):i;if(e.length===0)return null;const u=a||vk;return g.createElement(ps.U,null,c,g.createElement(ak.s,null,e.map(({template:f,additionalLinks:d})=>g.createElement(u,{key:(0,br.U2)(f),additionalLinks:d,template:f,onSelected:l}))))},Sk=s=>{const{loading:e,error:i,entities:a}=(0,E0.nK)(),{groups:l,templateFilter:c,TemplateCardComponent:u,onTemplateSelected:f}=s,d=(0,gt.gf)(A0.m),h=(0,g.useCallback)(m=>{f==null||f(m)},[f]);return e?g.createElement(Ti.k,null):i?(d.post(i),null):!a||!a.length?g.createElement(Ve.A,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",g.createElement(na.N_,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):g.createElement(g.Fragment,null,l.map(({title:m,filter:p},b)=>{const v=a.filter(ok.c).filter(x=>c?c(x):!0).filter(p).map(x=>{var w,A;const E=(A=(w=s.additionalLinksForEntity)==null?void 0:w.call(s,x))!=null?A:[];return{template:x,additionalLinks:E}});return g.createElement(bk,{key:b,templates:v,title:m,components:{CardComponent:u},onSelected:h})}))};var xk=S(5893),C0=S(73657),Ek=S(71913);const wk=s=>{const{title:e,to:i}=s,{allowed:a}=(0,Ni.J)({permission:Ek.C4}),l=(0,xk.A)(c=>c.breakpoints.down("xs"));return!i||!a?null:l?g.createElement(En.A,{component:C0.N_,color:"primary",title:e,size:"small",to:i},g.createElement(jp.A,null)):g.createElement(Hn.A,{component:C0.N_,variant:"contained",color:"primary",to:i},e)},Ak={title:"Templates",filter:()=>!0},Ok=s=>[...s,{title:"Other Templates",filter:e=>![...s].some(({filter:i})=>i(e))}],Ck=s=>{var A,C,W;const e=(0,bt.S)(Xe.J0),{TemplateCardComponent:i,groups:a=[],templateFilter:l,headerOptions:c}=s,u=(0,_.Zp)(),f=(0,bt.S)(Xe.Dg),d=(0,bt.S)(Xe.GF),h=(0,bt.S)(Xe.JX),m=(0,bt.S)(Xe.UJ),p=(0,bt.S)(Xe.sP),b=(0,da.n)(),v=a.length?Ok(a):[Ak],x={onEditorClicked:((A=s==null?void 0:s.contextMenu)==null?void 0:A.editor)!==!1?()=>u(f()):void 0,onActionsClicked:((C=s==null?void 0:s.contextMenu)==null?void 0:C.actions)!==!1?()=>u(d()):void 0,onTasksClicked:((W=s==null?void 0:s.contextMenu)==null?void 0:W.tasks)!==!1?()=>u(h()):void 0},E=(0,g.useCallback)(B=>{var le,ce;const{kind:V,namespace:J,name:Z}=(0,br.KU)((0,br.U2)(B));return(le=B.metadata.annotations)!=null&&le["backstage.io/techdocs-ref"]&&m?[{icon:(ce=b.getSystemIcon("docs"))!=null?ce:S0.Vf,text:"View TechDocs",url:m({kind:V,namespace:J,name:Z})}]:[]},[b,m]),w=(0,g.useCallback)(B=>{const{namespace:V,name:J}=(0,br.KU)((0,br.U2)(B));u(p({namespace:V,templateName:J}))},[u,p]);return g.createElement(E0.B9,null,g.createElement(_s.Y,{themeId:"home"},g.createElement(Xs.Y,{pageTitleOverride:"Create a new component",title:"Create a new component",subtitle:"Create new software components using standard templates in your organization",...c},g.createElement(jl,{...x})),g.createElement(ps.U,null,g.createElement(x0.d,{title:"Available Templates"},g.createElement(wk,{title:"Register Existing Component",to:e&&e()}),g.createElement(KC.Y,null,"Create new software components using standard templates. Different templates create different kinds of components (services, websites, documentation, ...).")),g.createElement(Qs.GI,null,g.createElement(Qs.GI.Filters,null,g.createElement(GC.l,null),g.createElement(YC.m,{initialFilter:"template",hidden:!0}),g.createElement(JC.y,{initialFilter:"all",availableFilters:["all","starred"]}),g.createElement(sk,null),g.createElement(ZC.m,null)),g.createElement(Qs.GI.Content,null,g.createElement(Sk,{groups:v,templateFilter:l,TemplateCardComponent:i,onTemplateSelected:w,additionalLinksForEntity:E}))))))};var kk=S(55488),Tk=S(76888),Pk=S(19224),k0=S(21332);const Dk=s=>{const e=(0,gt.gf)(dn.z),{value:i,loading:a,error:l}=(0,Kt.A)(()=>e.getTemplateParameterSchema(s),[e,s]);return{manifest:i,loading:a,error:l}};var Zf=S(78733),ac=S(21619),lc=S(37877),cc=S(88951);const T0={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minItems}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",SchemaWarning:"Failed retrieving a schema from '{{pointer}}' to key '{{key}}'",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},Mk=Object.prototype.toString;function ft(s){const e=Mk.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase();return e==="file"?"object":e}const Ik="object",Rk="array";function Nk(s,e={}){return s.replace(/\{\{\w+\}\}/g,i=>{const a=i.replace(/[{}]/g,""),l=e[a],c=ft(l);return c===Ik||c===Rk?JSON.stringify(l):l})}function Fk(s,e,i=s){var a;const l=(a=T0[s])!==null&&a!==void 0?a:i;return Nk(l,e)}function Lk(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function $k(s,e){return{type:"error",name:s,code:Lk(s),message:Fk(s,e),data:e}}function Be(s){return $k.bind(null,s)}function pa(s,e=[]){for(let i=0;i<s.length;i+=1){const a=s[i];Array.isArray(a)?pa(a,e):e.push(a)}return e}const Es={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1,extendDefaults:!0}};function ga(s,e,i){const a={...e};return Object.defineProperty(a,"getOneOfOrigin",{enumerable:!1,value:()=>({index:i,schema:s})}),a}function Kn(s){return(s==null?void 0:s.type)==="error"}function Bk(s){return s instanceof Promise}function uc(s){return Kn(s)||Bk(s)}function T6(s){return isJsonError(s)}const{DECLARATOR_ONEOF:ho}=Es;function _f(s,e,i=s.rootSchema,a="#"){if(e!=null&&i[ho]){const u=[],f=i[ho],d=e[i[ho]];if(d===void 0)return s.errors.missingOneOfPropertyError({property:f,pointer:a,schema:i,value:e});for(let h=0;h<i.oneOf.length;h+=1){const m=s.resolveRef(i.oneOf[h]),p=s.step(f,m,e,a);if(Kn(p))return p;let b=pa(s.validate(d,p,a));if(b=b.filter(uc),b.length>0)u.push(...b);else return ga(i,m,h)}return s.errors.oneOfPropertyError({property:f,value:d,pointer:a,schema:i,errors:u})}const l=[],c=[];for(let u=0;u<i.oneOf.length;u+=1){const f=s.resolveRef(i.oneOf[u]);let d=pa(s.validate(e,f,a));d=d.filter(uc),d.length>0?c.push(...d):l.push({index:u,schema:f})}return l.length===1?ga(i,l[0].schema,l[0].index):l.length>1?s.errors.multipleOneOfError({value:e,pointer:a,schema:i,matches:l}):s.errors.oneOfError({value:JSON.stringify(e),pointer:a,schema:i,oneOf:i.oneOf,errors:c})}function jk(s,e,i,a){if(i==null||e.properties==null)return-1;let l=0;const c=Object.keys(e.properties);for(let u=0;u<c.length;u+=1){const f=c[u];i[f]!=null&&s.isValid(i[f],e.properties[f],a)&&(l+=1)}return l}function fc(s,e,i=s.rootSchema,a="#"){if(e!=null&&i[ho]){const c=[],u=i[ho],f=e[i[ho]];if(f===void 0)return s.errors.missingOneOfPropertyError({property:u,pointer:a,schema:i,value:e});for(let d=0;d<i.oneOf.length;d+=1){const h=s.resolveRef(i.oneOf[d]),m=s.step(u,h,e,a);if(Kn(m))return m;let p=pa(s.validate(f,m,a));if(p=p.filter(uc),p.length>0)c.push(...p);else return ga(i,h,d)}return s.errors.oneOfPropertyError({property:u,value:f,pointer:a,schema:i,errors:c})}const l=[];for(let c=0;c<i.oneOf.length;c+=1){const u=s.resolveRef(i.oneOf[c]);s.isValid(e,u,a)&&l.push({schema:u,index:c})}if(l.length===1)return ga(i,l[0].schema,l[0].index);if(ft(e)==="object"){let c,u=-1,f=0;for(let d=0;d<i.oneOf.length;d+=1){const h=s.resolveRef(i.oneOf[d]),m=jk(s,h,e);f<m&&(f=m,c=i.oneOf[d],u=d)}return c===void 0?s.errors.oneOfError({value:JSON.stringify(e),pointer:a,schema:i,oneOf:i.oneOf}):ga(i,c,u)}return l.length>1?s.errors.multipleOneOfError({matches:l,pointer:a,schema:i,value:e}):s.errors.oneOfError({value:JSON.stringify(e),pointer:a,schema:i,oneOf:i.oneOf})}const Wk=(s,e,i,a)=>{if(Array.isArray(e.oneOf)){const l=s.resolveOneOf(i,e,a);if(Kn(l))return l}};var Vk=S(52743),P0=S.n(Vk);const zk=(s,e)=>e,ya=(s,e)=>P0()(s,e,{arrayMerge:zk}),Uk=(s,e)=>{const i=s.concat(e);return i.filter((a,l)=>i.indexOf(a)===l)},Hk=(s,e)=>P0()(s,e,{arrayMerge:Uk});function An(s,e){const i=ft(s),a=ft(e);if(i!==a)return s;const l=Hk(s,e);return s.getOneOfOrigin?Object.defineProperty(l,"getOneOfOrigin",{enumerable:!1,value:s.getOneOfOrigin}):e.getOneOfOrigin&&Object.defineProperty(l,"getOneOfOrigin",{enumerable:!1,value:e.getOneOfOrigin}),l}function va(s,...e){const i={};return Object.keys(s).forEach(a=>{e.includes(a)||(i[a]=s[a])}),s.getOneOfOrigin&&Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:s.getOneOfOrigin}),i}var Kk=Function.prototype.toString,Xf=Object.create,Gk=Object.prototype.toString,Yk=function(){function s(){this._keys=[],this._values=[]}return s.prototype.has=function(e){return!!~this._keys.indexOf(e)},s.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},s.prototype.set=function(e,i){this._keys.push(e),this._values.push(i)},s}();function Jk(){return new Yk}function Zk(){return new WeakMap}var _k=typeof WeakMap!="undefined"?Zk:Jk;function Qf(s){if(!s)return Xf(null);var e=s.constructor;if(e===Object)return s===Object.prototype?{}:Xf(s);if(e&&~Kk.call(e).indexOf("[native code]"))try{return new e}catch{}return Xf(s)}function Xk(s){var e="";return s.global&&(e+="g"),s.ignoreCase&&(e+="i"),s.multiline&&(e+="m"),s.unicode&&(e+="u"),s.sticky&&(e+="y"),e}function Qk(s){return s.flags}var qk=/test/g.flags==="g"?Qk:Xk;function D0(s){var e=Gk.call(s);return e.substring(8,e.length-1)}function eT(s){return s[Symbol.toStringTag]||D0(s)}var tT=typeof Symbol!="undefined"?eT:D0,nT=Object.defineProperty,rT=Object.getOwnPropertyDescriptor,M0=Object.getOwnPropertyNames,qf=Object.getOwnPropertySymbols,I0=Object.prototype,R0=I0.hasOwnProperty,iT=I0.propertyIsEnumerable,N0=typeof qf=="function";function sT(s){return M0(s).concat(qf(s))}var oT=N0?sT:M0;function dc(s,e,i){for(var a=oT(s),l=0,c=a.length,u=void 0,f=void 0;l<c;++l)if(u=a[l],!(u==="callee"||u==="caller")){if(f=rT(s,u),!f){e[u]=i.copier(s[u],i);continue}!f.get&&!f.set&&(f.value=i.copier(f.value,i));try{nT(e,u,f)}catch{e[u]=f.value}}return e}function aT(s,e){var i=new e.Constructor;e.cache.set(s,i);for(var a=0,l=s.length;a<l;++a)i[a]=e.copier(s[a],e);return i}function lT(s,e){var i=new e.Constructor;return e.cache.set(s,i),dc(s,i,e)}function F0(s,e){return s.slice(0)}function cT(s,e){return s.slice(0,s.size,s.type)}function uT(s,e){return new e.Constructor(F0(s.buffer))}function fT(s,e){return new e.Constructor(s.getTime())}function L0(s,e){var i=new e.Constructor;return e.cache.set(s,i),s.forEach(function(a,l){i.set(l,e.copier(a,e))}),i}function dT(s,e){return dc(s,L0(s,e),e)}function hT(s,e){var i=Qf(e.prototype);e.cache.set(s,i);for(var a in s)R0.call(s,a)&&(i[a]=e.copier(s[a],e));return i}function mT(s,e){var i=Qf(e.prototype);e.cache.set(s,i);for(var a in s)R0.call(s,a)&&(i[a]=e.copier(s[a],e));for(var l=qf(s),c=0,u=l.length,f=void 0;c<u;++c)f=l[c],iT.call(s,f)&&(i[f]=e.copier(s[f],e));return i}var pT=N0?mT:hT;function gT(s,e){var i=Qf(e.prototype);return e.cache.set(s,i),dc(s,i,e)}function ed(s,e){return new e.Constructor(s.valueOf())}function yT(s,e){var i=new e.Constructor(s.source,qk(s));return i.lastIndex=s.lastIndex,i}function hc(s,e){return s}function $0(s,e){var i=new e.Constructor;return e.cache.set(s,i),s.forEach(function(a){i.add(e.copier(a,e))}),i}function vT(s,e){return dc(s,$0(s,e),e)}var bT=Array.isArray,td=Object.assign,ST=Object.getPrototypeOf||function(s){return s.__proto__},B0={array:aT,arrayBuffer:F0,blob:cT,dataView:uT,date:fT,error:hc,map:L0,object:pT,regExp:yT,set:$0},xT=td({},B0,{array:lT,map:dT,object:gT,set:vT});function ET(s){return{Arguments:s.object,Array:s.array,ArrayBuffer:s.arrayBuffer,Blob:s.blob,Boolean:ed,DataView:s.dataView,Date:s.date,Error:s.error,Float32Array:s.arrayBuffer,Float64Array:s.arrayBuffer,Int8Array:s.arrayBuffer,Int16Array:s.arrayBuffer,Int32Array:s.arrayBuffer,Map:s.map,Number:ed,Object:s.object,Promise:hc,RegExp:s.regExp,Set:s.set,String:ed,WeakMap:hc,WeakSet:hc,Uint8Array:s.arrayBuffer,Uint8ClampedArray:s.arrayBuffer,Uint16Array:s.arrayBuffer,Uint32Array:s.arrayBuffer,Uint64Array:s.arrayBuffer}}function j0(s){var e=td({},B0,s),i=ET(e),a=i.Array,l=i.Object;function c(u,f){if(f.prototype=f.Constructor=void 0,!u||typeof u!="object")return u;if(f.cache.has(u))return f.cache.get(u);if(f.prototype=ST(u),f.Constructor=f.prototype&&f.prototype.constructor,!f.Constructor||f.Constructor===Object)return l(u,f);if(bT(u))return a(u,f);var d=i[tT(u)];return d?d(u,f):typeof u.then=="function"?u:l(u,f)}return function(f){return c(f,{Constructor:void 0,cache:_k(),copier:c,prototype:void 0})}}function wT(s){return j0(td({},xT,s))}var P6=wT({}),AT=j0({});const mc=AT;function pc(s,e,i){if(e.if!=null){if(e.if===!1)return e.else;if(e.if&&(e.then||e.else)){const a=s.validate(i,s.resolveRef(e.if));if(a.length===0&&e.then)return s.resolveRef(e.then);if(a.length!==0&&e.else)return s.resolveRef(e.else)}}}const OT=(s,e,i,a)=>{const l=pc(s,e,i);if(l)return s.validate(i,l,a)};function W0(s,e,i){var a;const l={...(a=s.resolveRef(e))!==null&&a!==void 0?a:{}},c=pc(s,l,i);return c||va(l,"if","then","else")}function nd(s,e,i=s.rootSchema){let a=mc(i);for(let l=0;l<i.allOf.length;l+=1){const c=W0(s,i.allOf[l],e);a=An(a,c)}return delete a.allOf,a}function V0(s,e){const{allOf:i}=e;if(!Array.isArray(i)||i.length===0)return;let a={};return i.forEach(l=>{a=An(a,s.resolveRef(l))}),a}const CT=(s,e,i,a)=>{const{allOf:l}=e;if(!Array.isArray(l)||l.length===0)return;const c=[];return e.allOf.forEach(u=>{c.push(...s.validate(i,u,a))}),c};function kT(s){return s.filter((e,i)=>s.indexOf(e)===i)}function Fi(s){return ft(s)==="object"}function z0(s,e,i){const{dependencies:a}=e;if(!Fi(a)||!Fi(i))return;let l=!1,c={required:[]};if(Object.keys(a).forEach(u=>{var f,d;if(i[u]==null&&!(!((f=e.required)===null||f===void 0)&&f.includes(u)||!((d=c.required)===null||d===void 0)&&d.includes(u)))return;const h=a[u];if(Array.isArray(h)){l=!0,c.required.push(...h);return}if(Fi(h)){l=!0,c=An(c,s.resolveRef(h));return}}),l)return c.required=kT(c.required),c}const TT=(s,e,i,a)=>{if(ft(e.dependencies)!=="object")return;const l=[];return Object.keys(i).forEach(c=>{if(e.dependencies[c]===void 0||e.dependencies[c]===!0)return;if(e.dependencies[c]===!1){l.push(s.errors.missingDependencyError({pointer:a,schema:e,value:i}));return}let u;const f=ft(e.dependencies[c]);if(f==="array")u=e.dependencies[c].filter(d=>i[d]===void 0).map(d=>s.errors.missingDependencyError({missingProperty:d,pointer:a,schema:e,value:i}));else if(f==="object")u=s.validate(i,e.dependencies[c],a);else throw new Error(`Invalid dependency definition for ${a}/${c}. Must be string[] or schema`);l.push(...u)}),l.length>0?l:void 0};function U0(s,e,i){if(!Array.isArray(e.anyOf)||e.anyOf.length===0)return;let a;return e.anyOf.forEach(l=>{l=s.resolveRef(l),s.isValid(i,l)&&(a=a?An(a,l):l)}),a}function rd(s,e,i=s.rootSchema,a="#"){const{anyOf:l}=i;if(!Array.isArray(l)||l.length===0)return i;const c=U0(s,i,e);if(c==null)return s.errors.anyOfError({pointer:a,schema:i,value:e,anyOf:JSON.stringify(l)});const u=An(i,c);return va(u,"anyOf")}const PT=(s,e,i,a)=>{if(!(!Array.isArray(e.anyOf)||e.anyOf.length===0)){for(let l=0;l<e.anyOf.length;l+=1)if(s.isValid(i,e.anyOf[l]))return;return s.errors.anyOfError({pointer:a,schema:e,value:i,anyOf:e.anyOf})}},H0=["allOf","anyOf","oneOf","dependencies","if","then","else"],DT=["allOf","anyOf","oneOf","dependencies","if"];function MT(s){const e=Object.keys(s);return DT.findIndex(i=>e.includes(i))!==-1}function id(s,e,i,a){let l,c;if(e=s.resolveRef(e),e.oneOf){const m=fc(s,i,e,a);Kn(m)?c=m:m&&(l=An(l!=null?l:{},m))}if(Array.isArray(e.allOf)){const m=e.allOf.map(p=>{if(MT(p)){let b=id(s,p,i,a);return b?(b=An(p,b),va(b,...H0)):void 0}return p});if(m.length>0){const p=V0(s,{allOf:m});l=An(l!=null?l:{},p)}}const u=U0(s,e,i);u&&(l=An(l!=null?l:{},u));const f=z0(s,e,i);f&&(l=An(l!=null?l:{},f));const d=pc(s,e,i);if(d&&(l=An(l!=null?l:{},d)),l==null)return c;const h=id(s,l,i,a);return h&&(l=An(l,h)),va(l,...H0)}const IT=["allOf","anyOf","oneOf","dependencies","if","then","else"];function K0(s,e,i,a){let l=id(s,e,i,a);return l?(l=An(e,l),va(l,...IT)):e}class gc{constructor(e,i){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=e,this.typeKeywords=mc(e.typeKeywords),this.validateKeyword=Object.assign({},e.validateKeyword),this.validateType=Object.assign({},e.validateType),this.validateFormat=Object.assign({},e.validateFormat),this.errors=Object.assign({},e.errors),this.setSchema(i)}get rootSchema(){return this.__rootSchema}set rootSchema(e){e!=null&&(this.__rootSchema=this.config.compileSchema(this,e))}addRemoteSchema(e,i){this.config.addRemoteSchema(this,e,i)}compileSchema(e){var i;return this.config.compileSchema(this,e,(i=this.rootSchema)!==null&&i!==void 0?i:e)}createSchemaOf(e){return this.config.createSchemaOf(e)}each(e,i,a,l){return this.config.each(this,e,i,a,l)}eachSchema(e,i=this.rootSchema){return this.config.eachSchema(i,e)}getChildSchemaSelection(e,i){return this.config.getChildSchemaSelection(this,e,i)}getSchema(e){return this.config.getSchema(this,e)}getTemplate(e,i,a=this.config.templateDefaultOptions){return this.config.getTemplate(this,e,i,a)}isValid(e,i,a){return this.config.isValid(this,e,i,a)}resolveAnyOf(e,i,a){return this.config.resolveAnyOf(this,e,i,a)}resolveAllOf(e,i){return this.config.resolveAllOf(this,e,i)}resolveRef(e){return this.config.resolveRef(e,this.rootSchema)}resolveOneOf(e,i,a){return this.config.resolveOneOf(this,e,i,a)}setSchema(e){this.rootSchema=e}step(e,i,a,l){return this.config.step(this,e,i,a,l)}validate(e,i,a){return this.config.validate(this,e,i,a)}}function sd(s,e,i){i.id=i.id||e,s.remotes[e]=s.compileSchema(i)}var oi=S(95716),ba=S.n(oi),RT=S(22193);const G0="[^?/{}*,()#]+",NT=`
root ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)
recursion ::= (SEP query | pattern)*

query ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?
property ::= ${G0}
regex ::= "{" [^}]+ "}"
SEP ::= "/"
all ::= "**"
any ::= "*"

typecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")
lookahead ::= "?" expression ((andExpr | orExpr) expression)*
andExpr ::= S? "&&" S?
orExpr ::= S? "||" S?

expression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*
exprProperty ::= [a-zA-Z0-9-_ $]+
escaped ::= [^"]+
is ::= ":"
isnot ::= ":!"
ESC ::= '"'

pattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?
quantifier ::= "+" | "*" | [0-9]+
orPattern ::= S? "," S?

S ::= [ ]*
`,FT=/(children|text|type|start|end|rest|errors|fullText|\d+)/,LT=/(children|text|type|\d+)/,D6=s=>JSON.stringify(s,(e,i)=>e===""||FT.test(e)?i:void 0,2),$T=s=>JSON.stringify(s,(e,i)=>e===""||e==="rest"&&i!==""||LT.test(e)?i:void 0,2),BT=new RT.A.Parser(NT),Y0=s=>BT.getAST(s),M6=s=>JSON.parse($T(s)),In=0,I6=1,J0=2,ws=3,yc=(s,e)=>`${s}/${e}`,Z0=Object.prototype.toString,jT=/Object|Array/,od=s=>jT.test(Z0.call(s)),WT=s=>Z0.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase();function _0(s){return new RegExp(s.text.replace(/(^{|}$)/g,""))}function VT(s,e){Array.isArray(s)?s.forEach(e):Object.prototype.toString.call(s)==="[object Object]"&&Object.keys(s).forEach(function(i){e(s[i],i,s)})}function X0(s){return Array.isArray(s)?s.map(function(e,i){return`${i}`}):Object.prototype.toString.call(s)==="[object Object]"?Object.keys(s):[]}const Li={mem:[],get(s,e){const i=s[In][e];if(!Li.mem.includes(i))return od(i)&&Li.mem.push(i),[i,e,s[In],yc(s[ws],e)]},reset(){Li.mem.length=0}},ad={any(s,e){const i=e[In];return X0(i).map(a=>[i[a],a,i,yc(e[ws],a)])},all(s,e){const i=[e];return VT(e[In],(a,l)=>{const c=Li.get(e,l);c&&i.push(...ad.all(s,c))}),i},regex(s,e){const i=_0(s),a=e[In];return X0(a).filter(l=>i.test(l)).map(l=>[a[l],l,a,yc(e[ws],l)])}},vc={escaped:(s,e)=>vc.property(s,e),property:(s,e)=>{const i=s.text;if(e[In]&&e[In][i]!==void 0)return[e[In][i],i,e[In],yc(e[ws],i)]},typecheck:(s,e)=>{const i=s.text.replace(/^\?:/,"");if(i==="value")return od(e[In])?void 0:e;if(WT(e[In])===i)return e},lookahead:(s,e)=>{let i=!0,a=!1;return s.children.forEach(l=>{if(l.type==="expression"){const c=vc.expression(l,e)!==void 0;i=a===!0?i||c:i&&c}else a=l.type==="orExpr"}),i?e:void 0},expression:(s,e)=>{const i=s.children[0].text,a=s.children[1],l=s.children[2],c=e[In];if(od(c)!==!1)return zT(c[i],a,l)?e:void 0}};function zT(s,e,i){if(e===void 0)return s!==void 0;let a;const l=`${s}`;return i.type==="regex"?a=_0(i).test(l):a=l===i.text,e.type==="isnot"&&(a=a===!1&&s!==void 0),a}function UT(s,e,i,a){const l=[];for(let c=0,u=e.length;c<u;c+=1)l.push(...s(i,e[c],i,a));return l}function HT(s,e,i,a){const l=[];for(let c=0,u=e.length;c<u;c+=1){const f=s(i,e[c],a);f&&l.push(f)}return l}function KT(s,e,i){let a=s;return e.children.forEach(l=>{if(ad[l.type])a=UT(ad[l.type],a,l,i);else if(vc[l.type])a=HT(vc[l.type],a,l,i);else throw new Error(`Unknown filter ${l.type}`)}),a}function GT(s,e,i){const a=[];let l=s;return e.children.forEach(c=>{if(c.type==="orPattern"){a.push(...l),l=s;return}l=ld(l,c,i)}),a.push(...l),a}function YT(s){if(s==null)return 1;if(s==="*"||s==="+")return 1/0;const e=parseInt(s);return isNaN(e)?1:e}function JT(s,e,i){const a=[],l=e.children.find(d=>d.type==="quantifier"),c=YT(l&&l.text);let u=s;l&&l.text==="*"&&a.push(...u);let f=0;for(;u.length>0&&f<c;)u=GT(u,e,i),a.push(...u),f+=1;return a}function ZT(s,e,i){let a=s;return e.children.forEach(l=>a=ld(a,l,i)),a}function ld(s,e,i){let a;return e.type==="query"?a=KT(s,e,i):e.type==="pattern"?a=JT(s,e,i):a=ZT(s,e,i),Li.reset(),Li.mem.push(s),a}function _T(s,e){return Li.reset(),Li.mem.push(s),ld([[s,null,null,"#"]],e)}const Q0={value:s=>s.map(e=>e[In]),pointer:s=>s.map(e=>e[ws]),all:s=>s,map:s=>{const e={};return s.forEach(i=>e[i[ws]]=i[In]),e}};var Rr;(function(s){s.POINTER="pointer",s.VALUE="value",s.ALL="all",s.MAP="map"})(Rr||(Rr={})),$i.POINTER=Rr.POINTER,$i.VALUE=Rr.VALUE,$i.ALL=Rr.ALL,$i.MAP=Rr.MAP;function $i(s,e,i=Rr.VALUE){if(e==null)return[];e=e.replace(/(\/$)/g,""),e===""&&(e="#");const a=Y0(e);if(a==null)throw new Error(`empty ast for '${e}'`);if(a.rest!=="")throw new Error(`Failed parsing queryString from: '${a.rest}'`);const l=_T(s,a);return typeof i=="function"?l.map(c=>i(...c)):Q0[i]?Q0[i](l):l}const XT=["root","recursion"];function q0(s,e=[]){return XT.includes(s.type)?(s.children.forEach(i=>q0(i,e)),e):(e.push(s.text),e)}function ey(s){if(s==null||s==="")return[];const e=Y0(s);return q0(e)}const cd=s=>JSON.parse(JSON.stringify(s)),QT=Object.prototype.toString,mo=s=>QT.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase(),ty=new RegExp(`^("[^"]+"|${G0})$`),qT=["string","number","boolean","null"],e2=/^\[\d*\]$/,ny=/^\[(\d+)\]$/,t2=/^".+"$/,ry=/(^\[\d*\]$|^\d+$)/;function iy(s){return parseInt(s.replace(/^(\[|\]$)/,""))}function sy(s){return t2.test(s)?s.replace(/(^"|"$)/g,""):s}function n2(s,e,i){s.length<=e?s[e]=i:s.splice(e,0,i)}function r2(s,e){const i=[];return s.forEach(a=>i.push(...$i(a[0],e,Rr.ALL))),i}function oy(s,e,i,a){const l=s[0];if(/^\[\]$/.test(e)){l.push(i);const c=l.length-1;return[l[c],c,l,`${s[3]}/${c}}`]}if(a==null&&mo(l[e])==="object"&&mo(i)==="object")return Object.assign(l[e],i),[l[e],e,l,`${s[3]}/${e}}`];if(a===Sa.INSERT_ITEMS||a==null&&ny.test(e)){const c=iy(e);return n2(l,c,i),[l[c],c,l,`${s[3]}/${c}}`]}if(a===Sa.REPLACE_ITEMS||a==null){const c=iy(e);return l[c]=i,[l[c],c,l,`${s[3]}/${c}}`]}throw new Error(`Unknown array index '${e}' with force-option '${a}'`)}function i2(s,e,i,a){return e=sy(e),s.filter(l=>Array.isArray(l[0])&&ry.test(e)?!0:qT.includes(mo(l[0][e]))===!1).map(l=>{const c=i?[]:{},u=l[0],f=mo(c),d=mo(u[e]);return Array.isArray(u)&&d!==f?oy(l,e,c,a):(u[e]=u[e]||c,[u[e],e,u,`${l[3]}/${e}`])})}var bc;(function(s){s.REPLACE_ITEMS="replace",s.INSERT_ITEMS="insert"})(bc||(bc={})),Sa.REPLACE_ITEMS=bc.REPLACE_ITEMS,Sa.INSERT_ITEMS=bc.INSERT_ITEMS;function Sa(s,e,i,a){if(e==null)return cd(s);if(e=e.replace(/(\/$)/g,""),e==="")return cd(i);const l=cd(s);let c=[[l,null,null,"#"]];const u=ey(e),f=u.pop(),d=e2.test(f)&&ny.test(f)===!1;if(ty.test(f)===!1||d)throw new Error(`Unsupported query '${e}' ending with non-property`);return u.forEach((h,m)=>{if(h==="__proto__"||h==="prototyped"||h==="constructor")return;if(ty.test(h)===!1){c=r2(c,h);return}const p=m>=u.length-1?f:u[m+1],b=ry.test(p);c=i2(c,h,b,a)}),c.forEach(h=>{let m=i;mo(i)==="function"&&(m=i(h[3],f,h[0],`${h[3]}/${f}`));const p=h[0];if(Array.isArray(p))oy(h,f,m,a);else{const b=sy(f);if(b==="__proto__"||b==="prototyped"||b==="constructor")return;p[b]=m}}),l}function s2(s,e,i=!1){const a=[],l=$i(s,e,Rr.ALL);return l.forEach(function(c){a.push(c[0]),(0,oi.remove)(s,c[ws],!0)}),l.forEach(function(c){Array.isArray(c[J0])&&(0,oi.removeUndefinedItems)(c[J0])}),i?a:s}const R6={get:$i,set:Sa,split:ey,remove:s2,ReturnType:Rr},ai={$ref:{type:!1},allOf:{type:!1,definitions:["allOf/*"]},anyOf:{type:!1,definitions:["anyOf/*"]},array:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","items","items/*","additionalItems"],validationKeywords:["minItems","maxItems","uniqueItems"],keywords:["items","additionalItems","minItems","maxItems","uniqueItems"]},boolean:{type:!0},enum:{type:!1},integer:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},not:{type:!1,definitions:["not"]},number:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},null:{type:!0},object:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","properties/*","additionalProperties","patternProperties/*","dependencies/*"],validationKeywords:["minProperties","maxProperties","required"],keywords:["properties","additionalProperties","patternProperties","dependencies","minProperties","maxProperties","required"]},oneOf:{type:!1,definitions:["oneOf/*"]},string:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minLength","maxLength","pattern"]}},o2=Object.keys(ai).filter(s=>ai[s].type===!1),ay=Object.prototype.hasOwnProperty;function ly(s){if(Fi(s)===!1)return;if(s.enum)return"enum";const e=s.type;if(Array.isArray(e)||ai[e])return e;const i=o2.filter(a=>s[a]);if(i.length===1)return i[0];if(i.length===0){for(let a=0,l=ai.object.keywords.length;a<l;a+=1){const c=ai.object.keywords[a];if(ay.call(s,c))return"object"}for(let a=0,l=ai.array.keywords.length;a<l;a+=1){const c=ai.array.keywords[a];if(ay.call(s,c))return"array"}return}throw new Error(`Mutiple typeIds [${i.join(", ")}] matched in ${JSON.stringify(s)}`)}function a2(s){const e=[],i=ly(s);if(i==null)return e;let a;if(Array.isArray(i)){a={};for(let l=0,c=i.length;l<c;l+=1)Object.assign(a,ai[i[l]])}else a=ai[i];return a.definitions==null||a.definitions.forEach(l=>{$i(s,l,(c,u,f,d)=>{Fi(c)&&ly(c)&&e.push({pointer:ba().join(ba().split(d),!1),def:c})})}),e}function l2(s,e){if(this.callback(s,e)===!0)return;a2(s).forEach(a=>this.nextTypeDefs(a.def,ba().join(e,a.pointer,!1)))}function Sc(s,e,i,a="definitions"){const l=e[a];Object.keys(l).forEach(c=>{if(l[c]===!1||Fi(l[c])){s.nextTypeDefs(l[c],ba().join(i,a,c,!1));return}})}function xa(s,e,i="#"){const a={callback:e,nextTypeDefs:l2};a.nextTypeDefs(s,i),s.definitions!=null&&(a.callback=(l,c)=>{e(l,c),l.definitions!=null&&Sc(a,l,c)},Sc(a,s,i)),s.$defs!=null&&(a.callback=(l,c)=>{e(l,c),l.definitions!=null&&Sc(a,l,c)},Sc(a,s,i,"$defs"))}const c2=/(#|\/)+$/,xc=/#$/,u2=/^[^:]+:\/\/[^/]+\//,f2=/\/[^/]*$/,d2=/#.*$/;function Ec(s,e){return s==null&&e==null?"#":e==null?s.replace(xc,""):s==null?e.replace(xc,""):e[0]==="#"?`${s.replace(d2,"")}${e.replace(c2,"")}`:u2.test(e)?e.replace(xc,""):`${s.replace(f2,"")}/${e.replace(xc,"")}`}const Ea=/(#|\/)+$/g,h2=["",null,"#"];function m2(s){if(h2.includes(s))return[];if(s=s.replace(Ea,""),s.indexOf("#")===-1)return[s.replace(Ea,"")];if(s.indexOf("#")===0)return[s.replace(Ea,"")];const e=s.split("#");return e[0]=e[0].replace(Ea,""),e[1]=`#${e[1].replace(Ea,"")}`,e}const p2=/(#|\/)+$/g,g2=s=>ft(s)==="object";function li(s,e,i){if(g2(i)&&(i=i.__ref||i.$ref),i==null)return e;let a;const l=i.replace(p2,"");if(s.remotes[l])return a=s.remotes[l],a&&a.$ref?li(s,e,a.$ref):a;if(s.ids[i])return a=(0,oi.get)(e,s.ids[i]),a&&a.$ref?li(s,e,a.$ref):a;const c=m2(i);if(c.length===0)return e;if(c.length===1){if(i=c[0],s.remotes[i])return a=s.remotes[i],li(s,e,a.$ref);if(s.ids[i])return a=(0,oi.get)(e,s.ids[i]),a&&a.$ref?li(s,e,a.$ref):a}if(c.length===2){const u=c[0];if(i=c[1],s.remotes[u])return s.remotes[u].getRef?s.remotes[u].getRef(i):li(s,s.remotes[u],i);if(s.ids[u])return li(s,(0,oi.get)(e,s.ids[u]),i)}return a=(0,oi.get)(e,s.ids[i]||i),a&&a.$ref?li(s,e,a.$ref):a}const cy="__compiled",uy="__ref",y2="getRef",v2="getRoot",b2=/(#|\/)+$/g;function S2(s,e,i=e,a=!1){if(!e||e[cy]!==void 0)return e;const l={ids:{},remotes:s.remotes},c=JSON.stringify(e),u=JSON.parse(c);if(Object.defineProperty(u,cy,{enumerable:!1,value:!0}),Object.defineProperty(u,y2,{enumerable:!1,value:li.bind(null,l,u)}),a===!1&&c.includes("$ref")===!1)return u;e!==i&&Object.defineProperty(u,"definitions",{enumerable:!1,value:Object.assign({},i.definitions,i.$defs,e.definitions,e.$defs)});const f={},d=()=>u;return xa(u,(h,m)=>{var p;if(h.id){if(h.id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(m)){const w=m.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),A=(0,oi.get)(u,w);h.id=(p=A.id)!==null&&p!==void 0?p:h.id}l.ids[h.id.replace(b2,"")]=m}m=`#${m}`.replace(/##+/,"#");const b=m.replace(/\/[^/]+$/,""),v=m.replace(/\/[^/]+\/[^/]+$/,""),x=f[b]||f[v],E=Ec(x,h.id);f[m]=E,l.ids[E]==null&&(l.ids[E]=m),h.$ref&&!h[uy]&&(Object.defineProperty(h,uy,{enumerable:!1,value:Ec(E,h.$ref)}),Object.defineProperty(h,v2,{enumerable:!1,value:d}))}),u}const x2=S2;function ud(s,e,i,a=s.rootSchema,l="#"){a=s.resolveRef(a),i(a,e,l);const c=ft(e);c==="object"?Object.keys(e).forEach(u=>{const f=s.step(u,a,e,l),d=e[u];s.each(d,i,f,`${l}/${u}`)}):c==="array"&&e.forEach((u,f)=>{const d=s.step(f,a,e,l);s.each(u,i,d,`${l}/${f}`)})}const fd={additionalItemsError:Be("AdditionalItemsError"),additionalPropertiesError:Be("AdditionalPropertiesError"),anyOfError:Be("AnyOfError"),allOfError:Be("AllOfError"),constError:Be("ConstError"),containsError:Be("ContainsError"),containsArrayError:Be("ContainsArrayError"),containsAnyError:Be("ContainsAnyError"),enumError:Be("EnumError"),forbiddenPropertyError:Be("ForbiddenPropertyError"),formatURLError:Be("FormatURLError"),formatURIError:Be("FormatURIError"),formatURIReferenceError:Be("FormatURIReferenceError"),formatURITemplateError:Be("FormatURITemplateError"),formatDateError:Be("FormatDateError"),formatDateTimeError:Be("FormatDateTimeError"),formatEmailError:Be("FormatEmailError"),formatHostnameError:Be("FormatHostnameError"),formatIPV4Error:Be("FormatIPV4Error"),formatIPV4LeadingZeroError:Be("FormatIPV4LeadingZeroError"),formatIPV6Error:Be("FormatIPV6Error"),formatIPV6LeadingZeroError:Be("FormatIPV6LeadingZeroError"),formatJsonPointerError:Be("FormatJsonPointerError"),formatRegExError:Be("FormatRegExError"),formatTimeError:Be("FormatTimeError"),invalidSchemaError:Be("InvalidSchemaError"),invalidDataError:Be("InvalidDataError"),invalidTypeError:Be("InvalidTypeError"),invalidPropertyNameError:Be("InvalidPropertyNameError"),maximumError:Be("MaximumError"),maxItemsError:Be("MaxItemsError"),maxLengthError:Be("MaxLengthError"),maxPropertiesError:Be("MaxPropertiesError"),minimumError:Be("MinimumError"),minItemsError:Be("MinItemsError"),minItemsOneError:Be("MinItemsOneError"),minLengthError:Be("MinLengthError"),minLengthOneError:Be("MinLengthOneError"),minPropertiesError:Be("MinPropertiesError"),missingDependencyError:Be("MissingDependencyError"),missingOneOfPropertyError:Be("MissingOneOfPropertyError"),multipleOfError:Be("MultipleOfError"),multipleOneOfError:Be("MultipleOneOfError"),noAdditionalPropertiesError:Be("NoAdditionalPropertiesError"),notError:Be("NotError"),oneOfError:Be("OneOfError"),oneOfPropertyError:Be("OneOfPropertyError"),patternError:Be("PatternError"),patternPropertiesError:Be("PatternPropertiesError"),requiredPropertyError:Be("RequiredPropertyError"),schemaWarning:Be("SchemaWarning"),typeError:Be("TypeError"),undefinedValueError:Be("UndefinedValueError"),uniqueItemsError:Be("UniqueItemsError"),unknownPropertyError:Be("UnknownPropertyError"),valueNotEmptyError:Be("ValueNotEmptyError")};var E2=S(47112),fy=S.n(E2),w2=S(85626);const A2=new RegExp("^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),O2=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,C2=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,k2=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,T2=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,P2=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,D2=[0,31,28,31,30,31,30,31,31,30,31,30,31],M2=/^(?:\/(?:[^~/]|~0|~1)*)*$/,I2=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,R2=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,N2=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,dd={date:(s,e,i,a)=>{if(typeof i!="string"||i==="")return;const l=i.match(T2);if(!l)return s.errors.formatDateTimeError({value:i,pointer:a,schema:e});const c=+l[1],u=+l[2],f=+l[3],d=c%4===0&&(c%100!==0||c%400===0);if(!(u>=1&&u<=12&&f>=1&&f<=(u==2&&d?29:D2[u])))return s.errors.formatDateError({value:i,pointer:a,schema:e})},"date-time":(s,e,i,a)=>{if(!(typeof i!="string"||i===""))return i===""||A2.test(i)?new Date(i).toString()==="Invalid Date"?s.errors.formatDateTimeError({value:i,pointer:a,schema:e}):void 0:s.errors.formatDateTimeError({value:i,pointer:a,schema:e})},email:(s,e,i,a)=>{if(typeof i!="string"||i==="")return;if(i[0]==='"')return s.errors.formatEmailError({value:i,pointer:a,schema:e});const[l,c,...u]=i.split("@");if(!l||!c||u.length!==0||l.length>64||c.length>253)return s.errors.formatEmailError({value:i,pointer:a,schema:e});if(l[0]==="."||l.endsWith(".")||l.includes(".."))return s.errors.formatEmailError({value:i,pointer:a,schema:e});if(!/^[a-z0-9.-]+$/i.test(c)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(l))return s.errors.formatEmailError({value:i,pointer:a,schema:e});if(!c.split(".").every(f=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(f)))return s.errors.formatEmailError({value:i,pointer:a,schema:e})},"idn-email":(s,e,i,a)=>{if(!(typeof i!="string"||i===""))try{(0,w2.parse)(i);return}catch{return s.errors.formatEmailError({value:i,pointer:a,schema:e})}},hostname:(s,e,i,a)=>{if(typeof i=="string"&&!(i===""||k2.test(i)))return s.errors.formatHostnameError({value:i,pointer:a,schema:e})},ipv4:(s,e,i,a)=>{if(!(typeof i!="string"||i==="")){if(i&&i[0]==="0")return s.errors.formatIPV4LeadingZeroError({value:i,pointer:a,schema:e});if(!(i.length<=15&&O2.test(i)))return s.errors.formatIPV4Error({value:i,pointer:a,schema:e})}},ipv6:(s,e,i,a)=>{if(!(typeof i!="string"||i==="")){if(i&&i[0]==="0")return s.errors.formatIPV6LeadingZeroError({value:i,pointer:a,schema:e});if(!(i.length<=45&&C2.test(i)))return s.errors.formatIPV6Error({value:i,pointer:a,schema:e})}},"json-pointer":(s,e,i,a)=>{if(!(typeof i!="string"||i==="")&&!M2.test(i))return s.errors.formatJsonPointerError({value:i,pointer:a,schema:e})},"relative-json-pointer":(s,e,i,a)=>{if(!(typeof i!="string"||i==="")&&!I2.test(i))return s.errors.formatJsonPointerError({value:i,pointer:a,schema:e})},regex:(s,e,i,a)=>{if(typeof i=="string"&&/\\Z$/.test(i)===!1){try{new RegExp(i);return}catch{}return s.errors.formatRegExError({value:i,pointer:a,schema:e})}if(!(typeof i=="object"||typeof i=="number"||Array.isArray(i)))return s.errors.formatRegExError({value:i,pointer:a,schema:e})},time:(s,e,i,a)=>typeof i!="string"||i===""||i.match(P2)?void 0:s.errors.formatDateTimeError({value:i,pointer:a,schema:e}),uri:(s,e,i,a)=>{if(!(typeof i!="string"||i==="")&&!fy().isUri(i))return s.errors.formatURIError({value:i,pointer:a,schema:e})},"uri-reference":(s,e,i,a)=>{if(!(typeof i!="string"||i==="")&&!R2.test(i))return s.errors.formatURIReferenceError({value:i,pointer:a,schema:e})},"uri-template":(s,e,i,a)=>{if(!(typeof i!="string"||i==="")&&!N2.test(i))return s.errors.formatURITemplateError({value:i,pointer:a,schema:e})},url:(s,e,i,a)=>{if(!(i===""||fy().isWebUri(i)))return s.errors.formatURLError({value:i,pointer:a,schema:e})}},dy={};function hd(s,e=dy){const{pointer:i="#",data:a,schema:l=s.rootSchema,withSchemaWarning:c=!1}=e,u=ba().split(i),f=hy(s,s.resolveRef(l),u,"#",a);if(!(!c&&(f==null?void 0:f.code)==="schema-warning"))return f}function hy(s,e,i,a,l=dy){if(i.length===0)return s.resolveRef(e);const c=i.shift();return e=s.step(c,e,l,a),Kn(e)?e:(l=l[c],hy(s,e,i,`${a}/${c}`,l))}function F2(s){switch(ft(s)){case"string":case"array":return(s==null?void 0:s.length)===0;case"null":case"undefined":return!0;case"object":return Object.keys(s).length===0;default:return!1}}const my=Es.templateDefaultOptions;let ci;function md(s,e){const{$ref:i}=s;return i==null?!0:(ci[e]==null||ci[e][i]==null?0:ci[e][i])<Es.GET_TEMPLATE_RECURSION_LIMIT}function py(s,e,i){const{$ref:a}=e;return a==null?e:(ci[i]=ci[i]||{},ci[i][a]=ci[i][a]||0,ci[i][a]+=1,s.resolveRef(e))}function L2(s,e){if(s==="string")return JSON.stringify(e);if(typeof e!="string")return null;try{if(e=JSON.parse(e),typeof e===s)return e}catch{}return null}function gy(s,e,i,a,l){if(ft(e)!=="object")return Object.assign({pointer:a},e);if(md(e,a)===!1&&i==null)return!1;let c=mc(py(s,e,a));if(Array.isArray(e.anyOf)&&e.anyOf.length>0){if(md(e.anyOf[0],`${a}/anyOf/0`)){const u=py(s,e.anyOf[0],`${a}/anyOf/0`);c=ya(c,u),c.pointer=e.anyOf[0].$ref||c.pointer}delete c.anyOf}if(Array.isArray(e.allOf)&&e.allOf.map((f,d)=>md(f,`${a}/allOf/${d}`)).reduceRight((f,d)=>f&&d,!0)){const f=[];let d=mc(i);for(let m=0;m<e.allOf.length;m+=1)f.push(W0(s,e.allOf[m],d)),d=Sr(s,d,{type:e.type,...f[m]},`${a}/allOf/${m}`,l);const h=V0(s,{allOf:f});h&&(c=An(c,h))}return c.pointer=c.pointer||e.$ref||a,c}const yy=s=>s&&typeof s=="object";function Sr(s,e,i,a,l){var c;if(i==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(e)}`);if(a==null)throw new Error("Missing pointer");let u=gy(s,i,e,a,l);if(!yy(u))return;if(a=u.pointer,u!=null&&u.const)return u.const;if(Array.isArray(u.oneOf))if(F2(e)){const m=u.oneOf[0].type||u.type||u.const&&typeof u.const||ft(e);u={...u.oneOf[0],type:m}}else{const m=fc(s,e,u);if(Kn(m)){if(e!=null&&l.removeInvalidData!==!0)return e;u=u.oneOf[0],e=void 0}else m.type=(c=m.type)!==null&&c!==void 0?c:u.type,u=m}if(!yy(u)||u.type==null)return;if(e instanceof File)return e;const f=Array.isArray(u.type)?$2(u.type,e,u.default):u.type,d=ft(e);return e!=null&&d!==f&&!(d==="number"&&f==="integer")&&(e=L2(f,e)),vy[f]==null?l.removeInvalidData?void 0:e:vy[f](s,u,e,a,l)}function $2(s,e,i){if(e==null){if(i!=null){const l=ft(i);if(s.includes(l))return l}return s[0]}const a=ft(e);return s.includes(a)?a:s[0]}const vy={null:(s,e,i)=>wa(e,i,null),string:(s,e,i)=>wa(e,i,""),number:(s,e,i)=>wa(e,i,0),integer:(s,e,i)=>wa(e,i,0),boolean:(s,e,i)=>wa(e,i,!1),object:(s,e,i,a,l)=>{var c;const u=e.default===void 0?{}:e.default,f={},d=l.extendDefaults===!1&&e.default!==void 0?[]:(c=e.required)!==null&&c!==void 0?c:[];e.properties&&Object.keys(e.properties).forEach(p=>{const b=i==null||i[p]==null?u[p]:i[p],v=d.includes(p);(b!=null||v||l.addOptionalProps)&&(f[p]=Sr(s,b,e.properties[p],`${a}/properties/${p}`,l))});let h=z0(s,e,f);if(h){h=An(e,h),delete h.dependencies;const p=Sr(s,i,h,`${a}/dependencies`,l);Object.assign(f,p)}i&&(l.removeInvalidData===!0&&(e.additionalProperties===!1||ft(e.additionalProperties)==="object")?ft(e.additionalProperties)==="object"&&Object.keys(i).forEach(p=>{f[p]==null&&s.isValid(i[p],e.additionalProperties)&&(f[p]=i[p])}):Object.keys(i).forEach(p=>f[p]==null&&(f[p]=i[p])));const m=pc(s,e,f);if(m){const p=Sr(s,f,{type:"object",...m},a,l);Object.assign(f,p)}return f},array:(s,e,i,a,l)=>{var c,u;if(e.items==null)return i||[];const f=e.default===void 0?[]:e.default,d=i||f,h=l.extendDefaults===!1&&e.default!==void 0?0:e.minItems||0;if(Array.isArray(e.items)){for(let p=0,b=Math.max(h!=null?h:0,(u=(c=e.items)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0);p<b;p+=1)d[p]=Sr(s,d[p]==null?f[p]:d[p],e.items[p],`${a}/items/${p}`,l);return d}if(ft(e.items)!=="object")return d;const m=gy(s,e.items,i,a,l);if(m===!1)return d;if(a=m.pointer||a,m.oneOf&&d.length===0){const p=m.oneOf[0];for(let b=0;b<h;b+=1)d[b]=Sr(s,d[b]==null?f[b]:d[b],p,`${a}/oneOf/0`,l);return d}if(m.oneOf&&d.length>0){const p=Math.max(h,d.length);for(let b=0;b<p;b+=1){let v=d[b]==null?f[b]:d[b],x=fc(s,v,m);x==null||Kn(x)?v!=null&&l.removeInvalidData!==!0?d[b]=v:(v=void 0,x=m.oneOf[0],d[b]=Sr(s,v,x,`${a}/oneOf/${b}`,l)):d[b]=Sr(s,v,x,`${a}/oneOf/${b}`,l)}return d}if(m.type){for(let p=0,b=Math.max(h,d.length);p<b;p+=1)d[p]=Sr(s,d[p]==null?f[p]:d[p],m,`${a}/items`,l);return d}return d}};function wa(s,e,i){return e!=null?e:s.const?s.const:s.default===void 0&&Array.isArray(s.enum)?s.enum[0]:s.default===void 0?i:s.default}const pd=(s,e,i=s.rootSchema,a)=>(ci={},a?Sr(s,e,i,"#",{...my,...a}):Sr(s,e,i,"#",my));function gd(s,e,i=s.rootSchema,a="#"){return s.validate(e,i,a).length===0}function by(s){const e=[];let i=0;const a=s.length;for(;i<a;){const l=s.charCodeAt(i++);if(l>=55296&&l<=56319&&i<a){const c=s.charCodeAt(i++);(c&64512)==56320?e.push(((l&1023)<<10)+(c&1023)+65536):(e.push(l),i--)}else e.push(l)}return e}function Sy(s){const e=`${s}`,i=e.indexOf(".");return i===-1?0:e.length-(i+1)}var B2=S(38792),xy=S.n(B2);const j2=Object.prototype.hasOwnProperty,Ey=(s,e)=>!(s[e]===void 0||!j2.call(s,e)),wy={additionalProperties:(s,e,i,a)=>{if(e.additionalProperties===!0||e.additionalProperties==null||ft(e.patternProperties)==="object"&&e.additionalProperties===!1)return;const l=[];let c=Object.keys(i).filter(f=>Es.propertyBlacklist.includes(f)===!1);const u=Object.keys(e.properties||{});if(ft(e.patternProperties)==="object"){const f=Object.keys(e.patternProperties).map(d=>new RegExp(d));c=c.filter(d=>{for(let h=0;h<f.length;h+=1)if(f[h].test(d))return!1;return!0})}for(let f=0,d=c.length;f<d;f+=1){const h=c[f];if(u.indexOf(h)===-1){const m=Fi(e.additionalProperties);if(m&&Array.isArray(e.additionalProperties.oneOf)){const p=s.resolveOneOf(i[h],e.additionalProperties,`${a}/${h}`);Kn(p)?l.push(s.errors.additionalPropertiesError({pointer:a,schema:e.additionalProperties,value:i,property:c[f],properties:u,errors:p.data.errors})):l.push(...s.validate(i[h],p,a))}else m?l.push(...s.validate(i[h],e.additionalProperties,`${a}/${h}`)):l.push(s.errors.noAdditionalPropertiesError({pointer:a,schema:e,value:i,property:c[f],properties:u}))}}return l},allOf:CT,anyOf:PT,dependencies:TT,enum:(s,e,i,a)=>{const l=ft(i);if(l==="object"||l==="array"){const c=JSON.stringify(i);for(let u=0;u<e.enum.length;u+=1)if(JSON.stringify(e.enum[u])===c)return}else if(e.enum.includes(i))return;return s.errors.enumError({pointer:a,schema:e,value:i,values:e.enum})},format:(s,e,i,a)=>{if(s.validateFormat[e.format])return s.validateFormat[e.format](s,e,i,a)},items:(s,e,i,a)=>{if(e.items===!1)return Array.isArray(i)&&i.length===0?void 0:s.errors.invalidDataError({pointer:a,value:i,schema:e});const l=[];for(let c=0;c<i.length;c+=1){const u=i[c],f=s.step(c,e,i,a);if(Kn(f))return[f];const d=s.validate(u,f,`${a}/${c}`);l.push(...d)}return l},maximum:(s,e,i,a)=>{if(!isNaN(e.maximum)){if(e.maximum&&e.maximum<i)return s.errors.maximumError({maximum:e.maximum,length:i,value:i,pointer:a,schema:e});if(e.maximum&&e.exclusiveMaximum===!0&&e.maximum===i)return s.errors.maximumError({maximum:e.maximum,length:i,pointer:a,schema:e,value:i})}},maxItems:(s,e,i,a)=>{if(!isNaN(e.maxItems)&&e.maxItems<i.length)return s.errors.maxItemsError({maximum:e.maxItems,length:i.length,schema:e,value:i,pointer:a})},maxLength:(s,e,i,a)=>{if(isNaN(e.maxLength))return;const l=by(i).length;if(e.maxLength<l)return s.errors.maxLengthError({maxLength:e.maxLength,length:l,pointer:a,schema:e,value:i})},maxProperties:(s,e,i,a)=>{const l=Object.keys(i).length;if(isNaN(e.maxProperties)===!1&&e.maxProperties<l)return s.errors.maxPropertiesError({maxProperties:e.maxProperties,length:l,pointer:a,schema:e,value:i})},minLength:(s,e,i,a)=>{if(isNaN(e.minLength))return;const l=by(i).length;if(e.minLength>l)return e.minLength===1?s.errors.minLengthOneError({minLength:e.minLength,length:l,pointer:a,schema:e,value:i}):s.errors.minLengthError({minLength:e.minLength,length:l,pointer:a,schema:e,value:i})},minimum:(s,e,i,a)=>{if(!isNaN(e.minimum)){if(e.minimum>i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:a,schema:e,value:i});if(e.exclusiveMinimum===!0&&e.minimum===i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:a,schema:e,value:i})}},minItems:(s,e,i,a)=>{if(!isNaN(e.minItems)&&e.minItems>i.length)return e.minItems===1?s.errors.minItemsOneError({minItems:e.minItems,length:i.length,pointer:a,schema:e,value:i}):s.errors.minItemsError({minItems:e.minItems,length:i.length,pointer:a,schema:e,value:i})},minProperties:(s,e,i,a)=>{if(isNaN(e.minProperties))return;const l=Object.keys(i).length;if(e.minProperties>l)return s.errors.minPropertiesError({minProperties:e.minProperties,length:l,pointer:a,schema:e,value:i})},multipleOf:(s,e,i,a)=>{if(isNaN(e.multipleOf)||typeof i!="number")return;const l=Sy(i),c=Sy(e.multipleOf);if(l>c)return s.errors.multipleOfError({multipleOf:e.multipleOf,value:i,pointer:a,schema:e});const u=Math.pow(10,c),f=Math.round(i*u),d=Math.round(e.multipleOf*u);if(f%d/u!==0)return s.errors.multipleOfError({multipleOf:e.multipleOf,value:i,pointer:a,schema:e})},not:(s,e,i,a)=>{const l=[];return s.validate(i,e.not,a).length===0&&l.push(s.errors.notError({value:i,not:e.not,pointer:a,schema:e})),l},oneOf:Wk,pattern:(s,e,i,a)=>{if(new RegExp(e.pattern,"u").test(i)===!1)return s.errors.patternError({pattern:e.pattern,description:e.patternExample||e.pattern,received:i,schema:e,value:i,pointer:a})},patternProperties:(s,e,i,a)=>{const l=e.properties||{},c=e.patternProperties;if(ft(c)!=="object")return;const u=[],f=Object.keys(i),d=Object.keys(c).map(h=>({regex:new RegExp(h),patternSchema:c[h]}));return f.forEach(h=>{let m=!1;for(let p=0,b=d.length;p<b;p+=1)if(d[p].regex.test(h)){m=!0;const v=s.validate(i[h],d[p].patternSchema,`${a}/${h}`);v&&v.length>0&&u.push(...v)}l[h]||m===!1&&e.additionalProperties===!1&&u.push(s.errors.patternPropertiesError({key:h,pointer:a,schema:e,value:i,patterns:Object.keys(c).join(",")}))}),u},properties:(s,e,i,a)=>{const l=[],c=Object.keys(e.properties||{});for(let u=0;u<c.length;u+=1){const f=c[u];if(Ey(i,f)){const d=s.step(f,e,i,a),h=s.validate(i[f],d,`${a}/${f}`);l.push(...h)}}return l},propertiesRequired:(s,e,i,a)=>{const l=[],c=Object.keys(e.properties||{});for(let u=0;u<c.length;u+=1){const f=c[u];if(i[f]===void 0)l.push(s.errors.requiredPropertyError({key:f,pointer:a,schema:e,value:i}));else{const d=s.step(f,e,i,a),h=s.validate(i[f],d,`${a}/${f}`);l.push(...h)}}return l},required:(s,e,i,a)=>{if(Array.isArray(e.required)!==!1)return e.required.map(l=>{if(!Ey(i,l))return s.errors.requiredPropertyError({key:l,pointer:a,schema:e,value:i})})},requiredNotEmpty:(s,e,i,a)=>{if(Array.isArray(e.required)!==!1)return e.required.map(l=>{if(i[l]==null||i[l]==="")return s.errors.valueNotEmptyError({property:l,pointer:`${a}/${l}`,schema:e,value:i})})},uniqueItems:(s,e,i,a)=>{if((Array.isArray(i)&&e.uniqueItems)===!1)return;const l=[],c=[];return i.forEach((u,f)=>{for(let d=f+1;d<i.length;d+=1)xy()(u,i[d])&&!l.includes(d)&&(c.push(s.errors.uniqueItemsError({pointer:`${a}/${d}`,duplicatePointer:`${a}/${f}`,arrayPointer:a,value:JSON.stringify(u),schema:e})),l.push(d))}),c}};function yd(s,e){return s==null||s.$ref==null?s:s.getRoot?s.getRoot().getRef(s):e.getRef(s)}function xr(s){if(s===void 0)return;const e={type:ft(s)};return e.type==="object"&&Fi(s)&&(e.properties={},Object.keys(s).forEach(i=>e.properties[i]=xr(s[i]))),e.type==="array"&&Array.isArray(s)&&(s.length===1?e.items=xr(s[0]):e.items=s.map(xr)),e}const W2={array:(s,e,i,a,l)=>{const c=a==null?void 0:a[e],u=ft(i.items);if(u==="object")return K0(s,i.items,c,`${l}/${e}`)||s.resolveRef(i.items);if(u==="array"){if(i.items[e]===!0)return xr(c);if(i.items[e]===!1)return s.errors.invalidDataError({key:e,value:c,pointer:l,schema:i});if(i.items[e])return s.resolveRef(i.items[e]);if(i.additionalItems===!1)return s.errors.additionalItemsError({key:e,value:c,pointer:l,schema:i});if(i.additionalItems===!0||i.additionalItems===void 0)return xr(c);if(ft(i.additionalItems)==="object")return i.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(i,null,2)} for ${JSON.stringify(a,null,2)}`)}return i.additionalItems!==!1&&c?xr(c):new Error(`Invalid array schema for ${e} at ${l}`)},object:(s,e,i,a,l)=>{var c;i=K0(s,i,a,l);const u=(c=i==null?void 0:i.properties)===null||c===void 0?void 0:c[e];if(u!==void 0){if(u===!1)return s.errors.forbiddenPropertyError({property:e,value:a,pointer:l,schema:i});if(u===!0)return xr(a==null?void 0:a[e]);const h=s.resolveRef(u);if(Kn(h))return h;if(h&&Array.isArray(h.oneOf)){const m=s.resolveOneOf(a[e],h,`${l}/${e}`);for(const p in h)p!=="oneOf"&&m[p]===void 0&&(m[p]=h[p]);return m}if(h)return h}const{patternProperties:f}=i;if(ft(f)==="object"){let h;const m=Object.keys(f);for(let p=0,b=m.length;p<b;p+=1)if(h=new RegExp(m[p]),h.test(e))return f[m[p]]}const{additionalProperties:d}=i;return ft(d)==="object"?i.additionalProperties:a&&(d===void 0||d===!0)?xr(a[e]):s.errors.unknownPropertyError({property:e,value:a,pointer:`${l}`,schema:i})}};function vd(s,e,i,a,l="#"){var c;const u=ft(a);let f=(c=i.type)!==null&&c!==void 0?c:u;if(Array.isArray(f)){if(!f.includes(u))return s.errors.typeError({value:a,pointer:l,expected:i.type,received:u,schema:i});f=u}const d=W2[f];if(d){const h=d(s,`${e}`,i,a,l);return h===void 0?s.errors.schemaWarning({pointer:l,value:a,schema:i,key:e}):h}return new Error(`Unsupported schema type ${i.type} for key ${e}`)}function bd(s,e,i=s.rootSchema){var a;if(i.oneOf)return i.oneOf.map(c=>s.resolveRef(c));if(!((a=i.items)===null||a===void 0)&&a.oneOf)return i.items.oneOf.map(c=>s.resolveRef(c));const l=s.step(e,i,{},"#");return Kn(l)?l:[l]}const V2={array:(s,e,i,a)=>s.typeKeywords.array.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),object:(s,e,i,a)=>s.typeKeywords.object.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),string:(s,e,i,a)=>s.typeKeywords.string.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),integer:(s,e,i,a)=>s.typeKeywords.number.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),number:(s,e,i,a)=>s.typeKeywords.number.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),boolean:(s,e,i,a)=>s.typeKeywords.boolean.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),null:(s,e,i,a)=>s.typeKeywords.null.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a))};function z2(s,e){const i=ft(s);return i==="number"&&(e==="integer"||Array.isArray(e)&&e.includes("integer"))?Number.isInteger(s)||isNaN(s)?"integer":"number":i}function Sd(s,e,i=s.rootSchema,a="#"){if(i=s.resolveRef(i),ft(i)==="boolean")return i?[]:[s.errors.invalidDataError({pointer:a,schema:i,value:e})];if(Kn(i))return[i];if(i.const!==void 0)return xy()(i.const,e)?[]:[s.errors.constError({pointer:a,schema:i,value:e,expected:i.const})];const l=z2(e,i.type),c=i.type||l;return l!==c&&(!Array.isArray(c)||!c.includes(l))?[s.errors.typeError({pointer:a,schema:i,value:e,received:l,expected:c})]:s.validateType[l]==null?[s.errors.invalidTypeError({pointer:a,schema:i,value:e,receivedType:l})]:pa(s.validateType[l](s,i,e,a)).filter(uc)}const U2={typeKeywords:{array:["allOf","anyOf","enum","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["enum","not","allOf","anyOf","oneOf"],object:["additionalProperties","dependencies","enum","format","minProperties","maxProperties","patternProperties","properties","required","not","oneOf","allOf","anyOf"],string:["allOf","anyOf","enum","format","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","format","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:wy,validateType:V2,validateFormat:dd,errors:fd,addRemoteSchema:sd,compileSchema:x2,createSchemaOf:xr,each:ud,eachSchema:xa,getChildSchemaSelection:bd,getSchema:hd,getTemplate:pd,isValid:gd,resolveAllOf:nd,resolveAnyOf:rd,resolveOneOf:_f,resolveRef:yd,step:vd,validate:Sd,templateDefaultOptions:Es.templateDefaultOptions};class j6 extends gc{constructor(e,i={}){super(ya(U2,i),e)}}const Ay="__compiled",Oy="__ref",H2="getRef",K2="getRoot",G2=/(#|\/)+$/g;function Cy(s,e,i=e,a=!1){if(e===!0||e===!1||e===void 0||e[Ay]!==void 0)return e;const l={ids:{},remotes:s.remotes},c=JSON.stringify(e),u=JSON.parse(c);if(Object.defineProperty(u,Ay,{enumerable:!1,value:!0}),Object.defineProperty(u,H2,{enumerable:!1,value:li.bind(null,l,u)}),a===!1&&c.includes("$ref")===!1)return u;u!==i&&Object.defineProperty(u,"$defs",{enumerable:!0,value:Object.assign({},i.definitions,i.$defs,u.definitions,u.$defs)});const f={},d=()=>u;return xa(u,(h,m)=>{var p;if(h.$id){if(h.$id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(m)){const w=m.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),A=(0,oi.get)(u,w);h.$id=(p=A.$id)!==null&&p!==void 0?p:h.$id}l.ids[h.$id.replace(G2,"")]=m}m=`#${m}`.replace(/##+/,"#");const b=m.replace(/\/[^/]+$/,""),v=m.replace(/\/[^/]+\/[^/]+$/,""),x=f[b]||f[v],E=Ec(x,h.$id);f[m]=E,l.ids[E]==null&&(l.ids[E]=m),h.$ref&&!h[Oy]&&(Object.defineProperty(h,Oy,{enumerable:!1,value:Ec(E,h.$ref)}),Object.defineProperty(h,K2,{enumerable:!1,value:d}))}),u}const ky={...wy,contains:(s,e,i,a)=>{if(e.contains===!1)return s.errors.containsArrayError({pointer:a,value:i,schema:e});if(e.contains===!0)return Array.isArray(i)&&i.length===0?s.errors.containsAnyError({pointer:a,value:i,schema:e}):void 0;if(ft(e.contains)==="object"){for(let l=0;l<i.length;l+=1)if(s.isValid(i[l],e.contains))return;return s.errors.containsError({pointer:a,schema:e,value:i})}},exclusiveMaximum:(s,e,i,a)=>{if(!isNaN(e.exclusiveMaximum)&&e.exclusiveMaximum<=i)return s.errors.maximumError({maximum:e.exclusiveMaximum,length:i,pointer:a,schema:e,value:i})},exclusiveMinimum:(s,e,i,a)=>{if(!isNaN(e.exclusiveMinimum)&&e.exclusiveMinimum>=i)return s.errors.minimumError({minimum:e.exclusiveMinimum,length:i,pointer:a,schema:e,value:i})},if:OT,maximum:(s,e,i,a)=>{if(!isNaN(e.maximum)&&e.maximum&&e.maximum<i)return s.errors.maximumError({maximum:e.maximum,length:i,pointer:a,schema:e,value:i})},minimum:(s,e,i,a)=>{if(!isNaN(e.minimum)&&e.minimum>i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:a,schema:e,value:i})},patternProperties:(s,e,i,a)=>{const l=e.properties||{},c=e.patternProperties;if(ft(c)!=="object")return;const u=[],f=Object.keys(i),d=Object.keys(c).map(h=>({regex:new RegExp(h),patternSchema:c[h]}));return f.forEach(h=>{let m=!1;for(let p=0,b=d.length;p<b;p+=1)if(d[p].regex.test(h)){if(m=!0,d[p].patternSchema===!1){u.push(s.errors.patternPropertiesError({key:h,pointer:a,patterns:Object.keys(c).join(","),schema:e,value:i}));return}const v=s.validate(i[h],d[p].patternSchema,`${a}/${h}`);v&&v.length>0&&u.push(...v)}l[h]||m===!1&&e.additionalProperties===!1&&u.push(s.errors.patternPropertiesError({key:h,pointer:a,patterns:Object.keys(c).join(","),schema:e,value:i}))}),u},propertyNames:(s,e,i,a)=>{if(e.propertyNames===!1)return Object.keys(i).length===0?void 0:s.errors.invalidPropertyNameError({property:Object.keys(i),pointer:a,value:i,schema:e});if(e.propertyNames===!0||ft(e.propertyNames)!=="object")return;const l=[],c=Object.keys(i),u={...e.propertyNames,type:"string"};return c.forEach(f=>{const d=s.validate(f,u,`${a}/${f}`);d.length>0&&l.push(s.errors.invalidPropertyNameError({property:f,pointer:a,validationError:d[0],value:i[f],schema:e}))}),l}},Ty={array:(s,e,i,a)=>s.typeKeywords.array.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),object:(s,e,i,a)=>s.typeKeywords.object.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),string:(s,e,i,a)=>s.typeKeywords.string.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),integer:(s,e,i,a)=>s.typeKeywords.number.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),number:(s,e,i,a)=>s.typeKeywords.number.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),boolean:(s,e,i,a)=>s.typeKeywords.boolean.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),null:(s,e,i,a)=>s.typeKeywords.null.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a))},Y2={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["enum","exclusiveMaximum","exclusiveMinimum","format","maximum","minimum","multipleOf","not","oneOf","allOf","anyOf","if"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:ky,validateType:Ty,validateFormat:dd,errors:fd,addRemoteSchema:sd,compileSchema:Cy,createSchemaOf:xr,each:ud,eachSchema:xa,getChildSchemaSelection:bd,getSchema:hd,getTemplate:pd,isValid:gd,resolveAllOf:nd,resolveAnyOf:rd,resolveOneOf:_f,resolveRef:yd,step:vd,validate:Sd,templateDefaultOptions:Es.templateDefaultOptions};class z6 extends gc{constructor(e,i={}){super(ya(Y2,i),e)}}const Py={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:ky,validateType:Ty,validateFormat:dd,errors:fd,addRemoteSchema:sd,compileSchema:Cy,createSchemaOf:xr,each:ud,eachSchema:xa,getChildSchemaSelection:bd,getSchema:hd,getTemplate:pd,isValid:gd,resolveAllOf:nd,resolveAnyOf:rd,resolveOneOf:_f,resolveRef:yd,step:vd,validate:Sd,templateDefaultOptions:Es.templateDefaultOptions};class Dy extends gc{constructor(e,i={}){super(ya(Py,i),e)}}function J2(s,e){if(s==null||s.$ref==null)return s;const i=e.getRef(s),a=Object.assign({},i,s);return delete a.$ref,Object.defineProperty(a,"__ref",{enumerable:!1,value:s.__ref}),Object.defineProperty(a,"getRoot",{enumerable:!1,value:s.getRoot}),a}const Z2={...Py,resolveOneOf:fc,resolveRef:J2};class U6 extends gc{constructor(e,i={}){super(ya(Z2,i),e)}}const H6={strings:T0},{parse:My,stringify:Iy}=JSON,{keys:_2}=Object,Aa=String,Ry="string",Ny={},wc="object",Fy=(s,e)=>e,X2=s=>s instanceof Aa?Aa(s):s,Q2=(s,e)=>typeof e===Ry?new Aa(e):e,Ly=(s,e,i,a)=>{const l=[];for(let c=_2(i),{length:u}=c,f=0;f<u;f++){const d=c[f],h=i[d];if(h instanceof Aa){const m=s[h];typeof m===wc&&!e.has(m)?(e.add(m),i[d]=Ny,l.push({k:d,a:[s,e,m,a]})):i[d]=a.call(i,d,m)}else i[d]!==Ny&&(i[d]=a.call(i,d,h))}for(let{length:c}=l,u=0;u<c;u++){const{k:f,a:d}=l[u];i[f]=a.call(i,f,Ly.apply(null,d))}return i},$y=(s,e,i)=>{const a=Aa(e.push(i)-1);return s.set(i,a),a},By=(s,e)=>{const i=My(s,Q2).map(X2),a=i[0],l=e||Fy,c=typeof a===wc&&a?Ly(i,new Set,a,l):a;return l.call({"":c},"",c)},jy=(s,e,i)=>{const a=e&&typeof e===wc?(m,p)=>m===""||-1<e.indexOf(m)?p:void 0:e||Fy,l=new Map,c=[],u=[];let f=+$y(l,c,a.call({"":s},"",s)),d=!f;for(;f<c.length;)d=!0,u[f]=Iy(c[f++],h,i);return"["+u.join(",")+"]";function h(m,p){if(d)return d=!d,p;const b=a.call(this,m,p);switch(typeof b){case wc:if(b===null)return b;case Ry:return l.get(b)||$y(l,c,b)}return b}},K6=s=>My(jy(s)),G6=s=>By(Iy(s));function sr(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function ui(s,e){if(!sr(s))return;const{properties:i,items:a,anyOf:l,oneOf:c,allOf:u,dependencies:f,then:d,else:h}=s;for(const m in s)s.hasOwnProperty(m)&&m.startsWith("ui:")&&(e[m]=s[m],delete s[m]);if(sr(i))for(const m in i){if(!i.hasOwnProperty(m))continue;const p=i[m];if(sr(p)){if(!sr(e[m])){const b={};e[m]=b}ui(p,e[m])}}if(sr(a)){const m={};e.items=m,ui(a,m)}if(Array.isArray(l))for(const m of l)sr(m)&&ui(m,e);if(Array.isArray(c))for(const m of c)sr(m)&&ui(m,e);if(Array.isArray(u))for(const m of u)sr(m)&&ui(m,e);if(sr(f))for(const m of Object.keys(f)){const p=f[m];sr(p)&&ui(p,e)}sr(d)&&ui(d,e),sr(h)&&ui(h,e)}const xd=s=>{const e={},i=By(jy(s));return ui(i,e),{uiSchema:e,schema:i}},q2=()=>{const s={__errors:[],addError:e=>{var i;(i=s.__errors)==null||i.push(e)}};return s};function eP(s){return!!s&&"__errors"in s}function Wy(s){var e;if(!s)return!1;for(const i of Object.values(s)){if(eP(i)){if(((e=i.__errors)!=null?e:[]).length>0)return!0;continue}if(Wy(i))return!0}return!1}function tP(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}const nP=s=>"type"in s&&s.type==="error",Vy=(s,e,i)=>{async function a(l,c="#",u=l){var m,p;const f=new Dy(s),d={},h=async(b,v,x,E,w)=>{const A=e[b];if(A){const C=q2();try{await A(x,C,{...i,formData:l,schema:E,uiSchema:w})}catch(W){C.addError(W.message)}d[v]=C}};for(const[b,v]of Object.entries(u)){const x=`${c}/${b}`,E=f.getSchema({pointer:x,data:l});if(!E)continue;if(nP(E))throw new Error(E.message);const{schema:w,uiSchema:A}=xd(E),C=E&&E.items,W=async(V,J,Z)=>{await h(V["ui:field"],b,v,J,Z)},B=async V=>{if("ui:field"in V){const{schema:J,uiSchema:Z}=xd(E.items);await W(V,J,Z)}};if("ui:field"in E)await W(E,w,A);else if(C&&"ui:field"in E.items)await B(E.items);else if(C&&E.items.type==="object"){const V=(p=(m=E.items)==null?void 0:m.properties)!=null?p:[];for(const[,J]of Object.entries(V))await B(J)}else tP(v)&&(d[b]=await a(l,x,v))}return d}return async l=>await a(l)};var Bi=S(99703),ji=S(7031),rP=S(95479),zy=S.n(rP),Oa=S(8109);const iP=s=>(0,Bi.A)({root:{fontWeight:s.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:s.spacing(4),border:"0",verticalAlign:"top"}}),sP={root:{border:"0",verticalAlign:"top"}},oP=s=>(0,Bi.A)({root:{margin:s.spacing(0,0,-1,0)}}),aP=s=>(0,Bi.A)({root:{padding:s.spacing(0,0,1,0)},random:{}}),lP=(0,ji.A)(iP,{name:"BackstageMetadataTableTitleCell"})(Xt.A),cP=(0,ji.A)(sP,{name:"BackstageMetadataTableCell"})(Xt.A),uP=({dense:s,children:e})=>g.createElement(Rt.A,{size:s?"small":"medium"},g.createElement(Gt.A,null,e)),fP=({title:s,children:e,...i})=>g.createElement(xn.A,null,s&&g.createElement(lP,null,s),g.createElement(cP,{colSpan:s?1:2,...i},e)),Uy=(0,ji.A)(oP,{name:"BackstageMetadataTableList"})(({classes:s,children:e})=>g.createElement(qs.A,{disablePadding:!0,className:s.root},e)),Hy=(0,ji.A)(aP,{name:"BackstageMetadataTableListItem"})(({classes:s,children:e})=>g.createElement(Oa.A,{className:s.root},e)),Ky=(0,Bi.A)({root:{margin:"0 0",listStyleType:"none"}}),dP=s=>(0,Bi.A)({root:{...Ky.root,paddingLeft:s.spacing(1)}}),Gy=(0,ji.A)(Ky,{name:"BackstageStructuredMetadataTableList"})(({classes:s,children:e})=>g.createElement(Uy,{classes:s},e)),Yy=(0,ji.A)(dP,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:s,children:e})=>g.createElement(Uy,{classes:s},e));function hP(s,e,i){const a=s.map((l,c)=>g.createElement(Hy,{key:c},Ed(l,e,i)));return i?g.createElement(Yy,null,a):g.createElement(Gy,null,a)}function mP(s,e,i){const a=Object.keys(s).map(l=>{const c=Ed(s[l],e,!0);return g.createElement(Hy,{key:l},g.createElement(Ve.A,{variant:"body2",component:"span"},`${e.titleFormat(l)}: `),c)});return i?g.createElement(Yy,null,a):g.createElement(Gy,null,a)}function Ed(s,e,i){return g.isValidElement(s)?g.createElement(g.Fragment,null,s):s!==null&&typeof s=="object"&&!Array.isArray(s)?mP(s,e,i):Array.isArray(s)?hP(s,e,i):typeof s=="boolean"?g.createElement(g.Fragment,null,s?"\u2705":"\u274C"):g.createElement(Ve.A,{variant:"body2",component:"span"},s)}const pP=({value:s,options:e})=>g.createElement(g.Fragment,null,Ed(s,e,!1)),gP=({title:s,value:e,options:i})=>g.createElement(fP,{title:i.titleFormat(s)},g.createElement(pP,{value:e,options:i}));function yP(s,e){return Object.keys(s).map(i=>g.createElement(gP,{key:i,title:i,value:s[i],options:e}))}function vP(s){const{metadata:e,dense:i=!0,options:a={}}=s,l=yP(e,{titleFormat:zy(),...a});return g.createElement(uP,{dense:i},l)}const bP=s=>{const e=Object.fromEntries(Object.entries(s.formState).map(([i,a])=>{var l;for(const c of s.schemas){const f=new Dy(c.mergedSchema).getSchema({pointer:`#/${i}`,data:s.formState});if(f){const d=(l=f["ui:backstage"])==null?void 0:l.review;if(d){if(d.mask)return[i,d.mask];if(d.show===!1)return[]}if(f["ui:widget"]==="password")return[i,"******"];if(f.enum&&f.enumNames)return[i,f.enumNames[f.enum.indexOf(a)]||a]}}return[i,a]}).filter(i=>i.length>0));return g.createElement(vP,{metadata:e})};var SP=S(45810),Jy=S.n(SP);const xP=s=>(0,g.useState)(()=>{if(s)return s;const e=Jy().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(e.formData)}catch{return{}}});var Zy=S(86702);const EP=s=>{const e=(0,gt.gf)(Zy.B),a=s.steps.map(({title:l,description:c,schema:u})=>({title:l,description:c,mergedSchema:u,...xd(u)})).filter(l=>{var u;const c=(u=l.uiSchema["ui:backstage"])==null?void 0:u.featureFlag;return c?e.isActive(c):!0}).map(l=>{var u,f,d,h;const c={...l,schema:{...l.schema,title:void 0}};return((u=l.schema)!=null&&u.properties||!((f=l.schema)!=null&&f.dependencies))&&(c.schema.properties=Object.fromEntries(Object.entries((h=(d=l.schema)==null?void 0:d.properties)!=null?h:{}).filter(([m])=>{var b,v;const p=(v=(b=l.uiSchema[m])==null?void 0:b["ui:backstage"])==null?void 0:v.featureFlag;return p?e.isActive(p):!0}))),c});return{presentation:s.presentation,steps:a}};var wP=S(46108),wd=S.n(wP);function Lt(s){return typeof File!="undefined"&&s instanceof File||typeof Date!="undefined"&&s instanceof Date?!1:typeof s=="object"&&s!==null&&!Array.isArray(s)}function AP(s){return s.additionalItems===!0&&console.warn("additionalItems=true is currently not supported"),Lt(s.additionalItems)}function _y(s){if(s==="")return;if(s===null)return null;if(/\.$/.test(s)||/\.0$/.test(s)||/\.\d*0$/.test(s))return s;const e=Number(s);return typeof e=="number"&&!Number.isNaN(e)?e:s}const po="__additional_property",Ad="additionalProperties",Ca="allOf",Nr="anyOf",Xy="const",OP="default",Y6="definitions",Ac="dependencies",CP="enum",Er="__errors",Wi="$id",kP="if",Vi="items",TP="_$junk_option_schema_id$_",Oc="$name",or="oneOf",Wt="properties",PP="required",Cc="submitButtonOptions",qt="$ref",J6="__rjsf_additionalProperties",Od="__rjsf_additionalProperties",Qy="__rjsf_rootSchema",DP="ui:field",Cd="ui:widget",ka="ui:options",MP="ui:globalOptions";function at(s={},e={}){return Object.keys(s).filter(i=>i.indexOf("ui:")===0).reduce((i,a)=>{const l=s[a];return a===Cd&&Lt(l)?(console.error("Setting options via ui:widget object is no longer supported, use ui:options instead"),i):a===ka&&Lt(l)?{...i,...l}:{...i,[a.substring(3)]:l}},{...e})}function qy(s,e={},i){if(!s.additionalProperties)return!1;const{expandable:a=!0}=at(e);return a===!1?a:s.maxProperties!==void 0&&i?Object.keys(i).length<s.maxProperties:!0}var IP=S(48360),kd=S.n(IP);function Td(s){const e={[Er]:[],addError(i){this[Er].push(i)}};if(Array.isArray(s))return s.reduce((i,a,l)=>({...i,[l]:Td(a)}),e);if(kd()(s)){const i=s;return Object.keys(i).reduce((a,l)=>({...a,[l]:Td(i[l])}),e)}return e}var RP=S(40575),NP=S.n(RP);function On(s,e){return NP()(s,e,(i,a)=>{if(typeof i=="function"&&typeof a=="function")return!0})}var FP=S(46123),$e=S.n(FP),LP=S(3514),zi=S.n(LP),$P=S(45838),BP=S(3326),kc=S.n(BP);function Pd(s,e){const i=e[s];return[kc()(e,[s]),i]}function ev(s,e={},i=[]){const a=s||"";let l;if(a.startsWith("#"))l=decodeURIComponent(a.substring(1));else throw new Error(`Could not find a definition for ${s}.`);const c=$P.get(e,l);if(c===void 0)throw new Error(`Could not find a definition for ${s}.`);const u=c[qt];if(u){if(i.includes(u)){if(i.length===1)throw new Error(`Definition for ${s} is a circular reference`);const[m,...p]=i,b=[...p,a,m].join(" -> ");throw new Error(`Definition for ${m} contains a circular reference through ${b}`)}const[f,d]=Pd(qt,c),h=ev(d,e,[...i,a]);return Object.keys(f).length>0?{...f,...h}:h}return c}function tv(s,e={}){return ev(s,e,[])}var jP=S(52103),Cn=S.n(jP),WP=S(60986),nv=S.n(WP),VP=S(41580),wr=S.n(VP),zP=S(8138),Dd=S.n(zP),UP=S(90769),HP=S.n(UP),KP=S(55009),rv=S.n(KP);function iv(s,e,i){var a;if(s&&i){const l=$e()(s,i);if(l===void 0)return;for(let c=0;c<e.length;c++){const u=e[c],f=$e()(u,[Wt,i],{});if(!(f.type==="object"||f.type==="array")&&(f.const===l||!((a=f.enum)===null||a===void 0)&&a.includes(l)))return c}}}function sv(s,e,i,a,l){if(e===void 0)return 0;const c=iv(e,i,l);if(nv()(c))return c;for(let u=0;u<i.length;u++){const f=i[u];if(l&&Cn()(f,[Wt,l])){const d=$e()(e,l),h=$e()(f,[Wt,l],{});if(s.isValid(h,d,a))return u}else if(f[Wt]){const d={anyOf:Object.keys(f[Wt]).map(m=>({required:[m]}))};let h;if(f.anyOf){const{...m}=f;m.allOf?m.allOf=m.allOf.slice():m.allOf=[],m.allOf.push(d),h=m}else h=Object.assign({},f,d);if(delete h.required,s.isValid(h,e,a))return u}else if(s.isValid(f,e,a))return u}return 0}function Md(s,e,i,a,l){return sv(s,e,i,a,l)}var GP=S(46343),As=S.n(GP),YP=S(41263),mn=S.n(YP),JP=S(2011),ZP=S.n(JP),_P=S(82451),XP=S.n(_P),QP=S(53435),qP=S.n(QP),eD=S(82438),tD=S.n(eD),nD=S(587),rD=S.n(nD);function go(s){let e;const i=$e()(s,"discriminator.propertyName",void 0);return Dd()(i)?e=i:i!==void 0&&console.warn(`Expecting discriminator to be a string, got "${typeof i}" instead`),e}function Ta(s){return Array.isArray(s)?"array":typeof s=="string"?"string":s==null?"null":typeof s=="boolean"?"boolean":isNaN(s)?typeof s=="object"?"object":"string":"number"}var iD=S(55620),sD=S.n(iD);function Ui(s){let{type:e}=s;return!e&&s.const?Ta(s.const):!e&&s.enum?"string":!e&&(s.properties||s.additionalProperties)?"object":(Array.isArray(e)&&(e.length===2&&e.includes("null")?e=e.find(i=>i!=="null"):e=e[0]),e)}function fi(s,e){const i=Object.assign({},s);return Object.keys(e).reduce((a,l)=>{const c=s?s[l]:{},u=e[l];return s&&l in s&&Lt(u)?a[l]=fi(c,u):s&&e&&(Ui(s)==="object"||Ui(e)==="object")&&l===PP&&Array.isArray(c)&&Array.isArray(u)?a[l]=sD()(c,u):a[l]=u,a},i)}function Gn(s,e,i={},a){return Fr(s,e,i,a)[0]}function oD(s,e,i,a,l,c){const{if:u,then:f,else:d,...h}=e,m=s.isValid(u,c||{},i);let p=[h],b=[];if(a)f&&typeof f!="boolean"&&(b=b.concat(Fr(s,f,i,c,a,l))),d&&typeof d!="boolean"&&(b=b.concat(Fr(s,d,i,c,a,l)));else{const v=m?f:d;v&&typeof v!="boolean"&&(b=b.concat(Fr(s,v,i,c,a,l)))}return b.length&&(p=b.map(v=>fi(h,v))),p.flatMap(v=>Fr(s,v,i,c,a,l))}function ov(s){return s.reduce((i,a)=>a.length>1?a.flatMap(l=>rv()(i.length,c=>[...i[c]].concat(l))):(i.forEach(l=>l.push(a[0])),i),[[]])}function aD(s,e,i,a,l,c){const u=av(s,e,i,a,l,c);if(u.length>1||u[0]!==e)return u;if(Ac in e)return lv(s,e,i,a,l,c).flatMap(d=>Fr(s,d,i,c,a,l));if(Ca in e&&Array.isArray(e.allOf)){const f=e.allOf.map(h=>Fr(s,h,i,c,a,l));return ov(f).map(h=>({...e,allOf:h}))}return[e]}function av(s,e,i,a,l,c){const u=Pa(e,i,l);return u!==e?Fr(s,u,i,c,a,l):[e]}function Pa(s,e,i){if(!Lt(s))return s;let a=s;if(qt in a){const{$ref:l,...c}=a;if(i.includes(l))return a;i.push(l),a={...tv(l,e),...c}}if(Wt in a){const l=[],c=ZP()(a[Wt],(u,f,d)=>{const h=[...i];u[d]=Pa(f,e,h),l.push(h)},{});XP()(i,tD()(qP()(l))),a={...a,[Wt]:c}}return Vi in a&&!Array.isArray(a.items)&&typeof a.items!="boolean"&&(a={...a,items:Pa(a.items,e,i)}),As()(s,a)?s:a}function lD(s,e,i,a){const l={...e,properties:{...e.properties}},c=a&&Lt(a)?a:{};return Object.keys(c).forEach(u=>{if(u in l.properties)return;let f={};typeof l.additionalProperties!="boolean"?qt in l.additionalProperties?f=Gn(s,{$ref:$e()(l.additionalProperties,[qt])},i,c):"type"in l.additionalProperties?f={...l.additionalProperties}:Nr in l.additionalProperties||or in l.additionalProperties?f={type:"object",...l.additionalProperties}:f={type:Ta($e()(c,[u]))}:f={type:Ta($e()(c,[u]))},l.properties[u]=f,mn()(l.properties,[u,po],!0)}),l}function Fr(s,e,i,a,l=!1,c=[]){return Lt(e)?aD(s,e,i,l,c,a).flatMap(f=>{let d=f;if(kP in d)return oD(s,d,i,l,c,a);if(Ca in d){if(l){const{allOf:m,...p}=d;return[...m,p]}try{d=rD()(d,{deep:!1})}catch(m){console.warn(`could not merge subschemas in allOf:
`,m);const{allOf:p,...b}=d;return b}}return Ad in d&&d.additionalProperties!==!1?lD(s,d,i,a):d}):[{}]}function cD(s,e,i,a,l){let c;const{oneOf:u,anyOf:f,...d}=e;if(Array.isArray(u)?c=u:Array.isArray(f)&&(c=f),c){const h=l===void 0&&a?{}:l,m=go(e);c=c.map(b=>Pa(b,i,[]));const p=Md(s,h,c,i,m);if(a)return c.map(b=>fi(d,b));e=fi(d,c[p])}return[e]}function lv(s,e,i,a,l,c){const{dependencies:u,...f}=e;return cD(s,f,i,a,c).flatMap(h=>cv(s,u,h,i,a,l,c))}function cv(s,e,i,a,l,c,u){let f=[i];for(const d in e){if(!l&&$e()(u,[d])===void 0||i.properties&&!(d in i.properties))continue;const[h,m]=Pd(d,e);return Array.isArray(m)?f[0]=uD(i,m):Lt(m)&&(f=fD(s,i,a,d,m,l,c,u)),f.flatMap(p=>cv(s,h,p,a,l,c,u))}return f}function uD(s,e){if(!e)return s;const i=Array.isArray(s.required)?Array.from(new Set([...s.required,...e])):e;return{...s,required:i}}function fD(s,e,i,a,l,c,u,f){return Fr(s,l,i,f,c,u).flatMap(h=>{const{oneOf:m,...p}=h;if(e=fi(e,p),m===void 0)return e;const b=m.map(x=>typeof x=="boolean"||!(qt in x)?[x]:av(s,x,i,c,u,f));return ov(b).flatMap(x=>dD(s,e,i,a,x,c,u,f))})}function dD(s,e,i,a,l,c,u,f){const d=l.filter(h=>{if(typeof h=="boolean"||!h||!h.properties)return!1;const{[a]:m}=h.properties;if(m){const p={type:"object",properties:{[a]:m}};return s.isValid(p,f,i)||c}return!1});return!c&&d.length!==1?(console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),[e]):d.flatMap(h=>{const m=h,[p]=Pd(a,m.properties),b={...m,properties:p};return Fr(s,b,i,f,c,u).map(x=>fi(e,x))})}const hD={type:"object",$id:TP,properties:{__not_really_there__:{type:"number"}}};function Id(s,e,i,a={}){let l=0;return i&&(wr()(i.properties)?l+=HP()(i.properties,(c,u,f)=>{const d=$e()(a,f);if(typeof u=="boolean")return c;if(Cn()(u,qt)){const h=Gn(s,u,e,d);return c+Id(s,e,h,d||{})}if((Cn()(u,or)||Cn()(u,Nr))&&d){const h=Cn()(u,or)?or:Nr,m=go(u);return c+Da(s,e,d,$e()(u,h),-1,m)}if(u.type==="object")return c+Id(s,e,u,d||{});if(u.type===Ta(d)){let h=c+1;return u.default?h+=d===u.default?1:-1:u.const&&(h+=d===u.const?1:-1),h}return c},0):Dd()(i.type)&&i.type===Ta(a)&&(l+=1)),l}function Da(s,e,i,a,l=-1,c){const u=a.map(p=>Pa(p,e,[])),f=iv(i,a,c);if(nv()(f))return f;const d=u.reduce((p,b,v)=>(Md(s,i,[hD,b],e,c)===1&&p.push(v),p),[]);if(d.length===1)return d[0];d.length||rv()(u.length,p=>d.push(p));const h=new Set,{bestIndex:m}=d.reduce((p,b)=>{const{bestScore:v}=p,x=u[b],E=Id(s,e,x,i);return h.add(E),E>v?{bestIndex:b,bestScore:E}:p},{bestIndex:l,bestScore:0});return h.size===1&&l>=0?l:m}function Rd(s){return Array.isArray(s.items)&&s.items.length>0&&s.items.every(e=>Lt(e))}function Tc(s,e,i=!1){if(Array.isArray(e)){const a=Array.isArray(s)?s:[],l=e.map((c,u)=>a[u]?Tc(a[u],c,i):c);return i&&l.length<a.length&&l.push(...a.slice(l.length)),l}if(Lt(e)){const a=Object.assign({},s);return Object.keys(e).reduce((l,c)=>(l[c]=Tc(s?$e()(s,c):{},$e()(e,c),i),l),a)}return e}function yo(s,e,i=!1){return Object.keys(e).reduce((a,l)=>{const c=s?s[l]:{},u=e[l];if(s&&l in s&&Lt(u))a[l]=yo(c,u,i);else if(i&&Array.isArray(c)&&Array.isArray(u)){let f=u;i==="preventDuplicates"&&(f=u.reduce((d,h)=>(c.includes(h)||d.push(h),d),[])),a[l]=c.concat(f)}else a[l]=u;return a},Object.assign({},s))}function mD(s){return Array.isArray(s.enum)&&s.enum.length===1||Xy in s}function uv(s,e,i={}){const a=Gn(s,e,i,void 0),l=a.oneOf||a.anyOf;return Array.isArray(a.enum)?!0:Array.isArray(l)?l.every(c=>typeof c!="boolean"&&mD(c)):!1}function Nd(s,e,i){return!e.uniqueItems||!e.items||typeof e.items=="boolean"?!1:uv(s,e.items,i)}var vo;(function(s){s[s.Ignore=0]="Ignore",s[s.Invert=1]="Invert",s[s.Fallback=2]="Fallback"})(vo||(vo={}));function Fd(s,e=vo.Ignore,i=-1){if(i>=0){if(Array.isArray(s.items)&&i<s.items.length){const a=s.items[i];if(typeof a!="boolean")return a}}else if(s.items&&!Array.isArray(s.items)&&typeof s.items!="boolean")return s.items;return e!==vo.Ignore&&Lt(s.additionalItems)?s.additionalItems:{}}function fv(s,e,i,a,l,c=[],u={}){const{emptyObjectFields:f="populateAllDefaults"}=u;if(a)s[e]=i;else if(f!=="skipDefaults")if(Lt(i)){const d=l===void 0?c.includes(e):l;f==="skipEmptyDefaults"?zi()(i)||(s[e]=i):(!zi()(i)||c.includes(e))&&(d||f!=="populateRequiredDefaults")&&(s[e]=i)}else i!==void 0&&(f==="populateAllDefaults"||f==="skipEmptyDefaults"||c.includes(e))&&(s[e]=i)}function Hi(s,e,{parentDefaults:i,rawFormData:a,rootSchema:l={},includeUndefinedValues:c=!1,_recurseList:u=[],experimental_defaultFormStateBehavior:f=void 0,required:d}={}){var h,m,p,b;const v=Lt(a)?a:{},x=Lt(e)?e:{};let E=i,w=null,A=u;if(Lt(E)&&Lt(x.default))E=yo(E,x.default);else if(OP in x)E=x.default;else if(qt in x){const C=x[qt];u.includes(C)||(A=u.concat(C),w=tv(C,l))}else if(Ac in x)w=lv(s,x,l,!1,[],v)[0];else if(Rd(x))E=x.items.map((C,W)=>Hi(s,C,{rootSchema:l,includeUndefinedValues:c,_recurseList:u,experimental_defaultFormStateBehavior:f,parentDefaults:Array.isArray(i)?i[W]:void 0,rawFormData:v,required:d}));else if(or in x){const{oneOf:C,...W}=x;if(C.length===0)return;const B=go(x);w=C[Da(s,l,zi()(v)?void 0:v,C,0,B)],w=fi(W,w)}else if(Nr in x){const{anyOf:C,...W}=x;if(C.length===0)return;const B=go(x);w=C[Da(s,l,zi()(v)?void 0:v,C,0,B)],w=fi(W,w)}if(w)return Hi(s,w,{rootSchema:l,includeUndefinedValues:c,_recurseList:A,experimental_defaultFormStateBehavior:f,parentDefaults:E,rawFormData:v,required:d});switch(E===void 0&&(E=x.default),Ui(x)){case"object":{const C=(f==null?void 0:f.allOf)==="populateDefaults"&&Ca in x?Gn(s,x,l,v):x,W=Object.keys(C.properties||{}).reduce((B,V)=>{var J;const Z=Hi(s,$e()(C,[Wt,V]),{rootSchema:l,_recurseList:u,experimental_defaultFormStateBehavior:f,includeUndefinedValues:c===!0,parentDefaults:$e()(E,[V]),rawFormData:$e()(v,[V]),required:(J=C.required)===null||J===void 0?void 0:J.includes(V)});return fv(B,V,Z,c,d,C.required,f),B},{});if(C.additionalProperties){const B=Lt(C.additionalProperties)?C.additionalProperties:{},V=new Set;Lt(E)&&Object.keys(E).filter(Z=>!C.properties||!C.properties[Z]).forEach(Z=>V.add(Z));const J=[];Object.keys(v).filter(Z=>!C.properties||!C.properties[Z]).forEach(Z=>{V.add(Z),J.push(Z)}),V.forEach(Z=>{var le;const ce=Hi(s,B,{rootSchema:l,_recurseList:u,experimental_defaultFormStateBehavior:f,includeUndefinedValues:c===!0,parentDefaults:$e()(E,[Z]),rawFormData:$e()(v,[Z]),required:(le=C.required)===null||le===void 0?void 0:le.includes(Z)});fv(W,Z,ce,c,d,J)})}return W}case"array":{const C=((h=f==null?void 0:f.arrayMinItems)===null||h===void 0?void 0:h.populate)==="never",W=((m=f==null?void 0:f.arrayMinItems)===null||m===void 0?void 0:m.populate)==="requiredOnly",B=(f==null?void 0:f.emptyObjectFields)==="skipEmptyDefaults",V=(b=(p=f==null?void 0:f.arrayMinItems)===null||p===void 0?void 0:p.computeSkipPopulate)!==null&&b!==void 0?b:()=>!1,J=B?void 0:[];if(Array.isArray(E)&&(E=E.map((fe,ye)=>{const be=Fd(x,vo.Fallback,ye);return Hi(s,be,{rootSchema:l,_recurseList:u,experimental_defaultFormStateBehavior:f,parentDefaults:fe,required:d})})),Array.isArray(a)){const fe=Fd(x);C?E=a:E=a.map((ye,be)=>Hi(s,fe,{rootSchema:l,_recurseList:u,experimental_defaultFormStateBehavior:f,rawFormData:ye,parentDefaults:$e()(E,[be]),required:d}))}if(C)return E!=null?E:J;if(W&&!d)return E||void 0;const Z=Array.isArray(E)?E.length:0;if(!x.minItems||Nd(s,x,l)||V(s,x,l)||x.minItems<=Z)return E||J;const le=E||[],ce=Fd(x,vo.Invert),he=ce.default,ge=new Array(x.minItems-Z).fill(Hi(s,ce,{parentDefaults:he,rootSchema:l,_recurseList:u,experimental_defaultFormStateBehavior:f,required:d}));return le.concat(ge)}}return E}function dv(s,e,i,a,l=!1,c){if(!Lt(e))throw new Error("Invalid schema: "+e);const u=Gn(s,e,a,i),f=Hi(s,u,{rootSchema:a,includeUndefinedValues:l,experimental_defaultFormStateBehavior:c,rawFormData:i});if(i==null||typeof i=="number"&&isNaN(i))return f;const{mergeExtraDefaults:d}=(c==null?void 0:c.arrayMinItems)||{};return Lt(i)||Array.isArray(i)?Tc(f,i,d):i}function hv(s={}){return"widget"in at(s)&&at(s).widget!=="hidden"}function mv(s,e,i={},a){if(i[Cd]==="files")return!0;if(e.items){const l=Gn(s,e.items,a);return l.type==="string"&&l.format==="data-url"}return!1}function pD(s,e,i={},a,l){const c=at(i,l),{label:u=!0}=c;let f=!!u;const d=Ui(e);return d==="array"&&(f=Nd(s,e,a)||mv(s,e,i,a)||hv(i)),d==="object"&&(f=!1),d==="boolean"&&!i[Cd]&&(f=!1),i[DP]&&(f=!1),f}function gD(s,e,i){if(!i)return e;const{errors:a,errorSchema:l}=e;let c=s.toErrorList(i),u=i;return zi()(l)||(u=yo(l,i,!0),c=[...a].concat(c)),{errorSchema:u,errors:c}}const bo=Symbol("no Value");function Ld(s,e,i,a,l={}){let c;if(Cn()(i,Wt)){const u={};if(Cn()(a,Wt)){const h=$e()(a,Wt,{});Object.keys(h).forEach(m=>{Cn()(l,m)&&(u[m]=void 0)})}const f=Object.keys($e()(i,Wt,{})),d={};f.forEach(h=>{const m=$e()(l,h);let p=$e()(a,[Wt,h],{}),b=$e()(i,[Wt,h],{});Cn()(p,qt)&&(p=Gn(s,p,e,m)),Cn()(b,qt)&&(b=Gn(s,b,e,m));const v=$e()(p,"type"),x=$e()(b,"type");if(!v||v===x)if(Cn()(u,h)&&delete u[h],x==="object"||x==="array"&&Array.isArray(m)){const E=Ld(s,e,b,p,m);(E!==void 0||x==="array")&&(d[h]=E)}else{const E=$e()(b,"default",bo),w=$e()(p,"default",bo);E!==bo&&E!==m&&(w===m?u[h]=E:$e()(b,"readOnly")===!0&&(u[h]=void 0));const A=$e()(b,"const",bo),C=$e()(p,"const",bo);A!==bo&&A!==m&&(u[h]=C===m?A:void 0)}}),c={...typeof l=="string"||Array.isArray(l)?void 0:l,...u,...d}}else if($e()(a,"type")==="array"&&$e()(i,"type")==="array"&&Array.isArray(l)){let u=$e()(a,"items"),f=$e()(i,"items");if(typeof u=="object"&&typeof f=="object"&&!Array.isArray(u)&&!Array.isArray(f)){Cn()(u,qt)&&(u=Gn(s,u,e,l)),Cn()(f,qt)&&(f=Gn(s,f,e,l));const d=$e()(u,"type"),h=$e()(f,"type");if(!d||d===h){const m=$e()(i,"maxItems",-1);h==="object"?c=l.reduce((p,b)=>{const v=Ld(s,e,f,u,b);return v!==void 0&&(m<0||p.length<m)&&p.push(v),p},[]):c=m>0&&l.length>m?l.slice(0,m):l}}else typeof u=="boolean"&&typeof f=="boolean"&&u===f&&(c=l)}return c}function Pc(s,e,i,a,l,c,u,f=[]){if(qt in e||Ac in e||Ca in e){const m=Gn(s,e,c,u);if(f.findIndex(b=>As()(b,m))===-1)return Pc(s,m,i,a,l,c,u,f.concat(m))}if(Vi in e&&!$e()(e,[Vi,qt]))return Pc(s,$e()(e,Vi),i,a,l,c,u,f);const h={$id:l||i};if(Ui(e)==="object"&&Wt in e)for(const m in e.properties){const p=$e()(e,[Wt,m]),b=h[Wi]+a+m;h[m]=Pc(s,Lt(p)?p:{},i,a,b,c,$e()(u,[m]),f)}return h}function yD(s,e,i,a,l,c="root",u="_"){return Pc(s,e,c,u,i,a,l)}function Os(s,e,i,a,l,c=[]){if(qt in e||Ac in e||Ca in e){const f=Gn(s,e,a,l);if(c.findIndex(h=>As()(h,f))===-1)return Os(s,f,i,a,l,c.concat(f))}let u={[Oc]:i.replace(/^\./,"")};if(or in e||Nr in e){const f=or in e?e.oneOf:e.anyOf,d=go(e),h=Da(s,a,l,f,0,d),m=f[h];u={...u,...Os(s,m,i,a,l,c)}}if(Ad in e&&e[Ad]!==!1&&mn()(u,Od,!0),Vi in e&&Array.isArray(l)){const{items:f,additionalItems:d}=e;Array.isArray(f)?l.forEach((h,m)=>{f[m]?u[m]=Os(s,f[m],`${i}.${m}`,a,h,c):d?u[m]=Os(s,d,`${i}.${m}`,a,h,c):console.warn(`Unable to generate path schema for "${i}.${m}". No schema defined for it`)}):l.forEach((h,m)=>{u[m]=Os(s,f,`${i}.${m}`,a,h,c)})}else if(Wt in e)for(const f in e.properties){const d=$e()(e,[Wt,f]);u[f]=Os(s,d,`${i}.${f}`,a,$e()(l,[f]),c)}return u}function vD(s,e,i="",a,l){return Os(s,e,i,a,l)}class bD{constructor(e,i,a){this.rootSchema=i,this.validator=e,this.experimental_defaultFormStateBehavior=a}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,i,a={}){return!e||!i?!1:this.validator!==e||!On(this.rootSchema,i)||!On(this.experimental_defaultFormStateBehavior,a)}getDefaultFormState(e,i,a=!1){return dv(this.validator,e,i,this.rootSchema,a,this.experimental_defaultFormStateBehavior)}getDisplayLabel(e,i,a){return pD(this.validator,e,i,this.rootSchema,a)}getClosestMatchingOption(e,i,a,l){return Da(this.validator,this.rootSchema,e,i,a,l)}getFirstMatchingOption(e,i,a){return Md(this.validator,e,i,this.rootSchema,a)}getMatchingOption(e,i,a){return sv(this.validator,e,i,this.rootSchema,a)}isFilesArray(e,i){return mv(this.validator,e,i,this.rootSchema)}isMultiSelect(e){return Nd(this.validator,e,this.rootSchema)}isSelect(e){return uv(this.validator,e,this.rootSchema)}mergeValidationData(e,i){return gD(this.validator,e,i)}retrieveSchema(e,i){return Gn(this.validator,e,this.rootSchema,i)}sanitizeDataForNewSchema(e,i,a){return Ld(this.validator,this.rootSchema,e,i,a)}toIdSchema(e,i,a,l="root",c="_"){return yD(this.validator,e,i,this.rootSchema,a,l,c)}toPathSchema(e,i,a){return vD(this.validator,e,i,this.rootSchema,a)}}function SD(s,e,i={}){return new bD(s,e,i)}function xD(s){var e;if(s.indexOf("data:")===-1)throw new Error("File is invalid: URI must be a dataURI");const a=s.slice(5).split(";base64,");if(a.length!==2)throw new Error("File is invalid: dataURI must be base64");const[l,c]=a,[u,...f]=l.split(";"),d=u||"",h=decodeURI(((e=f.map(m=>m.split("=")).find(([m])=>m==="name"))===null||e===void 0?void 0:e[1])||"unknown");try{const m=atob(c),p=new Array(m.length);for(let v=0;v<m.length;v++)p[v]=m.charCodeAt(v);return{blob:new window.Blob([new Uint8Array(p)],{type:d}),name:h}}catch(m){throw new Error("File is invalid: "+m.message)}}function ED(s,e){let i=s;if(Array.isArray(e)){const a=i.split(/(%\d)/);e.forEach((l,c)=>{const u=a.findIndex(f=>f===`%${c+1}`);u>=0&&(a[u]=l)}),i=a.join("")}return i}function wD(s,e){return ED(s,e)}function sn(s,e=[],i){if(Array.isArray(s))return s.map(c=>sn(c,e)).filter(c=>c!==i);const a=s===""||s===null?-1:Number(s),l=e[a];return l?l.value:i}function pv(s,e,i=[]){const a=sn(s,i);return Array.isArray(e)?e.filter(l=>!As()(l,a)):As()(a,e)?void 0:e}function Dc(s,e){return Array.isArray(e)?e.some(i=>As()(i,s)):As()(e,s)}function $d(s,e=[],i=!1){const a=e.map((l,c)=>Dc(l.value,s)?String(c):void 0).filter(l=>typeof l!="undefined");return i?a:a[0]}var AD=S(3668),OD=S.n(AD);function gv(s,e,i=[]){const a=sn(s,i);if(!OD()(a)){const l=i.findIndex(f=>a===f.value),c=i.map(({value:f})=>f);return e.slice(0,l).concat(a,e.slice(l)).sort((f,d)=>+(c.indexOf(f)>c.indexOf(d)))}return e}class CD{constructor(e){this.errorSchema={},this.resetAllErrors(e)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(e){let a=Array.isArray(e)&&e.length>0||typeof e=="string"?$e()(this.errorSchema,e):this.errorSchema;return!a&&e&&(a={},mn()(this.errorSchema,e,a)),a}resetAllErrors(e){return this.errorSchema=e?wd()(e):{},this}addErrors(e,i){const a=this.getOrCreateErrorBlock(i);let l=$e()(a,Er);return Array.isArray(l)||(l=[],a[Er]=l),Array.isArray(e)?l.push(...e):l.push(e),this}setErrors(e,i){const a=this.getOrCreateErrorBlock(i),l=Array.isArray(e)?[...e]:[e];return mn()(a,Er,l),this}clearErrors(e){const i=this.getOrCreateErrorBlock(e);return mn()(i,Er,[]),this}}function kD(s,e,i=[1900,new Date().getFullYear()+2],a="YMD"){const{day:l,month:c,year:u,hour:f,minute:d,second:h}=s,m={type:"day",range:[1,31],value:l},p={type:"month",range:[1,12],value:c},b={type:"year",range:i,value:u},v=[];switch(a){case"MDY":v.push(p,m,b);break;case"DMY":v.push(m,p,b);break;case"YMD":default:v.push(b,p,m)}return e&&v.push({type:"hour",range:[0,23],value:f},{type:"minute",range:[0,59],value:d},{type:"second",range:[0,59],value:h}),v}function yv(s){const e={};return s.multipleOf&&(e.step=s.multipleOf),(s.minimum||s.minimum===0)&&(e.min=s.minimum),(s.maximum||s.maximum===0)&&(e.max=s.maximum),e}function vv(s,e,i={},a=!0){const l={type:e||"text",...yv(s)};return i.inputType?l.type=i.inputType:e||(s.type==="number"?(l.type="number",a&&l.step===void 0&&(l.step="any")):s.type==="integer"&&(l.type="number",l.step===void 0&&(l.step=1))),i.autocomplete&&(l.autoComplete=i.autocomplete),l}const bv={props:{disabled:!1},submitText:"Submit",norender:!1};function Sv(s={}){const e=at(s);if(e&&e[Cc]){const i=e[Cc];return{...bv,...i}}return bv}function Qe(s,e,i={}){const{templates:a}=e;return s==="ButtonTemplates"?a[s]:i[s]||a[s]}var z=S(31085),xv=S(524);const Bd={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function TD(s){let e=$e()(s,"MergedWidget");if(!e){const i=s.defaultProps&&s.defaultProps.options||{};e=({options:a,...l})=>(0,z.jsx)(s,{options:{...i,...a},...l}),mn()(s,"MergedWidget",e)}return e}function di(s,e,i={}){const a=Ui(s);if(typeof e=="function"||e&&xv.isForwardRef((0,g.createElement)(e))||xv.isMemo(e))return TD(e);if(typeof e!="string")throw new Error(`Unsupported widget definition: ${typeof e}`);if(e in i){const l=i[e];return di(s,l,i)}if(typeof a=="string"){if(!(a in Bd))throw new Error(`No widget for type '${a}'`);if(e in Bd[a]){const l=i[Bd[a][e]];return di(s,l,i)}}throw new Error(`No widget '${e}' for type '${a}'`)}function PD(s){let e=0;for(let i=0;i<s.length;i+=1){const a=s.charCodeAt(i);e=(e<<5)-e+a,e=e&e}return e.toString(16)}function DD(s){const e=new Set;return JSON.stringify(s,(i,a)=>(e.add(i),a)),PD(JSON.stringify(s,Array.from(e).sort()))}function MD(s,e,i={}){try{return di(s,e,i),!0}catch(a){const l=a;if(l.message&&(l.message.startsWith("No widget")||l.message.startsWith("Unsupported widget")))return!1;throw a}}function Ma(s,e){return`${Dd()(s)?s:s[Wi]}__${e}`}function Cs(s){return Ma(s,"description")}function jd(s){return Ma(s,"error")}function Ia(s){return Ma(s,"examples")}function Wd(s){return Ma(s,"help")}function Vd(s){return Ma(s,"title")}function Yn(s,e=!1){const i=e?` ${Ia(s)}`:"";return`${jd(s)} ${Cs(s)} ${Wd(s)}${i}`}function Mc(s,e){return`${s}-${e}`}function ks(s,e,i){return e?i:s}function ID(s){return s?new Date(s).toJSON():void 0}function RD(s){if(CP in s&&Array.isArray(s.enum)&&s.enum.length===1)return s.enum[0];if(Xy in s)return s.const;throw new Error("schema cannot be inferred as a constant")}function Ic(s){const e=s;if(e.enumNames,s.enum)return s.enum.map((a,l)=>({label:e.enumNames&&e.enumNames[l]||String(a),value:a}));const i=s.oneOf||s.anyOf;return i&&i.map(a=>{const l=a,c=RD(l),u=l.title||String(c);return{schema:l,label:u,value:c}})}function ND(s,e){if(!Array.isArray(e))return s;const i=m=>m.reduce((p,b)=>(p[b]=!0,p),{}),a=m=>m.length>1?`properties '${m.join("', '")}'`:`property '${m[0]}'`,l=i(s),c=e.filter(m=>m==="*"||l[m]),u=i(c),f=s.filter(m=>!u[m]),d=c.indexOf("*");if(d===-1){if(f.length)throw new Error(`uiSchema order list does not contain ${a(f)}`);return c}if(d!==c.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const h=[...c];return h.splice(d,1,...f),h}function Ki(s,e){let i=String(s);for(;i.length<e;)i="0"+i;return i}function zd(s,e=!0){if(!s)return{year:-1,month:-1,day:-1,hour:e?-1:0,minute:e?-1:0,second:e?-1:0};const i=new Date(s);if(Number.isNaN(i.getTime()))throw new Error("Unable to parse date "+s);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:e?i.getUTCHours():0,minute:e?i.getUTCMinutes():0,second:e?i.getUTCSeconds():0}}function Ra(s){if(s.const||s.enum&&s.enum.length===1&&s.enum[0]===!0)return!0;if(s.anyOf&&s.anyOf.length===1)return Ra(s.anyOf[0]);if(s.oneOf&&s.oneOf.length===1)return Ra(s.oneOf[0]);if(s.allOf){const e=i=>Ra(i);return s.allOf.some(e)}return!1}function FD(s,e,i){const{props:a,state:l}=s;return!On(a,e)||!On(l,i)}function Ev(s,e=!0){const{year:i,month:a,day:l,hour:c=0,minute:u=0,second:f=0}=s,d=Date.UTC(i,a-1,l,c,u,f),h=new Date(d).toJSON();return e?h:h.slice(0,10)}function Na(s,e=[]){if(!s)return[];let i=[];return Er in s&&(i=i.concat(s[Er].map(a=>{const l=`.${e.join(".")}`;return{property:l,message:a,stack:`${l} ${a}`}}))),Object.keys(s).reduce((a,l)=>{if(l!==Er){const c=s[l];kd()(c)&&(a=a.concat(Na(c,[...e,l])))}return a},i)}var LD=S(42613),wv=S.n(LD);function $D(s){const e=new CD;return s.length&&s.forEach(i=>{const{property:a,message:l}=i,c=a==="."?[]:wv()(a);c.length>0&&c[0]===""&&c.splice(0,1),l&&e.addErrors(l,c)}),e.ErrorSchema}function Av(s){return Object.keys(s).reduce((e,i)=>{if(i==="addError")return e;{const a=s[i];return kd()(a)?{...e,[i]:Av(a)}:{...e,[i]:a}}},{})}function BD(s){if(!s)return"";const e=new Date(s),i=Ki(e.getFullYear(),4),a=Ki(e.getMonth()+1,2),l=Ki(e.getDate(),2),c=Ki(e.getHours(),2),u=Ki(e.getMinutes(),2),f=Ki(e.getSeconds(),2),d=Ki(e.getMilliseconds(),3);return`${i}-${a}-${l}T${c}:${u}:${f}.${d}`}function Rc(s,e){if(!e)return s;const{errors:i,errorSchema:a}=s;let l=Na(e),c=e;return zi()(a)||(c=yo(a,e,!0),l=[...i].concat(l)),{errorSchema:c,errors:l}}function jD(s){for(const e in s){const i=s,a=i[e];e===qt&&typeof a=="string"&&a.startsWith("#")?i[e]=Qy+a:i[e]=Ud(a)}return s}function WD(s){for(let e=0;e<s.length;e++)s[e]=Ud(s[e]);return s}function Ud(s){return Array.isArray(s)?WD([...s]):wr()(s)?jD({...s}):s}var lt;(function(s){s.ArrayItemTitle="Item",s.MissingItems="Missing items definition",s.YesLabel="Yes",s.NoLabel="No",s.CloseLabel="Close",s.ErrorsLabel="Errors",s.NewStringDefault="New Value",s.AddButton="Add",s.AddItemButton="Add Item",s.CopyButton="Copy",s.MoveDownButton="Move down",s.MoveUpButton="Move up",s.RemoveButton="Remove",s.NowLabel="Now",s.ClearLabel="Clear",s.AriaDateLabel="Select a date",s.PreviewLabel="Preview",s.DecrementAriaLabel="Decrease value by 1",s.IncrementAriaLabel="Increase value by 1",s.UnknownFieldType="Unknown field type %1",s.OptionPrefix="Option %1",s.TitleOptionPrefix="%1 option %2",s.KeyLabel="%1 Key",s.InvalidObjectField='Invalid "%1" object field configuration: <em>%2</em>.',s.UnsupportedField="Unsupported field schema.",s.UnsupportedFieldWithId="Unsupported field schema for field <code>%1</code>.",s.UnsupportedFieldWithReason="Unsupported field schema: <em>%1</em>.",s.UnsupportedFieldWithIdAndReason="Unsupported field schema for field <code>%1</code>: <em>%2</em>.",s.FilesInfo="**%1** (%2, %3 bytes)"})(lt||(lt={}));var Z6=S(83657);class _6{constructor(e){this.schemaMap={},this.rootSchema=e,this.addSchema(e,hashForSchema(e))}addSchema(e,i){const a=get(e,ID_KEY,i),l={...e,[ID_KEY]:a},c=this.schemaMap[a];if(!c)this.schemaMap[a]=l;else if(!isEqual(c,l))throw console.error("existing schema:",JSON.stringify(c,null,2)),console.error("new schema:",JSON.stringify(l,null,2)),new Error(`Two different schemas exist with the same key ${a}! What a bad coincidence. If possible, try adding an $id to one of the schemas`)}getSchemaMap(){return this.schemaMap}isValid(e,i,a){if(!isEqual(a,this.rootSchema))throw new Error("Unexpectedly calling isValid() with a rootSchema that differs from the construction rootSchema");return this.addSchema(e,hashForSchema(e)),!1}rawValidation(e,i){throw new Error("Unexpectedly calling the `rawValidation()` method during schema parsing")}toErrorList(e,i){throw new Error("Unexpectedly calling the `toErrorList()` method during schema parsing")}validateFormData(e,i,a,l,c){throw new Error("Unexpectedly calling the `validateFormData()` method during schema parsing")}}function Hd(s,e,i,a){retrieveSchemaInternal(s,a,i,void 0,!0).forEach(c=>{e.findIndex(f=>isEqual(f,c))===-1&&(e.push(c),resolveAnyOrOneOfSchemas(s,c,i,!0).forEach(d=>{PROPERTIES_KEY in d&&d[PROPERTIES_KEY]&&forEach(c[PROPERTIES_KEY],h=>{Hd(s,e,i,h)})}),ITEMS_KEY in c&&!Array.isArray(c.items)&&typeof c.items!="boolean"&&Hd(s,e,i,c.items))})}function X6(s){const e=new ParserValidator(s);return Hd(e,[],s,s),e.getSchemaMap()}var VD=S(11601),zD=S.n(VD),UD=S(74421),Ov=S.n(UD);const HD={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0},KD=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,GD=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function YD(s,e,i={},a,l=zD()){const c=new l({...HD,...i});return a?Ov()(c,a):a!==!1&&Ov()(c),c.addFormat("data-url",GD),c.addFormat("color",KD),c.addKeyword(po),c.addKeyword(Od),Array.isArray(s)&&c.addMetaSchema(s),wr()(e)&&Object.keys(e).forEach(u=>{c.addFormat(u,e[u])}),c}function JD(s=[],e){return s.map(i=>{const{instancePath:a,keyword:l,params:c,schemaPath:u,parentSchema:f,...d}=i;let{message:h=""}=d,m=a.replace(/\//g,"."),p=`${m} ${h}`.trim();if("missingProperty"in c){m=m?`${m}.${c.missingProperty}`:c.missingProperty;const b=c.missingProperty,v=at($e()(e,`${m.replace(/^\./,"")}`)).title;if(v)h=h.replace(b,v);else{const x=$e()(f,[Wt,b,"title"]);x&&(h=h.replace(b,x))}p=h}else{const b=at($e()(e,`${m.replace(/^\./,"")}`)).title;if(b)p=`'${b}' ${h}`.trim();else{const v=f==null?void 0:f.title;v&&(p=`'${v}' ${h}`.trim())}}return{name:l,property:m,message:h,params:c,stack:p,schemaPath:u}})}function ZD(s,e,i,a,l,c,u){const{validationError:f}=e;let d=JD(e.errors,u);f&&(d=[...d,{stack:f.message}]),typeof c=="function"&&(d=c(d,u));let h=$D(d);if(f&&(h={...h,$schema:{__errors:[f.message]}}),typeof l!="function")return{errors:d,errorSchema:h};const m=dv(s,a,i,a,!0),p=l(m,Td(m),u),b=Av(p);return Rc({errors:d,errorSchema:h},b)}class _D{constructor(e,i){const{additionalMetaSchemas:a,customFormats:l,ajvOptionsOverrides:c,ajvFormatOptions:u,AjvClass:f}=e;this.ajv=YD(a,l,c,u,f),this.localizer=i}toErrorList(e,i=[]){return Na(e,i)}rawValidation(e,i){let a,l;e[Wi]&&(l=this.ajv.getSchema(e[Wi]));try{l===void 0&&(l=this.ajv.compile(e)),l(i)}catch(u){a=u}let c;return l&&(typeof this.localizer=="function"&&this.localizer(l.errors),c=l.errors||void 0,l.errors=null),{errors:c,validationError:a}}validateFormData(e,i,a,l,c){const u=this.rawValidation(i,e);return ZD(this,u,e,i,a,l,c)}handleSchemaUpdate(e){var i,a;const l=(i=e[Wi])!==null&&i!==void 0?i:Qy;this.ajv.getSchema(l)===void 0?this.ajv.addSchema(e,l):On(e,(a=this.ajv.getSchema(l))===null||a===void 0?void 0:a.schema)||(this.ajv.removeSchema(l),this.ajv.addSchema(e,l))}isValid(e,i,a){var l;try{this.handleSchemaUpdate(a);const c=Ud(e),u=(l=c[Wi])!==null&&l!==void 0?l:DD(c);let f;return f=this.ajv.getSchema(u),f===void 0&&(f=this.ajv.addSchema(c,u).getSchema(u)||this.ajv.compile(c)),f(i)}catch(c){return console.warn("Error encountered compiling schema:",c),!1}}}function XD(s={},e){return new _D(s,e)}class Q6{constructor(e,i,a){this.rootSchema=i,this.validateFns=e,this.localizer=a,this.mainValidator=this.getValidator(i)}getValidator(e){const i=get(e,ID_KEY)||hashForSchema(e),a=this.validateFns[i];if(!a)throw new Error(`No precompiled validator function was found for the given schema for "${i}"`);return a}ensureSameRootSchema(e,i){if(!isEqual(e,this.rootSchema)){const a=retrieveSchema(this,this.rootSchema,this.rootSchema,i);if(!isEqual(e,a))throw new Error("The schema associated with the precompiled validator differs from the rootSchema provided for validation")}return!0}toErrorList(e,i=[]){return toErrorList(e,i)}rawValidation(e,i){this.ensureSameRootSchema(e,i),this.mainValidator(i),typeof this.localizer=="function"&&this.localizer(this.mainValidator.errors);const a=this.mainValidator.errors||void 0;return this.mainValidator.errors=null,{errors:a}}validateFormData(e,i,a,l,c){const u=this.rawValidation(i,e);return processRawValidationErrors(this,u,e,i,a,l,c)}isValid(e,i,a){return this.ensureSameRootSchema(a,i),get(e,ID_KEY)===JUNK_OPTION_ID?!1:this.getValidator(e)(i)}}function q6(s,e,i){return new AJV8PrecompiledValidator(s,e,i)}const Cv=XD(),QD=(s,e={})=>{var c;const{layouts:i=[]}=e,a=s==null?void 0:s.uiSchema["ui:ObjectFieldTemplate"];if(typeof a!="string")return s;const l=(c=i.find(u=>u.name===a))==null?void 0:c.component;return l?{...s,uiSchema:{...s.uiSchema,"ui:ObjectFieldTemplate":l}}:s},qD=({description:s})=>s&&g.createElement(y.h,{content:s,linkTarget:"_blank"});var eM=S(74874),tM=S.n(eM);let nM=s=>crypto.getRandomValues(new Uint8Array(s)),rM=(s,e,i)=>{let a=(2<<Math.log(s.length-1)/Math.LN2)-1,l=-~(1.6*a*e/s.length);return(c=e)=>{let u="";for(;;){let f=i(l),d=l;for(;d--;)if(u+=s[f[d]&a]||"",u.length===c)return u}}},eW=(s,e=21)=>rM(s,e,nM),iM=(s=21)=>crypto.getRandomValues(new Uint8Array(s)).reduce((e,i)=>(i&=63,i<36?e+=i.toString(36):i<62?e+=(i-26).toString(36).toUpperCase():i>62?e+="-":e+="_",e),"");function Kd(){return iM()}function kv(s){return Array.isArray(s)?s.map(e=>({key:Kd(),item:e})):[]}function Fa(s){return Array.isArray(s)?s.map(e=>e.item):[]}class sM extends g.Component{constructor(e){super(e),this._getNewFormDataRow=()=>{const{schema:l,registry:c}=this.props,{schemaUtils:u}=c;let f=l.items;return Rd(l)&&AP(l)&&(f=l.additionalItems),u.getDefaultFormState(f)},this.onAddClick=l=>{this._handleAddClick(l)},this.onAddIndexClick=l=>c=>{this._handleAddClick(c,l)},this.onCopyIndexClick=l=>c=>{c&&c.preventDefault();const{onChange:u,errorSchema:f}=this.props,{keyedFormData:d}=this.state;let h;if(f){h={};for(const b in f){const v=parseInt(b);v<=l?mn()(h,[v],f[b]):v>l&&mn()(h,[v+1],f[b])}}const m={key:Kd(),item:wd()(d[l].item)},p=[...d];l!==void 0?p.splice(l+1,0,m):p.push(m),this.setState({keyedFormData:p,updatedKeyedFormData:!0},()=>u(Fa(p),h))},this.onDropIndexClick=l=>c=>{c&&c.preventDefault();const{onChange:u,errorSchema:f}=this.props,{keyedFormData:d}=this.state;let h;if(f){h={};for(const p in f){const b=parseInt(p);b<l?mn()(h,[b],f[p]):b>l&&mn()(h,[b-1],f[p])}}const m=d.filter((p,b)=>b!==l);this.setState({keyedFormData:m,updatedKeyedFormData:!0},()=>u(Fa(m),h))},this.onReorderClick=(l,c)=>u=>{u&&(u.preventDefault(),u.currentTarget.blur());const{onChange:f,errorSchema:d}=this.props;let h;if(d){h={};for(const v in d){const x=parseInt(v);x==l?mn()(h,[c],d[l]):x==c?mn()(h,[l],d[c]):mn()(h,[v],d[x])}}const{keyedFormData:m}=this.state;function p(){const v=m.slice();return v.splice(l,1),v.splice(c,0,m[l]),v}const b=p();this.setState({keyedFormData:b},()=>f(Fa(b),h))},this.onChangeForIndex=l=>(c,u,f)=>{const{formData:d,onChange:h,errorSchema:m}=this.props,b=(Array.isArray(d)?d:[]).map((v,x)=>l===x?typeof c=="undefined"?null:c:v);h(b,m&&m&&{...m,[l]:u},f)},this.onSelectChange=l=>{const{onChange:c,idSchema:u}=this.props;c(l,void 0,u&&u.$id)};const{formData:i=[]}=e,a=kv(i);this.state={keyedFormData:a,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,i){if(i.updatedKeyedFormData)return{updatedKeyedFormData:!1};const a=Array.isArray(e.formData)?e.formData:[],l=i.keyedFormData||[];return{keyedFormData:a.length===l.length?l.map((u,f)=>({key:u.key,item:a[f]})):kv(a)}}get itemTitle(){const{schema:e,registry:i}=this.props,{translateString:a}=i;return $e()(e,[Vi,"title"],$e()(e,[Vi,"description"],a(lt.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):e.type!=="null"}canAddItem(e){const{schema:i,uiSchema:a,registry:l}=this.props;let{addable:c}=at(a,l.globalUiOptions);return c!==!1&&(i.maxItems!==void 0?c=e.length<i.maxItems:c=!0),c}_handleAddClick(e,i){e&&e.preventDefault();const{onChange:a,errorSchema:l}=this.props,{keyedFormData:c}=this.state;let u;if(l){u={};for(const h in l){const m=parseInt(h);i===void 0||m<i?mn()(u,[m],l[h]):m>=i&&mn()(u,[m+1],l[h])}}const f={key:Kd(),item:this._getNewFormDataRow()},d=[...c];i!==void 0?d.splice(i,0,f):d.push(f),this.setState({keyedFormData:d,updatedKeyedFormData:!0},()=>a(Fa(d),u))}render(){const{schema:e,uiSchema:i,idSchema:a,registry:l}=this.props,{schemaUtils:c,translateString:u}=l;if(!(Vi in e)){const f=at(i),d=Qe("UnsupportedFieldTemplate",l,f);return(0,z.jsx)(d,{schema:e,idSchema:a,reason:u(lt.MissingItems),registry:l})}return c.isMultiSelect(e)?this.renderMultiSelect():hv(i)?this.renderCustomWidget():Rd(e)?this.renderFixedArray():c.isFilesArray(e,i)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:i={},errorSchema:a,idSchema:l,name:c,title:u,disabled:f=!1,readonly:d=!1,autofocus:h=!1,required:m=!1,registry:p,onBlur:b,onFocus:v,idPrefix:x,idSeparator:E="_",rawErrors:w}=this.props,{keyedFormData:A}=this.state,C=e.title||u||c,{schemaUtils:W,formContext:B}=p,V=at(i),J=wr()(e.items)?e.items:{},Z=W.retrieveSchema(J),le=Fa(this.state.keyedFormData),ce=this.canAddItem(le),he={canAdd:ce,items:A.map((fe,ye)=>{const{key:be,item:ve}=fe,Me=ve,Fe=W.retrieveSchema(J,Me),ke=a?a[ye]:void 0,Se=l.$id+E+ye,je=W.toIdSchema(Fe,Se,Me,x,E);return this.renderArrayFieldItem({key:be,index:ye,name:c&&`${c}-${ye}`,title:C?`${C}-${ye+1}`:void 0,canAdd:ce,canMoveUp:ye>0,canMoveDown:ye<le.length-1,itemSchema:Fe,itemIdSchema:je,itemErrorSchema:ke,itemData:Me,itemUiSchema:i.items,autofocus:h&&ye===0,onBlur:b,onFocus:v,rawErrors:w,totalItems:A.length})}),className:`field field-array field-array-of-${Z.type}`,disabled:f,idSchema:l,uiSchema:i,onAddClick:this.onAddClick,readonly:d,required:m,schema:e,title:C,formContext:B,formData:le,rawErrors:w,registry:p},ge=Qe("ArrayFieldTemplate",p,V);return(0,z.jsx)(ge,{...he})}renderCustomWidget(){var e;const{schema:i,idSchema:a,uiSchema:l,disabled:c=!1,readonly:u=!1,autofocus:f=!1,required:d=!1,hideError:h,placeholder:m,onBlur:p,onFocus:b,formData:v=[],registry:x,rawErrors:E,name:w}=this.props,{widgets:A,formContext:C,globalUiOptions:W,schemaUtils:B}=x,{widget:V,title:J,...Z}=at(l,W),le=di(i,V,A),ce=(e=J!=null?J:i.title)!==null&&e!==void 0?e:w,he=B.getDisplayLabel(i,l,W);return(0,z.jsx)(le,{id:a.$id,name:w,multiple:!0,onChange:this.onSelectChange,onBlur:p,onFocus:b,options:Z,schema:i,uiSchema:l,registry:x,value:v,disabled:c,readonly:u,hideError:h,required:d,label:ce,hideLabel:!he,placeholder:m,formContext:C,autofocus:f,rawErrors:E})}renderMultiSelect(){var e;const{schema:i,idSchema:a,uiSchema:l,formData:c=[],disabled:u=!1,readonly:f=!1,autofocus:d=!1,required:h=!1,placeholder:m,onBlur:p,onFocus:b,registry:v,rawErrors:x,name:E}=this.props,{widgets:w,schemaUtils:A,formContext:C,globalUiOptions:W}=v,B=A.retrieveSchema(i.items,c),V=Ic(B),{widget:J="select",title:Z,...le}=at(l,W),ce=di(i,J,w),he=(e=Z!=null?Z:i.title)!==null&&e!==void 0?e:E,ge=A.getDisplayLabel(i,l,W);return(0,z.jsx)(ce,{id:a.$id,name:E,multiple:!0,onChange:this.onSelectChange,onBlur:p,onFocus:b,options:{...le,enumOptions:V},schema:i,uiSchema:l,registry:v,value:c,disabled:u,readonly:f,required:h,label:he,hideLabel:!ge,placeholder:m,formContext:C,autofocus:d,rawErrors:x})}renderFiles(){var e;const{schema:i,uiSchema:a,idSchema:l,name:c,disabled:u=!1,readonly:f=!1,autofocus:d=!1,required:h=!1,onBlur:m,onFocus:p,registry:b,formData:v=[],rawErrors:x}=this.props,{widgets:E,formContext:w,globalUiOptions:A,schemaUtils:C}=b,{widget:W="files",title:B,...V}=at(a,A),J=di(i,W,E),Z=(e=B!=null?B:i.title)!==null&&e!==void 0?e:c,le=C.getDisplayLabel(i,a,A);return(0,z.jsx)(J,{options:V,id:l.$id,name:c,multiple:!0,onChange:this.onSelectChange,onBlur:m,onFocus:p,schema:i,uiSchema:a,value:v,disabled:u,readonly:f,required:h,registry:b,formContext:w,autofocus:d,rawErrors:x,label:Z,hideLabel:!le})}renderFixedArray(){const{schema:e,uiSchema:i={},formData:a=[],errorSchema:l,idPrefix:c,idSeparator:u="_",idSchema:f,name:d,title:h,disabled:m=!1,readonly:p=!1,autofocus:b=!1,required:v=!1,registry:x,onBlur:E,onFocus:w,rawErrors:A}=this.props,{keyedFormData:C}=this.state;let{formData:W=[]}=this.props;const B=e.title||h||d,V=at(i),{schemaUtils:J,formContext:Z}=x,ce=(wr()(e.items)?e.items:[]).map((be,ve)=>J.retrieveSchema(be,a[ve])),he=wr()(e.additionalItems)?J.retrieveSchema(e.additionalItems,a):null;(!W||W.length<ce.length)&&(W=W||[],W=W.concat(new Array(ce.length-W.length)));const ge=this.canAddItem(W)&&!!he,fe={canAdd:ge,className:"field field-array field-array-fixed-items",disabled:m,idSchema:f,formData:a,items:C.map((be,ve)=>{const{key:Me,item:Fe}=be,ke=Fe,Se=ve>=ce.length,je=(Se&&wr()(e.additionalItems)?J.retrieveSchema(e.additionalItems,ke):ce[ve])||{},pt=f.$id+u+ve,et=J.toIdSchema(je,pt,ke,c,u),ct=Se?i.additionalItems||{}:Array.isArray(i.items)?i.items[ve]:i.items||{},Tt=l?l[ve]:void 0;return this.renderArrayFieldItem({key:Me,index:ve,name:d&&`${d}-${ve}`,title:B?`${B}-${ve+1}`:void 0,canAdd:ge,canRemove:Se,canMoveUp:ve>=ce.length+1,canMoveDown:Se&&ve<W.length-1,itemSchema:je,itemData:ke,itemUiSchema:ct,itemIdSchema:et,itemErrorSchema:Tt,autofocus:b&&ve===0,onBlur:E,onFocus:w,rawErrors:A,totalItems:C.length})}),onAddClick:this.onAddClick,readonly:p,required:v,registry:x,schema:e,uiSchema:i,title:B,formContext:Z,errorSchema:l,rawErrors:A},ye=Qe("ArrayFieldTemplate",x,V);return(0,z.jsx)(ye,{...fe})}renderArrayFieldItem(e){const{key:i,index:a,name:l,canAdd:c,canRemove:u=!0,canMoveUp:f,canMoveDown:d,itemSchema:h,itemData:m,itemUiSchema:p,itemIdSchema:b,itemErrorSchema:v,autofocus:x,onBlur:E,onFocus:w,rawErrors:A,totalItems:C,title:W}=e,{disabled:B,hideError:V,idPrefix:J,idSeparator:Z,readonly:le,uiSchema:ce,registry:he,formContext:ge}=this.props,{fields:{ArraySchemaField:fe,SchemaField:ye},globalUiOptions:be}=he,ve=fe||ye,{orderable:Me=!0,removable:Fe=!0,copyable:ke=!1}=at(ce,be),Se={moveUp:Me&&f,moveDown:Me&&d,copy:ke&&c,remove:Fe&&u,toolbar:!1};return Se.toolbar=Object.keys(Se).some(je=>Se[je]),{children:(0,z.jsx)(ve,{name:l,title:W,index:a,schema:h,uiSchema:p,formData:m,formContext:ge,errorSchema:v,idPrefix:J,idSeparator:Z,idSchema:b,required:this.isItemRequired(h),onChange:this.onChangeForIndex(a),onBlur:E,onFocus:w,registry:he,disabled:B,readonly:le,hideError:V,autofocus:x,rawErrors:A}),className:"array-item",disabled:B,canAdd:c,hasCopy:Se.copy,hasToolbar:Se.toolbar,hasMoveUp:Se.moveUp,hasMoveDown:Se.moveDown,hasRemove:Se.remove,index:a,totalItems:C,key:i,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:le,registry:he,schema:h,uiSchema:p}}}const oM=sM;function aM(s){var e,i,a;const{schema:l,name:c,uiSchema:u,idSchema:f,formData:d,registry:h,required:m,disabled:p,readonly:b,hideError:v,autofocus:x,title:E,onChange:w,onFocus:A,onBlur:C,rawErrors:W}=s,{title:B}=l,{widgets:V,formContext:J,translateString:Z,globalUiOptions:le}=h,{widget:ce="checkbox",title:he,label:ge=!0,...fe}=at(u,le),ye=di(l,ce,V),be=Z(lt.YesLabel),ve=Z(lt.NoLabel);let Me;const Fe=(i=(e=he!=null?he:B)!==null&&e!==void 0?e:E)!==null&&i!==void 0?i:c;if(Array.isArray(l.oneOf))Me=Ic({oneOf:l.oneOf.map(ke=>{if(wr()(ke))return{...ke,title:ke.title||(ke.const===!0?be:ve)}}).filter(ke=>ke)});else{const ke=l,Se=(a=l.enum)!==null&&a!==void 0?a:[!0,!1];!ke.enumNames&&Se.length===2&&Se.every(je=>typeof je=="boolean")?Me=[{value:Se[0],label:Se[0]?be:ve},{value:Se[1],label:Se[1]?be:ve}]:Me=Ic({enum:Se,enumNames:ke.enumNames})}return(0,z.jsx)(ye,{options:{...fe,enumOptions:Me},schema:l,uiSchema:u,id:f.$id,name:c,onChange:w,onFocus:A,onBlur:C,label:Fe,hideLabel:!ge,value:d,required:m,disabled:p,readonly:b,hideError:v,registry:h,formContext:J,autofocus:x,rawErrors:W})}const lM=aM;class cM extends g.Component{constructor(e){super(e),this.onOptionChange=u=>{const{selectedOption:f,retrievedOptions:d}=this.state,{formData:h,onChange:m,registry:p}=this.props,{schemaUtils:b}=p,v=u!==void 0?parseInt(u,10):-1;if(v===f)return;const x=v>=0?d[v]:void 0,E=f>=0?d[f]:void 0;let w=b.sanitizeDataForNewSchema(x,E,h);w&&x&&(w=b.getDefaultFormState(x,w,"excludeObjectChildren")),m(w,void 0,this.getFieldId()),this.setState({selectedOption:v})};const{formData:i,options:a,registry:{schemaUtils:l}}=this.props,c=a.map(u=>l.retrieveSchema(u,i));this.state={retrievedOptions:c,selectedOption:this.getMatchingOption(0,i,c)}}componentDidUpdate(e,i){const{formData:a,options:l,idSchema:c}=this.props,{selectedOption:u}=this.state;let f=this.state;if(!On(e.options,l)){const{registry:{schemaUtils:d}}=this.props,h=l.map(m=>d.retrieveSchema(m,a));f={selectedOption:u,retrievedOptions:h}}if(!On(a,e.formData)&&c.$id===e.idSchema.$id){const{retrievedOptions:d}=f,h=this.getMatchingOption(u,a,d);i&&h!==u&&(f={selectedOption:h,retrievedOptions:d})}f!==this.state&&this.setState(f)}getMatchingOption(e,i,a){const{schema:l,registry:{schemaUtils:c}}=this.props,u=go(l);return c.getClosestMatchingOption(i,a,e,u)}getFieldId(){const{idSchema:e,schema:i}=this.props;return`${e.$id}${i.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:i=!1,errorSchema:a={},formContext:l,onBlur:c,onFocus:u,registry:f,schema:d,uiSchema:h}=this.props,{widgets:m,fields:p,translateString:b,globalUiOptions:v,schemaUtils:x}=f,{SchemaField:E}=p,{selectedOption:w,retrievedOptions:A}=this.state,{widget:C="select",placeholder:W,autofocus:B,autocomplete:V,title:J=d.title,...Z}=at(h,v),le=di({type:"number"},C,m),ce=$e()(a,Er,[]),he=kc()(a,[Er]),ge=x.getDisplayLabel(d,h,v),fe=w>=0&&A[w]||null;let ye;if(fe){const{required:Se}=d;ye=Se?fi({required:Se},fe):fe}let be=[];or in d&&h&&or in h?Array.isArray(h[or])?be=h[or]:console.warn(`uiSchema.oneOf is not an array for "${J||e}"`):Nr in d&&h&&Nr in h&&(Array.isArray(h[Nr])?be=h[Nr]:console.warn(`uiSchema.anyOf is not an array for "${J||e}"`));let ve=h;w>=0&&be.length>w&&(ve=be[w]);const Me=J?lt.TitleOptionPrefix:lt.OptionPrefix,Fe=J?[J]:[],ke=A.map((Se,je)=>{const{title:pt=Se.title}=at(be[je]);return{label:pt||b(Me,Fe.concat(String(je+1))),value:je}});return(0,z.jsxs)("div",{className:"panel panel-default panel-body",children:[(0,z.jsx)("div",{className:"form-group",children:(0,z.jsx)(le,{id:this.getFieldId(),name:`${e}${d.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:c,onFocus:u,disabled:i||zi()(ke),multiple:!1,rawErrors:ce,errorSchema:he,value:w>=0?w:void 0,options:{enumOptions:ke,...Z},registry:f,formContext:l,placeholder:W,autocomplete:V,autofocus:B,label:J!=null?J:e,hideLabel:!ge})}),ye&&(0,z.jsx)(E,{...this.props,schema:ye,uiSchema:ve})]})}}const Tv=cM,uM=/\.([0-9]*0)*$/,fM=/[0.]0*$/;function dM(s){const{registry:e,onChange:i,formData:a,value:l}=s,[c,u]=(0,g.useState)(l),{StringField:f}=e.fields;let d=a;const h=(0,g.useCallback)(m=>{u(m),`${m}`.charAt(0)==="."&&(m=`0${m}`);const p=typeof m=="string"&&m.match(uM)?_y(m.replace(fM,"")):_y(m);i(p)},[i]);if(typeof c=="string"&&typeof d=="number"){const m=new RegExp(`^(${String(d).replace(".","\\.")})?\\.?0*$`);c.match(m)&&(d=c)}return(0,z.jsx)(f,{...s,formData:d,onChange:h})}const hM=dM;function Ts(){return Ts=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=i[a])}return s},Ts.apply(this,arguments)}const mM=["children","options"];var Pv,Dv;(function(s){s.blockQuote="0",s.breakLine="1",s.breakThematic="2",s.codeBlock="3",s.codeFenced="4",s.codeInline="5",s.footnote="6",s.footnoteReference="7",s.gfmTask="8",s.heading="9",s.headingSetext="10",s.htmlBlock="11",s.htmlComment="12",s.htmlSelfClosing="13",s.image="14",s.link="15",s.linkAngleBraceStyleDetector="16",s.linkBareUrlDetector="17",s.linkMailtoDetector="18",s.newlineCoalescer="19",s.orderedList="20",s.paragraph="21",s.ref="22",s.refImage="23",s.refLink="24",s.table="25",s.tableSeparator="26",s.text="27",s.textBolded="28",s.textEmphasized="29",s.textEscaped="30",s.textMarked="31",s.textStrikethroughed="32",s.unorderedList="33"})(Pv||(Pv={})),function(s){s[s.MAX=0]="MAX",s[s.HIGH=1]="HIGH",s[s.MED=2]="MED",s[s.LOW=3]="LOW",s[s.MIN=4]="MIN"}(Dv||(Dv={}));const Mv=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((s,e)=>(s[e.toLowerCase()]=e,s),{for:"htmlFor"}),Iv={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"\xA0",quot:"\u201C"},pM=["style","script"],gM=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,yM=/mailto:/i,vM=/\n{2,}$/,Rv=/^(\s*>[\s\S]*?)(?=\n{2,})/,bM=/^ *> ?/gm,SM=/^ {2,}\n/,xM=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,Nv=/^\s*(`{3,}|~{3,}) *(\S+)?([^\n]*?)?\n([\s\S]+?)\s*\1 *(?:\n *)*\n?/,Fv=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,EM=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,wM=/^(?:\n *)*\n/,AM=/\r\n?/g,OM=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,CM=/^\[\^([^\]]+)]/,kM=/\f/g,TM=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,PM=/^\s*?\[(x|\s)\]/,Lv=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,$v=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Bv=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,Gd=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,DM=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,jv=/^<!--[\s\S]*?(?:-->)/,MM=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,Yd=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,IM=/^\{.*\}$/,RM=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,NM=/^<([^ >]+@[^ >]+)>/,FM=/^<([^ >]+:\/[^ >]+)>/,LM=/-([a-z])?/gi,Wv=/^(.*\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,$M=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,BM=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,jM=/^\[([^\]]*)\] ?\[([^\]]*)\]/,WM=/(\[|\])/g,VM=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,zM=/\t/g,UM=/(^ *\||\| *$)/g,HM=/^ *:-+: *$/,KM=/^ *:-+ *$/,GM=/^ *-+: *$/,Nc="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\n)*?)",YM=new RegExp(`^([*_])\\1${Nc}\\1\\1(?!\\1)`),JM=new RegExp(`^([*_])${Nc}\\1(?!\\1|\\w)`),ZM=new RegExp(`^==${Nc}==`),_M=new RegExp(`^~~${Nc}~~`),XM=/^\\([^0-9A-Za-z\s])/,QM=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,qM=/^\n+/,eI=/^([ \t]*)/,tI=/\\([^\\])/g,Vv=/ *\n+$/,nI=/(?:^|\n)( *)$/,Jd="(?:\\d+\\.)",Zd="(?:[*+-])";function zv(s){return"( *)("+(s===1?Jd:Zd)+") +"}const Uv=zv(1),Hv=zv(2);function Kv(s){return new RegExp("^"+(s===1?Uv:Hv))}const rI=Kv(1),iI=Kv(2);function Gv(s){return new RegExp("^"+(s===1?Uv:Hv)+"[^\\n]*(?:\\n(?!\\1"+(s===1?Jd:Zd)+" )[^\\n]*)*(\\n|$)","gm")}const Yv=Gv(1),Jv=Gv(2);function Zv(s){const e=s===1?Jd:Zd;return new RegExp("^( *)("+e+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+e+" (?!"+e+" ))\\n*|\\s*\\n*$)")}const _v=Zv(1),Xv=Zv(2);function Qv(s,e){const i=e===1,a=i?_v:Xv,l=i?Yv:Jv,c=i?rI:iI;return{match(u,f,d){const h=nI.exec(d);return h&&(f.list||!f.inline&&!f.simple)?a.exec(u=h[1]+u):null},order:1,parse(u,f,d){const h=i?+u[2]:void 0,m=u[0].replace(vM,`
`).match(l);let p=!1;return{items:m.map(function(b,v){const x=c.exec(b)[0].length,E=new RegExp("^ {1,"+x+"}","gm"),w=b.replace(E,"").replace(c,""),A=v===m.length-1,C=w.indexOf(`

`)!==-1||A&&p;p=C;const W=d.inline,B=d.list;let V;d.list=!0,C?(d.inline=!1,V=w.replace(Vv,`

`)):(d.inline=!0,V=w.replace(Vv,""));const J=f(V,d);return d.inline=W,d.list=B,J}),ordered:i,start:h}},render:(u,f,d)=>s(u.ordered?"ol":"ul",{key:d.key,start:u.type==="20"?u.start:void 0},u.items.map(function(h,m){return s("li",{key:m},f(h,d))}))}}const sI=new RegExp(`^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),oI=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,qv=[Rv,Nv,Fv,Lv,Bv,$v,jv,Wv,Yv,_v,Jv,Xv],aI=[...qv,/^[^\n]+(?:  \n|\n{2,})/,Gd,Yd];function lI(s){return s.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function cI(s){return GM.test(s)?"right":HM.test(s)?"center":KM.test(s)?"left":null}function e1(s,e,i,a){const l=i.inTable;i.inTable=!0;let c=s.trim().split(/( *(?:`[^`]*`|<.*?>.*?<\/.*?>(?!<\/.*?>)|\\\||\|) *)/).reduce((f,d)=>(d.trim()==="|"?f.push(a?{type:"26"}:{type:"27",text:d}):d!==""&&f.push.apply(f,e(d,i)),f),[]);i.inTable=l;let u=[[]];return c.forEach(function(f,d){f.type==="26"?d!==0&&d!==c.length-1&&u.push([]):(f.type!=="27"||c[d+1]!=null&&c[d+1].type!=="26"||(f.text=f.text.trimEnd()),u[u.length-1].push(f))}),u}function uI(s,e,i){i.inline=!0;const a=s[2]?s[2].replace(UM,"").split("|").map(cI):[],l=s[3]?function(u,f,d){return u.trim().split(`
`).map(function(h){return e1(h,f,d,!0)})}(s[3],e,i):[],c=e1(s[1],e,i,!!l.length);return i.inline=!1,l.length?{align:a,cells:l,header:c,type:"25"}:{children:c,type:"21"}}function t1(s,e){return s.align[e]==null?{}:{textAlign:s.align[e]}}function Gi(s){return function(e,i){return i.inline?s.exec(e):null}}function Yi(s){return function(e,i){return i.inline||i.simple?s.exec(e):null}}function hi(s){return function(e,i){return i.inline||i.simple?null:s.exec(e)}}function La(s){return function(e){return s.exec(e)}}function fI(s,e,i){if(e.inline||e.simple||i&&!i.endsWith(`
`))return null;let a="";s.split(`
`).every(c=>!qv.some(u=>u.test(c))&&(a+=c+`
`,c.trim()));const l=a.trimEnd();return l==""?null:[a,l]}function So(s){try{if(decodeURIComponent(s).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return}catch{return null}return s}function n1(s){return s.replace(tI,"$1")}function Fc(s,e,i){const a=i.inline||!1,l=i.simple||!1;i.inline=!0,i.simple=!0;const c=s(e,i);return i.inline=a,i.simple=l,c}function dI(s,e,i){const a=i.inline||!1,l=i.simple||!1;i.inline=!1,i.simple=!0;const c=s(e,i);return i.inline=a,i.simple=l,c}function hI(s,e,i){const a=i.inline||!1;i.inline=!1;const l=s(e,i);return i.inline=a,l}const _d=(s,e,i)=>({children:Fc(e,s[1],i)});function Xd(){return{}}function Qd(){return null}function mI(...s){return s.filter(Boolean).join(" ")}function qd(s,e,i){let a=s;const l=e.split(".");for(;l.length&&(a=a[l[0]],a!==void 0);)l.shift();return a||i}function pI(s="",e={}){e.overrides=e.overrides||{},e.slugify=e.slugify||lI,e.namedCodesToUnicode=e.namedCodesToUnicode?Ts({},Iv,e.namedCodesToUnicode):Iv;const i=e.createElement||g.createElement;function a(v,x,...E){const w=qd(e.overrides,`${v}.props`,{});return i(function(A,C){const W=qd(C,A);return W?typeof W=="function"||typeof W=="object"&&"render"in W?W:qd(C,`${A}.component`,A):A}(v,e.overrides),Ts({},x,w,{className:mI(x==null?void 0:x.className,w.className)||void 0}),...E)}function l(v){v=v.replace(TM,"");let x=!1;e.forceInline?x=!0:e.forceBlock||(x=VM.test(v)===!1);const E=m(h(x?v:`${v.trimEnd().replace(qM,"")}

`,{inline:x}));for(;typeof E[E.length-1]=="string"&&!E[E.length-1].trim();)E.pop();if(e.wrapper===null)return E;const w=e.wrapper||(x?"span":"div");let A;if(E.length>1||e.forceWrapper)A=E;else{if(E.length===1)return A=E[0],typeof A=="string"?a("span",{key:"outer"},A):A;A=null}return g.createElement(w,{key:"outer"},A)}function c(v){const x=v.match(gM);return x?x.reduce(function(E,w,A){const C=w.indexOf("=");if(C!==-1){const W=function(Z){return Z.indexOf("-")!==-1&&Z.match(MM)===null&&(Z=Z.replace(LM,function(le,ce){return ce.toUpperCase()})),Z}(w.slice(0,C)).trim(),B=function(Z){const le=Z[0];return(le==='"'||le==="'")&&Z.length>=2&&Z[Z.length-1]===le?Z.slice(1,-1):Z}(w.slice(C+1).trim()),V=Mv[W]||W,J=E[V]=function(Z,le){return Z==="style"?le.split(/;\s?/).reduce(function(ce,he){const ge=he.slice(0,he.indexOf(":"));return ce[ge.trim().replace(/(-[a-z])/g,fe=>fe[1].toUpperCase())]=he.slice(ge.length+1).trim(),ce},{}):Z==="href"||Z==="src"?So(le):(le.match(IM)&&(le=le.slice(1,le.length-1)),le==="true"||le!=="false"&&le)}(W,B);typeof J=="string"&&(Gd.test(J)||Yd.test(J))&&(E[V]=g.cloneElement(l(J.trim()),{key:A}))}else w!=="style"&&(E[Mv[w]||w]=!0);return E},{}):null}const u=[],f={},d={0:{match:hi(Rv),order:1,parse:(v,x,E)=>({children:x(v[0].replace(bM,""),E)}),render:(v,x,E)=>a("blockquote",{key:E.key},x(v.children,E))},1:{match:La(SM),order:1,parse:Xd,render:(v,x,E)=>a("br",{key:E.key})},2:{match:hi(xM),order:1,parse:Xd,render:(v,x,E)=>a("hr",{key:E.key})},3:{match:hi(Fv),order:0,parse:v=>({lang:void 0,text:v[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(v,x,E)=>a("pre",{key:E.key},a("code",Ts({},v.attrs,{className:v.lang?`lang-${v.lang}`:""}),v.text))},4:{match:hi(Nv),order:0,parse:v=>({attrs:c(v[3]||""),lang:v[2]||void 0,text:v[4],type:"3"})},5:{match:Yi(EM),order:3,parse:v=>({text:v[2]}),render:(v,x,E)=>a("code",{key:E.key},v.text)},6:{match:hi(OM),order:0,parse:v=>(u.push({footnote:v[2],identifier:v[1]}),{}),render:Qd},7:{match:Gi(CM),order:1,parse:v=>({target:`#${e.slugify(v[1])}`,text:v[1]}),render:(v,x,E)=>a("a",{key:E.key,href:So(v.target)},a("sup",{key:E.key},v.text))},8:{match:Gi(PM),order:1,parse:v=>({completed:v[1].toLowerCase()==="x"}),render:(v,x,E)=>a("input",{checked:v.completed,key:E.key,readOnly:!0,type:"checkbox"})},9:{match:hi(e.enforceAtxHeadings?$v:Lv),order:1,parse:(v,x,E)=>({children:Fc(x,v[2],E),id:e.slugify(v[2]),level:v[1].length}),render:(v,x,E)=>a(`h${v.level}`,{id:v.id,key:E.key},x(v.children,E))},10:{match:hi(Bv),order:0,parse:(v,x,E)=>({children:Fc(x,v[1],E),level:v[2]==="="?1:2,type:"9"})},11:{match:La(Gd),order:1,parse(v,x,E){const[,w]=v[3].match(eI),A=new RegExp(`^${w}`,"gm"),C=v[3].replace(A,""),W=(B=C,aI.some(le=>le.test(B))?hI:Fc);var B;const V=v[1].toLowerCase(),J=pM.indexOf(V)!==-1,Z={attrs:c(v[2]),noInnerParse:J,tag:(J?V:v[1]).trim()};return E.inAnchor=E.inAnchor||V==="a",J?Z.text=v[3]:Z.children=W(x,C,E),E.inAnchor=!1,Z},render:(v,x,E)=>a(v.tag,Ts({key:E.key},v.attrs),v.text||x(v.children,E))},13:{match:La(Yd),order:1,parse:v=>({attrs:c(v[2]||""),tag:v[1].trim()}),render:(v,x,E)=>a(v.tag,Ts({},v.attrs,{key:E.key}))},12:{match:La(jv),order:1,parse:()=>({}),render:Qd},14:{match:Yi(oI),order:1,parse:v=>({alt:v[1],target:n1(v[2]),title:v[3]}),render:(v,x,E)=>a("img",{key:E.key,alt:v.alt||void 0,title:v.title||void 0,src:So(v.target)})},15:{match:Gi(sI),order:3,parse:(v,x,E)=>({children:dI(x,v[1],E),target:n1(v[2]),title:v[3]}),render:(v,x,E)=>a("a",{key:E.key,href:So(v.target),title:v.title},x(v.children,E))},16:{match:Gi(FM),order:0,parse:v=>({children:[{text:v[1],type:"27"}],target:v[1],type:"15"})},17:{match:(v,x)=>x.inAnchor?null:Gi(RM)(v,x),order:0,parse:v=>({children:[{text:v[1],type:"27"}],target:v[1],title:void 0,type:"15"})},18:{match:Gi(NM),order:0,parse(v){let x=v[1],E=v[1];return yM.test(E)||(E="mailto:"+E),{children:[{text:x.replace("mailto:",""),type:"27"}],target:E,type:"15"}}},20:Qv(a,1),33:Qv(a,2),19:{match:hi(wM),order:3,parse:Xd,render:()=>`
`},21:{match:fI,order:3,parse:_d,render:(v,x,E)=>a("p",{key:E.key},x(v.children,E))},22:{match:Gi($M),order:0,parse:v=>(f[v[1]]={target:v[2],title:v[4]},{}),render:Qd},23:{match:Yi(BM),order:0,parse:v=>({alt:v[1]||void 0,ref:v[2]}),render:(v,x,E)=>f[v.ref]?a("img",{key:E.key,alt:v.alt,src:So(f[v.ref].target),title:f[v.ref].title}):null},24:{match:Gi(jM),order:0,parse:(v,x,E)=>({children:x(v[1],E),fallbackChildren:x(v[0].replace(WM,"\\$1"),E),ref:v[2]}),render:(v,x,E)=>f[v.ref]?a("a",{key:E.key,href:So(f[v.ref].target),title:f[v.ref].title},x(v.children,E)):a("span",{key:E.key},x(v.fallbackChildren,E))},25:{match:hi(Wv),order:1,parse:uI,render(v,x,E){const w=v;return a("table",{key:E.key},a("thead",null,a("tr",null,w.header.map(function(A,C){return a("th",{key:C,style:t1(w,C)},x(A,E))}))),a("tbody",null,w.cells.map(function(A,C){return a("tr",{key:C},A.map(function(W,B){return a("td",{key:B,style:t1(w,B)},x(W,E))}))})))}},27:{match:La(QM),order:4,parse:v=>({text:v[0].replace(DM,(x,E)=>e.namedCodesToUnicode[E]?e.namedCodesToUnicode[E]:x)}),render:v=>v.text},28:{match:Yi(YM),order:2,parse:(v,x,E)=>({children:x(v[2],E)}),render:(v,x,E)=>a("strong",{key:E.key},x(v.children,E))},29:{match:Yi(JM),order:3,parse:(v,x,E)=>({children:x(v[2],E)}),render:(v,x,E)=>a("em",{key:E.key},x(v.children,E))},30:{match:Yi(XM),order:1,parse:v=>({text:v[1],type:"27"})},31:{match:Yi(ZM),order:3,parse:_d,render:(v,x,E)=>a("mark",{key:E.key},x(v.children,E))},32:{match:Yi(_M),order:3,parse:_d,render:(v,x,E)=>a("del",{key:E.key},x(v.children,E))}};e.disableParsingRawHTML===!0&&(delete d[11],delete d[13]);const h=function(v){let x=Object.keys(v);function E(w,A){let C=[],W="";for(;w;){let B=0;for(;B<x.length;){const V=x[B],J=v[V],Z=J.match(w,A,W);if(Z){const le=Z[0];w=w.substring(le.length);const ce=J.parse(Z,E,A);ce.type==null&&(ce.type=V),C.push(ce),W=le;break}B++}}return C}return x.sort(function(w,A){let C=v[w].order,W=v[A].order;return C!==W?C-W:w<A?-1:1}),function(w,A){return E(function(C){return C.replace(AM,`
`).replace(kM,"").replace(zM,"    ")}(w),A)}}(d),m=(p=function(v,x){return function(E,w,A){const C=v[E.type].render;return x?x(()=>C(E,w,A),E,w,A):C(E,w,A)}}(d,e.renderRule),function v(x,E={}){if(Array.isArray(x)){const w=E.key,A=[];let C=!1;for(let W=0;W<x.length;W++){E.key=W;const B=v(x[W],E),V=typeof B=="string";V&&C?A[A.length-1]+=B:B!==null&&A.push(B),C=V}return E.key=w,A}return p(x,v,E)});var p;const b=l(s);return u.length?a("div",null,b,a("footer",{key:"footer"},u.map(function(v){return a("div",{id:e.slugify(v.identifier),key:v.identifier},v.identifier,m(h(v.footnote,{inline:!0})))}))):b}const Lc=s=>{let{children:e="",options:i}=s,a=function(l,c){if(l==null)return{};var u,f,d={},h=Object.keys(l);for(f=0;f<h.length;f++)c.indexOf(u=h[f])>=0||(d[u]=l[u]);return d}(s,mM);return g.cloneElement(pI(e,i),a)};var gI=S(73450),yI=S.n(gI);class vI extends g.Component{constructor(){super(...arguments),this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=(e,i=!1)=>(a,l,c)=>{const{formData:u,onChange:f,errorSchema:d}=this.props;a===void 0&&i&&(a="");const h={...u,[e]:a};f(h,d&&d&&{...d,[e]:l},c)},this.onDropPropertyClick=e=>i=>{i.preventDefault();const{onChange:a,formData:l}=this.props,c={...l};yI()(c,e),a(c)},this.getAvailableKey=(e,i)=>{const{uiSchema:a,registry:l}=this.props,{duplicateKeySuffixSeparator:c="-"}=at(a,l.globalUiOptions);let u=0,f=e;for(;Cn()(i,f);)f=`${e}${c}${++u}`;return f},this.onKeyChange=e=>(i,a)=>{if(e===i)return;const{formData:l,onChange:c,errorSchema:u}=this.props;i=this.getAvailableKey(i,l);const f={...l},d={[e]:i},h=Object.keys(f).map(p=>({[d[p]||p]:f[p]})),m=Object.assign({},...h);this.setState({wasPropertyKeyModified:!0}),c(m,u&&u&&{...u,[i]:a})},this.handleAddClick=e=>()=>{if(!e.additionalProperties)return;const{formData:i,onChange:a,registry:l}=this.props,c={...i};let u,f;if(wr()(e.additionalProperties)){u=e.additionalProperties.type,f=e.additionalProperties.default;let h=e.additionalProperties;if(qt in h){const{schemaUtils:m}=l;h=m.retrieveSchema({$ref:h[qt]},i),u=h.type,f=h.default}!u&&(Nr in h||or in h)&&(u="object")}const d=this.getAvailableKey("newKey",c);mn()(c,d,f!=null?f:this.getDefaultValue(u)),a(c)}}isRequired(e){const{schema:i}=this.props;return Array.isArray(i.required)&&i.required.indexOf(e)!==-1}getDefaultValue(e){const{registry:{translateString:i}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};case"string":default:return i(lt.NewStringDefault)}}render(){var e,i,a,l;const{schema:c,uiSchema:u={},formData:f,errorSchema:d,idSchema:h,name:m,required:p=!1,disabled:b,readonly:v,hideError:x,idPrefix:E,idSeparator:w,onBlur:A,onFocus:C,registry:W,title:B}=this.props,{fields:V,formContext:J,schemaUtils:Z,translateString:le,globalUiOptions:ce}=W,{SchemaField:he}=V,ge=Z.retrieveSchema(c,f),fe=at(u,ce),{properties:ye={}}=ge,be=(a=(i=(e=fe.title)!==null&&e!==void 0?e:ge.title)!==null&&i!==void 0?i:B)!==null&&a!==void 0?a:m,ve=(l=fe.description)!==null&&l!==void 0?l:ge.description;let Me;try{const Se=Object.keys(ye);Me=ND(Se,fe.order)}catch(Se){return(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"config-error",style:{color:"red"},children:(0,z.jsx)(Lc,{children:le(lt.InvalidObjectField,[m||"root",Se.message])})}),(0,z.jsx)("pre",{children:JSON.stringify(ge)})]})}const Fe=Qe("ObjectFieldTemplate",W,fe),ke={title:fe.label===!1?"":be,description:fe.label===!1?void 0:ve,properties:Me.map(Se=>{const je=Cn()(ge,[Wt,Se,po]),pt=je?u.additionalProperties:u[Se],et=at(pt).widget==="hidden",ct=$e()(h,[Se],{});return{content:(0,z.jsx)(he,{name:Se,required:this.isRequired(Se),schema:$e()(ge,[Wt,Se],{}),uiSchema:pt,errorSchema:$e()(d,Se),idSchema:ct,idPrefix:E,idSeparator:w,formData:$e()(f,Se),formContext:J,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(Se),onChange:this.onPropertyChange(Se,je),onBlur:A,onFocus:C,registry:W,disabled:b,readonly:v,hideError:x,onDropPropertyClick:this.onDropPropertyClick},Se),name:Se,readonly:v,disabled:b,required:p,hidden:et}}),readonly:v,disabled:b,required:p,idSchema:h,uiSchema:u,errorSchema:d,schema:ge,formData:f,formContext:J,registry:W};return(0,z.jsx)(Fe,{...ke,onAddClick:this.handleAddClick})}}const bI=vI,SI={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function xI(s,e,i,a){const l=e.field,{fields:c,translateString:u}=a;if(typeof l=="function")return l;if(typeof l=="string"&&l in c)return c[l];const f=Ui(s),d=Array.isArray(f)?f[0]:f||"",h=s.$id;let m=SI[d];return h&&h in c&&(m=h),!m&&(s.anyOf||s.oneOf)?()=>null:m in c?c[m]:()=>{const p=Qe("UnsupportedFieldTemplate",a,e);return(0,z.jsx)(p,{schema:s,idSchema:i,reason:u(lt.UnknownFieldType,[String(s.type)]),registry:a})}}function EI(s){var e,i,a,l,c;const{schema:u,idSchema:f,uiSchema:d,formData:h,errorSchema:m,idPrefix:p,idSeparator:b,name:v,onChange:x,onKeyChange:E,onDropPropertyClick:w,required:A,registry:C,wasPropertyKeyModified:W=!1}=s,{formContext:B,schemaUtils:V,globalUiOptions:J}=C,Z=at(d,J),le=Qe("FieldTemplate",C,Z),ce=Qe("DescriptionFieldTemplate",C,Z),he=Qe("FieldHelpTemplate",C,Z),ge=Qe("FieldErrorTemplate",C,Z),fe=V.retrieveSchema(u,h),ye=f[Wi],be=yo(V.toIdSchema(fe,ye,h,p,b),f),ve=(0,g.useCallback)((er,ms,tr)=>x(er,ms,tr||ye),[ye,x]),Me=xI(fe,Z,be,C),Fe=!!((e=Z.disabled)!==null&&e!==void 0?e:s.disabled),ke=!!((l=(a=(i=Z.readonly)!==null&&i!==void 0?i:s.readonly)!==null&&a!==void 0?a:s.schema.readOnly)!==null&&l!==void 0?l:fe.readOnly),Se=Z.hideError,je=Se===void 0?s.hideError:!!Se,pt=!!((c=Z.autofocus)!==null&&c!==void 0?c:s.autofocus);if(Object.keys(fe).length===0)return null;const et=V.getDisplayLabel(fe,d,J),{__errors:ct,...Tt}=m||{},vt=kc()(d,["ui:classNames","classNames","ui:style"]);ka in vt&&(vt[ka]=kc()(vt[ka],["classNames","style"]));const jt=(0,z.jsx)(Me,{...s,onChange:ve,idSchema:be,schema:fe,uiSchema:vt,disabled:Fe,readonly:ke,hideError:je,autofocus:pt,errorSchema:Tt,formContext:B,rawErrors:ct}),Ht=be[Wi];let kr;W?kr=v:kr=po in fe?v:Z.title||s.schema.title||fe.title||s.title||v;const ei=Z.description||s.schema.description||fe.description||"",Ai=Z.enableMarkdownInDescription?(0,z.jsx)(Lc,{children:ei}):ei,Tr=Z.help,ds=Z.widget==="hidden",Oi=["form-group","field",`field-${Ui(fe)}`];!je&&ct&&ct.length>0&&Oi.push("field-error has-error has-danger"),d!=null&&d.classNames&&Oi.push(d.classNames),Z.classNames&&Oi.push(Z.classNames);const ti=(0,z.jsx)(he,{help:Tr,idSchema:be,schema:fe,uiSchema:d,hasErrors:!je&&ct&&ct.length>0,registry:C}),Pr=je||(fe.anyOf||fe.oneOf)&&!V.isSelect(fe)?void 0:(0,z.jsx)(ge,{errors:ct,errorSchema:m,idSchema:be,schema:fe,uiSchema:d,registry:C}),Ci={description:(0,z.jsx)(ce,{id:Cs(Ht),description:Ai,schema:fe,uiSchema:d,registry:C}),rawDescription:ei,help:ti,rawHelp:typeof Tr=="string"?Tr:void 0,errors:Pr,rawErrors:je?void 0:ct,id:Ht,label:kr,hidden:ds,onChange:x,onKeyChange:E,onDropPropertyClick:w,required:A,disabled:Fe,readonly:ke,hideError:je,displayLabel:et,classNames:Oi.join(" ").trim(),style:Z.style,formContext:B,formData:h,schema:fe,uiSchema:d,registry:C},ni=C.fields.AnyOfField,hs=C.fields.OneOfField,ea=(d==null?void 0:d["ui:field"])&&(d==null?void 0:d["ui:fieldReplacesAnyOrOneOf"])===!0;return(0,z.jsx)(le,{...Ci,children:(0,z.jsxs)(z.Fragment,{children:[jt,fe.anyOf&&!ea&&!V.isSelect(fe)&&(0,z.jsx)(ni,{name:v,disabled:Fe,readonly:ke,hideError:je,errorSchema:m,formData:h,formContext:B,idPrefix:p,idSchema:be,idSeparator:b,onBlur:s.onBlur,onChange:s.onChange,onFocus:s.onFocus,options:fe.anyOf.map(er=>V.retrieveSchema(wr()(er)?er:{},h)),registry:C,schema:fe,uiSchema:d}),fe.oneOf&&!ea&&!V.isSelect(fe)&&(0,z.jsx)(hs,{name:v,disabled:Fe,readonly:ke,hideError:je,errorSchema:m,formData:h,formContext:B,idPrefix:p,idSchema:be,idSeparator:b,onBlur:s.onBlur,onChange:s.onChange,onFocus:s.onFocus,options:fe.oneOf.map(er=>V.retrieveSchema(wr()(er)?er:{},h)),registry:C,schema:fe,uiSchema:d})]})})}class wI extends g.Component{shouldComponentUpdate(e){return!On(this.props,e)}render(){return(0,z.jsx)(EI,{...this.props})}}const AI=wI;function OI(s){var e;const{schema:i,name:a,uiSchema:l,idSchema:c,formData:u,required:f,disabled:d=!1,readonly:h=!1,autofocus:m=!1,onChange:p,onBlur:b,onFocus:v,registry:x,rawErrors:E,hideError:w}=s,{title:A,format:C}=i,{widgets:W,formContext:B,schemaUtils:V,globalUiOptions:J}=x,Z=V.isSelect(i)?Ic(i):void 0;let le=Z?"select":"text";C&&MD(i,C,W)&&(le=C);const{widget:ce=le,placeholder:he="",title:ge,...fe}=at(l),ye=V.getDisplayLabel(i,l,J),be=(e=ge!=null?ge:A)!==null&&e!==void 0?e:a,ve=di(i,ce,W);return(0,z.jsx)(ve,{options:{...fe,enumOptions:Z},schema:i,uiSchema:l,id:c.$id,name:a,label:be,hideLabel:!ye,hideError:w,value:u,onChange:p,onBlur:b,onFocus:v,required:f,disabled:d,readonly:h,formContext:B,autofocus:m,registry:x,placeholder:he,rawErrors:E})}const CI=OI;function kI(s){const{formData:e,onChange:i}=s;return(0,g.useEffect)(()=>{e===void 0&&i(null)},[e,i]),null}const TI=kI;function PI(){return{AnyOfField:Tv,ArrayField:oM,BooleanField:lM,NumberField:hM,ObjectField:bI,OneOfField:Tv,SchemaField:AI,StringField:CI,NullField:TI}}const DI=PI;function MI(s){const{idSchema:e,description:i,registry:a,schema:l,uiSchema:c}=s,u=at(c,a.globalUiOptions),{label:f=!0}=u;if(!i||!f)return null;const d=Qe("DescriptionFieldTemplate",a,u);return(0,z.jsx)(d,{id:Cs(e),description:i,schema:l,uiSchema:c,registry:a})}function II(s){const{children:e,className:i,disabled:a,hasToolbar:l,hasMoveDown:c,hasMoveUp:u,hasRemove:f,hasCopy:d,index:h,onCopyIndexClick:m,onDropIndexClick:p,onReorderClick:b,readonly:v,registry:x,uiSchema:E}=s,{CopyButton:w,MoveDownButton:A,MoveUpButton:C,RemoveButton:W}=x.templates.ButtonTemplates,B={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return(0,z.jsxs)("div",{className:i,children:[(0,z.jsx)("div",{className:l?"col-xs-9":"col-xs-12",children:e}),l&&(0,z.jsx)("div",{className:"col-xs-3 array-item-toolbox",children:(0,z.jsxs)("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(u||c)&&(0,z.jsx)(C,{style:B,disabled:a||v||!u,onClick:b(h,h-1),uiSchema:E,registry:x}),(u||c)&&(0,z.jsx)(A,{style:B,disabled:a||v||!c,onClick:b(h,h+1),uiSchema:E,registry:x}),d&&(0,z.jsx)(w,{style:B,disabled:a||v,onClick:m(h),uiSchema:E,registry:x}),f&&(0,z.jsx)(W,{style:B,disabled:a||v,onClick:p(h),uiSchema:E,registry:x})]})})]})}function RI(s){const{canAdd:e,className:i,disabled:a,idSchema:l,uiSchema:c,items:u,onAddClick:f,readonly:d,registry:h,required:m,schema:p,title:b}=s,v=at(c),x=Qe("ArrayFieldDescriptionTemplate",h,v),E=Qe("ArrayFieldItemTemplate",h,v),w=Qe("ArrayFieldTitleTemplate",h,v),{ButtonTemplates:{AddButton:A}}=h.templates;return(0,z.jsxs)("fieldset",{className:i,id:l.$id,children:[(0,z.jsx)(w,{idSchema:l,title:v.title||b,required:m,schema:p,uiSchema:c,registry:h}),(0,z.jsx)(x,{idSchema:l,description:v.description||p.description,schema:p,uiSchema:c,registry:h}),(0,z.jsx)("div",{className:"row array-item-list",children:u&&u.map(({key:C,...W})=>(0,z.jsx)(E,{...W},C))}),e&&(0,z.jsx)(A,{className:"array-item-add",onClick:f,disabled:a||d,uiSchema:c,registry:h})]})}function NI(s){const{idSchema:e,title:i,schema:a,uiSchema:l,required:c,registry:u}=s,f=at(l,u.globalUiOptions),{label:d=!0}=f;if(!i||!d)return null;const h=Qe("TitleFieldTemplate",u,f);return(0,z.jsx)(h,{id:Vd(e),title:i,required:c,schema:a,uiSchema:l,registry:u})}function FI(s){const{id:e,name:i,value:a,readonly:l,disabled:c,autofocus:u,onBlur:f,onFocus:d,onChange:h,onChangeOverride:m,options:p,schema:b,uiSchema:v,formContext:x,registry:E,rawErrors:w,type:A,hideLabel:C,hideError:W,...B}=s;if(!e)throw console.log("No id for",s),new Error(`no id for props ${JSON.stringify(s)}`);const V={...B,...vv(b,A,p)};let J;V.type==="number"||V.type==="integer"?J=a||a===0?a:"":J=a==null?"":a;const Z=(0,g.useCallback)(({target:{value:he}})=>h(he===""?p.emptyValue:he),[h,p]),le=(0,g.useCallback)(({target:he})=>f(e,he&&he.value),[f,e]),ce=(0,g.useCallback)(({target:he})=>d(e,he&&he.value),[d,e]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("input",{id:e,name:e,className:"form-control",readOnly:l,disabled:c,autoFocus:u,value:J,...V,list:b.examples?Ia(e):void 0,onChange:m||Z,onBlur:le,onFocus:ce,"aria-describedby":Yn(e,!!b.examples)}),Array.isArray(b.examples)&&(0,z.jsx)("datalist",{id:Ia(e),children:b.examples.concat(b.default&&!b.examples.includes(b.default)?[b.default]:[]).map(he=>(0,z.jsx)("option",{value:he},he))},`datalist_${e}`)]})}function LI({uiSchema:s}){const{submitText:e,norender:i,props:a={}}=Sv(s);return i?null:(0,z.jsx)("div",{children:(0,z.jsx)("button",{type:"submit",...a,className:`btn btn-info ${a.className||""}`,children:e})})}function $a(s){const{iconType:e="default",icon:i,className:a,uiSchema:l,registry:c,...u}=s;return(0,z.jsx)("button",{type:"button",className:`btn btn-${e} ${a}`,...u,children:(0,z.jsx)("i",{className:`glyphicon glyphicon-${i}`})})}function $I(s){const{registry:{translateString:e}}=s;return(0,z.jsx)($a,{title:e(lt.CopyButton),className:"array-item-copy",...s,icon:"copy"})}function BI(s){const{registry:{translateString:e}}=s;return(0,z.jsx)($a,{title:e(lt.MoveDownButton),className:"array-item-move-down",...s,icon:"arrow-down"})}function jI(s){const{registry:{translateString:e}}=s;return(0,z.jsx)($a,{title:e(lt.MoveUpButton),className:"array-item-move-up",...s,icon:"arrow-up"})}function WI(s){const{registry:{translateString:e}}=s;return(0,z.jsx)($a,{title:e(lt.RemoveButton),className:"array-item-remove",...s,iconType:"danger",icon:"remove"})}function VI({className:s,onClick:e,disabled:i,registry:a}){const{translateString:l}=a;return(0,z.jsx)("div",{className:"row",children:(0,z.jsx)("p",{className:`col-xs-3 col-xs-offset-9 text-right ${s}`,children:(0,z.jsx)($a,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:l(lt.AddButton),onClick:e,disabled:i,registry:a})})})}function zI(){return{SubmitButton:LI,AddButton:VI,CopyButton:$I,MoveDownButton:BI,MoveUpButton:jI,RemoveButton:WI}}const UI=zI;function HI(s){const{id:e,description:i}=s;return i?typeof i=="string"?(0,z.jsx)("p",{id:e,className:"field-description",children:i}):(0,z.jsx)("div",{id:e,className:"field-description",children:i}):null}function KI({errors:s,registry:e}){const{translateString:i}=e;return(0,z.jsxs)("div",{className:"panel panel-danger errors",children:[(0,z.jsx)("div",{className:"panel-heading",children:(0,z.jsx)("h3",{className:"panel-title",children:i(lt.ErrorsLabel)})}),(0,z.jsx)("ul",{className:"list-group",children:s.map((a,l)=>(0,z.jsx)("li",{className:"list-group-item text-danger",children:a.stack},l))})]})}const GI="*";function r1(s){const{label:e,required:i,id:a}=s;return e?(0,z.jsxs)("label",{className:"control-label",htmlFor:a,children:[e,i&&(0,z.jsx)("span",{className:"required",children:GI})]}):null}function YI(s){const{id:e,label:i,children:a,errors:l,help:c,description:u,hidden:f,required:d,displayLabel:h,registry:m,uiSchema:p}=s,b=at(p),v=Qe("WrapIfAdditionalTemplate",m,b);return f?(0,z.jsx)("div",{className:"hidden",children:a}):(0,z.jsxs)(v,{...s,children:[h&&(0,z.jsx)(r1,{label:i,required:d,id:e}),h&&u?u:null,a,l,c]})}const JI=YI;function ZI(s){const{errors:e=[],idSchema:i}=s;if(e.length===0)return null;const a=jd(i);return(0,z.jsx)("div",{children:(0,z.jsx)("ul",{id:a,className:"error-detail bs-callout bs-callout-info",children:e.filter(l=>!!l).map((l,c)=>(0,z.jsx)("li",{className:"text-danger",children:l},c))})})}function _I(s){const{idSchema:e,help:i}=s;if(!i)return null;const a=Wd(e);return typeof i=="string"?(0,z.jsx)("p",{id:a,className:"help-block",children:i}):(0,z.jsx)("div",{id:a,className:"help-block",children:i})}function XI(s){const{description:e,disabled:i,formData:a,idSchema:l,onAddClick:c,properties:u,readonly:f,registry:d,required:h,schema:m,title:p,uiSchema:b}=s,v=at(b),x=Qe("TitleFieldTemplate",d,v),E=Qe("DescriptionFieldTemplate",d,v),{ButtonTemplates:{AddButton:w}}=d.templates;return(0,z.jsxs)("fieldset",{id:l.$id,children:[p&&(0,z.jsx)(x,{id:Vd(l),title:p,required:h,schema:m,uiSchema:b,registry:d}),e&&(0,z.jsx)(E,{id:Cs(l),description:e,schema:m,uiSchema:b,registry:d}),u.map(A=>A.content),qy(m,b,a)&&(0,z.jsx)(w,{className:"object-property-expand",onClick:c(m),disabled:i||f,uiSchema:b,registry:d})]})}const QI="*";function qI(s){const{id:e,title:i,required:a}=s;return(0,z.jsxs)("legend",{id:e,children:[i,a&&(0,z.jsx)("span",{className:"required",children:QI})]})}function eR(s){const{schema:e,idSchema:i,reason:a,registry:l}=s,{translateString:c}=l;let u=lt.UnsupportedField;const f=[];return i&&i.$id&&(u=lt.UnsupportedFieldWithId,f.push(i.$id)),a&&(u=u===lt.UnsupportedField?lt.UnsupportedFieldWithReason:lt.UnsupportedFieldWithIdAndReason,f.push(a)),(0,z.jsxs)("div",{className:"unsupported-field",children:[(0,z.jsx)("p",{children:(0,z.jsx)(Lc,{children:c(u,f)})}),e&&(0,z.jsx)("pre",{children:JSON.stringify(e,null,2)})]})}const tR=eR;function nR(s){const{id:e,classNames:i,style:a,disabled:l,label:c,onKeyChange:u,onDropPropertyClick:f,readonly:d,required:h,schema:m,children:p,uiSchema:b,registry:v}=s,{templates:x,translateString:E}=v,{RemoveButton:w}=x.ButtonTemplates,A=E(lt.KeyLabel,[c]);return po in m?(0,z.jsx)("div",{className:i,style:a,children:(0,z.jsxs)("div",{className:"row",children:[(0,z.jsx)("div",{className:"col-xs-5 form-additional",children:(0,z.jsxs)("div",{className:"form-group",children:[(0,z.jsx)(r1,{label:A,required:h,id:`${e}-key`}),(0,z.jsx)("input",{className:"form-control",type:"text",id:`${e}-key`,onBlur:({target:W})=>u(W&&W.value),defaultValue:c})]})}),(0,z.jsx)("div",{className:"form-additional form-group col-xs-5",children:p}),(0,z.jsx)("div",{className:"col-xs-2",children:(0,z.jsx)(w,{className:"array-item-remove btn-block",style:{border:"0"},disabled:l||d,onClick:f(c),uiSchema:b,registry:v})})]})}):(0,z.jsx)("div",{className:i,style:a,children:p})}function rR(){return{ArrayFieldDescriptionTemplate:MI,ArrayFieldItemTemplate:II,ArrayFieldTemplate:RI,ArrayFieldTitleTemplate:NI,ButtonTemplates:UI(),BaseInputTemplate:FI,DescriptionFieldTemplate:HI,ErrorListTemplate:KI,FieldTemplate:JI,FieldErrorTemplate:ZI,FieldHelpTemplate:_I,ObjectFieldTemplate:XI,TitleFieldTemplate:qI,UnsupportedFieldTemplate:tR,WrapIfAdditionalTemplate:nR}}const iR=rR;function sR(s,e){const i=[];for(let a=s;a<=e;a++)i.push({value:a,label:Ki(a,2)});return i}function oR(s){return Object.values(s).every(e=>e!==-1)}function aR({type:s,range:e,value:i,select:a,rootId:l,name:c,disabled:u,readonly:f,autofocus:d,registry:h,onBlur:m,onFocus:p}){const b=l+"_"+s,{SelectWidget:v}=h.widgets;return(0,z.jsx)(v,{schema:{type:"integer"},id:b,name:c,className:"form-control",options:{enumOptions:sR(e[0],e[1])},placeholder:s,value:i,disabled:u,readonly:f,autofocus:d,onChange:x=>a(s,x),onBlur:m,onFocus:p,registry:h,label:"","aria-describedby":Yn(l)})}function lR({time:s=!1,disabled:e=!1,readonly:i=!1,autofocus:a=!1,options:l,id:c,name:u,registry:f,onBlur:d,onFocus:h,onChange:m,value:p}){const{translateString:b}=f,[v,x]=(0,g.useState)(p),[E,w]=(0,g.useReducer)((B,V)=>({...B,...V}),zd(p,s));(0,g.useEffect)(()=>{const B=Ev(E,s);oR(E)&&B!==p?m(B):v!==p&&(x(p),w(zd(p,s)))},[s,p,m,E,v]);const A=(0,g.useCallback)((B,V)=>{w({[B]:V})},[]),C=(0,g.useCallback)(B=>{if(B.preventDefault(),e||i)return;const V=zd(new Date().toJSON(),s);m(Ev(V,s))},[e,i,s]),W=(0,g.useCallback)(B=>{B.preventDefault(),!(e||i)&&m(void 0)},[e,i,m]);return(0,z.jsxs)("ul",{className:"list-inline",children:[kD(E,s,l.yearsRange,l.format).map((B,V)=>(0,z.jsx)("li",{className:"list-inline-item",children:(0,z.jsx)(aR,{rootId:c,name:u,select:A,...B,disabled:e,readonly:i,registry:f,onBlur:d,onFocus:h,autofocus:a&&V===0})},V)),(l.hideNowButton!=="undefined"?!l.hideNowButton:!0)&&(0,z.jsx)("li",{className:"list-inline-item",children:(0,z.jsx)("a",{href:"#",className:"btn btn-info btn-now",onClick:C,children:b(lt.NowLabel)})}),(l.hideClearButton!=="undefined"?!l.hideClearButton:!0)&&(0,z.jsx)("li",{className:"list-inline-item",children:(0,z.jsx)("a",{href:"#",className:"btn btn-warning btn-clear",onClick:W,children:b(lt.ClearLabel)})})]})}const cR=lR;function uR({time:s=!0,...e}){const{AltDateWidget:i}=e.registry.widgets;return(0,z.jsx)(i,{time:s,...e})}const fR=uR;function dR({schema:s,uiSchema:e,options:i,id:a,value:l,disabled:c,readonly:u,label:f,hideLabel:d,autofocus:h=!1,onBlur:m,onFocus:p,onChange:b,registry:v}){var x;const E=Qe("DescriptionFieldTemplate",v,i),w=Ra(s),A=(0,g.useCallback)(V=>b(V.target.checked),[b]),C=(0,g.useCallback)(V=>m(a,V.target.checked),[m,a]),W=(0,g.useCallback)(V=>p(a,V.target.checked),[p,a]),B=(x=i.description)!==null&&x!==void 0?x:s.description;return(0,z.jsxs)("div",{className:`checkbox ${c||u?"disabled":""}`,children:[!d&&!!B&&(0,z.jsx)(E,{id:Cs(a),description:B,schema:s,uiSchema:e,registry:v}),(0,z.jsxs)("label",{children:[(0,z.jsx)("input",{type:"checkbox",id:a,name:a,checked:typeof l=="undefined"?!1:l,required:w,disabled:c||u,autoFocus:h,onChange:A,onBlur:C,onFocus:W,"aria-describedby":Yn(a)}),ks((0,z.jsx)("span",{children:f}),d)]})]})}const hR=dR;function mR({id:s,disabled:e,options:{inline:i=!1,enumOptions:a,enumDisabled:l,emptyValue:c},value:u,autofocus:f=!1,readonly:d,onChange:h,onBlur:m,onFocus:p}){const b=Array.isArray(u)?u:[u],v=(0,g.useCallback)(({target:E})=>m(s,sn(E&&E.value,a,c)),[m,s]),x=(0,g.useCallback)(({target:E})=>p(s,sn(E&&E.value,a,c)),[p,s]);return(0,z.jsx)("div",{className:"checkboxes",id:s,children:Array.isArray(a)&&a.map((E,w)=>{const A=Dc(E.value,b),C=Array.isArray(l)&&l.indexOf(E.value)!==-1,W=e||C||d?"disabled":"",B=J=>{J.target.checked?h(gv(w,b,a)):h(pv(w,b,a))},V=(0,z.jsxs)("span",{children:[(0,z.jsx)("input",{type:"checkbox",id:Mc(s,w),name:s,checked:A,value:String(w),disabled:e||C||d,autoFocus:f&&w===0,onChange:B,onBlur:v,onFocus:x,"aria-describedby":Yn(s)}),(0,z.jsx)("span",{children:E.label})]});return i?(0,z.jsx)("label",{className:`checkbox-inline ${W}`,children:V},w):(0,z.jsx)("div",{className:`checkbox ${W}`,children:(0,z.jsx)("label",{children:V})},w)})})}const pR=mR;function gR(s){const{disabled:e,readonly:i,options:a,registry:l}=s,c=Qe("BaseInputTemplate",l,a);return(0,z.jsx)(c,{type:"color",...s,disabled:e||i})}function yR(s){const{onChange:e,options:i,registry:a}=s,l=Qe("BaseInputTemplate",a,i),c=(0,g.useCallback)(u=>e(u||void 0),[e]);return(0,z.jsx)(l,{type:"date",...s,onChange:c})}function vR(s){const{onChange:e,value:i,options:a,registry:l}=s,c=Qe("BaseInputTemplate",l,a);return(0,z.jsx)(c,{type:"datetime-local",...s,value:BD(i),onChange:u=>e(ID(u))})}function bR(s){const{options:e,registry:i}=s,a=Qe("BaseInputTemplate",i,e);return(0,z.jsx)(a,{type:"email",...s})}function SR(s,e){return s===null?null:s.replace(";base64",`;name=${encodeURIComponent(e)};base64`)}function xR(s){const{name:e,size:i,type:a}=s;return new Promise((l,c)=>{const u=new window.FileReader;u.onerror=c,u.onload=f=>{var d;typeof((d=f.target)===null||d===void 0?void 0:d.result)=="string"?l({dataURL:SR(f.target.result,e),name:e,size:i,type:a}):l({dataURL:null,name:e,size:i,type:a})},u.readAsDataURL(s)})}function ER(s){return Promise.all(Array.from(s).map(xR))}function wR({fileInfo:s,registry:e}){const{translateString:i}=e,{dataURL:a,type:l,name:c}=s;return a?["image/jpeg","image/png"].includes(l)?(0,z.jsx)("img",{src:a,style:{maxWidth:"100%"},className:"file-preview"}):(0,z.jsxs)(z.Fragment,{children:[" ",(0,z.jsx)("a",{download:`preview-${c}`,href:a,className:"file-download",children:i(lt.PreviewLabel)})]}):null}function AR({filesInfo:s,registry:e,preview:i,onRemove:a,options:l}){if(s.length===0)return null;const{translateString:c}=e,{RemoveButton:u}=Qe("ButtonTemplates",e,l);return(0,z.jsx)("ul",{className:"file-info",children:s.map((f,d)=>{const{name:h,size:m,type:p}=f,b=()=>a(d);return(0,z.jsxs)("li",{children:[(0,z.jsx)(Lc,{children:c(lt.FilesInfo,[h,p,String(m)])}),i&&(0,z.jsx)(wR,{fileInfo:f,registry:e}),(0,z.jsx)(u,{onClick:b,registry:e})]},d)})})}function OR(s){return s.reduce((e,i)=>{if(!i)return e;try{const{blob:a,name:l}=xD(i);return[...e,{dataURL:i,name:l,size:a.size,type:a.type}]}catch{return e}},[])}function CR(s){const{disabled:e,readonly:i,required:a,multiple:l,onChange:c,value:u,options:f,registry:d}=s,h=Qe("BaseInputTemplate",d,f),m=(0,g.useCallback)(v=>{v.target.files&&ER(v.target.files).then(x=>{const E=x.map(w=>w.dataURL);c(l?u.concat(E[0]):E[0])})},[l,u,c]),p=(0,g.useMemo)(()=>OR(Array.isArray(u)?u:[u]),[u]),b=(0,g.useCallback)(v=>{if(l){const x=u.filter((E,w)=>w!==v);c(x)}else c(void 0)},[l,u,c]);return(0,z.jsxs)("div",{children:[(0,z.jsx)(h,{...s,disabled:e||i,type:"file",required:u?!1:a,onChangeOverride:m,value:"",accept:f.accept?String(f.accept):void 0}),(0,z.jsx)(AR,{filesInfo:p,onRemove:b,registry:d,preview:f.filePreview,options:f})]})}const kR=CR;function TR({id:s,value:e}){return(0,z.jsx)("input",{type:"hidden",id:s,name:s,value:typeof e=="undefined"?"":e})}const PR=TR;function DR(s){const{options:e,registry:i}=s,a=Qe("BaseInputTemplate",i,e);return(0,z.jsx)(a,{type:"password",...s})}function MR({options:s,value:e,required:i,disabled:a,readonly:l,autofocus:c=!1,onBlur:u,onFocus:f,onChange:d,id:h}){const{enumOptions:m,enumDisabled:p,inline:b,emptyValue:v}=s,x=(0,g.useCallback)(({target:w})=>u(h,sn(w&&w.value,m,v)),[u,h]),E=(0,g.useCallback)(({target:w})=>f(h,sn(w&&w.value,m,v)),[f,h]);return(0,z.jsx)("div",{className:"field-radio-group",id:h,children:Array.isArray(m)&&m.map((w,A)=>{const C=Dc(w.value,e),W=Array.isArray(p)&&p.indexOf(w.value)!==-1,B=a||W||l?"disabled":"",V=()=>d(w.value),J=(0,z.jsxs)("span",{children:[(0,z.jsx)("input",{type:"radio",id:Mc(h,A),checked:C,name:h,required:i,value:String(A),disabled:a||W||l,autoFocus:c&&A===0,onChange:V,onBlur:x,onFocus:E,"aria-describedby":Yn(h)}),(0,z.jsx)("span",{children:w.label})]});return b?(0,z.jsx)("label",{className:`radio-inline ${B}`,children:J},A):(0,z.jsx)("div",{className:`radio ${B}`,children:(0,z.jsx)("label",{children:J})},A)})})}const IR=MR;function RR(s){const{value:e,registry:{templates:{BaseInputTemplate:i}}}=s;return(0,z.jsxs)("div",{className:"field-range-wrapper",children:[(0,z.jsx)(i,{type:"range",...s}),(0,z.jsx)("span",{className:"range-view",children:e})]})}function eh(s,e){return e?Array.from(s.target.options).slice().filter(i=>i.selected).map(i=>i.value):s.target.value}function NR({schema:s,id:e,options:i,value:a,required:l,disabled:c,readonly:u,multiple:f=!1,autofocus:d=!1,onChange:h,onBlur:m,onFocus:p,placeholder:b}){const{enumOptions:v,enumDisabled:x,emptyValue:E}=i,w=f?[]:"",A=(0,g.useCallback)(V=>{const J=eh(V,f);return p(e,sn(J,v,E))},[p,e,s,f,i]),C=(0,g.useCallback)(V=>{const J=eh(V,f);return m(e,sn(J,v,E))},[m,e,s,f,i]),W=(0,g.useCallback)(V=>{const J=eh(V,f);return h(sn(J,v,E))},[h,s,f,i]),B=$d(a,v,f);return(0,z.jsxs)("select",{id:e,name:e,multiple:f,className:"form-control",value:typeof B=="undefined"?w:B,required:l,disabled:c||u,autoFocus:d,onBlur:C,onFocus:A,onChange:W,"aria-describedby":Yn(e),children:[!f&&s.default===void 0&&(0,z.jsx)("option",{value:"",children:b}),Array.isArray(v)&&v.map(({value:V,label:J},Z)=>{const le=x&&x.indexOf(V)!==-1;return(0,z.jsx)("option",{value:String(Z),disabled:le,children:J},Z)})]})}const FR=NR;function i1({id:s,options:e={},placeholder:i,value:a,required:l,disabled:c,readonly:u,autofocus:f=!1,onChange:d,onBlur:h,onFocus:m}){const p=(0,g.useCallback)(({target:{value:x}})=>d(x===""?e.emptyValue:x),[d,e.emptyValue]),b=(0,g.useCallback)(({target:x})=>h(s,x&&x.value),[h,s]),v=(0,g.useCallback)(({target:x})=>m(s,x&&x.value),[s,m]);return(0,z.jsx)("textarea",{id:s,name:s,className:"form-control",value:a||"",placeholder:i,required:l,disabled:c,readOnly:u,autoFocus:f,rows:e.rows,onBlur:b,onFocus:v,onChange:p,"aria-describedby":Yn(s)})}i1.defaultProps={autofocus:!1,options:{}};const LR=i1;function $R(s){const{options:e,registry:i}=s,a=Qe("BaseInputTemplate",i,e);return(0,z.jsx)(a,{...s})}function BR(s){const{onChange:e,options:i,registry:a}=s,l=Qe("BaseInputTemplate",a,i),c=(0,g.useCallback)(u=>e(u?`${u}:00`:void 0),[e]);return(0,z.jsx)(l,{type:"time",...s,onChange:c})}function jR(s){const{options:e,registry:i}=s,a=Qe("BaseInputTemplate",i,e);return(0,z.jsx)(a,{type:"url",...s})}function WR(s){const{options:e,registry:i}=s,a=Qe("BaseInputTemplate",i,e);return(0,z.jsx)(a,{type:"number",...s})}function VR(){return{AltDateWidget:cR,AltDateTimeWidget:fR,CheckboxWidget:hR,CheckboxesWidget:pR,ColorWidget:gR,DateWidget:yR,DateTimeWidget:vR,EmailWidget:bR,FileWidget:kR,HiddenWidget:PR,PasswordWidget:DR,RadioWidget:IR,RangeWidget:RR,SelectWidget:FR,TextWidget:$R,TextareaWidget:LR,TimeWidget:BR,UpDownWidget:WR,URLWidget:jR}}const zR=VR;function UR(){return{fields:DI(),templates:iR(),widgets:zR(),rootSchema:{},formContext:{},translateString:wD}}class HR extends g.Component{constructor(e){if(super(e),this.getUsedFormData=(i,a)=>{if(a.length===0&&typeof i!="object")return i;const l=tM()(i,a);return Array.isArray(i)?Object.keys(l).map(c=>l[c]):l},this.getFieldNames=(i,a)=>{const l=(c,u=[],f=[[]])=>(Object.keys(c).forEach(d=>{if(typeof c[d]=="object"){const h=f.map(m=>[...m,d]);c[d][Od]&&c[d][Oc]!==""?u.push(c[d][Oc]):l(c[d],u,h)}else d===Oc&&c[d]!==""&&f.forEach(h=>{const m=$e()(a,h);(typeof m!="object"||zi()(m)||Array.isArray(m)&&m.every(p=>typeof p!="object"))&&u.push(h)})}),u);return l(i)},this.onChange=(i,a,l)=>{const{extraErrors:c,omitExtraData:u,liveOmit:f,noValidate:d,liveValidate:h,onChange:m}=this.props,{schemaUtils:p,schema:b,retrievedSchema:v}=this.state;(Lt(i)||Array.isArray(i))&&(i=this.getStateFromProps(this.props,i,v).formData);const x=!d&&h;let E={formData:i,schema:b},w=i,A;if(u===!0&&f===!0){A=p.retrieveSchema(b,i);const C=p.toPathSchema(A,"",i),W=this.getFieldNames(C,i);w=this.getUsedFormData(i,W),E={formData:w}}if(x){const C=this.validate(w,b,p,v);let W=C.errors,B=C.errorSchema;const V=W,J=B;if(c){const Z=Rc(C,c);B=Z.errorSchema,W=Z.errors}E={formData:w,errors:W,errorSchema:B,schemaValidationErrors:V,schemaValidationErrorSchema:J}}else if(!d&&a){const C=c?yo(a,c,"preventDuplicates"):a;E={formData:w,errorSchema:C,errors:Na(C)}}A&&(E.retrievedSchema=A),this.setState(E,()=>m&&m({...this.state,...E},l))},this.reset=()=>{const{onChange:i}=this.props,c={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(c,()=>i&&i({...this.state,...c}))},this.onBlur=(i,a)=>{const{onBlur:l}=this.props;l&&l(i,a)},this.onFocus=(i,a)=>{const{onFocus:l}=this.props;l&&l(i,a)},this.onSubmit=i=>{if(i.preventDefault(),i.target!==i.currentTarget)return;i.persist();const{omitExtraData:a,extraErrors:l,noValidate:c,onSubmit:u}=this.props;let{formData:f}=this.state;const{schema:d,schemaUtils:h}=this.state;if(a===!0){const m=h.retrieveSchema(d,f),p=h.toPathSchema(m,"",f),b=this.getFieldNames(p,f);f=this.getUsedFormData(f,b)}if(c||this.validateForm()){const m=l||{},p=l?Na(l):[];this.setState({formData:f,errors:p,errorSchema:m,schemaValidationErrors:[],schemaValidationErrorSchema:{}},()=>{u&&u({...this.state,formData:f,status:"submitted"},i)})}},this.submit=()=>{if(this.formElement.current){const i=new CustomEvent("submit",{cancelable:!0});i.preventDefault(),this.formElement.current.dispatchEvent(i),this.formElement.current.requestSubmit()}},!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!On(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=(0,g.createRef)()}getSnapshotBeforeUpdate(e,i){if(!On(this.props,e)){const a=!On(e.schema,this.props.schema),l=!On(e.formData,this.props.formData),c=this.getStateFromProps(this.props,this.props.formData,a||l?void 0:this.state.retrievedSchema,a),u=!On(c,i);return{nextState:c,shouldUpdate:u}}return{shouldUpdate:!1}}componentDidUpdate(e,i,a){if(a.shouldUpdate){const{nextState:l}=a;!On(l.formData,this.props.formData)&&!On(l.formData,i.formData)&&this.props.onChange&&this.props.onChange(l),this.setState(l)}}getStateFromProps(e,i,a,l=!1){const c=this.state||{},u="schema"in e?e.schema:this.props.schema,f=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},d=typeof i!="undefined",h="liveValidate"in e?e.liveValidate:this.props.liveValidate,m=d&&!e.noValidate&&h,p=u,b="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior;let v=c.schemaUtils;(!v||v.doesSchemaUtilsDiffer(e.validator,p,b))&&(v=SD(e.validator,p,b));const x=v.getDefaultFormState(u,i),E=a!=null?a:v.retrieveSchema(u,x),w=()=>e.noValidate||l?{errors:[],errorSchema:{}}:e.liveValidate?{errors:c.errors||[],errorSchema:c.errorSchema||{}}:{errors:c.schemaValidationErrors||[],errorSchema:c.schemaValidationErrorSchema||{}};let A,C,W=c.schemaValidationErrors,B=c.schemaValidationErrorSchema;if(m){const Z=this.validate(x,u,v,E);A=Z.errors,C=Z.errorSchema,W=A,B=C}else{const Z=w();A=Z.errors,C=Z.errorSchema}if(e.extraErrors){const Z=Rc({errorSchema:C,errors:A},e.extraErrors);C=Z.errorSchema,A=Z.errors}const V=v.toIdSchema(E,f["ui:rootFieldId"],x,e.idPrefix,e.idSeparator);return{schemaUtils:v,schema:u,uiSchema:f,idSchema:V,formData:x,edit:d,errors:A,errorSchema:C,schemaValidationErrors:W,schemaValidationErrorSchema:B,retrievedSchema:E}}shouldComponentUpdate(e,i){return FD(this,e,i)}validate(e,i=this.props.schema,a,l){const c=a||this.state.schemaUtils,{customValidate:u,transformErrors:f,uiSchema:d}=this.props,h=l!=null?l:c.retrieveSchema(i,e);return c.getValidator().validateFormData(e,h,u,f,d)}renderErrors(e){const{errors:i,errorSchema:a,schema:l,uiSchema:c}=this.state,{formContext:u}=this.props,f=at(c),d=Qe("ErrorListTemplate",e,f);return i&&i.length?(0,z.jsx)(d,{errors:i,errorSchema:a||{},schema:l,uiSchema:c,formContext:u,registry:e}):null}getRegistry(){var e;const{translateString:i,uiSchema:a={}}=this.props,{schemaUtils:l}=this.state,{fields:c,templates:u,widgets:f,formContext:d,translateString:h}=UR();return{fields:{...c,...this.props.fields},templates:{...u,...this.props.templates,ButtonTemplates:{...u.ButtonTemplates,...(e=this.props.templates)===null||e===void 0?void 0:e.ButtonTemplates}},widgets:{...f,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||d,schemaUtils:l,translateString:i||h,globalUiOptions:a[MP]}}focusOnError(e){const{idPrefix:i="root",idSeparator:a="_"}=this.props,{property:l}=e,c=wv()(l);c[0]===""?c[0]=i:c.unshift(i);const u=c.join(a);let f=this.formElement.current.elements[u];f||(f=this.formElement.current.querySelector(`input[id^=${u}`)),f&&f.length&&(f=f[0]),f&&f.focus()}validateForm(){const{extraErrors:e,extraErrorsBlockSubmit:i,focusOnFirstError:a,onError:l}=this.props,{formData:c,errors:u}=this.state,f=this.validate(c);let d=f.errors,h=f.errorSchema;const m=d,p=h,b=d.length>0||e&&i;if(b){if(e){const v=Rc(f,e);h=v.errorSchema,d=v.errors}a&&(typeof a=="function"?a(d[0]):this.focusOnError(d[0])),this.setState({errors:d,errorSchema:h,schemaValidationErrors:m,schemaValidationErrorSchema:p},()=>{l?l(d):console.error("Form validation failed",d)})}else u.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!b}render(){const{children:e,id:i,idPrefix:a,idSeparator:l,className:c="",tagName:u,name:f,method:d,target:h,action:m,autoComplete:p,enctype:b,acceptcharset:v,acceptCharset:x,noHtml5Validate:E=!1,disabled:w,readonly:A,formContext:C,showErrorList:W="top",_internalFormWrapper:B}=this.props,{schema:V,uiSchema:J,formData:Z,errorSchema:le,idSchema:ce}=this.state,he=this.getRegistry(),{SchemaField:ge}=he.fields,{SubmitButton:fe}=he.templates.ButtonTemplates,ye=B?u:void 0,be=B||u||"form";let{[Cc]:ve={}}=at(J);w&&(ve={...ve,props:{...ve.props,disabled:!0}});const Me={[ka]:{[Cc]:ve}};return(0,z.jsxs)(be,{className:c||"rjsf",id:i,name:f,method:d,target:h,action:m,autoComplete:p,encType:b,acceptCharset:x||v,noValidate:E,onSubmit:this.onSubmit,as:ye,ref:this.formElement,children:[W==="top"&&this.renderErrors(he),(0,z.jsx)(ge,{name:"",schema:V,uiSchema:J,errorSchema:le,idSchema:ce,idPrefix:a,idSeparator:l,formContext:C,formData:Z,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:he,disabled:w,readonly:A}),e||(0,z.jsx)(fe,{uiSchema:Me,registry:he}),W==="bottom"&&this.renderErrors(he)]})}}function s1(s){return(0,g.forwardRef)(({fields:e,widgets:i,templates:a,...l},c)=>{var u;return e={...s==null?void 0:s.fields,...e},i={...s==null?void 0:s.widgets,...i},a={...s==null?void 0:s.templates,...a,ButtonTemplates:{...(u=s==null?void 0:s.templates)===null||u===void 0?void 0:u.ButtonTemplates,...a==null?void 0:a.ButtonTemplates}},(0,z.jsx)(HR,{...s,...l,fields:e,widgets:i,templates:a,ref:c})})}const tW=null,KR=s=>{const{id:e,children:i,classNames:a,style:l,disabled:c,displayLabel:u,hidden:f,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:p,required:b,rawErrors:v=[],errors:x,help:E,rawDescription:w,schema:A,uiSchema:C,registry:W}=s,B=at(C),V=Qe("WrapIfAdditionalTemplate",W,B);return f?g.createElement("div",{style:{display:"none"}},i):g.createElement(V,{classNames:a,style:l,disabled:c,id:e,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:p,required:b,schema:A,uiSchema:C,registry:W},g.createElement(T,{displayLabel:u,rawErrors:v,help:E,disabled:c,rawDescription:w,errors:x,required:b},i))},GR=(0,M.A)(s=>({markdownDescription:{fontSize:s.typography.caption.fontSize,margin:0,color:s.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),YR=s=>{const{id:e,description:i}=s,a=GR();return i?typeof i=="string"?g.createElement(y.h,{content:i,className:a.markdownDescription}):g.createElement(Ve.A,{id:e,variant:"subtitle2",style:{marginTop:"5px"}},i):null};var JR=S(18466);function ZR({uiSchema:s,registry:e,...i}){const{translateString:a}=e;return(0,z.jsx)(En.A,{title:a(lt.AddItemButton),...i,color:"primary",children:(0,z.jsx)(JR.A,{})})}function _R(s){const{children:e,disabled:i,hasToolbar:a,hasCopy:l,hasMoveDown:c,hasMoveUp:u,hasRemove:f,index:d,onCopyIndexClick:h,onDropIndexClick:m,onReorderClick:p,readonly:b,uiSchema:v,registry:x}=s,{CopyButton:E,MoveDownButton:w,MoveUpButton:A,RemoveButton:C}=x.templates.ButtonTemplates,W={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold",minWidth:0};return(0,z.jsxs)(Ce.A,{container:!0,alignItems:"center",children:[(0,z.jsx)(Ce.A,{item:!0,xs:!0,style:{overflow:"auto"},children:(0,z.jsx)(pe.A,{mb:2,children:(0,z.jsx)(st.A,{elevation:2,children:(0,z.jsx)(pe.A,{p:2,children:e})})})}),a&&(0,z.jsxs)(Ce.A,{item:!0,children:[(u||c)&&(0,z.jsx)(A,{style:W,disabled:i||b||!u,onClick:p(d,d-1),uiSchema:v,registry:x}),(u||c)&&(0,z.jsx)(w,{style:W,disabled:i||b||!c,onClick:p(d,d+1),uiSchema:v,registry:x}),l&&(0,z.jsx)(E,{style:W,disabled:i||b,onClick:h(d),uiSchema:v,registry:x}),f&&(0,z.jsx)(C,{style:W,disabled:i||b,onClick:m(d),uiSchema:v,registry:x})]})]})}function XR(s){const{canAdd:e,disabled:i,idSchema:a,uiSchema:l,items:c,onAddClick:u,readonly:f,registry:d,required:h,schema:m,title:p}=s,b=at(l),v=Qe("ArrayFieldDescriptionTemplate",d,b),x=Qe("ArrayFieldItemTemplate",d,b),E=Qe("ArrayFieldTitleTemplate",d,b),{ButtonTemplates:{AddButton:w}}=d.templates;return(0,z.jsx)(st.A,{elevation:2,children:(0,z.jsxs)(pe.A,{p:2,children:[(0,z.jsx)(E,{idSchema:a,title:b.title||p,schema:m,uiSchema:l,required:h,registry:d}),(0,z.jsx)(v,{idSchema:a,description:b.description||m.description,schema:m,uiSchema:l,registry:d}),c&&c.map(({key:A,...C})=>(0,z.jsx)(x,{...C},A)),e&&(0,z.jsx)(Ce.A,{container:!0,justifyContent:"flex-end",children:(0,z.jsx)(Ce.A,{item:!0,children:(0,z.jsx)(pe.A,{mt:2,children:(0,z.jsx)(w,{className:"array-item-add",onClick:u,disabled:i||f,uiSchema:l,registry:d})})})})]})})}const QR=["date","datetime-local","file","time"];function qR(s){const{id:e,name:i,placeholder:a,required:l,readonly:c,disabled:u,type:f,label:d,hideLabel:h,hideError:m,value:p,onChange:b,onChangeOverride:v,onBlur:x,onFocus:E,autofocus:w,options:A,schema:C,uiSchema:W,rawErrors:B=[],formContext:V,registry:J,InputLabelProps:Z,...le}=s,ce=vv(C,f,A),{step:he,min:ge,max:fe,...ye}=ce,be={inputProps:{step:he,min:ge,max:fe,...C.examples?{list:Ia(e)}:void 0},...ye},ve=({target:{value:Se}})=>b(Se===""?A.emptyValue:Se),Me=({target:Se})=>x(e,Se&&Se.value),Fe=({target:Se})=>E(e,Se&&Se.value),ke=QR.includes(f)?{...Z,shrink:!0}:Z;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(oc.A,{id:e,name:e,placeholder:a,label:ks(d||void 0,h,!1),autoFocus:w,required:l,disabled:u||c,...be,value:p||p===0?p:"",error:B.length>0,onChange:v||ve,onBlur:Me,onFocus:Fe,InputLabelProps:ke,...le,"aria-describedby":Yn(e,!!C.examples)}),Array.isArray(C.examples)&&(0,z.jsx)("datalist",{id:Ia(e),children:C.examples.concat(C.default&&!C.examples.includes(C.default)?[C.default]:[]).map(Se=>(0,z.jsx)("option",{value:Se},Se))})]})}function eN(s){const{id:e,description:i}=s;return i?(0,z.jsx)(Ve.A,{id:e,variant:"subtitle2",style:{marginTop:"5px"},children:i}):null}var o1=S(7147);function tN({errors:s,registry:e}){const{translateString:i}=e;return(0,z.jsx)(st.A,{elevation:2,children:(0,z.jsxs)(pe.A,{mb:2,p:2,children:[(0,z.jsx)(Ve.A,{variant:"h6",children:i(lt.ErrorsLabel)}),(0,z.jsx)(qs.A,{dense:!0,children:s.map((a,l)=>(0,z.jsxs)(Oa.A,{children:[(0,z.jsx)(Wn.A,{children:(0,z.jsx)(o1.A,{color:"error"})}),(0,z.jsx)(Vn.A,{primary:a.stack})]},l))})]})})}var nN=S(89019),rN=S(68594),iN=S(99594),sN=S(80113);function $c(s){const{icon:e,color:i,uiSchema:a,registry:l,...c}=s;return(0,z.jsx)(En.A,{...c,size:"small",color:i,children:e})}function oN(s){const{registry:{translateString:e}}=s;return(0,z.jsx)($c,{title:e(lt.CopyButton),...s,icon:(0,z.jsx)(iN.A,{fontSize:"small"})})}function aN(s){const{registry:{translateString:e}}=s;return(0,z.jsx)($c,{title:e(lt.MoveDownButton),...s,icon:(0,z.jsx)(rN.A,{fontSize:"small"})})}function lN(s){const{registry:{translateString:e}}=s;return(0,z.jsx)($c,{title:e(lt.MoveUpButton),...s,icon:(0,z.jsx)(nN.A,{fontSize:"small"})})}function cN(s){const{iconType:e,...i}=s,{registry:{translateString:a}}=i;return(0,z.jsx)($c,{title:a(lt.RemoveButton),...i,color:"secondary",icon:(0,z.jsx)(sN.A,{fontSize:e==="default"?"medium":"small"})})}var th=S(51253);function uN(s){const{errors:e=[],idSchema:i}=s;if(e.length===0)return null;const a=jd(i);return(0,z.jsx)(qs.A,{dense:!0,disablePadding:!0,children:e.map((l,c)=>(0,z.jsx)(Oa.A,{disableGutters:!0,children:(0,z.jsx)(th.A,{id:a,children:l})},c))})}function fN(s){const{idSchema:e,help:i}=s;if(!i)return null;const a=Wd(e);return(0,z.jsx)(th.A,{id:a,children:i})}function dN(s){const{id:e,children:i,classNames:a,style:l,disabled:c,displayLabel:u,hidden:f,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:p,required:b,rawErrors:v=[],errors:x,help:E,description:w,rawDescription:A,schema:C,uiSchema:W,registry:B}=s,V=at(W),J=Qe("WrapIfAdditionalTemplate",B,V);return f?(0,z.jsx)("div",{style:{display:"none"},children:i}):(0,z.jsx)(J,{classNames:a,style:l,disabled:c,id:e,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:p,required:b,schema:C,uiSchema:W,registry:B,children:(0,z.jsxs)(k.A,{fullWidth:!0,error:!!v.length,required:b,children:[i,u&&A?(0,z.jsx)(Ve.A,{variant:"caption",color:"textSecondary",children:w}):null,x,E]})})}function hN(s){const{description:e,title:i,properties:a,required:l,disabled:c,readonly:u,uiSchema:f,idSchema:d,schema:h,formData:m,onAddClick:p,registry:b}=s,v=at(f),x=Qe("TitleFieldTemplate",b,v),E=Qe("DescriptionFieldTemplate",b,v),{ButtonTemplates:{AddButton:w}}=b.templates;return(0,z.jsxs)(z.Fragment,{children:[i&&(0,z.jsx)(x,{id:Vd(d),title:i,required:l,schema:h,uiSchema:f,registry:b}),e&&(0,z.jsx)(E,{id:Cs(d),description:e,schema:h,uiSchema:f,registry:b}),(0,z.jsxs)(Ce.A,{container:!0,spacing:2,style:{marginTop:"10px"},children:[a.map((A,C)=>A.hidden?A.content:(0,z.jsx)(Ce.A,{item:!0,xs:12,style:{marginBottom:"10px"},children:A.content},C)),qy(h,f,m)&&(0,z.jsx)(Ce.A,{container:!0,justifyContent:"flex-end",children:(0,z.jsx)(Ce.A,{item:!0,children:(0,z.jsx)(w,{className:"object-property-expand",onClick:p(h),disabled:c||u,uiSchema:f,registry:b})})})]})]})}function mN({uiSchema:s}){const{submitText:e,norender:i,props:a={}}=Sv(s);return i?null:(0,z.jsx)(pe.A,{marginTop:3,children:(0,z.jsx)(Hn.A,{type:"submit",variant:"contained",color:"primary",...a,children:e})})}function pN({id:s,title:e}){return(0,z.jsxs)(pe.A,{id:s,mb:1,mt:1,children:[(0,z.jsx)(Ve.A,{variant:"h5",children:e}),(0,z.jsx)(si.A,{})]})}function gN(s){const{children:e,classNames:i,style:a,disabled:l,id:c,label:u,onDropPropertyClick:f,onKeyChange:d,readonly:h,required:m,schema:p,uiSchema:b,registry:v}=s,{templates:x,translateString:E}=v,{RemoveButton:w}=x.ButtonTemplates,A=E(lt.KeyLabel,[u]),C=po in p,W={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};if(!C)return(0,z.jsx)("div",{className:i,style:a,children:e});const B=({target:V})=>d(V.value);return(0,z.jsxs)(Ce.A,{container:!0,alignItems:"center",spacing:2,className:i,style:a,children:[(0,z.jsx)(Ce.A,{item:!0,xs:!0,children:(0,z.jsx)(oc.A,{fullWidth:!0,required:m,label:A,defaultValue:u,disabled:l||h,id:`${c}-key`,name:`${c}-key`,onBlur:h?void 0:B,type:"text"})}),(0,z.jsx)(Ce.A,{item:!0,xs:!0,children:e}),(0,z.jsx)(Ce.A,{item:!0,children:(0,z.jsx)(w,{iconType:"default",style:W,disabled:l||h,onClick:f(u),uiSchema:b,registry:v})})]},`${c}-key`)}function a1(){return{ArrayFieldItemTemplate:_R,ArrayFieldTemplate:XR,BaseInputTemplate:qR,ButtonTemplates:{AddButton:ZR,CopyButton:oN,MoveDownButton:aN,MoveUpButton:lN,RemoveButton:cN,SubmitButton:mN},DescriptionFieldTemplate:eN,ErrorListTemplate:tN,FieldErrorTemplate:uN,FieldHelpTemplate:fN,FieldTemplate:dN,ObjectFieldTemplate:hN,TitleFieldTemplate:pN,WrapIfAdditionalTemplate:gN}}const nW=a1();function yN(s){var e;const{schema:i,id:a,value:l,disabled:c,readonly:u,label:f="",hideLabel:d,autofocus:h,onChange:m,onBlur:p,onFocus:b,registry:v,options:x,uiSchema:E}=s,w=Qe("DescriptionFieldTemplate",v,x),A=Ra(i),C=(J,Z)=>m(Z),W=({target:{value:J}})=>p(a,J),B=({target:{value:J}})=>b(a,J),V=(e=x.description)!==null&&e!==void 0?e:i.description;return(0,z.jsxs)(z.Fragment,{children:[!d&&!!V&&(0,z.jsx)(w,{id:Cs(a),description:V,schema:i,uiSchema:E,registry:v}),(0,z.jsx)(sc.A,{control:(0,z.jsx)(Yf.A,{id:a,name:a,checked:typeof l=="undefined"?!1:!!l,required:A,disabled:c||u,autoFocus:h,onChange:C,onBlur:W,onFocus:B,"aria-describedby":Yn(a)}),label:ks(f,d,!1)})]})}var vN=S(12981),nh=S(91761);function bN({label:s,hideLabel:e,id:i,disabled:a,options:l,value:c,autofocus:u,readonly:f,required:d,onChange:h,onBlur:m,onFocus:p}){const{enumOptions:b,enumDisabled:v,inline:x,emptyValue:E}=l,w=Array.isArray(c)?c:[c],A=B=>({target:{checked:V}})=>{h(V?gv(B,w,b):pv(B,w,b))},C=({target:{value:B}})=>m(i,sn(B,b,E)),W=({target:{value:B}})=>p(i,sn(B,b,E));return(0,z.jsxs)(z.Fragment,{children:[ks((0,z.jsx)(nh.A,{required:d,htmlFor:i,children:s||void 0}),e),(0,z.jsx)(vN.A,{id:i,row:!!x,children:Array.isArray(b)&&b.map((B,V)=>{const J=Dc(B.value,w),Z=Array.isArray(v)&&v.indexOf(B.value)!==-1,le=(0,z.jsx)(Yf.A,{id:Mc(i,V),name:i,checked:J,disabled:a||Z||f,autoFocus:u&&V===0,onChange:A(V),onBlur:C,onFocus:W,"aria-describedby":Yn(i)});return(0,z.jsx)(sc.A,{control:le,label:B.label},V)})})]})}var SN=S(30285),xN=S(29635);function EN({id:s,options:e,value:i,required:a,disabled:l,readonly:c,label:u,hideLabel:f,onChange:d,onBlur:h,onFocus:m}){var p;const{enumOptions:b,enumDisabled:v,emptyValue:x}=e,E=(B,V)=>d(sn(V,b,x)),w=({target:{value:B}})=>h(s,sn(B,b,x)),A=({target:{value:B}})=>m(s,sn(B,b,x)),C=e?e.inline:!1,W=(p=$d(i,b))!==null&&p!==void 0?p:null;return(0,z.jsxs)(z.Fragment,{children:[ks((0,z.jsx)(nh.A,{required:a,htmlFor:s,children:u||void 0}),f),(0,z.jsx)(xN.A,{id:s,name:s,value:W,row:C,onChange:E,onBlur:w,onFocus:A,"aria-describedby":Yn(s),children:Array.isArray(b)&&b.map((B,V)=>{const J=Array.isArray(v)&&v.indexOf(B.value)!==-1;return(0,z.jsx)(sc.A,{control:(0,z.jsx)(SN.A,{name:s,id:Mc(s,V),color:"primary"}),label:B.label,value:String(V),disabled:l||J||c},V)})})]})}var wN=S(33466);function AN(s){const{value:e,readonly:i,disabled:a,onBlur:l,onFocus:c,options:u,schema:f,onChange:d,required:h,label:m,hideLabel:p,id:b}=s,v={value:e,label:m,id:b,name:b,...yv(f)},x=(A,C)=>{d(C!=null?C:u.emptyValue)},E=({target:{value:A}})=>l(b,A),w=({target:{value:A}})=>c(b,A);return(0,z.jsxs)(z.Fragment,{children:[ks((0,z.jsx)(nh.A,{required:h,htmlFor:b,children:m||void 0}),p),(0,z.jsx)(wN.A,{disabled:a||i,onChange:x,onBlur:E,onFocus:w,valueLabelDisplay:"auto",...v,"aria-describedby":Yn(b)})]})}function ON({schema:s,id:e,name:i,options:a,label:l,hideLabel:c,required:u,disabled:f,readonly:d,placeholder:h,value:m,multiple:p,autofocus:b,onChange:v,onBlur:x,onFocus:E,rawErrors:w=[],registry:A,uiSchema:C,hideError:W,formContext:B,...V}){const{enumOptions:J,enumDisabled:Z,emptyValue:le}=a;p=typeof p=="undefined"?!1:!!p;const ce=p?[]:"",he=typeof m=="undefined"||p&&m.length<1||!p&&m===ce,ge=({target:{value:ve}})=>v(sn(ve,J,le)),fe=({target:ve})=>x(e,sn(ve&&ve.value,J,le)),ye=({target:ve})=>E(e,sn(ve&&ve.value,J,le)),be=$d(m,J,p);return(0,z.jsx)(oc.A,{id:e,name:e,label:ks(l,c||!l,!1),value:!he&&typeof be!="undefined"?be:ce,required:u,disabled:f||d,autoFocus:b,placeholder:h,error:w.length>0,onChange:ge,onBlur:fe,onFocus:ye,...V,select:!0,InputLabelProps:{...V.InputLabelProps,shrink:!he},SelectProps:{...V.SelectProps,multiple:p},"aria-describedby":Yn(e),children:Array.isArray(J)&&J.map(({value:ve,label:Me},Fe)=>{const ke=Array.isArray(Z)&&Z.indexOf(ve)!==-1;return(0,z.jsx)(zn.A,{value:String(Fe),disabled:ke,children:Me},Fe)})})}function CN(s){const{options:e,registry:i}=s,a=Qe("BaseInputTemplate",i,e);let l=5;return(typeof e.rows=="string"||typeof e.rows=="number")&&(l=e.rows),(0,z.jsx)(a,{...s,multiline:!0,rows:l})}function l1(){return{CheckboxWidget:yN,CheckboxesWidget:bN,RadioWidget:EN,RangeWidget:AN,SelectWidget:ON,TextareaWidget:CN}}const rW=l1();function c1(){return{templates:a1(),widgets:l1()}}const kN=c1();function TN(){return s1(c1())}const iW=TN(),sW=null,PN=s1(kN),u1=s=>{const e=g.useMemo(()=>{var a;return Object.fromEntries(Object.entries((a=s.fields)!=null?a:{}).map(([l,c])=>[l,u=>{var f,d,h,m;return g.createElement(c,{...u,uiSchema:(f=u.uiSchema)!=null?f:{},formData:u.formData,rawErrors:(d=u.rawErrors)!=null?d:[],disabled:(h=u.disabled)!=null?h:!1,readonly:(m=u.readonly)!=null?m:!1})}]))},[s.fields]),i=g.useMemo(()=>({FieldTemplate:KR,DescriptionFieldTemplate:YR,...s.templates}),[s.templates]);return g.createElement(PN,{...s,templates:i,fields:e})},DN=(0,M.A)(s=>(0,Bi.A)({list:{width:"100%"},text:{textWrap:"wrap"}})),MN=({errors:s,schema:e})=>{const i=DN();function a(l){if(l.property&&l.message){const c=l.property.startsWith(".")?l.property.substring(1):l.property;if(e.properties&&c in e.properties){const u=e.properties[c];if(typeof u=="object"&&"title"in u)return`'${u.title}' ${l.message}`}return`'${zy()(c)}' ${l.message}`}return l.stack}return g.createElement(st.A,null,g.createElement(qs.A,{dense:!0,className:i.list},s.map((l,c)=>g.createElement(Oa.A,{key:c},g.createElement(Wn.A,null,g.createElement(o1.A,{color:"error"})),g.createElement(Vn.A,{classes:{primary:i.text},primary:a(l)})))))},IN=s=>{const{value:e,onChange:i,schema:{title:a}}=s;return g.createElement(g.Fragment,null,g.createElement(K.A,{htmlFor:a},a),g.createElement($.A,{id:a,"aria-describedby":a,onChange:l=>{i(l.target.value)},value:e,autoComplete:"off"}),g.createElement(th.A,{error:!0},g.createElement(y.h,{content:"This widget is insecure. Please use [`ui:field: Secret`](https://backstage.io/docs/features/software-templates/writing-templates/#using-secrets) instead of\n          `ui:widget: password`"})))},RN=(0,M.A)(s=>({backButton:{marginRight:s.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:s.spacing(2)},formWrapper:{padding:s.spacing(2)}})),f1=s=>{var ke,Se,je,pt,et,ct,Tt;const{layouts:e=[],components:i={},...a}=s,{ReviewStateComponent:l=bP,ReviewStepComponent:c,backButtonText:u="Back",createButtonText:f="Create",reviewButtonText:d="Review"}=i,h=(0,ha.s)(),{presentation:m,steps:p}=EP(a.manifest),b=(0,gt.Q2)(),[v,x]=(0,g.useState)(0),[E,w]=(0,g.useState)(!1),[A,C]=xP(a.initialState),[W,B]=(0,g.useState)(),V=RN(),J=(Se=(ke=m==null?void 0:m.buttonLabels)==null?void 0:ke.backButtonText)!=null?Se:u,Z=(pt=(je=m==null?void 0:m.buttonLabels)==null?void 0:je.createButtonText)!=null?pt:f,le=(ct=(et=m==null?void 0:m.buttonLabels)==null?void 0:et.reviewButtonText)!=null?ct:d,ce=(0,g.useMemo)(()=>Object.fromEntries(a.extensions.map(({name:vt,component:jt})=>[vt,jt])),[a.extensions]),he=(0,g.useMemo)(()=>({...D,...ce}),[ce]),ge=(0,g.useMemo)(()=>Object.fromEntries(a.extensions.map(({name:vt,validation:jt})=>[vt,jt])),[a.extensions]),fe=(0,g.useMemo)(()=>{var vt;return Vy((vt=p[v])==null?void 0:vt.mergedSchema,ge,{apiHolder:b})},[p,v,ge,b]),ye=()=>{x(vt=>vt-1)},be=(0,g.useCallback)(vt=>C(jt=>({...jt,...vt.formData})),[C]),ve=(0,g.useCallback)(()=>{a.onCreate(A),h.captureEvent("click",`${Z}`)},[a,A,h,Z]),Me=QD(p[v],{layouts:e}),Fe=async({formData:vt={}})=>{B(void 0),w(!0);const jt=await fe(vt);w(!1),Wy(jt)?B(jt):(B(void 0),x(Ht=>{const kr=Ht+1;return h.captureEvent("click",`Next Step (${kr})`),kr})),C(Ht=>({...Ht,...vt}))};return g.createElement(g.Fragment,null,E&&g.createElement(cc.A,{variant:"indeterminate"}),g.createElement(Zf.A,{activeStep:v,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},p.map((vt,jt)=>{const Ht=v>jt;return g.createElement(ac.A,{key:jt},g.createElement(lc.A,{"aria-label":`Step ${jt+1}`,style:{cursor:Ht?"pointer":"default"},onClick:()=>{Ht&&x(jt)}},vt.title))}),g.createElement(ac.A,null,g.createElement(lc.A,null,le))),g.createElement("div",{className:V.formWrapper},v<p.length?g.createElement(u1,{validator:Cv,extraErrors:W,formData:A,formContext:{formData:A},schema:Me.schema,uiSchema:Me.uiSchema,onSubmit:Fe,fields:he,showErrorList:"top",templates:{ErrorListTemplate:MN},onChange:be,widgets:{password:IN},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...(Tt=a.formProps)!=null?Tt:{}},g.createElement("div",{className:V.footer},g.createElement(Hn.A,{onClick:ye,className:V.backButton,disabled:v<1||E},J),g.createElement(Hn.A,{variant:"contained",color:"primary",type:"submit",disabled:E},v===p.length-1?le:"Next"))):c?g.createElement(c,{disableButtons:E,formData:A,handleBack:ye,handleReset:()=>{},steps:p,handleCreate:ve}):g.createElement(g.Fragment,null,g.createElement(l,{formState:A,schemas:p}),g.createElement("div",{className:V.footer},g.createElement(Hn.A,{onClick:ye,className:V.backButton,disabled:v<1},J),g.createElement(Hn.A,{variant:"contained",color:"primary",onClick:ve},Z)))))},NN=s=>{const e="backstage:featureFlag",i=(0,gt.gf)(Zy.B);if(!s)return;const a=s==null?void 0:s.steps.filter(l=>{const c=l.schema[e];return typeof c!="string"||i.isActive(c)}).map(l=>{var f;const c=wd()(l),u=[];return c.schema.properties&&(c.schema.properties=Object.fromEntries(Object.entries(c.schema.properties).filter(([d,h])=>h[e]?i.isActive(h[e])?!0:(u.push(d),!1):!0)),c.schema.required=Array.isArray(c.schema.required)?(f=c.schema.required)==null?void 0:f.filter(d=>!u.includes(d)):c.schema.required),c});return{...s,steps:a}};var FN=S(91638);const LN=s=>{const e=(0,gt.gf)(ic.v),{value:i}=(0,FN.A)(async()=>{var u;const a=await e.getEntityByRef(s),l=(u=a==null?void 0:a.metadata.annotations)==null?void 0:u["backstage.io/time-saved"];if(!a||!l)return;const c=ot.fromISO(l).as("minutes");if(!Number.isNaN(c))return c},[e,s]);return i},$N=(0,M.A)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),d1=s=>{var A;const{title:e,description:i,namespace:a,templateName:l,onCreate:c,...u}=s,f=(0,ha.s)(),d=$N(),h=(0,br.U2)({kind:"Template",namespace:a,name:l}),m=(0,gt.gf)(A0.m),{loading:p,manifest:b,error:v}=Dk(h),x=NN(b),E=LN(h),w=(0,g.useCallback)(async C=>{var B;c(C);const W=typeof C.name=="string"?C.name:void 0;f.captureEvent("create",(B=W!=null?W:l)!=null?B:"unknown",{value:E})},[c,f,l,E]);return(0,g.useEffect)(()=>{v&&m.post(new Error(`Failed to load template, ${v}`))},[v,m]),v?u.onError(v):g.createElement(ps.U,null,p&&g.createElement(Ti.k,null),x&&g.createElement(k0.n,{title:e!=null?e:x.title,subheader:g.createElement(y.h,{className:d.markdown,content:(A=i!=null?i:x.description)!=null?A:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(f1,{manifest:x,onCreate:w,...u})))},oW=s=>React.createElement(SecretsContextProvider,null,React.createElement(d1,{...s})),BN=(0,M.A)(s=>({button:{color:s.page.fontColor}}));function jN(s){const{editUrl:e}=s,i=BN(),[a,l]=(0,g.useState)();if(!e)return null;const c=f=>{l(f.currentTarget)},u=()=>{l(void 0)};return g.createElement(g.Fragment,null,g.createElement(En.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!a,"aria-haspopup":"true",role:"button",onClick:c,"data-testid":"menu-button",color:"inherit",className:i.button},g.createElement(wf.A,null)),g.createElement(Ef.Ay,{"aria-labelledby":"long-menu",open:!!a,onClose:u,anchorEl:a,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(xf.A,null,g.createElement(zn.A,{onClick:()=>window.open(e,"_blank")},g.createElement(Wn.A,null,g.createElement(Vp.A,{fontSize:"small"})),g.createElement(Vn.A,{primary:"Edit Configuration"})))))}const WN=s=>{const e=(0,bt.S)(Xe.rQ),i=(0,bt.S)(Xe.bW),{secrets:a}=(0,P.Z)(),l=(0,gt.gf)(dn.z),c=(0,gt.gf)(ic.v),u=(0,_.Zp)(),{templateName:f,namespace:d}=(0,Tk.K)(Xe.sP),h=(0,br.U2)({kind:"Template",namespace:d,name:f}),{value:m}=(0,Kt.A)(async()=>{var x;const v=await c.getEntityByRef(h);return(x=v==null?void 0:v.metadata.annotations)==null?void 0:x[kk.P]},[h,c]),p=async v=>{const{taskId:x}=await l.scaffold({templateRef:h,values:v,secrets:a});u(i({taskId:x}))},b=()=>g.createElement(_.C5,{to:e()});return g.createElement(Pk.I,{attributes:{entityRef:h}},g.createElement(_s.Y,{themeId:"website"},g.createElement(Xs.Y,{pageTitleOverride:"Create a new component",title:"Create a new component",subtitle:"Create new software components using standard templates in your organization",...s.headerOptions},g.createElement(jN,{editUrl:m})),g.createElement(d1,{namespace:d,templateName:f,onCreate:p,components:s.components,onError:b,extensions:s.customFieldExtensions,formProps:s.formProps,layouts:s.layouts})))};var VN=S(11097);function en(s){for(var e=arguments.length,i=Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];if(0)var l,c;throw Error("[Immer] minified error nr: "+s+(i.length?" "+i.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function mi(s){return!!s&&!!s[Je]}function Lr(s){var e;return!!s&&(function(i){if(!i||typeof i!="object")return!1;var a=Object.getPrototypeOf(i);if(a===null)return!0;var l=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===_N}(s)||Array.isArray(s)||!!s[Va]||!!(!((e=s.constructor)===null||e===void 0)&&e[Va])||jc(s)||Wc(s))}function aW(s){return mi(s)||en(23,s),s[Je].t}function pi(s,e,i){i===void 0&&(i=!1),Ji(s)===0?(i?Object.keys:xo)(s).forEach(function(a){i&&typeof a=="symbol"||e(a,s[a],s)}):s.forEach(function(a,l){return e(l,a,s)})}function Ji(s){var e=s[Je];return e?e.i>3?e.i-4:e.i:Array.isArray(s)?1:jc(s)?2:Wc(s)?3:0}function Zi(s,e){return Ji(s)===2?s.has(e):Object.prototype.hasOwnProperty.call(s,e)}function Bc(s,e){return Ji(s)===2?s.get(e):s[e]}function h1(s,e,i){var a=Ji(s);a===2?s.set(e,i):a===3?s.add(i):s[e]=i}function m1(s,e){return s===e?s!==0||1/s==1/e:s!=s&&e!=e}function jc(s){return JN&&s instanceof Map}function Wc(s){return ZN&&s instanceof Set}function tn(s){return s.o||s.t}function rh(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var e=x1(s);delete e[Je];for(var i=xo(e),a=0;a<i.length;a++){var l=i[a],c=e[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(e[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:s[l]})}return Object.create(Object.getPrototypeOf(s),e)}function ih(s,e){return e===void 0&&(e=!1),sh(s)||mi(s)||!Lr(s)||(Ji(s)>1&&(s.set=s.add=s.clear=s.delete=zN),Object.freeze(s),e&&pi(s,function(i,a){return ih(a,!0)},!0)),s}function zN(){en(2)}function sh(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function $r(s){var e=mh[s];return e||en(18,s),e}function oh(s,e){mh[s]||(mh[s]=e)}function Ba(){return Wa}function ah(s,e){e&&($r("Patches"),s.u=[],s.s=[],s.v=e)}function Vc(s){lh(s),s.p.forEach(UN),s.p=null}function lh(s){s===Wa&&(Wa=s.l)}function p1(s){return Wa={p:[],l:Wa,h:s,m:!0,_:0}}function UN(s){var e=s[Je];e.i===0||e.i===1?e.j():e.g=!0}function ch(s,e){e._=e.p.length;var i=e.p[0],a=s!==void 0&&s!==i;return e.h.O||$r("ES5").S(e,s,a),a?(i[Je].P&&(Vc(e),en(4)),Lr(s)&&(s=zc(e,s),e.l||Uc(e,s)),e.u&&$r("Patches").M(i[Je].t,s,e.u,e.s)):s=zc(e,i,[]),Vc(e),e.u&&e.v(e.u,e.s),s!==hh?s:void 0}function zc(s,e,i){if(sh(e))return e;var a=e[Je];if(!a)return pi(e,function(f,d){return g1(s,a,e,f,d,i)},!0),e;if(a.A!==s)return e;if(!a.P)return Uc(s,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var l=a.i===4||a.i===5?a.o=rh(a.k):a.o,c=l,u=!1;a.i===3&&(c=new Set(l),l.clear(),u=!0),pi(c,function(f,d){return g1(s,a,l,f,d,i,u)}),Uc(s,l,!1),i&&s.u&&$r("Patches").N(a,i,s.u,s.s)}return a.o}function g1(s,e,i,a,l,c,u){if(mi(l)){var f=zc(s,l,c&&e&&e.i!==3&&!Zi(e.R,a)?c.concat(a):void 0);if(h1(i,a,f),!mi(f))return;s.m=!1}else u&&i.add(l);if(Lr(l)&&!sh(l)){if(!s.h.D&&s._<1)return;zc(s,l),e&&e.A.l||Uc(s,l)}}function Uc(s,e,i){i===void 0&&(i=!1),!s.l&&s.h.D&&s.m&&ih(e,i)}function uh(s,e){var i=s[Je];return(i?tn(i):s)[e]}function y1(s,e){if(e in s)for(var i=Object.getPrototypeOf(s);i;){var a=Object.getOwnPropertyDescriptor(i,e);if(a)return a;i=Object.getPrototypeOf(i)}}function Rn(s){s.P||(s.P=!0,s.l&&Rn(s.l))}function fh(s){s.o||(s.o=rh(s.t))}function ja(s,e,i){var a=jc(e)?$r("MapSet").F(e,i):Wc(e)?$r("MapSet").T(e,i):s.O?function(l,c){var u=Array.isArray(l),f={i:u?1:0,A:c?c.A:Ba(),P:!1,I:!1,R:{},l:c,t:l,k:null,o:null,j:null,C:!1},d=f,h=za;u&&(d=[f],h=Ua);var m=Proxy.revocable(d,h),p=m.revoke,b=m.proxy;return f.k=b,f.j=p,b}(e,i):$r("ES5").J(e,i);return(i?i.A:Ba()).p.push(a),a}function HN(s){return mi(s)||en(22,s),function e(i){if(!Lr(i))return i;var a,l=i[Je],c=Ji(i);if(l){if(!l.P&&(l.i<4||!$r("ES5").K(l)))return l.t;l.I=!0,a=v1(i,c),l.I=!1}else a=v1(i,c);return pi(a,function(u,f){l&&Bc(l.t,u)===f||h1(a,u,e(f))}),c===3?new Set(a):a}(s)}function v1(s,e){switch(e){case 2:return new Map(s);case 3:return Array.from(s)}return rh(s)}function KN(){function s(u,f){var d=c[u];return d?d.enumerable=f:c[u]=d={configurable:!0,enumerable:f,get:function(){var h=this[Je];return za.get(h,u)},set:function(h){var m=this[Je];za.set(m,u,h)}},d}function e(u){for(var f=u.length-1;f>=0;f--){var d=u[f][Je];if(!d.P)switch(d.i){case 5:a(d)&&Rn(d);break;case 4:i(d)&&Rn(d)}}}function i(u){for(var f=u.t,d=u.k,h=xo(d),m=h.length-1;m>=0;m--){var p=h[m];if(p!==Je){var b=f[p];if(b===void 0&&!Zi(f,p))return!0;var v=d[p],x=v&&v[Je];if(x?x.t!==b:!m1(v,b))return!0}}var E=!!f[Je];return h.length!==xo(f).length+(E?0:1)}function a(u){var f=u.k;if(f.length!==u.t.length)return!0;var d=Object.getOwnPropertyDescriptor(f,f.length-1);if(d&&!d.get)return!0;for(var h=0;h<f.length;h++)if(!f.hasOwnProperty(h))return!0;return!1}function l(u){u.g&&en(3,JSON.stringify(tn(u)))}var c={};oh("ES5",{J:function(u,f){var d=Array.isArray(u),h=function(p,b){if(p){for(var v=Array(b.length),x=0;x<b.length;x++)Object.defineProperty(v,""+x,s(x,!0));return v}var E=x1(b);delete E[Je];for(var w=xo(E),A=0;A<w.length;A++){var C=w[A];E[C]=s(C,p||!!E[C].enumerable)}return Object.create(Object.getPrototypeOf(b),E)}(d,u),m={i:d?5:4,A:f?f.A:Ba(),P:!1,I:!1,R:{},l:f,t:u,k:h,o:null,g:!1,C:!1};return Object.defineProperty(h,Je,{value:m,writable:!0}),h},S:function(u,f,d){d?mi(f)&&f[Je].A===u&&e(u.p):(u.u&&function h(m){if(m&&typeof m=="object"){var p=m[Je];if(p){var b=p.t,v=p.k,x=p.R,E=p.i;if(E===4)pi(v,function(B){B!==Je&&(b[B]!==void 0||Zi(b,B)?x[B]||h(v[B]):(x[B]=!0,Rn(p)))}),pi(b,function(B){v[B]!==void 0||Zi(v,B)||(x[B]=!1,Rn(p))});else if(E===5){if(a(p)&&(Rn(p),x.length=!0),v.length<b.length)for(var w=v.length;w<b.length;w++)x[w]=!1;else for(var A=b.length;A<v.length;A++)x[A]=!0;for(var C=Math.min(v.length,b.length),W=0;W<C;W++)v.hasOwnProperty(W)||(x[W]=!0),x[W]===void 0&&h(v[W])}}}}(u.p[0]),e(u.p))},K:function(u){return u.i===4?i(u):a(u)}})}function GN(){function s(a){if(!Lr(a))return a;if(Array.isArray(a))return a.map(s);if(jc(a))return new Map(Array.from(a.entries()).map(function(u){return[u[0],s(u[1])]}));if(Wc(a))return new Set(Array.from(a).map(s));var l=Object.create(Object.getPrototypeOf(a));for(var c in a)l[c]=s(a[c]);return Zi(a,Va)&&(l[Va]=a[Va]),l}function e(a){return mi(a)?s(a):a}var i="add";oh("Patches",{$:function(a,l){return l.forEach(function(c){for(var u=c.path,f=c.op,d=a,h=0;h<u.length-1;h++){var m=Ji(d),p=u[h];typeof p!="string"&&typeof p!="number"&&(p=""+p),m!==0&&m!==1||p!=="__proto__"&&p!=="constructor"||en(24),typeof d=="function"&&p==="prototype"&&en(24),typeof(d=Bc(d,p))!="object"&&en(15,u.join("/"))}var b=Ji(d),v=s(c.value),x=u[u.length-1];switch(f){case"replace":switch(b){case 2:return d.set(x,v);case 3:en(16);default:return d[x]=v}case i:switch(b){case 1:return x==="-"?d.push(v):d.splice(x,0,v);case 2:return d.set(x,v);case 3:return d.add(v);default:return d[x]=v}case"remove":switch(b){case 1:return d.splice(x,1);case 2:return d.delete(x);case 3:return d.delete(c.value);default:return delete d[x]}default:en(17,f)}}),a},N:function(a,l,c,u){switch(a.i){case 0:case 4:case 2:return function(f,d,h,m){var p=f.t,b=f.o;pi(f.R,function(v,x){var E=Bc(p,v),w=Bc(b,v),A=x?Zi(p,v)?"replace":i:"remove";if(E!==w||A!=="replace"){var C=d.concat(v);h.push(A==="remove"?{op:A,path:C}:{op:A,path:C,value:w}),m.push(A===i?{op:"remove",path:C}:A==="remove"?{op:i,path:C,value:e(E)}:{op:"replace",path:C,value:e(E)})}})}(a,l,c,u);case 5:case 1:return function(f,d,h,m){var p=f.t,b=f.R,v=f.o;if(v.length<p.length){var x=[v,p];p=x[0],v=x[1];var E=[m,h];h=E[0],m=E[1]}for(var w=0;w<p.length;w++)if(b[w]&&v[w]!==p[w]){var A=d.concat([w]);h.push({op:"replace",path:A,value:e(v[w])}),m.push({op:"replace",path:A,value:e(p[w])})}for(var C=p.length;C<v.length;C++){var W=d.concat([C]);h.push({op:i,path:W,value:e(v[C])})}p.length<v.length&&m.push({op:"replace",path:d.concat(["length"]),value:p.length})}(a,l,c,u);case 3:return function(f,d,h,m){var p=f.t,b=f.o,v=0;p.forEach(function(x){if(!b.has(x)){var E=d.concat([v]);h.push({op:"remove",path:E,value:x}),m.unshift({op:i,path:E,value:x})}v++}),v=0,b.forEach(function(x){if(!p.has(x)){var E=d.concat([v]);h.push({op:i,path:E,value:x}),m.unshift({op:"remove",path:E,value:x})}v++})}(a,l,c,u)}},M:function(a,l,c,u){c.push({op:"replace",path:[],value:l===hh?void 0:l}),u.push({op:"replace",path:[],value:a})}})}function YN(){function s(f,d){function h(){this.constructor=f}l(f,d),f.prototype=(h.prototype=d.prototype,new h)}function e(f){f.o||(f.R=new Map,f.o=new Map(f.t))}function i(f){f.o||(f.o=new Set,f.t.forEach(function(d){if(Lr(d)){var h=ja(f.A.h,d,f);f.p.set(d,h),f.o.add(h)}else f.o.add(d)}))}function a(f){f.g&&en(3,JSON.stringify(tn(f)))}var l=function(f,d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var p in m)m.hasOwnProperty(p)&&(h[p]=m[p])})(f,d)},c=function(){function f(h,m){return this[Je]={i:2,l:m,A:m?m.A:Ba(),P:!1,I:!1,o:void 0,R:void 0,t:h,k:this,C:!1,g:!1},this}s(f,Map);var d=f.prototype;return Object.defineProperty(d,"size",{get:function(){return tn(this[Je]).size}}),d.has=function(h){return tn(this[Je]).has(h)},d.set=function(h,m){var p=this[Je];return a(p),tn(p).has(h)&&tn(p).get(h)===m||(e(p),Rn(p),p.R.set(h,!0),p.o.set(h,m),p.R.set(h,!0)),this},d.delete=function(h){if(!this.has(h))return!1;var m=this[Je];return a(m),e(m),Rn(m),m.t.has(h)?m.R.set(h,!1):m.R.delete(h),m.o.delete(h),!0},d.clear=function(){var h=this[Je];a(h),tn(h).size&&(e(h),Rn(h),h.R=new Map,pi(h.t,function(m){h.R.set(m,!1)}),h.o.clear())},d.forEach=function(h,m){var p=this;tn(this[Je]).forEach(function(b,v){h.call(m,p.get(v),v,p)})},d.get=function(h){var m=this[Je];a(m);var p=tn(m).get(h);if(m.I||!Lr(p)||p!==m.t.get(h))return p;var b=ja(m.A.h,p,m);return e(m),m.o.set(h,b),b},d.keys=function(){return tn(this[Je]).keys()},d.values=function(){var h,m=this,p=this.keys();return(h={})[Hc]=function(){return m.values()},h.next=function(){var b=p.next();return b.done?b:{done:!1,value:m.get(b.value)}},h},d.entries=function(){var h,m=this,p=this.keys();return(h={})[Hc]=function(){return m.entries()},h.next=function(){var b=p.next();if(b.done)return b;var v=m.get(b.value);return{done:!1,value:[b.value,v]}},h},d[Hc]=function(){return this.entries()},f}(),u=function(){function f(h,m){return this[Je]={i:3,l:m,A:m?m.A:Ba(),P:!1,I:!1,o:void 0,t:h,k:this,p:new Map,g:!1,C:!1},this}s(f,Set);var d=f.prototype;return Object.defineProperty(d,"size",{get:function(){return tn(this[Je]).size}}),d.has=function(h){var m=this[Je];return a(m),m.o?!!m.o.has(h)||!(!m.p.has(h)||!m.o.has(m.p.get(h))):m.t.has(h)},d.add=function(h){var m=this[Je];return a(m),this.has(h)||(i(m),Rn(m),m.o.add(h)),this},d.delete=function(h){if(!this.has(h))return!1;var m=this[Je];return a(m),i(m),Rn(m),m.o.delete(h)||!!m.p.has(h)&&m.o.delete(m.p.get(h))},d.clear=function(){var h=this[Je];a(h),tn(h).size&&(i(h),Rn(h),h.o.clear())},d.values=function(){var h=this[Je];return a(h),i(h),h.o.values()},d.entries=function(){var h=this[Je];return a(h),i(h),h.o.entries()},d.keys=function(){return this.values()},d[Hc]=function(){return this.values()},d.forEach=function(h,m){for(var p=this.values(),b=p.next();!b.done;)h.call(m,b.value,b.value,this),b=p.next()},f}();oh("MapSet",{F:function(f,d){return new c(f,d)},T:function(f,d){return new u(f,d)}})}function lW(){KN(),YN(),GN()}function cW(s){return s}function uW(s){return s}var b1,Wa,dh=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",JN=typeof Map!="undefined",ZN=typeof Set!="undefined",S1=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",hh=dh?Symbol.for("immer-nothing"):((b1={})["immer-nothing"]=!0,b1),Va=dh?Symbol.for("immer-draftable"):"__$immer_draftable",Je=dh?Symbol.for("immer-state"):"__$immer_state",Hc=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator",fW={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(s){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+s},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(s){return"Cannot apply patch, path doesn't resolve: "+s},16:'Sets cannot have "replace" patches.',17:function(s){return"Unsupported patch operation: "+s},18:function(s){return"The plugin for '"+s+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+s+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(s){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+s+"'"},22:function(s){return"'current' expects a draft, got: "+s},23:function(s){return"'original' expects a draft, got: "+s},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},_N=""+Object.prototype.constructor,xo=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,x1=Object.getOwnPropertyDescriptors||function(s){var e={};return xo(s).forEach(function(i){e[i]=Object.getOwnPropertyDescriptor(s,i)}),e},mh={},za={get:function(s,e){if(e===Je)return s;var i=tn(s);if(!Zi(i,e))return function(l,c,u){var f,d=y1(c,u);return d?"value"in d?d.value:(f=d.get)===null||f===void 0?void 0:f.call(l.k):void 0}(s,i,e);var a=i[e];return s.I||!Lr(a)?a:a===uh(s.t,e)?(fh(s),s.o[e]=ja(s.A.h,a,s)):a},has:function(s,e){return e in tn(s)},ownKeys:function(s){return Reflect.ownKeys(tn(s))},set:function(s,e,i){var a=y1(tn(s),e);if(a!=null&&a.set)return a.set.call(s.k,i),!0;if(!s.P){var l=uh(tn(s),e),c=l==null?void 0:l[Je];if(c&&c.t===i)return s.o[e]=i,s.R[e]=!1,!0;if(m1(i,l)&&(i!==void 0||Zi(s.t,e)))return!0;fh(s),Rn(s)}return s.o[e]===i&&(i!==void 0||e in s.o)||Number.isNaN(i)&&Number.isNaN(s.o[e])||(s.o[e]=i,s.R[e]=!0),!0},deleteProperty:function(s,e){return uh(s.t,e)!==void 0||e in s.t?(s.R[e]=!1,fh(s),Rn(s)):delete s.R[e],s.o&&delete s.o[e],!0},getOwnPropertyDescriptor:function(s,e){var i=tn(s),a=Reflect.getOwnPropertyDescriptor(i,e);return a&&{writable:!0,configurable:s.i!==1||e!=="length",enumerable:a.enumerable,value:i[e]}},defineProperty:function(){en(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){en(12)}},Ua={};pi(za,function(s,e){Ua[s]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ua.deleteProperty=function(s,e){return Ua.set.call(this,s,e,void 0)},Ua.set=function(s,e,i){return za.set.call(this,s[0],e,i,s[0])};var XN=function(){function s(i){var a=this;this.O=S1,this.D=!0,this.produce=function(l,c,u){if(typeof l=="function"&&typeof c!="function"){var f=c;c=l;var d=a;return function(E){var w=this;E===void 0&&(E=f);for(var A=arguments.length,C=Array(A>1?A-1:0),W=1;W<A;W++)C[W-1]=arguments[W];return d.produce(E,function(B){var V;return(V=c).call.apply(V,[w,B].concat(C))})}}var h;if(typeof c!="function"&&en(6),u!==void 0&&typeof u!="function"&&en(7),Lr(l)){var m=p1(a),p=ja(a,l,void 0),b=!0;try{h=c(p),b=!1}finally{b?Vc(m):lh(m)}return typeof Promise!="undefined"&&h instanceof Promise?h.then(function(E){return ah(m,u),ch(E,m)},function(E){throw Vc(m),E}):(ah(m,u),ch(h,m))}if(!l||typeof l!="object"){if((h=c(l))===void 0&&(h=l),h===hh&&(h=void 0),a.D&&ih(h,!0),u){var v=[],x=[];$r("Patches").M(l,h,v,x),u(v,x)}return h}en(21,l)},this.produceWithPatches=function(l,c){if(typeof l=="function")return function(h){for(var m=arguments.length,p=Array(m>1?m-1:0),b=1;b<m;b++)p[b-1]=arguments[b];return a.produceWithPatches(h,function(v){return l.apply(void 0,[v].concat(p))})};var u,f,d=a.produce(l,c,function(h,m){u=h,f=m});return typeof Promise!="undefined"&&d instanceof Promise?d.then(function(h){return[h,u,f]}):[d,u,f]},typeof(i==null?void 0:i.useProxies)=="boolean"&&this.setUseProxies(i.useProxies),typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze)}var e=s.prototype;return e.createDraft=function(i){Lr(i)||en(8),mi(i)&&(i=HN(i));var a=p1(this),l=ja(this,i,void 0);return l[Je].C=!0,lh(a),l},e.finishDraft=function(i,a){var l=i&&i[Je],c=l.A;return ah(c,a),ch(void 0,c)},e.setAutoFreeze=function(i){this.D=i},e.setUseProxies=function(i){i&&!S1&&en(20),this.O=i},e.applyPatches=function(i,a){var l;for(l=a.length-1;l>=0;l--){var c=a[l];if(c.path.length===0&&c.op==="replace"){i=c.value;break}}l>-1&&(a=a.slice(l+1));var u=$r("Patches").$;return mi(i)?u(i,a):this.produce(i,function(f){return u(f,a)})},s}(),Jn=new XN,QN=Jn.produce,dW=Jn.produceWithPatches.bind(Jn),hW=Jn.setAutoFreeze.bind(Jn),mW=Jn.setUseProxies.bind(Jn),pW=Jn.applyPatches.bind(Jn),gW=Jn.createDraft.bind(Jn),yW=Jn.finishDraft.bind(Jn);const vW=null;function bW(s){var e=t(function(){return n(typeof s=="function"?s():s,!0)}),i=e[1];return[e[0],o(function(a){i(typeof a=="function"?r(a):n(a))},[])]}function qN(s,e,i){var a=(0,g.useMemo)(function(){return QN(s)},[s]);return(0,g.useReducer)(a,e,i)}function eF(s,e){var i,a,l;switch(e.type){case"INIT":{s.steps=e.data.spec.steps.reduce((c,u)=>(c[u.id]={status:"open",id:u.id},c),{}),s.stepLogs=e.data.spec.steps.reduce((c,u)=>(c[u.id]=[],c),{}),s.loading=!1,s.error=void 0,s.completed=!1,s.task=e.data;return}case"LOGS":{const c=e.data;for(const u of c){const f=`${u.createdAt} ${u.body.message}`;if(!u.body.stepId||!((i=s.steps)!=null&&i[u.body.stepId]))continue;const d=(a=s.stepLogs)==null?void 0:a[u.body.stepId],h=(l=s.steps)==null?void 0:l[u.body.stepId];h&&u.body.status&&u.body.status!==h.status&&(h.status=u.body.status,h.status==="processing"&&(h.startedAt=u.createdAt),["cancelled","completed","failed"].includes(h.status)&&(h.endedAt=u.createdAt)),d==null||d.push(f)}return}case"COMPLETED":{s.completed=!0,s.output=e.data.body.output,s.error=e.data.body.error;return}case"CANCELLED":{s.cancelled=!0;return}case"RECOVERED":{for(const c in s.steps)s.steps.hasOwnProperty(c)&&(s.steps[c].startedAt=void 0,s.steps[c].endedAt=void 0,s.steps[c].status="open");return}case"ERROR":{s.error=e.data,s.loading=!1,s.completed=!0;return}default:return}}const tF=s=>{const e=(0,gt.gf)(dn.z),[i,a]=qN(eF,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,g.useEffect)(()=>{let l=!1,c,u,f=1;const d=()=>e.getTask(s).then(h=>{if(l)return;a({type:"INIT",data:h});const m=e.streamLogs({taskId:s}),p=new Array;function b(){if(p.length){const v=p.splice(0,p.length);a({type:"LOGS",data:v})}}u=setInterval(b,500),c=m.subscribe({next:v=>{switch(f=1,v.type){case"log":return p.push(v);case"cancelled":a({type:"CANCELLED"});return;case"completion":b(),a({type:"COMPLETED",data:v});return;case"recovered":a({type:"RECOVERED",data:v});return;default:throw new Error(`Unhandled event type ${v.type} in observer`)}},error:v=>{b();const x=3;v.message||(v.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${f>x?x:f}/${x} retries)`),setTimeout(()=>{f+=1,d()},15e3),a({type:"ERROR",data:v})}})},h=>{l||a({type:"ERROR",data:h})});return d(),()=>{l=!0,c&&c.unsubscribe(),u&&clearInterval(u)}},[e,a,s]),i};var ph=S(91042),gh=S(92399),nF=S(55534),rF=S(25283),iF=S(86868);const sF=(0,M.A)(()=>({button:{color:({fontColor:s})=>s}})),oF=s=>{const{cancelEnabled:e,logsVisible:i,buttonBarVisible:a,onStartOver:l,onToggleLogs:c,onToggleButtonBar:u,taskId:f}=s,{getPageTheme:d}=(0,Jf.A)(),h=d({themeId:"website"}),m=sF({fontColor:h.fontColor}),p=(0,gt.gf)(dn.z),b=(0,ha.s)(),[v,x]=(0,g.useState)(),[{status:E},{execute:w}]=(0,ph.Y)(async()=>{f&&(b.captureEvent("cancelled","Template has been cancelled"),await p.cancelTask(f))}),{allowed:A}=(0,Ni.J)({permission:xs.lu}),{allowed:C}=(0,Ni.J)({permission:xs.Xw}),{allowed:W}=(0,Ni.J)({permission:xs.X6}),B=C&&W;return g.createElement(g.Fragment,null,g.createElement(En.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:V=>{x(V.currentTarget)},"data-testid":"menu-button",className:m.button},g.createElement(wf.A,null)),g.createElement(Ef.Ay,{open:!!v,onClose:()=>x(void 0),anchorEl:v,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(xf.A,null,g.createElement(zn.A,{onClick:()=>c==null?void 0:c(!i)},g.createElement(Wn.A,null,g.createElement(rF.A,{fontSize:"small"})),g.createElement(Vn.A,{primary:i?"Hide Logs":"Show Logs"})),g.createElement(zn.A,{onClick:()=>u==null?void 0:u(!a)},g.createElement(Wn.A,null,g.createElement(iF.A,{fontSize:"small"})),g.createElement(Vn.A,{primary:a?"Hide Button Bar":"Show Button Bar"})),g.createElement(zn.A,{onClick:l,disabled:e||!B,"data-testid":"start-over-task"},g.createElement(Wn.A,null,g.createElement(nF.A,{fontSize:"small"})),g.createElement(Vn.A,{primary:"Start Over"})),g.createElement(zn.A,{onClick:w,disabled:!e||E!=="not-executed"||!A,"data-testid":"cancel-task"},g.createElement(Wn.A,null,g.createElement(gh.A,{fontSize:"small"})),g.createElement(Vn.A,{primary:"Cancel"})))))};var E1=S(20987),aF=S(86613);const lF=(0,M.A)({root:{"&:hover":{textDecoration:"none"}}}),cF=s=>{const{links:e=[]}=s.output,i=lF(),a=(0,da.n)(),l=(0,bt.S)(E1.s),c=u=>{var f;return(f=a.getSystemIcon(u))!=null?f:aF.A};return g.createElement(g.Fragment,null,e.filter(({url:u,entityRef:f})=>u||f).map(({url:u,entityRef:f,title:d,icon:h})=>{if(f){const m=(0,br.KU)(f),p=l(m);return{title:d,icon:h,url:p}}return{title:d,icon:h,url:u}}).map(({url:u,title:f,icon:d},h)=>{const m=c(d);return g.createElement(na.N_,{to:u,key:h,classes:{root:i.root}},g.createElement(Hn.A,{startIcon:g.createElement(m,null),component:"div",color:"primary"},f))}))},uF=s=>{const{output:{text:e=[]},index:i,setIndex:a}=s,l=(0,da.n)(),c=u=>{var f;return(f=l.getSystemIcon(u))!=null?f:Wp.A};return g.createElement(g.Fragment,null,e.filter(({content:u})=>u!==void 0).map(({title:u,icon:f},d)=>{const h=c(f);return g.createElement(Hn.A,{key:d,startIcon:g.createElement(h,null),component:"div",color:"primary",onClick:()=>{i!==d&&(a==null||a(d))},variant:i===d?"outlined":void 0},u)}))},fF=s=>{var u,f;const{output:e}=s,[i,a]=(0,g.useState)(void 0);(0,g.useEffect)(()=>{if(i===void 0&&(e!=null&&e.text)){const d=e.text.findIndex(h=>h.default);a(d>=0?d:0)}},[i,e]);const l=(0,g.useMemo)(()=>{var d;return i!==void 0?(d=e==null?void 0:e.text)==null?void 0:d[i]:null},[e,i]);if(!e)return null;const c=Object.keys(e).length===0;return g.createElement(g.Fragment,null,c?null:g.createElement(pe.A,{paddingBottom:2,"data-testid":"output-box"},g.createElement(st.A,null,g.createElement(pe.A,{padding:2,justifyContent:"center",display:"flex",gridGap:16},g.createElement(uF,{output:e,index:i,setIndex:a}),g.createElement(cF,{output:e})))),l?g.createElement(pe.A,{paddingBottom:2,"data-testid":"text-output-box"},g.createElement(k0.n,{title:(u=l.title)!=null?u:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(pe.A,{padding:2,height:"100%"},g.createElement(y.h,{content:(f=l.content)!=null?f:""})))):null)};var w1=S(54819),A1=S(78467),dF=S(51767),hF=S(25711);const mF=(0,M.A)(s=>({root:{color:s.palette.text.disabled},completed:{color:s.palette.status.ok},error:{color:s.palette.status.error}})),pF=s=>{const e=mF(),{active:i,completed:a,error:l,skipped:c}=s,u=()=>i?g.createElement(A1.A,{size:"20px"}):a?g.createElement(v0.A,null):l?g.createElement(b0.A,null):c?g.createElement(dF.A,null):g.createElement(hF.A,null);return g.createElement("div",{className:Qt()(e.root,{[e.completed]:a,[e.error]:l})},u())};var gF=function(s,e){var i=(0,g.useRef)(function(){});(0,g.useEffect)(function(){i.current=s}),(0,g.useEffect)(function(){if(e!==null){var a=setInterval(function(){return i.current()},e||0);return function(){return clearInterval(a)}}},[e])};const O1=gF;var yF=S(76842);const vF=s=>{const[e,i]=(0,g.useState)(""),{step:a}=s,l=()=>a.startedAt&&a.endedAt&&e?null:a.startedAt&&a.endedAt?1:1e3,c=(0,g.useCallback)(()=>{if(!a.startedAt){i("");return}const u=a.endedAt?Ke.fromISO(a.endedAt):Ke.local(),f=Ke.fromISO(a.startedAt),d=Pt.fromDateTimes(f,u).toDuration().valueOf();i(Gf()(d,{round:!0}))},[a.endedAt,a.startedAt]);return(0,yF.u)(c),O1(c,l()),g.createElement(Ve.A,{variant:"caption"},e)},bF=(0,M.A)(s=>({failed:{backgroundColor:s.palette.error.main},success:{backgroundColor:s.palette.success.main}})),SF=s=>{const e=bF();return s.isComplete?g.createElement(cc.A,{variant:"determinate",classes:{bar:s.isError?e.failed:e.success},value:100}):g.createElement(cc.A,{variant:"indeterminate"})},xF=s=>{var e,i;return g.createElement(st.A,{style:{position:"relative",overflow:"hidden"}},g.createElement(SF,{isComplete:(e=s.isComplete)!=null?e:!1,isError:(i=s.isError)!=null?i:!1}),g.createElement(pe.A,{padding:2},g.createElement(Zf.A,{activeStep:s.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},s.steps.map(a=>{const l=a.status==="completed",c=a.status==="failed",u=a.status==="processing",f=a.status==="skipped",d={completed:l,error:c,active:u,skipped:f};return g.createElement(ac.A,{key:a.id},g.createElement(w1.A,null,g.createElement(lc.A,{StepIconProps:d,StepIconComponent:pF,"data-testid":"step-label"},g.createElement(pe.A,null,a.name),!f&&g.createElement(vF,{step:a}))))}))))};var C1=S(67296);const EF=(0,M.A)({root:{width:"100%",height:"100%",position:"relative"}}),wF=s=>{const e=EF();return g.createElement("div",{className:e.root},g.createElement(C1.r,{text:Object.values(s.logs).map(i=>i.join(`
`)).filter(Boolean).join(`
`)}))},AF=(0,M.A)(s=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:s.spacing(1)},logsVisibilityButton:{marginRight:s.spacing(1)}})),OF=s=>{var le,ce,he,ge,fe,ye,be,ve;const{taskId:e}=(0,_.g)(),i=(0,bt.S)(Xe.sP),a=(0,_.Zp)(),l=(0,ha.s)(),c=(0,gt.gf)(dn.z),u=tF(e),f=AF(),d=(0,g.useMemo)(()=>{var Me,Fe;return(Fe=(Me=u.task)==null?void 0:Me.spec.steps.map(ke=>{var Se;return{...ke,...(Se=u==null?void 0:u.steps)==null?void 0:Se[ke.id]}}))!=null?Fe:[]},[u]),[h,m]=(0,g.useState)(!1),[p,b]=(0,g.useState)(!0),{allowed:v}=(0,Ni.J)({permission:xs.lu}),{allowed:x}=(0,Ni.J)({permission:xs.Xw}),{allowed:E}=(0,Ni.J)({permission:xs.X6}),w=x&&E;(0,g.useEffect)(()=>{u.error&&m(!0)},[u.error]),(0,g.useEffect)(()=>{u.completed&&!u.error&&b(!1)},[u.error,u.completed]);const A=(0,g.useMemo)(()=>{for(let Me=d.length-1;Me>=0;Me--)if(d[Me].status!=="open")return Me;return 0},[d]),C=(0,g.useCallback)(()=>{var Se,je,pt,et,ct,Tt;const{namespace:Me,name:Fe}=(et=(pt=(je=(Se=u.task)==null?void 0:Se.spec.templateInfo)==null?void 0:je.entity)==null?void 0:pt.metadata)!=null?et:{},ke=(Tt=(ct=u.task)==null?void 0:ct.spec.parameters)!=null?Tt:{};!Me||!Fe||(l.captureEvent("click","Task has been started over"),a({pathname:i({namespace:Me,templateName:Fe}),search:`?${Jy().stringify({formData:JSON.stringify(ke)})}`}))},[l,a,(le=u.task)==null?void 0:le.spec.parameters,(ge=(he=(ce=u.task)==null?void 0:ce.spec.templateInfo)==null?void 0:he.entity)==null?void 0:ge.metadata,i]),[{status:W},{execute:B}]=(0,ph.Y)(async()=>{e&&(l.captureEvent("cancelled","Template has been cancelled"),await c.cancelTask(e))}),V=(fe=s.TemplateOutputsComponent)!=null?fe:fF,J=(ve=(be=(ye=u.task)==null?void 0:ye.spec.templateInfo)==null?void 0:be.entity)==null?void 0:ve.metadata.name,Z=!(u.cancelled||u.completed);return g.createElement(_s.Y,{themeId:"website"},g.createElement(Xs.Y,{pageTitleOverride:`Run of ${J}`,title:g.createElement("div",null,"Run of ",g.createElement("code",null,J)),subtitle:`Task ${e}`},g.createElement(oF,{cancelEnabled:Z,logsVisible:h,buttonBarVisible:p,onStartOver:C,onToggleLogs:m,onToggleButtonBar:b,taskId:e})),g.createElement(ps.U,{className:f.contentWrapper},u.error?g.createElement(pe.A,{paddingBottom:2},g.createElement(Zs.b,{error:u.error,titleFormat:"markdown",title:u.error.message})):null,g.createElement(pe.A,{paddingBottom:2},g.createElement(xF,{steps:d,activeStep:A,isComplete:u.completed,isError:!!u.error})),g.createElement(V,{output:u.output}),p?g.createElement(pe.A,{paddingBottom:2},g.createElement(st.A,null,g.createElement(pe.A,{padding:2},g.createElement("div",{className:f.buttonBar},g.createElement(Hn.A,{className:f.cancelButton,disabled:!Z||W!=="not-executed"||!v,onClick:B,"data-testid":"cancel-button"},"Cancel"),g.createElement(Hn.A,{className:f.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>m(!h)},h?"Hide Logs":"Show Logs"),g.createElement(Hn.A,{variant:"contained",color:"primary",disabled:Z||!w,onClick:C,"data-testid":"start-over-button"},"Start Over"))))):null,h?g.createElement(VN.ResizableBox,{height:240,minConstraints:[0,160],axis:"y"},g.createElement(st.A,{style:{height:"100%"}},g.createElement(pe.A,{padding:2,height:"100%"},g.createElement(wF,{logs:u.stepLogs})))):null))},yh=window.showDirectoryPicker;class CF{constructor(e,i){this.path=e,this.handle=i}file(){return this.handle.getFile()}async save(e){const i=await this.handle.createWritable();await i.write(e),await i.close()}}class kF{constructor(e){this.handle=e}async listFiles(){const e=[];for await(const i of this.listDirectoryContents(this.handle))e.push(i);return e}async*listDirectoryContents(e,i=[]){for await(const a of e.values())if(a.kind==="file")yield new CF([...i,a.name].join("/"),a);else if(a.kind==="directory"){if(a.name===".git")continue;yield*this.listDirectoryContents(a,[...i,a.name])}}}class k1{static isSupported(){return!!yh}static async requestDirectoryAccess(){if(!yh)throw new Error("File system access is not supported");const e=await yh();return new kF(e)}constructor(){}}const TF=1024;let PF=0;class ar{constructor(e,i){this.from=e,this.to=i}}class qe{constructor(e={}){this.id=PF++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=kn.match(e)),i=>{let a=e(i);return a===void 0?null:[this,a]}}}qe.closedBy=new qe({deserialize:s=>s.split(" ")}),qe.openedBy=new qe({deserialize:s=>s.split(" ")}),qe.group=new qe({deserialize:s=>s.split(" ")}),qe.isolate=new qe({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}}),qe.contextHash=new qe({perNode:!0}),qe.lookAhead=new qe({perNode:!0}),qe.mounted=new qe({perNode:!0});class Ha{constructor(e,i,a){this.tree=e,this.overlay=i,this.parser=a}static get(e){return e&&e.props&&e.props[qe.mounted.id]}}const DF=Object.create(null);class kn{constructor(e,i,a,l=0){this.name=e,this.props=i,this.id=a,this.flags=l}static define(e){let i=e.props&&e.props.length?Object.create(null):DF,a=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),l=new kn(e.name||"",i,e.id,a);if(e.props){for(let c of e.props)if(Array.isArray(c)||(c=c(l)),c){if(c[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[c[0].id]=c[1]}}return l}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let i=this.prop(qe.group);return i?i.indexOf(e)>-1:!1}return this.id==e}static match(e){let i=Object.create(null);for(let a in e)for(let l of a.split(" "))i[l]=e[a];return a=>{for(let l=a.prop(qe.group),c=-1;c<(l?l.length:0);c++){let u=i[c<0?a.name:l[c]];if(u)return u}}}}kn.none=new kn("",Object.create(null),0,8);class vh{constructor(e){this.types=e;for(let i=0;i<e.length;i++)if(e[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let i=[];for(let a of this.types){let l=null;for(let c of e){let u=c(a);u&&(l||(l=Object.assign({},a.props)),l[u[0].id]=u[1])}i.push(l?new kn(a.name,l,a.id,a.flags):a)}return new vh(i)}}const Kc=new WeakMap,T1=new WeakMap;var $t;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})($t||($t={}));class Ot{constructor(e,i,a,l,c){if(this.type=e,this.children=i,this.positions=a,this.length=l,this.props=null,c&&c.length){this.props=Object.create(null);for(let[u,f]of c)this.props[typeof u=="number"?u:u.id]=f}}toString(){let e=Ha.get(this);if(e&&!e.overlay)return e.tree.toString();let i="";for(let a of this.children){let l=a.toString();l&&(i&&(i+=","),i+=l)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(e=0){return new Gc(this.topNode,e)}cursorAt(e,i=0,a=0){let l=Kc.get(this)||this.topNode,c=new Gc(l);return c.moveTo(e,i),Kc.set(this,c._tree),c}get topNode(){return new pn(this,0,0,null)}resolve(e,i=0){let a=Ka(Kc.get(this)||this.topNode,e,i,!1);return Kc.set(this,a),a}resolveInner(e,i=0){let a=Ka(T1.get(this)||this.topNode,e,i,!0);return T1.set(this,a),a}resolveStack(e,i=0){return RF(this,e,i)}iterate(e){let{enter:i,leave:a,from:l=0,to:c=this.length}=e,u=e.mode||0,f=(u&$t.IncludeAnonymous)>0;for(let d=this.cursor(u|$t.IncludeAnonymous);;){let h=!1;if(d.from<=c&&d.to>=l&&(!f&&d.type.isAnonymous||i(d)!==!1)){if(d.firstChild())continue;h=!0}for(;h&&a&&(f||!d.type.isAnonymous)&&a(d),!d.nextSibling();){if(!d.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let i in this.props)e.push([+i,this.props[i]]);return e}balance(e={}){return this.children.length<=8?this:Eh(kn.none,this.children,this.positions,0,this.children.length,0,this.length,(i,a,l)=>new Ot(this.type,i,a,l,this.propValues),e.makeTree||((i,a,l)=>new Ot(kn.none,i,a,l)))}static build(e){return NF(e)}}Ot.empty=new Ot(kn.none,[],[],0);class bh{constructor(e,i){this.buffer=e,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new bh(this.buffer,this.index)}}class _i{constructor(e,i,a){this.buffer=e,this.length=i,this.set=a}get type(){return kn.none}toString(){let e=[];for(let i=0;i<this.buffer.length;)e.push(this.childString(i)),i=this.buffer[i+3];return e.join(",")}childString(e){let i=this.buffer[e],a=this.buffer[e+3],l=this.set.types[i],c=l.name;if(/\W/.test(c)&&!l.isError&&(c=JSON.stringify(c)),e+=4,a==e)return c;let u=[];for(;e<a;)u.push(this.childString(e)),e=this.buffer[e+3];return c+"("+u.join(",")+")"}findChild(e,i,a,l,c){let{buffer:u}=this,f=-1;for(let d=e;d!=i&&!(P1(c,l,u[d+1],u[d+2])&&(f=d,a>0));d=u[d+3]);return f}slice(e,i,a){let l=this.buffer,c=new Uint16Array(i-e),u=0;for(let f=e,d=0;f<i;){c[d++]=l[f++],c[d++]=l[f++]-a;let h=c[d++]=l[f++]-a;c[d++]=l[f++]-e,u=Math.max(u,h)}return new _i(c,u,this.set)}}function P1(s,e,i,a){switch(s){case-2:return i<e;case-1:return a>=e&&i<e;case 0:return i<e&&a>e;case 1:return i<=e&&a>e;case 2:return a>e;case 4:return!0}}function Ka(s,e,i,a){for(var l;s.from==s.to||(i<1?s.from>=e:s.from>e)||(i>-1?s.to<=e:s.to<e);){let u=!a&&s instanceof pn&&s.index<0?null:s.parent;if(!u)return s;s=u}let c=a?0:$t.IgnoreOverlays;if(a)for(let u=s,f=u.parent;f;u=f,f=u.parent)u instanceof pn&&u.index<0&&((l=f.enter(e,i,c))===null||l===void 0?void 0:l.from)!=u.from&&(s=f);for(;;){let u=s.enter(e,i,c);if(!u)return s;s=u}}class D1{cursor(e=0){return new Gc(this,e)}getChild(e,i=null,a=null){let l=M1(this,e,i,a);return l.length?l[0]:null}getChildren(e,i=null,a=null){return M1(this,e,i,a)}resolve(e,i=0){return Ka(this,e,i,!1)}resolveInner(e,i=0){return Ka(this,e,i,!0)}matchContext(e){return Sh(this,e)}enterUnfinishedNodesBefore(e){let i=this.childBefore(e),a=this;for(;i;){let l=i.lastChild;if(!l||l.to!=i.to)break;l.type.isError&&l.from==l.to?(a=i,i=l.prevSibling):i=l}return a}get node(){return this}get next(){return this.parent}}class pn extends D1{constructor(e,i,a,l){super(),this._tree=e,this.from=i,this.index=a,this._parent=l}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,i,a,l,c=0){for(let u=this;;){for(let{children:f,positions:d}=u._tree,h=i>0?f.length:-1;e!=h;e+=i){let m=f[e],p=d[e]+u.from;if(P1(l,a,p,p+m.length)){if(m instanceof _i){if(c&$t.ExcludeBuffers)continue;let b=m.findChild(0,m.buffer.length,i,a-p,l);if(b>-1)return new Br(new MF(u,m,e,p),null,b)}else if(c&$t.IncludeAnonymous||!m.type.isAnonymous||xh(m)){let b;if(!(c&$t.IgnoreMounts)&&(b=Ha.get(m))&&!b.overlay)return new pn(b.tree,p,e,u);let v=new pn(m,p,e,u);return c&$t.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(i<0?m.children.length-1:0,i,a,l)}}}if(c&$t.IncludeAnonymous||!u.type.isAnonymous||(u.index>=0?e=u.index+i:e=i<0?-1:u._parent._tree.children.length,u=u._parent,!u))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,i,a=0){let l;if(!(a&$t.IgnoreOverlays)&&(l=Ha.get(this._tree))&&l.overlay){let c=e-this.from;for(let{from:u,to:f}of l.overlay)if((i>0?u<=c:u<c)&&(i<0?f>=c:f>c))return new pn(l.tree,l.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,i,a)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function M1(s,e,i,a){let l=s.cursor(),c=[];if(!l.firstChild())return c;if(i!=null){for(let u=!1;!u;)if(u=l.type.is(i),!l.nextSibling())return c}for(;;){if(a!=null&&l.type.is(a))return c;if(l.type.is(e)&&c.push(l.node),!l.nextSibling())return a==null?c:[]}}function Sh(s,e,i=e.length-1){for(let a=s.parent;i>=0;a=a.parent){if(!a)return!1;if(!a.type.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}class MF{constructor(e,i,a,l){this.parent=e,this.buffer=i,this.index=a,this.start=l}}class Br extends D1{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,i,a){super(),this.context=e,this._parent=i,this.index=a,this.type=e.buffer.set.types[e.buffer.buffer[a]]}child(e,i,a){let{buffer:l}=this.context,c=l.findChild(this.index+4,l.buffer[this.index+3],e,i-this.context.start,a);return c<0?null:new Br(this.context,this,c)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,i,a=0){if(a&$t.ExcludeBuffers)return null;let{buffer:l}=this.context,c=l.findChild(this.index+4,l.buffer[this.index+3],i>0?1:-1,e-this.context.start,i);return c<0?null:new Br(this.context,this,c)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,i=e.buffer[this.index+3];return i<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Br(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new Br(this.context,this._parent,e.findChild(i,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],i=[],{buffer:a}=this.context,l=this.index+4,c=a.buffer[this.index+3];if(c>l){let u=a.buffer[this.index+1];e.push(a.slice(l,c,u)),i.push(0)}return new Ot(this.type,e,i,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function I1(s){if(!s.length)return null;let e=0,i=s[0];for(let c=1;c<s.length;c++){let u=s[c];(u.from>i.from||u.to<i.to)&&(i=u,e=c)}let a=i instanceof pn&&i.index<0?null:i.parent,l=s.slice();return a?l[e]=a:l.splice(e,1),new IF(l,i)}class IF{constructor(e,i){this.heads=e,this.node=i}get next(){return I1(this.heads)}}function RF(s,e,i){let a=s.resolveInner(e,i),l=null;for(let c=a instanceof pn?a:a.context.parent;c;c=c.parent)if(c.index<0){let u=c.parent;(l||(l=[a])).push(u.resolve(e,i)),c=u}else{let u=Ha.get(c.tree);if(u&&u.overlay&&u.overlay[0].from<=e&&u.overlay[u.overlay.length-1].to>=e){let f=new pn(u.tree,u.overlay[0].from+c.from,-1,c);(l||(l=[a])).push(Ka(f,e,i,!1))}}return l?I1(l):a}class Gc{get name(){return this.type.name}constructor(e,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof pn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let a=e._parent;a;a=a._parent)this.stack.unshift(a.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,i){this.index=e;let{start:a,buffer:l}=this.buffer;return this.type=i||l.set.types[l.buffer[e]],this.from=a+l.buffer[e+1],this.to=a+l.buffer[e+2],!0}yield(e){return e?e instanceof pn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,i,a){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,i,a,this.mode));let{buffer:l}=this.buffer,c=l.findChild(this.index+4,l.buffer[this.index+3],e,i-this.buffer.start,a);return c<0?!1:(this.stack.push(this.index),this.yieldBuf(c))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,i,a=this.mode){return this.buffer?a&$t.ExcludeBuffers?!1:this.enterChild(1,e,i):this.yield(this._tree.enter(e,i,a))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$t.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$t.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:i}=this.buffer,a=this.stack.length-1;if(e<0){let l=a<0?0:this.stack[a]+4;if(this.index!=l)return this.yieldBuf(i.findChild(l,this.index,-1,0,4))}else{let l=i.buffer[this.index+3];if(l<(a<0?i.buffer.length:i.buffer[this.stack[a]+3]))return this.yieldBuf(l)}return a<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let i,a,{buffer:l}=this;if(l){if(e>0){if(this.index<l.buffer.buffer.length)return!1}else for(let c=0;c<this.index;c++)if(l.buffer.buffer[c+3]<this.index)return!1;({index:i,parent:a}=l)}else({index:i,_parent:a}=this._tree);for(;a;{index:i,_parent:a}=a)if(i>-1)for(let c=i+e,u=e<0?-1:a._tree.children.length;c!=u;c+=e){let f=a._tree.children[c];if(this.mode&$t.IncludeAnonymous||f instanceof _i||!f.type.isAnonymous||xh(f))return!1}return!0}move(e,i){if(i&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,i=0){for(;(this.from==this.to||(i<1?this.from>=e:this.from>e)||(i>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,i););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,i=null,a=0;if(e&&e.context==this.buffer)e:for(let l=this.index,c=this.stack.length;c>=0;){for(let u=e;u;u=u._parent)if(u.index==l){if(l==this.index)return u;i=u,a=c+1;break e}l=this.stack[--c]}for(let l=a;l<this.stack.length;l++)i=new Br(this.buffer,i,this.stack[l]);return this.bufferNode=new Br(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,i){for(let a=0;;){let l=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){a++;continue}this.type.isAnonymous||(l=!0)}for(;l&&i&&i(this),l=this.type.isAnonymous,!this.nextSibling();){if(!a)return;this.parent(),a--,l=!0}}}matchContext(e){if(!this.buffer)return Sh(this.node,e);let{buffer:i}=this.buffer,{types:a}=i.set;for(let l=e.length-1,c=this.stack.length-1;l>=0;c--){if(c<0)return Sh(this.node,e,l);let u=a[i.buffer[this.stack[c]]];if(!u.isAnonymous){if(e[l]&&e[l]!=u.name)return!1;l--}}return!0}}function xh(s){return s.children.some(e=>e instanceof _i||!e.type.isAnonymous||xh(e))}function NF(s){var e;let{buffer:i,nodeSet:a,maxBufferLength:l=TF,reused:c=[],minRepeatType:u=a.types.length}=s,f=Array.isArray(i)?new bh(i,i.length):i,d=a.types,h=0,m=0;function p(V,J,Z,le,ce,he){let{id:ge,start:fe,end:ye,size:be}=f,ve=m;for(;be<0;)if(f.next(),be==-1){let je=c[ge];Z.push(je),le.push(fe-V);return}else if(be==-3){h=ge;return}else if(be==-4){m=ge;return}else throw new RangeError(`Unrecognized record size: ${be}`);let Me=d[ge],Fe,ke,Se=fe-V;if(ye-fe<=l&&(ke=w(f.pos-J,ce))){let je=new Uint16Array(ke.size-ke.skip),pt=f.pos-ke.size,et=je.length;for(;f.pos>pt;)et=A(ke.start,je,et);Fe=new _i(je,ye-ke.start,a),Se=ke.start-V}else{let je=f.pos-be;f.next();let pt=[],et=[],ct=ge>=u?ge:-1,Tt=0,vt=ye;for(;f.pos>je;)ct>=0&&f.id==ct&&f.size>=0?(f.end<=vt-l&&(x(pt,et,fe,Tt,f.end,vt,ct,ve),Tt=pt.length,vt=f.end),f.next()):he>2500?b(fe,je,pt,et):p(fe,je,pt,et,ct,he+1);if(ct>=0&&Tt>0&&Tt<pt.length&&x(pt,et,fe,Tt,fe,vt,ct,ve),pt.reverse(),et.reverse(),ct>-1&&Tt>0){let jt=v(Me);Fe=Eh(Me,pt,et,0,pt.length,0,ye-fe,jt,jt)}else Fe=E(Me,pt,et,ye-fe,ve-ye)}Z.push(Fe),le.push(Se)}function b(V,J,Z,le){let ce=[],he=0,ge=-1;for(;f.pos>J;){let{id:fe,start:ye,end:be,size:ve}=f;if(ve>4)f.next();else{if(ge>-1&&ye<ge)break;ge<0&&(ge=be-l),ce.push(fe,ye,be),he++,f.next()}}if(he){let fe=new Uint16Array(he*4),ye=ce[ce.length-2];for(let be=ce.length-3,ve=0;be>=0;be-=3)fe[ve++]=ce[be],fe[ve++]=ce[be+1]-ye,fe[ve++]=ce[be+2]-ye,fe[ve++]=ve;Z.push(new _i(fe,ce[2]-ye,a)),le.push(ye-V)}}function v(V){return(J,Z,le)=>{let ce=0,he=J.length-1,ge,fe;if(he>=0&&(ge=J[he])instanceof Ot){if(!he&&ge.type==V&&ge.length==le)return ge;(fe=ge.prop(qe.lookAhead))&&(ce=Z[he]+ge.length+fe)}return E(V,J,Z,le,ce)}}function x(V,J,Z,le,ce,he,ge,fe){let ye=[],be=[];for(;V.length>le;)ye.push(V.pop()),be.push(J.pop()+Z-ce);V.push(E(a.types[ge],ye,be,he-ce,fe-he)),J.push(ce-Z)}function E(V,J,Z,le,ce=0,he){if(h){let ge=[qe.contextHash,h];he=he?[ge].concat(he):[ge]}if(ce>25){let ge=[qe.lookAhead,ce];he=he?[ge].concat(he):[ge]}return new Ot(V,J,Z,le,he)}function w(V,J){let Z=f.fork(),le=0,ce=0,he=0,ge=Z.end-l,fe={size:0,start:0,skip:0};e:for(let ye=Z.pos-V;Z.pos>ye;){let be=Z.size;if(Z.id==J&&be>=0){fe.size=le,fe.start=ce,fe.skip=he,he+=4,le+=4,Z.next();continue}let ve=Z.pos-be;if(be<0||ve<ye||Z.start<ge)break;let Me=Z.id>=u?4:0,Fe=Z.start;for(Z.next();Z.pos>ve;){if(Z.size<0)if(Z.size==-3)Me+=4;else break e;else Z.id>=u&&(Me+=4);Z.next()}ce=Fe,le+=be,he+=Me}return(J<0||le==V)&&(fe.size=le,fe.start=ce,fe.skip=he),fe.size>4?fe:void 0}function A(V,J,Z){let{id:le,start:ce,end:he,size:ge}=f;if(f.next(),ge>=0&&le<u){let fe=Z;if(ge>4){let ye=f.pos-(ge-4);for(;f.pos>ye;)Z=A(V,J,Z)}J[--Z]=fe,J[--Z]=he-V,J[--Z]=ce-V,J[--Z]=le}else ge==-3?h=le:ge==-4&&(m=le);return Z}let C=[],W=[];for(;f.pos>0;)p(s.start||0,s.bufferStart||0,C,W,-1,0);let B=(e=s.length)!==null&&e!==void 0?e:C.length?W[0]+C[0].length:0;return new Ot(d[s.topID],C.reverse(),W.reverse(),B)}const R1=new WeakMap;function Yc(s,e){if(!s.isAnonymous||e instanceof _i||e.type!=s)return 1;let i=R1.get(e);if(i==null){i=1;for(let a of e.children){if(a.type!=s||!(a instanceof Ot)){i=1;break}i+=Yc(s,a)}R1.set(e,i)}return i}function Eh(s,e,i,a,l,c,u,f,d){let h=0;for(let x=a;x<l;x++)h+=Yc(s,e[x]);let m=Math.ceil(h*1.5/8),p=[],b=[];function v(x,E,w,A,C){for(let W=w;W<A;){let B=W,V=E[W],J=Yc(s,x[W]);for(W++;W<A;W++){let Z=Yc(s,x[W]);if(J+Z>=m)break;J+=Z}if(W==B+1){if(J>m){let Z=x[B];v(Z.children,Z.positions,0,Z.children.length,E[B]+C);continue}p.push(x[B])}else{let Z=E[W-1]+x[W-1].length-V;p.push(Eh(s,x,E,B,W,V,Z,null,d))}b.push(V+C-c)}}return v(e,i,a,l,0),(f||d)(p,b,u)}class SW{constructor(){this.map=new WeakMap}setBuffer(e,i,a){let l=this.map.get(e);l||this.map.set(e,l=new Map),l.set(i,a)}getBuffer(e,i){let a=this.map.get(e);return a&&a.get(i)}set(e,i){e instanceof Br?this.setBuffer(e.context.buffer,e.index,i):e instanceof pn&&this.map.set(e.tree,i)}get(e){return e instanceof Br?this.getBuffer(e.context.buffer,e.index):e instanceof pn?this.map.get(e.tree):void 0}cursorSet(e,i){e.buffer?this.setBuffer(e.buffer.buffer,e.index,i):this.map.set(e.tree,i)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class gi{constructor(e,i,a,l,c=!1,u=!1){this.from=e,this.to=i,this.tree=a,this.offset=l,this.open=(c?1:0)|(u?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,i=[],a=!1){let l=[new gi(0,e.length,e,0,!1,a)];for(let c of i)c.to>e.length&&l.push(c);return l}static applyChanges(e,i,a=128){if(!i.length)return e;let l=[],c=1,u=e.length?e[0]:null;for(let f=0,d=0,h=0;;f++){let m=f<i.length?i[f]:null,p=m?m.fromA:1e9;if(p-d>=a)for(;u&&u.from<p;){let b=u;if(d>=b.from||p<=b.to||h){let v=Math.max(b.from,d)-h,x=Math.min(b.to,p)-h;b=v>=x?null:new gi(v,x,b.tree,b.offset+h,f>0,!!m)}if(b&&l.push(b),u.to>p)break;u=c<e.length?e[c++]:null}if(!m)break;d=m.toA,h=m.toA-m.toB}return l}}class N1{startParse(e,i,a){return typeof e=="string"&&(e=new FF(e)),a=a?a.length?a.map(l=>new ar(l.from,l.to)):[new ar(0,0)]:[new ar(0,e.length)],this.createParse(e,i||[],a)}parse(e,i,a){let l=this.startParse(e,i,a);for(;;){let c=l.advance();if(c)return c}}}class FF{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,i){return this.string.slice(e,i)}}function xW(s){return(e,i,a,l)=>new $F(e,s,i,a,l)}class F1{constructor(e,i,a,l,c){this.parser=e,this.parse=i,this.overlay=a,this.target=l,this.from=c}}function L1(s){if(!s.length||s.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(s))}class LF{constructor(e,i,a,l,c,u,f){this.parser=e,this.predicate=i,this.mounts=a,this.index=l,this.start=c,this.target=u,this.prev=f,this.depth=0,this.ranges=[]}}const wh=new qe({perNode:!0});class $F{constructor(e,i,a,l,c){this.nest=i,this.input=a,this.fragments=l,this.ranges=c,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let a=this.baseParse.advance();if(!a)return null;if(this.baseParse=null,this.baseTree=a,this.startInner(),this.stoppedAt!=null)for(let l of this.inner)l.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let a=this.baseTree;return this.stoppedAt!=null&&(a=new Ot(a.type,a.children,a.positions,a.length,a.propValues.concat([[wh,this.stoppedAt]]))),a}let e=this.inner[this.innerDone],i=e.parse.advance();if(i){this.innerDone++;let a=Object.assign(Object.create(null),e.target.props);a[qe.mounted.id]=new Ha(i,e.overlay,e.parser),e.target.props=a}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].from<e&&(e=Math.min(e,this.inner[i].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].parse.stopAt(e)}startInner(){let e=new WF(this.fragments),i=null,a=null,l=new Gc(new pn(this.baseTree,this.ranges[0].from,0,null),$t.IncludeAnonymous|$t.IgnoreMounts);e:for(let c,u;;){let f=!0,d;if(this.stoppedAt!=null&&l.from>=this.stoppedAt)f=!1;else if(e.hasNode(l)){if(i){let h=i.mounts.find(m=>m.frag.from<=l.from&&m.frag.to>=l.to&&m.mount.overlay);if(h)for(let m of h.mount.overlay){let p=m.from+h.pos,b=m.to+h.pos;p>=l.from&&b<=l.to&&!i.ranges.some(v=>v.from<b&&v.to>p)&&i.ranges.push({from:p,to:b})}}f=!1}else if(a&&(u=BF(a.ranges,l.from,l.to)))f=u!=2;else if(!l.type.isAnonymous&&(c=this.nest(l,this.input))&&(l.from<l.to||!c.overlay)){l.tree||jF(l);let h=e.findMounts(l.from,c.parser);if(typeof c.overlay=="function")i=new LF(c.parser,c.overlay,h,this.inner.length,l.from,l.tree,i);else{let m=j1(this.ranges,c.overlay||(l.from<l.to?[new ar(l.from,l.to)]:[]));m.length&&L1(m),(m.length||!c.overlay)&&this.inner.push(new F1(c.parser,m.length?c.parser.startParse(this.input,W1(h,m),m):c.parser.startParse(""),c.overlay?c.overlay.map(p=>new ar(p.from-l.from,p.to-l.from)):null,l.tree,m.length?m[0].from:l.from)),c.overlay?m.length&&(a={ranges:m,depth:0,prev:a}):f=!1}}else i&&(d=i.predicate(l))&&(d===!0&&(d=new ar(l.from,l.to)),d.from<d.to&&i.ranges.push(d));if(f&&l.firstChild())i&&i.depth++,a&&a.depth++;else for(;!l.nextSibling();){if(!l.parent())break e;if(i&&!--i.depth){let h=j1(this.ranges,i.ranges);h.length&&(L1(h),this.inner.splice(i.index,0,new F1(i.parser,i.parser.startParse(this.input,W1(i.mounts,h),h),i.ranges.map(m=>new ar(m.from-i.start,m.to-i.start)),i.target,h[0].from))),i=i.prev}a&&!--a.depth&&(a=a.prev)}}}}function BF(s,e,i){for(let a of s){if(a.from>=i)break;if(a.to>e)return a.from<=e&&a.to>=i?2:1}return 0}function $1(s,e,i,a,l,c){if(e<i){let u=s.buffer[e+1];a.push(s.slice(e,i,u)),l.push(u-c)}}function jF(s){let{node:e}=s,i=[],a=e.context.buffer;do i.push(s.index),s.parent();while(!s.tree);let l=s.tree,c=l.children.indexOf(a),u=l.children[c],f=u.buffer,d=[c];function h(m,p,b,v,x,E){let w=i[E],A=[],C=[];$1(u,m,w,A,C,v);let W=f[w+1],B=f[w+2];d.push(A.length);let V=E?h(w+4,f[w+3],u.set.types[f[w]],W,B-W,E-1):e.toTree();return A.push(V),C.push(W-v),$1(u,f[w+3],p,A,C,v),new Ot(b,A,C,x)}l.children[c]=h(0,f.length,kn.none,0,u.length,i.length-1);for(let m of d){let p=s.tree.children[m],b=s.tree.positions[m];s.yield(new pn(p,b+s.from,m,s._tree))}}class B1{constructor(e,i){this.offset=i,this.done=!1,this.cursor=e.cursor($t.IncludeAnonymous|$t.IgnoreMounts)}moveTo(e){let{cursor:i}=this,a=e-this.offset;for(;!this.done&&i.from<a;)i.to>=e&&i.enter(a,1,$t.IgnoreOverlays|$t.ExcludeBuffers)||i.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let i=this.cursor.tree;;){if(i==e.tree)return!0;if(i.children.length&&i.positions[0]==0&&i.children[0]instanceof Ot)i=i.children[0];else break}return!1}}class WF{constructor(e){var i;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let a=this.curFrag=e[0];this.curTo=(i=a.tree.prop(wh))!==null&&i!==void 0?i:a.to,this.inner=new B1(a.tree,-a.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let i=this.curFrag=this.fragments[this.fragI];this.curTo=(e=i.tree.prop(wh))!==null&&e!==void 0?e:i.to,this.inner=new B1(i.tree,-i.offset)}}findMounts(e,i){var a;let l=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let c=this.inner.cursor.node;c;c=c.parent){let u=(a=c.tree)===null||a===void 0?void 0:a.prop(qe.mounted);if(u&&u.parser==i)for(let f=this.fragI;f<this.fragments.length;f++){let d=this.fragments[f];if(d.from>=c.to)break;d.tree==this.curFrag.tree&&l.push({frag:d,pos:c.from-d.offset,mount:u})}}}return l}}function j1(s,e){let i=null,a=e;for(let l=1,c=0;l<s.length;l++){let u=s[l-1].to,f=s[l].from;for(;c<a.length;c++){let d=a[c];if(d.from>=f)break;d.to<=u||(i||(a=i=e.slice()),d.from<u?(i[c]=new ar(d.from,u),d.to>f&&i.splice(c+1,0,new ar(f,d.to))):d.to>f?i[c--]=new ar(f,d.to):i.splice(c--,1))}}return a}function VF(s,e,i,a){let l=0,c=0,u=!1,f=!1,d=-1e9,h=[];for(;;){let m=l==s.length?1e9:u?s[l].to:s[l].from,p=c==e.length?1e9:f?e[c].to:e[c].from;if(u!=f){let b=Math.max(d,i),v=Math.min(m,p,a);b<v&&h.push(new ar(b,v))}if(d=Math.min(m,p),d==1e9)break;m==d&&(u?(u=!1,l++):u=!0),p==d&&(f?(f=!1,c++):f=!0)}return h}function W1(s,e){let i=[];for(let{pos:a,mount:l,frag:c}of s){let u=a+(l.overlay?l.overlay[0].from:0),f=u+l.tree.length,d=Math.max(c.from,u),h=Math.min(c.to,f);if(l.overlay){let m=l.overlay.map(b=>new ar(b.from+a,b.to+a)),p=VF(e,m,d,h);for(let b=0,v=d;;b++){let x=b==p.length,E=x?h:p[b].from;if(E>v&&i.push(new gi(v,E,l.tree,-u,c.from>=v||c.openStart,c.to<=E||c.openEnd)),x)break;v=p[b].to}}else i.push(new gi(d,h,l.tree,-u,c.from>=u||c.openStart,c.to<=f||c.openEnd))}return i}class mt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,i,a){[e,i]=Eo(this,e,i);let l=[];return this.decompose(0,e,l,2),a.length&&a.decompose(0,a.length,l,3),this.decompose(i,this.length,l,1),jr.from(l,this.length-(i-e)+a.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,i=this.length){[e,i]=Eo(this,e,i);let a=[];return this.decompose(e,i,a,0),jr.from(a,i-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let i=this.scanIdentical(e,1),a=this.length-this.scanIdentical(e,-1),l=new Ga(this),c=new Ga(e);for(let u=i,f=i;;){if(l.next(u),c.next(u),u=0,l.lineBreak!=c.lineBreak||l.done!=c.done||l.value!=c.value)return!1;if(f+=l.value.length,l.done||f>=a)return!0}}iter(e=1){return new Ga(this,e)}iterRange(e,i=this.length){return new z1(this,e,i)}iterLines(e,i){let a;if(e==null)a=this.iter();else{i==null&&(i=this.lines+1);let l=this.line(e).from;a=this.iterRange(l,Math.max(l,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new U1(a)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?mt.empty:e.length<=32?new Ut(e):jr.from(Ut.split(e,[]))}}class Ut extends mt{constructor(e,i=zF(e)){super(),this.text=e,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(e,i,a,l){for(let c=0;;c++){let u=this.text[c],f=l+u.length;if((i?a:f)>=e)return new UF(l,f,a,u);l=f+1,a++}}decompose(e,i,a,l){let c=e<=0&&i>=this.length?this:new Ut(V1(this.text,e,i),Math.min(i,this.length)-Math.max(0,e));if(l&1){let u=a.pop(),f=Jc(c.text,u.text.slice(),0,c.length);if(f.length<=32)a.push(new Ut(f,u.length+c.length));else{let d=f.length>>1;a.push(new Ut(f.slice(0,d)),new Ut(f.slice(d)))}}else a.push(c)}replace(e,i,a){if(!(a instanceof Ut))return super.replace(e,i,a);[e,i]=Eo(this,e,i);let l=Jc(this.text,Jc(a.text,V1(this.text,0,e)),i),c=this.length+a.length-(i-e);return l.length<=32?new Ut(l,c):jr.from(Ut.split(l,[]),c)}sliceString(e,i=this.length,a=`
`){[e,i]=Eo(this,e,i);let l="";for(let c=0,u=0;c<=i&&u<this.text.length;u++){let f=this.text[u],d=c+f.length;c>e&&u&&(l+=a),e<d&&i>c&&(l+=f.slice(Math.max(0,e-c),i-c)),c=d+1}return l}flatten(e){for(let i of this.text)e.push(i)}scanIdentical(){return 0}static split(e,i){let a=[],l=-1;for(let c of e)a.push(c),l+=c.length+1,a.length==32&&(i.push(new Ut(a,l)),a=[],l=-1);return l>-1&&i.push(new Ut(a,l)),i}}class jr extends mt{constructor(e,i){super(),this.children=e,this.length=i,this.lines=0;for(let a of e)this.lines+=a.lines}lineInner(e,i,a,l){for(let c=0;;c++){let u=this.children[c],f=l+u.length,d=a+u.lines-1;if((i?d:f)>=e)return u.lineInner(e,i,a,l);l=f+1,a=d+1}}decompose(e,i,a,l){for(let c=0,u=0;u<=i&&c<this.children.length;c++){let f=this.children[c],d=u+f.length;if(e<=d&&i>=u){let h=l&((u<=e?1:0)|(d>=i?2:0));u>=e&&d<=i&&!h?a.push(f):f.decompose(e-u,i-u,a,h)}u=d+1}}replace(e,i,a){if([e,i]=Eo(this,e,i),a.lines<this.lines)for(let l=0,c=0;l<this.children.length;l++){let u=this.children[l],f=c+u.length;if(e>=c&&i<=f){let d=u.replace(e-c,i-c,a),h=this.lines-u.lines+d.lines;if(d.lines<h>>4&&d.lines>h>>6){let m=this.children.slice();return m[l]=d,new jr(m,this.length-(i-e)+a.length)}return super.replace(c,f,d)}c=f+1}return super.replace(e,i,a)}sliceString(e,i=this.length,a=`
`){[e,i]=Eo(this,e,i);let l="";for(let c=0,u=0;c<this.children.length&&u<=i;c++){let f=this.children[c],d=u+f.length;u>e&&c&&(l+=a),e<d&&i>u&&(l+=f.sliceString(e-u,i-u,a)),u=d+1}return l}flatten(e){for(let i of this.children)i.flatten(e)}scanIdentical(e,i){if(!(e instanceof jr))return 0;let a=0,[l,c,u,f]=i>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;l+=i,c+=i){if(l==u||c==f)return a;let d=this.children[l],h=e.children[c];if(d!=h)return a+d.scanIdentical(h,i);a+=d.length+1}}static from(e,i=e.reduce((a,l)=>a+l.length+1,-1)){let a=0;for(let v of e)a+=v.lines;if(a<32){let v=[];for(let x of e)x.flatten(v);return new Ut(v,i)}let l=Math.max(32,a>>5),c=l<<1,u=l>>1,f=[],d=0,h=-1,m=[];function p(v){let x;if(v.lines>c&&v instanceof jr)for(let E of v.children)p(E);else v.lines>u&&(d>u||!d)?(b(),f.push(v)):v instanceof Ut&&d&&(x=m[m.length-1])instanceof Ut&&v.lines+x.lines<=32?(d+=v.lines,h+=v.length+1,m[m.length-1]=new Ut(x.text.concat(v.text),x.length+1+v.length)):(d+v.lines>l&&b(),d+=v.lines,h+=v.length+1,m.push(v))}function b(){d!=0&&(f.push(m.length==1?m[0]:jr.from(m,h)),h=-1,d=m.length=0)}for(let v of e)p(v);return b(),f.length==1?f[0]:new jr(f,i)}}mt.empty=new Ut([""],0);function zF(s){let e=-1;for(let i of s)e+=i.length+1;return e}function Jc(s,e,i=0,a=1e9){for(let l=0,c=0,u=!0;c<s.length&&l<=a;c++){let f=s[c],d=l+f.length;d>=i&&(d>a&&(f=f.slice(0,a-l)),l<i&&(f=f.slice(i-l)),u?(e[e.length-1]+=f,u=!1):e.push(f)),l=d+1}return e}function V1(s,e,i){return Jc(s,[""],e,i)}class Ga{constructor(e,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[i>0?1:(e instanceof Ut?e.text.length:e.children.length)<<1]}nextInner(e,i){for(this.done=this.lineBreak=!1;;){let a=this.nodes.length-1,l=this.nodes[a],c=this.offsets[a],u=c>>1,f=l instanceof Ut?l.text.length:l.children.length;if(u==(i>0?f:0)){if(a==0)return this.done=!0,this.value="",this;i>0&&this.offsets[a-1]++,this.nodes.pop(),this.offsets.pop()}else if((c&1)==(i>0?0:1)){if(this.offsets[a]+=i,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(l instanceof Ut){let d=l.text[u+(i<0?-1:0)];if(this.offsets[a]+=i,d.length>Math.max(0,e))return this.value=e==0?d:i>0?d.slice(e):d.slice(0,d.length-e),this;e-=d.length}else{let d=l.children[u+(i<0?-1:0)];e>d.length?(e-=d.length,this.offsets[a]+=i):(i<0&&this.offsets[a]--,this.nodes.push(d),this.offsets.push(i>0?1:(d instanceof Ut?d.text.length:d.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class z1{constructor(e,i,a){this.value="",this.done=!1,this.cursor=new Ga(e,i>a?-1:1),this.pos=i>a?e.length:0,this.from=Math.min(i,a),this.to=Math.max(i,a)}nextInner(e,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let a=i<0?this.pos-this.from:this.to-this.pos;e>a&&(e=a),a-=e;let{value:l}=this.cursor.next(e);return this.pos+=(l.length+e)*i,this.value=l.length<=a?l:i<0?l.slice(l.length-a):l.slice(0,a),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class U1{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:i,lineBreak:a,value:l}=this.inner.next(e);return i&&this.afterBreak?(this.value="",this.afterBreak=!1):i?(this.done=!0,this.value=""):a?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=l,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(mt.prototype[Symbol.iterator]=function(){return this.iter()},Ga.prototype[Symbol.iterator]=z1.prototype[Symbol.iterator]=U1.prototype[Symbol.iterator]=function(){return this});class UF{constructor(e,i,a,l){this.from=e,this.to=i,this.number=a,this.text=l}get length(){return this.to-this.from}}function Eo(s,e,i){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,i))]}let wo="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<wo.length;s++)wo[s]+=wo[s-1];function HF(s){for(let e=1;e<wo.length;e+=2)if(wo[e]>s)return wo[e-1]<=s;return!1}function H1(s){return s>=127462&&s<=127487}const K1=8205;function an(s,e,i=!0,a=!0){return(i?G1:KF)(s,e,a)}function G1(s,e,i){if(e==s.length)return e;e&&Y1(s.charCodeAt(e))&&J1(s.charCodeAt(e-1))&&e--;let a=ln(s,e);for(e+=lr(a);e<s.length;){let l=ln(s,e);if(a==K1||l==K1||i&&HF(l))e+=lr(l),a=l;else if(H1(l)){let c=0,u=e-2;for(;u>=0&&H1(ln(s,u));)c++,u-=2;if(c%2==0)break;e+=2}else break}return e}function KF(s,e,i){for(;e>0;){let a=G1(s,e-2,i);if(a<e)return a;e--}return 0}function Y1(s){return s>=56320&&s<57344}function J1(s){return s>=55296&&s<56320}function ln(s,e){let i=s.charCodeAt(e);if(!J1(i)||e+1==s.length)return i;let a=s.charCodeAt(e+1);return Y1(a)?(i-55296<<10)+(a-56320)+65536:i}function Ah(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function lr(s){return s<65536?1:2}const Oh=/\r\n?|\n/;var Tn=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(Tn||(Tn={}));class Wr{constructor(e){this.sections=e}get length(){let e=0;for(let i=0;i<this.sections.length;i+=2)e+=this.sections[i];return e}get newLength(){let e=0;for(let i=0;i<this.sections.length;i+=2){let a=this.sections[i+1];e+=a<0?this.sections[i]:a}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let i=0,a=0,l=0;i<this.sections.length;){let c=this.sections[i++],u=this.sections[i++];u<0?(e(a,l,c),l+=c):l+=u,a+=c}}iterChangedRanges(e,i=!1){Ch(this,e,i)}get invertedDesc(){let e=[];for(let i=0;i<this.sections.length;){let a=this.sections[i++],l=this.sections[i++];l<0?e.push(a,l):e.push(l,a)}return new Wr(e)}composeDesc(e){return this.empty?e:e.empty?this:Z1(this,e)}mapDesc(e,i=!1){return e.empty?this:kh(this,e,i)}mapPos(e,i=-1,a=Tn.Simple){let l=0,c=0;for(let u=0;u<this.sections.length;){let f=this.sections[u++],d=this.sections[u++],h=l+f;if(d<0){if(h>e)return c+(e-l);c+=f}else{if(a!=Tn.Simple&&h>=e&&(a==Tn.TrackDel&&l<e&&h>e||a==Tn.TrackBefore&&l<e||a==Tn.TrackAfter&&h>e))return null;if(h>e||h==e&&i<0&&!f)return e==l||i<0?c:c+d;c+=d}l=h}if(e>l)throw new RangeError(`Position ${e} is out of range for changeset of length ${l}`);return c}touchesRange(e,i=e){for(let a=0,l=0;a<this.sections.length&&l<=i;){let c=this.sections[a++],u=this.sections[a++],f=l+c;if(u>=0&&l<=i&&f>=e)return l<e&&f>i?"cover":!0;l=f}return!1}toString(){let e="";for(let i=0;i<this.sections.length;){let a=this.sections[i++],l=this.sections[i++];e+=(e?" ":"")+a+(l>=0?":"+l:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Wr(e)}static create(e){return new Wr(e)}}class nn extends Wr{constructor(e,i){super(e),this.inserted=i}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Ch(this,(i,a,l,c,u)=>e=e.replace(l,l+(a-i),u),!1),e}mapDesc(e,i=!1){return kh(this,e,i,!0)}invert(e){let i=this.sections.slice(),a=[];for(let l=0,c=0;l<i.length;l+=2){let u=i[l],f=i[l+1];if(f>=0){i[l]=f,i[l+1]=u;let d=l>>1;for(;a.length<d;)a.push(mt.empty);a.push(u?e.slice(c,c+u):mt.empty)}c+=u}return new nn(i,a)}compose(e){return this.empty?e:e.empty?this:Z1(this,e,!0)}map(e,i=!1){return e.empty?this:kh(this,e,i,!0)}iterChanges(e,i=!1){Ch(this,e,i)}get desc(){return Wr.create(this.sections)}filter(e){let i=[],a=[],l=[],c=new Ya(this);e:for(let u=0,f=0;;){let d=u==e.length?1e9:e[u++];for(;f<d||f==d&&c.len==0;){if(c.done)break e;let m=Math.min(c.len,d-f);gn(l,m,-1);let p=c.ins==-1?-1:c.off==0?c.ins:0;gn(i,m,p),p>0&&Xi(a,i,c.text),c.forward(m),f+=m}let h=e[u++];for(;f<h;){if(c.done)break e;let m=Math.min(c.len,h-f);gn(i,m,-1),gn(l,m,c.ins==-1?-1:c.off==0?c.ins:0),c.forward(m),f+=m}}return{changes:new nn(i,a),filtered:Wr.create(l)}}toJSON(){let e=[];for(let i=0;i<this.sections.length;i+=2){let a=this.sections[i],l=this.sections[i+1];l<0?e.push(a):l==0?e.push([a]):e.push([a].concat(this.inserted[i>>1].toJSON()))}return e}static of(e,i,a){let l=[],c=[],u=0,f=null;function d(m=!1){if(!m&&!l.length)return;u<i&&gn(l,i-u,-1);let p=new nn(l,c);f=f?f.compose(p.map(f)):p,l=[],c=[],u=0}function h(m){if(Array.isArray(m))for(let p of m)h(p);else if(m instanceof nn){if(m.length!=i)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${i})`);d(),f=f?f.compose(m.map(f)):m}else{let{from:p,to:b=p,insert:v}=m;if(p>b||p<0||b>i)throw new RangeError(`Invalid change range ${p} to ${b} (in doc of length ${i})`);let x=v?typeof v=="string"?mt.of(v.split(a||Oh)):v:mt.empty,E=x.length;if(p==b&&E==0)return;p<u&&d(),p>u&&gn(l,p-u,-1),gn(l,b-p,E),Xi(c,l,x),u=b}}return h(e),d(!f),f}static empty(e){return new nn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],a=[];for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="number")i.push(c,-1);else{if(!Array.isArray(c)||typeof c[0]!="number"||c.some((u,f)=>f&&typeof u!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(c.length==1)i.push(c[0],0);else{for(;a.length<l;)a.push(mt.empty);a[l]=mt.of(c.slice(1)),i.push(c[0],a[l].length)}}}return new nn(i,a)}static createSet(e,i){return new nn(e,i)}}function gn(s,e,i,a=!1){if(e==0&&i<=0)return;let l=s.length-2;l>=0&&i<=0&&i==s[l+1]?s[l]+=e:e==0&&s[l]==0?s[l+1]+=i:a?(s[l]+=e,s[l+1]+=i):s.push(e,i)}function Xi(s,e,i){if(i.length==0)return;let a=e.length-2>>1;if(a<s.length)s[s.length-1]=s[s.length-1].append(i);else{for(;s.length<a;)s.push(mt.empty);s.push(i)}}function Ch(s,e,i){let a=s.inserted;for(let l=0,c=0,u=0;u<s.sections.length;){let f=s.sections[u++],d=s.sections[u++];if(d<0)l+=f,c+=f;else{let h=l,m=c,p=mt.empty;for(;h+=f,m+=d,d&&a&&(p=p.append(a[u-2>>1])),!(i||u==s.sections.length||s.sections[u+1]<0);)f=s.sections[u++],d=s.sections[u++];e(l,h,c,m,p),l=h,c=m}}}function kh(s,e,i,a=!1){let l=[],c=a?[]:null,u=new Ya(s),f=new Ya(e);for(let d=-1;;)if(u.ins==-1&&f.ins==-1){let h=Math.min(u.len,f.len);gn(l,h,-1),u.forward(h),f.forward(h)}else if(f.ins>=0&&(u.ins<0||d==u.i||u.off==0&&(f.len<u.len||f.len==u.len&&!i))){let h=f.len;for(gn(l,f.ins,-1);h;){let m=Math.min(u.len,h);u.ins>=0&&d<u.i&&u.len<=m&&(gn(l,0,u.ins),c&&Xi(c,l,u.text),d=u.i),u.forward(m),h-=m}f.next()}else if(u.ins>=0){let h=0,m=u.len;for(;m;)if(f.ins==-1){let p=Math.min(m,f.len);h+=p,m-=p,f.forward(p)}else if(f.ins==0&&f.len<m)m-=f.len,f.next();else break;gn(l,h,d<u.i?u.ins:0),c&&d<u.i&&Xi(c,l,u.text),d=u.i,u.forward(u.len-m)}else{if(u.done&&f.done)return c?nn.createSet(l,c):Wr.create(l);throw new Error("Mismatched change set lengths")}}function Z1(s,e,i=!1){let a=[],l=i?[]:null,c=new Ya(s),u=new Ya(e);for(let f=!1;;){if(c.done&&u.done)return l?nn.createSet(a,l):Wr.create(a);if(c.ins==0)gn(a,c.len,0,f),c.next();else if(u.len==0&&!u.done)gn(a,0,u.ins,f),l&&Xi(l,a,u.text),u.next();else{if(c.done||u.done)throw new Error("Mismatched change set lengths");{let d=Math.min(c.len2,u.len),h=a.length;if(c.ins==-1){let m=u.ins==-1?-1:u.off?0:u.ins;gn(a,d,m,f),l&&m&&Xi(l,a,u.text)}else u.ins==-1?(gn(a,c.off?0:c.len,d,f),l&&Xi(l,a,c.textBit(d))):(gn(a,c.off?0:c.len,u.off?0:u.ins,f),l&&!u.off&&Xi(l,a,u.text));f=(c.ins>d||u.ins>=0&&u.len>d)&&(f||a.length>h),c.forward2(d),u.forward(d)}}}}class Ya{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length?mt.empty:e[i]}textBit(e){let{inserted:i}=this.set,a=this.i-2>>1;return a>=i.length&&!e?mt.empty:i[a].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ps{constructor(e,i,a){this.from=e,this.to=i,this.flags=a}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,i=-1){let a,l;return this.empty?a=l=e.mapPos(this.from,i):(a=e.mapPos(this.from,1),l=e.mapPos(this.to,-1)),a==this.from&&l==this.to?this:new Ps(a,l,this.flags)}extend(e,i=e){if(e<=this.anchor&&i>=this.anchor)return de.range(e,i);let a=Math.abs(e-this.anchor)>Math.abs(i-this.anchor)?e:i;return de.range(this.anchor,a)}eq(e,i=!1){return this.anchor==e.anchor&&this.head==e.head&&(!i||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return de.range(e.anchor,e.head)}static create(e,i,a){return new Ps(e,i,a)}}class de{constructor(e,i){this.ranges=e,this.mainIndex=i}map(e,i=-1){return e.empty?this:de.create(this.ranges.map(a=>a.map(e,i)),this.mainIndex)}eq(e,i=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let a=0;a<this.ranges.length;a++)if(!this.ranges[a].eq(e.ranges[a],i))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new de([this.main],0)}addRange(e,i=!0){return de.create([e].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(e,i=this.mainIndex){let a=this.ranges.slice();return a[i]=e,de.create(a,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new de(e.ranges.map(i=>Ps.fromJSON(i)),e.main)}static single(e,i=e){return new de([de.range(e,i)],0)}static create(e,i=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let a=0,l=0;l<e.length;l++){let c=e[l];if(c.empty?c.from<=a:c.from<a)return de.normalized(e.slice(),i);a=c.to}return new de(e,i)}static cursor(e,i=0,a,l){return Ps.create(e,e,(i==0?0:i<0?8:16)|(a==null?7:Math.min(6,a))|(l!=null?l:16777215)<<6)}static range(e,i,a,l){let c=(a!=null?a:16777215)<<6|(l==null?7:Math.min(6,l));return i<e?Ps.create(i,e,48|c):Ps.create(e,i,(i>e?8:0)|c)}static normalized(e,i=0){let a=e[i];e.sort((l,c)=>l.from-c.from),i=e.indexOf(a);for(let l=1;l<e.length;l++){let c=e[l],u=e[l-1];if(c.empty?c.from<=u.to:c.from<u.to){let f=u.from,d=Math.max(c.to,u.to);l<=i&&i--,e.splice(--l,2,c.anchor>c.head?de.range(d,f):de.range(f,d))}}return new de(e,i)}}function _1(s,e){for(let i of s.ranges)if(i.to>e)throw new RangeError("Selection points outside of document")}let Th=0;class Te{constructor(e,i,a,l,c){this.combine=e,this.compareInput=i,this.compare=a,this.isStatic=l,this.id=Th++,this.default=e([]),this.extensions=typeof c=="function"?c(this):c}get reader(){return this}static define(e={}){return new Te(e.combine||(i=>i),e.compareInput||((i,a)=>i===a),e.compare||(e.combine?(i,a)=>i===a:Ph),!!e.static,e.enables)}of(e){return new Zc([],this,0,e)}compute(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new Zc(e,this,1,i)}computeN(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new Zc(e,this,2,i)}from(e,i){return i||(i=a=>a),this.compute([e],a=>i(a.field(e)))}}function Ph(s,e){return s==e||s.length==e.length&&s.every((i,a)=>i===e[a])}class Zc{constructor(e,i,a,l){this.dependencies=e,this.facet=i,this.type=a,this.value=l,this.id=Th++}dynamicSlot(e){var i;let a=this.value,l=this.facet.compareInput,c=this.id,u=e[c]>>1,f=this.type==2,d=!1,h=!1,m=[];for(let p of this.dependencies)p=="doc"?d=!0:p=="selection"?h=!0:((i=e[p.id])!==null&&i!==void 0?i:1)&1||m.push(e[p.id]);return{create(p){return p.values[u]=a(p),1},update(p,b){if(d&&b.docChanged||h&&(b.docChanged||b.selection)||Dh(p,m)){let v=a(p);if(f?!X1(v,p.values[u],l):!l(v,p.values[u]))return p.values[u]=v,1}return 0},reconfigure:(p,b)=>{let v,x=b.config.address[c];if(x!=null){let E=Qc(b,x);if(this.dependencies.every(w=>w instanceof Te?b.facet(w)===p.facet(w):w instanceof Jt?b.field(w,!1)==p.field(w,!1):!0)||(f?X1(v=a(p),E,l):l(v=a(p),E)))return p.values[u]=E,0}else v=a(p);return p.values[u]=v,1}}}}function X1(s,e,i){if(s.length!=e.length)return!1;for(let a=0;a<s.length;a++)if(!i(s[a],e[a]))return!1;return!0}function Dh(s,e){let i=!1;for(let a of e)Za(s,a)&1&&(i=!0);return i}function GF(s,e,i){let a=i.map(d=>s[d.id]),l=i.map(d=>d.type),c=a.filter(d=>!(d&1)),u=s[e.id]>>1;function f(d){let h=[];for(let m=0;m<a.length;m++){let p=Qc(d,a[m]);if(l[m]==2)for(let b of p)h.push(b);else h.push(p)}return e.combine(h)}return{create(d){for(let h of a)Za(d,h);return d.values[u]=f(d),1},update(d,h){if(!Dh(d,c))return 0;let m=f(d);return e.compare(m,d.values[u])?0:(d.values[u]=m,1)},reconfigure(d,h){let m=Dh(d,a),p=h.config.facets[e.id],b=h.facet(e);if(p&&!m&&Ph(i,p))return d.values[u]=b,0;let v=f(d);return e.compare(v,b)?(d.values[u]=b,0):(d.values[u]=v,1)}}}const Q1=Te.define({static:!0});class Jt{constructor(e,i,a,l,c){this.id=e,this.createF=i,this.updateF=a,this.compareF=l,this.spec=c,this.provides=void 0}static define(e){let i=new Jt(Th++,e.create,e.update,e.compare||((a,l)=>a===l),e);return e.provide&&(i.provides=e.provide(i)),i}create(e){let i=e.facet(Q1).find(a=>a.field==this);return((i==null?void 0:i.create)||this.createF)(e)}slot(e){let i=e[this.id]>>1;return{create:a=>(a.values[i]=this.create(a),1),update:(a,l)=>{let c=a.values[i],u=this.updateF(c,l);return this.compareF(c,u)?0:(a.values[i]=u,1)},reconfigure:(a,l)=>l.config.address[this.id]!=null?(a.values[i]=l.field(this),0):(a.values[i]=this.create(a),1)}}init(e){return[this,Q1.of({field:this,create:e})]}get extension(){return this}}const Ds={lowest:4,low:3,default:2,high:1,highest:0};function Ja(s){return e=>new q1(e,s)}const yi={highest:Ja(Ds.highest),high:Ja(Ds.high),default:Ja(Ds.default),low:Ja(Ds.low),lowest:Ja(Ds.lowest)};class q1{constructor(e,i){this.inner=e,this.prec=i}}class _c{of(e){return new Mh(this,e)}reconfigure(e){return _c.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Mh{constructor(e,i){this.compartment=e,this.inner=i}}class Xc{constructor(e,i,a,l,c,u){for(this.base=e,this.compartments=i,this.dynamicSlots=a,this.address=l,this.staticValues=c,this.facets=u,this.statusTemplate=[];this.statusTemplate.length<a.length;)this.statusTemplate.push(0)}staticFacet(e){let i=this.address[e.id];return i==null?e.default:this.staticValues[i>>1]}static resolve(e,i,a){let l=[],c=Object.create(null),u=new Map;for(let b of YF(e,i,u))b instanceof Jt?l.push(b):(c[b.facet.id]||(c[b.facet.id]=[])).push(b);let f=Object.create(null),d=[],h=[];for(let b of l)f[b.id]=h.length<<1,h.push(v=>b.slot(v));let m=a==null?void 0:a.config.facets;for(let b in c){let v=c[b],x=v[0].facet,E=m&&m[b]||[];if(v.every(w=>w.type==0))if(f[x.id]=d.length<<1|1,Ph(E,v))d.push(a.facet(x));else{let w=x.combine(v.map(A=>A.value));d.push(a&&x.compare(w,a.facet(x))?a.facet(x):w)}else{for(let w of v)w.type==0?(f[w.id]=d.length<<1|1,d.push(w.value)):(f[w.id]=h.length<<1,h.push(A=>w.dynamicSlot(A)));f[x.id]=h.length<<1,h.push(w=>GF(w,x,v))}}let p=h.map(b=>b(f));return new Xc(e,u,p,f,d,c)}}function YF(s,e,i){let a=[[],[],[],[],[]],l=new Map;function c(u,f){let d=l.get(u);if(d!=null){if(d<=f)return;let h=a[d].indexOf(u);h>-1&&a[d].splice(h,1),u instanceof Mh&&i.delete(u.compartment)}if(l.set(u,f),Array.isArray(u))for(let h of u)c(h,f);else if(u instanceof Mh){if(i.has(u.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(u.compartment)||u.inner;i.set(u.compartment,h),c(h,f)}else if(u instanceof q1)c(u.inner,u.prec);else if(u instanceof Jt)a[f].push(u),u.provides&&c(u.provides,f);else if(u instanceof Zc)a[f].push(u),u.facet.extensions&&c(u.facet.extensions,Ds.default);else{let h=u.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${u}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);c(h,f)}}return c(s,Ds.default),a.reduce((u,f)=>u.concat(f))}function Za(s,e){if(e&1)return 2;let i=e>>1,a=s.status[i];if(a==4)throw new Error("Cyclic dependency between fields and/or facets");if(a&2)return a;s.status[i]=4;let l=s.computeSlot(s,s.config.dynamicSlots[i]);return s.status[i]=2|l}function Qc(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const eb=Te.define(),Ih=Te.define({combine:s=>s.some(e=>e),static:!0}),tb=Te.define({combine:s=>s.length?s[0]:void 0,static:!0}),nb=Te.define(),rb=Te.define(),ib=Te.define(),sb=Te.define({combine:s=>s.length?s[0]:!1});class Vr{constructor(e,i){this.type=e,this.value=i}static define(){return new JF}}class JF{of(e){return new Vr(this,e)}}class ZF{constructor(e){this.map=e}of(e){return new Ye(this,e)}}class Ye{constructor(e,i){this.type=e,this.value=i}map(e){let i=this.type.map(this.value,e);return i===void 0?void 0:i==this.value?this:new Ye(this.type,i)}is(e){return this.type==e}static define(e={}){return new ZF(e.map||(i=>i))}static mapEffects(e,i){if(!e.length)return e;let a=[];for(let l of e){let c=l.map(i);c&&a.push(c)}return a}}Ye.reconfigure=Ye.define(),Ye.appendConfig=Ye.define();class rn{constructor(e,i,a,l,c,u){this.startState=e,this.changes=i,this.selection=a,this.effects=l,this.annotations=c,this.scrollIntoView=u,this._doc=null,this._state=null,a&&_1(a,i.newLength),c.some(f=>f.type==rn.time)||(this.annotations=c.concat(rn.time.of(Date.now())))}static create(e,i,a,l,c,u){return new rn(e,i,a,l,c,u)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let i of this.annotations)if(i.type==e)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let i=this.annotation(rn.userEvent);return!!(i&&(i==e||i.length>e.length&&i.slice(0,e.length)==e&&i[e.length]=="."))}}rn.time=Vr.define(),rn.userEvent=Vr.define(),rn.addToHistory=Vr.define(),rn.remote=Vr.define();function _F(s,e){let i=[];for(let a=0,l=0;;){let c,u;if(a<s.length&&(l==e.length||e[l]>=s[a]))c=s[a++],u=s[a++];else if(l<e.length)c=e[l++],u=e[l++];else return i;!i.length||i[i.length-1]<c?i.push(c,u):i[i.length-1]<u&&(i[i.length-1]=u)}}function ob(s,e,i){var a;let l,c,u;return i?(l=e.changes,c=nn.empty(e.changes.length),u=s.changes.compose(e.changes)):(l=e.changes.map(s.changes),c=s.changes.mapDesc(e.changes,!0),u=s.changes.compose(l)),{changes:u,selection:e.selection?e.selection.map(c):(a=s.selection)===null||a===void 0?void 0:a.map(l),effects:Ye.mapEffects(s.effects,l).concat(Ye.mapEffects(e.effects,c)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function Rh(s,e,i){let a=e.selection,l=Ao(e.annotations);return e.userEvent&&(l=l.concat(rn.userEvent.of(e.userEvent))),{changes:e.changes instanceof nn?e.changes:nn.of(e.changes||[],i,s.facet(tb)),selection:a&&(a instanceof de?a:de.single(a.anchor,a.head)),effects:Ao(e.effects),annotations:l,scrollIntoView:!!e.scrollIntoView}}function ab(s,e,i){let a=Rh(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(i=!1);for(let c=1;c<e.length;c++){e[c].filter===!1&&(i=!1);let u=!!e[c].sequential;a=ob(a,Rh(s,e[c],u?a.changes.newLength:s.doc.length),u)}let l=rn.create(s,a.changes,a.selection,a.effects,a.annotations,a.scrollIntoView);return QF(i?XF(l):l)}function XF(s){let e=s.startState,i=!0;for(let l of e.facet(nb)){let c=l(s);if(c===!1){i=!1;break}Array.isArray(c)&&(i=i===!0?c:_F(i,c))}if(i!==!0){let l,c;if(i===!1)c=s.changes.invertedDesc,l=nn.empty(e.doc.length);else{let u=s.changes.filter(i);l=u.changes,c=u.filtered.mapDesc(u.changes).invertedDesc}s=rn.create(e,l,s.selection&&s.selection.map(c),Ye.mapEffects(s.effects,c),s.annotations,s.scrollIntoView)}let a=e.facet(rb);for(let l=a.length-1;l>=0;l--){let c=a[l](s);c instanceof rn?s=c:Array.isArray(c)&&c.length==1&&c[0]instanceof rn?s=c[0]:s=ab(e,Ao(c),!1)}return s}function QF(s){let e=s.startState,i=e.facet(ib),a=s;for(let l=i.length-1;l>=0;l--){let c=i[l](s);c&&Object.keys(c).length&&(a=ob(a,Rh(e,c,s.changes.newLength),!0))}return a==s?s:rn.create(e,s.changes,s.selection,a.effects,a.annotations,a.scrollIntoView)}const qF=[];function Ao(s){return s==null?qF:Array.isArray(s)?s:[s]}var Dt=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(Dt||(Dt={}));const eL=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Nh;try{Nh=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function tL(s){if(Nh)return Nh.test(s);for(let e=0;e<s.length;e++){let i=s[e];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||eL.test(i)))return!0}return!1}function nL(s){return e=>{if(!/\S/.test(e))return Dt.Space;if(tL(e))return Dt.Word;for(let i=0;i<s.length;i++)if(e.indexOf(s[i])>-1)return Dt.Word;return Dt.Other}}class rt{constructor(e,i,a,l,c,u){this.config=e,this.doc=i,this.selection=a,this.values=l,this.status=e.statusTemplate.slice(),this.computeSlot=c,u&&(u._state=this);for(let f=0;f<this.config.dynamicSlots.length;f++)Za(this,f<<1);this.computeSlot=null}field(e,i=!0){let a=this.config.address[e.id];if(a==null){if(i)throw new RangeError("Field is not present in this state");return}return Za(this,a),Qc(this,a)}update(...e){return ab(this,e,!0)}applyTransaction(e){let i=this.config,{base:a,compartments:l}=i;for(let f of e.effects)f.is(_c.reconfigure)?(i&&(l=new Map,i.compartments.forEach((d,h)=>l.set(h,d)),i=null),l.set(f.value.compartment,f.value.extension)):f.is(Ye.reconfigure)?(i=null,a=f.value):f.is(Ye.appendConfig)&&(i=null,a=Ao(a).concat(f.value));let c;i?c=e.startState.values.slice():(i=Xc.resolve(a,l,this),c=new rt(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(d,h)=>h.reconfigure(d,this),null).values);let u=e.startState.facet(Ih)?e.newSelection:e.newSelection.asSingle();new rt(i,e.newDoc,u,c,(f,d)=>d.update(f,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:e},range:de.cursor(i.from+e.length)}))}changeByRange(e){let i=this.selection,a=e(i.ranges[0]),l=this.changes(a.changes),c=[a.range],u=Ao(a.effects);for(let f=1;f<i.ranges.length;f++){let d=e(i.ranges[f]),h=this.changes(d.changes),m=h.map(l);for(let b=0;b<f;b++)c[b]=c[b].map(m);let p=l.mapDesc(h,!0);c.push(d.range.map(p)),l=l.compose(m),u=Ye.mapEffects(u,m).concat(Ye.mapEffects(Ao(d.effects),p))}return{changes:l,selection:de.create(c,i.mainIndex),effects:u}}changes(e=[]){return e instanceof nn?e:nn.of(e,this.doc.length,this.facet(rt.lineSeparator))}toText(e){return mt.of(e.split(this.facet(rt.lineSeparator)||Oh))}sliceDoc(e=0,i=this.doc.length){return this.doc.sliceString(e,i,this.lineBreak)}facet(e){let i=this.config.address[e.id];return i==null?e.default:(Za(this,i),Qc(this,i))}toJSON(e){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let a in e){let l=e[a];l instanceof Jt&&this.config.address[l.id]!=null&&(i[a]=l.spec.toJSON(this.field(e[a]),this))}return i}static fromJSON(e,i={},a){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let l=[];if(a){for(let c in a)if(Object.prototype.hasOwnProperty.call(e,c)){let u=a[c],f=e[c];l.push(u.init(d=>u.spec.fromJSON(f,d)))}}return rt.create({doc:e.doc,selection:de.fromJSON(e.selection),extensions:i.extensions?l.concat([i.extensions]):l})}static create(e={}){let i=Xc.resolve(e.extensions||[],new Map),a=e.doc instanceof mt?e.doc:mt.of((e.doc||"").split(i.staticFacet(rt.lineSeparator)||Oh)),l=e.selection?e.selection instanceof de?e.selection:de.single(e.selection.anchor,e.selection.head):de.single(0);return _1(l,a.length),i.staticFacet(Ih)||(l=l.asSingle()),new rt(i,a,l,i.dynamicSlots.map(()=>null),(c,u)=>u.create(c),null)}get tabSize(){return this.facet(rt.tabSize)}get lineBreak(){return this.facet(rt.lineSeparator)||`
`}get readOnly(){return this.facet(sb)}phrase(e,...i){for(let a of this.facet(rt.phrases))if(Object.prototype.hasOwnProperty.call(a,e)){e=a[e];break}return i.length&&(e=e.replace(/\$(\$|\d*)/g,(a,l)=>{if(l=="$")return"$";let c=+(l||1);return!c||c>i.length?a:i[c-1]})),e}languageDataAt(e,i,a=-1){let l=[];for(let c of this.facet(eb))for(let u of c(this,i,a))Object.prototype.hasOwnProperty.call(u,e)&&l.push(u[e]);return l}charCategorizer(e){return nL(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:i,from:a,length:l}=this.doc.lineAt(e),c=this.charCategorizer(e),u=e-a,f=e-a;for(;u>0;){let d=an(i,u,!1);if(c(i.slice(d,u))!=Dt.Word)break;u=d}for(;f<l;){let d=an(i,f);if(c(i.slice(f,d))!=Dt.Word)break;f=d}return u==f?null:de.range(u+a,f+a)}}rt.allowMultipleSelections=Ih,rt.tabSize=Te.define({combine:s=>s.length?s[0]:4}),rt.lineSeparator=tb,rt.readOnly=sb,rt.phrases=Te.define({compare(s,e){let i=Object.keys(s),a=Object.keys(e);return i.length==a.length&&i.every(l=>s[l]==e[l])}}),rt.languageData=eb,rt.changeFilter=nb,rt.transactionFilter=rb,rt.transactionExtender=ib,_c.reconfigure=Ye.define();function Ar(s,e,i={}){let a={};for(let l of s)for(let c of Object.keys(l)){let u=l[c],f=a[c];if(f===void 0)a[c]=u;else if(!(f===u||u===void 0))if(Object.hasOwnProperty.call(i,c))a[c]=i[c](f,u);else throw new Error("Config merge conflict for field "+c)}for(let l in e)a[l]===void 0&&(a[l]=e[l]);return a}class Ms{eq(e){return this==e}range(e,i=e){return _a.create(e,i,this)}}Ms.prototype.startSide=Ms.prototype.endSide=0,Ms.prototype.point=!1,Ms.prototype.mapMode=Tn.TrackDel;class _a{constructor(e,i,a){this.from=e,this.to=i,this.value=a}static create(e,i,a){return new _a(e,i,a)}}function Fh(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class Lh{constructor(e,i,a,l){this.from=e,this.to=i,this.value=a,this.maxPoint=l}get length(){return this.to[this.to.length-1]}findIndex(e,i,a,l=0){let c=a?this.to:this.from;for(let u=l,f=c.length;;){if(u==f)return u;let d=u+f>>1,h=c[d]-e||(a?this.value[d].endSide:this.value[d].startSide)-i;if(d==u)return h>=0?u:f;h>=0?f=d:u=d+1}}between(e,i,a,l){for(let c=this.findIndex(i,-1e9,!0),u=this.findIndex(a,1e9,!1,c);c<u;c++)if(l(this.from[c]+e,this.to[c]+e,this.value[c])===!1)return!1}map(e,i){let a=[],l=[],c=[],u=-1,f=-1;for(let d=0;d<this.value.length;d++){let h=this.value[d],m=this.from[d]+e,p=this.to[d]+e,b,v;if(m==p){let x=i.mapPos(m,h.startSide,h.mapMode);if(x==null||(b=v=x,h.startSide!=h.endSide&&(v=i.mapPos(m,h.endSide),v<b)))continue}else if(b=i.mapPos(m,h.startSide),v=i.mapPos(p,h.endSide),b>v||b==v&&h.startSide>0&&h.endSide<=0)continue;(v-b||h.endSide-h.startSide)<0||(u<0&&(u=b),h.point&&(f=Math.max(f,v-b)),a.push(h),l.push(b-u),c.push(v-u))}return{mapped:a.length?new Lh(l,c,a,f):null,pos:u}}}class it{constructor(e,i,a,l){this.chunkPos=e,this.chunk=i,this.nextLayer=a,this.maxPoint=l}static create(e,i,a,l){return new it(e,i,a,l)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let i of this.chunk)e+=i.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:i=[],sort:a=!1,filterFrom:l=0,filterTo:c=this.length}=e,u=e.filter;if(i.length==0&&!u)return this;if(a&&(i=i.slice().sort(Fh)),this.isEmpty)return i.length?it.of(i):this;let f=new cb(this,null,-1).goto(0),d=0,h=[],m=new vi;for(;f.value||d<i.length;)if(d<i.length&&(f.from-i[d].from||f.startSide-i[d].value.startSide)>=0){let p=i[d++];m.addInner(p.from,p.to,p.value)||h.push(p)}else f.rangeIndex==1&&f.chunkIndex<this.chunk.length&&(d==i.length||this.chunkEnd(f.chunkIndex)<i[d].from)&&(!u||l>this.chunkEnd(f.chunkIndex)||c<this.chunkPos[f.chunkIndex])&&m.addChunk(this.chunkPos[f.chunkIndex],this.chunk[f.chunkIndex])?f.nextChunk():((!u||l>f.to||c<f.from||u(f.from,f.to,f.value))&&(m.addInner(f.from,f.to,f.value)||h.push(_a.create(f.from,f.to,f.value))),f.next());return m.finishInner(this.nextLayer.isEmpty&&!h.length?it.empty:this.nextLayer.update({add:h,filter:u,filterFrom:l,filterTo:c}))}map(e){if(e.empty||this.isEmpty)return this;let i=[],a=[],l=-1;for(let u=0;u<this.chunk.length;u++){let f=this.chunkPos[u],d=this.chunk[u],h=e.touchesRange(f,f+d.length);if(h===!1)l=Math.max(l,d.maxPoint),i.push(d),a.push(e.mapPos(f));else if(h===!0){let{mapped:m,pos:p}=d.map(f,e);m&&(l=Math.max(l,m.maxPoint),i.push(m),a.push(p))}}let c=this.nextLayer.map(e);return i.length==0?c:new it(a,i,c||it.empty,l)}between(e,i,a){if(!this.isEmpty){for(let l=0;l<this.chunk.length;l++){let c=this.chunkPos[l],u=this.chunk[l];if(i>=c&&e<=c+u.length&&u.between(c,e-c,i-c,a)===!1)return}this.nextLayer.between(e,i,a)}}iter(e=0){return Xa.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,i=0){return Xa.from(e).goto(i)}static compare(e,i,a,l,c=-1){let u=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=c),f=i.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=c),d=lb(u,f,a),h=new Qa(u,d,c),m=new Qa(f,d,c);a.iterGaps((p,b,v)=>ub(h,p,m,b,v,l)),a.empty&&a.length==0&&ub(h,0,m,0,0,l)}static eq(e,i,a=0,l){l==null&&(l=999999999);let c=e.filter(m=>!m.isEmpty&&i.indexOf(m)<0),u=i.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(c.length!=u.length)return!1;if(!c.length)return!0;let f=lb(c,u),d=new Qa(c,f,0).goto(a),h=new Qa(u,f,0).goto(a);for(;;){if(d.to!=h.to||!Bh(d.active,h.active)||d.point&&(!h.point||!d.point.eq(h.point)))return!1;if(d.to>l)return!0;d.next(),h.next()}}static spans(e,i,a,l,c=-1){let u=new Qa(e,null,c).goto(i),f=i,d=u.openStart;for(;;){let h=Math.min(u.to,a);if(u.point){let m=u.activeForPoint(u.to),p=u.pointFrom<i?m.length+1:u.point.startSide<0?m.length:Math.min(m.length,d);l.point(f,h,u.point,m,p,u.pointRank),d=Math.min(u.openEnd(h),m.length)}else h>f&&(l.span(f,h,u.active,d),d=u.openEnd(h));if(u.to>a)return d+(u.point&&u.to>a?1:0);f=u.to,u.next()}}static of(e,i=!1){let a=new vi;for(let l of e instanceof _a?[e]:i?rL(e):e)a.add(l.from,l.to,l.value);return a.finish()}static join(e){if(!e.length)return it.empty;let i=e[e.length-1];for(let a=e.length-2;a>=0;a--)for(let l=e[a];l!=it.empty;l=l.nextLayer)i=new it(l.chunkPos,l.chunk,i,Math.max(l.maxPoint,i.maxPoint));return i}}it.empty=new it([],[],null,-1);function rL(s){if(s.length>1)for(let e=s[0],i=1;i<s.length;i++){let a=s[i];if(Fh(e,a)>0)return s.slice().sort(Fh);e=a}return s}it.empty.nextLayer=it.empty;class vi{finishChunk(e){this.chunks.push(new Lh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,i,a){this.addInner(e,i,a)||(this.nextLayer||(this.nextLayer=new vi)).add(e,i,a)}addInner(e,i,a){let l=e-this.lastTo||a.startSide-this.last.endSide;if(l<=0&&(e-this.lastFrom||a.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return l<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(i-this.chunkStart),this.last=a,this.lastFrom=e,this.lastTo=i,this.value.push(a),a.point&&(this.maxPoint=Math.max(this.maxPoint,i-e)),!0)}addChunk(e,i){if((e-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(e);let a=i.value.length-1;return this.last=i.value[a],this.lastFrom=i.from[a]+e,this.lastTo=i.to[a]+e,!0}finish(){return this.finishInner(it.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let i=it.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,i}}function lb(s,e,i){let a=new Map;for(let c of s)for(let u=0;u<c.chunk.length;u++)c.chunk[u].maxPoint<=0&&a.set(c.chunk[u],c.chunkPos[u]);let l=new Set;for(let c of e)for(let u=0;u<c.chunk.length;u++){let f=a.get(c.chunk[u]);f!=null&&(i?i.mapPos(f):f)==c.chunkPos[u]&&!(i!=null&&i.touchesRange(f,f+c.chunk[u].length))&&l.add(c.chunk[u])}return l}class cb{constructor(e,i,a,l=0){this.layer=e,this.skip=i,this.minPoint=a,this.rank=l}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,i,!1),this}gotoInner(e,i,a){for(;this.chunkIndex<this.layer.chunk.length;){let l=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(l)||this.layer.chunkEnd(this.chunkIndex)<e||l.maxPoint<this.minPoint))break;this.chunkIndex++,a=!1}if(this.chunkIndex<this.layer.chunk.length){let l=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],i,!0);(!a||this.rangeIndex<l)&&this.setRangeIndex(l)}this.next()}forward(e,i){(this.to-e||this.endSide-i)<0&&this.gotoInner(e,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],a=e+i.from[this.rangeIndex];if(this.from=a,this.to=e+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Xa{constructor(e){this.heap=e}static from(e,i=null,a=-1){let l=[];for(let c=0;c<e.length;c++)for(let u=e[c];!u.isEmpty;u=u.nextLayer)u.maxPoint>=a&&l.push(new cb(u,i,a,c));return l.length==1?l[0]:new Xa(l)}get startSide(){return this.value?this.value.startSide:0}goto(e,i=-1e9){for(let a of this.heap)a.goto(e,i);for(let a=this.heap.length>>1;a>=0;a--)$h(this.heap,a);return this.next(),this}forward(e,i){for(let a of this.heap)a.forward(e,i);for(let a=this.heap.length>>1;a>=0;a--)$h(this.heap,a);(this.to-e||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),$h(this.heap,0)}}}function $h(s,e){for(let i=s[e];;){let a=(e<<1)+1;if(a>=s.length)break;let l=s[a];if(a+1<s.length&&l.compare(s[a+1])>=0&&(l=s[a+1],a++),i.compare(l)<0)break;s[a]=i,s[e]=l,e=a}}class Qa{constructor(e,i,a){this.minPoint=a,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Xa.from(e,i,a)}goto(e,i=-1e9){return this.cursor.goto(e,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=i,this.openStart=-1,this.next(),this}forward(e,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(e,i)}removeActive(e){qc(this.active,e),qc(this.activeTo,e),qc(this.activeRank,e),this.minActive=fb(this.active,this.activeTo)}addActive(e){let i=0,{value:a,to:l,rank:c}=this.cursor;for(;i<this.activeRank.length&&(c-this.activeRank[i]||l-this.activeTo[i])>0;)i++;eu(this.active,i,a),eu(this.activeTo,i,l),eu(this.activeRank,i,c),e&&eu(e,i,this.cursor.from),this.minActive=fb(this.active,this.activeTo)}next(){let e=this.to,i=this.point;this.point=null;let a=this.openStart<0?[]:null;for(;;){let l=this.minActive;if(l>-1&&(this.activeTo[l]-this.cursor.from||this.active[l].endSide-this.cursor.startSide)<0){if(this.activeTo[l]>e){this.to=this.activeTo[l],this.endSide=this.active[l].endSide;break}this.removeActive(l),a&&qc(a,l)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let c=this.cursor.value;if(!c.point)this.addActive(a),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=c,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=c.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(a){this.openStart=0;for(let l=a.length-1;l>=0&&a[l]<e;l--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let i=[];for(let a=this.active.length-1;a>=0&&!(this.activeRank[a]<this.pointRank);a--)(this.activeTo[a]>e||this.activeTo[a]==e&&this.active[a].endSide>=this.point.endSide)&&i.push(this.active[a]);return i.reverse()}openEnd(e){let i=0;for(let a=this.activeTo.length-1;a>=0&&this.activeTo[a]>e;a--)i++;return i}}function ub(s,e,i,a,l,c){s.goto(e),i.goto(a);let u=a+l,f=a,d=a-e;for(;;){let h=s.to+d-i.to||s.endSide-i.endSide,m=h<0?s.to+d:i.to,p=Math.min(m,u);if(s.point||i.point?s.point&&i.point&&(s.point==i.point||s.point.eq(i.point))&&Bh(s.activeForPoint(s.to),i.activeForPoint(i.to))||c.comparePoint(f,p,s.point,i.point):p>f&&!Bh(s.active,i.active)&&c.compareRange(f,p,s.active,i.active),m>u)break;f=m,h<=0&&s.next(),h>=0&&i.next()}}function Bh(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(s[i]!=e[i]&&!s[i].eq(e[i]))return!1;return!0}function qc(s,e){for(let i=e,a=s.length-1;i<a;i++)s[i]=s[i+1];s.pop()}function eu(s,e,i){for(let a=s.length-1;a>=e;a--)s[a+1]=s[a];s[e]=i}function fb(s,e){let i=-1,a=1e9;for(let l=0;l<e.length;l++)(e[l]-a||s[l].endSide-s[i].endSide)<0&&(i=l,a=e[l]);return i}function Oo(s,e,i=s.length){let a=0;for(let l=0;l<i;)s.charCodeAt(l)==9?(a+=e-a%e,l++):(a++,l=an(s,l));return a}function jh(s,e,i,a){for(let l=0,c=0;;){if(c>=e)return l;if(l==s.length)break;c+=s.charCodeAt(l)==9?i-c%i:1,l=an(s,l)}return a===!0?-1:s.length}const Wh="\u037C",db=typeof Symbol=="undefined"?"__"+Wh:Symbol.for(Wh),Vh=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),hb=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class Qi{constructor(e,i){this.rules=[];let{finish:a}=i||{};function l(u){return/^@/.test(u)?[u]:u.split(/,\s*/)}function c(u,f,d,h){let m=[],p=/^@(\w+)\b/.exec(u[0]),b=p&&p[1]=="keyframes";if(p&&f==null)return d.push(u[0]+";");for(let v in f){let x=f[v];if(/&/.test(v))c(v.split(/,\s*/).map(E=>u.map(w=>E.replace(/&/,w))).reduce((E,w)=>E.concat(w)),x,d);else if(x&&typeof x=="object"){if(!p)throw new RangeError("The value of a property ("+v+") should be a primitive value.");c(l(v),x,m,b)}else x!=null&&m.push(v.replace(/_.*/,"").replace(/[A-Z]/g,E=>"-"+E.toLowerCase())+": "+x+";")}(m.length||b)&&d.push((a&&!p&&!h?u.map(a):u).join(", ")+" {"+m.join(" ")+"}")}for(let u in e)c(l(u),e[u],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=hb[db]||1;return hb[db]=e+1,Wh+e.toString(36)}static mount(e,i,a){let l=e[Vh],c=a&&a.nonce;l?c&&l.setNonce(c):l=new iL(e,c),l.mount(Array.isArray(i)?i:[i],e)}}let mb=new Map;class iL{constructor(e,i){let a=e.ownerDocument||e,l=a.defaultView;if(!e.head&&e.adoptedStyleSheets&&l.CSSStyleSheet){let c=mb.get(a);if(c)return e[Vh]=c;this.sheet=new l.CSSStyleSheet,mb.set(a,this)}else this.styleTag=a.createElement("style"),i&&this.styleTag.setAttribute("nonce",i);this.modules=[],e[Vh]=this}mount(e,i){let a=this.sheet,l=0,c=0;for(let u=0;u<e.length;u++){let f=e[u],d=this.modules.indexOf(f);if(d<c&&d>-1&&(this.modules.splice(d,1),c--,d=-1),d==-1){if(this.modules.splice(c++,0,f),a)for(let h=0;h<f.rules.length;h++)a.insertRule(f.rules[h],l++)}else{for(;c<d;)l+=this.modules[c++].rules.length;l+=f.rules.length,c++}}if(a)i.adoptedStyleSheets.indexOf(this.sheet)<0&&(i.adoptedStyleSheets=[this.sheet,...i.adoptedStyleSheets]);else{let u="";for(let d=0;d<this.modules.length;d++)u+=this.modules[d].getRules()+`
`;this.styleTag.textContent=u;let f=i.head||i;this.styleTag.parentNode!=f&&f.insertBefore(this.styleTag,f.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var qi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},sL=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),oL=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),cn=0;cn<10;cn++)qi[48+cn]=qi[96+cn]=String(cn);for(var cn=1;cn<=24;cn++)qi[cn+111]="F"+cn;for(var cn=65;cn<=90;cn++)qi[cn]=String.fromCharCode(cn+32),qa[cn]=String.fromCharCode(cn);for(var zh in qi)qa.hasOwnProperty(zh)||(qa[zh]=qi[zh]);function aL(s){var e=sL&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||oL&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",i=!e&&s.key||(s.shiftKey?qa:qi)[s.keyCode]||s.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function el(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function Uh(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function lL(s){let e=s.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function tu(s,e){if(!e.anchorNode)return!1;try{return Uh(s,e.anchorNode)}catch{return!1}}function Co(s){return s.nodeType==3?Rs(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function tl(s,e,i,a){return i?pb(s,e,i,a,-1)||pb(s,e,i,a,1):!1}function Is(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function nu(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}function pb(s,e,i,a,l){for(;;){if(s==i&&e==a)return!0;if(e==(l<0?0:bi(s))){if(s.nodeName=="DIV")return!1;let c=s.parentNode;if(!c||c.nodeType!=1)return!1;e=Is(s)+(l<0?0:1),s=c}else if(s.nodeType==1){if(s=s.childNodes[e+(l<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=l<0?bi(s):0}else return!1}}function bi(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function ru(s,e){let i=e?s.left:s.right;return{left:i,right:i,top:s.top,bottom:s.bottom}}function cL(s){let e=s.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function gb(s,e){let i=e.width/s.offsetWidth,a=e.height/s.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.width-s.offsetWidth)<1)&&(i=1),(a>.995&&a<1.005||!isFinite(a)||Math.abs(e.height-s.offsetHeight)<1)&&(a=1),{scaleX:i,scaleY:a}}function uL(s,e,i,a,l,c,u,f){let d=s.ownerDocument,h=d.defaultView||window;for(let m=s,p=!1;m&&!p;)if(m.nodeType==1){let b,v=m==d.body,x=1,E=1;if(v)b=cL(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(p=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let C=m.getBoundingClientRect();({scaleX:x,scaleY:E}=gb(m,C)),b={left:C.left,right:C.left+m.clientWidth*x,top:C.top,bottom:C.top+m.clientHeight*E}}let w=0,A=0;if(l=="nearest")e.top<b.top?(A=-(b.top-e.top+u),i>0&&e.bottom>b.bottom+A&&(A=e.bottom-b.bottom+A+u)):e.bottom>b.bottom&&(A=e.bottom-b.bottom+u,i<0&&e.top-A<b.top&&(A=-(b.top+A-e.top+u)));else{let C=e.bottom-e.top,W=b.bottom-b.top;A=(l=="center"&&C<=W?e.top+C/2-W/2:l=="start"||l=="center"&&i<0?e.top-u:e.bottom-W+u)-b.top}if(a=="nearest"?e.left<b.left?(w=-(b.left-e.left+c),i>0&&e.right>b.right+w&&(w=e.right-b.right+w+c)):e.right>b.right&&(w=e.right-b.right+c,i<0&&e.left<b.left+w&&(w=-(b.left+w-e.left+c))):w=(a=="center"?e.left+(e.right-e.left)/2-(b.right-b.left)/2:a=="start"==f?e.left-c:e.right-(b.right-b.left)+c)-b.left,w||A)if(v)h.scrollBy(w,A);else{let C=0,W=0;if(A){let B=m.scrollTop;m.scrollTop+=A/E,W=(m.scrollTop-B)*E}if(w){let B=m.scrollLeft;m.scrollLeft+=w/x,C=(m.scrollLeft-B)*x}e={left:e.left-C,top:e.top-W,right:e.right-C,bottom:e.bottom-W},C&&Math.abs(C-w)<1&&(a="nearest"),W&&Math.abs(W-A)<1&&(l="nearest")}if(v)break;m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function fL(s){let e=s.ownerDocument,i,a;for(let l=s.parentNode;l&&!(l==e.body||i&&a);)if(l.nodeType==1)!a&&l.scrollHeight>l.clientHeight&&(a=l),!i&&l.scrollWidth>l.clientWidth&&(i=l),l=l.assignedSlot||l.parentNode;else if(l.nodeType==11)l=l.host;else break;return{x:i,y:a}}class dL{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:i,focusNode:a}=e;this.set(i,Math.min(e.anchorOffset,i?bi(i):0),a,Math.min(e.focusOffset,a?bi(a):0))}set(e,i,a,l){this.anchorNode=e,this.anchorOffset=i,this.focusNode=a,this.focusOffset=l}}let ko=null;function yb(s){if(s.setActive)return s.setActive();if(ko)return s.focus(ko);let e=[];for(let i=s;i&&(e.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(s.focus(ko==null?{get preventScroll(){return ko={preventScroll:!0},!0}}:void 0),!ko){ko=!1;for(let i=0;i<e.length;){let a=e[i++],l=e[i++],c=e[i++];a.scrollTop!=l&&(a.scrollTop=l),a.scrollLeft!=c&&(a.scrollLeft=c)}}}let vb;function Rs(s,e,i=e){let a=vb||(vb=document.createRange());return a.setEnd(s,i),a.setStart(s,e),a}function To(s,e,i,a){let l={key:e,code:e,keyCode:i,which:i,cancelable:!0};a&&({altKey:l.altKey,ctrlKey:l.ctrlKey,shiftKey:l.shiftKey,metaKey:l.metaKey}=a);let c=new KeyboardEvent("keydown",l);c.synthetic=!0,s.dispatchEvent(c);let u=new KeyboardEvent("keyup",l);return u.synthetic=!0,s.dispatchEvent(u),c.defaultPrevented||u.defaultPrevented}function hL(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function bb(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function mL(s,e){let i=e.focusNode,a=e.focusOffset;if(!i||e.anchorNode!=i||e.anchorOffset!=a)return!1;for(a=Math.min(a,bi(i));;)if(a){if(i.nodeType!=1)return!1;let l=i.childNodes[a-1];l.contentEditable=="false"?a--:(i=l,a=bi(i))}else{if(i==s)return!0;a=Is(i),i=i.parentNode}}function Sb(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}function xb(s,e){for(let i=s,a=e;;){if(i.nodeType==3&&a>0)return{node:i,offset:a};if(i.nodeType==1&&a>0){if(i.contentEditable=="false")return null;i=i.childNodes[a-1],a=bi(i)}else if(i.parentNode&&!nu(i))a=Is(i),i=i.parentNode;else return null}}function Eb(s,e){for(let i=s,a=e;;){if(i.nodeType==3&&a<i.nodeValue.length)return{node:i,offset:a};if(i.nodeType==1&&a<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[a],a=0}else if(i.parentNode&&!nu(i))a=Is(i)+1,i=i.parentNode;else return null}}class yn{constructor(e,i,a=!0){this.node=e,this.offset=i,this.precise=a}static before(e,i){return new yn(e.parentNode,Is(e),i)}static after(e,i){return new yn(e.parentNode,Is(e)+1,i)}}const Hh=[];class Et{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let i=this.posAtStart;for(let a of this.children){if(a==e)return i;i+=a.length+a.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,i){if(this.flags&2){let a=this.dom,l=null,c;for(let u of this.children){if(u.flags&7){if(!u.dom&&(c=l?l.nextSibling:a.firstChild)){let f=Et.get(c);(!f||!f.parent&&f.canReuseDOM(u))&&u.reuseDOM(c)}u.sync(e,i),u.flags&=-8}if(c=l?l.nextSibling:a.firstChild,i&&!i.written&&i.node==a&&c!=u.dom&&(i.written=!0),u.dom.parentNode==a)for(;c&&c!=u.dom;)c=wb(c);else a.insertBefore(u.dom,c);l=u.dom}for(c=l?l.nextSibling:a.firstChild,c&&i&&i.node==a&&(i.written=!0);c;)c=wb(c)}else if(this.flags&1)for(let a of this.children)a.flags&7&&(a.sync(e,i),a.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,i){let a;if(e==this.dom)a=this.dom.childNodes[i];else{let l=bi(e)==0?0:i==0?-1:1;for(;;){let c=e.parentNode;if(c==this.dom)break;l==0&&c.firstChild!=c.lastChild&&(e==c.firstChild?l=-1:l=1),e=c}l<0?a=e:a=e.nextSibling}if(a==this.dom.firstChild)return 0;for(;a&&!Et.get(a);)a=a.nextSibling;if(!a)return this.length;for(let l=0,c=0;;l++){let u=this.children[l];if(u.dom==a)return c;c+=u.length+u.breakAfter}}domBoundsAround(e,i,a=0){let l=-1,c=-1,u=-1,f=-1;for(let d=0,h=a,m=a;d<this.children.length;d++){let p=this.children[d],b=h+p.length;if(h<e&&b>i)return p.domBoundsAround(e,i,h);if(b>=e&&l==-1&&(l=d,c=h),h>i&&p.dom.parentNode==this.dom){u=d,f=m;break}m=b,h=b+p.breakAfter}return{from:c,to:f<0?a+this.length:f,startDOM:(l?this.children[l-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:u<this.children.length&&u>=0?this.children[u].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let i=this.parent;i;i=i.parent){if(e&&(i.flags|=2),i.flags&1)return;i.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let i=e.parent;if(!i)return e;e=i}}replaceChildren(e,i,a=Hh){this.markDirty();for(let l=e;l<i;l++){let c=this.children[l];c.parent==this&&a.indexOf(c)<0&&c.destroy()}this.children.splice(e,i-e,...a);for(let l=0;l<a.length;l++)a[l].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Ab(this.children,e,this.children.length)}childPos(e,i=1){return this.childCursor().findPos(e,i)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,i,a,l,c,u){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Et.prototype.breakAfter=0;function wb(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class Ab{constructor(e,i,a){this.children=e,this.pos=i,this.i=a,this.off=0}findPos(e,i=1){for(;;){if(e>this.pos||e==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let a=this.children[--this.i];this.pos-=a.length+a.breakAfter}}}function Ob(s,e,i,a,l,c,u,f,d){let{children:h}=s,m=h.length?h[e]:null,p=c.length?c[c.length-1]:null,b=p?p.breakAfter:u;if(!(e==a&&m&&!u&&!b&&c.length<2&&m.merge(i,l,c.length?p:null,i==0,f,d))){if(a<h.length){let v=h[a];v&&(l<v.length||v.breakAfter&&(p!=null&&p.breakAfter))?(e==a&&(v=v.split(l),l=0),!b&&p&&v.merge(0,l,p,!0,0,d)?c[c.length-1]=v:((l||v.children.length&&!v.children[0].length)&&v.merge(0,l,null,!1,0,d),c.push(v))):v!=null&&v.breakAfter&&(p?p.breakAfter=1:u=1),a++}for(m&&(m.breakAfter=u,i>0&&(!u&&c.length&&m.merge(i,m.length,c[0],!1,f,0)?m.breakAfter=c.shift().breakAfter:(i<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(i,m.length,null,!1,f,0),e++));e<a&&c.length;)if(h[a-1].become(c[c.length-1]))a--,c.pop(),d=c.length?0:f;else if(h[e].become(c[0]))e++,c.shift(),f=c.length?0:d;else break;!c.length&&e&&a<h.length&&!h[e-1].breakAfter&&h[a].merge(0,0,h[e-1],!1,f,d)&&e--,(e<a||c.length)&&s.replaceChildren(e,a,c)}}function Cb(s,e,i,a,l,c){let u=s.childCursor(),{i:f,off:d}=u.findPos(i,1),{i:h,off:m}=u.findPos(e,-1),p=e-i;for(let b of a)p+=b.length;s.length+=p,Ob(s,h,m,f,d,a,0,l,c)}let Nn=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Kh=typeof document!="undefined"?document:{documentElement:{style:{}}};const Gh=/Edge\/(\d+)/.exec(Nn.userAgent),kb=/MSIE \d/.test(Nn.userAgent),Yh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Nn.userAgent),iu=!!(kb||Yh||Gh),Tb=!iu&&/gecko\/(\d+)/i.test(Nn.userAgent),Jh=!iu&&/Chrome\/(\d+)/.exec(Nn.userAgent),Pb="webkitFontSmoothing"in Kh.documentElement.style,Db=!iu&&/Apple Computer/.test(Nn.vendor),Mb=Db&&(/Mobile\/\w+/.test(Nn.userAgent)||Nn.maxTouchPoints>2);var Pe={mac:Mb||/Mac/.test(Nn.platform),windows:/Win/.test(Nn.platform),linux:/Linux|X11/.test(Nn.platform),ie:iu,ie_version:kb?Kh.documentMode||6:Yh?+Yh[1]:Gh?+Gh[1]:0,gecko:Tb,gecko_version:Tb?+(/Firefox\/(\d+)/.exec(Nn.userAgent)||[0,0])[1]:0,chrome:!!Jh,chrome_version:Jh?+Jh[1]:0,ios:Mb,android:/Android\b/.test(Nn.userAgent),webkit:Pb,safari:Db,webkit_version:Pb?+(/\bAppleWebKit\/(\d+)/.exec(Nn.userAgent)||[0,0])[1]:0,tabSize:Kh.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const pL=256;class Or extends Et{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,i){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(i&&i.node==this.dom&&(i.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,i,a){return this.flags&8||a&&(!(a instanceof Or)||this.length-(i-e)+a.length>pL||a.flags&8)?!1:(this.text=this.text.slice(0,e)+(a?a.text:"")+this.text.slice(i),this.markDirty(),!0)}split(e){let i=new Or(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),i.flags|=this.flags&8,i}localPosFromDOM(e,i){return e==this.dom?i:i?this.text.length:0}domAtPos(e){return new yn(this.dom,e)}domBoundsAround(e,i,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,i){return gL(this.dom,e,i)}}class Si extends Et{constructor(e,i=[],a=0){super(),this.mark=e,this.children=i,this.length=a;for(let l of i)l.setParent(this)}setAttrs(e){if(bb(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)e.setAttribute(i,this.mark.attrs[i]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,i){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,i)}merge(e,i,a,l,c,u){return a&&(!(a instanceof Si&&a.mark.eq(this.mark))||e&&c<=0||i<this.length&&u<=0)?!1:(Cb(this,e,i,a?a.children.slice():[],c-1,u-1),this.markDirty(),!0)}split(e){let i=[],a=0,l=-1,c=0;for(let f of this.children){let d=a+f.length;d>e&&i.push(a<e?f.split(e-a):f),l<0&&a>=e&&(l=c),a=d,c++}let u=this.length-e;return this.length=e,l>-1&&(this.children.length=l,this.markDirty()),new Si(this.mark,i,u)}domAtPos(e){return Ib(this,e)}coordsAt(e,i){return Nb(this,e,i)}}function gL(s,e,i){let a=s.nodeValue.length;e>a&&(e=a);let l=e,c=e,u=0;e==0&&i<0||e==a&&i>=0?Pe.chrome||Pe.gecko||(e?(l--,u=1):c<a&&(c++,u=-1)):i<0?l--:c<a&&c++;let f=Rs(s,l,c).getClientRects();if(!f.length)return null;let d=f[(u?u<0:i>=0)?0:f.length-1];return Pe.safari&&!u&&d.width==0&&(d=Array.prototype.find.call(f,h=>h.width)||d),u?ru(d,u<0):d||null}class es extends Et{static create(e,i,a){return new es(e,i,a)}constructor(e,i,a){super(),this.widget=e,this.length=i,this.side=a,this.prevWidget=null}split(e){let i=es.create(this.widget,this.length-e,this.side);return this.length-=e,i}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,i,a,l,c,u){return a&&(!(a instanceof es)||!this.widget.compare(a.widget)||e>0&&c<=0||i<this.length&&u<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-i),!0)}become(e){return e instanceof es&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return mt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:i}=e,a=i&&i.state.doc,l=this.posAtStart;return a?a.slice(l,l+this.length):mt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?yn.before(this.dom):yn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,i){let a=this.widget.coordsAt(this.dom,e,i);if(a)return a;let l=this.dom.getClientRects(),c=null;if(!l.length)return null;let u=this.side?this.side<0:e>0;for(let f=u?l.length-1:0;c=l[f],!(e>0?f==0:f==l.length-1||c.top<c.bottom);f+=u?-1:1);return ru(c,!u)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Po extends Et{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Po&&e.side==this.side}split(){return new Po(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?yn.before(this.dom):yn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return mt.empty}get isHidden(){return!0}}Or.prototype.children=es.prototype.children=Po.prototype.children=Hh;function Ib(s,e){let i=s.dom,{children:a}=s,l=0;for(let c=0;l<a.length;l++){let u=a[l],f=c+u.length;if(!(f==c&&u.getSide()<=0)){if(e>c&&e<f&&u.dom.parentNode==i)return u.domAtPos(e-c);if(e<=c)break;c=f}}for(let c=l;c>0;c--){let u=a[c-1];if(u.dom.parentNode==i)return u.domAtPos(u.length)}for(let c=l;c<a.length;c++){let u=a[c];if(u.dom.parentNode==i)return u.domAtPos(0)}return new yn(i,0)}function Rb(s,e,i){let a,{children:l}=s;i>0&&e instanceof Si&&l.length&&(a=l[l.length-1])instanceof Si&&a.mark.eq(e.mark)?Rb(a,e.children[0],i-1):(l.push(e),e.setParent(s)),s.length+=e.length}function Nb(s,e,i){let a=null,l=-1,c=null,u=-1;function f(h,m){for(let p=0,b=0;p<h.children.length&&b<=m;p++){let v=h.children[p],x=b+v.length;x>=m&&(v.children.length?f(v,m-b):(!c||c.isHidden&&i>0)&&(x>m||b==x&&v.getSide()>0)?(c=v,u=m-b):(b<m||b==x&&v.getSide()<0&&!v.isHidden)&&(a=v,l=m-b)),b=x}}f(s,e);let d=(i<0?a:c)||a||c;return d?d.coordsAt(Math.max(0,d==a?l:u),i):yL(s)}function yL(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let i=Co(e);return i[i.length-1]||null}function Zh(s,e){for(let i in s)i=="class"&&e.class?e.class+=" "+s.class:i=="style"&&e.style?e.style+=";"+s.style:e[i]=s[i];return e}const Fb=Object.create(null);function su(s,e,i){if(s==e)return!0;s||(s=Fb),e||(e=Fb);let a=Object.keys(s),l=Object.keys(e);if(a.length-(i&&a.indexOf(i)>-1?1:0)!=l.length-(i&&l.indexOf(i)>-1?1:0))return!1;for(let c of a)if(c!=i&&(l.indexOf(c)==-1||s[c]!==e[c]))return!1;return!0}function _h(s,e,i){let a=!1;if(e)for(let l in e)i&&l in i||(a=!0,l=="style"?s.style.cssText="":s.removeAttribute(l));if(i)for(let l in i)e&&e[l]==i[l]||(a=!0,l=="style"?s.style.cssText=i[l]:s.setAttribute(l,i[l]));return a}function vL(s){let e=Object.create(null);for(let i=0;i<s.attributes.length;i++){let a=s.attributes[i];e[a.name]=a.value}return e}class Zt extends Et{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,i,a,l,c,u){if(a){if(!(a instanceof Zt))return!1;this.dom||a.transferDOM(this)}return l&&this.setDeco(a?a.attrs:null),Cb(this,e,i,a?a.children.slice():[],c,u),!0}split(e){let i=new Zt;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:a,off:l}=this.childPos(e);l&&(i.append(this.children[a].split(l),0),this.children[a].merge(l,this.children[a].length,null,!1,0,0),a++);for(let c=a;c<this.children.length;c++)i.append(this.children[c],0);for(;a>0&&this.children[a-1].length==0;)this.children[--a].destroy();return this.children.length=a,this.markDirty(),this.length=e,i}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){su(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,i){Rb(this,e,i)}addLineDeco(e){let i=e.spec.attributes,a=e.spec.class;i&&(this.attrs=Zh(i,this.attrs||{})),a&&(this.attrs=Zh({class:a},this.attrs||{}))}domAtPos(e){return Ib(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,i){var a;this.dom?this.flags&4&&(bb(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(_h(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,i);let l=this.dom.lastChild;for(;l&&Et.get(l)instanceof Si;)l=l.lastChild;if(!l||!this.length||l.nodeName!="BR"&&((a=Et.get(l))===null||a===void 0?void 0:a.isEditable)==!1&&(!Pe.ios||!this.children.some(c=>c instanceof Or))){let c=document.createElement("BR");c.cmIgnore=!0,this.dom.appendChild(c)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,i;for(let a of this.children){if(!(a instanceof Or)||/[^ -~]/.test(a.text))return null;let l=Co(a.dom);if(l.length!=1)return null;e+=l[0].width,i=l[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:i}:null}coordsAt(e,i){let a=Nb(this,e,i);if(!this.children.length&&a&&this.parent){let{heightOracle:l}=this.parent.view.viewState,c=a.bottom-a.top;if(Math.abs(c-l.lineHeight)<2&&l.textHeight<c){let u=(c-l.textHeight)/2;return{top:a.top+u,bottom:a.bottom-u,left:a.left,right:a.left}}}return a}become(e){return e instanceof Zt&&this.children.length==0&&e.children.length==0&&su(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,i){for(let a=0,l=0;a<e.children.length;a++){let c=e.children[a],u=l+c.length;if(u>=i){if(c instanceof Zt)return c;if(u>i)break}l=u+c.breakAfter}return null}}class xi extends Et{constructor(e,i,a){super(),this.widget=e,this.length=i,this.deco=a,this.breakAfter=0,this.prevWidget=null}merge(e,i,a,l,c,u){return a&&(!(a instanceof xi)||!this.widget.compare(a.widget)||e>0&&c<=0||i<this.length&&u<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-i),!0)}domAtPos(e){return e==0?yn.before(this.dom):yn.after(this.dom,e==this.length)}split(e){let i=this.length-e;this.length=e;let a=new xi(this.widget,i,this.deco);return a.breakAfter=this.breakAfter,a}get children(){return Hh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):mt.empty}domBoundsAround(){return null}become(e){return e instanceof xi&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,i){return this.widget.coordsAt(this.dom,e,i)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:i,endSide:a}=this.deco;return i==a?!1:e<0?i<0:a>0}}class zr{eq(e){return!1}updateDOM(e,i){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,i,a){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Pn=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(Pn||(Pn={}));class Ne extends Ms{constructor(e,i,a,l){super(),this.startSide=e,this.endSide=i,this.widget=a,this.spec=l}get heightRelevant(){return!1}static mark(e){return new nl(e)}static widget(e){let i=Math.max(-1e4,Math.min(1e4,e.side||0)),a=!!e.block;return i+=a&&!e.inlineOrder?i>0?3e8:-4e8:i>0?1e8:-1e8,new ts(e,i,i,a,e.widget||null,!1)}static replace(e){let i=!!e.block,a,l;if(e.isBlockGap)a=-5e8,l=4e8;else{let{start:c,end:u}=Lb(e,i);a=(c?i?-3e8:-1:5e8)-1,l=(u?i?2e8:1:-6e8)+1}return new ts(e,a,l,i,e.widget||null,!0)}static line(e){return new rl(e)}static set(e,i=!1){return it.of(e,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ne.none=it.empty;class nl extends Ne{constructor(e){let{start:i,end:a}=Lb(e);super(i?-1:5e8,a?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var i,a;return this==e||e instanceof nl&&this.tagName==e.tagName&&(this.class||((i=this.attrs)===null||i===void 0?void 0:i.class))==(e.class||((a=e.attrs)===null||a===void 0?void 0:a.class))&&su(this.attrs,e.attrs,"class")}range(e,i=e){if(e>=i)throw new RangeError("Mark decorations may not be empty");return super.range(e,i)}}nl.prototype.point=!1;class rl extends Ne{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof rl&&this.spec.class==e.spec.class&&su(this.spec.attributes,e.spec.attributes)}range(e,i=e){if(i!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,i)}}rl.prototype.mapMode=Tn.TrackBefore,rl.prototype.point=!0;class ts extends Ne{constructor(e,i,a,l,c,u){super(i,a,c,e),this.block=l,this.isReplace=u,this.mapMode=l?i<=0?Tn.TrackBefore:Tn.TrackAfter:Tn.TrackDel}get type(){return this.startSide!=this.endSide?Pn.WidgetRange:this.startSide<=0?Pn.WidgetBefore:Pn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ts&&bL(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,i=e){if(this.isReplace&&(e>i||e==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,i)}}ts.prototype.point=!0;function Lb(s,e=!1){let{inclusiveStart:i,inclusiveEnd:a}=s;return i==null&&(i=s.inclusive),a==null&&(a=s.inclusive),{start:i!=null?i:e,end:a!=null?a:e}}function bL(s,e){return s==e||!!(s&&e&&s.compare(e))}function Xh(s,e,i,a=0){let l=i.length-1;l>=0&&i[l]+a>=s?i[l]=Math.max(i[l],e):i.push(s,e)}class il{constructor(e,i,a,l){this.doc=e,this.pos=i,this.end=a,this.disallowBlockEffectsFor=l,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof xi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Zt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ou(new Po(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof xi)&&this.getLine()}buildText(e,i,a){for(;e>0;){if(this.textOff==this.text.length){let{value:c,lineBreak:u,done:f}=this.cursor.next(this.skip);if(this.skip=0,f)throw new Error("Ran out of text content when drawing inline views");if(u){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=c,this.textOff=0}let l=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(i.slice(i.length-a)),this.getLine().append(ou(new Or(this.text.slice(this.textOff,this.textOff+l)),i),a),this.atCursorPos=!0,this.textOff+=l,e-=l,a=0}}span(e,i,a,l){this.buildText(i-e,a,l),this.pos=i,this.openStart<0&&(this.openStart=l)}point(e,i,a,l,c,u){if(this.disallowBlockEffectsFor[u]&&a instanceof ts){if(a.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let f=i-e;if(a instanceof ts)if(a.block)a.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new xi(a.widget||Do.block,f,a));else{let d=es.create(a.widget||Do.inline,f,f?0:a.startSide),h=this.atCursorPos&&!d.isEditable&&c<=l.length&&(e<i||a.startSide>0),m=!d.isEditable&&(e<i||c>l.length||a.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!h&&!d.isEditable&&(this.pendingBuffer=0),this.flushBuffer(l),h&&(p.append(ou(new Po(1),l),c),c=l.length+Math.max(0,c-l.length)),p.append(ou(d,l),c),this.atCursorPos=m,this.pendingBuffer=m?e<i||c>l.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=l.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(a);f&&(this.textOff+f<=this.text.length?this.textOff+=f:(this.skip+=f-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=c)}static build(e,i,a,l,c){let u=new il(e,i,a,c);return u.openEnd=it.spans(l,i,a,u),u.openStart<0&&(u.openStart=u.openEnd),u.finish(u.openEnd),u}}function ou(s,e){for(let i of e)s=new Si(i,[s],s.length);return s}class Do extends zr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Do.inline=new Do("span"),Do.block=new Do("div");var wt=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(wt||(wt={}));const Ns=wt.LTR,Qh=wt.RTL;function $b(s){let e=[];for(let i=0;i<s.length;i++)e.push(1<<+s[i]);return e}const SL=$b("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),xL=$b("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),qh=Object.create(null),Ur=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),i=s.charCodeAt(1);qh[e]=i,qh[i]=-e}function Bb(s){return s<=247?SL[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?xL[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const EL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ns{get dir(){return this.level%2?Qh:Ns}constructor(e,i,a){this.from=e,this.to=i,this.level=a}side(e,i){return this.dir==i==e?this.to:this.from}forward(e,i){return e==(this.dir==i)}static find(e,i,a,l){let c=-1;for(let u=0;u<e.length;u++){let f=e[u];if(f.from<=i&&f.to>=i){if(f.level==a)return u;(c<0||(l!=0?l<0?f.from<i:f.to>i:e[c].level>f.level))&&(c=u)}}if(c<0)throw new RangeError("Index out of range");return c}}function jb(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++){let a=s[i],l=e[i];if(a.from!=l.from||a.to!=l.to||a.direction!=l.direction||!jb(a.inner,l.inner))return!1}return!0}const At=[];function wL(s,e,i,a,l){for(let c=0;c<=a.length;c++){let u=c?a[c-1].to:e,f=c<a.length?a[c].from:i,d=c?256:l;for(let h=u,m=d,p=d;h<f;h++){let b=Bb(s.charCodeAt(h));b==512?b=m:b==8&&p==4&&(b=16),At[h]=b==4?2:b,b&7&&(p=b),m=b}for(let h=u,m=d,p=d;h<f;h++){let b=At[h];if(b==128)h<f-1&&m==At[h+1]&&m&24?b=At[h]=m:At[h]=256;else if(b==64){let v=h+1;for(;v<f&&At[v]==64;)v++;let x=h&&m==8||v<i&&At[v]==8?p==1?1:8:256;for(let E=h;E<v;E++)At[E]=x;h=v-1}else b==8&&p==1&&(At[h]=1);m=b,b&7&&(p=b)}}}function AL(s,e,i,a,l){let c=l==1?2:1;for(let u=0,f=0,d=0;u<=a.length;u++){let h=u?a[u-1].to:e,m=u<a.length?a[u].from:i;for(let p=h,b,v,x;p<m;p++)if(v=qh[b=s.charCodeAt(p)])if(v<0){for(let E=f-3;E>=0;E-=3)if(Ur[E+1]==-v){let w=Ur[E+2],A=w&2?l:w&4?w&1?c:l:0;A&&(At[p]=At[Ur[E]]=A),f=E;break}}else{if(Ur.length==189)break;Ur[f++]=p,Ur[f++]=b,Ur[f++]=d}else if((x=At[p])==2||x==1){let E=x==l;d=E?0:1;for(let w=f-3;w>=0;w-=3){let A=Ur[w+2];if(A&2)break;if(E)Ur[w+2]|=2;else{if(A&4)break;Ur[w+2]|=4}}}}}function OL(s,e,i,a){for(let l=0,c=a;l<=i.length;l++){let u=l?i[l-1].to:s,f=l<i.length?i[l].from:e;for(let d=u;d<f;){let h=At[d];if(h==256){let m=d+1;for(;;)if(m==f){if(l==i.length)break;m=i[l++].to,f=l<i.length?i[l].from:e}else if(At[m]==256)m++;else break;let p=c==1,b=(m<e?At[m]:a)==1,v=p==b?p?1:2:a;for(let x=m,E=l,w=E?i[E-1].to:s;x>d;)x==w&&(x=i[--E].from,w=E?i[E-1].to:s),At[--x]=v;d=m}else c=h,d++}}}function em(s,e,i,a,l,c,u){let f=a%2?2:1;if(a%2==l%2)for(let d=e,h=0;d<i;){let m=!0,p=!1;if(h==c.length||d<c[h].from){let E=At[d];E!=f&&(m=!1,p=E==16)}let b=!m&&f==1?[]:null,v=m?a:a+1,x=d;e:for(;;)if(h<c.length&&x==c[h].from){if(p)break e;let E=c[h];if(!m)for(let w=E.to,A=h+1;;){if(w==i)break e;if(A<c.length&&c[A].from==w)w=c[A++].to;else{if(At[w]==f)break e;break}}if(h++,b)b.push(E);else{E.from>d&&u.push(new ns(d,E.from,v));let w=E.direction==Ns!=!(v%2);tm(s,w?a+1:a,l,E.inner,E.from,E.to,u),d=E.to}x=E.to}else{if(x==i||(m?At[x]!=f:At[x]==f))break;x++}b?em(s,d,x,a+1,l,b,u):d<x&&u.push(new ns(d,x,v)),d=x}else for(let d=i,h=c.length;d>e;){let m=!0,p=!1;if(!h||d>c[h-1].to){let E=At[d-1];E!=f&&(m=!1,p=E==16)}let b=!m&&f==1?[]:null,v=m?a:a+1,x=d;e:for(;;)if(h&&x==c[h-1].to){if(p)break e;let E=c[--h];if(!m)for(let w=E.from,A=h;;){if(w==e)break e;if(A&&c[A-1].to==w)w=c[--A].from;else{if(At[w-1]==f)break e;break}}if(b)b.push(E);else{E.to<d&&u.push(new ns(E.to,d,v));let w=E.direction==Ns!=!(v%2);tm(s,w?a+1:a,l,E.inner,E.from,E.to,u),d=E.from}x=E.from}else{if(x==e||(m?At[x-1]!=f:At[x-1]==f))break;x--}b?em(s,x,d,a+1,l,b,u):x<d&&u.push(new ns(x,d,v)),d=x}}function tm(s,e,i,a,l,c,u){let f=e%2?2:1;wL(s,l,c,a,f),AL(s,l,c,a,f),OL(l,c,a,f),em(s,l,c,e,i,a,u)}function Wb(s,e,i){if(!s)return[new ns(0,0,e==Qh?1:0)];if(e==Ns&&!i.length&&!EL.test(s))return Vb(s.length);if(i.length)for(;s.length>At.length;)At[At.length]=256;let a=[],l=e==Ns?0:1;return tm(s,l,l,i,0,s.length,a),a}function Vb(s){return[new ns(0,s,0)]}let zb="";function Ub(s,e,i,a,l){var c;let u=a.head-s.from,f=ns.find(e,u,(c=a.bidiLevel)!==null&&c!==void 0?c:-1,a.assoc),d=e[f],h=d.side(l,i);if(u==h){let b=f+=l?1:-1;if(b<0||b>=e.length)return null;d=e[f=b],u=d.side(!l,i),h=d.side(l,i)}let m=an(s.text,u,d.forward(l,i));(m<d.from||m>d.to)&&(m=h),zb=s.text.slice(Math.min(u,m),Math.max(u,m));let p=f==(l?e.length-1:0)?null:e[f+(l?1:-1)];return p&&m==h&&p.level+(l?0:1)<d.level?de.cursor(p.side(!l,i)+s.from,p.forward(l,i)?1:-1,p.level):de.cursor(m+s.from,d.forward(l,i)?-1:1,d.level)}function CL(s,e,i){for(let a=e;a<i;a++){let l=Bb(s.charCodeAt(a));if(l==1)return Ns;if(l==2||l==4)return Qh}return Ns}const Hb=Te.define(),Kb=Te.define(),Gb=Te.define(),Yb=Te.define(),nm=Te.define(),Jb=Te.define(),Zb=Te.define(),_b=Te.define({combine:s=>s.some(e=>e)}),Xb=Te.define({combine:s=>s.some(e=>e)}),Qb=Te.define();class Mo{constructor(e,i="nearest",a="nearest",l=5,c=5,u=!1){this.range=e,this.y=i,this.x=a,this.yMargin=l,this.xMargin=c,this.isSnapshot=u}map(e){return e.empty?this:new Mo(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Mo(de.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const au=Ye.define({map:(s,e)=>s.map(e)}),qb=Ye.define();function Fn(s,e,i){let a=s.facet(Yb);a.length?a[0](e):window.onerror?window.onerror(String(e),i,void 0,void 0,e):i?console.error(i+":",e):console.error(e)}const rs=Te.define({combine:s=>s.length?s[0]:!0});let kL=0;const sl=Te.define();class Bt{constructor(e,i,a,l,c){this.id=e,this.create=i,this.domEventHandlers=a,this.domEventObservers=l,this.extension=c(this)}static define(e,i){const{eventHandlers:a,eventObservers:l,provide:c,decorations:u}=i||{};return new Bt(kL++,e,a,l,f=>{let d=[sl.of(f)];return u&&d.push(ol.of(h=>{let m=h.plugin(f);return m?u(m):Ne.none})),c&&d.push(c(f)),d})}static fromClass(e,i){return Bt.define(a=>new e(a),i)}}class rm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(a){if(Fn(i.state,a,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(i){Fn(e.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(a){Fn(e.state,a,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const eS=Te.define(),lu=Te.define(),ol=Te.define(),tS=Te.define(),im=Te.define(),nS=Te.define();function rS(s,e){let i=s.state.facet(nS);if(!i.length)return i;let a=i.map(c=>c instanceof Function?c(s):c),l=[];return it.spans(a,e.from,e.to,{point(){},span(c,u,f,d){let h=c-e.from,m=u-e.from,p=l;for(let b=f.length-1;b>=0;b--,d--){let v=f[b].spec.bidiIsolate,x;if(v==null&&(v=CL(e.text,h,m)),d>0&&p.length&&(x=p[p.length-1]).to==h&&x.direction==v)x.to=m,p=x.inner;else{let E={from:h,to:m,direction:v,inner:[]};p.push(E),p=E.inner}}}}),l}const iS=Te.define();function sS(s){let e=0,i=0,a=0,l=0;for(let c of s.state.facet(iS)){let u=c(s);u&&(u.left!=null&&(e=Math.max(e,u.left)),u.right!=null&&(i=Math.max(i,u.right)),u.top!=null&&(a=Math.max(a,u.top)),u.bottom!=null&&(l=Math.max(l,u.bottom)))}return{left:e,right:i,top:a,bottom:l}}const al=Te.define();class Zn{constructor(e,i,a,l){this.fromA=e,this.toA=i,this.fromB=a,this.toB=l}join(e){return new Zn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let i=e.length,a=this;for(;i>0;i--){let l=e[i-1];if(!(l.fromA>a.toA)){if(l.toA<a.fromA)break;a=a.join(l),e.splice(i-1,1)}}return e.splice(i,0,a),e}static extendWithRanges(e,i){if(i.length==0)return e;let a=[];for(let l=0,c=0,u=0,f=0;;l++){let d=l==e.length?null:e[l],h=u-f,m=d?d.fromB:1e9;for(;c<i.length&&i[c]<m;){let p=i[c],b=i[c+1],v=Math.max(f,p),x=Math.min(m,b);if(v<=x&&new Zn(v+h,x+h,v,x).addToSet(a),b>m)break;c+=2}if(!d)return a;new Zn(d.fromA,d.toA,d.fromB,d.toB).addToSet(a),u=d.toA,f=d.toB}}}class cu{constructor(e,i,a){this.view=e,this.state=i,this.transactions=a,this.flags=0,this.startState=e.state,this.changes=nn.empty(this.startState.doc.length);for(let c of a)this.changes=this.changes.compose(c.changes);let l=[];this.changes.iterChangedRanges((c,u,f,d)=>l.push(new Zn(c,u,f,d))),this.changedRanges=l}static create(e,i,a){return new cu(e,i,a)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class oS extends Et{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ne.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Zt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Zn(0,0,0,e.state.doc.length)],0,null)}update(e){var i;let a=e.changedRanges;this.minWidth>0&&a.length&&(a.every(({fromA:h,toA:m})=>m<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let l=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((i=this.domChanged)===null||i===void 0)&&i.newSel?l=this.domChanged.newSel.head:!NL(e.changes,this.hasComposition)&&!e.selectionSet&&(l=e.state.selection.main.head));let c=l>-1?PL(this.view,e.changes,l):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:m}=this.hasComposition;a=new Zn(h,m,e.changes.mapPos(h,-1),e.changes.mapPos(m,1)).addToSet(a.slice())}this.hasComposition=c?{from:c.range.fromB,to:c.range.toB}:null,(Pe.ie||Pe.chrome)&&!c&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let u=this.decorations,f=this.updateDeco(),d=IL(u,f,e.changes);return a=Zn.extendWithRanges(a,d),!(this.flags&7)&&a.length==0?!1:(this.updateInner(a,e.startState.doc.length,c),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,i,a){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,i,a);let{observer:l}=this.view;l.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let u=Pe.chrome||Pe.ios?{node:l.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,u),this.flags&=-8,u&&(u.written||l.selectionRange.focusNode!=u.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(u=>u.flags&=-9);let c=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let u of this.children)u instanceof xi&&u.widget instanceof aS&&c.push(u.dom);l.updateGaps(c)}updateChildren(e,i,a){let l=a?a.range.addToSet(e.slice()):e,c=this.childCursor(i);for(let u=l.length-1;;u--){let f=u>=0?l[u]:null;if(!f)break;let{fromA:d,toA:h,fromB:m,toB:p}=f,b,v,x,E;if(a&&a.range.fromB<p&&a.range.toB>m){let B=il.build(this.view.state.doc,m,a.range.fromB,this.decorations,this.dynamicDecorationMap),V=il.build(this.view.state.doc,a.range.toB,p,this.decorations,this.dynamicDecorationMap);v=B.breakAtStart,x=B.openStart,E=V.openEnd;let J=this.compositionView(a);V.breakAtStart?J.breakAfter=1:V.content.length&&J.merge(J.length,J.length,V.content[0],!1,V.openStart,0)&&(J.breakAfter=V.content[0].breakAfter,V.content.shift()),B.content.length&&J.merge(0,0,B.content[B.content.length-1],!0,0,B.openEnd)&&B.content.pop(),b=B.content.concat(J).concat(V.content)}else({content:b,breakAtStart:v,openStart:x,openEnd:E}=il.build(this.view.state.doc,m,p,this.decorations,this.dynamicDecorationMap));let{i:w,off:A}=c.findPos(h,1),{i:C,off:W}=c.findPos(d,-1);Ob(this,C,W,w,A,b,v,x,E)}a&&this.fixCompositionDOM(a)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let i of e.transactions)for(let a of i.effects)a.is(qb)&&(this.editContextFormatting=a.value)}compositionView(e){let i=new Or(e.text.nodeValue);i.flags|=8;for(let{deco:l}of e.marks)i=new Si(l,[i],i.length);let a=new Zt;return a.append(i,0),a}fixCompositionDOM(e){let i=(c,u)=>{u.flags|=8|(u.children.some(d=>d.flags&7)?1:0),this.markedForComposition.add(u);let f=Et.get(c);f&&f!=u&&(f.dom=null),u.setDOM(c)},a=this.childPos(e.range.fromB,1),l=this.children[a.i];i(e.line,l);for(let c=e.marks.length-1;c>=-1;c--)a=l.childPos(a.off,1),l=l.children[a.i],i(c>=0?e.marks[c].node:e.text,l)}updateSelection(e=!1,i=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let a=this.view.root.activeElement,l=a==this.dom,c=!l&&tu(this.dom,this.view.observer.selectionRange)&&!(a&&this.dom.contains(a));if(!(l||i||c))return;let u=this.forceSelection;this.forceSelection=!1;let f=this.view.state.selection.main,d=this.moveToLine(this.domAtPos(f.anchor)),h=f.empty?d:this.moveToLine(this.domAtPos(f.head));if(Pe.gecko&&f.empty&&!this.hasComposition&&TL(d)){let p=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(p,d.node.childNodes[d.offset]||null)),d=h=new yn(p,0),u=!0}let m=this.view.observer.selectionRange;(u||!m.focusNode||(!tl(d.node,d.offset,m.anchorNode,m.anchorOffset)||!tl(h.node,h.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,f))&&(this.view.observer.ignore(()=>{Pe.android&&Pe.chrome&&this.dom.contains(m.focusNode)&&RL(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=el(this.view.root);if(p)if(f.empty){if(Pe.gecko){let b=DL(d.node,d.offset);if(b&&b!=3){let v=(b==1?xb:Eb)(d.node,d.offset);v&&(d=new yn(v.node,v.offset))}}p.collapse(d.node,d.offset),f.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=f.bidiLevel)}else if(p.extend){p.collapse(d.node,d.offset);try{p.extend(h.node,h.offset)}catch{}}else{let b=document.createRange();f.anchor>f.head&&([d,h]=[h,d]),b.setEnd(h.node,h.offset),b.setStart(d.node,d.offset),p.removeAllRanges(),p.addRange(b)}c&&this.view.root.activeElement==this.dom&&(this.dom.blur(),a&&a.focus())}),this.view.observer.setSelectionRange(d,h)),this.impreciseAnchor=d.precise?null:new yn(m.anchorNode,m.anchorOffset),this.impreciseHead=h.precise?null:new yn(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(e,i){return this.hasComposition&&i.empty&&tl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==i.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,i=e.state.selection.main,a=el(e.root),{anchorNode:l,anchorOffset:c}=e.observer.selectionRange;if(!a||!i.empty||!i.assoc||!a.modify)return;let u=Zt.find(this,i.head);if(!u)return;let f=u.posAtStart;if(i.head==f||i.head==f+u.length)return;let d=this.coordsAt(i.head,-1),h=this.coordsAt(i.head,1);if(!d||!h||d.bottom>h.top)return;let m=this.domAtPos(i.head+i.assoc);a.collapse(m.node,m.offset),a.modify("move",i.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=i.from&&a.collapse(l,c)}moveToLine(e){let i=this.dom,a;if(e.node!=i)return e;for(let l=e.offset;!a&&l<i.childNodes.length;l++){let c=Et.get(i.childNodes[l]);c instanceof Zt&&(a=c.domAtPos(0))}for(let l=e.offset-1;!a&&l>=0;l--){let c=Et.get(i.childNodes[l]);c instanceof Zt&&(a=c.domAtPos(c.length))}return a?new yn(a.node,a.offset,!0):e}nearest(e){for(let i=e;i;){let a=Et.get(i);if(a&&a.rootView==this)return a;i=i.parentNode}return null}posFromDOM(e,i){let a=this.nearest(e);if(!a)throw new RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(e,i)+a.posAtStart}domAtPos(e){let{i,off:a}=this.childCursor().findPos(e,-1);for(;i<this.children.length-1;){let l=this.children[i];if(a<l.length||l instanceof Zt)break;i++,a=0}return this.children[i].domAtPos(a)}coordsAt(e,i){let a=null,l=0;for(let c=this.length,u=this.children.length-1;u>=0;u--){let f=this.children[u],d=c-f.breakAfter,h=d-f.length;if(d<e)break;if(h<=e&&(h<e||f.covers(-1))&&(d>e||f.covers(1))&&(!a||f instanceof Zt&&!(a instanceof Zt&&i>=0)))a=f,l=h;else if(a&&h==e&&d==e&&f instanceof xi&&Math.abs(i)<2){if(f.deco.startSide<0)break;u&&(a=null)}c=h}return a?a.coordsAt(e-l,i):null}coordsForChar(e){let{i,off:a}=this.childPos(e,1),l=this.children[i];if(!(l instanceof Zt))return null;for(;l.children.length;){let{i:f,off:d}=l.childPos(a,1);for(;;f++){if(f==l.children.length)return null;if((l=l.children[f]).length)break}a=d}if(!(l instanceof Or))return null;let c=an(l.text,a);if(c==a)return null;let u=Rs(l.dom,a,c).getClientRects();for(let f=0;f<u.length;f++){let d=u[f];if(f==u.length-1||d.top<d.bottom&&d.left<d.right)return d}return null}measureVisibleLineHeights(e){let i=[],{from:a,to:l}=e,c=this.view.contentDOM.clientWidth,u=c>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,f=-1,d=this.view.textDirection==wt.LTR;for(let h=0,m=0;m<this.children.length;m++){let p=this.children[m],b=h+p.length;if(b>l)break;if(h>=a){let v=p.dom.getBoundingClientRect();if(i.push(v.height),u){let x=p.dom.lastChild,E=x?Co(x):[];if(E.length){let w=E[E.length-1],A=d?w.right-v.left:v.right-w.left;A>f&&(f=A,this.minWidth=c,this.minWidthFrom=h,this.minWidthTo=b)}}}h=b+p.breakAfter}return i}textDirectionAt(e){let{i}=this.childPos(e,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?wt.RTL:wt.LTR}measureTextSize(){for(let c of this.children)if(c instanceof Zt){let u=c.measureTextSize();if(u)return u}let e=document.createElement("div"),i,a,l;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let c=Co(e.firstChild)[0];i=e.getBoundingClientRect().height,a=c?c.width/27:7,l=c?c.height:i,e.remove()}),{lineHeight:i,charWidth:a,textHeight:l}}childCursor(e=this.length){let i=this.children.length;return i&&(e-=this.children[--i].length),new Ab(this.children,e,i)}computeBlockGapDeco(){let e=[],i=this.view.viewState;for(let a=0,l=0;;l++){let c=l==i.viewports.length?null:i.viewports[l],u=c?c.from-1:this.length;if(u>a){let f=(i.lineBlockAt(u).bottom-i.lineBlockAt(a).top)/this.view.scaleY;e.push(Ne.replace({widget:new aS(f),block:!0,inclusive:!0,isBlockGap:!0}).range(a,u))}if(!c)break;a=c.to+1}return Ne.set(e)}updateDeco(){let e=1,i=this.view.state.facet(ol).map(c=>(this.dynamicDecorationMap[e++]=typeof c=="function")?c(this.view):c),a=!1,l=this.view.state.facet(tS).map((c,u)=>{let f=typeof c=="function";return f&&(a=!0),f?c(this.view):c});for(l.length&&(this.dynamicDecorationMap[e++]=a,i.push(it.join(l))),this.decorations=[this.editContextFormatting,...i,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(Qb))try{if(h(this.view,e.range,e))return!0}catch(m){Fn(this.view.state,m,"scroll handler")}let{range:i}=e,a=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),l;if(!a)return;!i.empty&&(l=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(a={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top),right:Math.max(a.right,l.right),bottom:Math.max(a.bottom,l.bottom)});let c=sS(this.view),u={left:a.left-c.left,top:a.top-c.top,right:a.right+c.right,bottom:a.bottom+c.bottom},{offsetWidth:f,offsetHeight:d}=this.view.scrollDOM;uL(this.view.scrollDOM,u,i.head<i.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,f),-f),Math.max(Math.min(e.yMargin,d),-d),this.view.textDirection==wt.LTR)}}function TL(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}class aS extends zr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function lS(s,e){let i=s.observer.selectionRange;if(!i.focusNode)return null;let a=xb(i.focusNode,i.focusOffset),l=Eb(i.focusNode,i.focusOffset),c=a||l;if(l&&a&&l.node!=a.node){let f=Et.get(l.node);if(!f||f instanceof Or&&f.text!=l.node.nodeValue)c=l;else if(s.docView.lastCompositionAfterCursor){let d=Et.get(a.node);!d||d instanceof Or&&d.text!=a.node.nodeValue||(c=l)}}if(s.docView.lastCompositionAfterCursor=c!=a,!c)return null;let u=e-c.offset;return{from:u,to:u+c.node.nodeValue.length,node:c.node}}function PL(s,e,i){let a=lS(s,i);if(!a)return null;let{node:l,from:c,to:u}=a,f=l.nodeValue;if(/[\n\r]/.test(f)||s.state.doc.sliceString(a.from,a.to)!=f)return null;let d=e.invertedDesc,h=new Zn(d.mapPos(c),d.mapPos(u),c,u),m=[];for(let p=l.parentNode;;p=p.parentNode){let b=Et.get(p);if(b instanceof Si)m.push({node:p,deco:b.mark});else{if(b instanceof Zt||p.nodeName=="DIV"&&p.parentNode==s.contentDOM)return{range:h,text:l,marks:m,line:p};if(p!=s.contentDOM)m.push({node:p,deco:new nl({inclusive:!0,attributes:vL(p),tagName:p.tagName.toLowerCase()})});else return null}}}function DL(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let ML=class{constructor(){this.changes=[]}compareRange(e,i){Xh(e,i,this.changes)}comparePoint(e,i){Xh(e,i,this.changes)}};function IL(s,e,i){let a=new ML;return it.compare(s,e,i,a),a.changes}function RL(s,e){for(let i=s;i&&i!=e;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function NL(s,e){let i=!1;return e&&s.iterChangedRanges((a,l)=>{a<e.to&&l>e.from&&(i=!0)}),i}function FL(s,e,i=1){let a=s.charCategorizer(e),l=s.doc.lineAt(e),c=e-l.from;if(l.length==0)return de.cursor(e);c==0?i=1:c==l.length&&(i=-1);let u=c,f=c;i<0?u=an(l.text,c,!1):f=an(l.text,c);let d=a(l.text.slice(u,f));for(;u>0;){let h=an(l.text,u,!1);if(a(l.text.slice(h,u))!=d)break;u=h}for(;f<l.length;){let h=an(l.text,f);if(a(l.text.slice(f,h))!=d)break;f=h}return de.range(u+l.from,f+l.from)}function LL(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function $L(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function sm(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function cS(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function uS(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function om(s,e,i){let a,l,c,u,f=!1,d,h,m,p;for(let x=s.firstChild;x;x=x.nextSibling){let E=Co(x);for(let w=0;w<E.length;w++){let A=E[w];l&&sm(l,A)&&(A=cS(uS(A,l.bottom),l.top));let C=LL(e,A),W=$L(i,A);if(C==0&&W==0)return x.nodeType==3?fS(x,e,i):om(x,e,i);if(!a||u>W||u==W&&c>C){a=x,l=A,c=C,u=W;let B=W?i<A.top?-1:1:C?e<A.left?-1:1:0;f=!B||(B>0?w<E.length-1:w>0)}C==0?i>A.bottom&&(!m||m.bottom<A.bottom)?(d=x,m=A):i<A.top&&(!p||p.top>A.top)&&(h=x,p=A):m&&sm(m,A)?m=uS(m,A.bottom):p&&sm(p,A)&&(p=cS(p,A.top))}}if(m&&m.bottom>=i?(a=d,l=m):p&&p.top<=i&&(a=h,l=p),!a)return{node:s,offset:0};let b=Math.max(l.left,Math.min(l.right,e));if(a.nodeType==3)return fS(a,b,i);if(f&&a.contentEditable!="false")return om(a,b,i);let v=Array.prototype.indexOf.call(s.childNodes,a)+(e>=(l.left+l.right)/2?1:0);return{node:s,offset:v}}function fS(s,e,i){let a=s.nodeValue.length,l=-1,c=1e9,u=0;for(let f=0;f<a;f++){let d=Rs(s,f,f+1).getClientRects();for(let h=0;h<d.length;h++){let m=d[h];if(m.top==m.bottom)continue;u||(u=e-m.left);let p=(m.top>i?m.top-i:i-m.bottom)-1;if(m.left-1<=e&&m.right+1>=e&&p<c){let b=e>=(m.left+m.right)/2,v=b;if((Pe.chrome||Pe.gecko)&&Rs(s,f).getBoundingClientRect().left==m.right&&(v=!b),p<=0)return{node:s,offset:f+(v?1:0)};l=f+(v?1:0),c=p}}}return{node:s,offset:l>-1?l:u>0?s.nodeValue.length:0}}function dS(s,e,i,a=-1){var l,c;let u=s.contentDOM.getBoundingClientRect(),f=u.top+s.viewState.paddingTop,d,{docHeight:h}=s.viewState,{x:m,y:p}=e,b=p-f;if(b<0)return 0;if(b>h)return s.state.doc.length;for(let B=s.viewState.heightOracle.textHeight/2,V=!1;d=s.elementAtHeight(b),d.type!=Pn.Text;)for(;b=a>0?d.bottom+B:d.top-B,!(b>=0&&b<=h);){if(V)return i?null:0;V=!0,a=-a}p=f+b;let v=d.from;if(v<s.viewport.from)return s.viewport.from==0?0:i?null:hS(s,u,d,m,p);if(v>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:i?null:hS(s,u,d,m,p);let x=s.dom.ownerDocument,E=s.root.elementFromPoint?s.root:x,w=E.elementFromPoint(m,p);w&&!s.contentDOM.contains(w)&&(w=null),w||(m=Math.max(u.left+1,Math.min(u.right-1,m)),w=E.elementFromPoint(m,p),w&&!s.contentDOM.contains(w)&&(w=null));let A,C=-1;if(w&&((l=s.docView.nearest(w))===null||l===void 0?void 0:l.isEditable)!=!1){if(x.caretPositionFromPoint){let B=x.caretPositionFromPoint(m,p);B&&({offsetNode:A,offset:C}=B)}else if(x.caretRangeFromPoint){let B=x.caretRangeFromPoint(m,p);B&&({startContainer:A,startOffset:C}=B,(!s.contentDOM.contains(A)||Pe.safari&&BL(A,C,m)||Pe.chrome&&jL(A,C,m))&&(A=void 0))}}if(!A||!s.docView.dom.contains(A)){let B=Zt.find(s.docView,v);if(!B)return b>d.top+d.height/2?d.to:d.from;({node:A,offset:C}=om(B.dom,m,p))}let W=s.docView.nearest(A);if(!W)return null;if(W.isWidget&&((c=W.dom)===null||c===void 0?void 0:c.nodeType)==1){let B=W.dom.getBoundingClientRect();return e.y<B.top||e.y<=B.bottom&&e.x<=(B.left+B.right)/2?W.posAtStart:W.posAtEnd}else return W.localPosFromDOM(A,C)+W.posAtStart}function hS(s,e,i,a,l){let c=Math.round((a-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&i.height>s.defaultLineHeight*1.5){let f=s.viewState.heightOracle.textHeight,d=Math.floor((l-i.top-(s.defaultLineHeight-f)*.5)/f);c+=d*s.viewState.heightOracle.lineLength}let u=s.state.sliceDoc(i.from,i.to);return i.from+jh(u,c,s.state.tabSize)}function BL(s,e,i){let a;if(s.nodeType!=3||e!=(a=s.nodeValue.length))return!1;for(let l=s.nextSibling;l;l=l.nextSibling)if(l.nodeType!=1||l.nodeName!="BR")return!1;return Rs(s,a-1,a).getBoundingClientRect().left>i}function jL(s,e,i){if(e!=0)return!1;for(let l=s;;){let c=l.parentNode;if(!c||c.nodeType!=1||c.firstChild!=l)return!1;if(c.classList.contains("cm-line"))break;l=c}let a=s.nodeType==1?s.getBoundingClientRect():Rs(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return i-a.left>5}function am(s,e){let i=s.lineBlockAt(e);if(Array.isArray(i.type)){for(let a of i.type)if(a.to>e||a.to==e&&(a.to==i.to||a.type==Pn.Text))return a}return i}function WL(s,e,i,a){let l=am(s,e.head),c=!a||l.type!=Pn.Text||!(s.lineWrapping||l.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>l.from?e.head-1:e.head);if(c){let u=s.dom.getBoundingClientRect(),f=s.textDirectionAt(l.from),d=s.posAtCoords({x:i==(f==wt.LTR)?u.right-1:u.left+1,y:(c.top+c.bottom)/2});if(d!=null)return de.cursor(d,i?-1:1)}return de.cursor(i?l.to:l.from,i?-1:1)}function mS(s,e,i,a){let l=s.state.doc.lineAt(e.head),c=s.bidiSpans(l),u=s.textDirectionAt(l.from);for(let f=e,d=null;;){let h=Ub(l,c,u,f,i),m=zb;if(!h){if(l.number==(i?s.state.doc.lines:1))return f;m=`
`,l=s.state.doc.line(l.number+(i?1:-1)),c=s.bidiSpans(l),h=s.visualLineSide(l,!i)}if(d){if(!d(m))return f}else{if(!a)return h;d=a(m)}f=h}}function VL(s,e,i){let a=s.state.charCategorizer(e),l=a(i);return c=>{let u=a(c);return l==Dt.Space&&(l=u),l==u}}function zL(s,e,i,a){let l=e.head,c=i?1:-1;if(l==(i?s.state.doc.length:0))return de.cursor(l,e.assoc);let u=e.goalColumn,f,d=s.contentDOM.getBoundingClientRect(),h=s.coordsAtPos(l,e.assoc||-1),m=s.documentTop;if(h)u==null&&(u=h.left-d.left),f=c<0?h.top:h.bottom;else{let v=s.viewState.lineBlockAt(l);u==null&&(u=Math.min(d.right-d.left,s.defaultCharacterWidth*(l-v.from))),f=(c<0?v.top:v.bottom)+m}let p=d.left+u,b=a!=null?a:s.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let x=f+(b+v)*c,E=dS(s,{x:p,y:x},!1,c);if(x<d.top||x>d.bottom||(c<0?E<l:E>l)){let w=s.docView.coordsForChar(E),A=!w||x<w.top?-1:1;return de.cursor(E,A,void 0,u)}}}function uu(s,e,i){for(;;){let a=0;for(let l of s)l.between(e-1,e+1,(c,u,f)=>{if(e>c&&e<u){let d=a||i||(e-c<u-e?-1:1);e=d<0?c:u,a=d}});if(!a)return e}}function lm(s,e,i){let a=uu(s.state.facet(im).map(l=>l(s)),i.from,e.head>i.from?-1:1);return a==i.from?i:de.cursor(a,a<i.from?1:-1)}class UL{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Pe.safari&&e.contentDOM.addEventListener("input",()=>null),Pe.gecko&&s4(e.contentDOM.ownerDocument)}handleEvent(e){!XL(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,i){let a=this.handlers[e];if(a){for(let l of a.observers)l(this.view,i);for(let l of a.handlers){if(i.defaultPrevented)break;if(l(this.view,i)){i.preventDefault();break}}}}ensureHandlers(e){let i=HL(e),a=this.handlers,l=this.view.contentDOM;for(let c in i)if(c!="scroll"){let u=!i[c].handlers.length,f=a[c];f&&u!=!f.handlers.length&&(l.removeEventListener(c,this.handleEvent),f=null),f||l.addEventListener(c,this.handleEvent,{passive:u})}for(let c in a)c!="scroll"&&!i[c]&&l.removeEventListener(c,this.handleEvent);this.handlers=i}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&yS.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Pe.android&&Pe.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let i;return Pe.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((i=gS.find(a=>a.keyCode==e.keyCode))&&!e.ctrlKey||KL.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=i||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let i=this.pendingIOSKey;return!i||i.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,To(this.view.contentDOM,i.key,i.keyCode,i instanceof KeyboardEvent?i:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Pe.safari&&!Pe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function pS(s,e){return(i,a)=>{try{return e.call(s,a,i)}catch(l){Fn(i.state,l)}}}function HL(s){let e=Object.create(null);function i(a){return e[a]||(e[a]={observers:[],handlers:[]})}for(let a of s){let l=a.spec;if(l&&l.domEventHandlers)for(let c in l.domEventHandlers){let u=l.domEventHandlers[c];u&&i(c).handlers.push(pS(a.value,u))}if(l&&l.domEventObservers)for(let c in l.domEventObservers){let u=l.domEventObservers[c];u&&i(c).observers.push(pS(a.value,u))}}for(let a in Cr)i(a).handlers.push(Cr[a]);for(let a in cr)i(a).observers.push(cr[a]);return e}const gS=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],KL="dthko",yS=[16,17,18,20,91,92,224,225],fu=6;function du(s){return Math.max(0,s)*.7+8}function GL(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class YL{constructor(e,i,a,l){this.view=e,this.startEvent=i,this.style=a,this.mustSelect=l,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=i,this.scrollParents=fL(e.contentDOM),this.atoms=e.state.facet(im).map(u=>u(e));let c=e.contentDOM.ownerDocument;c.addEventListener("mousemove",this.move=this.move.bind(this)),c.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=e.state.facet(rt.allowMultipleSelections)&&JL(e,i),this.dragging=_L(e,i)&&kS(i)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&GL(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,a=0,l=0,c=0,u=this.view.win.innerWidth,f=this.view.win.innerHeight;this.scrollParents.x&&({left:l,right:u}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:c,bottom:f}=this.scrollParents.y.getBoundingClientRect());let d=sS(this.view);e.clientX-d.left<=l+fu?i=-du(l-e.clientX):e.clientX+d.right>=u-fu&&(i=du(e.clientX-u)),e.clientY-d.top<=c+fu?a=-du(c-e.clientY):e.clientY+d.bottom>=f-fu&&(a=du(e.clientY-f)),this.setScrollSpeed(i,a)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,i){this.scrollSpeed={x:e,y:i},e||i?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:i}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),i&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=i,i=0),(e||i)&&this.view.win.scrollBy(e,i),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let i=null;for(let a=0;a<e.ranges.length;a++){let l=e.ranges[a],c=null;if(l.empty){let u=uu(this.atoms,l.from,0);u!=l.from&&(c=de.cursor(u,-1))}else{let u=uu(this.atoms,l.from,-1),f=uu(this.atoms,l.to,1);(u!=l.from||f!=l.to)&&(c=de.range(l.from==l.anchor?u:f,l.from==l.head?u:f))}c&&(i||(i=e.ranges.slice()),i[a]=c)}return i?de.create(i,e.mainIndex):e}select(e){let{view:i}=this,a=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!a.eq(i.state.selection,this.dragging===!1))&&this.view.dispatch({selection:a,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(i=>i.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function JL(s,e){let i=s.state.facet(Hb);return i.length?i[0](e):Pe.mac?e.metaKey:e.ctrlKey}function ZL(s,e){let i=s.state.facet(Kb);return i.length?i[0](e):Pe.mac?!e.altKey:!e.ctrlKey}function _L(s,e){let{main:i}=s.state.selection;if(i.empty)return!1;let a=el(s.root);if(!a||a.rangeCount==0)return!0;let l=a.getRangeAt(0).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.left<=e.clientX&&u.right>=e.clientX&&u.top<=e.clientY&&u.bottom>=e.clientY)return!0}return!1}function XL(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target,a;i!=s.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(a=Et.get(i))&&a.ignoreEvent(e))return!1;return!0}const Cr=Object.create(null),cr=Object.create(null),vS=Pe.ie&&Pe.ie_version<15||Pe.ios&&Pe.webkit_version<604;function QL(s){let e=s.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{s.focus(),i.remove(),bS(s,i.value)},50)}function bS(s,e){let{state:i}=s,a,l=1,c=i.toText(e),u=c.lines==i.selection.ranges.length;if(cm!=null&&i.selection.ranges.every(d=>d.empty)&&cm==c.toString()){let d=-1;a=i.changeByRange(h=>{let m=i.doc.lineAt(h.from);if(m.from==d)return{range:h};d=m.from;let p=i.toText((u?c.line(l++).text:e)+i.lineBreak);return{changes:{from:m.from,insert:p},range:de.cursor(h.from+p.length)}})}else u?a=i.changeByRange(d=>{let h=c.line(l++);return{changes:{from:d.from,to:d.to,insert:h.text},range:de.cursor(d.from+h.length)}}):a=i.replaceSelection(c);s.dispatch(a,{userEvent:"input.paste",scrollIntoView:!0})}cr.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft},Cr.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&s.inputState.tabFocusMode!=0&&(s.inputState.tabFocusMode=Date.now()+2e3),!1),cr.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")},cr.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")},Cr.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let a of s.state.facet(Gb))if(i=a(s,e),i)break;if(!i&&e.button==0&&(i=t4(s,e)),i){let a=!s.hasFocus;s.inputState.startMouseSelection(new YL(s,e,i,a)),a&&s.observer.ignore(()=>{yb(s.contentDOM);let c=s.root.activeElement;c&&!c.contains(s.contentDOM)&&c.blur()});let l=s.inputState.mouseSelection;if(l)return l.start(e),l.dragging===!1}return!1};function SS(s,e,i,a){if(a==1)return de.cursor(e,i);if(a==2)return FL(s.state,e,i);{let l=Zt.find(s.docView,e),c=s.state.doc.lineAt(l?l.posAtEnd:e),u=l?l.posAtStart:c.from,f=l?l.posAtEnd:c.to;return f<s.state.doc.length&&f==c.to&&f++,de.range(u,f)}}let xS=(s,e)=>s>=e.top&&s<=e.bottom,ES=(s,e,i)=>xS(e,i)&&s>=i.left&&s<=i.right;function qL(s,e,i,a){let l=Zt.find(s.docView,e);if(!l)return 1;let c=e-l.posAtStart;if(c==0)return 1;if(c==l.length)return-1;let u=l.coordsAt(c,-1);if(u&&ES(i,a,u))return-1;let f=l.coordsAt(c,1);return f&&ES(i,a,f)?1:u&&xS(a,u)?-1:1}function wS(s,e){let i=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:i,bias:qL(s,i,e.clientX,e.clientY)}}const e4=Pe.ie&&Pe.ie_version<=11;let AS=null,OS=0,CS=0;function kS(s){if(!e4)return s.detail;let e=AS,i=CS;return AS=s,CS=Date.now(),OS=!e||i>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(OS+1)%3:1}function t4(s,e){let i=wS(s,e),a=kS(e),l=s.state.selection;return{update(c){c.docChanged&&(i.pos=c.changes.mapPos(i.pos),l=l.map(c.changes))},get(c,u,f){let d=wS(s,c),h,m=SS(s,d.pos,d.bias,a);if(i.pos!=d.pos&&!u){let p=SS(s,i.pos,i.bias,a),b=Math.min(p.from,m.from),v=Math.max(p.to,m.to);m=b<m.from?de.range(b,v):de.range(v,b)}return u?l.replaceRange(l.main.extend(m.from,m.to)):f&&a==1&&l.ranges.length>1&&(h=n4(l,d.pos))?h:f?l.addRange(m):de.create([m])}}}function n4(s,e){for(let i=0;i<s.ranges.length;i++){let{from:a,to:l}=s.ranges[i];if(a<=e&&l>=e)return de.create(s.ranges.slice(0,i).concat(s.ranges.slice(i+1)),s.mainIndex==i?0:s.mainIndex-(s.mainIndex>i?1:0))}return null}Cr.dragstart=(s,e)=>{let{selection:{main:i}}=s.state;if(e.target.draggable){let l=s.docView.nearest(e.target);if(l&&l.isWidget){let c=l.posAtStart,u=c+l.length;(c>=i.to||u<=i.from)&&(i=de.range(c,u))}}let{inputState:a}=s;return a.mouseSelection&&(a.mouseSelection.dragging=!0),a.draggedContent=i,e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(i.from,i.to)),e.dataTransfer.effectAllowed="copyMove"),!1},Cr.dragend=s=>(s.inputState.draggedContent=null,!1);function TS(s,e,i,a){if(!i)return;let l=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:c}=s.inputState,u=a&&c&&ZL(s,e)?{from:c.from,to:c.to}:null,f={from:l,insert:i},d=s.state.changes(u?[u,f]:f);s.focus(),s.dispatch({changes:d,selection:{anchor:d.mapPos(l,-1),head:d.mapPos(l,1)},userEvent:u?"move.drop":"input.drop"}),s.inputState.draggedContent=null}Cr.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let i=e.dataTransfer.files;if(i&&i.length){let a=Array(i.length),l=0,c=()=>{++l==i.length&&TS(s,e,a.filter(u=>u!=null).join(s.state.lineBreak),!1)};for(let u=0;u<i.length;u++){let f=new FileReader;f.onerror=c,f.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(f.result)||(a[u]=f.result),c()},f.readAsText(i[u])}return!0}else{let a=e.dataTransfer.getData("Text");if(a)return TS(s,e,a,!0),!0}return!1},Cr.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let i=vS?null:e.clipboardData;return i?(bS(s,i.getData("text/plain")||i.getData("text/uri-list")),!0):(QL(s),!1)};function r4(s,e){let i=s.dom.parentNode;if(!i)return;let a=i.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.value=e,a.focus(),a.selectionEnd=e.length,a.selectionStart=0,setTimeout(()=>{a.remove(),s.focus()},50)}function i4(s){let e=[],i=[],a=!1;for(let l of s.selection.ranges)l.empty||(e.push(s.sliceDoc(l.from,l.to)),i.push(l));if(!e.length){let l=-1;for(let{from:c}of s.selection.ranges){let u=s.doc.lineAt(c);u.number>l&&(e.push(u.text),i.push({from:u.from,to:Math.min(s.doc.length,u.to+1)})),l=u.number}a=!0}return{text:e.join(s.lineBreak),ranges:i,linewise:a}}let cm=null;Cr.copy=Cr.cut=(s,e)=>{let{text:i,ranges:a,linewise:l}=i4(s.state);if(!i&&!l)return!1;cm=l?i:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:a,scrollIntoView:!0,userEvent:"delete.cut"});let c=vS?null:e.clipboardData;return c?(c.clearData(),c.setData("text/plain",i),!0):(r4(s,i),!1)};const PS=Vr.define();function DS(s,e){let i=[];for(let a of s.facet(Zb)){let l=a(s,e);l&&i.push(l)}return i?s.update({effects:i,annotations:PS.of(!0)}):null}function MS(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let i=DS(s.state,e);i?s.dispatch(i):s.update([])}},10)}cr.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),MS(s)},cr.blur=s=>{s.observer.clearSelectionRange(),MS(s)},cr.compositionstart=cr.compositionupdate=s=>{s.observer.editContext||(s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0))},cr.compositionend=s=>{s.observer.editContext||(s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,Pe.chrome&&Pe.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50))},cr.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()},Cr.beforeinput=(s,e)=>{var i;let a;if(Pe.chrome&&Pe.android&&(a=gS.find(l=>l.inputType==e.inputType))&&(s.observer.delayAndroidKey(a.key,a.keyCode),a.key=="Backspace"||a.key=="Delete")){let l=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var c;(((c=window.visualViewport)===null||c===void 0?void 0:c.height)||0)>l+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return Pe.ios&&e.inputType=="deleteContentForward"&&s.observer.flushSoon(),Pe.safari&&e.inputType=="insertText"&&s.inputState.composing>=0&&setTimeout(()=>cr.compositionend(s,e),20),!1};const IS=new Set;function s4(s){IS.has(s)||(IS.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const RS=["pre-wrap","normal","pre-line","break-spaces"];class NS{constructor(e){this.lineWrapping=e,this.doc=mt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,i){let a=this.doc.lineAt(i).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(a+=Math.max(0,Math.ceil((i-e-a*this.lineLength*.5)/this.lineLength))),this.lineHeight*a}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return RS.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let i=!1;for(let a=0;a<e.length;a++){let l=e[a];l<0?a++:this.heightSamples[Math.floor(l*10)]||(i=!0,this.heightSamples[Math.floor(l*10)]=!0)}return i}refresh(e,i,a,l,c,u){let f=RS.indexOf(e)>-1,d=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=f;if(this.lineWrapping=f,this.lineHeight=i,this.charWidth=a,this.textHeight=l,this.lineLength=c,d){this.heightSamples={};for(let h=0;h<u.length;h++){let m=u[h];m<0?h++:this.heightSamples[Math.floor(m*10)]=!0}}return d}}class FS{constructor(e,i){this.from=e,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class Hr{constructor(e,i,a,l,c){this.from=e,this.length=i,this.top=a,this.height=l,this._content=c}get type(){return typeof this._content=="number"?Pn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ts?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Hr(this.from,this.length+e.length,this.top,this.height+e.height,i)}}var Ct=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(Ct||(Ct={}));const hu=.001;class vn{constructor(e,i,a=2){this.length=e,this.height=i,this.flags=a}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,i){this.height!=i&&(Math.abs(this.height-i)>hu&&(e.heightChanged=!0),this.height=i)}replace(e,i,a){return vn.of(a)}decomposeLeft(e,i){i.push(this)}decomposeRight(e,i){i.push(this)}applyChanges(e,i,a,l){let c=this,u=a.doc;for(let f=l.length-1;f>=0;f--){let{fromA:d,toA:h,fromB:m,toB:p}=l[f],b=c.lineAt(d,Ct.ByPosNoHeight,a.setDoc(i),0,0),v=b.to>=h?b:c.lineAt(h,Ct.ByPosNoHeight,a,0,0);for(p+=v.to-h,h=v.to;f>0&&b.from<=l[f-1].toA;)d=l[f-1].fromA,m=l[f-1].fromB,f--,d<b.from&&(b=c.lineAt(d,Ct.ByPosNoHeight,a,0,0));m+=b.from-d,d=b.from;let x=um.build(a.setDoc(u),e,m,p);c=c.replace(d,h,x)}return c.updateHeight(a,0)}static empty(){return new _n(0,0)}static of(e){if(e.length==1)return e[0];let i=0,a=e.length,l=0,c=0;for(;;)if(i==a)if(l>c*2){let f=e[i-1];f.break?e.splice(--i,1,f.left,null,f.right):e.splice(--i,1,f.left,f.right),a+=1+f.break,l-=f.size}else if(c>l*2){let f=e[a];f.break?e.splice(a,1,f.left,null,f.right):e.splice(a,1,f.left,f.right),a+=2+f.break,c-=f.size}else break;else if(l<c){let f=e[i++];f&&(l+=f.size)}else{let f=e[--a];f&&(c+=f.size)}let u=0;return e[i-1]==null?(u=1,i--):e[i]==null&&(u=1,a++),new o4(vn.of(e.slice(0,i)),u,vn.of(e.slice(a)))}}vn.prototype.size=1;class LS extends vn{constructor(e,i,a){super(e,i),this.deco=a}blockAt(e,i,a,l){return new Hr(l,this.length,a,this.height,this.deco||0)}lineAt(e,i,a,l,c){return this.blockAt(0,a,l,c)}forEachLine(e,i,a,l,c,u){e<=c+this.length&&i>=c&&u(this.blockAt(0,a,l,c))}updateHeight(e,i=0,a=!1,l){return l&&l.from<=i&&l.more&&this.setHeight(e,l.heights[l.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class _n extends LS{constructor(e,i){super(e,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,i,a,l){return new Hr(l,this.length,a,this.height,this.breaks)}replace(e,i,a){let l=a[0];return a.length==1&&(l instanceof _n||l instanceof un&&l.flags&4)&&Math.abs(this.length-l.length)<10?(l instanceof un?l=new _n(l.length,this.height):l.height=this.height,this.outdated||(l.outdated=!1),l):vn.of(a)}updateHeight(e,i=0,a=!1,l){return l&&l.from<=i&&l.more?this.setHeight(e,l.heights[l.index++]):(a||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class un extends vn{constructor(e){super(e,0)}heightMetrics(e,i){let a=e.doc.lineAt(i).number,l=e.doc.lineAt(i+this.length).number,c=l-a+1,u,f=0;if(e.lineWrapping){let d=Math.min(this.height,e.lineHeight*c);u=d/c,this.length>c+1&&(f=(this.height-d)/(this.length-c-1))}else u=this.height/c;return{firstLine:a,lastLine:l,perLine:u,perChar:f}}blockAt(e,i,a,l){let{firstLine:c,lastLine:u,perLine:f,perChar:d}=this.heightMetrics(i,l);if(i.lineWrapping){let h=l+(e<i.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-a)/this.height))*this.length)),m=i.doc.lineAt(h),p=f+m.length*d,b=Math.max(a,e-p/2);return new Hr(m.from,m.length,b,p,0)}else{let h=Math.max(0,Math.min(u-c,Math.floor((e-a)/f))),{from:m,length:p}=i.doc.line(c+h);return new Hr(m,p,a+f*h,f,0)}}lineAt(e,i,a,l,c){if(i==Ct.ByHeight)return this.blockAt(e,a,l,c);if(i==Ct.ByPosNoHeight){let{from:v,to:x}=a.doc.lineAt(e);return new Hr(v,x-v,0,0,0)}let{firstLine:u,perLine:f,perChar:d}=this.heightMetrics(a,c),h=a.doc.lineAt(e),m=f+h.length*d,p=h.number-u,b=l+f*p+d*(h.from-c-p);return new Hr(h.from,h.length,Math.max(l,Math.min(b,l+this.height-m)),m,0)}forEachLine(e,i,a,l,c,u){e=Math.max(e,c),i=Math.min(i,c+this.length);let{firstLine:f,perLine:d,perChar:h}=this.heightMetrics(a,c);for(let m=e,p=l;m<=i;){let b=a.doc.lineAt(m);if(m==e){let x=b.number-f;p+=d*x+h*(e-c-x)}let v=d+h*b.length;u(new Hr(b.from,b.length,p,v,0)),p+=v,m=b.to+1}}replace(e,i,a){let l=this.length-i;if(l>0){let c=a[a.length-1];c instanceof un?a[a.length-1]=new un(c.length+l):a.push(null,new un(l-1))}if(e>0){let c=a[0];c instanceof un?a[0]=new un(e+c.length):a.unshift(new un(e-1),null)}return vn.of(a)}decomposeLeft(e,i){i.push(new un(e-1),null)}decomposeRight(e,i){i.push(null,new un(this.length-e-1))}updateHeight(e,i=0,a=!1,l){let c=i+this.length;if(l&&l.from<=i+this.length&&l.more){let u=[],f=Math.max(i,l.from),d=-1;for(l.from>i&&u.push(new un(l.from-i-1).updateHeight(e,i));f<=c&&l.more;){let m=e.doc.lineAt(f).length;u.length&&u.push(null);let p=l.heights[l.index++];d==-1?d=p:Math.abs(p-d)>=hu&&(d=-2);let b=new _n(m,p);b.outdated=!1,u.push(b),f+=m+1}f<=c&&u.push(null,new un(c-f).updateHeight(e,f));let h=vn.of(u);return(d<0||Math.abs(h.height-this.height)>=hu||Math.abs(d-this.heightMetrics(e,i).perLine)>=hu)&&(e.heightChanged=!0),h}else(a||this.outdated)&&(this.setHeight(e,e.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class o4 extends vn{constructor(e,i,a){super(e.length+i+a.length,e.height+a.height,i|(e.outdated||a.outdated?2:0)),this.left=e,this.right=a,this.size=e.size+a.size}get break(){return this.flags&1}blockAt(e,i,a,l){let c=a+this.left.height;return e<c?this.left.blockAt(e,i,a,l):this.right.blockAt(e,i,c,l+this.left.length+this.break)}lineAt(e,i,a,l,c){let u=l+this.left.height,f=c+this.left.length+this.break,d=i==Ct.ByHeight?e<u:e<f,h=d?this.left.lineAt(e,i,a,l,c):this.right.lineAt(e,i,a,u,f);if(this.break||(d?h.to<f:h.from>f))return h;let m=i==Ct.ByPosNoHeight?Ct.ByPosNoHeight:Ct.ByPos;return d?h.join(this.right.lineAt(f,m,a,u,f)):this.left.lineAt(f,m,a,l,c).join(h)}forEachLine(e,i,a,l,c,u){let f=l+this.left.height,d=c+this.left.length+this.break;if(this.break)e<d&&this.left.forEachLine(e,i,a,l,c,u),i>=d&&this.right.forEachLine(e,i,a,f,d,u);else{let h=this.lineAt(d,Ct.ByPos,a,l,c);e<h.from&&this.left.forEachLine(e,h.from-1,a,l,c,u),h.to>=e&&h.from<=i&&u(h),i>h.to&&this.right.forEachLine(h.to+1,i,a,f,d,u)}}replace(e,i,a){let l=this.left.length+this.break;if(i<l)return this.balanced(this.left.replace(e,i,a),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-l,i-l,a));let c=[];e>0&&this.decomposeLeft(e,c);let u=c.length;for(let f of a)c.push(f);if(e>0&&$S(c,u-1),i<this.length){let f=c.length;this.decomposeRight(i,c),$S(c,f)}return vn.of(c)}decomposeLeft(e,i){let a=this.left.length;if(e<=a)return this.left.decomposeLeft(e,i);i.push(this.left),this.break&&(a++,e>=a&&i.push(null)),e>a&&this.right.decomposeLeft(e-a,i)}decomposeRight(e,i){let a=this.left.length,l=a+this.break;if(e>=l)return this.right.decomposeRight(e-l,i);e<a&&this.left.decomposeRight(e,i),this.break&&e<l&&i.push(null),i.push(this.right)}balanced(e,i){return e.size>2*i.size||i.size>2*e.size?vn.of(this.break?[e,null,i]:[e,i]):(this.left=e,this.right=i,this.height=e.height+i.height,this.outdated=e.outdated||i.outdated,this.size=e.size+i.size,this.length=e.length+this.break+i.length,this)}updateHeight(e,i=0,a=!1,l){let{left:c,right:u}=this,f=i+c.length+this.break,d=null;return l&&l.from<=i+c.length&&l.more?d=c=c.updateHeight(e,i,a,l):c.updateHeight(e,i,a),l&&l.from<=f+u.length&&l.more?d=u=u.updateHeight(e,f,a,l):u.updateHeight(e,f,a),d?this.balanced(c,u):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function $S(s,e){let i,a;s[e]==null&&(i=s[e-1])instanceof un&&(a=s[e+1])instanceof un&&s.splice(e-1,3,new un(i.length+1+a.length))}const a4=5;class um{constructor(e,i){this.pos=e,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,i){if(this.lineStart>-1){let a=Math.min(i,this.lineEnd),l=this.nodes[this.nodes.length-1];l instanceof _n?l.length+=a-this.pos:(a>this.pos||!this.isCovered)&&this.nodes.push(new _n(a-this.pos,-1)),this.writtenTo=a,i>a&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(e,i,a){if(e<i||a.heightRelevant){let l=a.widget?a.widget.estimatedHeight:0,c=a.widget?a.widget.lineBreaks:0;l<0&&(l=this.oracle.lineHeight);let u=i-e;a.block?this.addBlock(new LS(u,l,a)):(u||c||l>=a4)&&this.addLineDeco(l,c,u)}else i>e&&this.span(e,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=i,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new _n(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,i){let a=new un(i-e);return this.oracle.doc.lineAt(e).to==i&&(a.flags|=4),a}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof _n)return e;let i=new _n(0,-1);return this.nodes.push(i),i}addBlock(e){this.enterLine();let i=e.deco;i&&i.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i&&i.endSide>0&&(this.covering=e)}addLineDeco(e,i,a){let l=this.ensureLine();l.length+=a,l.collapsed+=a,l.widgetHeight=Math.max(l.widgetHeight,e),l.breaks+=i,this.writtenTo=this.pos=this.pos+a}finish(e){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof _n)&&!this.isCovered?this.nodes.push(new _n(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let a=e;for(let l of this.nodes)l instanceof _n&&l.updateHeight(this.oracle,a),a+=l?l.length:1;return this.nodes}static build(e,i,a,l){let c=new um(a,e);return it.spans(i,a,l,c,0),c.finish(a)}}function l4(s,e,i){let a=new c4;return it.compare(s,e,i,a,0),a.changes}class c4{constructor(){this.changes=[]}compareRange(){}comparePoint(e,i,a,l){(e<i||a&&a.heightRelevant||l&&l.heightRelevant)&&Xh(e,i,this.changes,5)}}function u4(s,e){let i=s.getBoundingClientRect(),a=s.ownerDocument,l=a.defaultView||window,c=Math.max(0,i.left),u=Math.min(l.innerWidth,i.right),f=Math.max(0,i.top),d=Math.min(l.innerHeight,i.bottom);for(let h=s.parentNode;h&&h!=a.body;)if(h.nodeType==1){let m=h,p=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&p.overflow!="visible"){let b=m.getBoundingClientRect();c=Math.max(c,b.left),u=Math.min(u,b.right),f=Math.max(f,b.top),d=h==s.parentNode?b.bottom:Math.min(d,b.bottom)}h=p.position=="absolute"||p.position=="fixed"?m.offsetParent:m.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:c-i.left,right:Math.max(c,u)-i.left,top:f-(i.top+e),bottom:Math.max(f,d)-(i.top+e)}}function f4(s,e){let i=s.getBoundingClientRect();return{left:0,right:i.right-i.left,top:e,bottom:i.bottom-(i.top+e)}}class fm{constructor(e,i,a){this.from=e,this.to=i,this.size=a}static same(e,i){if(e.length!=i.length)return!1;for(let a=0;a<e.length;a++){let l=e[a],c=i[a];if(l.from!=c.from||l.to!=c.to||l.size!=c.size)return!1}return!0}draw(e,i){return Ne.replace({widget:new d4(this.size*(i?e.scaleY:e.scaleX),i)}).range(this.from,this.to)}}class d4 extends zr{constructor(e,i){super(),this.size=e,this.vertical=i}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class BS{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=jS,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=wt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let i=e.facet(lu).some(a=>typeof a!="function"&&a.class=="cm-lineWrapping");this.heightOracle=new NS(i),this.stateDeco=e.facet(ol).filter(a=>typeof a!="function"),this.heightMap=vn.empty().applyChanges(this.stateDeco,mt.empty,this.heightOracle.setDoc(e.doc),[new Zn(0,0,0,e.doc.length)]);for(let a=0;a<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());a++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ne.set(this.lineGaps.map(a=>a.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:i}=this.state.selection;for(let a=0;a<=1;a++){let l=a?i.head:i.anchor;if(!e.some(({from:c,to:u})=>l>=c&&l<=u)){let{from:c,to:u}=this.lineBlockAt(l);e.push(new mu(c,u))}}return this.viewports=e.sort((a,l)=>a.from-l.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?jS:new dm(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ll(e,this.scaler))})}update(e,i=null){this.state=e.state;let a=this.stateDeco;this.stateDeco=this.state.facet(ol).filter(m=>typeof m!="function");let l=e.changedRanges,c=Zn.extendWithRanges(l,l4(a,this.stateDeco,e?e.changes:nn.empty(this.state.doc.length))),u=this.heightMap.height,f=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),c),this.heightMap.height!=u&&(e.flags|=2),f?(this.scrollAnchorPos=e.changes.mapPos(f.from,-1),this.scrollAnchorHeight=f.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let d=c.length?this.mapViewport(this.viewport,e.changes):this.viewport;(i&&(i.range.head<d.from||i.range.head>d.to)||!this.viewportIsAppropriate(d))&&(d=this.getViewport(0,i));let h=d.from!=this.viewport.from||d.to!=this.viewport.to;this.viewport=d,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Xb)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let i=e.contentDOM,a=window.getComputedStyle(i),l=this.heightOracle,c=a.whiteSpace;this.defaultTextDirection=a.direction=="rtl"?wt.RTL:wt.LTR;let u=this.heightOracle.mustRefreshForWrapping(c),f=i.getBoundingClientRect(),d=u||this.mustMeasureContent||this.contentDOMHeight!=f.height;this.contentDOMHeight=f.height,this.mustMeasureContent=!1;let h=0,m=0;if(f.width&&f.height){let{scaleX:B,scaleY:V}=gb(i,f);(B>.005&&Math.abs(this.scaleX-B)>.005||V>.005&&Math.abs(this.scaleY-V)>.005)&&(this.scaleX=B,this.scaleY=V,h|=8,u=d=!0)}let p=(parseInt(a.paddingTop)||0)*this.scaleY,b=(parseInt(a.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=b)&&(this.paddingTop=p,this.paddingBottom=b,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(l.lineWrapping&&(d=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let v=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=Sb(e.scrollDOM);let x=(this.printing?f4:u4)(i,this.paddingTop),E=x.top-this.pixelViewport.top,w=x.bottom-this.pixelViewport.bottom;this.pixelViewport=x;let A=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(A!=this.inView&&(this.inView=A,A&&(d=!0)),!this.inView&&!this.scrollTarget)return 0;let C=f.width;if((this.contentDOMWidth!=C||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=f.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),d){let B=e.docView.measureVisibleLineHeights(this.viewport);if(l.mustRefreshForHeights(B)&&(u=!0),u||l.lineWrapping&&Math.abs(C-this.contentDOMWidth)>l.charWidth){let{lineHeight:V,charWidth:J,textHeight:Z}=e.docView.measureTextSize();u=V>0&&l.refresh(c,V,J,Z,C/J,B),u&&(e.docView.minWidth=0,h|=8)}E>0&&w>0?m=Math.max(E,w):E<0&&w<0&&(m=Math.min(E,w)),l.heightChanged=!1;for(let V of this.viewports){let J=V.from==this.viewport.from?B:e.docView.measureVisibleLineHeights(V);this.heightMap=(u?vn.empty().applyChanges(this.stateDeco,mt.empty,this.heightOracle,[new Zn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(l,0,u,new FS(V.from,J))}l.heightChanged&&(h|=2)}let W=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return W&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),h|=this.updateForViewport()),(h&2||W)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(u?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,i){let a=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),l=this.heightMap,c=this.heightOracle,{visibleTop:u,visibleBottom:f}=this,d=new mu(l.lineAt(u-a*1e3,Ct.ByHeight,c,0,0).from,l.lineAt(f+(1-a)*1e3,Ct.ByHeight,c,0,0).to);if(i){let{head:h}=i.range;if(h<d.from||h>d.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=l.lineAt(h,Ct.ByPos,c,0,0),b;i.y=="center"?b=(p.top+p.bottom)/2-m/2:i.y=="start"||i.y=="nearest"&&h<d.from?b=p.top:b=p.bottom-m,d=new mu(l.lineAt(b-1e3/2,Ct.ByHeight,c,0,0).from,l.lineAt(b+m+1e3/2,Ct.ByHeight,c,0,0).to)}}return d}mapViewport(e,i){let a=i.mapPos(e.from,-1),l=i.mapPos(e.to,1);return new mu(this.heightMap.lineAt(a,Ct.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(l,Ct.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:i},a=0){if(!this.inView)return!0;let{top:l}=this.heightMap.lineAt(e,Ct.ByPos,this.heightOracle,0,0),{bottom:c}=this.heightMap.lineAt(i,Ct.ByPos,this.heightOracle,0,0),{visibleTop:u,visibleBottom:f}=this;return(e==0||l<=u-Math.max(10,Math.min(-a,250)))&&(i==this.state.doc.length||c>=f+Math.max(10,Math.min(a,250)))&&l>u-2*1e3&&c<f+2*1e3}mapLineGaps(e,i){if(!e.length||i.empty)return e;let a=[];for(let l of e)i.touchesRange(l.from,l.to)||a.push(new fm(i.mapPos(l.from),i.mapPos(l.to),l.size));return a}ensureLineGaps(e,i){let a=this.heightOracle.lineWrapping,l=a?1e4:2e3,c=l>>1,u=l<<1;if(this.defaultTextDirection!=wt.LTR&&!a)return[];let f=[],d=(m,p,b,v)=>{if(p-m<c)return;let x=this.state.selection.main,E=[x.from];x.empty||E.push(x.to);for(let A of E)if(A>m&&A<p){d(m,A-10,b,v),d(A+10,p,b,v);return}let w=m4(e,A=>A.from>=b.from&&A.to<=b.to&&Math.abs(A.from-m)<c&&Math.abs(A.to-p)<c&&!E.some(C=>A.from<C&&A.to>C));if(!w){if(p<b.to&&i&&a&&i.visibleRanges.some(A=>A.from<=p&&A.to>=p)){let A=i.moveToLineBoundary(de.cursor(p),!1,!0).head;A>m&&(p=A)}w=new fm(m,p,this.gapSize(b,m,p,v))}f.push(w)},h=m=>{if(m.length<u||m.type!=Pn.Text)return;let p=h4(m.from,m.to,this.stateDeco);if(p.total<u)return;let b=this.scrollTarget?this.scrollTarget.range.head:null,v,x;if(a){let E=l/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,A;if(b!=null){let C=gu(p,b),W=((this.visibleBottom-this.visibleTop)/2+E)/m.height;w=C-W,A=C+W}else w=(this.visibleTop-m.top-E)/m.height,A=(this.visibleBottom-m.top+E)/m.height;v=pu(p,w),x=pu(p,A)}else{let E=p.total*this.heightOracle.charWidth,w=l*this.heightOracle.charWidth,A,C;if(b!=null){let W=gu(p,b),B=((this.pixelViewport.right-this.pixelViewport.left)/2+w)/E;A=W-B,C=W+B}else A=(this.pixelViewport.left-w)/E,C=(this.pixelViewport.right+w)/E;v=pu(p,A),x=pu(p,C)}v>m.from&&d(m.from,v,m,p),x<m.to&&d(x,m.to,m,p)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(h):h(m);return f}gapSize(e,i,a,l){let c=gu(l,a)-gu(l,i);return this.heightOracle.lineWrapping?e.height*c:l.total*this.heightOracle.charWidth*c}updateLineGaps(e){fm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ne.set(e.map(i=>i.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];it.spans(e,this.viewport.from,this.viewport.to,{span(l,c){i.push({from:l,to:c})},point(){}},20);let a=i.length!=this.visibleRanges.length||this.visibleRanges.some((l,c)=>l.from!=i[c].from||l.to!=i[c].to);return this.visibleRanges=i,a?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(i=>i.from<=e&&i.to>=e)||ll(this.heightMap.lineAt(e,Ct.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(i=>i.top<=e&&i.bottom>=e)||ll(this.heightMap.lineAt(this.scaler.fromDOM(e),Ct.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let i=this.lineBlockAtHeight(e+8);return i.from>=this.viewport.from||this.viewportLines[0].top-e>200?i:this.viewportLines[0]}elementAtHeight(e){return ll(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class mu{constructor(e,i){this.from=e,this.to=i}}function h4(s,e,i){let a=[],l=s,c=0;return it.spans(i,s,e,{span(){},point(u,f){u>l&&(a.push({from:l,to:u}),c+=u-l),l=f}},20),l<e&&(a.push({from:l,to:e}),c+=e-l),{total:c,ranges:a}}function pu({total:s,ranges:e},i){if(i<=0)return e[0].from;if(i>=1)return e[e.length-1].to;let a=Math.floor(s*i);for(let l=0;;l++){let{from:c,to:u}=e[l],f=u-c;if(a<=f)return c+a;a-=f}}function gu(s,e){let i=0;for(let{from:a,to:l}of s.ranges){if(e<=l){i+=e-a;break}i+=l-a}return i/s.total}function m4(s,e){for(let i of s)if(e(i))return i}const jS={toDOM(s){return s},fromDOM(s){return s},scale:1,eq(s){return s==this}};class dm{constructor(e,i,a){let l=0,c=0,u=0;this.viewports=a.map(({from:f,to:d})=>{let h=i.lineAt(f,Ct.ByPos,e,0,0).top,m=i.lineAt(d,Ct.ByPos,e,0,0).bottom;return l+=m-h,{from:f,to:d,top:h,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-l)/(i.height-l);for(let f of this.viewports)f.domTop=u+(f.top-c)*this.scale,u=f.domBottom=f.domTop+(f.bottom-f.top),c=f.bottom}toDOM(e){for(let i=0,a=0,l=0;;i++){let c=i<this.viewports.length?this.viewports[i]:null;if(!c||e<c.top)return l+(e-a)*this.scale;if(e<=c.bottom)return c.domTop+(e-c.top);a=c.bottom,l=c.domBottom}}fromDOM(e){for(let i=0,a=0,l=0;;i++){let c=i<this.viewports.length?this.viewports[i]:null;if(!c||e<c.domTop)return a+(e-l)/this.scale;if(e<=c.domBottom)return c.top+(e-c.domTop);a=c.bottom,l=c.domBottom}}eq(e){return e instanceof dm?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((i,a)=>i.from==e.viewports[a].from&&i.to==e.viewports[a].to):!1}}function ll(s,e){if(e.scale==1)return s;let i=e.toDOM(s.top),a=e.toDOM(s.bottom);return new Hr(s.from,s.length,i,a-i,Array.isArray(s._content)?s._content.map(l=>ll(l,e)):s._content)}const yu=Te.define({combine:s=>s.join(" ")}),hm=Te.define({combine:s=>s.indexOf(!0)>-1}),mm=Qi.newName(),WS=Qi.newName(),VS=Qi.newName(),zS={"&light":"."+WS,"&dark":"."+VS};function pm(s,e,i){return new Qi(e,{finish(a){return/&/.test(a)?a.replace(/&\w*/,l=>{if(l=="&")return s;if(!i||!i[l])throw new RangeError(`Unsupported selector: ${l}`);return i[l]}):s+" "+a}})}const p4=pm("."+mm,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},zS),cl="\uFFFF";class g4{constructor(e,i){this.points=e,this.text="",this.lineSeparator=i.facet(rt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=cl}readRange(e,i){if(!e)return this;let a=e.parentNode;for(let l=e;;){this.findPointBefore(a,l);let c=this.text.length;this.readNode(l);let u=l.nextSibling;if(u==i)break;let f=Et.get(l),d=Et.get(u);(f&&d?f.breakAfter:(f?f.breakAfter:nu(l))||nu(u)&&(l.nodeName!="BR"||l.cmIgnore)&&this.text.length>c)&&this.lineBreak(),l=u}return this.findPointBefore(a,i),this}readTextNode(e){let i=e.nodeValue;for(let a of this.points)a.node==e&&(a.pos=this.text.length+Math.min(a.offset,i.length));for(let a=0,l=this.lineSeparator?null:/\r\n?|\n/g;;){let c=-1,u=1,f;if(this.lineSeparator?(c=i.indexOf(this.lineSeparator,a),u=this.lineSeparator.length):(f=l.exec(i))&&(c=f.index,u=f[0].length),this.append(i.slice(a,c<0?i.length:c)),c<0)break;if(this.lineBreak(),u>1)for(let d of this.points)d.node==e&&d.pos>this.text.length&&(d.pos-=u-1);a=c+u}}readNode(e){if(e.cmIgnore)return;let i=Et.get(e),a=i&&i.overrideDOMText;if(a!=null){this.findPointInside(e,a.length);for(let l=a.iter();!l.next().done;)l.lineBreak?this.lineBreak():this.append(l.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,i){for(let a of this.points)a.node==e&&e.childNodes[a.offset]==i&&(a.pos=this.text.length)}findPointInside(e,i){for(let a of this.points)(e.nodeType==3?a.node==e:e.contains(a.node))&&(a.pos=this.text.length+(y4(e,a.node,a.offset)?i:0))}}function y4(s,e,i){for(;;){if(!e||i<bi(e))return!1;if(e==s)return!0;i=Is(e)+1,e=e.parentNode}}class US{constructor(e,i){this.node=e,this.offset=i,this.pos=-1}}class v4{constructor(e,i,a,l){this.typeOver=l,this.bounds=null,this.text="",this.domChanged=i>-1;let{impreciseHead:c,impreciseAnchor:u}=e.docView;if(e.state.readOnly&&i>-1)this.newSel=null;else if(i>-1&&(this.bounds=e.docView.domBoundsAround(i,a,0))){let f=c||u?[]:x4(e),d=new g4(f,e.state);d.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=d.text,this.newSel=E4(f,this.bounds.from)}else{let f=e.observer.selectionRange,d=c&&c.node==f.focusNode&&c.offset==f.focusOffset||!Uh(e.contentDOM,f.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(f.focusNode,f.focusOffset),h=u&&u.node==f.anchorNode&&u.offset==f.anchorOffset||!Uh(e.contentDOM,f.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(f.anchorNode,f.anchorOffset),m=e.viewport;if((Pe.ios||Pe.chrome)&&e.state.selection.main.empty&&d!=h&&(m.from>0||m.to<e.state.doc.length)){let p=Math.min(d,h),b=Math.max(d,h),v=m.from-p,x=m.to-b;(v==0||v==1||p==0)&&(x==0||x==-1||b==e.state.doc.length)&&(d=0,h=e.state.doc.length)}this.newSel=de.single(h,d)}}}function HS(s,e){let i,{newSel:a}=e,l=s.state.selection.main,c=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:u,to:f}=e.bounds,d=l.from,h=null;(c===8||Pe.android&&e.text.length<f-u)&&(d=l.to,h="end");let m=S4(s.state.doc.sliceString(u,f,cl),e.text,d-u,h);m&&(Pe.chrome&&c==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==cl+cl&&m.toB--,i={from:u+m.from,to:u+m.toA,insert:mt.of(e.text.slice(m.from,m.toB).split(cl))})}else a&&(!s.hasFocus&&s.state.facet(rs)||a.main.eq(l))&&(a=null);if(!i&&!a)return!1;if(!i&&e.typeOver&&!l.empty&&a&&a.main.empty?i={from:l.from,to:l.to,insert:s.state.doc.slice(l.from,l.to)}:i&&i.from>=l.from&&i.to<=l.to&&(i.from!=l.from||i.to!=l.to)&&l.to-l.from-(i.to-i.from)<=4?i={from:l.from,to:l.to,insert:s.state.doc.slice(l.from,i.from).append(i.insert).append(s.state.doc.slice(i.to,l.to))}:(Pe.mac||Pe.android)&&i&&i.from==i.to&&i.from==l.head-1&&/^\. ?$/.test(i.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(a&&i.insert.length==2&&(a=de.single(a.main.anchor-1,a.main.head-1)),i={from:l.from,to:l.to,insert:mt.of([" "])}):Pe.chrome&&i&&i.from==i.to&&i.from==l.head&&i.insert.toString()==`
 `&&s.lineWrapping&&(a&&(a=de.single(a.main.anchor-1,a.main.head-1)),i={from:l.from,to:l.to,insert:mt.of([" "])}),i)return KS(s,i,a,c);if(a&&!a.main.eq(l)){let u=!1,f="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(u=!0),f=s.inputState.lastSelectionOrigin),s.dispatch({selection:a,scrollIntoView:u,userEvent:f}),!0}else return!1}function KS(s,e,i,a=-1){if(Pe.ios&&s.inputState.flushIOSKey(e))return!0;let l=s.state.selection.main;if(Pe.android&&(e.to==l.to&&(e.from==l.from||e.from==l.from-1&&s.state.sliceDoc(e.from,l.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&To(s.contentDOM,"Enter",13)||(e.from==l.from-1&&e.to==l.to&&e.insert.length==0||a==8&&e.insert.length<e.to-e.from&&e.to>l.head)&&To(s.contentDOM,"Backspace",8)||e.from==l.from&&e.to==l.to+1&&e.insert.length==0&&To(s.contentDOM,"Delete",46)))return!0;let c=e.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let u,f=()=>u||(u=b4(s,e,i));return s.state.facet(Jb).some(d=>d(s,e.from,e.to,c,f))||s.dispatch(f()),!0}function b4(s,e,i){let a,l=s.state,c=l.selection.main;if(e.from>=c.from&&e.to<=c.to&&e.to-e.from>=(c.to-c.from)/3&&(!i||i.main.empty&&i.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let f=c.from<e.from?l.sliceDoc(c.from,e.from):"",d=c.to>e.to?l.sliceDoc(e.to,c.to):"";a=l.replaceSelection(s.state.toText(f+e.insert.sliceString(0,void 0,s.state.lineBreak)+d))}else{let f=l.changes(e),d=i&&i.main.to<=f.newLength?i.main:void 0;if(l.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=c.to&&e.to>=c.to-10){let h=s.state.sliceDoc(e.from,e.to),m,p=i&&lS(s,i.main.head);if(p){let x=e.insert.length-(e.to-e.from);m={from:p.from,to:p.to-x}}else m=s.state.doc.lineAt(c.head);let b=c.to-e.to,v=c.to-c.from;a=l.changeByRange(x=>{if(x.from==c.from&&x.to==c.to)return{changes:f,range:d||x.map(f)};let E=x.to-b,w=E-h.length;if(x.to-x.from!=v||s.state.sliceDoc(w,E)!=h||x.to>=m.from&&x.from<=m.to)return{range:x};let A=l.changes({from:w,to:E,insert:e.insert}),C=x.to-c.to;return{changes:A,range:d?de.range(Math.max(0,d.anchor+C),Math.max(0,d.head+C)):x.map(A)}})}else a={changes:f,selection:d&&l.selection.replaceRange(d)}}let u="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,u+=".compose",s.inputState.compositionFirstChange&&(u+=".start",s.inputState.compositionFirstChange=!1)),l.update(a,{userEvent:u,scrollIntoView:!0})}function S4(s,e,i,a){let l=Math.min(s.length,e.length),c=0;for(;c<l&&s.charCodeAt(c)==e.charCodeAt(c);)c++;if(c==l&&s.length==e.length)return null;let u=s.length,f=e.length;for(;u>0&&f>0&&s.charCodeAt(u-1)==e.charCodeAt(f-1);)u--,f--;if(a=="end"){let d=Math.max(0,c-Math.min(u,f));i-=u+d-c}if(u<c&&s.length<e.length){let d=i<=c&&i>=u?c-i:0;c-=d,f=c+(f-u),u=c}else if(f<c){let d=i<=c&&i>=f?c-i:0;c-=d,u=c+(u-f),f=c}return{from:c,toA:u,toB:f}}function x4(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:c}=s.observer.selectionRange;return i&&(e.push(new US(i,a)),(l!=i||c!=a)&&e.push(new US(l,c))),e}function E4(s,e){if(s.length==0)return null;let i=s[0].pos,a=s.length==2?s[1].pos:i;return i>-1&&a>-1?de.single(i+e,a+e):null}const w4={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},gm=Pe.ie&&Pe.ie_version<=11;class A4{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new dL,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let a of i)this.queue.push(a);(Pe.ie&&Pe.ie_version<=11||Pe.ios&&e.composing)&&i.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Pe.chrome&&Pe.chrome_version<126)&&(this.editContext=new C4(e),e.state.facet(rs)&&(e.contentDOM.editContext=this.editContext.editContext)),gm&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var i;((i=this.view.docView)===null||i===void 0?void 0:i.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){e.type=="change"&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((i,a)=>i!=e[a]))){this.gapIntersection.disconnect();for(let i of e)this.gapIntersection.observe(i);this.gaps=e}}onSelectionChange(e){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:a}=this,l=this.selectionRange;if(a.state.facet(rs)?a.root.activeElement!=this.dom:!tu(a.dom,l))return;let c=l.anchorNode&&a.docView.nearest(l.anchorNode);if(c&&c.ignoreEvent(e)){i||(this.selectionChanged=!1);return}(Pe.ie&&Pe.ie_version<=11||Pe.android&&Pe.chrome)&&!a.state.selection.main.empty&&l.focusNode&&tl(l.focusNode,l.focusOffset,l.anchorNode,l.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,i=el(e.root);if(!i)return!1;let a=Pe.safari&&e.root.nodeType==11&&lL(this.dom.ownerDocument)==this.dom&&O4(this.view,i)||i;if(!a||this.selectionRange.eq(a))return!1;let l=tu(this.dom,a);return l&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&mL(this.dom,a)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(a),l&&(this.selectionChanged=!0),!0)}setSelectionRange(e,i){this.selectionRange.set(e.node,e.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,i=null;for(let a=this.dom;a;)if(a.nodeType==1)!i&&e<this.scrollTargets.length&&this.scrollTargets[e]==a?e++:i||(i=this.scrollTargets.slice(0,e)),i&&i.push(a),a=a.assignedSlot||a.parentNode;else if(a.nodeType==11)a=a.host;else break;if(e<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,e)),i){for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);for(let a of this.scrollTargets=i)a.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,w4),gm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),gm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,i){var a;if(!this.delayedAndroidKey){let l=()=>{let c=this.delayedAndroidKey;c&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=c.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&c.force&&To(this.dom,c.key,c.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(l)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((a=this.delayedAndroidKey)===null||a===void 0)&&a.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let i=-1,a=-1,l=!1;for(let c of e){let u=this.readMutation(c);u&&(u.typeOver&&(l=!0),i==-1?{from:i,to:a}=u:(i=Math.min(u.from,i),a=Math.max(u.to,a)))}return{from:i,to:a,typeOver:l}}readChange(){let{from:e,to:i,typeOver:a}=this.processRecords(),l=this.selectionChanged&&tu(this.dom,this.selectionRange);if(e<0&&!l)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let c=new v4(this.view,e,i,a);return this.view.docView.domChanged={newSel:c.newSel?c.newSel.main:null},c}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let i=this.readChange();if(!i)return this.view.requestMeasure(),!1;let a=this.view.state,l=HS(this.view,i);return this.view.state==a&&(i.domChanged||i.newSel&&!i.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),l}readMutation(e){let i=this.view.docView.nearest(e.target);if(!i||i.ignoreMutation(e))return null;if(i.markDirty(e.type=="attributes"),e.type=="attributes"&&(i.flags|=4),e.type=="childList"){let a=GS(i,e.previousSibling||e.target.previousSibling,-1),l=GS(i,e.nextSibling||e.target.nextSibling,1);return{from:a?i.posAfter(a):i.posAtStart,to:l?i.posBefore(l):i.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(rs)!=e.state.facet(rs)&&(e.view.contentDOM.editContext=e.state.facet(rs)?this.editContext.editContext:null))}destroy(){var e,i,a;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(a=this.resizeScroll)===null||a===void 0||a.disconnect();for(let l of this.scrollTargets)l.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function GS(s,e,i){for(;e;){let a=Et.get(e);if(a&&a.parent==s)return a;let l=e.parentNode;e=l!=s.dom?l:i>0?e.nextSibling:e.previousSibling}return null}function YS(s,e){let i=e.startContainer,a=e.startOffset,l=e.endContainer,c=e.endOffset,u=s.docView.domAtPos(s.state.selection.main.anchor);return tl(u.node,u.offset,l,c)&&([i,a,l,c]=[l,c,i,a]),{anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:c}}function O4(s,e){if(e.getComposedRanges){let l=e.getComposedRanges(s.root)[0];if(l)return YS(s,l)}let i=null;function a(l){l.preventDefault(),l.stopImmediatePropagation(),i=l.getTargetRanges()[0]}return s.contentDOM.addEventListener("beforeinput",a,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",a,!0),i?YS(s,i):null}class C4{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let i=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=a=>{let{anchor:l}=e.state.selection.main,c={from:this.toEditorPos(a.updateRangeStart),to:this.toEditorPos(a.updateRangeEnd),insert:mt.of(a.text.split(`
`))};c.from==this.from&&l<this.from?c.from=l:c.to==this.to&&l>this.to&&(c.to=l),!(c.from==c.to&&!c.insert.length)&&(this.pendingContextChange=c,KS(e,c,de.single(this.toEditorPos(a.selectionStart),this.toEditorPos(a.selectionEnd))),this.pendingContextChange&&this.revertPending(e.state))},this.handlers.characterboundsupdate=a=>{let l=[],c=null;for(let u=this.toEditorPos(a.rangeStart),f=this.toEditorPos(a.rangeEnd);u<f;u++){let d=e.coordsForChar(u);c=d&&new DOMRect(d.left,d.top,d.right-d.left,d.bottom-d.top)||c||new DOMRect,l.push(c)}i.updateCharacterBounds(a.rangeStart,l)},this.handlers.textformatupdate=a=>{let l=[];for(let c of a.getTextFormats()){let u=c.underlineStyle,f=c.underlineThickness;if(u!="None"&&f!="None"){let d=`text-decoration: underline ${u=="Dashed"?"dashed ":u=="Squiggle"?"wavy ":""}${f=="Thin"?1:2}px`;l.push(Ne.mark({attributes:{style:d}}).range(this.toEditorPos(c.rangeStart),this.toEditorPos(c.rangeEnd)))}}e.dispatch({effects:qb.of(Ne.set(l))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let a in this.handlers)i.addEventListener(a,this.handlers[a]);this.measureReq={read:a=>{this.editContext.updateControlBounds(a.contentDOM.getBoundingClientRect());let l=el(a.root);l&&l.rangeCount&&this.editContext.updateSelectionBounds(l.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let i=0,a=!1,l=this.pendingContextChange;return e.changes.iterChanges((c,u,f,d,h)=>{if(a)return;let m=h.length-(u-c);if(l&&u>=l.to)if(l.from==c&&l.to==u&&l.insert.eq(h)){l=this.pendingContextChange=null,i+=m,this.to+=m;return}else l=null,this.revertPending(e.state);if(c+=i,u+=i,u<=this.from)this.from+=m,this.to+=m;else if(c<this.to){if(c<this.from||u>this.to||this.to-this.from+h.length>3e4){a=!0;return}this.editContext.updateText(this.toContextPos(c),this.toContextPos(u),h.toString()),this.to+=m}i+=m}),l&&!a&&this.revertPending(e.state),!a}update(e){!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:i}=e.selection.main;this.from=Math.max(0,i-1e4),this.to=Math.min(e.doc.length,i+1e4)}revertPending(e){let i=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(i.from),this.toContextPos(i.to+i.insert.length),e.doc.sliceString(i.from,i.to))}setSelection(e){let{main:i}=e.selection,a=this.toContextPos(Math.max(this.from,Math.min(this.to,i.anchor))),l=this.toContextPos(i.head);(this.editContext.selectionStart!=a||this.editContext.selectionEnd!=l)&&this.editContext.updateSelection(a,l)}rangeIsValid(e){let{head:i}=e.selection.main;return!(this.from>0&&i-this.from<500||this.to<e.doc.length&&this.to-i<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class xe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(a=>a.forEach(l=>i(l,this)))||(a=>this.update(a)),this.dispatch=this.dispatch.bind(this),this._root=e.root||hL(e.parent)||document,this.viewState=new BS(e.state||rt.create(e)),e.scrollTo&&e.scrollTo.is(au)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(sl).map(a=>new rm(a));for(let a of this.plugins)a.update(this);this.observer=new A4(this),this.inputState=new UL(this),this.inputState.ensureHandlers(this.plugins),this.docView=new oS(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let i=e.length==1&&e[0]instanceof rn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(i,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,a=!1,l,c=this.state;for(let b of e){if(b.startState!=c)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");c=b.state}if(this.destroyed){this.viewState.state=c;return}let u=this.hasFocus,f=0,d=null;e.some(b=>b.annotation(PS))?(this.inputState.notifiedFocused=u,f=1):u!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=u,d=DS(c,u),d||(f=1));let h=this.observer.delayedAndroidKey,m=null;if(h?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(c.doc)||!this.state.selection.eq(c.selection))&&(m=null)):this.observer.clear(),c.facet(rt.phrases)!=this.state.facet(rt.phrases))return this.setState(c);l=cu.create(this,c,e),l.flags|=f;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let b of e){if(p&&(p=p.map(b.changes)),b.scrollIntoView){let{main:v}=b.state.selection;p=new Mo(v.empty?v:de.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of b.effects)v.is(au)&&(p=v.value.clip(this.state))}this.viewState.update(l,p),this.bidiCache=vu.update(this.bidiCache,l.changes),l.empty||(this.updatePlugins(l),this.inputState.update(l)),i=this.docView.update(l),this.state.facet(al)!=this.styleModules&&this.mountStyles(),a=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some(b=>b.isUserEvent("select.pointer")))}finally{this.updateState=0}if(l.startState.facet(yu)!=l.state.facet(yu)&&(this.viewState.mustMeasureContent=!0),(i||a||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!l.empty)for(let b of this.state.facet(nm))try{b(l)}catch(v){Fn(this.state,v,"update listener")}(d||m)&&Promise.resolve().then(()=>{d&&this.state==d.startState&&this.dispatch(d),m&&!HS(this,m)&&h.force&&To(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let i=this.hasFocus;try{for(let a of this.plugins)a.destroy(this);this.viewState=new BS(e),this.plugins=e.facet(sl).map(a=>new rm(a)),this.pluginMap.clear();for(let a of this.plugins)a.update(this);this.docView.destroy(),this.docView=new oS(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(e){let i=e.startState.facet(sl),a=e.state.facet(sl);if(i!=a){let l=[];for(let c of a){let u=i.indexOf(c);if(u<0)l.push(new rm(c));else{let f=this.plugins[u];f.mustUpdate=e,l.push(f)}}for(let c of this.plugins)c.mustUpdate!=e&&c.destroy(this);this.plugins=l,this.pluginMap.clear()}else for(let l of this.plugins)l.mustUpdate=e;for(let l=0;l<this.plugins.length;l++)this.plugins[l].update(this);i!=a&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let i=e.value;if(i&&i.docViewUpdate)try{i.docViewUpdate(this)}catch(a){Fn(this.state,a,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let i=null,a=this.scrollDOM,l=a.scrollTop*this.scaleY,{scrollAnchorPos:c,scrollAnchorHeight:u}=this.viewState;Math.abs(l-this.viewState.scrollTop)>1&&(u=-1),this.viewState.scrollAnchorHeight=-1;try{for(let f=0;;f++){if(u<0)if(Sb(a))c=-1,u=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(l);c=v.from,u=v.top}this.updateState=1;let d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(f>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];d&4||([this.measureRequests,h]=[h,this.measureRequests]);let m=h.map(v=>{try{return v.read(this)}catch(x){return Fn(this.state,x),JS}}),p=cu.create(this,this.state,[]),b=!1;p.flags|=d,i?i.flags|=d:i=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),b=this.docView.update(p),b&&this.docViewUpdate());for(let v=0;v<h.length;v++)if(m[v]!=JS)try{let x=h[v];x.write&&x.write(m[v],this)}catch(x){Fn(this.state,x)}if(b&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=-1;continue}else{let x=(c<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(c).top)-u;if(x>1||x<-1){l=l+x,a.scrollTop=l/this.scaleY,u=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let f of this.state.facet(nm))f(i)}get themeClasses(){return mm+" "+(this.state.facet(hm)?VS:WS)+" "+this.state.facet(yu)}updateAttrs(){let e=ZS(this,eS,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(rs)?"true":"false",class:"cm-content",style:`${Pe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),ZS(this,lu,i);let a=this.observer.ignore(()=>{let l=_h(this.contentDOM,this.contentAttrs,i),c=_h(this.dom,this.editorAttrs,e);return l||c});return this.editorAttrs=e,this.contentAttrs=i,a}showAnnouncements(e){let i=!0;for(let a of e)for(let l of a.effects)if(l.is(xe.announce)){i&&(this.announceDOM.textContent=""),i=!1;let c=this.announceDOM.appendChild(document.createElement("div"));c.textContent=l.value}}mountStyles(){this.styleModules=this.state.facet(al);let e=this.state.facet(xe.cspNonce);Qi.mount(this.root,this.styleModules.concat(p4).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===e.key){this.measureRequests[i]=e;return}}this.measureRequests.push(e)}}plugin(e){let i=this.pluginMap.get(e);return(i===void 0||i&&i.spec!=e)&&this.pluginMap.set(e,i=this.plugins.find(a=>a.spec==e)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,i,a){return lm(this,e,mS(this,e,i,a))}moveByGroup(e,i){return lm(this,e,mS(this,e,i,a=>VL(this,e.head,a)))}visualLineSide(e,i){let a=this.bidiSpans(e),l=this.textDirectionAt(e.from),c=a[i?a.length-1:0];return de.cursor(c.side(i,l)+e.from,c.forward(!i,l)?1:-1)}moveToLineBoundary(e,i,a=!0){return WL(this,e,i,a)}moveVertically(e,i,a){return lm(this,e,zL(this,e,i,a))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,i=0){return this.docView.posFromDOM(e,i)}posAtCoords(e,i=!0){return this.readMeasured(),dS(this,e,i)}coordsAtPos(e,i=1){this.readMeasured();let a=this.docView.coordsAt(e,i);if(!a||a.left==a.right)return a;let l=this.state.doc.lineAt(e),c=this.bidiSpans(l),u=c[ns.find(c,e-l.from,-1,i)];return ru(a,u.dir==wt.LTR==i>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(_b)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>k4)return Vb(e.length);let i=this.textDirectionAt(e.from),a;for(let c of this.bidiCache)if(c.from==e.from&&c.dir==i&&(c.fresh||jb(c.isolates,a=rS(this,e))))return c.order;a||(a=rS(this,e));let l=Wb(e.text,i,a);return this.bidiCache.push(new vu(e.from,e.to,i,a,!0,l)),l}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Pe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{yb(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,i={}){return au.of(new Mo(typeof e=="number"?de.cursor(e):e,i.y,i.x,i.yMargin,i.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:i}=this.scrollDOM,a=this.viewState.scrollAnchorAt(e);return au.of(new Mo(de.cursor(a.from),"start","start",a.top-e,i,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Bt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Bt.define(()=>({}),{eventObservers:e})}static theme(e,i){let a=Qi.newName(),l=[yu.of(a),al.of(pm(`.${a}`,e))];return i&&i.dark&&l.push(hm.of(!0)),l}static baseTheme(e){return yi.lowest(al.of(pm("."+mm,e,zS)))}static findFromDOM(e){var i;let a=e.querySelector(".cm-content"),l=a&&Et.get(a)||Et.get(e);return((i=l==null?void 0:l.rootView)===null||i===void 0?void 0:i.view)||null}}xe.styleModule=al,xe.inputHandler=Jb,xe.scrollHandler=Qb,xe.focusChangeEffect=Zb,xe.perLineTextDirection=_b,xe.exceptionSink=Yb,xe.updateListener=nm,xe.editable=rs,xe.mouseSelectionStyle=Gb,xe.dragMovesSelection=Kb,xe.clickAddsSelectionRange=Hb,xe.decorations=ol,xe.outerDecorations=tS,xe.atomicRanges=im,xe.bidiIsolatedRanges=nS,xe.scrollMargins=iS,xe.darkTheme=hm,xe.cspNonce=Te.define({combine:s=>s.length?s[0]:""}),xe.contentAttributes=lu,xe.editorAttributes=eS,xe.lineWrapping=xe.contentAttributes.of({class:"cm-lineWrapping"}),xe.announce=Ye.define();const k4=4096,JS={};class vu{constructor(e,i,a,l,c,u){this.from=e,this.to=i,this.dir=a,this.isolates=l,this.fresh=c,this.order=u}static update(e,i){if(i.empty&&!e.some(c=>c.fresh))return e;let a=[],l=e.length?e[e.length-1].dir:wt.LTR;for(let c=Math.max(0,e.length-10);c<e.length;c++){let u=e[c];u.dir==l&&!i.touchesRange(u.from,u.to)&&a.push(new vu(i.mapPos(u.from,1),i.mapPos(u.to,-1),u.dir,u.isolates,!1,u.order))}return a}}function ZS(s,e,i){for(let a=s.state.facet(e),l=a.length-1;l>=0;l--){let c=a[l],u=typeof c=="function"?c(s):c;u&&Zh(u,i)}return i}const T4=Pe.mac?"mac":Pe.windows?"win":Pe.linux?"linux":"key";function P4(s,e){const i=s.split(/-(?!$)/);let a=i[i.length-1];a=="Space"&&(a=" ");let l,c,u,f;for(let d=0;d<i.length-1;++d){const h=i[d];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))l=!0;else if(/^(c|ctrl|control)$/i.test(h))c=!0;else if(/^s(hift)?$/i.test(h))u=!0;else if(/^mod$/i.test(h))e=="mac"?f=!0:c=!0;else throw new Error("Unrecognized modifier name: "+h)}return l&&(a="Alt-"+a),c&&(a="Ctrl-"+a),f&&(a="Meta-"+a),u&&(a="Shift-"+a),a}function bu(s,e,i){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),i!==!1&&e.shiftKey&&(s="Shift-"+s),s}const D4=yi.default(xe.domEventHandlers({keydown(s,e){return QS(XS(e.state),s,e,"editor")}})),ul=Te.define({enables:D4}),_S=new WeakMap;function XS(s){let e=s.facet(ul),i=_S.get(e);return i||_S.set(e,i=R4(e.reduce((a,l)=>a.concat(l),[]))),i}function M4(s,e,i){return QS(XS(s.state),e,s,i)}let is=null;const I4=4e3;function R4(s,e=T4){let i=Object.create(null),a=Object.create(null),l=(u,f)=>{let d=a[u];if(d==null)a[u]=f;else if(d!=f)throw new Error("Key binding "+u+" is used both as a regular binding and as a multi-stroke prefix")},c=(u,f,d,h,m)=>{var p,b;let v=i[u]||(i[u]=Object.create(null)),x=f.split(/ (?!$)/).map(A=>P4(A,e));for(let A=1;A<x.length;A++){let C=x.slice(0,A).join(" ");l(C,!0),v[C]||(v[C]={preventDefault:!0,stopPropagation:!1,run:[W=>{let B=is={view:W,prefix:C,scope:u};return setTimeout(()=>{is==B&&(is=null)},I4),!0}]})}let E=x.join(" ");l(E,!1);let w=v[E]||(v[E]={preventDefault:!1,stopPropagation:!1,run:((b=(p=v._any)===null||p===void 0?void 0:p.run)===null||b===void 0?void 0:b.slice())||[]});d&&w.run.push(d),h&&(w.preventDefault=!0),m&&(w.stopPropagation=!0)};for(let u of s){let f=u.scope?u.scope.split(" "):["editor"];if(u.any)for(let h of f){let m=i[h]||(i[h]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:p}=u;for(let b in m)m[b].run.push(v=>p(v,ym))}let d=u[e]||u.key;if(d)for(let h of f)c(h,d,u.run,u.preventDefault,u.stopPropagation),u.shift&&c(h,"Shift-"+d,u.shift,u.preventDefault,u.stopPropagation)}return i}let ym=null;function QS(s,e,i,a){ym=e;let l=aL(e),c=ln(l,0),u=lr(c)==l.length&&l!=" ",f="",d=!1,h=!1,m=!1;is&&is.view==i&&is.scope==a&&(f=is.prefix+" ",yS.indexOf(e.keyCode)<0&&(h=!0,is=null));let p=new Set,b=w=>{if(w){for(let A of w.run)if(!p.has(A)&&(p.add(A),A(i)))return w.stopPropagation&&(m=!0),!0;w.preventDefault&&(w.stopPropagation&&(m=!0),h=!0)}return!1},v=s[a],x,E;return v&&(b(v[f+bu(l,e,!u)])?d=!0:u&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Pe.windows&&e.ctrlKey&&e.altKey)&&(x=qi[e.keyCode])&&x!=l?(b(v[f+bu(x,e,!0)])||e.shiftKey&&(E=qa[e.keyCode])!=l&&E!=x&&b(v[f+bu(E,e,!1)]))&&(d=!0):u&&e.shiftKey&&b(v[f+bu(l,e,!0)])&&(d=!0),!d&&b(v._any)&&(d=!0)),h&&(d=!0),d&&m&&e.stopPropagation(),ym=null,d}class fl{constructor(e,i,a,l,c){this.className=e,this.left=i,this.top=a,this.width=l,this.height=c}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,i){return i.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,i,a){if(a.empty){let l=e.coordsAtPos(a.head,a.assoc||1);if(!l)return[];let c=qS(e);return[new fl(i,l.left-c.left,l.top-c.top,null,l.bottom-l.top)]}else return N4(e,i,a)}}function qS(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==wt.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function ex(s,e,i,a){let l=s.coordsAtPos(e,i*2);if(!l)return a;let c=s.dom.getBoundingClientRect(),u=(l.top+l.bottom)/2,f=s.posAtCoords({x:c.left+1,y:u}),d=s.posAtCoords({x:c.right-1,y:u});return f==null||d==null?a:{from:Math.max(a.from,Math.min(f,d)),to:Math.min(a.to,Math.max(f,d))}}function N4(s,e,i){if(i.to<=s.viewport.from||i.from>=s.viewport.to)return[];let a=Math.max(i.from,s.viewport.from),l=Math.min(i.to,s.viewport.to),c=s.textDirection==wt.LTR,u=s.contentDOM,f=u.getBoundingClientRect(),d=qS(s),h=u.querySelector(".cm-line"),m=h&&window.getComputedStyle(h),p=f.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),b=f.right-(m?parseInt(m.paddingRight):0),v=am(s,a),x=am(s,l),E=v.type==Pn.Text?v:null,w=x.type==Pn.Text?x:null;if(E&&(s.lineWrapping||v.widgetLineBreaks)&&(E=ex(s,a,1,E)),w&&(s.lineWrapping||x.widgetLineBreaks)&&(w=ex(s,l,-1,w)),E&&w&&E.from==w.from&&E.to==w.to)return C(W(i.from,i.to,E));{let V=E?W(i.from,null,E):B(v,!1),J=w?W(null,i.to,w):B(x,!0),Z=[];return(E||v).to<(w||x).from-(E&&w?1:0)||v.widgetLineBreaks>1&&V.bottom+s.defaultLineHeight/2<J.top?Z.push(A(p,V.bottom,b,J.top)):V.bottom<J.top&&s.elementAtHeight((V.bottom+J.top)/2).type==Pn.Text&&(V.bottom=J.top=(V.bottom+J.top)/2),C(V).concat(Z).concat(C(J))}function A(V,J,Z,le){return new fl(e,V-d.left,J-d.top-.01,Z-V,le-J+.01)}function C({top:V,bottom:J,horizontal:Z}){let le=[];for(let ce=0;ce<Z.length;ce+=2)le.push(A(Z[ce],V,Z[ce+1],J));return le}function W(V,J,Z){let le=1e9,ce=-1e9,he=[];function ge(be,ve,Me,Fe,ke){let Se=s.coordsAtPos(be,be==Z.to?-2:2),je=s.coordsAtPos(Me,Me==Z.from?2:-2);!Se||!je||(le=Math.min(Se.top,je.top,le),ce=Math.max(Se.bottom,je.bottom,ce),ke==wt.LTR?he.push(c&&ve?p:Se.left,c&&Fe?b:je.right):he.push(!c&&Fe?p:je.left,!c&&ve?b:Se.right))}let fe=V!=null?V:Z.from,ye=J!=null?J:Z.to;for(let be of s.visibleRanges)if(be.to>fe&&be.from<ye)for(let ve=Math.max(be.from,fe),Me=Math.min(be.to,ye);;){let Fe=s.state.doc.lineAt(ve);for(let ke of s.bidiSpans(Fe)){let Se=ke.from+Fe.from,je=ke.to+Fe.from;if(Se>=Me)break;je>ve&&ge(Math.max(Se,ve),V==null&&Se<=fe,Math.min(je,Me),J==null&&je>=ye,ke.dir)}if(ve=Fe.to+1,ve>=Me)break}return he.length==0&&ge(fe,V==null,ye,J==null,s.textDirection),{top:le,bottom:ce,horizontal:he}}function B(V,J){let Z=f.top+(J?V.top:V.bottom);return{top:Z,bottom:Z,horizontal:[]}}}function F4(s,e){return s.constructor==e.constructor&&s.eq(e)}class L4{constructor(e,i){this.view=e,this.layer=i,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),i.above&&this.dom.classList.add("cm-layer-above"),i.class&&this.dom.classList.add(i.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),i.mount&&i.mount(this.dom,e)}update(e){e.startState.facet(Su)!=e.state.facet(Su)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let i=0,a=e.facet(Su);for(;i<a.length&&a[i]!=this.layer;)i++;this.dom.style.zIndex=String((this.layer.above?150:-1)-i)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:i}=this.view;(e!=this.scaleX||i!=this.scaleY)&&(this.scaleX=e,this.scaleY=i,this.dom.style.transform=`scale(${1/e}, ${1/i})`)}draw(e){if(e.length!=this.drawn.length||e.some((i,a)=>!F4(i,this.drawn[a]))){let i=this.dom.firstChild,a=0;for(let l of e)l.update&&i&&l.constructor&&this.drawn[a].constructor&&l.update(i,this.drawn[a])?(i=i.nextSibling,a++):this.dom.insertBefore(l.draw(),i);for(;i;){let l=i.nextSibling;i.remove(),i=l}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Su=Te.define();function tx(s){return[Bt.define(e=>new L4(e,s)),Su.of(s)]}const nx=!Pe.ios,Io=Te.define({combine(s){return Ar(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,i)=>Math.min(e,i),drawRangeCursor:(e,i)=>e||i})}});function $4(s={}){return[Io.of(s),B4,j4,W4,Xb.of(!0)]}function EW(s){return s.facet(Io)}function rx(s){return s.startState.facet(Io)!=s.state.facet(Io)}const B4=tx({above:!0,markers(s){let{state:e}=s,i=e.facet(Io),a=[];for(let l of e.selection.ranges){let c=l==e.selection.main;if(l.empty?!c||nx:i.drawRangeCursor){let u=c?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",f=l.empty?l:de.cursor(l.head,l.head>l.anchor?-1:1);for(let d of fl.forRange(s,u,f))a.push(d)}}return a},update(s,e){s.transactions.some(a=>a.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=rx(s);return i&&ix(s.state,e),s.docChanged||s.selectionSet||i},mount(s,e){ix(e.state,s)},class:"cm-cursorLayer"});function ix(s,e){e.style.animationDuration=s.facet(Io).cursorBlinkRate+"ms"}const j4=tx({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:fl.forRange(s,"cm-selectionBackground",e)).reduce((e,i)=>e.concat(i))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||rx(s)},class:"cm-selectionLayer"}),vm={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};nx&&(vm[".cm-line"].caretColor=vm[".cm-content"].caretColor="transparent !important");const W4=yi.highest(xe.theme(vm)),sx=Ye.define({map(s,e){return s==null?null:e.mapPos(s)}}),dl=Jt.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((i,a)=>a.is(sx)?a.value:i,s)}}),V4=Bt.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let i=s.state.field(dl);i==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(dl)!=i||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(dl),i=e!=null&&s.coordsAtPos(e);if(!i)return null;let a=s.scrollDOM.getBoundingClientRect();return{left:i.left-a.left+s.scrollDOM.scrollLeft*s.scaleX,top:i.top-a.top+s.scrollDOM.scrollTop*s.scaleY,height:i.bottom-i.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:i}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/i+"px",this.cursor.style.height=s.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(dl)!=s&&this.view.dispatch({effects:sx.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function z4(){return[dl,V4]}function ox(s,e,i,a,l){e.lastIndex=0;for(let c=s.iterRange(i,a),u=i,f;!c.next().done;u+=c.value.length)if(!c.lineBreak)for(;f=e.exec(c.value);)l(u+f.index,f)}function U4(s,e){let i=s.visibleRanges;if(i.length==1&&i[0].from==s.viewport.from&&i[0].to==s.viewport.to)return i;let a=[];for(let{from:l,to:c}of i)l=Math.max(s.state.doc.lineAt(l).from,l-e),c=Math.min(s.state.doc.lineAt(c).to,c+e),a.length&&a[a.length-1].to>=l?a[a.length-1].to=c:a.push({from:l,to:c});return a}class bm{constructor(e){const{regexp:i,decoration:a,decorate:l,boundary:c,maxLength:u=1e3}=e;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,l)this.addMatch=(f,d,h,m)=>l(m,h,h+f[0].length,f,d);else if(typeof a=="function")this.addMatch=(f,d,h,m)=>{let p=a(f,d,h);p&&m(h,h+f[0].length,p)};else if(a)this.addMatch=(f,d,h,m)=>m(h,h+f[0].length,a);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=c,this.maxLength=u}createDeco(e){let i=new vi,a=i.add.bind(i);for(let{from:l,to:c}of U4(e,this.maxLength))ox(e.state.doc,this.regexp,l,c,(u,f)=>this.addMatch(f,e,u,a));return i.finish()}updateDeco(e,i){let a=1e9,l=-1;return e.docChanged&&e.changes.iterChanges((c,u,f,d)=>{d>e.view.viewport.from&&f<e.view.viewport.to&&(a=Math.min(f,a),l=Math.max(d,l))}),e.viewportChanged||l-a>1e3?this.createDeco(e.view):l>-1?this.updateRange(e.view,i.map(e.changes),a,l):i}updateRange(e,i,a,l){for(let c of e.visibleRanges){let u=Math.max(c.from,a),f=Math.min(c.to,l);if(f>u){let d=e.state.doc.lineAt(u),h=d.to<f?e.state.doc.lineAt(f):d,m=Math.max(c.from,d.from),p=Math.min(c.to,h.to);if(this.boundary){for(;u>d.from;u--)if(this.boundary.test(d.text[u-1-d.from])){m=u;break}for(;f<h.to;f++)if(this.boundary.test(h.text[f-h.from])){p=f;break}}let b=[],v,x=(E,w,A)=>b.push(A.range(E,w));if(d==h)for(this.regexp.lastIndex=m-d.from;(v=this.regexp.exec(d.text))&&v.index<p-d.from;)this.addMatch(v,e,v.index+d.from,x);else ox(e.state.doc,this.regexp,m,p,(E,w)=>this.addMatch(w,e,E,x));i=i.update({filterFrom:m,filterTo:p,filter:(E,w)=>E<m||w>p,add:b})}}return i}}const Sm=/x/.unicode!=null?"gu":"g",H4=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Sm),K4={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let xm=null;function G4(){var s;if(xm==null&&typeof document!="undefined"&&document.body){let e=document.body.style;xm=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return xm||!1}const xu=Te.define({combine(s){let e=Ar(s,{render:null,specialChars:H4,addSpecialChars:null});return(e.replaceTabs=!G4())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Sm)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Sm)),e}});function Y4(s={}){return[xu.of(s),J4()]}let ax=null;function J4(){return ax||(ax=Bt.fromClass(class{constructor(s){this.view=s,this.decorations=Ne.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(xu)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new bm({regexp:s.specialChars,decoration:(e,i,a)=>{let{doc:l}=i.state,c=ln(e[0],0);if(c==9){let u=l.lineAt(a),f=i.state.tabSize,d=Oo(u.text,f,a-u.from);return Ne.replace({widget:new Q4((f-d%f)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[c]||(this.decorationCache[c]=Ne.replace({widget:new X4(s,c)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(xu);s.startState.facet(xu)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const Z4="\u2022";function _4(s){return s>=32?Z4:s==10?"\u2424":String.fromCharCode(9216+s)}class X4 extends zr{constructor(e,i){super(),this.options=e,this.code=i}eq(e){return e.code==this.code}toDOM(e){let i=_4(this.code),a=e.state.phrase("Control character")+" "+(K4[this.code]||"0x"+this.code.toString(16)),l=this.options.render&&this.options.render(this.code,a,i);if(l)return l;let c=document.createElement("span");return c.textContent=i,c.title=a,c.setAttribute("aria-label",a),c.className="cm-specialChar",c}ignoreEvent(){return!1}}class Q4 extends zr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const lx=null;function wW(){return[lx,lu.of(s=>{var e;return((e=s.plugin(lx))===null||e===void 0?void 0:e.attrs)||null})]}function q4(){return t$}const e$=Ne.line({class:"cm-activeLine"}),t$=Bt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,i=[];for(let a of s.state.selection.ranges){let l=s.lineBlockAt(a.head);l.from>e&&(i.push(e$.range(l.from)),e=l.from)}return Ne.set(i)}},{decorations:s=>s.decorations});class n$ extends zr{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let i=e.firstChild?Co(e.firstChild):[];if(!i.length)return null;let a=window.getComputedStyle(e.parentNode),l=ru(i[0],a.direction!="rtl"),c=parseInt(a.lineHeight);return l.bottom-l.top>c*1.5?{left:l.left,right:l.right,top:l.top,bottom:l.top+c}:l}ignoreEvent(){return!1}}function r$(s){return Bt.fromClass(class{constructor(e){this.view=e,this.placeholder=s?Ne.set([Ne.widget({widget:new n$(s),side:1}).range(0)]):Ne.none}get decorations(){return this.view.state.doc.length?Ne.none:this.placeholder}},{decorations:e=>e.decorations})}const Em=2e3;function i$(s,e,i){let a=Math.min(e.line,i.line),l=Math.max(e.line,i.line),c=[];if(e.off>Em||i.off>Em||e.col<0||i.col<0){let u=Math.min(e.off,i.off),f=Math.max(e.off,i.off);for(let d=a;d<=l;d++){let h=s.doc.line(d);h.length<=f&&c.push(de.range(h.from+u,h.to+f))}}else{let u=Math.min(e.col,i.col),f=Math.max(e.col,i.col);for(let d=a;d<=l;d++){let h=s.doc.line(d),m=jh(h.text,u,s.tabSize,!0);if(m<0)c.push(de.cursor(h.to));else{let p=jh(h.text,f,s.tabSize);c.push(de.range(h.from+m,h.from+p))}}}return c}function s$(s,e){let i=s.coordsAtPos(s.viewport.from);return i?Math.round(Math.abs((i.left-e)/s.defaultCharacterWidth)):-1}function cx(s,e){let i=s.posAtCoords({x:e.clientX,y:e.clientY},!1),a=s.state.doc.lineAt(i),l=i-a.from,c=l>Em?-1:l==a.length?s$(s,e.clientX):Oo(a.text,s.state.tabSize,i-a.from);return{line:a.number,col:c,off:l}}function o$(s,e){let i=cx(s,e),a=s.state.selection;return i?{update(l){if(l.docChanged){let c=l.changes.mapPos(l.startState.doc.line(i.line).from),u=l.state.doc.lineAt(c);i={line:u.number,col:i.col,off:Math.min(i.off,u.length)},a=a.map(l.changes)}},get(l,c,u){let f=cx(s,l);if(!f)return a;let d=i$(s.state,i,f);return d.length?u?de.create(d.concat(a.ranges)):de.create(d):a}}:null}function a$(s){let e=(s==null?void 0:s.eventFilter)||(i=>i.altKey&&i.button==0);return xe.mouseSelectionStyle.of((i,a)=>e(a)?o$(i,a):null)}const l$={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},c$={style:"cursor: crosshair"};function u$(s={}){let[e,i]=l$[s.key||"Alt"],a=Bt.fromClass(class{constructor(l){this.view=l,this.isDown=!1}set(l){this.isDown!=l&&(this.isDown=l,this.view.update([]))}},{eventObservers:{keydown(l){this.set(l.keyCode==e||i(l))},keyup(l){(l.keyCode==e||!i(l))&&this.set(!1)},mousemove(l){this.set(i(l))}}});return[a,xe.contentAttributes.of(l=>{var c;return!((c=l.plugin(a))===null||c===void 0)&&c.isDown?c$:null})]}const hl="-10000px";class ux{constructor(e,i,a,l){this.facet=i,this.createTooltipView=a,this.removeTooltipView=l,this.input=e.state.facet(i),this.tooltips=this.input.filter(u=>u);let c=null;this.tooltipViews=this.tooltips.map(u=>c=a(u,c))}update(e,i){var a;let l=e.state.facet(this.facet),c=l.filter(d=>d);if(l===this.input){for(let d of this.tooltipViews)d.update&&d.update(e);return!1}let u=[],f=i?[]:null;for(let d=0;d<c.length;d++){let h=c[d],m=-1;if(h){for(let p=0;p<this.tooltips.length;p++){let b=this.tooltips[p];b&&b.create==h.create&&(m=p)}if(m<0)u[d]=this.createTooltipView(h,d?u[d-1]:null),f&&(f[d]=!!h.above);else{let p=u[d]=this.tooltipViews[m];f&&(f[d]=i[m]),p.update&&p.update(e)}}}for(let d of this.tooltipViews)u.indexOf(d)<0&&(this.removeTooltipView(d),(a=d.destroy)===null||a===void 0||a.call(d));return i&&(f.forEach((d,h)=>i[h]=d),i.length=f.length),this.input=l,this.tooltips=c,this.tooltipViews=u,!0}}function AW(s={}){return Eu.of(s)}function f$(s){let{win:e}=s;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Eu=Te.define({combine:s=>{var e,i,a;return{position:Pe.ios?"absolute":((e=s.find(l=>l.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((i=s.find(l=>l.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((a=s.find(l=>l.tooltipSpace))===null||a===void 0?void 0:a.tooltipSpace)||f$}}}),fx=new WeakMap,wu=Bt.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(Eu);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new ux(s,Au,(i,a)=>this.createTooltip(i,a),i=>{this.resizeObserver&&this.resizeObserver.unobserve(i.dom),i.dom.remove()}),this.above=this.manager.tooltips.map(i=>!!i.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let i=e||s.geometryChanged,a=s.state.facet(Eu);if(a.position!=this.position&&!this.madeAbsolute){this.position=a.position;for(let l of this.manager.tooltipViews)l.dom.style.position=this.position;i=!0}if(a.parent!=this.parent){this.parent&&this.container.remove(),this.parent=a.parent,this.createContainer();for(let l of this.manager.tooltipViews)this.container.appendChild(l.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(s,e){let i=s.create(this.view),a=e?e.dom:null;if(i.dom.classList.add("cm-tooltip"),s.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let l=document.createElement("div");l.className="cm-tooltip-arrow",i.dom.appendChild(l)}return i.dom.style.position=this.position,i.dom.style.top=hl,i.dom.style.left="0px",this.container.insertBefore(i.dom,a),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var s,e,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let a of this.manager.tooltipViews)a.dom.remove(),(s=a.destroy)===null||s===void 0||s.call(a);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=this.view.dom.getBoundingClientRect(),e=1,i=1,a=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:l}=this.manager.tooltipViews[0];if(Pe.gecko)a=l.offsetParent!=this.container.ownerDocument.body;else if(l.style.top==hl&&l.style.left=="0px"){let c=l.getBoundingClientRect();a=Math.abs(c.top+1e4)>1||Math.abs(c.left)>1}}if(a||this.position=="absolute")if(this.parent){let l=this.parent.getBoundingClientRect();l.width&&l.height&&(e=l.width/this.parent.offsetWidth,i=l.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:i}=this.view.viewState);return{editor:s,parent:this.parent?this.container.getBoundingClientRect():s,pos:this.manager.tooltips.map((l,c)=>{let u=this.manager.tooltipViews[c];return u.getCoords?u.getCoords(l.pos):this.view.coordsAtPos(l.pos)}),size:this.manager.tooltipViews.map(({dom:l})=>l.getBoundingClientRect()),space:this.view.state.facet(Eu).tooltipSpace(this.view),scaleX:e,scaleY:i,makeAbsolute:a}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let f of this.manager.tooltipViews)f.dom.style.position="absolute"}let{editor:i,space:a,scaleX:l,scaleY:c}=s,u=[];for(let f=0;f<this.manager.tooltips.length;f++){let d=this.manager.tooltips[f],h=this.manager.tooltipViews[f],{dom:m}=h,p=s.pos[f],b=s.size[f];if(!p||p.bottom<=Math.max(i.top,a.top)||p.top>=Math.min(i.bottom,a.bottom)||p.right<Math.max(i.left,a.left)-.1||p.left>Math.min(i.right,a.right)+.1){m.style.top=hl;continue}let v=d.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,x=v?7:0,E=b.right-b.left,w=(e=fx.get(h))!==null&&e!==void 0?e:b.bottom-b.top,A=h.offset||h$,C=this.view.textDirection==wt.LTR,W=b.width>a.right-a.left?C?a.left:a.right-b.width:C?Math.min(p.left-(v?14:0)+A.x,a.right-E):Math.max(a.left,p.left-E+(v?14:0)-A.x),B=this.above[f];!d.strictSide&&(B?p.top-(b.bottom-b.top)-A.y<a.top:p.bottom+(b.bottom-b.top)+A.y>a.bottom)&&B==a.bottom-p.bottom>p.top-a.top&&(B=this.above[f]=!B);let V=(B?p.top-a.top:a.bottom-p.bottom)-x;if(V<w&&h.resize!==!1){if(V<this.view.defaultLineHeight){m.style.top=hl;continue}fx.set(h,w),m.style.height=(w=V)/c+"px"}else m.style.height&&(m.style.height="");let J=B?p.top-w-x-A.y:p.bottom+x+A.y,Z=W+E;if(h.overlap!==!0)for(let le of u)le.left<Z&&le.right>W&&le.top<J+w&&le.bottom>J&&(J=B?le.top-w-2-x:le.bottom+x+2);if(this.position=="absolute"?(m.style.top=(J-s.parent.top)/c+"px",m.style.left=(W-s.parent.left)/l+"px"):(m.style.top=J/c+"px",m.style.left=W/l+"px"),v){let le=p.left+(C?A.x:-A.x)-(W+14-7);v.style.left=le/l+"px"}h.overlap!==!0&&u.push({left:W,top:J,right:Z,bottom:J+w}),m.classList.toggle("cm-tooltip-above",B),m.classList.toggle("cm-tooltip-below",!B),h.positioned&&h.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=hl}},{eventObservers:{scroll(){this.maybeMeasure()}}}),d$=xe.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),h$={x:0,y:0},Au=Te.define({enables:[wu,d$]}),ml=Te.define({combine:s=>s.reduce((e,i)=>e.concat(i),[])});class Ou{static create(e){return new Ou(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ux(e,ml,(i,a)=>this.createHostedView(i,a),i=>i.dom.remove())}createHostedView(e,i){let a=e.create(this.view);return a.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(a.dom,i?i.dom.nextSibling:this.dom.firstChild),this.mounted&&a.mount&&a.mount(this.view),a}mount(e){for(let i of this.manager.tooltipViews)i.mount&&i.mount(e);this.mounted=!0}positioned(e){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let i of this.manager.tooltipViews)(e=i.destroy)===null||e===void 0||e.call(i)}passProp(e){let i;for(let a of this.manager.tooltipViews){let l=a[e];if(l!==void 0){if(i===void 0)i=l;else if(i!==l)return}}return i}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const m$=Au.compute([ml],s=>{let e=s.facet(ml);return e.length===0?null:{pos:Math.min(...e.map(i=>i.pos)),end:Math.max(...e.map(i=>{var a;return(a=i.end)!==null&&a!==void 0?a:i.pos})),create:Ou.create,above:e[0].above,arrow:e.some(i=>i.arrow)}});class p${constructor(e,i,a,l,c){this.view=e,this.source=i,this.field=a,this.setHover=l,this.hoverTime=c,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:i}=this,a=e.docView.nearest(i.target);if(!a)return;let l,c=1;if(a instanceof es)l=a.posAtStart;else{if(l=e.posAtCoords(i),l==null)return;let f=e.coordsAtPos(l);if(!f||i.y<f.top||i.y>f.bottom||i.x<f.left-e.defaultCharacterWidth||i.x>f.right+e.defaultCharacterWidth)return;let d=e.bidiSpans(e.state.doc.lineAt(l)).find(m=>m.from<=l&&m.to>=l),h=d&&d.dir==wt.RTL?-1:1;c=i.x<f.left?-h:h}let u=this.source(e,l,c);if(u!=null&&u.then){let f=this.pending={pos:l};u.then(d=>{this.pending==f&&(this.pending=null,d&&!(Array.isArray(d)&&!d.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(d)?d:[d])}))},d=>Fn(e.state,d,"hover tooltip"))}else u&&!(Array.isArray(u)&&!u.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(u)?u:[u])})}get tooltip(){let e=this.view.plugin(wu),i=e?e.manager.tooltips.findIndex(a=>a.create==Ou.create):-1;return i>-1?e.manager.tooltipViews[i]:null}mousemove(e){var i,a;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:l,tooltip:c}=this;if(l.length&&c&&!g$(c.dom,e)||this.pending){let{pos:u}=l[0]||this.pending,f=(a=(i=l[0])===null||i===void 0?void 0:i.end)!==null&&a!==void 0?a:u;(u==f?this.view.posAtCoords(this.lastMove)!=u:!y$(this.view,u,f,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:i}=this;if(i.length){let{tooltip:a}=this;a&&a.dom.contains(e.relatedTarget)?this.watchTooltipLeave(a.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let i=a=>{e.removeEventListener("mouseleave",i),this.active.length&&!this.view.dom.contains(a.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",i)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Cu=4;function g$(s,e){let i=s.getBoundingClientRect();return e.clientX>=i.left-Cu&&e.clientX<=i.right+Cu&&e.clientY>=i.top-Cu&&e.clientY<=i.bottom+Cu}function y$(s,e,i,a,l,c){let u=s.scrollDOM.getBoundingClientRect(),f=s.documentTop+s.documentPadding.top+s.contentHeight;if(u.left>a||u.right<a||u.top>l||Math.min(u.bottom,f)<l)return!1;let d=s.posAtCoords({x:a,y:l},!1);return d>=e&&d<=i}function v$(s,e={}){let i=Ye.define(),a=Jt.define({create(){return[]},update(l,c){if(l.length&&(e.hideOnChange&&(c.docChanged||c.selection)?l=[]:e.hideOn&&(l=l.filter(u=>!e.hideOn(c,u))),c.docChanged)){let u=[];for(let f of l){let d=c.changes.mapPos(f.pos,-1,Tn.TrackDel);if(d!=null){let h=Object.assign(Object.create(null),f);h.pos=d,h.end!=null&&(h.end=c.changes.mapPos(h.end)),u.push(h)}}l=u}for(let u of c.effects)u.is(i)&&(l=u.value),u.is(b$)&&(l=[]);return l},provide:l=>ml.from(l)});return[a,Bt.define(l=>new p$(l,s,a,i,e.hoverTime||300)),m$]}function dx(s,e){let i=s.plugin(wu);if(!i)return null;let a=i.manager.tooltips.indexOf(e);return a<0?null:i.manager.tooltipViews[a]}function OW(s){return s.facet(ml).some(e=>e)}const b$=Ye.define(),CW=null;function kW(s){let e=s.plugin(wu);e&&e.maybeMeasure()}const wm=Te.define({combine(s){let e,i;for(let a of s)e=e||a.topContainer,i=i||a.bottomContainer;return{topContainer:e,bottomContainer:i}}});function TW(s){return s?[wm.of(s)]:[]}function pl(s,e){let i=s.plugin(hx),a=i?i.specs.indexOf(e):-1;return a>-1?i.panels[a]:null}const hx=Bt.fromClass(class{constructor(s){this.input=s.state.facet(Fs),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(s));let e=s.state.facet(wm);this.top=new ku(s,!0,e.topContainer),this.bottom=new ku(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(s){let e=s.state.facet(wm);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ku(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ku(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=s.state.facet(Fs);if(i!=this.input){let a=i.filter(d=>d),l=[],c=[],u=[],f=[];for(let d of a){let h=this.specs.indexOf(d),m;h<0?(m=d(s.view),f.push(m)):(m=this.panels[h],m.update&&m.update(s)),l.push(m),(m.top?c:u).push(m)}this.specs=a,this.panels=l,this.top.sync(c),this.bottom.sync(u);for(let d of f)d.dom.classList.add("cm-panel"),d.mount&&d.mount()}else for(let a of this.panels)a.update&&a.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>xe.scrollMargins.of(e=>{let i=e.plugin(s);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class ku{constructor(e,i,a){this.view=e,this.top=i,this.container=a,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let i of this.panels)i.destroy&&e.indexOf(i)<0&&i.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let e=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;e!=i.dom;)e=mx(e);e=e.nextSibling}else this.dom.insertBefore(i.dom,e);for(;e;)e=mx(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function mx(s){let e=s.nextSibling;return s.remove(),e}const Fs=Te.define({enables:hx});class Kr extends Ms{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Kr.prototype.elementClass="",Kr.prototype.toDOM=void 0,Kr.prototype.mapMode=Tn.TrackBefore,Kr.prototype.startSide=Kr.prototype.endSide=-1,Kr.prototype.point=!0;const Tu=Te.define(),S$={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>it.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},gl=Te.define();function px(s){return[gx(),gl.of(Object.assign(Object.assign({},S$),s))]}const Am=Te.define({combine:s=>s.some(e=>e)});function gx(s){let e=[x$];return s&&s.fixed===!1&&e.push(Am.of(!0)),e}const x$=Bt.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(gl).map(e=>new vx(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(Am),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,i=s.view.viewport,a=Math.min(e.to,i.to)-Math.max(e.from,i.from);this.syncGutters(a<(i.to-i.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Am)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let i=it.iter(this.view.state.facet(Tu),this.view.viewport.from),a=[],l=this.gutters.map(c=>new E$(c,this.view.viewport,-this.view.documentPadding.top));for(let c of this.view.viewportLineBlocks)if(a.length&&(a=[]),Array.isArray(c.type)){let u=!0;for(let f of c.type)if(f.type==Pn.Text&&u){Om(i,a,f.from);for(let d of l)d.line(this.view,f,a);u=!1}else if(f.widget)for(let d of l)d.widget(this.view,f)}else if(c.type==Pn.Text){Om(i,a,c.from);for(let u of l)u.line(this.view,c,a)}else if(c.widget)for(let u of l)u.widget(this.view,c);for(let c of l)c.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(gl),i=s.state.facet(gl),a=s.docChanged||s.heightChanged||s.viewportChanged||!it.eq(s.startState.facet(Tu),s.state.facet(Tu),s.view.viewport.from,s.view.viewport.to);if(e==i)for(let l of this.gutters)l.update(s)&&(a=!0);else{a=!0;let l=[];for(let c of i){let u=e.indexOf(c);u<0?l.push(new vx(this.view,c)):(this.gutters[u].update(s),l.push(this.gutters[u]))}for(let c of this.gutters)c.dom.remove(),l.indexOf(c)<0&&c.destroy();for(let c of l)this.dom.appendChild(c.dom);this.gutters=l}return a}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>xe.scrollMargins.of(e=>{let i=e.plugin(s);return!i||i.gutters.length==0||!i.fixed?null:e.textDirection==wt.LTR?{left:i.dom.offsetWidth*e.scaleX}:{right:i.dom.offsetWidth*e.scaleX}})});function yx(s){return Array.isArray(s)?s:[s]}function Om(s,e,i){for(;s.value&&s.from<=i;)s.from==i&&e.push(s.value),s.next()}class E${constructor(e,i,a){this.gutter=e,this.height=a,this.i=0,this.cursor=it.iter(e.markers,i.from)}addElement(e,i,a){let{gutter:l}=this,c=(i.top-this.height)/e.scaleY,u=i.height/e.scaleY;if(this.i==l.elements.length){let f=new bx(e,u,c,a);l.elements.push(f),l.dom.appendChild(f.dom)}else l.elements[this.i].update(e,u,c,a);this.height=i.bottom,this.i++}line(e,i,a){let l=[];Om(this.cursor,l,i.from),a.length&&(l=l.concat(a));let c=this.gutter.config.lineMarker(e,i,l);c&&l.unshift(c);let u=this.gutter;l.length==0&&!u.config.renderEmptyElements||this.addElement(e,i,l)}widget(e,i){let a=this.gutter.config.widgetMarker(e,i.widget,i);a&&this.addElement(e,i,[a])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let i=e.elements.pop();e.dom.removeChild(i.dom),i.destroy()}}}class vx{constructor(e,i){this.view=e,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let a in i.domEventHandlers)this.dom.addEventListener(a,l=>{let c=l.target,u;if(c!=this.dom&&this.dom.contains(c)){for(;c.parentNode!=this.dom;)c=c.parentNode;let d=c.getBoundingClientRect();u=(d.top+d.bottom)/2}else u=l.clientY;let f=e.lineBlockAtHeight(u-e.documentTop);i.domEventHandlers[a](e,f,l)&&l.preventDefault()});this.markers=yx(i.markers(e)),i.initialSpacer&&(this.spacer=new bx(e,0,0,[i.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let i=this.markers;if(this.markers=yx(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let l=this.config.updateSpacer(this.spacer.markers[0],e);l!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[l])}let a=e.view.viewport;return!it.eq(this.markers,i,a.from,a.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class bx{constructor(e,i,a,l){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,i,a,l)}update(e,i,a,l){this.height!=i&&(this.height=i,this.dom.style.height=i+"px"),this.above!=a&&(this.dom.style.marginTop=(this.above=a)?a+"px":""),w$(this.markers,l)||this.setMarkers(e,l)}setMarkers(e,i){let a="cm-gutterElement",l=this.dom.firstChild;for(let c=0,u=0;;){let f=u,d=c<i.length?i[c++]:null,h=!1;if(d){let m=d.elementClass;m&&(a+=" "+m);for(let p=u;p<this.markers.length;p++)if(this.markers[p].compare(d)){f=p,h=!0;break}}else f=this.markers.length;for(;u<f;){let m=this.markers[u++];if(m.toDOM){m.destroy(l);let p=l.nextSibling;l.remove(),l=p}}if(!d)break;d.toDOM&&(h?l=l.nextSibling:this.dom.insertBefore(d.toDOM(e),l)),h&&u++}this.dom.className=a,this.markers=i}destroy(){this.setMarkers(null,[])}}function w$(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!s[i].compare(e[i]))return!1;return!0}const A$=Te.define(),Ro=Te.define({combine(s){return Ar(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,i){let a=Object.assign({},e);for(let l in i){let c=a[l],u=i[l];a[l]=c?(f,d,h)=>c(f,d,h)||u(f,d,h):u}return a}})}});class Cm extends Kr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function km(s,e){return s.state.facet(Ro).formatNumber(e,s.state)}const O$=gl.compute([Ro],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(A$)},lineMarker(e,i,a){return a.some(l=>l.toDOM)?null:new Cm(km(e,e.state.doc.lineAt(i.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Ro)!=e.state.facet(Ro),initialSpacer(e){return new Cm(km(e,Sx(e.state.doc.lines)))},updateSpacer(e,i){let a=km(i.view,Sx(i.view.state.doc.lines));return a==e.number?e:new Cm(a)},domEventHandlers:s.facet(Ro).domEventHandlers}));function C$(s={}){return[Ro.of(s),gx(),O$]}function Sx(s){let e=9;for(;e<s;)e=e*10+9;return e}const k$=new class extends Kr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},T$=Tu.compute(["selection"],s=>{let e=[],i=-1;for(let a of s.selection.ranges){let l=s.doc.lineAt(a.head).from;l>i&&(i=l,e.push(k$.range(l)))}return it.of(e)});function P$(){return T$}const xx=new Map;function D$(s){let e=xx.get(s);return e||xx.set(s,e=Ne.mark({attributes:s==="	"?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":s.replace(/ /g,"\xB7")}})),e}function Ex(s){return Bt.define(e=>({decorations:s.createDeco(e),update(i){this.decorations=s.updateDeco(i,this.decorations)}}),{decorations:e=>e.decorations})}const M$=Ex(new bm({regexp:/\t| +/g,decoration:s=>D$(s[0]),boundary:/\S/}));function PW(){return M$}const I$=Ex(new bm({regexp:/\s+$/g,decoration:Ne.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function DW(){return I$}const MW={HeightMap:vn,HeightOracle:NS,MeasuredHeights:FS,QueryType:Ct,ChangedRange:Zn,computeOrder:Wb,moveVisually:Ub};let R$=0;class Gr{constructor(e,i,a){this.set=e,this.base=i,this.modified=a,this.id=R$++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let i=new Gr([],null,[]);if(i.set.push(i),e)for(let a of e.set)i.set.push(a);return i}static defineModifier(){let e=new Pu;return i=>i.modified.indexOf(e)>-1?i:Pu.get(i.base||i,i.modified.concat(e).sort((a,l)=>a.id-l.id))}}let N$=0;class Pu{constructor(){this.instances=[],this.id=N$++}static get(e,i){if(!i.length)return e;let a=i[0].instances.find(f=>f.base==e&&F$(i,f.modified));if(a)return a;let l=[],c=new Gr(l,e,i);for(let f of i)f.instances.push(c);let u=L$(i);for(let f of e.set)if(!f.modified.length)for(let d of u)l.push(Pu.get(f,d));return c}}function F$(s,e){return s.length==e.length&&s.every((i,a)=>i==e[a])}function L$(s){let e=[[]];for(let i=0;i<s.length;i++)for(let a=0,l=e.length;a<l;a++)e.push(e[a].concat(s[i]));return e.sort((i,a)=>a.length-i.length)}function $$(s){let e=Object.create(null);for(let i in s){let a=s[i];Array.isArray(a)||(a=[a]);for(let l of i.split(" "))if(l){let c=[],u=2,f=l;for(let p=0;;){if(f=="..."&&p>0&&p+3==l.length){u=1;break}let b=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(f);if(!b)throw new RangeError("Invalid path: "+l);if(c.push(b[0]=="*"?"":b[0][0]=='"'?JSON.parse(b[0]):b[0]),p+=b[0].length,p==l.length)break;let v=l[p++];if(p==l.length&&v=="!"){u=0;break}if(v!="/")throw new RangeError("Invalid path: "+l);f=l.slice(p)}let d=c.length-1,h=c[d];if(!h)throw new RangeError("Invalid path: "+l);let m=new Du(a,u,d>0?c.slice(0,d):null);e[h]=m.sort(e[h])}}return wx.add(e)}const wx=new qe;class Du{constructor(e,i,a,l){this.tags=e,this.mode=i,this.context=a,this.next=l}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Du.empty=new Du([],2,null);function Ax(s,e){let i=Object.create(null);for(let c of s)if(!Array.isArray(c.tag))i[c.tag.id]=c.class;else for(let u of c.tag)i[u.id]=c.class;let{scope:a,all:l=null}=e||{};return{style:c=>{let u=l;for(let f of c)for(let d of f.set){let h=i[d.id];if(h){u=u?u+" "+h:h;break}}return u},scope:a}}function B$(s,e){let i=null;for(let a of s){let l=a.style(e);l&&(i=i?i+" "+l:l)}return i}function Ox(s,e,i,a=0,l=s.length){let c=new j$(a,Array.isArray(e)?e:[e],i);c.highlightRange(s.cursor(),a,l,"",c.highlighters),c.flush(l)}function IW(s,e,i,a,l,c=0,u=s.length){let f=c;function d(h,m){if(!(h<=f)){for(let p=s.slice(f,h),b=0;;){let v=p.indexOf(`
`,b),x=v<0?p.length:v;if(x>b&&a(p.slice(b,x),m),v<0)break;l(),b=v+1}f=h}}Ox(e,i,(h,m,p)=>{d(h,""),d(m,p)},c,u),d(u,"")}class j${constructor(e,i,a){this.at=e,this.highlighters=i,this.span=a,this.class=""}startSpan(e,i){i!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=i)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,i,a,l,c){let{type:u,from:f,to:d}=e;if(f>=a||d<=i)return;u.isTop&&(c=this.highlighters.filter(v=>!v.scope||v.scope(u)));let h=l,m=W$(e)||Du.empty,p=B$(c,m.tags);if(p&&(h&&(h+=" "),h+=p,m.mode==1&&(l+=(l?" ":"")+p)),this.startSpan(Math.max(i,f),h),m.opaque)return;let b=e.tree&&e.tree.prop(qe.mounted);if(b&&b.overlay){let v=e.node.enter(b.overlay[0].from+f,1),x=this.highlighters.filter(w=>!w.scope||w.scope(b.tree.type)),E=e.firstChild();for(let w=0,A=f;;w++){let C=w<b.overlay.length?b.overlay[w]:null,W=C?C.from+f:d,B=Math.max(i,A),V=Math.min(a,W);if(B<V&&E)for(;e.from<V&&(this.highlightRange(e,B,V,l,c),this.startSpan(Math.min(V,e.to),h),!(e.to>=W||!e.nextSibling())););if(!C||W>a)break;A=C.to+f,A>i&&(this.highlightRange(v.cursor(),Math.max(i,C.from+f),Math.min(a,A),"",x),this.startSpan(Math.min(a,A),h))}E&&e.parent()}else if(e.firstChild()){b&&(l="");do if(!(e.to<=i)){if(e.from>=a)break;this.highlightRange(e,i,a,l,c),this.startSpan(Math.min(a,e.to),h)}while(e.nextSibling());e.parent()}}}function W$(s){let e=s.type.prop(wx);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const Ee=Gr.define,Mu=Ee(),ss=Ee(),Cx=Ee(ss),kx=Ee(ss),os=Ee(),Iu=Ee(os),Tm=Ee(os),Yr=Ee(),Ls=Ee(Yr),Jr=Ee(),Zr=Ee(),Pm=Ee(),yl=Ee(Pm),Ru=Ee(),ue={comment:Mu,lineComment:Ee(Mu),blockComment:Ee(Mu),docComment:Ee(Mu),name:ss,variableName:Ee(ss),typeName:Cx,tagName:Ee(Cx),propertyName:kx,attributeName:Ee(kx),className:Ee(ss),labelName:Ee(ss),namespace:Ee(ss),macroName:Ee(ss),literal:os,string:Iu,docString:Ee(Iu),character:Ee(Iu),attributeValue:Ee(Iu),number:Tm,integer:Ee(Tm),float:Ee(Tm),bool:Ee(os),regexp:Ee(os),escape:Ee(os),color:Ee(os),url:Ee(os),keyword:Jr,self:Ee(Jr),null:Ee(Jr),atom:Ee(Jr),unit:Ee(Jr),modifier:Ee(Jr),operatorKeyword:Ee(Jr),controlKeyword:Ee(Jr),definitionKeyword:Ee(Jr),moduleKeyword:Ee(Jr),operator:Zr,derefOperator:Ee(Zr),arithmeticOperator:Ee(Zr),logicOperator:Ee(Zr),bitwiseOperator:Ee(Zr),compareOperator:Ee(Zr),updateOperator:Ee(Zr),definitionOperator:Ee(Zr),typeOperator:Ee(Zr),controlOperator:Ee(Zr),punctuation:Pm,separator:Ee(Pm),bracket:yl,angleBracket:Ee(yl),squareBracket:Ee(yl),paren:Ee(yl),brace:Ee(yl),content:Yr,heading:Ls,heading1:Ee(Ls),heading2:Ee(Ls),heading3:Ee(Ls),heading4:Ee(Ls),heading5:Ee(Ls),heading6:Ee(Ls),contentSeparator:Ee(Yr),list:Ee(Yr),quote:Ee(Yr),emphasis:Ee(Yr),strong:Ee(Yr),link:Ee(Yr),monospace:Ee(Yr),strikethrough:Ee(Yr),inserted:Ee(),deleted:Ee(),changed:Ee(),invalid:Ee(),meta:Ru,documentMeta:Ee(Ru),annotation:Ee(Ru),processingInstruction:Ee(Ru),definition:Gr.defineModifier(),constant:Gr.defineModifier(),function:Gr.defineModifier(),standard:Gr.defineModifier(),local:Gr.defineModifier(),special:Gr.defineModifier()},RW=Ax([{tag:ue.link,class:"tok-link"},{tag:ue.heading,class:"tok-heading"},{tag:ue.emphasis,class:"tok-emphasis"},{tag:ue.strong,class:"tok-strong"},{tag:ue.keyword,class:"tok-keyword"},{tag:ue.atom,class:"tok-atom"},{tag:ue.bool,class:"tok-bool"},{tag:ue.url,class:"tok-url"},{tag:ue.labelName,class:"tok-labelName"},{tag:ue.inserted,class:"tok-inserted"},{tag:ue.deleted,class:"tok-deleted"},{tag:ue.literal,class:"tok-literal"},{tag:ue.string,class:"tok-string"},{tag:ue.number,class:"tok-number"},{tag:[ue.regexp,ue.escape,ue.special(ue.string)],class:"tok-string2"},{tag:ue.variableName,class:"tok-variableName"},{tag:ue.local(ue.variableName),class:"tok-variableName tok-local"},{tag:ue.definition(ue.variableName),class:"tok-variableName tok-definition"},{tag:ue.special(ue.variableName),class:"tok-variableName2"},{tag:ue.definition(ue.propertyName),class:"tok-propertyName tok-definition"},{tag:ue.typeName,class:"tok-typeName"},{tag:ue.namespace,class:"tok-namespace"},{tag:ue.className,class:"tok-className"},{tag:ue.macroName,class:"tok-macroName"},{tag:ue.propertyName,class:"tok-propertyName"},{tag:ue.operator,class:"tok-operator"},{tag:ue.comment,class:"tok-comment"},{tag:ue.meta,class:"tok-meta"},{tag:ue.invalid,class:"tok-invalid"},{tag:ue.punctuation,class:"tok-punctuation"}]);var Dm;const $s=new qe;function Tx(s){return Te.define({combine:s?e=>e.concat(s):void 0})}const V$=new qe;class Ln{constructor(e,i,a=[],l=""){this.data=e,this.name=l,rt.prototype.hasOwnProperty("tree")||Object.defineProperty(rt.prototype,"tree",{get(){return _t(this)}}),this.parser=i,this.extension=[as.of(this),rt.languageData.of((c,u,f)=>{let d=Px(c,u,f),h=d.type.prop($s);if(!h)return[];let m=c.facet(h),p=d.type.prop(V$);if(p){let b=d.resolve(u-d.from,f);for(let v of p)if(v.test(b,c)){let x=c.facet(v.facet);return v.type=="replace"?x:x.concat(m)}}return m})].concat(a)}isActiveAt(e,i,a=-1){return Px(e,i,a).type.prop($s)==this.data}findRegions(e){let i=e.facet(as);if((i==null?void 0:i.data)==this.data)return[{from:0,to:e.doc.length}];if(!i||!i.allowsNesting)return[];let a=[],l=(c,u)=>{if(c.prop($s)==this.data){a.push({from:u,to:u+c.length});return}let f=c.prop(qe.mounted);if(f){if(f.tree.prop($s)==this.data){if(f.overlay)for(let d of f.overlay)a.push({from:d.from+u,to:d.to+u});else a.push({from:u,to:u+c.length});return}else if(f.overlay){let d=a.length;if(l(f.tree,f.overlay[0].from+u),a.length>d)return}}for(let d=0;d<c.children.length;d++){let h=c.children[d];h instanceof Ot&&l(h,c.positions[d]+u)}};return l(_t(e),0),a}get allowsNesting(){return!0}}Ln.setState=Ye.define();function Px(s,e,i){let a=s.facet(as),l=_t(s).topNode;if(!a||a.allowsNesting)for(let c=l;c;c=c.enter(e,i,$t.ExcludeBuffers))c.type.isTop&&(l=c);return l}class Mm extends Ln{constructor(e,i,a){super(e,i,[],a),this.parser=i}static define(e){let i=Tx(e.languageData);return new Mm(i,e.parser.configure({props:[$s.add(a=>a.isTop?i:void 0)]}),e.name)}configure(e,i){return new Mm(this.data,this.parser.configure(e),i||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function _t(s){let e=s.field(Ln.state,!1);return e?e.tree:Ot.empty}function z$(s,e,i=50){var a;let l=(a=s.field(Ln.state,!1))===null||a===void 0?void 0:a.context;if(!l)return null;let c=l.viewport;l.updateViewport({from:0,to:e});let u=l.isDone(e)||l.work(i,e)?l.tree:null;return l.updateViewport(c),u}function NW(s,e=s.doc.length){var i;return((i=s.field(Ln.state,!1))===null||i===void 0?void 0:i.context.isDone(e))||!1}function FW(s,e=s.viewport.to,i=100){let a=z$(s.state,e,i);return a!=_t(s.state)&&s.dispatch({}),!!a}function LW(s){var e;return((e=s.plugin(Ix))===null||e===void 0?void 0:e.isWorking())||!1}class U${constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,i){let a=this.cursorPos-this.string.length;return e<a||i>=this.cursorPos?this.doc.sliceString(e,i):this.string.slice(e-a,i-a)}}let vl=null;class No{constructor(e,i,a=[],l,c,u,f,d){this.parser=e,this.state=i,this.fragments=a,this.tree=l,this.treeLen=c,this.viewport=u,this.skipped=f,this.scheduleOn=d,this.parse=null,this.tempSkipped=[]}static create(e,i,a){return new No(e,i,[],Ot.empty,0,a,[],null)}startParse(){return this.parser.startParse(new U$(this.state.doc),this.fragments)}work(e,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=Ot.empty&&this.isDone(i!=null?i:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var a;if(typeof e=="number"){let l=Date.now()+e;e=()=>Date.now()>l}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let l=this.parse.advance();if(l)if(this.fragments=this.withoutTempSkipped(gi.addTree(l,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(a=this.parse.stoppedAt)!==null&&a!==void 0?a:this.state.doc.length,this.tree=l,this.parse=null,this.treeLen<(i!=null?i:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,i;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=e,this.tree=i,this.fragments=this.withoutTempSkipped(gi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let i=vl;vl=this;try{return e()}finally{vl=i}}withoutTempSkipped(e){for(let i;i=this.tempSkipped.pop();)e=Dx(e,i.from,i.to);return e}changes(e,i){let{fragments:a,tree:l,treeLen:c,viewport:u,skipped:f}=this;if(this.takeTree(),!e.empty){let d=[];if(e.iterChangedRanges((h,m,p,b)=>d.push({fromA:h,toA:m,fromB:p,toB:b})),a=gi.applyChanges(a,d),l=Ot.empty,c=0,u={from:e.mapPos(u.from,-1),to:e.mapPos(u.to,1)},this.skipped.length){f=[];for(let h of this.skipped){let m=e.mapPos(h.from,1),p=e.mapPos(h.to,-1);m<p&&f.push({from:m,to:p})}}}return new No(this.parser,i,a,l,c,u,f,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let i=this.skipped.length;for(let a=0;a<this.skipped.length;a++){let{from:l,to:c}=this.skipped[a];l<e.to&&c>e.from&&(this.fragments=Dx(this.fragments,l,c),this.skipped.splice(a--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,i){this.skipped.push({from:e,to:i})}static getSkippingParser(e){return new class extends N1{createParse(i,a,l){let c=l[0].from,u=l[l.length-1].to;return{parsedPos:c,advance(){let d=vl;if(d){for(let h of l)d.tempSkipped.push(h);e&&(d.scheduleOn=d.scheduleOn?Promise.all([d.scheduleOn,e]):e)}return this.parsedPos=u,new Ot(kn.none,[],[],u-c)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let i=this.fragments;return this.treeLen>=e&&i.length&&i[0].from==0&&i[0].to>=e}static get(){return vl}}function Dx(s,e,i){return gi.applyChanges(s,[{fromA:e,toA:i,fromB:e,toB:i}])}class Fo{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(e.changes,e.state),a=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,a)||i.takeTree(),new Fo(i)}static init(e){let i=Math.min(3e3,e.doc.length),a=No.create(e.facet(as).parser,e,{from:0,to:i});return a.work(20,i)||a.takeTree(),new Fo(a)}}Ln.state=Jt.define({create:Fo.init,update(s,e){for(let i of e.effects)if(i.is(Ln.setState))return i.value;return e.startState.facet(as)!=e.state.facet(as)?Fo.init(e.state):s.apply(e)}});let Mx=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(Mx=s=>{let e=-1,i=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(i):cancelIdleCallback(e)});const Im=typeof navigator!="undefined"&&(!((Dm=navigator.scheduling)===null||Dm===void 0)&&Dm.isInputPending)?()=>navigator.scheduling.isInputPending():null,Ix=Bt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let i=this.view.state.field(Ln.state).context;(i.updateViewport(e.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:e}=this.view,i=e.field(Ln.state);(i.tree!=i.context.tree||!i.context.isDone(e.doc.length))&&(this.working=Mx(this.work))}work(e){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:a,viewport:{to:l}}=this.view,c=a.field(Ln.state);if(c.tree==c.context.tree&&c.context.isDone(l+1e5))return;let u=Date.now()+Math.min(this.chunkBudget,100,e&&!Im?Math.max(25,e.timeRemaining()-5):1e9),f=c.context.treeLen<l&&a.doc.length>l+1e3,d=c.context.work(()=>Im&&Im()||Date.now()>u,l+(f?0:1e5));this.chunkBudget-=Date.now()-i,(d||this.chunkBudget<=0)&&(c.context.takeTree(),this.view.dispatch({effects:Ln.setState.of(new Fo(c.context))})),this.chunkBudget>0&&!(d&&!f)&&this.scheduleWork(),this.checkAsyncSchedule(c.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(i=>Fn(this.view.state,i)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),as=Te.define({combine(s){return s.length?s[0]:null},enables:s=>[Ln.state,Ix,xe.contentAttributes.compute([s],e=>{let i=e.facet(s);return i&&i.name?{"data-language":i.name}:{}})]});class $W{constructor(e,i=[]){this.language=e,this.support=i,this.extension=[e,i]}}class Rx{constructor(e,i,a,l,c,u=void 0){this.name=e,this.alias=i,this.extensions=a,this.filename=l,this.loadFunc=c,this.support=u,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:i,support:a}=e;if(!i){if(!a)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");i=()=>Promise.resolve(a)}return new Rx(e.name,(e.alias||[]).concat(e.name).map(l=>l.toLowerCase()),e.extensions||[],e.filename,i,a)}static matchFilename(e,i){for(let l of e)if(l.filename&&l.filename.test(i))return l;let a=/\.([^.]+)$/.exec(i);if(a){for(let l of e)if(l.extensions.indexOf(a[1])>-1)return l}return null}static matchLanguageName(e,i,a=!0){i=i.toLowerCase();for(let l of e)if(l.alias.some(c=>c==i))return l;if(a)for(let l of e)for(let c of l.alias){let u=i.indexOf(c);if(u>-1&&(c.length>2||!/\w/.test(i[u-1])&&!/\w/.test(i[u+c.length])))return l}return null}}const Nx=Te.define(),Nu=Te.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(i=>i!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function Bs(s){let e=s.facet(Nu);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Lo(s,e){let i="",a=s.tabSize,l=s.facet(Nu)[0];if(l=="	"){for(;e>=a;)i+="	",e-=a;l=" "}for(let c=0;c<e;c++)i+=l;return i}function Fu(s,e){s instanceof rt&&(s=new bl(s));for(let a of s.state.facet(Nx)){let l=a(s,e);if(l!==void 0)return l}let i=_t(s.state);return i.length>=e?K$(s,i,e):null}function BW(s,e,i){let a=Object.create(null),l=new bl(s,{overrideIndentation:u=>{var f;return(f=a[u])!==null&&f!==void 0?f:-1}}),c=[];for(let u=e;u<=i;){let f=s.doc.lineAt(u);u=f.to+1;let d=Fu(l,f.from);if(d==null)continue;/\S/.test(f.text)||(d=0);let h=/^\s*/.exec(f.text)[0],m=Lo(s,d);h!=m&&(a[f.from]=d,c.push({from:f.from,to:f.from+h.length,insert:m}))}return s.changes(c)}class bl{constructor(e,i={}){this.state=e,this.options=i,this.unit=Bs(e)}lineAt(e,i=1){let a=this.state.doc.lineAt(e),{simulateBreak:l,simulateDoubleBreak:c}=this.options;return l!=null&&l>=a.from&&l<=a.to?c&&l==e?{text:"",from:e}:(i<0?l<e:l<=e)?{text:a.text.slice(l-a.from),from:l}:{text:a.text.slice(0,l-a.from),from:a.from}:a}textAfterPos(e,i=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:a,from:l}=this.lineAt(e,i);return a.slice(e-l,Math.min(a.length,e+100-l))}column(e,i=1){let{text:a,from:l}=this.lineAt(e,i),c=this.countColumn(a,e-l),u=this.options.overrideIndentation?this.options.overrideIndentation(l):-1;return u>-1&&(c+=u-this.countColumn(a,a.search(/\S|$/))),c}countColumn(e,i=e.length){return Oo(e,this.state.tabSize,i)}lineIndent(e,i=1){let{text:a,from:l}=this.lineAt(e,i),c=this.options.overrideIndentation;if(c){let u=c(l);if(u>-1)return u}return this.countColumn(a,a.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const H$=new qe;function K$(s,e,i){let a=e.resolveStack(i),l=a.node.enterUnfinishedNodesBefore(i);if(l!=a.node){let c=[];for(let u=l;u!=a.node;u=u.parent)c.push(u);for(let u=c.length-1;u>=0;u--)a={node:c[u],next:a}}return Fx(a,s,i)}function Fx(s,e,i){for(let a=s;a;a=a.next){let l=Y$(a.node);if(l)return l(Rm.create(e,i,a))}return 0}function G$(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function Y$(s){let e=s.type.prop(H$);if(e)return e;let i=s.firstChild,a;if(i&&(a=i.type.prop(qe.closedBy))){let l=s.lastChild,c=l&&a.indexOf(l.name)>-1;return u=>Lx(u,!0,1,void 0,c&&!G$(u)?l.from:void 0)}return s.parent==null?J$:null}function J$(){return 0}class Rm extends bl{constructor(e,i,a){super(e.state,e.options),this.base=e,this.pos=i,this.context=a}get node(){return this.context.node}static create(e,i,a){return new Rm(e,i,a)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let i=this.state.doc.lineAt(e.from);for(;;){let a=e.resolve(i.from);for(;a.parent&&a.parent.from==a.from;)a=a.parent;if(Z$(a,e))break;i=this.state.doc.lineAt(a.from)}return this.lineIndent(i.from)}continue(){return Fx(this.context.next,this.base,this.pos)}}function Z$(s,e){for(let i=e;i;i=i.parent)if(s==i)return!0;return!1}function _$(s){let e=s.node,i=e.childAfter(e.from),a=e.lastChild;if(!i)return null;let l=s.options.simulateBreak,c=s.state.doc.lineAt(i.from),u=l==null||l<=c.from?c.to:Math.min(c.to,l);for(let f=i.to;;){let d=e.childAfter(f);if(!d||d==a)return null;if(!d.type.isSkipped)return d.from<u?i:null;f=d.to}}function jW({closing:s,align:e=!0,units:i=1}){return a=>Lx(a,e,i,s)}function Lx(s,e,i,a,l){let c=s.textAfter,u=c.match(/^\s*/)[0].length,f=a&&c.slice(u,u+a.length)==a||l==s.pos+u,d=e?_$(s):null;return d?f?s.column(d.from):s.column(d.to):s.baseIndent+(f?0:s.unit*i)}const WW=s=>s.baseIndent;function VW({except:s,units:e=1}={}){return i=>{let a=s&&s.test(i.textAfter);return i.baseIndent+(a?0:e*i.unit)}}const X$=200;function Q$(){return rt.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let i=s.newDoc,{head:a}=s.newSelection.main,l=i.lineAt(a);if(a>l.from+X$)return s;let c=i.sliceString(l.from,a);if(!e.some(h=>h.test(c)))return s;let{state:u}=s,f=-1,d=[];for(let{head:h}of u.selection.ranges){let m=u.doc.lineAt(h);if(m.from==f)continue;f=m.from;let p=Fu(u,m.from);if(p==null)continue;let b=/^\s*/.exec(m.text)[0],v=Lo(u,p);b!=v&&d.push({from:m.from,to:m.from+b.length,insert:v})}return d.length?[s,{changes:d,sequential:!0}]:s})}const q$=Te.define(),eB=new qe;function zW(s){let e=s.firstChild,i=s.lastChild;return e&&e.to<i.from?{from:e.to,to:i.type.isError?s.to:i.from}:null}function tB(s,e,i){let a=_t(s);if(a.length<i)return null;let l=a.resolveStack(i,1),c=null;for(let u=l;u;u=u.next){let f=u.node;if(f.to<=i||f.from>i)continue;if(c&&f.from<e)break;let d=f.type.prop(eB);if(d&&(f.to<a.length-50||a.length==s.doc.length||!nB(f))){let h=d(f,s);h&&h.from<=i&&h.from>=e&&h.to>i&&(c=h)}}return c}function nB(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function Sl(s,e,i){for(let a of s.facet(q$)){let l=a(s,e,i);if(l)return l}return tB(s,e,i)}function $x(s,e){let i=e.mapPos(s.from,1),a=e.mapPos(s.to,-1);return i>=a?void 0:{from:i,to:a}}const xl=Ye.define({map:$x}),$o=Ye.define({map:$x});function Nm(s){let e=[];for(let{head:i}of s.state.selection.ranges)e.some(a=>a.from<=i&&a.to>=i)||e.push(s.lineBlockAt(i));return e}const ls=Jt.define({create(){return Ne.none},update(s,e){s=s.map(e.changes);for(let i of e.effects)if(i.is(xl)&&!rB(s,i.value.from,i.value.to)){let{preparePlaceholder:a}=e.state.facet(Lm),l=a?Ne.replace({widget:new fB(a(e.state,i.value))}):Wx;s=s.update({add:[l.range(i.value.from,i.value.to)]})}else i.is($o)&&(s=s.update({filter:(a,l)=>i.value.from!=a||i.value.to!=l,filterFrom:i.value.from,filterTo:i.value.to}));if(e.selection){let i=!1,{head:a}=e.selection.main;s.between(a,a,(l,c)=>{l<a&&c>a&&(i=!0)}),i&&(s=s.update({filterFrom:a,filterTo:a,filter:(l,c)=>c<=a||l>=a}))}return s},provide:s=>xe.decorations.from(s),toJSON(s,e){let i=[];return s.between(0,e.doc.length,(a,l)=>{i.push(a,l)}),i},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let i=0;i<s.length;){let a=s[i++],l=s[i++];if(typeof a!="number"||typeof l!="number")throw new RangeError("Invalid JSON for fold state");e.push(Wx.range(a,l))}return Ne.set(e,!0)}});function UW(s){return s.field(ls,!1)||RangeSet.empty}function El(s,e,i){var a;let l=null;return(a=s.field(ls,!1))===null||a===void 0||a.between(e,i,(c,u)=>{(!l||l.from>c)&&(l={from:c,to:u})}),l}function rB(s,e,i){let a=!1;return s.between(e,e,(l,c)=>{l==e&&c==i&&(a=!0)}),a}function Fm(s,e){return s.field(ls,!1)?e:e.concat(Ye.appendConfig.of(Bx()))}const iB=s=>{for(let e of Nm(s)){let i=Sl(s.state,e.from,e.to);if(i)return s.dispatch({effects:Fm(s.state,[xl.of(i),Lu(s,i)])}),!0}return!1},sB=s=>{if(!s.state.field(ls,!1))return!1;let e=[];for(let i of Nm(s)){let a=El(s.state,i.from,i.to);a&&e.push($o.of(a),Lu(s,a,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function Lu(s,e,i=!0){let a=s.state.doc.lineAt(e.from).number,l=s.state.doc.lineAt(e.to).number;return xe.announce.of(`${s.state.phrase(i?"Folded lines":"Unfolded lines")} ${a} ${s.state.phrase("to")} ${l}.`)}const oB=s=>{let{state:e}=s,i=[];for(let a=0;a<e.doc.length;){let l=s.lineBlockAt(a),c=Sl(e,l.from,l.to);c&&i.push(xl.of(c)),a=(c?s.lineBlockAt(c.to):l).to+1}return i.length&&s.dispatch({effects:Fm(s.state,i)}),!!i.length},aB=s=>{let e=s.state.field(ls,!1);if(!e||!e.size)return!1;let i=[];return e.between(0,s.state.doc.length,(a,l)=>{i.push($o.of({from:a,to:l}))}),s.dispatch({effects:i}),!0};function lB(s,e){for(let i=e;;){let a=Sl(s.state,i.from,i.to);if(a&&a.to>e.from)return a;if(!i.from)return null;i=s.lineBlockAt(i.from-1)}}const HW=s=>{let e=[];for(let i of Nm(s)){let a=El(s.state,i.from,i.to);if(a)e.push($o.of(a),Lu(s,a,!1));else{let l=lB(s,i);l&&e.push(xl.of(l),Lu(s,l))}}return e.length>0&&s.dispatch({effects:Fm(s.state,e)}),!!e.length},cB=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:iB},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:sB},{key:"Ctrl-Alt-[",run:oB},{key:"Ctrl-Alt-]",run:aB}],uB={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},Lm=Te.define({combine(s){return Ar(s,uB)}});function Bx(s){let e=[ls,mB];return s&&e.push(Lm.of(s)),e}function jx(s,e){let{state:i}=s,a=i.facet(Lm),l=u=>{let f=s.lineBlockAt(s.posAtDOM(u.target)),d=El(s.state,f.from,f.to);d&&s.dispatch({effects:$o.of(d)}),u.preventDefault()};if(a.placeholderDOM)return a.placeholderDOM(s,l,e);let c=document.createElement("span");return c.textContent=a.placeholderText,c.setAttribute("aria-label",i.phrase("folded code")),c.title=i.phrase("unfold"),c.className="cm-foldPlaceholder",c.onclick=l,c}const Wx=Ne.replace({widget:new class extends zr{toDOM(s){return jx(s,null)}}});class fB extends zr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return jx(e,this.value)}}const dB={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class $m extends Kr{constructor(e,i){super(),this.config=e,this.open=i}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=e.state.phrase(this.open?"Fold line":"Unfold line"),i}}function hB(s={}){let e=Object.assign(Object.assign({},dB),s),i=new $m(e,!0),a=new $m(e,!1),l=Bt.fromClass(class{constructor(u){this.from=u.viewport.from,this.markers=this.buildMarkers(u)}update(u){(u.docChanged||u.viewportChanged||u.startState.facet(as)!=u.state.facet(as)||u.startState.field(ls,!1)!=u.state.field(ls,!1)||_t(u.startState)!=_t(u.state)||e.foldingChanged(u))&&(this.markers=this.buildMarkers(u.view))}buildMarkers(u){let f=new vi;for(let d of u.viewportLineBlocks){let h=El(u.state,d.from,d.to)?a:Sl(u.state,d.from,d.to)?i:null;h&&f.add(d.from,d.from,h)}return f.finish()}}),{domEventHandlers:c}=e;return[l,px({class:"cm-foldGutter",markers(u){var f;return((f=u.plugin(l))===null||f===void 0?void 0:f.markers)||it.empty},initialSpacer(){return new $m(e,!1)},domEventHandlers:Object.assign(Object.assign({},c),{click:(u,f,d)=>{if(c.click&&c.click(u,f,d))return!0;let h=El(u.state,f.from,f.to);if(h)return u.dispatch({effects:$o.of(h)}),!0;let m=Sl(u.state,f.from,f.to);return m?(u.dispatch({effects:xl.of(m)}),!0):!1}})}),Bx()]}const mB=xe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class wl{constructor(e,i){this.specs=e;let a;function l(f){let d=Qi.newName();return(a||(a=Object.create(null)))["."+d]=f,d}const c=typeof i.all=="string"?i.all:i.all?l(i.all):void 0,u=i.scope;this.scope=u instanceof Ln?f=>f.prop($s)==u.data:u?f=>f==u:void 0,this.style=Ax(e.map(f=>({tag:f.tag,class:f.class||l(Object.assign({},f,{tag:null}))})),{all:c}).style,this.module=a?new Qi(a):null,this.themeType=i.themeType}static define(e,i){return new wl(e,i||{})}}const Bm=Te.define(),Vx=Te.define({combine(s){return s.length?[s[0]]:null}});function $u(s){let e=s.facet(Bm);return e.length?e:s.facet(Vx)}function zx(s,e){let i=[gB],a;return s instanceof wl&&(s.module&&i.push(xe.styleModule.of(s.module)),a=s.themeType),e!=null&&e.fallback?i.push(Vx.of(s)):a?i.push(Bm.computeN([xe.darkTheme],l=>l.facet(xe.darkTheme)==(a=="dark")?[s]:[])):i.push(Bm.of(s)),i}function KW(s,e,i){let a=$u(s),l=null;if(a){for(let c of a)if(!c.scope||i&&c.scope(i)){let u=c.style(e);u&&(l=l?l+" "+u:u)}}return l}class pB{constructor(e){this.markCache=Object.create(null),this.tree=_t(e.state),this.decorations=this.buildDeco(e,$u(e.state)),this.decoratedTo=e.viewport.to}update(e){let i=_t(e.state),a=$u(e.state),l=a!=$u(e.startState),{viewport:c}=e.view,u=e.changes.mapPos(this.decoratedTo,1);i.length<c.to&&!l&&i.type==this.tree.type&&u>=c.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=u):(i!=this.tree||e.viewportChanged||l)&&(this.tree=i,this.decorations=this.buildDeco(e.view,a),this.decoratedTo=c.to)}buildDeco(e,i){if(!i||!this.tree.length)return Ne.none;let a=new vi;for(let{from:l,to:c}of e.visibleRanges)Ox(this.tree,i,(u,f,d)=>{a.add(u,f,this.markCache[d]||(this.markCache[d]=Ne.mark({class:d})))},l,c);return a.finish()}}const gB=yi.high(Bt.fromClass(pB,{decorations:s=>s.decorations})),yB=wl.define([{tag:ue.meta,color:"#404740"},{tag:ue.link,textDecoration:"underline"},{tag:ue.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ue.emphasis,fontStyle:"italic"},{tag:ue.strong,fontWeight:"bold"},{tag:ue.strikethrough,textDecoration:"line-through"},{tag:ue.keyword,color:"#708"},{tag:[ue.atom,ue.bool,ue.url,ue.contentSeparator,ue.labelName],color:"#219"},{tag:[ue.literal,ue.inserted],color:"#164"},{tag:[ue.string,ue.deleted],color:"#a11"},{tag:[ue.regexp,ue.escape,ue.special(ue.string)],color:"#e40"},{tag:ue.definition(ue.variableName),color:"#00f"},{tag:ue.local(ue.variableName),color:"#30a"},{tag:[ue.typeName,ue.namespace],color:"#085"},{tag:ue.className,color:"#167"},{tag:[ue.special(ue.variableName),ue.macroName],color:"#256"},{tag:ue.definition(ue.propertyName),color:"#00c"},{tag:ue.comment,color:"#940"},{tag:ue.invalid,color:"#f00"}]),vB=xe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Ux=1e4,Hx="()[]{}",Kx=Te.define({combine(s){return Ar(s,{afterCursor:!0,brackets:Hx,maxScanDistance:Ux,renderMatch:xB})}}),bB=Ne.mark({class:"cm-matchingBracket"}),SB=Ne.mark({class:"cm-nonmatchingBracket"});function xB(s){let e=[],i=s.matched?bB:SB;return e.push(i.range(s.start.from,s.start.to)),s.end&&e.push(i.range(s.end.from,s.end.to)),e}const EB=[Jt.define({create(){return Ne.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let i=[],a=e.state.facet(Kx);for(let l of e.state.selection.ranges){if(!l.empty)continue;let c=_r(e.state,l.head,-1,a)||l.head>0&&_r(e.state,l.head-1,1,a)||a.afterCursor&&(_r(e.state,l.head,1,a)||l.head<e.state.doc.length&&_r(e.state,l.head+1,-1,a));c&&(i=i.concat(a.renderMatch(c,e.state)))}return Ne.set(i,!0)},provide:s=>xe.decorations.from(s)}),vB];function wB(s={}){return[Kx.of(s),EB]}const AB=new qe;function jm(s,e,i){let a=s.prop(e<0?qe.openedBy:qe.closedBy);if(a)return a;if(s.name.length==1){let l=i.indexOf(s.name);if(l>-1&&l%2==(e<0?1:0))return[i[l+e]]}return null}function Wm(s){let e=s.type.prop(AB);return e?e(s.node):s}function _r(s,e,i,a={}){let l=a.maxScanDistance||Ux,c=a.brackets||Hx,u=_t(s),f=u.resolveInner(e,i);for(let d=f;d;d=d.parent){let h=jm(d.type,i,c);if(h&&d.from<d.to){let m=Wm(d);if(m&&(i>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return OB(s,e,i,d,m,h,c)}}return CB(s,e,i,u,f.type,l,c)}function OB(s,e,i,a,l,c,u){let f=a.parent,d={from:l.from,to:l.to},h=0,m=f==null?void 0:f.cursor();if(m&&(i<0?m.childBefore(a.from):m.childAfter(a.to)))do if(i<0?m.to<=a.from:m.from>=a.to){if(h==0&&c.indexOf(m.type.name)>-1&&m.from<m.to){let p=Wm(m);return{start:d,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(jm(m.type,i,u))h++;else if(jm(m.type,-i,u)){if(h==0){let p=Wm(m);return{start:d,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}h--}}while(i<0?m.prevSibling():m.nextSibling());return{start:d,matched:!1}}function CB(s,e,i,a,l,c,u){let f=i<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),d=u.indexOf(f);if(d<0||d%2==0!=i>0)return null;let h={from:i<0?e-1:e,to:i>0?e+1:e},m=s.doc.iterRange(e,i>0?s.doc.length:0),p=0;for(let b=0;!m.next().done&&b<=c;){let v=m.value;i<0&&(b+=v.length);let x=e+b*i;for(let E=i>0?0:v.length-1,w=i>0?v.length:-1;E!=w;E+=i){let A=u.indexOf(v[E]);if(!(A<0||a.resolveInner(x+E,1).type!=l))if(A%2==0==i>0)p++;else{if(p==1)return{start:h,end:{from:x+E,to:x+E+1},matched:A>>1==d>>1};p--}}i>0&&(b+=v.length)}return m.done?{start:h,matched:!1}:null}function Gx(s,e,i,a=0,l=0){e==null&&(e=s.search(/[^\s\u00a0]/),e==-1&&(e=s.length));let c=l;for(let u=a;u<e;u++)s.charCodeAt(u)==9?c+=i-c%i:c++;return c}class Yx{constructor(e,i,a,l){this.string=e,this.tabSize=i,this.indentUnit=a,this.overrideIndent=l,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let i=this.string.charAt(this.pos),a;if(typeof e=="string"?a=i==e:a=i&&(e instanceof RegExp?e.test(i):e(i)),a)return++this.pos,i}eatWhile(e){let i=this.pos;for(;this.eat(e););return this.pos>i}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let i=this.string.indexOf(e,this.pos);if(i>-1)return this.pos=i,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Gx(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Gx(this.string,null,this.tabSize)}match(e,i,a){if(typeof e=="string"){let l=u=>a?u.toLowerCase():u,c=this.string.substr(this.pos,e.length);return l(c)==l(e)?(i!==!1&&(this.pos+=e.length),!0):null}else{let l=this.string.slice(this.pos).match(e);return l&&l.index>0?null:(l&&i!==!1&&(this.pos+=l[0].length),l)}}current(){return this.string.slice(this.start,this.pos)}}function kB(s){return{name:s.name||"",token:s.token,blankLine:s.blankLine||(()=>{}),startState:s.startState||(()=>!0),copyState:s.copyState||TB,indent:s.indent||(()=>null),languageData:s.languageData||{},tokenTable:s.tokenTable||zm}}function TB(s){if(typeof s!="object")return s;let e={};for(let i in s){let a=s[i];e[i]=a instanceof Array?a.slice():a}return e}const Jx=new WeakMap;class Bo extends Ln{constructor(e){let i=Tx(e.languageData),a=kB(e),l,c=new class extends N1{createParse(u,f,d){return new DB(l,u,f,d)}};super(i,c,[Nx.of((u,f)=>this.getIndent(u,f))],e.name),this.topNode=RB(i),l=this,this.streamParser=a,this.stateAfter=new qe({perNode:!0}),this.tokenTable=e.tokenTable?new eE(a.tokenTable):IB}static define(e){return new Bo(e)}getIndent(e,i){let a=_t(e.state),l=a.resolve(i);for(;l&&l.type!=this.topNode;)l=l.parent;if(!l)return null;let c,{overrideIndentation:u}=e.options;u&&(c=Jx.get(e.state),c!=null&&c<i-1e4&&(c=void 0));let f=Vm(this,a,0,l.from,c!=null?c:i),d,h;if(f?(h=f.state,d=f.pos+1):(h=this.streamParser.startState(e.unit),d=0),i-d>1e4)return null;for(;d<i;){let p=e.state.doc.lineAt(d),b=Math.min(i,p.to);if(p.length){let v=u?u(p.from):-1,x=new Yx(p.text,e.state.tabSize,e.unit,v<0?void 0:v);for(;x.pos<b-p.from;)_x(this.streamParser.token,x,h)}else this.streamParser.blankLine(h,e.unit);if(b==i)break;d=p.to+1}let m=e.lineAt(i);return u&&c==null&&Jx.set(e.state,m.from),this.streamParser.indent(h,/^\s*(.*)/.exec(m.text)[1],e)}get allowsNesting(){return!1}}function Vm(s,e,i,a,l){let c=i>=a&&i+e.length<=l&&e.prop(s.stateAfter);if(c)return{state:s.streamParser.copyState(c),pos:i+e.length};for(let u=e.children.length-1;u>=0;u--){let f=e.children[u],d=i+e.positions[u],h=f instanceof Ot&&d<l&&Vm(s,f,d,a,l);if(h)return h}return null}function Zx(s,e,i,a,l){if(l&&i<=0&&a>=e.length)return e;!l&&e.type==s.topNode&&(l=!0);for(let c=e.children.length-1;c>=0;c--){let u=e.positions[c],f=e.children[c],d;if(u<a&&f instanceof Ot){if(!(d=Zx(s,f,i-u,a-u,l)))break;return l?new Ot(e.type,e.children.slice(0,c).concat(d),e.positions.slice(0,c+1),u+d.length):d}}return null}function PB(s,e,i,a){for(let l of e){let c=l.from+(l.openStart?25:0),u=l.to-(l.openEnd?25:0),f=c<=i&&u>i&&Vm(s,l.tree,0-l.offset,i,u),d;if(f&&(d=Zx(s,l.tree,i+l.offset,f.pos+l.offset,!1)))return{state:f.state,tree:d}}return{state:s.streamParser.startState(a?Bs(a):4),tree:Ot.empty}}class DB{constructor(e,i,a,l){this.lang=e,this.input=i,this.fragments=a,this.ranges=l,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=l[l.length-1].to;let c=No.get(),u=l[0].from,{state:f,tree:d}=PB(e,a,u,c==null?void 0:c.state);this.state=f,this.parsedPos=this.chunkStart=u+d.length;for(let h=0;h<d.children.length;h++)this.chunks.push(d.children[h]),this.chunkPos.push(d.positions[h]);c&&this.parsedPos<c.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Bs(c.state)),c.skipUntilInView(this.parsedPos,c.viewport.from),this.parsedPos=c.viewport.from),this.moveRangeIndex()}advance(){let e=No.get(),i=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),a=Math.min(i,this.chunkStart+2048);for(e&&(a=Math.min(a,e.viewport.to));this.parsedPos<a;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=i?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,i),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let i=this.input.chunk(e);if(this.input.lineChunks)i==`
`&&(i="");else{let a=i.indexOf(`
`);a>-1&&(i=i.slice(0,a))}return e+i.length<=this.to?i:i.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,i=this.lineAfter(e),a=e+i.length;for(let l=this.rangeIndex;;){let c=this.ranges[l].to;if(c>=a||(i=i.slice(0,c-(a-i.length)),l++,l==this.ranges.length))break;let u=this.ranges[l].from,f=this.lineAfter(u);i+=f,a=u+f.length}return{line:i,end:a}}skipGapsTo(e,i,a){for(;;){let l=this.ranges[this.rangeIndex].to,c=e+i;if(a>0?l>c:l>=c)break;let u=this.ranges[++this.rangeIndex].from;i+=u-l}return i}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,i,a,l,c){if(this.ranges.length>1){c=this.skipGapsTo(i,c,1),i+=c;let u=this.chunk.length;c=this.skipGapsTo(a,c,-1),a+=c,l+=this.chunk.length-u}return this.chunk.push(e,i,a,l),c}parseLine(e){let{line:i,end:a}=this.nextLine(),l=0,{streamParser:c}=this.lang,u=new Yx(i,e?e.state.tabSize:4,e?Bs(e.state):2);if(u.eol())c.blankLine(this.state,u.indentUnit);else for(;!u.eol();){let f=_x(c.token,u,this.state);if(f&&(l=this.emitToken(this.lang.tokenTable.resolve(f),this.parsedPos+u.start,this.parsedPos+u.pos,4,l)),u.start>1e4)break}this.parsedPos=a,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Ot.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:MB,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Ot(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Ot(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function _x(s,e,i){e.start=e.pos;for(let a=0;a<10;a++){let l=s(e,i);if(e.pos>e.start)return l}throw new Error("Stream parser failed to advance stream.")}const zm=Object.create(null),Al=[kn.none],MB=new vh(Al),Xx=[],Qx=Object.create(null),qx=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])qx[s]=tE(zm,e);class eE{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),qx)}resolve(e){return e?this.table[e]||(this.table[e]=tE(this.extra,e)):0}}const IB=new eE(zm);function Um(s,e){Xx.indexOf(s)>-1||(Xx.push(s),console.warn(e))}function tE(s,e){let i=[];for(let f of e.split(" ")){let d=[];for(let h of f.split(".")){let m=s[h]||ue[h];m?typeof m=="function"?d.length?d=d.map(m):Um(h,`Modifier ${h} used at start of tag`):d.length?Um(h,`Tag ${h} used as modifier`):d=Array.isArray(m)?m:[m]:Um(h,`Unknown highlighting tag ${h}`)}for(let h of d)i.push(h)}if(!i.length)return 0;let a=e.replace(/ /g,"_"),l=a+" "+i.map(f=>f.id),c=Qx[l];if(c)return c.id;let u=Qx[l]=kn.define({id:Al.length,name:a,props:[$$({[a]:i})]});return Al.push(u),u.id}function RB(s){let e=kn.define({id:Al.length,name:"Document",props:[$s.add(()=>s)],top:!0});return Al.push(e),e}function nE(s){return s.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(s)}function rE(s){for(let e=s.iter();!e.next().done;)if(nE(e.value))return!0;return!1}function NB(s){let e=!1;return s.iterChanges((i,a,l,c,u)=>{!e&&rE(u)&&(e=!0)}),e}const Hm=Te.define({combine:s=>s.some(e=>e)});function YW(s={}){let e=[FB];return s.alwaysIsolate&&e.push(Hm.of(!0)),e}const FB=Bt.fromClass(class{constructor(s){this.always=s.state.facet(Hm)||s.textDirection!=wt.LTR||s.state.facet(xe.perLineTextDirection),this.hasRTL=!this.always&&rE(s.state.doc),this.tree=_t(s.state),this.decorations=this.always||this.hasRTL?iE(s,this.tree,this.always):Ne.none}update(s){let e=s.state.facet(Hm)||s.view.textDirection!=wt.LTR||s.state.facet(xe.perLineTextDirection);if(!e&&!this.hasRTL&&NB(s.changes)&&(this.hasRTL=!0),!e&&!this.hasRTL)return;let i=_t(s.state);(e!=this.always||i!=this.tree||s.docChanged||s.viewportChanged)&&(this.tree=i,this.always=e,this.decorations=iE(s.view,i,e))}},{provide:s=>{function e(i){var a,l;return(l=(a=i.plugin(s))===null||a===void 0?void 0:a.decorations)!==null&&l!==void 0?l:Ne.none}return[xe.outerDecorations.of(e),yi.lowest(xe.bidiIsolatedRanges.of(e))]}});function iE(s,e,i){let a=new vi,l=s.visibleRanges;i||(l=LB(l,s.state.doc));for(let{from:c,to:u}of l)e.iterate({enter:f=>{let d=f.type.prop(qe.isolate);d&&a.add(f.from,f.to,$B[d])},from:c,to:u});return a.finish()}function LB(s,e){let i=e.iter(),a=0,l=[],c=null;for(let{from:u,to:f}of s)if(!(c&&c.to>u&&(u=c.to,u>=f)))for(a+i.value.length<u&&(i.next(u-(a+i.value.length)),a=u);;){let d=a,h=a+i.value.length;if(!i.lineBreak&&nE(i.value)&&(c&&c.to>d-10?c.to=Math.min(f,h):l.push(c={from:d,to:Math.min(f,h)})),h>=f)break;a=h,i.next()}return l}const $B={rtl:Ne.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:wt.RTL}),ltr:Ne.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:wt.LTR}),auto:Ne.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var BB=["true","false","on","off","yes","no"],jB=new RegExp("\\b(("+BB.join(")|(")+"))$","i");const Bu={name:"yaml",token:function(s,e){var i=s.peek(),a=e.escaped;if(e.escaped=!1,i=="#"&&(s.pos==0||/\s/.test(s.string.charAt(s.pos-1))))return s.skipToEnd(),"comment";if(s.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(e.literal&&s.indentation()>e.keyCol)return s.skipToEnd(),"string";if(e.literal&&(e.literal=!1),s.sol()){if(e.keyCol=0,e.pair=!1,e.pairStart=!1,s.match("---")||s.match("..."))return"def";if(s.match(/^\s*-\s+/))return"meta"}if(s.match(/^(\{|\}|\[|\])/))return i=="{"?e.inlinePairs++:i=="}"?e.inlinePairs--:i=="["?e.inlineList++:e.inlineList--,"meta";if(e.inlineList>0&&!a&&i==",")return s.next(),"meta";if(e.inlinePairs>0&&!a&&i==",")return e.keyCol=0,e.pair=!1,e.pairStart=!1,s.next(),"meta";if(e.pairStart){if(s.match(/^\s*(\||\>)\s*/))return e.literal=!0,"meta";if(s.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(e.inlinePairs==0&&s.match(/^\s*-?[0-9\.\,]+\s?$/)||e.inlinePairs>0&&s.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(s.match(jB))return"keyword"}return!e.pair&&s.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(e.pair=!0,e.keyCol=s.indentation(),"atom"):e.pair&&s.match(/^:\s*/)?(e.pairStart=!0,"meta"):(e.pairStart=!1,e.escaped=i=="\\",s.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}};var sE=S(45685),oE=S(81215),Km=S(32881),Ei=S(89575),WB=S(17502);const VB=s=>{let{state:e}=s,i=e.doc.lineAt(e.selection.main.from),a=Ym(s.state,i.from);return a.line?zB(s):a.block?HB(s):!1};function Gm(s,e){return({state:i,dispatch:a})=>{if(i.readOnly)return!1;let l=s(e,i);return l?(a(i.update(l)),!0):!1}}const zB=Gm(YB,0),JW=null,ZW=null,UB=Gm(aE,0),_W=null,XW=null,HB=Gm((s,e)=>aE(s,e,GB(e)),0);function Ym(s,e){let i=s.languageDataAt("commentTokens",e);return i.length?i[0]:{}}const Ol=50;function KB(s,{open:e,close:i},a,l){let c=s.sliceDoc(a-Ol,a),u=s.sliceDoc(l,l+Ol),f=/\s*$/.exec(c)[0].length,d=/^\s*/.exec(u)[0].length,h=c.length-f;if(c.slice(h-e.length,h)==e&&u.slice(d,d+i.length)==i)return{open:{pos:a-f,margin:f&&1},close:{pos:l+d,margin:d&&1}};let m,p;l-a<=2*Ol?m=p=s.sliceDoc(a,l):(m=s.sliceDoc(a,a+Ol),p=s.sliceDoc(l-Ol,l));let b=/^\s*/.exec(m)[0].length,v=/\s*$/.exec(p)[0].length,x=p.length-v-i.length;return m.slice(b,b+e.length)==e&&p.slice(x,x+i.length)==i?{open:{pos:a+b+e.length,margin:/\s/.test(m.charAt(b+e.length))?1:0},close:{pos:l-v-i.length,margin:/\s/.test(p.charAt(x-1))?1:0}}:null}function GB(s){let e=[];for(let i of s.selection.ranges){let a=s.doc.lineAt(i.from),l=i.to<=a.to?a:s.doc.lineAt(i.to),c=e.length-1;c>=0&&e[c].to>a.from?e[c].to=l.to:e.push({from:a.from+/^\s*/.exec(a.text)[0].length,to:l.to})}return e}function aE(s,e,i=e.selection.ranges){let a=i.map(c=>Ym(e,c.from).block);if(!a.every(c=>c))return null;let l=i.map((c,u)=>KB(e,a[u],c.from,c.to));if(s!=2&&!l.every(c=>c))return{changes:e.changes(i.map((c,u)=>l[u]?[]:[{from:c.from,insert:a[u].open+" "},{from:c.to,insert:" "+a[u].close}]))};if(s!=1&&l.some(c=>c)){let c=[];for(let u=0,f;u<l.length;u++)if(f=l[u]){let d=a[u],{open:h,close:m}=f;c.push({from:h.pos-d.open.length,to:h.pos+h.margin},{from:m.pos-m.margin,to:m.pos+d.close.length})}return{changes:c}}return null}function YB(s,e,i=e.selection.ranges){let a=[],l=-1;for(let{from:c,to:u}of i){let f=a.length,d=1e9,h=Ym(e,c).line;if(h){for(let m=c;m<=u;){let p=e.doc.lineAt(m);if(p.from>l&&(c==u||u>p.from)){l=p.from;let b=/^\s*/.exec(p.text)[0].length,v=b==p.length,x=p.text.slice(b,b+h.length)==h?b:-1;b<p.text.length&&b<d&&(d=b),a.push({line:p,comment:x,token:h,indent:b,empty:v,single:!1})}m=p.to+1}if(d<1e9)for(let m=f;m<a.length;m++)a[m].indent<a[m].line.text.length&&(a[m].indent=d);a.length==f+1&&(a[f].single=!0)}}if(s!=2&&a.some(c=>c.comment<0&&(!c.empty||c.single))){let c=[];for(let{line:f,token:d,indent:h,empty:m,single:p}of a)(p||!m)&&c.push({from:f.from+h,insert:d+" "});let u=e.changes(c);return{changes:u,selection:e.selection.map(u,1)}}else if(s!=1&&a.some(c=>c.comment>=0)){let c=[];for(let{line:u,comment:f,token:d}of a)if(f>=0){let h=u.from+f,m=h+d.length;u.text[m-u.from]==" "&&m++,c.push({from:h,to:m})}return{changes:c}}return null}const Jm=Vr.define(),JB=Vr.define(),ZB=Te.define(),lE=Te.define({combine(s){return Ar(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,i)=>(a,l)=>e(a,l)||i(a,l)})}}),Zm=Jt.define({create(){return Xr.empty},update(s,e){let i=e.state.facet(lE),a=e.annotation(Jm);if(a){let d=$n.fromTransaction(e,a.selection),h=a.side,m=h==0?s.undone:s.done;return d?m=Wu(m,m.length,i.minDepth,d):m=fE(m,e.startState.selection),new Xr(h==0?a.rest:m,h==0?m:a.rest)}let l=e.annotation(JB);if((l=="full"||l=="before")&&(s=s.isolate()),e.annotation(rn.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let c=$n.fromTransaction(e),u=e.annotation(rn.time),f=e.annotation(rn.userEvent);return c?s=s.addChanges(c,u,f,i,e):e.selection&&(s=s.addSelection(e.startState.selection,u,f,i.newGroupDelay)),(l=="full"||l=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new Xr(s.done.map($n.fromJSON),s.undone.map($n.fromJSON))}});function _B(s={}){return[Zm,lE.of(s),xe.domEventHandlers({beforeinput(e,i){let a=e.inputType=="historyUndo"?cE:e.inputType=="historyRedo"?_m:null;return a?(e.preventDefault(),a(i)):!1}})]}const QW=null;function ju(s,e){return function({state:i,dispatch:a}){if(!e&&i.readOnly)return!1;let l=i.field(Zm,!1);if(!l)return!1;let c=l.pop(s,i,e);return c?(a(c),!0):!1}}const cE=ju(0,!1),_m=ju(1,!1),XB=ju(0,!0),QB=ju(1,!0);function qW(s){return function(e){let i=e.field(Zm,!1);if(!i)return 0;let a=s==0?i.done:i.undone;return a.length-(a.length&&!a[0].changes?1:0)}}const eV=null,tV=null;class $n{constructor(e,i,a,l,c){this.changes=e,this.effects=i,this.mapped=a,this.startSelection=l,this.selectionsAfter=c}setSelAfter(e){return new $n(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,i,a;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(a=this.startSelection)===null||a===void 0?void 0:a.toJSON(),selectionsAfter:this.selectionsAfter.map(l=>l.toJSON())}}static fromJSON(e){return new $n(e.changes&&nn.fromJSON(e.changes),[],e.mapped&&Wr.fromJSON(e.mapped),e.startSelection&&de.fromJSON(e.startSelection),e.selectionsAfter.map(de.fromJSON))}static fromTransaction(e,i){let a=ur;for(let l of e.startState.facet(ZB)){let c=l(e);c.length&&(a=a.concat(c))}return!a.length&&e.changes.empty?null:new $n(e.changes.invert(e.startState.doc),a,void 0,i||e.startState.selection,ur)}static selection(e){return new $n(void 0,ur,void 0,void 0,e)}}function Wu(s,e,i,a){let l=e+1>i+20?e-i-1:0,c=s.slice(l,e);return c.push(a),c}function qB(s,e){let i=[],a=!1;return s.iterChangedRanges((l,c)=>i.push(l,c)),e.iterChangedRanges((l,c,u,f)=>{for(let d=0;d<i.length;){let h=i[d++],m=i[d++];f>=h&&u<=m&&(a=!0)}}),a}function e3(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((i,a)=>i.empty!=e.ranges[a].empty).length===0}function uE(s,e){return s.length?e.length?s.concat(e):s:e}const ur=[],t3=200;function fE(s,e){if(s.length){let i=s[s.length-1],a=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-t3));return a.length&&a[a.length-1].eq(e)?s:(a.push(e),Wu(s,s.length-1,1e9,i.setSelAfter(a)))}else return[$n.selection([e])]}function n3(s){let e=s[s.length-1],i=s.slice();return i[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),i}function Xm(s,e){if(!s.length)return s;let i=s.length,a=ur;for(;i;){let l=r3(s[i-1],e,a);if(l.changes&&!l.changes.empty||l.effects.length){let c=s.slice(0,i);return c[i-1]=l,c}else e=l.mapped,i--,a=l.selectionsAfter}return a.length?[$n.selection(a)]:ur}function r3(s,e,i){let a=uE(s.selectionsAfter.length?s.selectionsAfter.map(f=>f.map(e)):ur,i);if(!s.changes)return $n.selection(a);let l=s.changes.map(e),c=e.mapDesc(s.changes,!0),u=s.mapped?s.mapped.composeDesc(c):c;return new $n(l,Ye.mapEffects(s.effects,e),u,s.startSelection.map(c),a)}const i3=/^(input\.type|delete)($|\.)/;class Xr{constructor(e,i,a=0,l=void 0){this.done=e,this.undone=i,this.prevTime=a,this.prevUserEvent=l}isolate(){return this.prevTime?new Xr(this.done,this.undone):this}addChanges(e,i,a,l,c){let u=this.done,f=u[u.length-1];return f&&f.changes&&!f.changes.empty&&e.changes&&(!a||i3.test(a))&&(!f.selectionsAfter.length&&i-this.prevTime<l.newGroupDelay&&l.joinToEvent(c,qB(f.changes,e.changes))||a=="input.type.compose")?u=Wu(u,u.length-1,l.minDepth,new $n(e.changes.compose(f.changes),uE(e.effects,f.effects),f.mapped,f.startSelection,ur)):u=Wu(u,u.length,l.minDepth,e),new Xr(u,ur,i,a)}addSelection(e,i,a,l){let c=this.done.length?this.done[this.done.length-1].selectionsAfter:ur;return c.length>0&&i-this.prevTime<l&&a==this.prevUserEvent&&a&&/^select($|\.)/.test(a)&&e3(c[c.length-1],e)?this:new Xr(fE(this.done,e),this.undone,i,a)}addMapping(e){return new Xr(Xm(this.done,e),Xm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,i,a){let l=e==0?this.done:this.undone;if(l.length==0)return null;let c=l[l.length-1],u=c.selectionsAfter[0]||i.selection;if(a&&c.selectionsAfter.length)return i.update({selection:c.selectionsAfter[c.selectionsAfter.length-1],annotations:Jm.of({side:e,rest:n3(l),selection:u}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(c.changes){let f=l.length==1?ur:l.slice(0,l.length-1);return c.mapped&&(f=Xm(f,c.mapped)),i.update({changes:c.changes,selection:c.startSelection,effects:c.effects,annotations:Jm.of({side:e,rest:f,selection:u}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Xr.empty=new Xr(ur,ur);const s3=[{key:"Mod-z",run:cE,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:_m,preventDefault:!0},{linux:"Ctrl-Shift-z",run:_m,preventDefault:!0},{key:"Mod-u",run:XB,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:QB,preventDefault:!0}];function jo(s,e){return de.create(s.ranges.map(e),s.mainIndex)}function Qr(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function fr({state:s,dispatch:e},i){let a=jo(s.selection,i);return a.eq(s.selection,!0)?!1:(e(Qr(s,a)),!0)}function Cl(s,e){return de.cursor(e?s.to:s.from)}function Vu(s,e){return fr(s,i=>i.empty?s.moveByChar(i,e):Cl(i,e))}function bn(s){return s.textDirectionAt(s.state.selection.main.head)==wt.LTR}const dE=s=>Vu(s,!bn(s)),hE=s=>Vu(s,bn(s)),nV=s=>Vu(s,!0),rV=s=>Vu(s,!1);function zu(s,e){return fr(s,i=>i.empty?s.moveByGroup(i,e):Cl(i,e))}const o3=s=>zu(s,!bn(s)),a3=s=>zu(s,bn(s)),iV=s=>zu(s,!0),sV=s=>zu(s,!1),mE=typeof Intl!="undefined"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function pE(s,e,i){let a=s.state.charCategorizer(e.from),l=CharCategory.Space,c=e.from,u=0,f=!1,d=!1,h=!1,m=b=>{if(f)return!1;c+=i?b.length:-b.length;let v=a(b),x;if(v==CharCategory.Word&&b.charCodeAt(0)<128&&/[\W_]/.test(b)&&(v=-1),l==CharCategory.Space&&(l=v),l!=v)return!1;if(l==CharCategory.Word)if(b.toLowerCase()==b){if(!i&&d)return!1;h=!0}else if(h){if(i)return!1;f=!0}else{if(d&&i&&a(x=s.state.sliceDoc(c,c+1))==CharCategory.Word&&x.toLowerCase()==x)return!1;d=!0}return u++,!0},p=s.moveByChar(e,i,b=>(m(b),m));if(mE&&l==CharCategory.Word&&p.from==e.from+u*(i?1:-1)){let b=Math.min(e.head,p.head),v=Math.max(e.head,p.head),x=s.state.sliceDoc(b,v);if(x.length>1&&/[\u4E00-\uffff]/.test(x)){let E=Array.from(mE.segment(x));if(E.length>1)return i?EditorSelection.cursor(e.head+E[1].index,-1):EditorSelection.cursor(p.head+E[E.length-1].index,1)}}return p}function gE(s,e){return fr(s,i=>i.empty?pE(s,i,e):Cl(i,e))}const oV=s=>gE(s,!0),aV=s=>gE(s,!1);function l3(s,e,i){if(e.type.prop(i))return!0;let a=e.to-e.from;return a&&(a>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function Uu(s,e,i){let a=_t(s).resolveInner(e.head),l=i?qe.closedBy:qe.openedBy;for(let d=e.head;;){let h=i?a.childAfter(d):a.childBefore(d);if(!h)break;l3(s,h,l)?a=h:d=i?h.to:h.from}let c=a.type.prop(l),u,f;return c&&(u=i?_r(s,a.from,1):_r(s,a.to,-1))&&u.matched?f=i?u.end.to:u.end.from:f=i?a.to:a.from,de.cursor(f,i?-1:1)}const c3=s=>fr(s,e=>Uu(s.state,e,!bn(s))),u3=s=>fr(s,e=>Uu(s.state,e,bn(s)));function yE(s,e){return fr(s,i=>{if(!i.empty)return Cl(i,e);let a=s.moveVertically(i,e);return a.head!=i.head?a:s.moveToLineBoundary(i,e)})}const vE=s=>yE(s,!1),bE=s=>yE(s,!0);function SE(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,i=0,a=0,l;if(e){for(let c of s.state.facet(xe.scrollMargins)){let u=c(s);u!=null&&u.top&&(i=Math.max(u==null?void 0:u.top,i)),u!=null&&u.bottom&&(a=Math.max(u==null?void 0:u.bottom,a))}l=s.scrollDOM.clientHeight-i-a}else l=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:a,selfScroll:e,height:Math.max(s.defaultLineHeight,l-5)}}function xE(s,e){let i=SE(s),{state:a}=s,l=jo(a.selection,u=>u.empty?s.moveVertically(u,e,i.height):Cl(u,e));if(l.eq(a.selection))return!1;let c;if(i.selfScroll){let u=s.coordsAtPos(a.selection.main.head),f=s.scrollDOM.getBoundingClientRect(),d=f.top+i.marginTop,h=f.bottom-i.marginBottom;u&&u.top>d&&u.bottom<h&&(c=xe.scrollIntoView(l.main.head,{y:"start",yMargin:u.top-d}))}return s.dispatch(Qr(a,l),{effects:c}),!0}const EE=s=>xE(s,!1),Qm=s=>xE(s,!0);function cs(s,e,i){let a=s.lineBlockAt(e.head),l=s.moveToLineBoundary(e,i);if(l.head==e.head&&l.head!=(i?a.to:a.from)&&(l=s.moveToLineBoundary(e,i,!1)),!i&&l.head==a.from&&a.length){let c=/^\s*/.exec(s.state.sliceDoc(a.from,Math.min(a.from+100,a.to)))[0].length;c&&e.head!=a.from+c&&(l=de.cursor(a.from+c))}return l}const f3=s=>fr(s,e=>cs(s,e,!0)),d3=s=>fr(s,e=>cs(s,e,!1)),h3=s=>fr(s,e=>cs(s,e,!bn(s))),m3=s=>fr(s,e=>cs(s,e,bn(s))),p3=s=>fr(s,e=>de.cursor(s.lineBlockAt(e.head).from,1)),g3=s=>fr(s,e=>de.cursor(s.lineBlockAt(e.head).to,-1));function wE(s,e,i){let a=!1,l=jo(s.selection,c=>{let u=_r(s,c.head,-1)||_r(s,c.head,1)||c.head>0&&_r(s,c.head-1,1)||c.head<s.doc.length&&_r(s,c.head+1,-1);if(!u||!u.end)return c;a=!0;let f=u.start.from==c.head?u.end.to:u.end.from;return i?de.range(c.anchor,f):de.cursor(f)});return a?(e(Qr(s,l)),!0):!1}const y3=({state:s,dispatch:e})=>wE(s,e,!1),lV=({state:s,dispatch:e})=>wE(s,e,!0);function Xn(s,e){let i=jo(s.state.selection,a=>{let l=e(a);return de.range(a.anchor,l.head,l.goalColumn,l.bidiLevel||void 0)});return i.eq(s.state.selection)?!1:(s.dispatch(Qr(s.state,i)),!0)}function Hu(s,e){return Xn(s,i=>s.moveByChar(i,e))}const AE=s=>Hu(s,!bn(s)),OE=s=>Hu(s,bn(s)),cV=s=>Hu(s,!0),uV=s=>Hu(s,!1);function Ku(s,e){return Xn(s,i=>s.moveByGroup(i,e))}const v3=s=>Ku(s,!bn(s)),b3=s=>Ku(s,bn(s)),fV=s=>Ku(s,!0),dV=s=>Ku(s,!1);function CE(s,e){return Xn(s,i=>pE(s,i,e))}const hV=s=>CE(s,!0),mV=s=>CE(s,!1),S3=s=>Xn(s,e=>Uu(s.state,e,!bn(s))),x3=s=>Xn(s,e=>Uu(s.state,e,bn(s)));function kE(s,e){return Xn(s,i=>s.moveVertically(i,e))}const TE=s=>kE(s,!1),PE=s=>kE(s,!0);function DE(s,e){return Xn(s,i=>s.moveVertically(i,e,SE(s).height))}const ME=s=>DE(s,!1),IE=s=>DE(s,!0),E3=s=>Xn(s,e=>cs(s,e,!0)),w3=s=>Xn(s,e=>cs(s,e,!1)),A3=s=>Xn(s,e=>cs(s,e,!bn(s))),O3=s=>Xn(s,e=>cs(s,e,bn(s))),C3=s=>Xn(s,e=>de.cursor(s.lineBlockAt(e.head).from)),k3=s=>Xn(s,e=>de.cursor(s.lineBlockAt(e.head).to)),RE=({state:s,dispatch:e})=>(e(Qr(s,{anchor:0})),!0),NE=({state:s,dispatch:e})=>(e(Qr(s,{anchor:s.doc.length})),!0),FE=({state:s,dispatch:e})=>(e(Qr(s,{anchor:s.selection.main.anchor,head:0})),!0),LE=({state:s,dispatch:e})=>(e(Qr(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),T3=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),P3=({state:s,dispatch:e})=>{let i=Yu(s).map(({from:a,to:l})=>de.range(a,Math.min(l+1,s.doc.length)));return e(s.update({selection:de.create(i),userEvent:"select"})),!0},D3=({state:s,dispatch:e})=>{let i=jo(s.selection,a=>{var l;let c=_t(s).resolveStack(a.from,1);for(let u=c;u;u=u.next){let{node:f}=u;if((f.from<a.from&&f.to>=a.to||f.to>a.to&&f.from<=a.from)&&(!((l=f.parent)===null||l===void 0)&&l.parent))return de.range(f.to,f.from)}return a});return e(Qr(s,i)),!0},M3=({state:s,dispatch:e})=>{let i=s.selection,a=null;return i.ranges.length>1?a=de.create([i.main]):i.main.empty||(a=de.create([de.cursor(i.main.head)])),a?(e(Qr(s,a)),!0):!1};function Wo(s,e){if(s.state.readOnly)return!1;let i="delete.selection",{state:a}=s,l=a.changeByRange(c=>{let{from:u,to:f}=c;if(u==f){let d=e(c);d<u?(i="delete.backward",d=Gu(s,d,!1)):d>u&&(i="delete.forward",d=Gu(s,d,!0)),u=Math.min(u,d),f=Math.max(f,d)}else u=Gu(s,u,!1),f=Gu(s,f,!0);return u==f?{range:c}:{changes:{from:u,to:f},range:de.cursor(u,u<c.head?-1:1)}});return l.changes.empty?!1:(s.dispatch(a.update(l,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?xe.announce.of(a.phrase("Selection deleted")):void 0})),!0)}function Gu(s,e,i){if(s instanceof xe)for(let a of s.state.facet(xe.atomicRanges).map(l=>l(s)))a.between(e,e,(l,c)=>{l<e&&c>e&&(e=i?c:l)});return e}const qm=(s,e,i)=>Wo(s,a=>{let l=a.from,{state:c}=s,u=c.doc.lineAt(l),f,d;if(i&&!e&&l>u.from&&l<u.from+200&&!/[^ \t]/.test(f=u.text.slice(0,l-u.from))){if(f[f.length-1]=="	")return l-1;let h=Oo(f,c.tabSize),m=h%Bs(c)||Bs(c);for(let p=0;p<m&&f[f.length-1-p]==" ";p++)l--;d=l}else d=an(u.text,l-u.from,e,e)+u.from,d==l&&u.number!=(e?c.doc.lines:1)?d+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(u.text.slice(d-u.from,l-u.from))&&(d=an(u.text,d-u.from,!1,!1)+u.from);return d}),ep=s=>qm(s,!1,!0),pV=s=>qm(s,!1,!1),$E=s=>qm(s,!0,!1),BE=(s,e)=>Wo(s,i=>{let a=i.head,{state:l}=s,c=l.doc.lineAt(a),u=l.charCategorizer(a);for(let f=null;;){if(a==(e?c.to:c.from)){a==i.head&&c.number!=(e?l.doc.lines:1)&&(a+=e?1:-1);break}let d=an(c.text,a-c.from,e)+c.from,h=c.text.slice(Math.min(a,d)-c.from,Math.max(a,d)-c.from),m=u(h);if(f!=null&&m!=f)break;(h!=" "||a!=i.head)&&(f=m),a=d}return a}),jE=s=>BE(s,!1),I3=s=>BE(s,!0),R3=s=>Wo(s,e=>{let i=s.lineBlockAt(e.head).to;return e.head<i?i:Math.min(s.state.doc.length,e.head+1)}),gV=s=>Wo(s,e=>{let i=s.lineBlockAt(e.head).from;return e.head>i?i:Math.max(0,e.head-1)}),N3=s=>Wo(s,e=>{let i=s.moveToLineBoundary(e,!1).head;return e.head>i?i:Math.max(0,e.head-1)}),F3=s=>Wo(s,e=>{let i=s.moveToLineBoundary(e,!0).head;return e.head<i?i:Math.min(s.state.doc.length,e.head+1)}),yV=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=[];for(let a=0,l="",c=s.doc.iter();;){if(c.next(),c.lineBreak||c.done){let u=l.search(/\s+$/);if(u>-1&&i.push({from:a-(l.length-u),to:a}),c.done)break;l=""}else l=c.value;a+=c.value.length}return i.length?(e(s.update({changes:i,userEvent:"delete"})),!0):!1},L3=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=s.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:mt.of(["",""])},range:de.cursor(a.from)}));return e(s.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},$3=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=s.changeByRange(a=>{if(!a.empty||a.from==0||a.from==s.doc.length)return{range:a};let l=a.from,c=s.doc.lineAt(l),u=l==c.from?l-1:an(c.text,l-c.from,!1)+c.from,f=l==c.to?l+1:an(c.text,l-c.from,!0)+c.from;return{changes:{from:u,to:f,insert:s.doc.slice(l,f).append(s.doc.slice(u,l))},range:de.cursor(f)}});return i.changes.empty?!1:(e(s.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Yu(s){let e=[],i=-1;for(let a of s.selection.ranges){let l=s.doc.lineAt(a.from),c=s.doc.lineAt(a.to);if(!a.empty&&a.to==c.from&&(c=s.doc.lineAt(a.to-1)),i>=l.number){let u=e[e.length-1];u.to=c.to,u.ranges.push(a)}else e.push({from:l.from,to:c.to,ranges:[a]});i=c.number+1}return e}function WE(s,e,i){if(s.readOnly)return!1;let a=[],l=[];for(let c of Yu(s)){if(i?c.to==s.doc.length:c.from==0)continue;let u=s.doc.lineAt(i?c.to+1:c.from-1),f=u.length+1;if(i){a.push({from:c.to,to:u.to},{from:c.from,insert:u.text+s.lineBreak});for(let d of c.ranges)l.push(de.range(Math.min(s.doc.length,d.anchor+f),Math.min(s.doc.length,d.head+f)))}else{a.push({from:u.from,to:c.from},{from:c.to,insert:s.lineBreak+u.text});for(let d of c.ranges)l.push(de.range(d.anchor-f,d.head-f))}}return a.length?(e(s.update({changes:a,scrollIntoView:!0,selection:de.create(l,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const B3=({state:s,dispatch:e})=>WE(s,e,!1),j3=({state:s,dispatch:e})=>WE(s,e,!0);function VE(s,e,i){if(s.readOnly)return!1;let a=[];for(let l of Yu(s))i?a.push({from:l.from,insert:s.doc.slice(l.from,l.to)+s.lineBreak}):a.push({from:l.to,insert:s.lineBreak+s.doc.slice(l.from,l.to)});return e(s.update({changes:a,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const W3=({state:s,dispatch:e})=>VE(s,e,!1),V3=({state:s,dispatch:e})=>VE(s,e,!0),z3=s=>{if(s.state.readOnly)return!1;let{state:e}=s,i=e.changes(Yu(e).map(({from:l,to:c})=>(l>0?l--:c<e.doc.length&&c++,{from:l,to:c}))),a=jo(e.selection,l=>{let c;if(s.lineWrapping){let u=s.lineBlockAt(l.head),f=s.coordsAtPos(l.head,l.assoc||1);f&&(c=u.bottom+s.documentTop-f.bottom+s.defaultLineHeight/2)}return s.moveVertically(l,!0,c)}).map(i);return s.dispatch({changes:i,selection:a,scrollIntoView:!0,userEvent:"delete.line"}),!0},vV=({state:s,dispatch:e})=>(e(s.update(s.replaceSelection(s.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0),bV=({state:s,dispatch:e})=>(e(s.update(s.changeByRange(i=>{let a=/^\s*/.exec(s.doc.lineAt(i.from).text)[0];return{changes:{from:i.from,to:i.to,insert:s.lineBreak+a},range:EditorSelection.cursor(i.from+a.length+1)}}),{scrollIntoView:!0,userEvent:"input"})),!0);function U3(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let i=_t(s).resolveInner(e),a=i.childBefore(e),l=i.childAfter(e),c;return a&&l&&a.to<=e&&l.from>=e&&(c=a.type.prop(qe.closedBy))&&c.indexOf(l.name)>-1&&s.doc.lineAt(a.to).from==s.doc.lineAt(l.from).from&&!/\S/.test(s.sliceDoc(a.to,l.from))?{from:a.to,to:l.from}:null}const H3=zE(!1),K3=zE(!0);function zE(s){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let a=e.changeByRange(l=>{let{from:c,to:u}=l,f=e.doc.lineAt(c),d=!s&&c==u&&U3(e,c);s&&(c=u=(u<=f.to?f:e.doc.lineAt(u)).to);let h=new bl(e,{simulateBreak:c,simulateDoubleBreak:!!d}),m=Fu(h,c);for(m==null&&(m=Oo(/^\s*/.exec(e.doc.lineAt(c).text)[0],e.tabSize));u<f.to&&/\s/.test(f.text[u-f.from]);)u++;d?{from:c,to:u}=d:c>f.from&&c<f.from+100&&!/\S/.test(f.text.slice(0,c))&&(c=f.from);let p=["",Lo(e,m)];return d&&p.push(Lo(e,h.lineIndent(f.from,-1))),{changes:{from:c,to:u,insert:mt.of(p)},range:de.cursor(c+1+p[1].length)}});return i(e.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}}function tp(s,e){let i=-1;return s.changeByRange(a=>{let l=[];for(let u=a.from;u<=a.to;){let f=s.doc.lineAt(u);f.number>i&&(a.empty||a.to>f.from)&&(e(f,l,a),i=f.number),u=f.to+1}let c=s.changes(l);return{changes:l,range:de.range(c.mapPos(a.anchor,1),c.mapPos(a.head,1))}})}const G3=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=Object.create(null),a=new bl(s,{overrideIndentation:c=>{let u=i[c];return u==null?-1:u}}),l=tp(s,(c,u,f)=>{let d=Fu(a,c.from);if(d==null)return;/\S/.test(c.text)||(d=0);let h=/^\s*/.exec(c.text)[0],m=Lo(s,d);(h!=m||f.from<c.from+h.length)&&(i[c.from]=d,u.push({from:c.from,to:c.from+h.length,insert:m}))});return l.changes.empty||e(s.update(l,{userEvent:"indent"})),!0},np=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(tp(s,(i,a)=>{a.push({from:i.from,insert:s.facet(Nu)})}),{userEvent:"input.indent"})),!0),UE=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(tp(s,(i,a)=>{let l=/^\s*/.exec(i.text)[0];if(!l)return;let c=Oo(l,s.tabSize),u=0,f=Lo(s,Math.max(0,c-Bs(s)));for(;u<l.length&&u<f.length&&l.charCodeAt(u)==f.charCodeAt(u);)u++;a.push({from:i.from+u,to:i.from+l.length,insert:f.slice(u)})}),{userEvent:"delete.dedent"})),!0),Y3=s=>(s.setTabFocusMode(),!0),SV=s=>(s.setTabFocusMode(2e3),!0),xV=({state:s,dispatch:e})=>s.selection.ranges.some(i=>!i.empty)?np({state:s,dispatch:e}):(e(s.update(s.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),J3=[{key:"Ctrl-b",run:dE,shift:AE,preventDefault:!0},{key:"Ctrl-f",run:hE,shift:OE},{key:"Ctrl-p",run:vE,shift:TE},{key:"Ctrl-n",run:bE,shift:PE},{key:"Ctrl-a",run:p3,shift:C3},{key:"Ctrl-e",run:g3,shift:k3},{key:"Ctrl-d",run:$E},{key:"Ctrl-h",run:ep},{key:"Ctrl-k",run:R3},{key:"Ctrl-Alt-h",run:jE},{key:"Ctrl-o",run:L3},{key:"Ctrl-t",run:$3},{key:"Ctrl-v",run:Qm}],Z3=[{key:"ArrowLeft",run:dE,shift:AE,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:o3,shift:v3,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:h3,shift:A3,preventDefault:!0},{key:"ArrowRight",run:hE,shift:OE,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:a3,shift:b3,preventDefault:!0},{mac:"Cmd-ArrowRight",run:m3,shift:O3,preventDefault:!0},{key:"ArrowUp",run:vE,shift:TE,preventDefault:!0},{mac:"Cmd-ArrowUp",run:RE,shift:FE},{mac:"Ctrl-ArrowUp",run:EE,shift:ME},{key:"ArrowDown",run:bE,shift:PE,preventDefault:!0},{mac:"Cmd-ArrowDown",run:NE,shift:LE},{mac:"Ctrl-ArrowDown",run:Qm,shift:IE},{key:"PageUp",run:EE,shift:ME},{key:"PageDown",run:Qm,shift:IE},{key:"Home",run:d3,shift:w3,preventDefault:!0},{key:"Mod-Home",run:RE,shift:FE},{key:"End",run:f3,shift:E3,preventDefault:!0},{key:"Mod-End",run:NE,shift:LE},{key:"Enter",run:H3},{key:"Mod-a",run:T3},{key:"Backspace",run:ep,shift:ep},{key:"Delete",run:$E},{key:"Mod-Backspace",mac:"Alt-Backspace",run:jE},{key:"Mod-Delete",mac:"Alt-Delete",run:I3},{mac:"Mod-Backspace",run:N3},{mac:"Mod-Delete",run:F3}].concat(J3.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),_3=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:c3,shift:S3},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:u3,shift:x3},{key:"Alt-ArrowUp",run:B3},{key:"Shift-Alt-ArrowUp",run:W3},{key:"Alt-ArrowDown",run:j3},{key:"Shift-Alt-ArrowDown",run:V3},{key:"Escape",run:M3},{key:"Mod-Enter",run:K3},{key:"Alt-l",mac:"Ctrl-l",run:P3},{key:"Mod-i",run:D3,preventDefault:!0},{key:"Mod-[",run:UE},{key:"Mod-]",run:np},{key:"Mod-Alt-\\",run:G3},{key:"Shift-Mod-k",run:z3},{key:"Shift-Mod-\\",run:y3},{key:"Mod-/",run:VB},{key:"Alt-A",run:UB},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Y3}].concat(Z3),X3={key:"Tab",run:np,shift:UE};function kt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var l=i[a];typeof l=="string"?s.setAttribute(a,l):l!=null&&(s[a]=l)}e++}for(;e<arguments.length;e++)HE(s,arguments[e]);return s}function HE(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var i=0;i<e.length;i++)HE(s,e[i]);else throw new RangeError("Unsupported child node: "+e)}const KE=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class Vo{constructor(e,i,a=0,l=e.length,c,u){this.test=u,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(a,l),this.bufferStart=a,this.normalize=c?f=>c(KE(f)):KE,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ln(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let i=Ah(e),a=this.bufferStart+this.bufferPos;this.bufferPos+=lr(e);let l=this.normalize(i);for(let c=0,u=a;;c++){let f=l.charCodeAt(c),d=this.match(f,u,this.bufferPos+this.bufferStart);if(c==l.length-1){if(d)return this.value=d,this;break}u==a&&c<i.length&&i.charCodeAt(c)==f&&u++}}}match(e,i,a){let l=null;for(let c=0;c<this.matches.length;c+=2){let u=this.matches[c],f=!1;this.query.charCodeAt(u)==e&&(u==this.query.length-1?l={from:this.matches[c+1],to:a}:(this.matches[c]++,f=!0)),f||(this.matches.splice(c,2),c-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?l={from:i,to:a}:this.matches.push(1,i)),l&&this.test&&!this.test(l.from,l.to,this.buffer,this.bufferStart)&&(l=null),l}}typeof Symbol!="undefined"&&(Vo.prototype[Symbol.iterator]=function(){return this});const GE={from:-1,to:-1,match:/.*/.exec("")},rp="gm"+(/x/.unicode==null?"":"u");class YE{constructor(e,i,a,l=0,c=e.length){if(this.text=e,this.to=c,this.curLine="",this.done=!1,this.value=GE,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new JE(e,i,a,l,c);this.re=new RegExp(i,rp+(a!=null&&a.ignoreCase?"i":"")),this.test=a==null?void 0:a.test,this.iter=e.iter();let u=e.lineAt(l);this.curLineStart=u.from,this.matchPos=Ju(e,l),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let a=this.curLineStart+i.index,l=a+i[0].length;if(this.matchPos=Ju(this.text,l+(a==l?1:0)),a==this.curLineStart+this.curLine.length&&this.nextLine(),(a<l||a>this.value.to)&&(!this.test||this.test(a,l,i)))return this.value={from:a,to:l,match:i},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const ip=new WeakMap;class zo{constructor(e,i){this.from=e,this.text=i}get to(){return this.from+this.text.length}static get(e,i,a){let l=ip.get(e);if(!l||l.from>=a||l.to<=i){let f=new zo(i,e.sliceString(i,a));return ip.set(e,f),f}if(l.from==i&&l.to==a)return l;let{text:c,from:u}=l;return u>i&&(c=e.sliceString(i,u)+c,u=i),l.to<a&&(c+=e.sliceString(l.to,a)),ip.set(e,new zo(u,c)),new zo(i,c.slice(i-u,a-u))}}class JE{constructor(e,i,a,l,c){this.text=e,this.to=c,this.done=!1,this.value=GE,this.matchPos=Ju(e,l),this.re=new RegExp(i,rp+(a!=null&&a.ignoreCase?"i":"")),this.test=a==null?void 0:a.test,this.flat=zo.get(e,l,this.chunkEnd(l+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==e&&(this.re.lastIndex=e+1,i=this.re.exec(this.flat.text)),i){let a=this.flat.from+i.index,l=a+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(a,l,i)))return this.value={from:a,to:l,match:i},this.matchPos=Ju(this.text,l+(a==l?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=zo.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(YE.prototype[Symbol.iterator]=JE.prototype[Symbol.iterator]=function(){return this});function Q3(s){try{return new RegExp(s,rp),!0}catch{return!1}}function Ju(s,e){if(e>=s.length)return e;let i=s.lineAt(e),a;for(;e<i.to&&(a=i.text.charCodeAt(e-i.from))>=56320&&a<57344;)e++;return e}function sp(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),i=kt("input",{class:"cm-textfield",name:"line",value:e}),a=kt("form",{class:"cm-gotoLine",onkeydown:c=>{c.keyCode==27?(c.preventDefault(),s.dispatch({effects:Zu.of(!1)}),s.focus()):c.keyCode==13&&(c.preventDefault(),l())},onsubmit:c=>{c.preventDefault(),l()}},kt("label",s.state.phrase("Go to line"),": ",i)," ",kt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function l(){let c=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if(!c)return;let{state:u}=s,f=u.doc.lineAt(u.selection.main.head),[,d,h,m,p]=c,b=m?+m.slice(1):0,v=h?+h:f.number;if(h&&p){let w=v/100;d&&(w=w*(d=="-"?-1:1)+f.number/u.doc.lines),v=Math.round(u.doc.lines*w)}else h&&d&&(v=v*(d=="-"?-1:1)+f.number);let x=u.doc.line(Math.max(1,Math.min(u.doc.lines,v))),E=de.cursor(x.from+Math.max(0,Math.min(b,x.length)));s.dispatch({effects:[Zu.of(!1),xe.scrollIntoView(E.from,{y:"center"})],selection:E}),s.focus()}return{dom:a}}const Zu=Ye.define(),ZE=Jt.define({create(){return!0},update(s,e){for(let i of e.effects)i.is(Zu)&&(s=i.value);return s},provide:s=>Fs.from(s,e=>e?sp:null)}),q3=s=>{let e=pl(s,sp);if(!e){let i=[Zu.of(!0)];s.state.field(ZE,!1)==null&&i.push(Ye.appendConfig.of([ZE,e9])),s.dispatch({effects:i}),e=pl(s,sp)}return e&&e.dom.querySelector("input").select(),!0},e9=xe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),t9={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},_E=Te.define({combine(s){return Ar(s,t9,{highlightWordAroundCursor:(e,i)=>e||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function n9(s){let e=[a9,o9];return s&&e.push(_E.of(s)),e}const r9=Ne.mark({class:"cm-selectionMatch"}),i9=Ne.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function XE(s,e,i,a){return(i==0||s(e.sliceDoc(i-1,i))!=Dt.Word)&&(a==e.doc.length||s(e.sliceDoc(a,a+1))!=Dt.Word)}function s9(s,e,i,a){return s(e.sliceDoc(i,i+1))==Dt.Word&&s(e.sliceDoc(a-1,a))==Dt.Word}const o9=Bt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(_E),{state:i}=s,a=i.selection;if(a.ranges.length>1)return Ne.none;let l=a.main,c,u=null;if(l.empty){if(!e.highlightWordAroundCursor)return Ne.none;let d=i.wordAt(l.head);if(!d)return Ne.none;u=i.charCategorizer(l.head),c=i.sliceDoc(d.from,d.to)}else{let d=l.to-l.from;if(d<e.minSelectionLength||d>200)return Ne.none;if(e.wholeWords){if(c=i.sliceDoc(l.from,l.to),u=i.charCategorizer(l.head),!(XE(u,i,l.from,l.to)&&s9(u,i,l.from,l.to)))return Ne.none}else if(c=i.sliceDoc(l.from,l.to),!c)return Ne.none}let f=[];for(let d of s.visibleRanges){let h=new Vo(i.doc,c,d.from,d.to);for(;!h.next().done;){let{from:m,to:p}=h.value;if((!u||XE(u,i,m,p))&&(l.empty&&m<=l.from&&p>=l.to?f.push(i9.range(m,p)):(m>=l.to||p<=l.from)&&f.push(r9.range(m,p)),f.length>e.maxMatches))return Ne.none}}return Ne.set(f)}},{decorations:s=>s.decorations}),a9=xe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),l9=({state:s,dispatch:e})=>{let{selection:i}=s,a=de.create(i.ranges.map(l=>s.wordAt(l.head)||de.cursor(l.head)),i.mainIndex);return a.eq(i)?!1:(e(s.update({selection:a})),!0)};function c9(s,e){let{main:i,ranges:a}=s.selection,l=s.wordAt(i.head),c=l&&l.from==i.from&&l.to==i.to;for(let u=!1,f=new Vo(s.doc,e,a[a.length-1].to);;)if(f.next(),f.done){if(u)return null;f=new Vo(s.doc,e,0,Math.max(0,a[a.length-1].from-1)),u=!0}else{if(u&&a.some(d=>d.from==f.value.from))continue;if(c){let d=s.wordAt(f.value.from);if(!d||d.from!=f.value.from||d.to!=f.value.to)continue}return f.value}}const u9=({state:s,dispatch:e})=>{let{ranges:i}=s.selection;if(i.some(c=>c.from===c.to))return l9({state:s,dispatch:e});let a=s.sliceDoc(i[0].from,i[0].to);if(s.selection.ranges.some(c=>s.sliceDoc(c.from,c.to)!=a))return!1;let l=c9(s,a);return l?(e(s.update({selection:s.selection.addRange(de.range(l.from,l.to),!1),effects:xe.scrollIntoView(l.to)})),!0):!1},js=Te.define({combine(s){return Ar(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new E9(e),scrollToMatch:e=>xe.scrollIntoView(e)})}});function EV(s){return s?[js.of(s),up]:up}class QE{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Q3(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(i,a)=>a=="n"?`
`:a=="r"?"\r":a=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new m9(this):new d9(this)}getCursor(e,i=0,a){let l=e.doc?e:rt.create({doc:e});return a==null&&(a=l.doc.length),this.regexp?Ho(this,l,i,a):Uo(this,l,i,a)}}class qE{constructor(e){this.spec=e}}function Uo(s,e,i,a){return new Vo(e.doc,s.unquoted,i,a,s.caseSensitive?void 0:l=>l.toLowerCase(),s.wholeWord?f9(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function f9(s,e){return(i,a,l,c)=>((c>i||c+l.length<a)&&(c=Math.max(0,i-2),l=s.sliceString(c,Math.min(s.length,a+2))),(e(_u(l,i-c))!=Dt.Word||e(Xu(l,i-c))!=Dt.Word)&&(e(Xu(l,a-c))!=Dt.Word||e(_u(l,a-c))!=Dt.Word))}class d9 extends qE{constructor(e){super(e)}nextMatch(e,i,a){let l=Uo(this.spec,e,a,e.doc.length).nextOverlapping();return l.done&&(l=Uo(this.spec,e,0,i).nextOverlapping()),l.done?null:l.value}prevMatchInRange(e,i,a){for(let l=a;;){let c=Math.max(i,l-1e4-this.spec.unquoted.length),u=Uo(this.spec,e,c,l),f=null;for(;!u.nextOverlapping().done;)f=u.value;if(f)return f;if(c==i)return null;l-=1e4}}prevMatch(e,i,a){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,a,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,i){let a=Uo(this.spec,e,0,e.doc.length),l=[];for(;!a.next().done;){if(l.length>=i)return null;l.push(a.value)}return l}highlight(e,i,a,l){let c=Uo(this.spec,e,Math.max(0,i-this.spec.unquoted.length),Math.min(a+this.spec.unquoted.length,e.doc.length));for(;!c.next().done;)l(c.value.from,c.value.to)}}function Ho(s,e,i,a){return new YE(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?h9(e.charCategorizer(e.selection.main.head)):void 0},i,a)}function _u(s,e){return s.slice(an(s,e,!1),e)}function Xu(s,e){return s.slice(e,an(s,e))}function h9(s){return(e,i,a)=>!a[0].length||(s(_u(a.input,a.index))!=Dt.Word||s(Xu(a.input,a.index))!=Dt.Word)&&(s(Xu(a.input,a.index+a[0].length))!=Dt.Word||s(_u(a.input,a.index+a[0].length))!=Dt.Word)}class m9 extends qE{nextMatch(e,i,a){let l=Ho(this.spec,e,a,e.doc.length).next();return l.done&&(l=Ho(this.spec,e,0,i).next()),l.done?null:l.value}prevMatchInRange(e,i,a){for(let l=1;;l++){let c=Math.max(i,a-l*1e4),u=Ho(this.spec,e,c,a),f=null;for(;!u.next().done;)f=u.value;if(f&&(c==i||f.from>c+10))return f;if(c==i)return null}}prevMatch(e,i,a){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,a,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(i,a)=>a=="$"?"$":a=="&"?e.match[0]:a!="0"&&+a<e.match.length?e.match[a]:i)}matchAll(e,i){let a=Ho(this.spec,e,0,e.doc.length),l=[];for(;!a.next().done;){if(l.length>=i)return null;l.push(a.value)}return l}highlight(e,i,a,l){let c=Ho(this.spec,e,Math.max(0,i-250),Math.min(a+250,e.doc.length));for(;!c.next().done;)l(c.value.from,c.value.to)}}const kl=Ye.define(),op=Ye.define(),qr=Jt.define({create(s){return new ap(ef(s).create(),null)},update(s,e){for(let i of e.effects)i.is(kl)?s=new ap(i.value.create(),s.panel):i.is(op)&&(s=new ap(s.query,i.value?lp:null));return s},provide:s=>Fs.from(s,e=>e.panel)});function wV(s){let e=s.field(qr,!1);return e?e.query.spec:ef(s)}function AV(s){var e;return((e=s.field(qr,!1))===null||e===void 0?void 0:e.panel)!=null}class ap{constructor(e,i){this.query=e,this.panel=i}}const p9=Ne.mark({class:"cm-searchMatch"}),g9=Ne.mark({class:"cm-searchMatch cm-searchMatch-selected"}),y9=Bt.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(qr))}update(s){let e=s.state.field(qr);(e!=s.startState.field(qr)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Ne.none;let{view:i}=this,a=new vi;for(let l=0,c=i.visibleRanges,u=c.length;l<u;l++){let{from:f,to:d}=c[l];for(;l<u-1&&d>c[l+1].from-2*250;)d=c[++l].to;s.highlight(i.state,f,d,(h,m)=>{let p=i.state.selection.ranges.some(b=>b.from==h&&b.to==m);a.add(h,m,p?g9:p9)})}return a.finish()}},{decorations:s=>s.decorations});function Tl(s){return e=>{let i=e.state.field(qr,!1);return i&&i.query.spec.valid?s(e,i):rw(e)}}const Qu=Tl((s,{query:e})=>{let{to:i}=s.state.selection.main,a=e.nextMatch(s.state,i,i);if(!a)return!1;let l=de.single(a.from,a.to),c=s.state.facet(js);return s.dispatch({selection:l,effects:[cp(s,a),c.scrollToMatch(l.main,s)],userEvent:"select.search"}),nw(s),!0}),qu=Tl((s,{query:e})=>{let{state:i}=s,{from:a}=i.selection.main,l=e.prevMatch(i,a,a);if(!l)return!1;let c=de.single(l.from,l.to),u=s.state.facet(js);return s.dispatch({selection:c,effects:[cp(s,l),u.scrollToMatch(c.main,s)],userEvent:"select.search"}),nw(s),!0}),v9=Tl((s,{query:e})=>{let i=e.matchAll(s.state,1e3);return!i||!i.length?!1:(s.dispatch({selection:de.create(i.map(a=>de.range(a.from,a.to))),userEvent:"select.search.matches"}),!0)}),b9=({state:s,dispatch:e})=>{let i=s.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:a,to:l}=i.main,c=[],u=0;for(let f=new Vo(s.doc,s.sliceDoc(a,l));!f.next().done;){if(c.length>1e3)return!1;f.value.from==a&&(u=c.length),c.push(de.range(f.value.from,f.value.to))}return e(s.update({selection:de.create(c,u),userEvent:"select.search.matches"})),!0},ew=Tl((s,{query:e})=>{let{state:i}=s,{from:a,to:l}=i.selection.main;if(i.readOnly)return!1;let c=e.nextMatch(i,a,a);if(!c)return!1;let u=[],f,d,h=[];if(c.from==a&&c.to==l&&(d=i.toText(e.getReplacement(c)),u.push({from:c.from,to:c.to,insert:d}),c=e.nextMatch(i,c.from,c.to),h.push(xe.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(a).number)+"."))),c){let m=u.length==0||u[0].from>=c.to?0:c.to-c.from-d.length;f=de.single(c.from-m,c.to-m),h.push(cp(s,c)),h.push(i.facet(js).scrollToMatch(f.main,s))}return s.dispatch({changes:u,selection:f,effects:h,userEvent:"input.replace"}),!0}),S9=Tl((s,{query:e})=>{if(s.state.readOnly)return!1;let i=e.matchAll(s.state,1e9).map(l=>{let{from:c,to:u}=l;return{from:c,to:u,insert:e.getReplacement(l)}});if(!i.length)return!1;let a=s.state.phrase("replaced $ matches",i.length)+".";return s.dispatch({changes:i,effects:xe.announce.of(a),userEvent:"input.replace.all"}),!0});function lp(s){return s.state.facet(js).createPanel(s)}function ef(s,e){var i,a,l,c,u;let f=s.selection.main,d=f.empty||f.to>f.from+100?"":s.sliceDoc(f.from,f.to);if(e&&!d)return e;let h=s.facet(js);return new QE({search:((i=e==null?void 0:e.literal)!==null&&i!==void 0?i:h.literal)?d:d.replace(/\n/g,"\\n"),caseSensitive:(a=e==null?void 0:e.caseSensitive)!==null&&a!==void 0?a:h.caseSensitive,literal:(l=e==null?void 0:e.literal)!==null&&l!==void 0?l:h.literal,regexp:(c=e==null?void 0:e.regexp)!==null&&c!==void 0?c:h.regexp,wholeWord:(u=e==null?void 0:e.wholeWord)!==null&&u!==void 0?u:h.wholeWord})}function tw(s){let e=pl(s,lp);return e&&e.dom.querySelector("[main-field]")}function nw(s){let e=tw(s);e&&e==s.root.activeElement&&e.select()}const rw=s=>{let e=s.state.field(qr,!1);if(e&&e.panel){let i=tw(s);if(i&&i!=s.root.activeElement){let a=ef(s.state,e.query.spec);a.valid&&s.dispatch({effects:kl.of(a)}),i.focus(),i.select()}}else s.dispatch({effects:[op.of(!0),e?kl.of(ef(s.state,e.query.spec)):Ye.appendConfig.of(up)]});return!0},iw=s=>{let e=s.state.field(qr,!1);if(!e||!e.panel)return!1;let i=pl(s,lp);return i&&i.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:op.of(!1)}),!0},x9=[{key:"Mod-f",run:rw,scope:"editor search-panel"},{key:"F3",run:Qu,shift:qu,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Qu,shift:qu,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:iw,scope:"editor search-panel"},{key:"Mod-Shift-l",run:b9},{key:"Mod-Alt-g",run:q3},{key:"Mod-d",run:u9,preventDefault:!0}];class E9{constructor(e){this.view=e;let i=this.query=e.state.field(qr).query.spec;this.commit=this.commit.bind(this),this.searchField=kt("input",{value:i.search,placeholder:Qn(e,"Find"),"aria-label":Qn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=kt("input",{value:i.replace,placeholder:Qn(e,"Replace"),"aria-label":Qn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=kt("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=kt("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=kt("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function a(l,c,u){return kt("button",{class:"cm-button",name:l,onclick:c,type:"button"},u)}this.dom=kt("div",{onkeydown:l=>this.keydown(l),class:"cm-search"},[this.searchField,a("next",()=>Qu(e),[Qn(e,"next")]),a("prev",()=>qu(e),[Qn(e,"previous")]),a("select",()=>v9(e),[Qn(e,"all")]),kt("label",null,[this.caseField,Qn(e,"match case")]),kt("label",null,[this.reField,Qn(e,"regexp")]),kt("label",null,[this.wordField,Qn(e,"by word")]),...e.state.readOnly?[]:[kt("br"),this.replaceField,a("replace",()=>ew(e),[Qn(e,"replace")]),a("replaceAll",()=>S9(e),[Qn(e,"replace all")])],kt("button",{name:"close",onclick:()=>iw(e),"aria-label":Qn(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new QE({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:kl.of(e)}))}keydown(e){M4(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?qu:Qu)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),ew(this.view))}update(e){for(let i of e.transactions)for(let a of i.effects)a.is(kl)&&!a.value.eq(this.query)&&this.setQuery(a.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(js).top}}function Qn(s,e){return s.state.phrase(e)}const tf=30,nf=/[\s\.,:;?!]/;function cp(s,{from:e,to:i}){let a=s.state.doc.lineAt(e),l=s.state.doc.lineAt(i).to,c=Math.max(a.from,e-tf),u=Math.min(l,i+tf),f=s.state.sliceDoc(c,u);if(c!=a.from){for(let d=0;d<tf;d++)if(!nf.test(f[d+1])&&nf.test(f[d])){f=f.slice(d);break}}if(u!=l){for(let d=f.length-1;d>f.length-tf;d--)if(!nf.test(f[d-1])&&nf.test(f[d])){f=f.slice(0,d);break}}return xe.announce.of(`${s.state.phrase("current match")}. ${f} ${s.state.phrase("on line")} ${a.number}.`)}const w9=xe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),up=[qr,yi.low(y9),w9];class sw{constructor(e,i,a,l){this.state=e,this.pos=i,this.explicit=a,this.view=l,this.abortListeners=[]}tokenBefore(e){let i=_t(this.state).resolveInner(this.pos,-1);for(;i&&e.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(e){let i=this.state.doc.lineAt(this.pos),a=Math.max(i.from,this.pos-250),l=i.text.slice(a-i.from,this.pos-i.from),c=l.search(lw(e,!1));return c<0?null:{from:a+c,to:this.pos,text:l.slice(c)}}get aborted(){return this.abortListeners==null}addEventListener(e,i){e=="abort"&&this.abortListeners&&this.abortListeners.push(i)}}function ow(s){let e=Object.keys(s).join(""),i=/\w/.test(e);return i&&(e=e.replace(/\w/g,"")),`[${i?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function A9(s){let e=Object.create(null),i=Object.create(null);for(let{label:l}of s){e[l[0]]=!0;for(let c=1;c<l.length;c++)i[l[c]]=!0}let a=ow(e)+ow(i)+"*$";return[new RegExp("^"+a),new RegExp(a)]}function O9(s){let e=s.map(l=>typeof l=="string"?{label:l}:l),[i,a]=e.every(l=>/^\w+$/.test(l.label))?[/\w*$/,/\w+$/]:A9(e);return l=>{let c=l.matchBefore(a);return c||l.explicit?{from:c?c.from:l.pos,options:e,validFor:i}:null}}function OV(s,e){return i=>{for(let a=syntaxTree(i.state).resolveInner(i.pos,-1);a;a=a.parent){if(s.indexOf(a.name)>-1)return e(i);if(a.type.isTop)break}return null}}function CV(s,e){return i=>{for(let a=syntaxTree(i.state).resolveInner(i.pos,-1);a;a=a.parent){if(s.indexOf(a.name)>-1)return null;if(a.type.isTop)break}return e(i)}}class aw{constructor(e,i,a,l){this.completion=e,this.source=i,this.match=a,this.score=l}}function us(s){return s.selection.main.from}function lw(s,e){var i;let{source:a}=s,l=e&&a[0]!="^",c=a[a.length-1]!="$";return!l&&!c?s:new RegExp(`${l?"^":""}(?:${a})${c?"$":""}`,(i=s.flags)!==null&&i!==void 0?i:s.ignoreCase?"i":"")}const fp=Vr.define();function C9(s,e,i,a){let{main:l}=s.selection,c=i-l.from,u=a-l.from;return Object.assign(Object.assign({},s.changeByRange(f=>f!=l&&i!=a&&s.sliceDoc(f.from+c,f.from+u)!=s.sliceDoc(i,a)?{range:f}:{changes:{from:f.from+c,to:a==l.from?f.to:f.from+u,insert:e},range:de.cursor(f.from+c+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const cw=new WeakMap;function k9(s){if(!Array.isArray(s))return s;let e=cw.get(s);return e||cw.set(s,e=O9(s)),e}const rf=Ye.define(),Pl=Ye.define();class T9{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<e.length;){let a=ln(e,i),l=lr(a);this.chars.push(a);let c=e.slice(i,i+l),u=c.toUpperCase();this.folded.push(ln(u==c?c.toLowerCase():u,0)),i+=l}this.astral=e.length!=this.chars.length}ret(e,i){return this.score=e,this.matched=i,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:i,folded:a,any:l,precise:c,byWord:u}=this;if(i.length==1){let C=ln(e,0),W=lr(C),B=W==e.length?0:-100;if(C!=i[0])if(C==a[0])B+=-200;else return null;return this.ret(B,[0,W])}let f=e.indexOf(this.pattern);if(f==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let d=i.length,h=0;if(f<0){for(let C=0,W=Math.min(e.length,200);C<W&&h<d;){let B=ln(e,C);(B==i[h]||B==a[h])&&(l[h++]=C),C+=lr(B)}if(h<d)return null}let m=0,p=0,b=!1,v=0,x=-1,E=-1,w=/[a-z]/.test(e),A=!0;for(let C=0,W=Math.min(e.length,200),B=0;C<W&&p<d;){let V=ln(e,C);f<0&&(m<d&&V==i[m]&&(c[m++]=C),v<d&&(V==i[v]||V==a[v]?(v==0&&(x=C),E=C+1,v++):v=0));let J,Z=V<255?V>=48&&V<=57||V>=97&&V<=122?2:V>=65&&V<=90?1:0:(J=Ah(V))!=J.toLowerCase()?1:J!=J.toUpperCase()?2:0;(!C||Z==1&&w||B==0&&Z!=0)&&(i[p]==V||a[p]==V&&(b=!0)?u[p++]=C:u.length&&(A=!1)),B=Z,C+=lr(V)}return p==d&&u[0]==0&&A?this.result(-100+(b?-200:0),u,e):v==d&&x==0?this.ret(-200-e.length+(E==e.length?0:-100),[0,E]):f>-1?this.ret(-700-e.length,[f,f+this.pattern.length]):v==d?this.ret(-900-e.length,[x,E]):p==d?this.result(-100+(b?-200:0)+-700+(A?0:-1100),u,e):i.length==2?null:this.result((l[0]?-700:0)+-200+-1100,l,e)}result(e,i,a){let l=[],c=0;for(let u of i){let f=u+(this.astral?lr(ln(a,u)):1);c&&l[c-1]==u?l[c-1]=f:(l[c++]=u,l[c++]=f)}return this.ret(e-a.length,l)}}class P9{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let i=e.slice(0,this.pattern.length),a=i==this.pattern?0:i.toLowerCase()==this.folded?-200:null;return a==null?null:(this.matched=[0,i.length],this.score=a+(e.length==this.pattern.length?0:-100),this)}}const fn=Te.define({combine(s){return Ar(s,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:D9,filterStrict:!1,compareCompletions:(e,i)=>e.label.localeCompare(i.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,i)=>e&&i,closeOnBlur:(e,i)=>e&&i,icons:(e,i)=>e&&i,tooltipClass:(e,i)=>a=>uw(e(a),i(a)),optionClass:(e,i)=>a=>uw(e(a),i(a)),addToOptions:(e,i)=>e.concat(i),filterStrict:(e,i)=>e||i})}});function uw(s,e){return s?e?s+" "+e:s:e}function D9(s,e,i,a,l,c){let u=s.textDirection==wt.RTL,f=u,d=!1,h="top",m,p,b=e.left-l.left,v=l.right-e.right,x=a.right-a.left,E=a.bottom-a.top;if(f&&b<Math.min(x,v)?f=!1:!f&&v<Math.min(x,b)&&(f=!0),x<=(f?b:v))m=Math.max(l.top,Math.min(i.top,l.bottom-E))-e.top,p=Math.min(400,f?b:v);else{d=!0,p=Math.min(400,(u?e.right:l.right-e.left)-30);let C=l.bottom-e.bottom;C>=E||C>e.top?m=i.bottom-e.top:(h="bottom",m=e.bottom-i.top)}let w=(e.bottom-e.top)/c.offsetHeight,A=(e.right-e.left)/c.offsetWidth;return{style:`${h}: ${m/w}px; max-width: ${p/A}px`,class:"cm-completionInfo-"+(d?u?"left-narrow":"right-narrow":f?"left":"right")}}function M9(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(i){let a=document.createElement("div");return a.classList.add("cm-completionIcon"),i.type&&a.classList.add(...i.type.split(/\s+/g).map(l=>"cm-completionIcon-"+l)),a.setAttribute("aria-hidden","true"),a},position:20}),e.push({render(i,a,l,c){let u=document.createElement("span");u.className="cm-completionLabel";let f=i.displayLabel||i.label,d=0;for(let h=0;h<c.length;){let m=c[h++],p=c[h++];m>d&&u.appendChild(document.createTextNode(f.slice(d,m)));let b=u.appendChild(document.createElement("span"));b.appendChild(document.createTextNode(f.slice(m,p))),b.className="cm-completionMatchedText",d=p}return d<f.length&&u.appendChild(document.createTextNode(f.slice(d))),u},position:50},{render(i){if(!i.detail)return null;let a=document.createElement("span");return a.className="cm-completionDetail",a.textContent=i.detail,a},position:80}),e.sort((i,a)=>i.position-a.position).map(i=>i.render)}function dp(s,e,i){if(s<=i)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let l=Math.floor(e/i);return{from:l*i,to:(l+1)*i}}let a=Math.floor((s-e)/i);return{from:s-(a+1)*i,to:s-a*i}}class I9{constructor(e,i,a){this.view=e,this.stateField=i,this.applyCompletion=a,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:d=>this.placeInfo(d),key:this},this.space=null,this.currentClass="";let l=e.state.field(i),{options:c,selected:u}=l.open,f=e.state.facet(fn);this.optionContent=M9(f),this.optionClass=f.optionClass,this.tooltipClass=f.tooltipClass,this.range=dp(c.length,u,f.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",d=>{let{options:h}=e.state.field(i).open;for(let m=d.target,p;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(p=/-(\d+)$/.exec(m.id))&&+p[1]<h.length){this.applyCompletion(e,h[+p[1]]),d.preventDefault();return}}),this.dom.addEventListener("focusout",d=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(fn).closeOnBlur&&d.relatedTarget!=e.contentDOM&&e.dispatch({effects:Pl.of(null)})}),this.showOptions(c,l.id)}mount(){this.updateSel()}showOptions(e,i){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,i,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var i;let a=e.state.field(this.stateField),l=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),a!=l){let{options:c,selected:u,disabled:f}=a.open;(!l.open||l.open.options!=c)&&(this.range=dp(c.length,u,e.state.facet(fn).maxRenderedOptions),this.showOptions(c,a.id)),this.updateSel(),f!=((i=l.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!f)}}updateTooltipClass(e){let i=this.tooltipClass(e);if(i!=this.currentClass){for(let a of this.currentClass.split(" "))a&&this.dom.classList.remove(a);for(let a of i.split(" "))a&&this.dom.classList.add(a);this.currentClass=i}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),i=e.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=dp(i.options.length,i.selected,this.view.state.facet(fn).maxRenderedOptions),this.showOptions(i.options,e.id)),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:a}=i.options[i.selected],{info:l}=a;if(!l)return;let c=typeof l=="string"?document.createTextNode(l):l(a);if(!c)return;"then"in c?c.then(u=>{u&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(u,a)}).catch(u=>Fn(this.view.state,u,"completion info")):this.addInfoPane(c,a)}}addInfoPane(e,i){this.destroyInfo();let a=this.info=document.createElement("div");if(a.className="cm-tooltip cm-completionInfo",e.nodeType!=null)a.appendChild(e),this.infoDestroy=null;else{let{dom:l,destroy:c}=e;a.appendChild(l),this.infoDestroy=c||null}this.dom.appendChild(a),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let i=null;for(let a=this.list.firstChild,l=this.range.from;a;a=a.nextSibling,l++)a.nodeName!="LI"||!a.id?l--:l==e?a.hasAttribute("aria-selected")||(a.setAttribute("aria-selected","true"),i=a):a.hasAttribute("aria-selected")&&a.removeAttribute("aria-selected");return i&&N9(this.list,i),i}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let i=this.dom.getBoundingClientRect(),a=this.info.getBoundingClientRect(),l=e.getBoundingClientRect(),c=this.space;if(!c){let u=this.dom.ownerDocument.defaultView||window;c={left:0,top:0,right:u.innerWidth,bottom:u.innerHeight}}return l.top>Math.min(c.bottom,i.bottom)-10||l.bottom<Math.max(c.top,i.top)+10?null:this.view.state.facet(fn).positionInfo(this.view,i,l,a,c,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,i,a){const l=document.createElement("ul");l.id=i,l.setAttribute("role","listbox"),l.setAttribute("aria-expanded","true"),l.setAttribute("aria-label",this.view.state.phrase("Completions"));let c=null;for(let u=a.from;u<a.to;u++){let{completion:f,match:d}=e[u],{section:h}=f;if(h){let b=typeof h=="string"?h:h.name;if(b!=c&&(u>a.from||a.from==0))if(c=b,typeof h!="string"&&h.header)l.appendChild(h.header(h));else{let v=l.appendChild(document.createElement("completion-section"));v.textContent=b}}const m=l.appendChild(document.createElement("li"));m.id=i+"-"+u,m.setAttribute("role","option");let p=this.optionClass(f);p&&(m.className=p);for(let b of this.optionContent){let v=b(f,this.view.state,this.view,d);v&&m.appendChild(v)}}return a.from&&l.classList.add("cm-completionListIncompleteTop"),a.to<e.length&&l.classList.add("cm-completionListIncompleteBottom"),l}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function R9(s,e){return i=>new I9(i,s,e)}function N9(s,e){let i=s.getBoundingClientRect(),a=e.getBoundingClientRect(),l=i.height/s.offsetHeight;a.top<i.top?s.scrollTop-=(i.top-a.top)/l:a.bottom>i.bottom&&(s.scrollTop+=(a.bottom-i.bottom)/l)}function fw(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function F9(s,e){let i=[],a=null,l=h=>{i.push(h);let{section:m}=h.completion;if(m){a||(a=[]);let p=typeof m=="string"?m:m.name;a.some(b=>b.name==p)||a.push(typeof m=="string"?{name:p}:m)}},c=e.facet(fn);for(let h of s)if(h.hasResult()){let m=h.result.getMatch;if(h.result.filter===!1)for(let p of h.result.options)l(new aw(p,h.source,m?m(p):[],1e9-i.length));else{let p=e.sliceDoc(h.from,h.to),b,v=c.filterStrict?new P9(p):new T9(p);for(let x of h.result.options)if(b=v.match(x.label)){let E=x.displayLabel?m?m(x,b.matched):[]:b.matched;l(new aw(x,h.source,E,b.score+(x.boost||0)))}}}if(a){let h=Object.create(null),m=0,p=(b,v)=>{var x,E;return((x=b.rank)!==null&&x!==void 0?x:1e9)-((E=v.rank)!==null&&E!==void 0?E:1e9)||(b.name<v.name?-1:1)};for(let b of a.sort(p))m-=1e5,h[b.name]=m;for(let b of i){let{section:v}=b.completion;v&&(b.score+=h[typeof v=="string"?v:v.name])}}let u=[],f=null,d=c.compareCompletions;for(let h of i.sort((m,p)=>p.score-m.score||d(m.completion,p.completion))){let m=h.completion;!f||f.label!=m.label||f.detail!=m.detail||f.type!=null&&m.type!=null&&f.type!=m.type||f.apply!=m.apply||f.boost!=m.boost?u.push(h):fw(h.completion)>fw(f)&&(u[u.length-1]=h),f=h.completion}return u}class Ko{constructor(e,i,a,l,c,u){this.options=e,this.attrs=i,this.tooltip=a,this.timestamp=l,this.selected=c,this.disabled=u}setSelected(e,i){return e==this.selected||e>=this.options.length?this:new Ko(this.options,dw(i,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,i,a,l,c){let u=F9(e,i);if(!u.length)return l&&e.some(d=>d.state==1)?new Ko(l.options,l.attrs,l.tooltip,l.timestamp,l.selected,!0):null;let f=i.facet(fn).selectOnOpen?0:-1;if(l&&l.selected!=f&&l.selected!=-1){let d=l.options[l.selected].completion;for(let h=0;h<u.length;h++)if(u[h].completion==d){f=h;break}}return new Ko(u,dw(a,f),{pos:e.reduce((d,h)=>h.hasResult()?Math.min(d,h.from):d,1e8),create:V9,above:c.aboveCursor},l?l.timestamp:Date.now(),f,!1)}map(e){return new Ko(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class sf{constructor(e,i,a){this.active=e,this.id=i,this.open=a}static start(){return new sf(j9,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:i}=e,a=i.facet(fn),c=(a.override||i.languageDataAt("autocomplete",us(i)).map(k9)).map(f=>(this.active.find(h=>h.source==f)||new qn(f,this.active.some(h=>h.state!=0)?1:0)).update(e,a));c.length==this.active.length&&c.every((f,d)=>f==this.active[d])&&(c=this.active);let u=this.open;u&&e.docChanged&&(u=u.map(e.changes)),e.selection||c.some(f=>f.hasResult()&&e.changes.touchesRange(f.from,f.to))||!L9(c,this.active)?u=Ko.build(c,i,this.id,u,a):u&&u.disabled&&!c.some(f=>f.state==1)&&(u=null),!u&&c.every(f=>f.state!=1)&&c.some(f=>f.hasResult())&&(c=c.map(f=>f.hasResult()?new qn(f.source,0):f));for(let f of e.effects)f.is(hp)&&(u=u&&u.setSelected(f.value,this.id));return c==this.active&&u==this.open?this:new sf(c,this.id,u)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?$9:B9}}function L9(s,e){if(s==e)return!0;for(let i=0,a=0;;){for(;i<s.length&&!s[i].hasResult;)i++;for(;a<e.length&&!e[a].hasResult;)a++;let l=i==s.length,c=a==e.length;if(l||c)return l==c;if(s[i++].result!=e[a++].result)return!1}}const $9={"aria-autocomplete":"list"},B9={};function dw(s,e){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(i["aria-activedescendant"]=s+"-"+e),i}const j9=[];function hw(s,e){if(s.isUserEvent("input.complete")){let a=s.annotation(fp);if(a&&e.activateOnCompletion(a))return 12}let i=s.isUserEvent("input.type");return i&&e.activateOnTyping?5:i?1:s.isUserEvent("delete.backward")?2:s.selection?8:s.docChanged?16:0}class qn{constructor(e,i,a=-1){this.source=e,this.state=i,this.explicitPos=a}hasResult(){return!1}update(e,i){let a=hw(e,i),l=this;(a&8||a&16&&this.touches(e))&&(l=new qn(l.source,0)),a&4&&l.state==0&&(l=new qn(this.source,1)),l=l.updateFor(e,a);for(let c of e.effects)if(c.is(rf))l=new qn(l.source,1,c.value?us(e.state):-1);else if(c.is(Pl))l=new qn(l.source,0);else if(c.is(mw))for(let u of c.value)u.source==l.source&&(l=u);return l}updateFor(e,i){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new qn(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(us(e.state))}}class Go extends qn{constructor(e,i,a,l,c){super(e,2,i),this.result=a,this.from=l,this.to=c}hasResult(){return!0}updateFor(e,i){var a;if(!(i&3))return this.map(e.changes);let l=this.result;l.map&&!e.changes.empty&&(l=l.map(l,e.changes));let c=e.changes.mapPos(this.from),u=e.changes.mapPos(this.to,1),f=us(e.state);if((this.explicitPos<0?f<=c:f<this.from)||f>u||!l||i&2&&us(e.startState)==this.from)return new qn(this.source,i&4?1:0);let d=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return W9(l.validFor,e.state,c,u)?new Go(this.source,d,l,c,u):l.update&&(l=l.update(l,c,u,new sw(e.state,f,d>=0)))?new Go(this.source,d,l,l.from,(a=l.to)!==null&&a!==void 0?a:us(e.state)):new qn(this.source,1,d)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Go(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new qn(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function W9(s,e,i,a){if(!s)return!1;let l=e.sliceDoc(i,a);return typeof s=="function"?s(l,i,a,e):lw(s,!0).test(l)}const mw=Ye.define({map(s,e){return s.map(i=>i.map(e))}}),hp=Ye.define(),on=Jt.define({create(){return sf.start()},update(s,e){return s.update(e)},provide:s=>[Au.from(s,e=>e.tooltip),xe.contentAttributes.from(s,e=>e.attrs)]});function mp(s,e){const i=e.completion.apply||e.completion.label;let a=s.state.field(on).active.find(l=>l.source==e.source);return a instanceof Go?(typeof i=="string"?s.dispatch(Object.assign(Object.assign({},C9(s.state,i,a.from,a.to)),{annotations:fp.of(e.completion)})):i(s,e.completion,a.from,a.to),!0):!1}const V9=R9(on,mp);function of(s,e="option"){return i=>{let a=i.state.field(on,!1);if(!a||!a.open||a.open.disabled||Date.now()-a.open.timestamp<i.state.facet(fn).interactionDelay)return!1;let l=1,c;e=="page"&&(c=dx(i,a.open.tooltip))&&(l=Math.max(2,Math.floor(c.dom.offsetHeight/c.dom.querySelector("li").offsetHeight)-1));let{length:u}=a.open.options,f=a.open.selected>-1?a.open.selected+l*(s?1:-1):s?0:u-1;return f<0?f=e=="page"?0:u-1:f>=u&&(f=e=="page"?u-1:0),i.dispatch({effects:hp.of(f)}),!0}}const z9=s=>{let e=s.state.field(on,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(fn).interactionDelay?!1:mp(s,e.open.options[e.open.selected])},U9=s=>s.state.field(on,!1)?(s.dispatch({effects:rf.of(!0)}),!0):!1,H9=s=>{let e=s.state.field(on,!1);return!e||!e.active.some(i=>i.state!=0)?!1:(s.dispatch({effects:Pl.of(null)}),!0)};class K9{constructor(e,i){this.active=e,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const G9=50,Y9=1e3,J9=Bt.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of s.state.field(on).active)e.state==1&&this.startQuery(e)}update(s){let e=s.state.field(on),i=s.state.facet(fn);if(!s.selectionSet&&!s.docChanged&&s.startState.field(on)==e)return;let a=s.transactions.some(c=>{let u=hw(c,i);return u&8||(c.selection||c.docChanged)&&!(u&3)});for(let c=0;c<this.running.length;c++){let u=this.running[c];if(a||u.updates.length+s.transactions.length>G9&&Date.now()-u.time>Y9){for(let f of u.context.abortListeners)try{f()}catch(d){Fn(this.view.state,d)}u.context.abortListeners=null,this.running.splice(c--,1)}else u.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(c=>c.effects.some(u=>u.is(rf)))&&(this.pendingStart=!0);let l=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(c=>c.state==1&&!this.running.some(u=>u.active.source==c.source))?setTimeout(()=>this.startUpdate(),l):-1,this.composing!=0)for(let c of s.transactions)c.isUserEvent("input.type")?this.composing=2:this.composing==2&&c.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,e=s.field(on);for(let i of e.active)i.state==1&&!this.running.some(a=>a.active.source==i.source)&&this.startQuery(i)}startQuery(s){let{state:e}=this.view,i=us(e),a=new sw(e,i,s.explicitPos==i,this.view),l=new K9(s,a);this.running.push(l),Promise.resolve(s.source(a)).then(c=>{l.context.aborted||(l.done=c||null,this.scheduleAccept())},c=>{this.view.dispatch({effects:Pl.of(null)}),Fn(this.view.state,c)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(fn).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],i=this.view.state.facet(fn);for(let a=0;a<this.running.length;a++){let l=this.running[a];if(l.done===void 0)continue;if(this.running.splice(a--,1),l.done){let u=new Go(l.active.source,l.active.explicitPos,l.done,l.done.from,(s=l.done.to)!==null&&s!==void 0?s:us(l.updates.length?l.updates[0].startState:this.view.state));for(let f of l.updates)u=u.update(f,i);if(u.hasResult()){e.push(u);continue}}let c=this.view.state.field(on).active.find(u=>u.source==l.active.source);if(c&&c.state==1)if(l.done==null){let u=new qn(l.active.source,0);for(let f of l.updates)u=u.update(f,i);u.state!=1&&e.push(u)}else this.startQuery(c)}e.length&&this.view.dispatch({effects:mw.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(on,!1);if(e&&e.tooltip&&this.view.state.facet(fn).closeOnBlur){let i=e.open&&dx(this.view,e.open.tooltip);(!i||!i.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Pl.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:rf.of(!1)}),20),this.composing=0}}}),Z9=typeof navigator=="object"&&/Win/.test(navigator.platform),_9=yi.highest(xe.domEventHandlers({keydown(s,e){let i=e.state.field(on,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||s.key.length>1||s.ctrlKey&&!(Z9&&s.altKey)||s.metaKey)return!1;let a=i.open.options[i.open.selected],l=i.active.find(u=>u.source==a.source),c=a.completion.commitCharacters||l.result.commitCharacters;return c&&c.indexOf(s.key)>-1&&mp(e,a),!1}})),pw=xe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class X9{constructor(e,i,a,l){this.field=e,this.line=i,this.from=a,this.to=l}}class pp{constructor(e,i,a){this.field=e,this.from=i,this.to=a}map(e){let i=e.mapPos(this.from,-1,MapMode.TrackDel),a=e.mapPos(this.to,1,MapMode.TrackDel);return i==null||a==null?null:new pp(this.field,i,a)}}class gp{constructor(e,i){this.lines=e,this.fieldPositions=i}instantiate(e,i){let a=[],l=[i],c=e.doc.lineAt(i),u=/^\s*/.exec(c.text)[0];for(let d of this.lines){if(a.length){let h=u,m=/^\t*/.exec(d)[0].length;for(let p=0;p<m;p++)h+=e.facet(indentUnit);l.push(i+h.length-m),d=h+d.slice(m)}a.push(d),i+=d.length+1}let f=this.fieldPositions.map(d=>new pp(d.field,l[d.line]+d.from,l[d.line]+d.to));return{text:a,ranges:f}}static parse(e){let i=[],a=[],l=[],c;for(let u of e.split(/\r\n?|\n/)){for(;c=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(u);){let f=c[1]?+c[1]:null,d=c[2]||c[3]||"",h=-1,m=d.replace(/\\[{}]/g,p=>p[1]);for(let p=0;p<i.length;p++)(f!=null?i[p].seq==f:m&&i[p].name==m)&&(h=p);if(h<0){let p=0;for(;p<i.length&&(f==null||i[p].seq!=null&&i[p].seq<f);)p++;i.splice(p,0,{seq:f,name:m}),h=p;for(let b of l)b.field>=h&&b.field++}l.push(new X9(h,a.length,c.index,c.index+m.length)),u=u.slice(0,c.index)+d+u.slice(c.index+c[0].length)}u=u.replace(/\\([{}])/g,(f,d,h)=>{for(let m of l)m.line==a.length&&m.from>h&&(m.from--,m.to--);return d}),a.push(u)}return new gp(a,l)}}let Q9=Ne.widget({widget:new class extends zr{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),q9=Ne.mark({class:"cm-snippetField"});class Yo{constructor(e,i){this.ranges=e,this.active=i,this.deco=Ne.set(e.map(a=>(a.from==a.to?Q9:q9).range(a.from,a.to)))}map(e){let i=[];for(let a of this.ranges){let l=a.map(e);if(!l)return null;i.push(l)}return new Yo(i,this.active)}selectionInsideField(e){return e.ranges.every(i=>this.ranges.some(a=>a.field==this.active&&a.from<=i.from&&a.to>=i.to))}}const Dl=Ye.define({map(s,e){return s&&s.map(e)}}),ej=Ye.define(),Ws=Jt.define({create(){return null},update(s,e){for(let i of e.effects){if(i.is(Dl))return i.value;if(i.is(ej)&&s)return new Yo(s.ranges,i.value)}return s&&e.docChanged&&(s=s.map(e.changes)),s&&e.selection&&!s.selectionInsideField(e.selection)&&(s=null),s},provide:s=>xe.decorations.from(s,e=>e?e.deco:Ne.none)});function yp(s,e){return de.create(s.filter(i=>i.field==e).map(i=>de.range(i.from,i.to)))}function tj(s){let e=gp.parse(s);return(i,a,l,c)=>{let{text:u,ranges:f}=e.instantiate(i.state,l),d={changes:{from:l,to:c,insert:Text.of(u)},scrollIntoView:!0,annotations:a?[fp.of(a),Transaction.userEvent.of("input.complete")]:void 0};if(f.length&&(d.selection=yp(f,0)),f.some(h=>h.field>0)){let h=new Yo(f,0),m=d.effects=[Dl.of(h)];i.state.field(Ws,!1)===void 0&&m.push(StateEffect.appendConfig.of([Ws,oj,aj,pw]))}i.dispatch(i.state.update(d))}}function gw(s){return({state:e,dispatch:i})=>{let a=e.field(Ws,!1);if(!a||s<0&&a.active==0)return!1;let l=a.active+s,c=s>0&&!a.ranges.some(u=>u.field==l+s);return i(e.update({selection:yp(a.ranges,l),effects:Dl.of(c?null:new Yo(a.ranges,l)),scrollIntoView:!0})),!0}}const nj=({state:s,dispatch:e})=>s.field(Ws,!1)?(e(s.update({effects:Dl.of(null)})),!0):!1,rj=gw(1),ij=gw(-1);function kV(s){let e=s.field(Ws,!1);return!!(e&&e.ranges.some(i=>i.field==e.active+1))}function TV(s){let e=s.field(Ws,!1);return!!(e&&e.active>0)}const sj=[{key:"Tab",run:rj,shift:ij},{key:"Escape",run:nj}],yw=Te.define({combine(s){return s.length?s[0]:sj}}),oj=yi.highest(ul.compute([yw],s=>s.facet(yw)));function PV(s,e){return Object.assign(Object.assign({},e),{apply:tj(s)})}const aj=xe.domEventHandlers({mousedown(s,e){let i=e.state.field(Ws,!1),a;if(!i||(a=e.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let l=i.ranges.find(c=>c.from<=a&&c.to>=a);return!l||l.field==i.active?!1:(e.dispatch({selection:yp(i.ranges,l.field),effects:Dl.of(i.ranges.some(c=>c.field>l.field)?new Yo(i.ranges,l.field):null),scrollIntoView:!0}),!0)}});function lj(s){let e=s.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${e}]+`,"ug")}catch{return new RegExp(`[w${e}]`,"g")}}function vw(s,e){return new RegExp(e(s.source),s.unicode?"u":"")}const bw=null;function cj(s){return bw[s]||(bw[s]=new WeakMap)}function Sw(s,e,i,a,l){for(let c=s.iterLines(),u=0;!c.next().done;){let{value:f}=c,d;for(e.lastIndex=0;d=e.exec(f);)if(!a[d[0]]&&u+d.index!=l&&(i.push({type:"text",label:d[0]}),a[d[0]]=!0,i.length>=2e3))return;u+=f.length+1}}function xw(s,e,i,a,l){let c=s.length>=1e3,u=c&&e.get(s);if(u)return u;let f=[],d=Object.create(null);if(s.children){let h=0;for(let m of s.children){if(m.length>=1e3)for(let p of xw(m,e,i,a-h,l-h))d[p.label]||(d[p.label]=!0,f.push(p));else Sw(m,i,f,d,l-h);h+=m.length+1}}else Sw(s,i,f,d,l);return c&&f.length<2e3&&e.set(s,f),f}const DV=s=>{let e=s.state.languageDataAt("wordChars",s.pos).join(""),i=lj(e),a=s.matchBefore(vw(i,u=>u+"$"));if(!a&&!s.explicit)return null;let l=a?a.from:s.pos,c=xw(s.state.doc,cj(e),i,5e4,l);return{from:l,options:c,validFor:vw(i,u=>"^"+u)}},Ml={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Vs=Ye.define({map(s,e){let i=e.mapPos(s,-1,Tn.TrackAfter);return i==null?void 0:i}}),vp=new class extends Ms{};vp.startSide=1,vp.endSide=-1;const Ew=Jt.define({create(){return it.empty},update(s,e){if(s=s.map(e.changes),e.selection){let i=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:a=>a>=i.from&&a<=i.to})}for(let i of e.effects)i.is(Vs)&&(s=s.update({add:[vp.range(i.value,i.value+1)]}));return s}});function uj(){return[dj,Ew]}const bp="()[]{}<>";function ww(s){for(let e=0;e<bp.length;e+=2)if(bp.charCodeAt(e)==s)return bp.charAt(e+1);return Ah(s<128?s:s+1)}function Aw(s,e){return s.languageDataAt("closeBrackets",e)[0]||Ml}const fj=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),dj=xe.inputHandler.of((s,e,i,a)=>{if((fj?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let l=s.state.selection.main;if(a.length>2||a.length==2&&lr(ln(a,0))==1||e!=l.from||i!=l.to)return!1;let c=mj(s.state,a);return c?(s.dispatch(c),!0):!1}),hj=[{key:"Backspace",run:({state:s,dispatch:e})=>{if(s.readOnly)return!1;let a=Aw(s,s.selection.main.head).brackets||Ml.brackets,l=null,c=s.changeByRange(u=>{if(u.empty){let f=pj(s.doc,u.head);for(let d of a)if(d==f&&af(s.doc,u.head)==ww(ln(d,0)))return{changes:{from:u.head-d.length,to:u.head+d.length},range:de.cursor(u.head-d.length)}}return{range:l=u}});return l||e(s.update(c,{scrollIntoView:!0,userEvent:"delete.backward"})),!l}}];function mj(s,e){let i=Aw(s,s.selection.main.head),a=i.brackets||Ml.brackets;for(let l of a){let c=ww(ln(l,0));if(e==l)return c==l?vj(s,l,a.indexOf(l+l+l)>-1,i):gj(s,l,c,i.before||Ml.before);if(e==c&&Ow(s,s.selection.main.from))return yj(s,l,c)}return null}function Ow(s,e){let i=!1;return s.field(Ew).between(0,s.doc.length,a=>{a==e&&(i=!0)}),i}function af(s,e){let i=s.sliceString(e,e+2);return i.slice(0,lr(ln(i,0)))}function pj(s,e){let i=s.sliceString(e-2,e);return lr(ln(i,0))==i.length?i:i.slice(1)}function gj(s,e,i,a){let l=null,c=s.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:i,from:u.to}],effects:Vs.of(u.to+e.length),range:de.range(u.anchor+e.length,u.head+e.length)};let f=af(s.doc,u.head);return!f||/\s/.test(f)||a.indexOf(f)>-1?{changes:{insert:e+i,from:u.head},effects:Vs.of(u.head+e.length),range:de.cursor(u.head+e.length)}:{range:l=u}});return l?null:s.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function yj(s,e,i){let a=null,l=s.changeByRange(c=>c.empty&&af(s.doc,c.head)==i?{changes:{from:c.head,to:c.head+i.length,insert:i},range:de.cursor(c.head+i.length)}:a={range:c});return a?null:s.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function vj(s,e,i,a){let l=a.stringPrefixes||Ml.stringPrefixes,c=null,u=s.changeByRange(f=>{if(!f.empty)return{changes:[{insert:e,from:f.from},{insert:e,from:f.to}],effects:Vs.of(f.to+e.length),range:de.range(f.anchor+e.length,f.head+e.length)};let d=f.head,h=af(s.doc,d),m;if(h==e){if(Cw(s,d))return{changes:{insert:e+e,from:d},effects:Vs.of(d+e.length),range:de.cursor(d+e.length)};if(Ow(s,d)){let b=i&&s.sliceDoc(d,d+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:d,to:d+b.length,insert:b},range:de.cursor(d+b.length)}}}else{if(i&&s.sliceDoc(d-2*e.length,d)==e+e&&(m=kw(s,d-2*e.length,l))>-1&&Cw(s,m))return{changes:{insert:e+e+e+e,from:d},effects:Vs.of(d+e.length),range:de.cursor(d+e.length)};if(s.charCategorizer(d)(h)!=Dt.Word&&kw(s,d,l)>-1&&!bj(s,d,e,l))return{changes:{insert:e+e,from:d},effects:Vs.of(d+e.length),range:de.cursor(d+e.length)}}return{range:c=f}});return c?null:s.update(u,{scrollIntoView:!0,userEvent:"input.type"})}function Cw(s,e){let i=_t(s).resolveInner(e+1);return i.parent&&i.from==e}function bj(s,e,i,a){let l=_t(s).resolveInner(e,-1),c=a.reduce((u,f)=>Math.max(u,f.length),0);for(let u=0;u<5;u++){let f=s.sliceDoc(l.from,Math.min(l.to,l.from+i.length+c)),d=f.indexOf(i);if(!d||d>-1&&a.indexOf(f.slice(0,d))>-1){let m=l.firstChild;for(;m&&m.from==l.from&&m.to-m.from>i.length+d;){if(s.sliceDoc(m.to-i.length,m.to)==i)return!1;m=m.firstChild}return!0}let h=l.to==e&&l.parent;if(!h)break;l=h}return!1}function kw(s,e,i){let a=s.charCategorizer(e);if(a(s.sliceDoc(e-1,e))!=Dt.Word)return e;for(let l of i){let c=e-l.length;if(s.sliceDoc(c,e)==l&&a(s.sliceDoc(c-1,c))!=Dt.Word)return c}return-1}function Sj(s={}){return[_9,on,fn.of(s),J9,xj,pw]}const Tw=[{key:"Ctrl-Space",run:U9},{key:"Escape",run:H9},{key:"ArrowDown",run:of(!0)},{key:"ArrowUp",run:of(!1)},{key:"PageDown",run:of(!0,"page")},{key:"PageUp",run:of(!1,"page")},{key:"Enter",run:z9}],xj=yi.highest(ul.computeN([fn],s=>s.facet(fn).defaultKeymap?[Tw]:[]));function IV(s){let e=s.field(on,!1);return e&&e.active.some(i=>i.state==1)?"pending":e&&e.active.some(i=>i.state!=0)?"active":null}const Pw=new WeakMap;function RV(s){var e;let i=(e=s.field(on,!1))===null||e===void 0?void 0:e.open;if(!i||i.disabled)return[];let a=Pw.get(i.options);return a||Pw.set(i.options,a=i.options.map(l=>l.completion)),a}function NV(s){var e;let i=(e=s.field(on,!1))===null||e===void 0?void 0:e.open;return i&&!i.disabled&&i.selected>=0?i.options[i.selected].completion:null}function FV(s){var e;let i=(e=s.field(on,!1))===null||e===void 0?void 0:e.open;return i&&!i.disabled&&i.selected>=0?i.selected:null}function LV(s){return hp.of(s)}class Ej{constructor(e,i,a){this.from=e,this.to=i,this.diagnostic=a}}class zs{constructor(e,i,a){this.diagnostics=e,this.panel=i,this.selected=a}static init(e,i,a){let l=e,c=a.facet(Zo).markerFilter;c&&(l=c(l,a));let u=Ne.set(l.map(f=>f.from==f.to||f.from==f.to-1&&a.doc.lineAt(f.from).to==f.from?Ne.widget({widget:new Tj(f),diagnostic:f}).range(f.from):Ne.mark({attributes:{class:"cm-lintRange cm-lintRange-"+f.severity+(f.markClass?" "+f.markClass:"")},diagnostic:f}).range(f.from,f.to)),!0);return new zs(u,i,Jo(u))}}function Jo(s,e=null,i=0){let a=null;return s.between(i,1e9,(l,c,{spec:u})=>{if(!(e&&u.diagnostic!=e))return a=new Ej(l,c,u.diagnostic),!1}),a}function Dw(s,e){let i=e.pos,a=e.end||i,l=s.state.facet(Zo).hideOn(s,i,a);if(l!=null)return l;let c=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(u=>u.is(lf))||s.changes.touchesRange(c.from,Math.max(c.to,a)))}function Mw(s,e){return s.field(Sn,!1)?e:e.concat(Ye.appendConfig.of(zw))}function $V(s,e){return{effects:Mw(s,[lf.of(e)])}}const lf=Ye.define(),Sp=Ye.define(),Iw=Ye.define(),Sn=Jt.define({create(){return new zs(Ne.none,null,null)},update(s,e){if(e.docChanged&&s.diagnostics.size){let i=s.diagnostics.map(e.changes),a=null,l=s.panel;if(s.selected){let c=e.changes.mapPos(s.selected.from,1);a=Jo(i,s.selected.diagnostic,c)||Jo(i,null,c)}!i.size&&l&&e.state.facet(Zo).autoPanel&&(l=null),s=new zs(i,l,a)}for(let i of e.effects)if(i.is(lf)){let a=e.state.facet(Zo).autoPanel?i.value.length?Il.open:null:s.panel;s=zs.init(i.value,a,e.state)}else i.is(Sp)?s=new zs(s.diagnostics,i.value?Il.open:null,s.selected):i.is(Iw)&&(s=new zs(s.diagnostics,s.panel,i.value));return s},provide:s=>[Fs.from(s,e=>e.panel),xe.decorations.from(s,e=>e.diagnostics)]});function BV(s){let e=s.field(Sn,!1);return e?e.diagnostics.size:0}const wj=Ne.mark({class:"cm-lintRange cm-lintRange-active"});function Aj(s,e,i){let{diagnostics:a}=s.state.field(Sn),l=[],c=2e8,u=0;a.between(e-(i<0?1:0),e+(i>0?1:0),(d,h,{spec:m})=>{e>=d&&e<=h&&(d==h||(e>d||i>0)&&(e<h||i<0))&&(l.push(m.diagnostic),c=Math.min(d,c),u=Math.max(h,u))});let f=s.state.facet(Zo).tooltipFilter;return f&&(l=f(l,s.state)),l.length?{pos:c,end:u,above:s.state.doc.lineAt(c).to<u,create(){return{dom:Rw(s,l)}}}:null}function Rw(s,e){return kt("ul",{class:"cm-tooltip-lint"},e.map(i=>$w(s,i,!1)))}const Oj=s=>{let e=s.state.field(Sn,!1);(!e||!e.panel)&&s.dispatch({effects:Mw(s.state,[Sp.of(!0)])});let i=pl(s,Il.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},Nw=s=>{let e=s.state.field(Sn,!1);return!e||!e.panel?!1:(s.dispatch({effects:Sp.of(!1)}),!0)},Cj=s=>{let e=s.state.field(Sn,!1);if(!e)return!1;let i=s.state.selection.main,a=e.diagnostics.iter(i.to+1);return!a.value&&(a=e.diagnostics.iter(0),!a.value||a.from==i.from&&a.to==i.to)?!1:(s.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:!0}),!0)},jV=s=>{let{state:e}=s,i=e.field(Sn,!1);if(!i)return!1;let a=e.selection.main,l,c,u,f;return i.diagnostics.between(0,e.doc.length,(d,h)=>{h<a.to&&(l==null||l<d)&&(l=d,c=h),(u==null||d>u)&&(u=d,f=h)}),u==null||l==null&&u==a.from?!1:(s.dispatch({selection:{anchor:l!=null?l:u,head:c!=null?c:f},scrollIntoView:!0}),!0)},kj=[{key:"Mod-Shift-m",run:Oj,preventDefault:!0},{key:"F8",run:Cj}],Fw=null,Zo=Te.define({combine(s){return Object.assign({sources:s.map(e=>e.source).filter(e=>e!=null)},Ar(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,i)=>e?i?a=>e(a)||i(a):e:i}))}});function WV(s,e={}){return[Zo.of({source:s,config:e}),Fw,zw]}function VV(s){let e=s.plugin(Fw);e&&e.force()}function Lw(s){let e=[];if(s)e:for(let{name:i}of s){for(let a=0;a<i.length;a++){let l=i[a];if(/[a-zA-Z]/.test(l)&&!e.some(c=>c.toLowerCase()==l.toLowerCase())){e.push(l);continue e}}e.push("")}return e}function $w(s,e,i){var a;let l=i?Lw(e.actions):[];return kt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},kt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(s):e.message),(a=e.actions)===null||a===void 0?void 0:a.map((c,u)=>{let f=!1,d=b=>{if(b.preventDefault(),f)return;f=!0;let v=Jo(s.state.field(Sn).diagnostics,e);v&&c.apply(s,v.from,v.to)},{name:h}=c,m=l[u]?h.indexOf(l[u]):-1,p=m<0?h:[h.slice(0,m),kt("u",h.slice(m,m+1)),h.slice(m+1)];return kt("button",{type:"button",class:"cm-diagnosticAction",onclick:d,onmousedown:d,"aria-label":` Action: ${h}${m<0?"":` (access key "${l[u]})"`}.`},p)}),e.source&&kt("div",{class:"cm-diagnosticSource"},e.source))}class Tj extends zr{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return kt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Bw{constructor(e,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=$w(e,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Il{constructor(e){this.view=e,this.items=[];let i=l=>{if(l.keyCode==27)Nw(this.view),this.view.focus();else if(l.keyCode==38||l.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(l.keyCode==40||l.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(l.keyCode==36)this.moveSelection(0);else if(l.keyCode==35)this.moveSelection(this.items.length-1);else if(l.keyCode==13)this.view.focus();else if(l.keyCode>=65&&l.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:c}=this.items[this.selectedIndex],u=Lw(c.actions);for(let f=0;f<u.length;f++)if(u[f].toUpperCase().charCodeAt(0)==l.keyCode){let d=Jo(this.view.state.field(Sn).diagnostics,c);d&&c.actions[f].apply(e,d.from,d.to)}}else return;l.preventDefault()},a=l=>{for(let c=0;c<this.items.length;c++)this.items[c].dom.contains(l.target)&&this.moveSelection(c)};this.list=kt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:a}),this.dom=kt("div",{class:"cm-panel-lint"},this.list,kt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Nw(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Sn).selected;if(!e)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==e.diagnostic)return i;return-1}update(){let{diagnostics:e,selected:i}=this.view.state.field(Sn),a=0,l=!1,c=null;for(e.between(0,this.view.state.doc.length,(u,f,{spec:d})=>{let h=-1,m;for(let p=a;p<this.items.length;p++)if(this.items[p].diagnostic==d.diagnostic){h=p;break}h<0?(m=new Bw(this.view,d.diagnostic),this.items.splice(a,0,m),l=!0):(m=this.items[h],h>a&&(this.items.splice(a,h-a),l=!0)),i&&m.diagnostic==i.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),c=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),a++});a<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)l=!0,this.items.pop();this.items.length==0&&(this.items.push(new Bw(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),l=!0),c?(this.list.setAttribute("aria-activedescendant",c.id),this.view.requestMeasure({key:this,read:()=>({sel:c.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:u,panel:f})=>{let d=f.height/this.list.offsetHeight;u.top<f.top?this.list.scrollTop-=(f.top-u.top)/d:u.bottom>f.bottom&&(this.list.scrollTop+=(u.bottom-f.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),l&&this.sync()}sync(){let e=this.list.firstChild;function i(){let a=e;e=a.nextSibling,a.remove()}for(let a of this.items)if(a.dom.parentNode==this.list){for(;e!=a.dom;)i();e=a.dom.nextSibling}else this.list.insertBefore(a.dom,e);for(;e;)i()}moveSelection(e){if(this.selectedIndex<0)return;let i=this.view.state.field(Sn),a=Jo(i.diagnostics,this.items[e].diagnostic);a&&this.view.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:!0,effects:Iw.of(a)})}static open(e){return new Il(e)}}function cf(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function uf(s){return cf(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Pj=xe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:uf("#d11")},".cm-lintRange-warning":{backgroundImage:uf("orange")},".cm-lintRange-info":{backgroundImage:uf("#999")},".cm-lintRange-hint":{backgroundImage:uf("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function jw(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}class Dj extends Kr{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((i,a)=>jw(i)<jw(a.severity)?a.severity:i,"hint")}toDOM(e){let i=document.createElement("div");i.className="cm-lint-marker cm-lint-marker-"+this.severity;let a=this.diagnostics,l=e.state.facet(ff).tooltipFilter;return l&&(a=l(a,e.state)),a.length&&(i.onmouseover=()=>Ij(e,i,a)),i}}function Mj(s,e){let i=a=>{let l=e.getBoundingClientRect();if(!(a.clientX>l.left-10&&a.clientX<l.right+10&&a.clientY>l.top-10&&a.clientY<l.bottom+10)){for(let c=a.target;c;c=c.parentNode)if(c.nodeType==1&&c.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",i),s.state.field(Vw)&&s.dispatch({effects:xp.of(null)})}};window.addEventListener("mousemove",i)}function Ij(s,e,i){function a(){let u=s.elementAtHeight(e.getBoundingClientRect().top+5-s.documentTop);s.coordsAtPos(u.from)&&s.dispatch({effects:xp.of({pos:u.from,above:!1,create(){return{dom:Rw(s,i),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,Mj(s,e)}let{hoverTime:l}=s.state.facet(ff),c=setTimeout(a,l);e.onmouseout=()=>{clearTimeout(c),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(c),c=setTimeout(a,l)}}function Rj(s,e){let i=Object.create(null);for(let l of e){let c=s.lineAt(l.from);(i[c.from]||(i[c.from]=[])).push(l)}let a=[];for(let l in i)a.push(new Dj(i[l]).range(+l));return it.of(a,!0)}const Nj=px({class:"cm-gutter-lint",markers:s=>s.state.field(Ww)}),Ww=Jt.define({create(){return it.empty},update(s,e){s=s.map(e.changes);let i=e.state.facet(ff).markerFilter;for(let a of e.effects)if(a.is(lf)){let l=a.value;i&&(l=i(l||[],e.state)),s=Rj(e.state.doc,l.slice(0))}return s}}),xp=Ye.define(),Vw=Jt.define({create(){return null},update(s,e){return s&&e.docChanged&&(s=Dw(e,s)?null:Object.assign(Object.assign({},s),{pos:e.changes.mapPos(s.pos)})),e.effects.reduce((i,a)=>a.is(xp)?a.value:i,s)},provide:s=>Au.from(s)}),Fj=xe.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:cf('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:cf('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:cf('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),zw=[Sn,xe.decorations.compute([Sn],s=>{let{selected:e,panel:i}=s.field(Sn);return!e||!i||e.from==e.to?Ne.none:Ne.set([wj.range(e.from,e.to)])}),v$(Aj,{hideOn:Dw}),Pj],ff=Te.define({combine(s){return Ar(s,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function zV(s={}){return[ff.of(s),Ww,Nj,Fj,Vw]}function UV(s,e){let i=s.field(Sn,!1);if(i&&i.diagnostics.size)for(let a=RangeSet.iter([i.diagnostics]);a.value;a.next())e(a.value.spec.diagnostic,a.from,a.to)}var Uw=function(e){e===void 0&&(e={});var{crosshairCursor:i=!1}=e,a=[];e.closeBracketsKeymap!==!1&&(a=a.concat(hj)),e.defaultKeymap!==!1&&(a=a.concat(_3)),e.searchKeymap!==!1&&(a=a.concat(x9)),e.historyKeymap!==!1&&(a=a.concat(s3)),e.foldKeymap!==!1&&(a=a.concat(cB)),e.completionKeymap!==!1&&(a=a.concat(Tw)),e.lintKeymap!==!1&&(a=a.concat(kj));var l=[];return e.lineNumbers!==!1&&l.push(C$()),e.highlightActiveLineGutter!==!1&&l.push(P$()),e.highlightSpecialChars!==!1&&l.push(Y4()),e.history!==!1&&l.push(_B()),e.foldGutter!==!1&&l.push(hB()),e.drawSelection!==!1&&l.push($4()),e.dropCursor!==!1&&l.push(z4()),e.allowMultipleSelections!==!1&&l.push(rt.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&l.push(Q$()),e.syntaxHighlighting!==!1&&l.push(zx(yB,{fallback:!0})),e.bracketMatching!==!1&&l.push(wB()),e.closeBrackets!==!1&&l.push(uj()),e.autocompletion!==!1&&l.push(Sj()),e.rectangularSelection!==!1&&l.push(a$()),i!==!1&&l.push(u$()),e.highlightActiveLine!==!1&&l.push(q4()),e.highlightSelectionMatches!==!1&&l.push(n9()),e.tabSize&&typeof e.tabSize=="number"&&l.push(Nu.of(" ".repeat(e.tabSize))),l.concat([ul.of(a.flat())]).filter(Boolean)},HV=function(e){e===void 0&&(e={});var i=[];e.defaultKeymap!==!1&&(i=i.concat(defaultKeymap)),e.historyKeymap!==!1&&(i=i.concat(historyKeymap));var a=[];return e.highlightSpecialChars!==!1&&a.push(highlightSpecialChars()),e.history!==!1&&a.push(history()),e.drawSelection!==!1&&a.push(drawSelection()),e.syntaxHighlighting!==!1&&a.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),a.concat([keymap.of(i.flat())]).filter(Boolean)};const Hw="#e5c07b",Ep="#e06c75",Kw="#56b6c2",Gw="#ffffff",Rl="#abb2bf",df="#7d8799",Yw="#61afef",Jw="#98c379",wp="#d19a66",Zw="#c678dd",_w="#21252b",Ap="#2c313a",Op="#282c34",hf="#353a42",Xw="#3E4451",Cp="#528bff",KV={chalky:Hw,coral:Ep,cyan:Kw,invalid:Gw,ivory:Rl,stone:df,malibu:Yw,sage:Jw,whiskey:wp,violet:Zw,darkBackground:_w,highlightBackground:Ap,background:Op,tooltipBackground:hf,selection:Xw,cursor:Cp},Lj=xe.theme({"&":{color:Rl,backgroundColor:Op},".cm-content":{caretColor:Cp},".cm-cursor, .cm-dropCursor":{borderLeftColor:Cp},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Xw},".cm-panels":{backgroundColor:_w,color:Rl},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Op,color:df,border:"none"},".cm-activeLineGutter":{backgroundColor:Ap},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:hf},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:hf,borderBottomColor:hf},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ap,color:Rl}}},{dark:!0}),$j=wl.define([{tag:ue.keyword,color:Zw},{tag:[ue.name,ue.deleted,ue.character,ue.propertyName,ue.macroName],color:Ep},{tag:[ue.function(ue.variableName),ue.labelName],color:Yw},{tag:[ue.color,ue.constant(ue.name),ue.standard(ue.name)],color:wp},{tag:[ue.definition(ue.name),ue.separator],color:Rl},{tag:[ue.typeName,ue.className,ue.number,ue.changed,ue.annotation,ue.modifier,ue.self,ue.namespace],color:Hw},{tag:[ue.operator,ue.operatorKeyword,ue.url,ue.escape,ue.regexp,ue.link,ue.special(ue.string)],color:Kw},{tag:[ue.meta,ue.comment],color:df},{tag:ue.strong,fontWeight:"bold"},{tag:ue.emphasis,fontStyle:"italic"},{tag:ue.strikethrough,textDecoration:"line-through"},{tag:ue.link,color:df,textDecoration:"underline"},{tag:ue.heading,fontWeight:"bold",color:Ep},{tag:[ue.atom,ue.bool,ue.special(ue.variableName)],color:wp},{tag:[ue.processingInstruction,ue.string,ue.inserted],color:Jw},{tag:ue.invalid,color:Gw}]),Bj=[Lj,zx($j)];var jj=xe.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Wj=function(e){e===void 0&&(e={});var{indentWithTab:i=!0,editable:a=!0,readOnly:l=!1,theme:c="light",placeholder:u="",basicSetup:f=!0}=e,d=[];switch(i&&d.unshift(ul.of([X3])),f&&(typeof f=="boolean"?d.unshift(Uw()):d.unshift(Uw(f))),u&&d.unshift(r$(u)),c){case"light":d.push(jj);break;case"dark":d.push(Bj);break;case"none":break;default:d.push(c);break}return a===!1&&d.push(xe.editable.of(!1)),l&&d.push(rt.readOnly.of(!0)),[...d]},Vj=s=>({line:s.state.doc.lineAt(s.state.selection.main.from),lineCount:s.state.doc.lines,lineBreak:s.state.lineBreak,length:s.state.doc.length,readOnly:s.state.readOnly,tabSize:s.state.tabSize,selection:s.state.selection,selectionAsSingle:s.state.selection.asSingle().main,ranges:s.state.selection.ranges,selectionCode:s.state.sliceDoc(s.state.selection.main.from,s.state.selection.main.to),selections:s.state.selection.ranges.map(e=>s.state.sliceDoc(e.from,e.to)),selectedText:s.state.selection.ranges.some(e=>!e.empty)}),Qw=Vr.define(),zj=[];function Uj(s){var{value:e,selection:i,onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:u,extensions:f=zj,autoFocus:d,theme:h="light",height:m=null,minHeight:p=null,maxHeight:b=null,width:v=null,minWidth:x=null,maxWidth:E=null,placeholder:w="",editable:A=!0,readOnly:C=!1,indentWithTab:W=!0,basicSetup:B=!0,root:V,initialState:J}=s,[Z,le]=(0,g.useState)(),[ce,he]=(0,g.useState)(),[ge,fe]=(0,g.useState)(),ye=xe.theme({"&":{height:m,minHeight:p,maxHeight:b,width:v,minWidth:x,maxWidth:E},"& .cm-scroller":{height:"100% !important"}}),be=xe.updateListener.of(Fe=>{if(Fe.docChanged&&typeof a=="function"&&!Fe.transactions.some(je=>je.annotation(Qw))){var ke=Fe.state.doc,Se=ke.toString();a(Se,Fe)}l&&l(Vj(Fe))}),ve=Wj({theme:h,editable:A,readOnly:C,placeholder:w,indentWithTab:W,basicSetup:B}),Me=[be,ye,...ve];return u&&typeof u=="function"&&Me.push(xe.updateListener.of(u)),Me=Me.concat(f),(0,g.useEffect)(()=>{if(Z&&!ge){var Fe={doc:e,selection:i,extensions:Me},ke=J?rt.fromJSON(J.json,Fe,J.fields):rt.create(Fe);if(fe(ke),!ce){var Se=new xe({state:ke,parent:Z,root:V});he(Se),c&&c(Se,ke)}}return()=>{ce&&(fe(void 0),he(void 0))}},[Z,ge]),(0,g.useEffect)(()=>le(s.container),[s.container]),(0,g.useEffect)(()=>()=>{ce&&(ce.destroy(),he(void 0))},[ce]),(0,g.useEffect)(()=>{d&&ce&&ce.focus()},[d,ce]),(0,g.useEffect)(()=>{ce&&ce.dispatch({effects:Ye.reconfigure.of(Me)})},[h,f,m,p,b,v,x,E,w,A,C,W,B,a,u]),(0,g.useEffect)(()=>{if(e!==void 0){var Fe=ce?ce.state.doc.toString():"";ce&&e!==Fe&&ce.dispatch({changes:{from:0,to:Fe.length,insert:e||""},annotations:[Qw.of(!0)]})}},[e,ce]),{state:ge,setState:fe,view:ce,setView:he,container:Z,setContainer:le}}var Hj=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],qw=(0,g.forwardRef)((s,e)=>{var{className:i,value:a="",selection:l,extensions:c=[],onChange:u,onStatistics:f,onCreateEditor:d,onUpdate:h,autoFocus:m,theme:p="light",height:b,minHeight:v,maxHeight:x,width:E,minWidth:w,maxWidth:A,basicSetup:C,placeholder:W,indentWithTab:B,editable:V,readOnly:J,root:Z,initialState:le}=s,ce=(0,WB.A)(s,Hj),he=(0,g.useRef)(null),{state:ge,view:fe,container:ye}=Uj({container:he.current,root:Z,value:a,autoFocus:m,theme:p,height:b,minHeight:v,maxHeight:x,width:E,minWidth:w,maxWidth:A,basicSetup:C,placeholder:W,indentWithTab:B,editable:V,readOnly:J,selection:l,onChange:u,onStatistics:f,onCreateEditor:d,onUpdate:h,extensions:c,initialState:le});if((0,g.useImperativeHandle)(e,()=>({editor:he.current,state:ge,view:fe}),[he,ye,ge,fe]),typeof a!="string")throw new Error("value must be typeof string but got "+typeof a);var be=typeof p=="string"?"cm-theme-"+p:"cm-theme";return(0,z.jsx)("div",(0,Ei.A)({ref:he,className:""+be+(i?" "+i:"")},ce))});qw.displayName="CodeMirror";const mf=qw;var pf=S(51419),Kj=S(22771);const Gj=64*1024,eA=32*1024,tA=(0,g.createContext)(void 0);function Yj(s){if(s.length>Gj)return window.btoa("<file too large>");try{return window.btoa(s)}catch{const i=new TextEncoder().encode(s),a=new Array;for(let l=0;l<i.length;l+=eA)a.push(String.fromCharCode(...i.slice(l,l+eA)));return window.btoa(a.join(""))}}function Jj(s){const e=(0,gt.gf)(dn.z),[i,a]=(0,g.useState)({results:[],selectedResult:void 0}),l=(0,g.useRef)(1),c=(0,g.useCallback)(h=>{a(m=>{const p=m.results.find(b=>b.id===h);return p===m.selectedResult?m:{results:m.results,selectedResult:p}})},[]),u=(0,g.useCallback)(h=>{a(m=>{var x;const p=m.results.findIndex(E=>E.id===h);if(p===-1)return m;const b=m.results.slice(),[v]=b.splice(p,1);return{results:b,selectedResult:((x=m.selectedResult)==null?void 0:x.id)===v.id?b[0]:m.selectedResult}})},[]),f=(0,g.useCallback)(async h=>{if(!e.dryRun)throw new Error("Scaffolder API does not support dry-run");const m=pf.Ay.parse(h.templateContent),b={...await e.dryRun({template:m,values:h.values,secrets:{},directoryContents:h.files.map(v=>({path:v.path,base64Content:Yj(v.content)}))}),id:l.current++};a(v=>{var x;return{results:[...v.results,b],selectedResult:(x=v.selectedResult)!=null?x:b}})},[e]),d=(0,g.useMemo)(()=>({...i,selectResult:c,deleteResult:u,execute:f}),[i,c,u,f]);return g.createElement(tA.Provider,{value:d},s.children)}function _o(){const s=(0,g.useContext)(tA);if(!s)throw new Error("must be used within a DryRunProvider");return s}const Zj=s=>(s+1)%Number.MAX_SAFE_INTEGER;function _j(){const[,s]=(0,g.useState)(0);return(0,g.useCallback)(()=>{s(Zj)},[])}const Xj=1024*1024,Qj="This file is too large to be displayed";class qj{constructor(e,i){ri(this,Us);ri(this,fs);ri(this,Bn);ri(this,Hs);Mr(this,Us,e),Mr(this,fs,i)}get path(){return dt(this,Us).path}get content(){var e;return(e=dt(this,Bn))!=null?e:Qj}updateContent(e){dt(this,Bn)!==void 0&&(Mr(this,Bn,e),dt(this,fs).call(this))}get dirty(){return dt(this,Bn)!==dt(this,Hs)}async save(){dt(this,Bn)!==void 0&&(await dt(this,Us).save(dt(this,Bn)),Mr(this,Hs,dt(this,Bn)),dt(this,fs).call(this))}async reload(){const e=await dt(this,Us).file();if(e.size>Xj){dt(this,Bn)!==void 0&&(Mr(this,Bn,void 0),Mr(this,Hs,void 0),dt(this,fs).call(this));return}const i=await e.text();dt(this,Bn)!==i&&(Mr(this,Bn,i),Mr(this,Hs,i),dt(this,fs).call(this))}}Us=new WeakMap,fs=new WeakMap,Bn=new WeakMap,Hs=new WeakMap;class e5{constructor(e){ri(this,Ll);ri(this,Qo,new Set);ri(this,wi,[]);ri(this,Ks);$p(this,"setSelectedFile",e=>{const i=dt(this,Ks),a=dt(this,wi).find(l=>l.path===e);i!==a&&(Mr(this,Ks,a),dt(this,qo).call(this))});ri(this,qo,()=>{dt(this,Qo).forEach(e=>e())});Mr(this,Ll,e)}get files(){return dt(this,wi)}get selectedFile(){return dt(this,Ks)}get dirty(){return dt(this,wi).some(e=>e.dirty)}async save(){await Promise.all(dt(this,wi).map(e=>e.save()))}async reload(){var l;const e=(l=dt(this,Ks))==null?void 0:l.path,i=await dt(this,Ll).listFiles(),a=await Promise.all(i.map(async c=>{const u=new qj(c,dt(this,qo));return await u.reload(),u}));dt(this,wi).length=0,dt(this,wi).push(...a),this.setSelectedFile(e),dt(this,qo).call(this)}subscribe(e){return dt(this,Qo).add(e),()=>{dt(this,Qo).delete(e)}}}Ll=new WeakMap,Qo=new WeakMap,wi=new WeakMap,Ks=new WeakMap,qo=new WeakMap;const nA=(0,g.createContext)(void 0);function kp(){const s=(0,g.useContext)(nA),e=_j();if((0,g.useEffect)(()=>s==null?void 0:s.subscribe(e),[s,e]),!s)throw new Error("must be used within a DirectoryEditorProvider");return s}function t5(s){const{directory:e}=s,[{result:i,error:a},{execute:l}]=(0,ph.Y)(async c=>{const u=new e5(c);await u.reload();const f=u.files.find(d=>d.path.match(/\.ya?ml$/));return f&&u.setSelectedFile(f.path),u});return(0,g.useEffect)(()=>{l(e)},[l,e]),a?g.createElement(Zs.b,{error:a}):i?g.createElement(nA.Provider,{value:i},s.children):g.createElement(Ti.k,null)}const n5=(0,M.A)({containerWrapper:{position:"relative",width:"100%",height:"100%"},container:{position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"auto"}});class r5 extends g.Component{constructor(){super(...arguments);$p(this,"state",{shouldRender:!0})}componentDidUpdate(i){i.invalidator!==this.props.invalidator&&this.setState({shouldRender:!0})}componentDidCatch(i){this.props.setErrorText(i.message),this.setState({shouldRender:!1})}render(){return this.state.shouldRender?this.props.children:null}}function Tp(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Nl(s){const{content:e,contentIsSpec:i,onDryRun:a,setErrorText:l,fieldExtensions:c=[],layouts:u=[]}=s,f=n5(),d=(0,gt.Q2)(),[h,m]=(0,g.useState)(),p=(0,g.useMemo)(()=>Object.fromEntries(c.map(({name:b,component:v})=>[b,v])),[c]);return(0,Kj.A)(()=>{try{if(!e){m(void 0);return}const b=pf.Ay.parseAllDocuments(e).filter(w=>w).map(w=>w.toJSON())[0];if(!Tp(b)){m(void 0);return}let v=b;if(!i){if(!(String(b.kind).toLocaleLowerCase("en-US")==="template")){m(void 0);return}v=Tp(b.spec)?b.spec:{}}const{parameters:x}=v;if(!Array.isArray(x)){l("Template parameters must be an array"),m(void 0);return}const E=Object.fromEntries(c.map(({name:w,validation:A})=>[w,A]));l(),m(x.flatMap(w=>Tp(w)?[{title:String(w.title),schema:w,validate:Vy(w,E,{apiHolder:d})}]:[]))}catch(b){l(b.message)}},250,[i,e,d]),h?g.createElement("div",{className:f.containerWrapper},g.createElement("div",{className:f.container},g.createElement(r5,{invalidator:h,setErrorText:l},g.createElement(f1,{manifest:{steps:h,title:"Template Editor"},extensions:c,components:p,onCreate:async b=>{await(a==null?void 0:a(b))},layouts:u})))):null}function i5(s){const{setErrorText:e,fieldExtensions:i=[],layouts:a}=s,l=_o(),c=kp(),{selectedFile:u}=c,f=async h=>{if(u)try{await l.execute({templateContent:u.content,values:h,files:c.files}),e()}catch(m){throw e(String(m.cause||m)),m}},d=u&&u.path.match(/\.ya?ml$/)?u.content:void 0;return g.createElement(Nl,{onDryRun:f,fieldExtensions:i,setErrorText:e,content:d,layouts:a})}Nl.DirectoryEditorDryRun=i5;const s5=(0,M.A)(s=>({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "controls controls"
      "fieldForm preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"},controls:{gridArea:"controls",display:"flex",flexFlow:"row nowrap",alignItems:"center",margin:s.spacing(1)},fieldForm:{gridArea:"fieldForm"},preview:{gridArea:"preview"}})),o5=({customFieldExtensions:s=[],onClose:e})=>{var x,E;const i=s5(),a=s.filter(w=>!!w.schema),[l,c]=(0,g.useState)(a[0]),[u,f]=(0,g.useState)({}),[d,h]=(0,g.useState)(Date.now()),m=(0,g.useMemo)(()=>{var w,A;return pf.Ay.stringify({parameters:[{title:`${l.name} Example`,properties:{[l.name]:{type:(A=(w=l.schema)==null?void 0:w.returnValue)==null?void 0:A.type,"ui:field":l.name,"ui:options":u}}}]})},[u,l]),p=(0,g.useMemo)(()=>Object.fromEntries(s.map(({name:w,component:A})=>[w,A])),[s]),b=(0,g.useCallback)(w=>{c(w),f({})},[f,c]),v=(0,g.useCallback)(w=>{f(w),h(Date.now())},[f,h]);return g.createElement("main",{className:i.root},g.createElement("div",{className:i.controls},g.createElement(k.A,{variant:"outlined",size:"small",fullWidth:!0},g.createElement(K.A,{id:"select-field-label"},"Choose Custom Field Extension"),g.createElement(oE.A,{value:l,label:"Choose Custom Field Extension",labelId:"select-field-label",onChange:w=>b(w.target.value)},a.map((w,A)=>g.createElement(zn.A,{key:A,value:w},w.name)))),g.createElement(En.A,{size:"medium",onClick:e,"aria-label":"Close"},g.createElement(Km.A,null))),g.createElement("div",{className:i.fieldForm},g.createElement(Pi.A,null,g.createElement(sE.A,{title:"Field Options"}),g.createElement(fo.A,null,g.createElement(u1,{showErrorList:!1,fields:{...p},noHtml5Validate:!0,formData:u,formContext:{fieldFormState:u},onSubmit:w=>v(w.formData),validator:Cv,schema:((x=l.schema)==null?void 0:x.uiOptions)||{},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"}},g.createElement(Hn.A,{variant:"contained",color:"primary",type:"submit",disabled:!((E=l.schema)!=null&&E.uiOptions)},"Apply"))))),g.createElement("div",{className:i.preview},g.createElement(Pi.A,null,g.createElement(sE.A,{title:"Example Template Spec"}),g.createElement(fo.A,null,g.createElement(mf,{readOnly:!0,theme:"dark",height:"100%",extensions:[Bo.define(Bu)],value:m}))),g.createElement(Nl,{key:d,content:m,contentIsSpec:!0,fieldExtensions:s,setErrorText:()=>null})))};var Xo=S(71677),rA=S(10010),iA=S(71108),sA=S(90689),oA=S(39850),aA=S(9546),lA=S(45065),a5=g.createContext({});const cA=a5;var l5={root:{padding:0,margin:0,listStyle:"none"}};function c5(s,e){if(s.length!==e.length)return!0;for(var i=0;i<s.length;i+=1)if(s[i]!==e[i])return!0;return!1}var uA=function(e,i,a){for(var l=i;l<e.length;l+=1)if(a===e[l])return l;return-1},u5=[],f5=[],d5=g.forwardRef(function(e,i){var a=e.children,l=e.classes,c=e.className,u=e.defaultCollapseIcon,f=e.defaultEndIcon,d=e.defaultExpanded,h=d===void 0?u5:d,m=e.defaultExpandIcon,p=e.defaultParentIcon,b=e.defaultSelected,v=b===void 0?f5:b,x=e.disableSelection,E=x===void 0?!1:x,w=e.multiSelect,A=w===void 0?!1:w,C=e.expanded,W=e.onNodeSelect,B=e.onNodeToggle,V=e.selected,J=(0,oA.A)(e,["children","classes","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disableSelection","multiSelect","expanded","onNodeSelect","onNodeToggle","selected"]),Z=g.useState(null),le=Z[0],ce=Z[1],he=g.useState(null),ge=he[0],fe=he[1],ye=g.useRef({}),be=g.useRef({}),ve=g.useRef([]),Me=(0,lA.A)({controlled:C,default:h,name:"TreeView",state:"expanded"}),Fe=(0,sA.A)(Me,2),ke=Fe[0],Se=Fe[1],je=(0,lA.A)({controlled:V,default:v,name:"TreeView",state:"selected"}),pt=(0,sA.A)(je,2),et=pt[0],ct=pt[1],Tt=g.useCallback(function(He){return Array.isArray(ke)?ke.indexOf(He)!==-1:!1},[ke]),vt=g.useCallback(function(He){return Array.isArray(et)?et.indexOf(He)!==-1:et===He},[et]),jt=function(Ae){return le===Ae},Ht=function(Ae){return ge===Ae},kr=function(Ae){var we=ve.current.indexOf(Ae);return we!==-1&&we+1<ve.current.length?ve.current[we+1]:null},ei=function(Ae){var we=ve.current.indexOf(Ae);return we!==-1&&we-1>=0?ve.current[we-1]:null},Ai=function(){return ve.current[ve.current.length-1]},Tr=function(){return ve.current[0]},ds=function(Ae){return ye.current[Ae].parent},Oi=function(Ae,we){var We=ve.current.indexOf(Ae),Ze=ve.current.indexOf(we),nt=Math.min(We,Ze),It=Math.max(We,Ze);return ve.current.slice(nt,It+1)},ti=function(Ae){Ae&&(ce(Ae),fe(Ae))},Pr=function(Ae){return ti(kr(Ae))},Ci=function(Ae){return ti(ei(Ae))},ni=function(){return ti(Tr())},hs=function(){return ti(Ai())},ea=function(Ae,we){var We,Ze,nt=we.toLowerCase(),It=[],Vt=[];Object.keys(be.current).forEach(function(Dr){var Lp=be.current[Dr],xA=ye.current[Dr],b6=xA.parent?Tt(xA.parent):!0;b6&&(It.push(Dr),Vt.push(Lp))}),We=It.indexOf(Ae)+1,We===ye.current.length&&(We=0),Ze=uA(Vt,We,nt),Ze===-1&&(Ze=uA(Vt,0,nt)),Ze>-1&&ti(It[Ze])},er=function(Ae){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ge,We;ke.indexOf(we)!==-1?(We=ke.filter(function(Ze){return Ze!==we}),ce(function(Ze){var nt=ye.current[Ze];return Ze&&(nt&&nt.parent?nt.parent.id:null)===we?we:Ze})):We=[we].concat(ke),B&&B(Ae,We),Se(We)},ms=function(Ae,we){var We=ye.current[we],Ze=ye.current[We.parent],nt;if(Ze)nt=Ze.children.filter(function(Dr){return!Tt(Dr)});else{var It=ye.current[-1].children;nt=It.filter(function(Dr){return!Tt(Dr)})}var Vt=ke.concat(nt);nt.length>0&&(Se(Vt),B&&B(Ae,Vt))},tr=g.useRef(null),ki=g.useRef(!1),dr=g.useRef([]),yf=function(Ae,we){var We=et,Ze=we.start,nt=we.next,It=we.current;!nt||!It||(dr.current.indexOf(It)===-1&&(dr.current=[]),ki.current?dr.current.indexOf(nt)!==-1?(We=We.filter(function(Vt){return Vt===Ze||Vt!==It}),dr.current=dr.current.filter(function(Vt){return Vt===Ze||Vt!==It})):(We.push(nt),dr.current.push(nt)):(We.push(nt),dr.current.push(It,nt)),W&&W(Ae,We),ct(We))},vf=function(Ae,we){var We=et,Ze=we.start,nt=we.end;ki.current&&(We=et.filter(function(Dr){return dr.current.indexOf(Dr)===-1}));var It=Oi(Ze,nt);dr.current=It;var Vt=We.concat(It);Vt=Vt.filter(function(Dr,Lp){return Vt.indexOf(Dr)===Lp}),W&&W(Ae,Vt),ct(Vt)},Rp=function(Ae,we){var We=[];et.indexOf(we)!==-1?We=et.filter(function(Ze){return Ze!==we}):We=[we].concat(et),W&&W(Ae,We),ct(We)},Np=function(Ae,we){var We=A?[we]:we;W&&W(Ae,We),ct(We)},$l=function(Ae,we){var We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return we?(We?Rp(Ae,we):Np(Ae,we),tr.current=we,ki.current=!1,dr.current=[],!0):!1},Dn=function(Ae,we){var We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ze=we.start,nt=Ze===void 0?tr.current:Ze,It=we.end,Vt=we.current;return We?yf(Ae,{start:nt,next:It,current:Vt}):vf(Ae,{start:nt,end:It}),ki.current=!0,!0},Re=function(Ae,we){tr.current||(tr.current=we);var We=ki.current?tr.current:we;return Dn(Ae,{start:We,end:Tr()})},Mt=function(Ae,we){tr.current||(tr.current=we);var We=ki.current?tr.current:we;return Dn(Ae,{start:We,end:Ai()})},Gs=function(Ae,we){return Dn(Ae,{end:kr(we),current:we},!0)},ta=function(Ae,we){return Dn(Ae,{end:ei(we),current:we},!0)},m6=function(Ae){return Dn(Ae,{start:Tr(),end:Ai()})},p6=function(Ae,we){var We=ye.current[Ae];ye.current[Ae]=(0,Ei.A)({},We,{children:we,id:Ae}),we.forEach(function(Ze){var nt=ye.current[Ze];ye.current[Ze]=(0,Ei.A)({},nt,{parent:Ae,id:Ze})})},Fp=g.useCallback(function(He){var Ae=ye.current[He],we=[];return Ae&&(we.push(He),Ae.children&&(we.concat(Ae.children),Ae.children.forEach(function(We){we.concat(Fp(We))}))),we},[]),yA=g.useCallback(function(He){var Ae=(0,Ei.A)({},be.current);He.forEach(function(we){Ae[we]&&delete Ae[we]}),be.current=Ae},[]),g6=g.useCallback(function(He){var Ae=Fp(He);yA(Ae);var we=(0,Ei.A)({},ye.current);Ae.forEach(function(We){var Ze=we[We];if(Ze){if(Ze.parent){var nt=we[Ze.parent];if(nt&&nt.children){var It=nt.children.filter(function(Vt){return Vt!==We});we[Ze.parent]=(0,Ei.A)({},nt,{children:It})}}delete we[We]}}),ye.current=we,fe(function(We){return We===He?null:We})},[Fp,yA]),y6=function(Ae,we){be.current[Ae]=we},vA=g.useRef([]),bA=g.useState(!1),SA=bA[0],v6=bA[1];g.useEffect(function(){var He=[];g.Children.forEach(a,function(Ae){g.isValidElement(Ae)&&Ae.props.nodeId&&He.push(Ae.props.nodeId)}),c5(vA.current,He)&&(ye.current[-1]={parent:null,children:He},He.forEach(function(Ae,we){we===0&&ce(Ae)}),ve.current=ye.current[-1].children,vA.current=He,v6(!0))},[a]),g.useEffect(function(){var He=function Ae(we){for(var We=[],Ze=0;Ze<we.length;Ze+=1){var nt=we[Ze];We.push(nt);var It=ye.current[nt].children;Tt(nt)&&It&&(We=We.concat(Ae(It)))}return We};SA&&(ve.current=He(ye.current[-1].children))},[ke,SA,Tt,a]);var Ys=function(){return!1};return g.createElement(cA.Provider,{value:{icons:{defaultCollapseIcon:u,defaultExpandIcon:m,defaultParentIcon:p,defaultEndIcon:f},focus:ti,focusFirstNode:ni,focusLastNode:hs,focusNextNode:Pr,focusPreviousNode:Ci,focusByFirstCharacter:ea,expandAllSiblings:ms,toggleExpansion:er,isExpanded:Tt,isFocused:Ht,isSelected:vt,selectNode:E?Ys:$l,selectRange:E?Ys:Dn,selectNextNode:E?Ys:Gs,selectPreviousNode:E?Ys:ta,rangeSelectToFirst:E?Ys:Re,rangeSelectToLast:E?Ys:Mt,selectAllNodes:E?Ys:m6,isTabbable:jt,multiSelect:A,getParent:ds,mapFirstChar:y6,addNodeToNodeMap:p6,removeNodeFromNodeMap:g6}},g.createElement("ul",(0,Ei.A)({role:"tree","aria-multiselectable":A,className:(0,aA.default)(l.root,c),ref:i},J),a))});const h5=(0,ji.A)(l5,{name:"MuiTreeView"})(d5);var m5=S(63798),fA=S(268),p5=S(19878),g5=function(e){return{root:{listStyle:"none",margin:0,padding:0,outline:0,WebkitTapHighlightColor:"transparent","&:focus > $content $label":{backgroundColor:e.palette.action.hover},"&$selected > $content $label":{backgroundColor:(0,fA.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)},"&$selected > $content $label:hover, &$selected:focus > $content $label":{backgroundColor:(0,fA.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},expanded:{},selected:{},group:{margin:0,padding:0,marginLeft:17},content:{width:"100%",display:"flex",alignItems:"center",cursor:"pointer"},iconContainer:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},label:{width:"100%",paddingLeft:4,position:"relative","&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}}},y5=function(e){return e&&e.length===1&&e.match(/\S/)},v5=g.forwardRef(function(e,i){var a=e.children,l=e.classes,c=e.className,u=e.collapseIcon,f=e.endIcon,d=e.expandIcon,h=e.icon,m=e.label,p=e.nodeId,b=e.onClick,v=e.onLabelClick,x=e.onIconClick,E=e.onFocus,w=e.onKeyDown,A=e.onMouseDown,C=e.TransitionComponent,W=C===void 0?Ue.A:C,B=e.TransitionProps,V=(0,oA.A)(e,["children","classes","className","collapseIcon","endIcon","expandIcon","icon","label","nodeId","onClick","onLabelClick","onIconClick","onFocus","onKeyDown","onMouseDown","TransitionComponent","TransitionProps"]),J=g.useContext(cA),Z=J.icons,le=J.focus,ce=J.focusFirstNode,he=J.focusLastNode,ge=J.focusNextNode,fe=J.focusPreviousNode,ye=J.focusByFirstCharacter,be=J.selectNode,ve=J.selectRange,Me=J.selectNextNode,Fe=J.selectPreviousNode,ke=J.rangeSelectToFirst,Se=J.rangeSelectToLast,je=J.selectAllNodes,pt=J.expandAllSiblings,et=J.toggleExpansion,ct=J.isExpanded,Tt=J.isFocused,vt=J.isSelected,jt=J.isTabbable,Ht=J.multiSelect,kr=J.getParent,ei=J.mapFirstChar,Ai=J.addNodeToNodeMap,Tr=J.removeNodeFromNodeMap,ds=g.useRef(null),Oi=g.useRef(null),ti=(0,p5.A)(ds,i),Pr=h,Ci=!!(Array.isArray(a)?a.length:a),ni=ct?ct(p):!1,hs=Tt?Tt(p):!1,ea=jt?jt(p):!1,er=vt?vt(p):!1,ms=Z||{},tr=(0,Jf.A)();Pr||(Ci?(ni?Pr=u||ms.defaultCollapseIcon:Pr=d||ms.defaultExpandIcon,Pr||(Pr=ms.defaultParentIcon)):Pr=f||ms.defaultEndIcon);var ki=function(Re){hs||le(p);var Mt=Ht&&(Re.shiftKey||Re.ctrlKey||Re.metaKey);Ci&&!Re.defaultPrevented&&!(Mt&&ct(p))&&et(Re,p),Mt?Re.shiftKey?ve(Re,{end:p}):be(Re,p,!0):be(Re,p),b&&b(Re)},dr=function(Re){(Re.shiftKey||Re.ctrlKey||Re.metaKey)&&Re.preventDefault(),A&&A(Re)},yf=function(Re){return Ci&&(ni?ge(p):et(Re)),!0},vf=function(Re){if(ni)return et(Re,p),!0;var Mt=kr(p);return Mt?(le(Mt),!0):!1},Rp=function(Re){var Mt=!1,Gs=Re.key;if(!(Re.altKey||Re.currentTarget!==Re.target)){var ta=Re.ctrlKey||Re.metaKey;switch(Gs){case" ":ds.current===Re.currentTarget&&(Ht&&Re.shiftKey?Mt=ve(Re,{end:p}):Ht?Mt=be(Re,p,!0):Mt=be(Re,p)),Re.stopPropagation();break;case"Enter":ds.current===Re.currentTarget&&Ci&&(et(Re),Mt=!0),Re.stopPropagation();break;case"ArrowDown":Ht&&Re.shiftKey&&Me(Re,p),ge(p),Mt=!0;break;case"ArrowUp":Ht&&Re.shiftKey&&Fe(Re,p),fe(p),Mt=!0;break;case"ArrowRight":tr.direction==="rtl"?Mt=vf(Re):Mt=yf(Re);break;case"ArrowLeft":tr.direction==="rtl"?Mt=yf(Re):Mt=vf(Re);break;case"Home":Ht&&ta&&Re.shiftKey&&ke(Re,p),ce(),Mt=!0;break;case"End":Ht&&ta&&Re.shiftKey&&Se(Re,p),he(),Mt=!0;break;default:Gs==="*"?(pt(Re,p),Mt=!0):Ht&&ta&&Gs.toLowerCase()==="a"?Mt=je(Re):!ta&&!Re.shiftKey&&y5(Gs)&&(ye(p,Gs),Mt=!0)}Mt&&(Re.preventDefault(),Re.stopPropagation()),w&&w(Re)}},Np=function(Re){!hs&&Re.currentTarget===Re.target&&le(p),E&&E(Re)};g.useEffect(function(){if(Ai){var Dn=[];g.Children.forEach(a,function(Re){g.isValidElement(Re)&&Re.props.nodeId&&Dn.push(Re.props.nodeId)}),Ai(p,Dn)}},[a,p,Ai]),g.useEffect(function(){if(Tr)return function(){Tr(p)}},[p,Tr]),g.useEffect(function(){ei&&m&&ei(p,Oi.current.textContent.substring(0,1).toLowerCase())},[ei,p,m]),g.useEffect(function(){hs&&ds.current.focus()},[hs]);var $l;return Ht?$l=er:er&&($l=!0),g.createElement("li",(0,Ei.A)({className:(0,aA.default)(l.root,c,ni&&l.expanded,er&&l.selected),role:"treeitem",onKeyDown:Rp,onFocus:Np,"aria-expanded":Ci?ni:null,"aria-selected":$l,ref:ti,tabIndex:ea?0:-1},V),g.createElement("div",{className:l.content,onClick:ki,onMouseDown:dr,ref:Oi},g.createElement("div",{onClick:x,className:l.iconContainer},Pr),g.createElement(Ve.A,{onClick:v,component:"div",className:l.label},m)),a&&g.createElement(W,(0,Ei.A)({unmountOnExit:!0,className:l.group,in:ni,component:"ul",role:"group"},B),a))});const dA=(0,ji.A)(g5,{name:"MuiTreeItem"})(v5),b5=(0,M.A)({root:{whiteSpace:"nowrap",overflowY:"auto"}});function S5(s){const e={type:"directory",name:"",path:"",children:[]};for(const i of s.slice().sort()){const a=i.split("/");let l=e;for(let c=0;c<a.length;c++){const u=a[c];if(u==="")throw new Error("Invalid path part: ''");const f=a.slice(0,c+1).join("/"),d=l.children.find(h=>h.name===u);if((d==null?void 0:d.type)==="file")throw new Error(`Duplicate filename at '${f}'`);if(d)l=d;else if(c<a.length-1){const h={type:"directory",name:u,path:f,children:[]},m=l.children.findIndex(p=>p.type==="file");l.children.splice(m,0,h),l=h}else l.children.push({type:"file",name:u,path:f})}}return e.children}function hA({entry:s}){return s.type==="file"?g.createElement(dA,{nodeId:s.path,label:s.name}):g.createElement(dA,{nodeId:s.path,label:s.name},s.children.map(e=>g.createElement(hA,{key:e.path,entry:e})))}function mA(s){const e=b5(),i=(0,g.useMemo)(()=>S5(s.filePaths),[s.filePaths]);return g.createElement(h5,{selected:s.selected,className:e.root,defaultCollapseIcon:g.createElement(ht.A,null),defaultExpandIcon:g.createElement(m5.A,null),onNodeSelect:(a,l)=>{s.onSelect&&s.filePaths.includes(l)&&s.onSelect(l)}},i.map(a=>g.createElement(hA,{key:a.path,entry:a})))}const x5=(0,M.A)(s=>({button:{padding:s.spacing(1)},buttons:{display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"flex-start"},buttonsGap:{flex:"1 1 auto"},buttonsDivider:{marginBottom:s.spacing(1)}}));function E5(s){var c,u;const e=x5(),i=kp(),a=i.files.filter(f=>f.dirty),l=()=>{s.onClose&&(a.length>0&&!window.confirm("Are you sure? Unsaved changes will be lost")||s.onClose())};return g.createElement(g.Fragment,null,g.createElement("div",{className:e.buttons},g.createElement(Xo.Ay,{title:"Save all files"},g.createElement(En.A,{className:e.button,disabled:i.files.every(f=>!f.dirty),onClick:()=>i.save()},g.createElement(iA.A,null))),g.createElement(Xo.Ay,{title:"Reload directory"},g.createElement(En.A,{className:e.button,onClick:()=>i.reload()},g.createElement(rA.A,null))),g.createElement("div",{className:e.buttonsGap}),g.createElement(Xo.Ay,{title:"Close directory"},g.createElement(En.A,{className:e.button,onClick:l},g.createElement(Km.A,null)))),g.createElement(si.A,{className:e.buttonsDivider}),g.createElement(mA,{selected:(u=(c=i.selectedFile)==null?void 0:c.path)!=null?u:"",onSelect:i.setSelectedFile,filePaths:i.files.map(f=>f.path)}))}function w5(s=!1){const e=(0,g.useRef)(s),i=(0,g.useCallback)(()=>e.current,[]);return(0,g.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),i}var pA=S(16261),Fl=S(71039);function A5(s,...e){const i=w5(),a=(0,pA.J)(e[1]),l=(0,g.useMemo)(()=>function(...c){i()&&(typeof a.current=="function"?a.current.apply(this,c):typeof a.current.handleEvent=="function"&&a.current.handleEvent.apply(this,c))},[]);(0,g.useEffect)(()=>{const c=O5(s)?s.current:s;if(!c)return;const u=e.slice(2);return(0,Fl.on)(c,e[0],l,...u),()=>{(0,Fl.AU)(c,e[0],l,...u)}},[s,e[0]])}function O5(s){return s!==null&&typeof s=="object"&&(0,Fl.mQ)(s,"current")}var C5=S(99416);const k5=s=>typeof s=="function"?s:typeof s=="string"?e=>e.key===s:s?Fl.ud:Fl.HD,T5=C5.Bd?window:null;function P5(s,e,i=[],a={}){const{event:l="keydown",target:c=T5,eventOptions:u}=a,f=(0,pA.J)(e),d=(0,g.useMemo)(()=>{const h=k5(s);return function(m){h(m)&&f.current.call(this,m)}},i);A5(c,l,d,u)}const D5=(0,M.A)(s=>({container:{position:"relative",width:"100%",height:"100%"},codeMirror:{position:"absolute",top:0,bottom:0,left:0,right:0},errorPanel:{color:s.palette.error.main,lineHeight:2,margin:s.spacing(0,1)},floatingButtons:{position:"absolute",top:s.spacing(1),right:s.spacing(3)},floatingButton:{padding:s.spacing(1)}}));function gf(s){const{errorText:e}=s,i=D5(),a=(0,g.useMemo)(()=>{if(!e)return Fs.of(null);const l=document.createElement("div");return l.classList.add(i.errorPanel),l.textContent=e,Fs.of(()=>({dom:l,bottom:!0}))},[i,e]);return P5(l=>l.key==="s"&&(l.ctrlKey||l.metaKey),l=>{l.preventDefault(),s.onSave&&s.onSave()}),g.createElement("div",{className:i.container},g.createElement(mf,{className:i.codeMirror,theme:"dark",height:"100%",extensions:[Bo.define(Bu),a],value:s.content,onChange:s.onUpdate}),(s.onSave||s.onReload)&&g.createElement("div",{className:i.floatingButtons},g.createElement(st.A,null,s.onSave&&g.createElement(Xo.Ay,{title:"Save file"},g.createElement(En.A,{className:i.floatingButton,onClick:()=>{var l;return(l=s.onSave)==null?void 0:l.call(s)}},g.createElement(iA.A,null))),s.onReload&&g.createElement(Xo.Ay,{title:"Reload file"},g.createElement(En.A,{className:i.floatingButton,onClick:()=>{var l;return(l=s.onReload)==null?void 0:l.call(s)}},g.createElement(rA.A,null))))))}function M5(s){var a,l;const e=kp(),i=(a=e.selectedFile)!=null&&a.dirty?{onSave:()=>e.save(),onReload:()=>e.reload()}:{onReload:()=>e.reload()};return g.createElement(gf,{errorText:s.errorText,content:(l=e.selectedFile)==null?void 0:l.content,onUpdate:c=>{var u;return(u=e.selectedFile)==null?void 0:u.updateContent(c)},...i})}gf.DirectoryEditor=M5;function I5(s){const e=(0,g.useRef)();return(0,g.useEffect)(()=>{e.current=s}),e.current}var R5=S(65569),gA=S(62461),N5=S(39590),F5=S(12326);function L5(s,e){const i=document.createElement("a");i.href=URL.createObjectURL(s),i.download=e,i.click(),URL.revokeObjectURL(i.href),i.remove()}const $5=(0,M.A)(s=>({root:{overflowY:"auto",background:s.palette.background.default},iconSuccess:{minWidth:0,marginRight:s.spacing(1),color:s.palette.status.ok},iconFailure:{minWidth:0,marginRight:s.spacing(1),color:s.palette.status.error}}));function B5(){const s=$5(),e=_o();return g.createElement(qs.A,{className:s.root,dense:!0},e.results.map(i=>{var u;const a=i.log.some(f=>f.body.status==="failed");let l=!1;async function c(){l=!0,await j5(i.directoryContents,`dry-run-result-${i.id}.zip`),l=!1}return g.createElement(Oa.A,{button:!0,key:i.id,selected:((u=e.selectedResult)==null?void 0:u.id)===i.id,onClick:()=>e.selectResult(i.id)},g.createElement(Wn.A,{className:a?s.iconFailure:s.iconSuccess},a?g.createElement(gh.A,null):g.createElement(gA.A,null)),g.createElement(Vn.A,{primary:`Result ${i.id}`}),g.createElement(R5.A,null,g.createElement(En.A,{edge:"end","aria-label":"download",title:"Download as .zip",disabled:l,onClick:()=>c()},g.createElement(F5.A,null)),g.createElement(En.A,{edge:"end","aria-label":"delete",title:"Delete result",onClick:()=>e.deleteResult(i.id)},g.createElement(N5.A,null))))}))}async function j5(s,e){const{default:i}=await S.e(2461).then(S.t.bind(S,32461,23)),a=new i;for(const c of s){const u=atob(c.base64Content);await a.file(c.path,u)}const l=await a.generateAsync({type:"blob"});L5(l,e)}var Pp=S(38605),W5=S(31653);const V5=(0,M.A)(s=>({root:{display:"grid",gridTemplateColumns:"280px auto 3fr",gridTemplateRows:"1fr"},child:{overflowY:"auto",height:"100%",minHeight:0},firstChild:{background:s.palette.background.paper}}));function Dp(s){const e=V5(),i=g.Children.toArray(s.children);if(i.length!==2)throw new Error("must have exactly 2 children");return g.createElement("div",{className:e.root},g.createElement("div",{className:Qt()(e.child,e.firstChild)},i[0]),g.createElement(si.A,{orientation:"horizontal"}),g.createElement("div",{className:e.child},i[1]))}const z5=(0,M.A)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),U5=s=>{const{href:e,text:i,Icon:a,...l}=s,c=z5();return g.createElement(Ce.A,{container:!0,direction:"row",spacing:1},g.createElement(Ce.A,{item:!0},g.createElement(Ve.A,{component:"div",className:c.svgIcon},a?g.createElement(a,null):g.createElement(ma.A,null))),g.createElement(Ce.A,{item:!0},g.createElement(na.N_,{to:e,...l},i||e)))},H5=({output:s})=>{const{links:e=[]}=s,i=(0,da.n)(),a=(0,bt.S)(E1.s),l=c=>{var u;return c&&(u=i.getSystemIcon(c))!=null?u:ma.A};return g.createElement(pe.A,{px:3,pb:3},e.filter(({url:c,entityRef:u})=>c||u).map(({url:c,entityRef:u,title:f,icon:d})=>{if(u){const h=(0,br.KU)(u,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),m=a(h);return{title:f,icon:d,url:m}}return{title:f,icon:d,url:c}}).map(({url:c,title:u,icon:f},d)=>g.createElement(U5,{key:`output-link-${d}`,href:c,text:u!=null?u:c,Icon:l(f),target:"_blank"})))};var K5=S(3380);const G5=(0,M.A)(s=>(0,Bi.A)({root:{width:"100%"},button:{marginBottom:s.spacing(2),marginLeft:s.spacing(2)},actionsContainer:{marginBottom:s.spacing(2)},resetContainer:{padding:s.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),Y5=(0,M.A)(s=>(0,Bi.A)({root:{color:s.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:s.palette.status.ok},error:{color:s.palette.status.error}})),J5=({step:s})=>{const[e,i]=(0,g.useState)("");return O1(()=>{if(!s.startedAt){i("");return}const a=s.endedAt?Ke.fromISO(s.endedAt):Ke.local(),l=Ke.fromISO(s.startedAt),c=Pt.fromDateTimes(l,a).toDuration().valueOf();i(Gf()(c,{round:!0}))},1e3),g.createElement(Ve.A,{variant:"caption"},e)};function Z5(s){const e=Y5(),{active:i,completed:a,error:l}=s,c=()=>i?g.createElement(A1.A,{size:"24px"}):a?g.createElement(gA.A,null):l?g.createElement(gh.A,null):g.createElement(K5.A,null);return g.createElement("div",{className:Qt()(e.root,{[e.completed]:a,[e.error]:l})},c())}const _5=(0,g.memo)(s=>{const{steps:e,currentStepId:i,onUserStepChange:a}=s,l=G5(s);return g.createElement("div",{className:l.root},g.createElement(Zf.A,{activeStep:e.findIndex(c=>c.id===i),orientation:"vertical",nonLinear:!0},e.map((c,u)=>{const f=c.status==="cancelled",d=c.status==="processing",h=c.status==="completed",m=c.status==="failed",p=c.status==="skipped";return g.createElement(ac.A,{key:String(u),expanded:!0},g.createElement(w1.A,{onClick:()=>a(c.id)},g.createElement(lc.A,{StepIconProps:{completed:h,error:m||f,active:d},StepIconComponent:Z5,className:l.stepWrapper},g.createElement("div",{className:l.labelWrapper},g.createElement(Ve.A,{variant:"subtitle2"},c.name),p?g.createElement(Ve.A,{variant:"caption"},"Skipped"):g.createElement(J5,{step:c})))))})))}),Mp=(0,M.A)({root:{display:"flex",flexFlow:"column nowrap"},contentWrapper:{flex:1,position:"relative"},content:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex","& > *":{flex:1}},codeMirror:{height:"100%",overflowY:"auto"}});function X5(){const s=Mp(),{selectedResult:e}=_o(),[i,a]=(0,g.useState)(""),l=e==null?void 0:e.directoryContents.find(c=>c.path===i);return(0,g.useEffect)(()=>{if(e){const[c]=e.directoryContents;a(c?c.path:"")}},[e]),e?g.createElement(Dp,null,g.createElement(mA,{selected:i,onSelect:a,filePaths:e.directoryContents.map(c=>c.path)}),g.createElement(mf,{className:s.codeMirror,theme:"dark",height:"100%",extensions:[Bo.define(Bu)],readOnly:!0,value:l!=null&&l.base64Content?atob(l.base64Content):""})):null}function Q5(){var c,u;const{selectedResult:s}=_o(),[e,i]=(0,g.useState)(),a=(0,g.useMemo)(()=>{var f;return s?(f=s.steps.map(d=>{var m,p;const h=s.log.filter(b=>b.body.stepId===d.id);return{id:d.id,name:d.name,logString:h.map(b=>b.body.message).join(`
`),status:(p=(m=h[h.length-1])==null?void 0:m.body.status)!=null?p:"completed"}}))!=null?f:[]:[]},[s]);if(!s)return null;const l=(c=a.find(f=>f.id===e))!=null?c:a[0];return g.createElement(Dp,null,g.createElement(_5,{steps:a,currentStepId:l.id,onUserStepChange:i}),g.createElement(C1.r,{text:(u=l==null?void 0:l.logString)!=null?u:""}))}function q5(){var i,a;const s=Mp(),{selectedResult:e}=_o();return e?g.createElement(Dp,null,g.createElement(pe.A,{pt:2},((a=(i=e.output)==null?void 0:i.links)==null?void 0:a.length)&&g.createElement(H5,{output:e.output})),g.createElement(mf,{className:s.codeMirror,theme:"dark",height:"100%",extensions:[Bo.define(Bu)],readOnly:!0,value:JSON.stringify(e.output,null,2)})):null}function e6(){const s=Mp(),[e,i]=(0,g.useState)("files");return g.createElement("div",{className:s.root},g.createElement(W5.A,{value:e,onChange:(a,l)=>i(l)},g.createElement(Pp.A,{value:"files",label:"Files"}),g.createElement(Pp.A,{value:"log",label:"Log"}),g.createElement(Pp.A,{value:"output",label:"Output"})),g.createElement(si.A,null),g.createElement("div",{className:s.contentWrapper},g.createElement("div",{className:s.content},e==="files"&&g.createElement(X5,null),e==="log"&&g.createElement(Q5,null),e==="output"&&g.createElement(q5,null))))}const t6=(0,M.A)(s=>({header:{height:48,minHeight:0,"&.Mui-expanded":{height:48,minHeight:0}},content:{display:"grid",background:s.palette.background.default,gridTemplateColumns:"180px auto 1fr",gridTemplateRows:"1fr",padding:0,height:400}}));function n6(){const s=t6(),e=_o(),[i,a]=(0,g.useState)(!1),[l,c]=(0,g.useState)(!0),u=e.results.length,f=I5(u);return(0,g.useEffect)(()=>{f===0&&u===1?(c(!1),a(!0)):f===1&&u===0&&a(!1)},[f,u]),g.createElement(g.Fragment,null,g.createElement(tt.A,{variant:"outlined",expanded:i,hidden:u===0&&l,onChange:(d,h)=>a(h),onTransitionEnd:()=>u===0&&c(!0)},g.createElement(Js.A,{className:s.header,expandIcon:g.createElement(Ir.A,null)},g.createElement(Ve.A,null,"Dry-run results")),g.createElement(si.A,{orientation:"horizontal"}),g.createElement(Bl.A,{className:s.content},g.createElement(B5,null),g.createElement(si.A,{orientation:"horizontal"}),g.createElement(e6,null))))}const r6=(0,M.A)({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "browser editor preview"
      "results results results"
    `,gridTemplateColumns:"1fr 3fr 2fr",gridTemplateRows:"1fr auto"},browser:{gridArea:"browser",overflow:"auto"},editor:{gridArea:"editor",overflow:"auto"},preview:{gridArea:"preview",overflow:"auto"},results:{gridArea:"results"}}),i6=s=>{const e=r6(),[i,a]=(0,g.useState)();return g.createElement(t5,{directory:s.directory},g.createElement(Jj,null,g.createElement("main",{className:e.root},g.createElement("section",{className:e.browser},g.createElement(E5,{onClose:s.onClose})),g.createElement("section",{className:e.editor},g.createElement(gf.DirectoryEditor,{errorText:i})),g.createElement("section",{className:e.preview},g.createElement(Nl.DirectoryEditorDryRun,{setErrorText:a,fieldExtensions:s.fieldExtensions,layouts:s.layouts})),g.createElement("section",{className:e.results},g.createElement(n6,null)))))};var s6=S(53318);const o6=`# Edit the template parameters below to see how they will render in the scaffolder form UI
parameters:
  - title: Fill in some steps
    required:
      - name
    properties:
      name:
        title: Name
        type: string
        description: Unique name of the component
      owner:
        title: Owner
        type: string
        description: Owner of the component
        ui:field: OwnerPicker
        ui:options:
          catalogFilter:
            kind: Group
  - title: Choose a location
    required:
      - repoUrl
    properties:
      repoUrl:
        title: Repository Location
        type: string
        ui:field: RepoUrlPicker
        ui:options:
          allowedHosts:
            - github.com
steps:
  - id: fetch-base
    name: Fetch Base
    action: fetch:template
    input:
      url: ./template
      values:
        name: \${{parameters.name}}
`,a6=(0,M.A)(s=>({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "controls controls"
      "textArea preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"},controls:{gridArea:"controls",display:"flex",flexFlow:"row nowrap",alignItems:"center",margin:s.spacing(1)},textArea:{gridArea:"textArea"},preview:{gridArea:"preview"}})),l6=({defaultPreviewTemplate:s=o6,customFieldExtensions:e=[],onClose:i,layouts:a=[]})=>{const l=a6(),c=(0,gt.gf)(w0.k),u=(0,gt.gf)(ic.v),[f,d]=(0,g.useState)(""),[h,m]=(0,g.useState)(),[p,b]=(0,g.useState)([]),[v,x]=(0,g.useState)(s),{loading:E}=(0,Kt.A)(()=>u.getEntities({filter:{kind:"template"},fields:["kind","metadata.namespace","metadata.name","metadata.title","spec.parameters","spec.steps","spec.output"]}).then(({items:A})=>b(A.map(C=>{var W;return{label:(W=C.metadata.title)!=null?W:(0,s6.S)(C,{defaultKind:"template"}),value:C}}))).catch(A=>c.post({message:`Error loading exisiting templates: ${A.message}`,severity:"error"})),[u]),w=(0,g.useCallback)(A=>{d(A),x(pf.Ay.stringify(A.spec))},[x]);return g.createElement(g.Fragment,null,E&&g.createElement(cc.A,null),g.createElement("main",{className:l.root},g.createElement("div",{className:l.controls},g.createElement(k.A,{variant:"outlined",size:"small",fullWidth:!0},g.createElement(K.A,{id:"select-template-label"},"Load Existing Template"),g.createElement(oE.A,{value:f,label:"Load Existing Template",labelId:"select-template-label",onChange:A=>w(A.target.value)},p.map((A,C)=>g.createElement(zn.A,{key:C,value:A.value},A.label)))),g.createElement(En.A,{size:"medium",onClick:i},g.createElement(Km.A,null))),g.createElement("div",{className:l.textArea},g.createElement(gf,{content:v,onUpdate:x,errorText:h})),g.createElement("div",{className:l.preview},g.createElement(Nl,{content:v,contentIsSpec:!0,fieldExtensions:e,setErrorText:m,layouts:a}))))};var Ip=S(67349),c6=S(89031);const u6=(0,M.A)(s=>({introText:{textAlign:"center",marginTop:s.spacing(2)},card:{position:"relative",maxWidth:340,marginTop:s.spacing(4),margin:s.spacing(0,2)},infoIcon:{position:"absolute",top:s.spacing(1),right:s.spacing(1)}}));function f6(s){const e=u6(),i=k1.isSupported(),a=g.createElement(Pi.A,{className:e.card,elevation:4},g.createElement(Ip.A,{disabled:!i,onClick:()=>{var u;return(u=s.onSelect)==null?void 0:u.call(s,"local")}},g.createElement(fo.A,null,g.createElement(Ve.A,{variant:"h4",component:"h3",gutterBottom:!0,color:i?void 0:"textSecondary",style:{display:"flex",flexFlow:"row nowrap"}},"Load Template Directory"),g.createElement(Ve.A,{variant:"body1",color:i?void 0:"textSecondary"},"Load a local template directory, allowing you to both edit and try executing your own template."))),!i&&g.createElement("div",{className:e.infoIcon},g.createElement(Xo.Ay,{placement:"top",title:"Only supported in some Chromium-based browsers"},g.createElement(c6.A,null)))),l=g.createElement(Pi.A,{className:e.card,elevation:4},g.createElement(Ip.A,{onClick:()=>{var u;return(u=s.onSelect)==null?void 0:u.call(s,"form")}},g.createElement(fo.A,null,g.createElement(Ve.A,{variant:"h4",component:"h3",gutterBottom:!0},"Edit Template Form"),g.createElement(Ve.A,{variant:"body1"},"Preview and edit a template form, either using a sample template or by loading a template from the catalog.")))),c=g.createElement(Pi.A,{className:e.card,elevation:4},g.createElement(Ip.A,{onClick:()=>{var u;return(u=s.onSelect)==null?void 0:u.call(s,"field-explorer")}},g.createElement(fo.A,null,g.createElement(Ve.A,{variant:"h4",component:"h3",gutterBottom:!0},"Custom Field Explorer"),g.createElement(Ve.A,{variant:"body1"},"View and play around with available installed custom field extensions."))));return g.createElement("div",{style:s.style},g.createElement(Ve.A,{variant:"h4",component:"h2",className:e.introText},"Get started by choosing one of the options below"),g.createElement("div",{style:{display:"flex",flexFlow:"row wrap",alignItems:"flex-start",justifyContent:"center",alignContent:"flex-start"}},i&&a,l,!i&&a,c))}function d6(s){const[e,i]=(0,g.useState)(),a=(0,_.Zp)(),l=(0,bt.S)(Xe.GF),c=(0,bt.S)(Xe.JX),u=(0,bt.S)(Xe.rQ),f={onEditorClicked:void 0,onActionsClicked:()=>a(l()),onTasksClicked:()=>a(c()),onCreateClicked:()=>a(u())};let d=null;return(e==null?void 0:e.type)==="local"?d=g.createElement(i6,{directory:e.directory,fieldExtensions:s.customFieldExtensions,onClose:()=>i(void 0),layouts:s.layouts}):(e==null?void 0:e.type)==="form"?d=g.createElement(l6,{defaultPreviewTemplate:s.defaultPreviewTemplate,customFieldExtensions:s.customFieldExtensions,onClose:()=>i(void 0),layouts:s.layouts}):(e==null?void 0:e.type)==="field-explorer"?d=g.createElement(o5,{customFieldExtensions:s.customFieldExtensions,onClose:()=>i(void 0)}):d=g.createElement(ps.U,null,g.createElement(f6,{onSelect:h=>{h==="local"?k1.requestDirectoryAccess().then(m=>i({type:"local",directory:m})).catch(()=>{}):h==="form"?i({type:"form"}):h==="field-explorer"&&i({type:"field-explorer"})}})),g.createElement(_s.Y,{themeId:"home"},g.createElement(Xs.Y,{title:"Template Editor",subtitle:"Edit, preview, and try out templates and template forms"},g.createElement(jl,{...f})),d)}const h6=s=>{const{components:{TemplateCardComponent:e,TaskPageComponent:i=OF,ReviewStepComponent:a,EXPERIMENTAL_TemplateOutputsComponent:l,EXPERIMENTAL_TemplateListPageComponent:c=Ck,EXPERIMENTAL_TemplateWizardPageComponent:u=WN}={}}=s,f=(0,_.P1)()||s.children,d=U(f),h=[...d,...ut.filter(({name:p})=>!d.some(b=>b.name===p))],m=O(f);return g.createElement(_.BV,null,g.createElement(_.qh,{path:"/",element:g.createElement(c,{TemplateCardComponent:e,contextMenu:s.contextMenu,groups:s.groups,templateFilter:s.templateFilter,headerOptions:s.headerOptions})}),g.createElement(_.qh,{path:Xe.sP.path,element:g.createElement(P.Q,null,g.createElement(u,{headerOptions:s.headerOptions,customFieldExtensions:h,layouts:m,components:{ReviewStepComponent:a},formProps:s.formProps}))}),g.createElement(_.qh,{path:Xe.bW.path,element:g.createElement(i,{TemplateOutputsComponent:l})}),g.createElement(_.qh,{path:Xe.Dg.path,element:g.createElement(P.Q,null,g.createElement(d6,{customFieldExtensions:h,layouts:m}))}),g.createElement(_.qh,{path:Xe.GF.path,element:g.createElement(PA,null)}),g.createElement(_.qh,{path:Xe.JX.path,element:g.createElement(HC,null)}),g.createElement(_.qh,{path:"*",element:g.createElement(jn.M,{status:"404",statusMessage:"Page not found"})}))}},68594:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");L.A=U},7707:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");L.A=U},86868:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"ControlPoint");L.A=U},39590:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");L.A=U},7147:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error");L.A=U},23164:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");L.A=U},3380:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord");L.A=U},12326:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"GetApp");L.A=U},89031:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");L.A=U},20353:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),"List");L.A=U},25711:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"PanoramaFishEye");L.A=U},10010:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");L.A=U},51767:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutline");L.A=U},55534:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"}),"Repeat");L.A=U},71108:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");L.A=U},25283:(se,L,S)=>{"use strict";var D,g=S(4293),_=S(78920);D={value:!0},L.A=void 0;var N=_(S(14041)),X=g(S(74044)),U=(0,X.default)(N.createElement("path",{d:"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"}),"Toc");L.A=U},95716:function(se){(function(L,S){se.exports=S()})(typeof self!="undefined"?self:this,()=>(()=>{"use strict";var L={d:($,ne)=>{for(var ae in ne)L.o(ne,ae)&&!L.o($,ae)&&Object.defineProperty($,ae,{enumerable:!0,get:ne[ae]})},o:($,ne)=>Object.prototype.hasOwnProperty.call($,ne),r:$=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})}},S={};function D($){return $==="#"||$===""||Array.isArray($)&&$.length===0||!1}L.r(S),L.d(S,{default:()=>K,get:()=>O,isRoot:()=>D,join:()=>I,remove:()=>R,removeUndefinedItems:()=>q,set:()=>ee,split:()=>F,splitLast:()=>T});const g=/~1/g,_=/~0/g,N=/\/+/g,X=/(^[#/]*|\/+$)/g;function U($){return $.replace(g,"/").replace(_,"~")}function j($){return U(decodeURIComponent($))}function F($){if($==null||typeof $!="string"||D($))return Array.isArray($)?$:[];const ne=$.indexOf("#")>=0?j:U,ae=($=($=$.replace(N,"/")).replace(X,"")).split("/");for(let oe=0,re=ae.length;oe<re;oe+=1)ae[oe]=ne(ae[oe]);return ae}function O($,ne,ae=void 0){if(ne==null||$==null)return ae;if(D(ne))return $;const oe=P($,F(ne));return oe===void 0?ae:oe}function P($,ne){const ae=ne.shift();if($!==void 0)return ae!==void 0?P($[ae],ne):$}const G=/^\[.*\]$/,Y=/^\[(.+)\]$/;function Q($,ne){return $==="__proto__"||$=="constructor"&&ne.length>0&&ne[0]=="prototype"}function ee($,ne,ae){if(ne==null)return $;const oe=F(ne);if(oe.length===0)return $;$==null&&($=G.test(oe[0])?[]:{});let re,me,Le=$;for(;oe.length>1;)re=oe.shift(),me=G.test(oe[0]),Q(re,oe)||(Le=te(Le,re,me));return re=oe.pop(),ie(Le,re,ae),$}function ie($,ne,ae){let oe;const re=ne.match(Y);ne==="[]"&&Array.isArray($)?$.push(ae):re?(oe=re.pop(),$[oe]=ae):$[ne]=ae}function te($,ne,ae){if($[ne]!=null)return $[ne];const oe=ae?[]:{};return ie($,ne,oe),oe}function q($){let ne=0,ae=0;for(;ne+ae<$.length;)$[ne+ae]===void 0&&(ae+=1),$[ne]=$[ne+ae],ne+=1;return $.length=$.length-ae,$}function R($,ne,ae){const oe=F(ne),re=oe.pop(),me=O($,oe);return me&&delete me[re],Array.isArray(me)&&ae!==!0&&q(me),$}const H=/\/+/g,y=/~/g,k=/\//g;function M($,ne){if($.length===0)return ne?"#":"";for(let ae=0,oe=$.length;ae<oe;ae+=1)$[ae]=$[ae].replace(y,"~0").replace(k,"~1"),ne&&($[ae]=encodeURIComponent($[ae]));return((ne?"#/":"/")+$.join("/")).replace(H,"/")}function I($,...ne){const ae=[];if(Array.isArray($))return M($,arguments[1]===!0);const oe=arguments[arguments.length-1],re=typeof oe=="boolean"?oe:$&&$[0]==="#";for(let Le=0,ze=arguments.length;Le<ze;Le+=1)ae.push.apply(ae,F(arguments[Le]));const me=[];for(let Le=0,ze=ae.length;Le<ze;Le+=1)if(ae[Le]===".."){if(me.length===0)return re?"#":"";me.pop()}else me.push(ae[Le]);return M(me,re)}function T($){const ne=F($);if(ne.length===0)return typeof $=="string"&&$[0]==="#"?["#",ne[0]]:["",void 0];if(ne.length===1)return $[0]==="#"?["#",ne[0]]:["",ne[0]];const ae=ne.pop();return[I(ne,$[0]==="#"),ae]}const K={get:O,set:ee,remove:R,join:I,split:F,splitLast:T,isRoot:D,removeUndefinedItems:q};return S})())},65733:(se,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.formatNames=L.fastFormats=L.fullFormats=void 0;function S(T,K){return{validate:T,compare:K}}L.fullFormats={date:S(N,X),time:S(j,F),"date-time":S(P,G),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:ee,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:I,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:te,int32:{type:"number",validate:H},int64:{type:"number",validate:y},float:{type:"number",validate:k},double:{type:"number",validate:k},password:!0,binary:!0},L.fastFormats={...L.fullFormats,date:S(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,X),time:S(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,F),"date-time":S(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,G),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},L.formatNames=Object.keys(L.fullFormats);function D(T){return T%4===0&&(T%100!==0||T%400===0)}const g=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,_=[0,31,28,31,30,31,30,31,31,30,31,30,31];function N(T){const K=g.exec(T);if(!K)return!1;const $=+K[1],ne=+K[2],ae=+K[3];return ne>=1&&ne<=12&&ae>=1&&ae<=(ne===2&&D($)?29:_[ne])}function X(T,K){if(T&&K)return T>K?1:T<K?-1:0}const U=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function j(T,K){const $=U.exec(T);if(!$)return!1;const ne=+$[1],ae=+$[2],oe=+$[3],re=$[5];return(ne<=23&&ae<=59&&oe<=59||ne===23&&ae===59&&oe===60)&&(!K||re!=="")}function F(T,K){if(!(T&&K))return;const $=U.exec(T),ne=U.exec(K);if($&&ne)return T=$[1]+$[2]+$[3]+($[4]||""),K=ne[1]+ne[2]+ne[3]+(ne[4]||""),T>K?1:T<K?-1:0}const O=/t|\s/i;function P(T){const K=T.split(O);return K.length===2&&N(K[0])&&j(K[1],!0)}function G(T,K){if(!(T&&K))return;const[$,ne]=T.split(O),[ae,oe]=K.split(O),re=X($,ae);if(re!==void 0)return re||F(ne,oe)}const Y=/\/|:/,Q=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function ee(T){return Y.test(T)&&Q.test(T)}const ie=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function te(T){return ie.lastIndex=0,ie.test(T)}const q=-(2**31),R=2**31-1;function H(T){return Number.isInteger(T)&&T<=R&&T>=q}function y(T){return Number.isInteger(T)}function k(){return!0}const M=/[^\\]\\Z/;function I(T){if(M.test(T))return!1;try{return new RegExp(T),!0}catch{return!1}}},74421:(se,L,S)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});const D=S(65733),g=S(31038),_=S(17898),N=new _.Name("fullFormats"),X=new _.Name("fastFormats"),U=(F,O={keywords:!0})=>{if(Array.isArray(O))return j(F,O,D.fullFormats,N),F;const[P,G]=O.mode==="fast"?[D.fastFormats,X]:[D.fullFormats,N],Y=O.formats||D.formatNames;return j(F,Y,P,G),O.keywords&&g.default(F),F};U.get=(F,O="full")=>{const G=(O==="fast"?D.fastFormats:D.fullFormats)[F];if(!G)throw new Error(`Unknown format "${F}"`);return G};function j(F,O,P,G){var Y,Q;(Y=(Q=F.opts.code).formats)!==null&&Y!==void 0||(Q.formats=_._`require("ajv-formats/dist/formats").${G}`);for(const ee of O)F.addFormat(ee,P[ee])}se.exports=L=U,Object.defineProperty(L,"__esModule",{value:!0}),L.default=U},31038:(se,L,S)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.formatLimitDefinition=void 0;const D=S(11601),g=S(17898),_=g.operators,N={formatMaximum:{okStr:"<=",ok:_.LTE,fail:_.GT},formatMinimum:{okStr:">=",ok:_.GTE,fail:_.LT},formatExclusiveMaximum:{okStr:"<",ok:_.LT,fail:_.GTE},formatExclusiveMinimum:{okStr:">",ok:_.GT,fail:_.LTE}},X={message:({keyword:j,schemaCode:F})=>g.str`should be ${N[j].okStr} ${F}`,params:({keyword:j,schemaCode:F})=>g._`{comparison: ${N[j].okStr}, limit: ${F}}`};L.formatLimitDefinition={keyword:Object.keys(N),type:"string",schemaType:"string",$data:!0,error:X,code(j){const{gen:F,data:O,schemaCode:P,keyword:G,it:Y}=j,{opts:Q,self:ee}=Y;if(!Q.validateFormats)return;const ie=new D.KeywordCxt(Y,ee.RULES.all.format.definition,"format");ie.$data?te():q();function te(){const H=F.scopeValue("formats",{ref:ee.formats,code:Q.code.formats}),y=F.const("fmt",g._`${H}[${ie.schemaCode}]`);j.fail$data(g.or(g._`typeof ${y} != "object"`,g._`${y} instanceof RegExp`,g._`typeof ${y}.compare != "function"`,R(y)))}function q(){const H=ie.schema,y=ee.formats[H];if(!y||y===!0)return;if(typeof y!="object"||y instanceof RegExp||typeof y.compare!="function")throw new Error(`"${G}": format "${H}" does not define "compare" function`);const k=F.scopeValue("formats",{key:H,ref:y,code:Q.code.formats?g._`${Q.code.formats}${g.getProperty(H)}`:void 0});j.fail$data(R(k))}function R(H){return g._`${H}.compare(${O}, ${P}) ${N[G].fail} 0`}},dependencies:["format"]};const U=j=>(j.addKeyword(L.formatLimitDefinition),j);L.default=U},49004:(se,L,S)=>{"use strict";var D=S(10646),g=S(50709),_=S(43225),N=Math.pow(2,31)-1;function X(F,O){var P=1,G;if(F===0)return O;if(O===0)return F;for(;F%2===0&&O%2===0;)F=F/2,O=O/2,P=P*2;for(;F%2===0;)F=F/2;for(;O;){for(;O%2===0;)O=O/2;F>O&&(G=O,O=F,F=G),O=O-F}return P*F}function U(F,O){var P=0,G;if(F===0)return O;if(O===0)return F;for(;!(F&1)&&!(O&1);)F>>>=1,O>>>=1,P++;for(;!(F&1);)F>>>=1;for(;O;){for(;!(O&1);)O>>>=1;F>O&&(G=O,O=F,F=G),O=O-F}return F<<P}function j(){var F=arguments.length,O,P,G,Y,Q,ee,ie;for(O=new Array(F),ie=0;ie<F;ie++)O[ie]=arguments[ie];if(g(O)){if(F===2)return Q=O[0],ee=O[1],Q<0&&(Q=-Q),ee<0&&(ee=-ee),Q<=N&&ee<=N?U(Q,ee):X(Q,ee);G=O}else if(D(O[0]))if(F>1){if(G=O[0],P=O[1],!_(P))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+P+"`.")}else G=O[0];else throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+O[0]+"`.");if(Y=G.length,Y<2)return null;if(P){for(Q=new Array(Y),ie=0;ie<Y;ie++)Q[ie]=P(G[ie],ie);G=Q}if(F<3&&!g(G))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+G+"`.");for(ie=0;ie<Y;ie++)Q=G[ie],Q<0&&(G[ie]=-Q);for(Q=G[0],ie=1;ie<Y;ie++)ee=G[ie],ee<=N&&Q<=N?Q=U(Q,ee):Q=X(Q,ee);return Q}se.exports=j},23050:(se,L,S)=>{"use strict";var D=S(49004),g=S(10646),_=S(50709),N=S(43225);function X(){var U=arguments.length,j,F,O,P,G,Y,Q;for(j=new Array(U),Q=0;Q<U;Q++)j[Q]=arguments[Q];if(_(j)){if(U===2)return G=j[0],Y=j[1],G<0&&(G=-G),Y<0&&(Y=-Y),G===0||Y===0?0:G/D(G,Y)*Y;O=j}else if(g(j[0]))if(U>1){if(O=j[0],F=j[1],!N(F))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+F+"`.")}else O=j[0];else throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+j[0]+"`.");if(P=O.length,P<2)return null;if(F){for(G=new Array(P),Q=0;Q<P;Q++)G[Q]=F(O[Q],Q);O=G}if(U<3&&!_(O))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+O+"`.");for(Q=0;Q<P;Q++)G=O[Q],G<0&&(O[Q]=-G);for(G=O[0],Q=1;Q<P;Q++){if(Y=O[Q],G===0||Y===0)return 0;G=G/D(G,Y)*Y}return G}se.exports=X},22193:(se,L,S)=>{"use strict";var D;D={value:!0};const g=S(65280);var _;(function(N){N.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],N.defaultParser=new g.Parser(N.RULES,{debug:!1});const X=/^(!|&)/,U=/(\?|\+|\*)$/,j=/^%/;function F(k,M){if(typeof k=="string"){if(X.test(k))return"";if(j.test(k)){let T=U.exec(k),K=T?T[0]+" ":"";return O(k,M)?G(k,M)+K:"("+G(k,M)+")"+K}return k}else return k.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function O(k,M){let I=g.findRuleByName(k,M);return I&&I.bnf.length==1&&I.bnf[0].length==1&&(I.bnf[0][0]instanceof RegExp||I.bnf[0][0][0]=='"'||I.bnf[0][0][0]=="'")}function P(k,M){return k.map(I=>F(I,M)).join(" ")}function G(k,M){let I=g.findRuleByName(k,M);return I?I.bnf.map(T=>P(T,M)).join(" | "):"RULE_NOT_FOUND {"+k+"}"}function Y(k){let M=[];return k.grammarRules.forEach(I=>{if(!/^%/.test(I.name)){let T=I.recover?" /* { recoverUntil="+I.recover+" } */":"";M.push(I.name+" ::= "+G(I.name,k)+T)}}),M.join(`
`)}N.emit=Y;let Q=0;function ee(k,M){throw console.log("reberia restar "+M+" a "+k),new Error("Difference not supported yet")}function ie(k){return new RegExp(k.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function te(k,M,I){let T=null,K=[];return M.children.forEach(($,ne)=>{$.type=="Minus"&&ee(T,$);let ae=M.children[ne+1];ae=ae&&ae.type=="PrimaryDecoration"&&ae.text||"";let oe="";switch($.type){case"SubItem":let re="%"+(I+Q++);q(k,$,re),K.push(oe+re+ae);break;case"NCName":case"StringLiteral":K.push(oe+$.text+ae);break;case"CharCode":case"CharClass":if(ae||oe){let me={name:"%"+(I+Q++),bnf:[[ie($.text)]]};k.push(me),K.push(oe+me.name+ae)}else K.push(ie($.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+$.type+" -> "+JSON.stringify($.text))}T=$}),K}function q(k,M,I){let T=M.children.filter(ne=>ne.type=="SequenceOrDifference").map(ne=>te(k,ne,I)),K={name:I,bnf:T},$=null;T.forEach(ne=>{$=$||ne.recover,delete ne.recover}),I.indexOf("%")==0&&(K.fragment=!0),$&&(K.recover=$),k.push(K)}function R(k,M=N.defaultParser){let I=M.getAST(k);if(!I)throw new Error("Could not parse "+k);if(I.errors&&I.errors.length)throw I.errors[0];let T=[];return I.children.filter(K=>K.type=="Production").map(K=>{let $=K.children.filter(ne=>ne.type=="NCName")[0].text;q(T,K,$)}),T}N.getRules=R;function H(k,M=N.defaultParser){return R(k.join(""),M)}N.Transform=H;class y extends g.Parser{constructor(M,I){const T=I&&I.debugRulesParser===!0?new g.Parser(N.RULES,{debug:!0}):N.defaultParser;super(R(M,T),I)}emitSource(){return Y(this)}}N.Parser=y})(_||(_={})),L.A=_},65280:(se,L,S)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Parser=L.findRuleByName=L.parseRuleName=L.escapeRegExp=L.readToken=void 0;const D=/^[A-Z0-9_]+$/,g=/(\?|\+|\*)$/,_=/^(@|&|!)/,N="WS",X=S(89849);function U(te,q){let R=q.exec(te);return R&&R.index==0?R[0].length==0&&q.source.length>0?null:{type:null,text:R[0],rest:te.substr(R[0].length),start:0,end:R[0].length-1,fullText:R[0],errors:[],children:[],parent:null}:null}L.readToken=U;function j(te){return te.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}L.escapeRegExp=j;function F(te){te.rest="",te.children&&te.children.forEach(q=>F(q))}function O(te,q){te.start+=q,te.end+=q,te.children&&te.children.forEach(R=>O(R,te.start))}function P(te,q){q.errors&&q.errors.length&&q.errors.forEach(R=>te.push(R)),q.children&&q.children.forEach(R=>P(te,R))}function G(te){let q=g.exec(te),R=_.exec(te),H=q&&q[0]||"",y=R&&R[0]||"",k={raw:te,name:te.replace(g,"").replace(_,""),isOptional:H=="?"||H=="*",allowRepetition:H=="+"||H=="*",atLeastOne:H=="+",lookupPositive:y=="&",lookupNegative:y=="!",pinned:y=="@",lookup:!1,isLiteral:!1};return k.isLiteral=k.name[0]=="'"||k.name[0]=='"',k.lookup=k.lookupNegative||k.lookupPositive,k}L.parseRuleName=G;function Y(te,q){let R=G(te);return q.cachedRules[R.name]||null}L.findRuleByName=Y;function Q(te,q){if(te.children){let R=te.children.filter(H=>H.type&&q.test(H.type));for(let H=0;H<R.length;H++){let y=te.children.indexOf(R[H]);y!=-1&&te.children.splice(y,1)}te.children.forEach(H=>Q(H,q))}}const ee=["EOF"];class ie{constructor(q,R){this.grammarRules=q,this.options=R,this.cachedRules={},this.debug=R?R.debug===!0:!1;let H=[],y=[];if(q.forEach(k=>{let M=G(k.name);if(M.name in this.cachedRules){H.push("Duplicated rule "+M.name);return}else this.cachedRules[M.name]=k;if(!k.bnf||!k.bnf.length){let I="Missing rule content, rule: "+k.name;H.indexOf(I)==-1&&H.push(I)}else k.bnf.forEach(I=>{if(typeof I[0]=="string"&&G(I[0]).name==k.name){let K="Left recursion is not allowed, rule: "+k.name;H.indexOf(K)==-1&&H.push(K)}I.forEach(T=>{if(typeof T=="string"){let K=G(T);!K.isLiteral&&y.indexOf(K.name)==-1&&ee.indexOf(K.name)==-1&&y.push(K.name)}})});N==k.name&&(k.implicitWs=!1),k.implicitWs&&y.indexOf(N)==-1&&y.push(N),k.recover&&y.indexOf(k.recover)==-1&&y.push(k.recover)}),y.forEach(k=>{k in this.cachedRules||H.push("Missing rule "+k)}),H.length)throw new Error(H.join(`
`))}getAST(q,R){R||(R=this.grammarRules.filter(y=>!y.fragment&&y.name.indexOf("%")!=0)[0].name);let H=this.parse(q,R);if(H){P(H.errors,H),O(H,0),Q(H,/^%/),(!this.options||!this.options.keepUpperRules)&&Q(H,D);let y=H.rest;y&&new X.TokenError(`Unexpected end of input: 
`+y,H),F(H),H.rest=y}return H}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(q,R,H=0){let y=null,k=G(R),M,I=this.debug&&!D.test(k.name);I&&console.log(new Array(H).join("\u2502  ")+"Trying to get "+R+" from "+JSON.stringify(q.split(`
`)[0]));let T=k.name,K=Y(k.name,this);if(k.name=="EOF"){if(q.length)return null;if(q.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!K&&k.isLiteral){let $=k.name.trim();if($.startsWith('"')?$=JSON.parse($):$.startsWith("'")&&($=$.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),$==="")return{type:"%%EMPTY%%",text:"",rest:q,start:0,end:0,fullText:"",errors:[],children:[],parent:null};M=new RegExp(j($)),T=null}}catch($){return $ instanceof ReferenceError&&console.error($),null}if(M){let $=U(q,M);if($)return $.type=T,$}else{let $=K.bnf;$ instanceof Array&&$.forEach(ne=>{if(y)return;let ae=null,oe={type:k.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:q};K.fragment&&(oe.fragment=!0);let re=q,me=0,Le=ne.length>0,ze=!1;for(let _e=0;_e<ne.length;_e++)if(typeof ne[_e]=="string"){let Ie=G(ne[_e]);Le=Le&&Ie.isOptional;let De,xt=!1;do{if(De=null,K.implicitWs&&(De=this.parse(re,Ie.name,H+1),!De)){let ut;do if(ut=this.parse(re,N,H+1),ut)oe.text=oe.text+ut.text,oe.end=oe.text.length,ut.parent=oe,oe.children.push(ut),re=re.substr(ut.text.length),me+=ut.text.length;else break;while(ut&&ut.text.length)}if(De=De||this.parse(re,Ie.name,H+1),Ie.lookupNegative){if(De)return;break}if(Ie.lookupPositive&&!De)return;if(!De&&(Ie.isOptional||Ie.atLeastOne&&xt))break;if(De&&K.pinned==_e+1&&(ae=De,I&&console.log(new Array(H+1).join("\u2502  ")+"\u2514\u2500 "+De.type+" PINNED")),De||(De=this.parseRecovery(K,re,H+1)),!De)if(ae)y=oe,De={type:"SyntaxError",text:re,children:[],end:re.length,errors:[],fullText:"",parent:null,start:0,rest:""},re.length?new X.TokenError(`Unexpected end of input. Expecting ${Ie.name} Got: ${re}`,De):new X.TokenError(`Unexpected end of input. Missing ${Ie.name}`,De),I&&console.log(new Array(H+1).join("\u2502  ")+"\u2514\u2500 "+De.type+" "+JSON.stringify(De.text));else return;if(xt=!0,ze=!0,De.type=="%%EMPTY%%")break;De.start+=me,De.end+=me,!Ie.lookupPositive&&De.type&&(De.fragment?De.children&&De.children.forEach(ut=>{ut.start+=me,ut.end+=me,ut.parent=oe,oe.children.push(ut)}):(De.parent=oe,oe.children.push(De))),Ie.lookup&&(De.lookup=!0),I&&console.log(new Array(H+1).join("\u2502  ")+"\u2514\u2500 "+De.type+" "+JSON.stringify(De.text)),!Ie.lookup&&!De.lookup&&(oe.text=oe.text+De.text,oe.end=oe.text.length,re=re.substr(De.text.length),me+=De.text.length),oe.rest=re}while(De&&Ie.allowRepetition&&re.length&&!De.lookup)}else{let Ie=U(re,ne[_e]);if(!Ie)return;I&&console.log(new Array(H+1).join("\u2502  ")+"\u2514> "+JSON.stringify(Ie.text)+ne[_e].source),ze=!0,Ie.start+=me,Ie.end+=me,oe.text=oe.text+Ie.text,oe.end=oe.text.length,re=re.substr(Ie.text.length),me+=Ie.text.length,oe.rest=re}ze&&(y=oe,I&&console.log(new Array(H).join("\u2502  ")+"\u251C<\u2500\u2534< PUSHING "+y.type+" "+JSON.stringify(y.text)))}),y&&K.simplifyWhenOneChildren&&y.children.length==1&&(y=y.children[0])}return y||I&&console.log(R+" NOT RESOLVED FROM "+q),y}parseRecovery(q,R,H){if(q.recover&&R.length){let y=this.debug;y&&console.log(new Array(H+1).join("\u2502  ")+"Trying to recover until token "+q.recover+" from "+JSON.stringify(R.split(`
`)[0]+R.split(`
`)[1]));let k={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},M;do if(M=this.parse(R,q.recover,H+1),M){new X.TokenError('Unexpected input: "'+k.text+`" Expecting: ${q.name}`,k);break}else k.text=k.text+R[0],k.end=k.text.length,R=R.substr(1);while(!M&&R.length>0);if(k.text.length>0&&M)return y&&console.log(new Array(H+1).join("\u2502  ")+"Recovered text: "+JSON.stringify(k.text)),k}return null}}L.Parser=ie,L.default=ie},89849:(se,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.TokenError=void 0;class S extends Error{constructor(g,_){if(super(g),this.message=g,this.token=_,_&&_.errors)_.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}}L.TokenError=S},4794:(se,L,S)=>{var D;(function(){var g=Object.assign||function(y){for(var k,M=1;M<arguments.length;M++){k=arguments[M];for(var I in k)Q(k,I)&&(y[I]=k[I])}return y},_=Array.isArray||function(y){return Object.prototype.toString.call(y)==="[object Array]"},N=U(function(y){return y===1?"\u03C7\u03C1\u03CC\u03BD\u03BF\u03C2":"\u03C7\u03C1\u03CC\u03BD\u03B9\u03B1"},function(y){return y===1?"\u03BC\u03AE\u03BD\u03B1\u03C2":"\u03BC\u03AE\u03BD\u03B5\u03C2"},function(y){return y===1?"\u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1":"\u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2"},function(y){return y===1?"\u03BC\u03AD\u03C1\u03B1":"\u03BC\u03AD\u03C1\u03B5\u03C2"},function(y){return y===1?"\u03CE\u03C1\u03B1":"\u03CE\u03C1\u03B5\u03C2"},function(y){return y===1?"\u03BB\u03B5\u03C0\u03C4\u03CC":"\u03BB\u03B5\u03C0\u03C4\u03AC"},function(y){return y===1?"\u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03BF":"\u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1"},function(y){return(y===1?"\u03C7\u03B9\u03BB\u03B9\u03BF\u03C3\u03C4\u03CC":"\u03C7\u03B9\u03BB\u03B9\u03BF\u03C3\u03C4\u03AC")+" \u03C4\u03BF\u03C5 \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03BF\u03BB\u03AD\u03C0\u03C4\u03BF\u03C5"},","),X={af:U("jaar",function(y){return"maand"+(y===1?"":"e")},function(y){return y===1?"week":"weke"},function(y){return y===1?"dag":"dae"},function(y){return y===1?"uur":"ure"},function(y){return y===1?"minuut":"minute"},function(y){return"sekonde"+(y===1?"":"s")},function(y){return"millisekonde"+(y===1?"":"s")},","),am:U("\u12D3\u1218\u1275","\u12C8\u122D","\u1233\u121D\u1295\u1275","\u1240\u1295","\u1230\u12D3\u1275","\u12F0\u1242\u1243","\u1230\u12A8\u1295\u12F5","\u121A\u120A\u1230\u12A8\u1295\u12F5"),ar:g(U(function(y){return["\u0633\u0646\u0629","\u0633\u0646\u062A\u0627\u0646","\u0633\u0646\u0648\u0627\u062A"][j(y)]},function(y){return["\u0634\u0647\u0631","\u0634\u0647\u0631\u0627\u0646","\u0623\u0634\u0647\u0631"][j(y)]},function(y){return["\u0623\u0633\u0628\u0648\u0639","\u0623\u0633\u0628\u0648\u0639\u064A\u0646","\u0623\u0633\u0627\u0628\u064A\u0639"][j(y)]},function(y){return["\u064A\u0648\u0645","\u064A\u0648\u0645\u064A\u0646","\u0623\u064A\u0627\u0645"][j(y)]},function(y){return["\u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u062A\u064A\u0646","\u0633\u0627\u0639\u0627\u062A"][j(y)]},function(y){return["\u062F\u0642\u064A\u0642\u0629","\u062F\u0642\u064A\u0642\u062A\u0627\u0646","\u062F\u0642\u0627\u0626\u0642"][j(y)]},function(y){return["\u062B\u0627\u0646\u064A\u0629","\u062B\u0627\u0646\u064A\u062A\u0627\u0646","\u062B\u0648\u0627\u0646\u064A"][j(y)]},function(y){return["\u062C\u0632\u0621 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629","\u062C\u0632\u0622\u0646 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629","\u0623\u062C\u0632\u0627\u0621 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629"][j(y)]},","),{delimiter:" \uFEED ",_hideCountIf2:!0,_digitReplacements:["\u06F0","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"]}),bg:U(function(y){return["\u0433\u043E\u0434\u0438\u043D\u0438","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0438"][O(y)]},function(y){return["\u043C\u0435\u0441\u0435\u0446\u0430","\u043C\u0435\u0441\u0435\u0446","\u043C\u0435\u0441\u0435\u0446\u0430"][O(y)]},function(y){return["\u0441\u0435\u0434\u043C\u0438\u0446\u0438","\u0441\u0435\u0434\u043C\u0438\u0446\u0430","\u0441\u0435\u0434\u043C\u0438\u0446\u0438"][O(y)]},function(y){return["\u0434\u043D\u0438","\u0434\u0435\u043D","\u0434\u043D\u0438"][O(y)]},function(y){return["\u0447\u0430\u0441\u0430","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][O(y)]},function(y){return["\u043C\u0438\u043D\u0443\u0442\u0438","\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442\u0438"][O(y)]},function(y){return["\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][O(y)]},function(y){return["\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][O(y)]},","),bn:U("\u09AC\u099B\u09B0","\u09AE\u09BE\u09B8","\u09B8\u09AA\u09CD\u09A4\u09BE\u09B9","\u09A6\u09BF\u09A8","\u0998\u09A8\u09CD\u099F\u09BE","\u09AE\u09BF\u09A8\u09BF\u099F","\u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1","\u09AE\u09BF\u09B2\u09BF\u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1"),ca:U(function(y){return"any"+(y===1?"":"s")},function(y){return"mes"+(y===1?"":"os")},function(y){return"setman"+(y===1?"a":"es")},function(y){return"di"+(y===1?"a":"es")},function(y){return"hor"+(y===1?"a":"es")},function(y){return"minut"+(y===1?"":"s")},function(y){return"segon"+(y===1?"":"s")},function(y){return"milisegon"+(y===1?"":"s")},","),ckb:U("\u0633\u0627\u06B5","\u0645\u0627\u0646\u06AF","\u0647\u06D5\u0641\u062A\u06D5","\u0695\u06C6\u0698","\u06A9\u0627\u0698\u06CE\u0631","\u062E\u0648\u0644\u06D5\u06A9","\u0686\u0631\u06A9\u06D5","\u0645\u06CC\u0644\u06CC \u0686\u0631\u06A9\u06D5","."),cs:U(function(y){return["rok","roku","roky","let"][P(y)]},function(y){return["m\u011Bs\xEDc","m\u011Bs\xEDce","m\u011Bs\xEDce","m\u011Bs\xEDc\u016F"][P(y)]},function(y){return["t\xFDden","t\xFDdne","t\xFDdny","t\xFDdn\u016F"][P(y)]},function(y){return["den","dne","dny","dn\xED"][P(y)]},function(y){return["hodina","hodiny","hodiny","hodin"][P(y)]},function(y){return["minuta","minuty","minuty","minut"][P(y)]},function(y){return["sekunda","sekundy","sekundy","sekund"][P(y)]},function(y){return["milisekunda","milisekundy","milisekundy","milisekund"][P(y)]},","),cy:U("flwyddyn","mis","wythnos","diwrnod","awr","munud","eiliad","milieiliad"),da:U("\xE5r",function(y){return"m\xE5ned"+(y===1?"":"er")},function(y){return"uge"+(y===1?"":"r")},function(y){return"dag"+(y===1?"":"e")},function(y){return"time"+(y===1?"":"r")},function(y){return"minut"+(y===1?"":"ter")},function(y){return"sekund"+(y===1?"":"er")},function(y){return"millisekund"+(y===1?"":"er")},","),de:U(function(y){return"Jahr"+(y===1?"":"e")},function(y){return"Monat"+(y===1?"":"e")},function(y){return"Woche"+(y===1?"":"n")},function(y){return"Tag"+(y===1?"":"e")},function(y){return"Stunde"+(y===1?"":"n")},function(y){return"Minute"+(y===1?"":"n")},function(y){return"Sekunde"+(y===1?"":"n")},function(y){return"Millisekunde"+(y===1?"":"n")},","),el:N,en:U(function(y){return"year"+(y===1?"":"s")},function(y){return"month"+(y===1?"":"s")},function(y){return"week"+(y===1?"":"s")},function(y){return"day"+(y===1?"":"s")},function(y){return"hour"+(y===1?"":"s")},function(y){return"minute"+(y===1?"":"s")},function(y){return"second"+(y===1?"":"s")},function(y){return"millisecond"+(y===1?"":"s")}),eo:U(function(y){return"jaro"+(y===1?"":"j")},function(y){return"monato"+(y===1?"":"j")},function(y){return"semajno"+(y===1?"":"j")},function(y){return"tago"+(y===1?"":"j")},function(y){return"horo"+(y===1?"":"j")},function(y){return"minuto"+(y===1?"":"j")},function(y){return"sekundo"+(y===1?"":"j")},function(y){return"milisekundo"+(y===1?"":"j")},","),es:U(function(y){return"a\xF1o"+(y===1?"":"s")},function(y){return"mes"+(y===1?"":"es")},function(y){return"semana"+(y===1?"":"s")},function(y){return"d\xEDa"+(y===1?"":"s")},function(y){return"hora"+(y===1?"":"s")},function(y){return"minuto"+(y===1?"":"s")},function(y){return"segundo"+(y===1?"":"s")},function(y){return"milisegundo"+(y===1?"":"s")},","),et:U(function(y){return"aasta"+(y===1?"":"t")},function(y){return"kuu"+(y===1?"":"d")},function(y){return"n\xE4dal"+(y===1?"":"at")},function(y){return"p\xE4ev"+(y===1?"":"a")},function(y){return"tund"+(y===1?"":"i")},function(y){return"minut"+(y===1?"":"it")},function(y){return"sekund"+(y===1?"":"it")},function(y){return"millisekund"+(y===1?"":"it")},","),eu:U("urte","hilabete","aste","egun","ordu","minutu","segundo","milisegundo",","),fa:U("\u0633\u0627\u0644","\u0645\u0627\u0647","\u0647\u0641\u062A\u0647","\u0631\u0648\u0632","\u0633\u0627\u0639\u062A","\u062F\u0642\u06CC\u0642\u0647","\u062B\u0627\u0646\u06CC\u0647","\u0645\u06CC\u0644\u06CC \u062B\u0627\u0646\u06CC\u0647"),fi:U(function(y){return y===1?"vuosi":"vuotta"},function(y){return y===1?"kuukausi":"kuukautta"},function(y){return"viikko"+(y===1?"":"a")},function(y){return"p\xE4iv\xE4"+(y===1?"":"\xE4")},function(y){return"tunti"+(y===1?"":"a")},function(y){return"minuutti"+(y===1?"":"a")},function(y){return"sekunti"+(y===1?"":"a")},function(y){return"millisekunti"+(y===1?"":"a")},","),fo:U("\xE1r",function(y){return y===1?"m\xE1na\xF0ur":"m\xE1na\xF0ir"},function(y){return y===1?"vika":"vikur"},function(y){return y===1?"dagur":"dagar"},function(y){return y===1?"t\xEDmi":"t\xEDmar"},function(y){return y===1?"minuttur":"minuttir"},"sekund","millisekund",","),fr:U(function(y){return"an"+(y>=2?"s":"")},"mois",function(y){return"semaine"+(y>=2?"s":"")},function(y){return"jour"+(y>=2?"s":"")},function(y){return"heure"+(y>=2?"s":"")},function(y){return"minute"+(y>=2?"s":"")},function(y){return"seconde"+(y>=2?"s":"")},function(y){return"milliseconde"+(y>=2?"s":"")},","),gr:N,he:U(function(y){return y===1?"\u05E9\u05E0\u05D4":"\u05E9\u05E0\u05D9\u05DD"},function(y){return y===1?"\u05D7\u05D5\u05D3\u05E9":"\u05D7\u05D5\u05D3\u05E9\u05D9\u05DD"},function(y){return y===1?"\u05E9\u05D1\u05D5\u05E2":"\u05E9\u05D1\u05D5\u05E2\u05D5\u05EA"},function(y){return y===1?"\u05D9\u05D5\u05DD":"\u05D9\u05DE\u05D9\u05DD"},function(y){return y===1?"\u05E9\u05E2\u05D4":"\u05E9\u05E2\u05D5\u05EA"},function(y){return y===1?"\u05D3\u05E7\u05D4":"\u05D3\u05E7\u05D5\u05EA"},function(y){return y===1?"\u05E9\u05E0\u05D9\u05D4":"\u05E9\u05E0\u05D9\u05D5\u05EA"},function(y){return y===1?"\u05DE\u05D9\u05DC\u05D9\u05E9\u05E0\u05D9\u05D9\u05D4":"\u05DE\u05D9\u05DC\u05D9\u05E9\u05E0\u05D9\u05D5\u05EA"}),hr:U(function(y){return y%10===2||y%10===3||y%10===4?"godine":"godina"},function(y){return y===1?"mjesec":y===2||y===3||y===4?"mjeseca":"mjeseci"},function(y){return y%10===1&&y!==11?"tjedan":"tjedna"},function(y){return y===1?"dan":"dana"},function(y){return y===1?"sat":y===2||y===3||y===4?"sata":"sati"},function(y){var k=y%10;return(k===2||k===3||k===4)&&(y<10||y>14)?"minute":"minuta"},function(y){var k=y%10;return k===5||Math.floor(y)===y&&y>=10&&y<=19?"sekundi":k===1?"sekunda":k===2||k===3||k===4?"sekunde":"sekundi"},function(y){return y===1?"milisekunda":y%10===2||y%10===3||y%10===4?"milisekunde":"milisekundi"},","),hi:U("\u0938\u093E\u0932",function(y){return y===1?"\u092E\u0939\u0940\u0928\u093E":"\u092E\u0939\u0940\u0928\u0947"},function(y){return y===1?"\u0939\u095E\u094D\u0924\u093E":"\u0939\u092B\u094D\u0924\u0947"},"\u0926\u093F\u0928",function(y){return y===1?"\u0918\u0902\u091F\u093E":"\u0918\u0902\u091F\u0947"},"\u092E\u093F\u0928\u091F","\u0938\u0947\u0915\u0902\u0921","\u092E\u093F\u0932\u0940\u0938\u0947\u0915\u0902\u0921"),hu:U("\xE9v","h\xF3nap","h\xE9t","nap","\xF3ra","perc","m\xE1sodperc","ezredm\xE1sodperc",","),id:U("tahun","bulan","minggu","hari","jam","menit","detik","milidetik"),is:U("\xE1r",function(y){return"m\xE1nu\xF0"+(y===1?"ur":"ir")},function(y){return"vik"+(y===1?"a":"ur")},function(y){return"dag"+(y===1?"ur":"ar")},function(y){return"klukkut\xEDm"+(y===1?"i":"ar")},function(y){return"m\xEDn\xFAt"+(y===1?"a":"ur")},function(y){return"sek\xFAnd"+(y===1?"a":"ur")},function(y){return"millisek\xFAnd"+(y===1?"a":"ur")}),it:U(function(y){return"ann"+(y===1?"o":"i")},function(y){return"mes"+(y===1?"e":"i")},function(y){return"settiman"+(y===1?"a":"e")},function(y){return"giorn"+(y===1?"o":"i")},function(y){return"or"+(y===1?"a":"e")},function(y){return"minut"+(y===1?"o":"i")},function(y){return"second"+(y===1?"o":"i")},function(y){return"millisecond"+(y===1?"o":"i")},","),ja:U("\u5E74","\u30F6\u6708","\u9031","\u65E5","\u6642\u9593","\u5206","\u79D2","\u30DF\u30EA\u79D2"),km:U("\u1786\u17D2\u1793\u17B6\u17C6","\u1781\u17C2","\u179F\u1794\u17D2\u178F\u17B6\u17A0\u17CD","\u1790\u17D2\u1784\u17C3","\u1798\u17C9\u17C4\u1784","\u1793\u17B6\u1791\u17B8","\u179C\u17B7\u1793\u17B6\u1791\u17B8","\u1798\u17B7\u179B\u17D2\u179B\u17B8\u179C\u17B7\u1793\u17B6\u1791\u17B8"),kn:U(function(y){return y===1?"\u0CB5\u0CB0\u0CCD\u0CB7":"\u0CB5\u0CB0\u0CCD\u0CB7\u0C97\u0CB3\u0CC1"},function(y){return y===1?"\u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1":"\u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1\u0C97\u0CB3\u0CC1"},function(y){return y===1?"\u0CB5\u0CBE\u0CB0":"\u0CB5\u0CBE\u0CB0\u0C97\u0CB3\u0CC1"},function(y){return y===1?"\u0CA6\u0CBF\u0CA8":"\u0CA6\u0CBF\u0CA8\u0C97\u0CB3\u0CC1"},function(y){return y===1?"\u0C97\u0C82\u0C9F\u0CC6":"\u0C97\u0C82\u0C9F\u0CC6\u0C97\u0CB3\u0CC1"},function(y){return y===1?"\u0CA8\u0CBF\u0CAE\u0CBF\u0CB7":"\u0CA8\u0CBF\u0CAE\u0CBF\u0CB7\u0C97\u0CB3\u0CC1"},function(y){return y===1?"\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CCD":"\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CC1\u0C97\u0CB3\u0CC1"},function(y){return y===1?"\u0CAE\u0CBF\u0CB2\u0CBF\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CCD":"\u0CAE\u0CBF\u0CB2\u0CBF\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CC1\u0C97\u0CB3\u0CC1"}),ko:U("\uB144","\uAC1C\uC6D4","\uC8FC\uC77C","\uC77C","\uC2DC\uAC04","\uBD84","\uCD08","\uBC00\uB9AC \uCD08"),ku:U("sal","meh","hefte","roj","seet","deqe","saniye","m\xEEl\xEE\xE7irk",","),lo:U("\u0E9B\u0EB5","\u0EC0\u0E94\u0EB7\u0EAD\u0E99","\u0EAD\u0EB2\u0E97\u0EB4\u0E94","\u0EA1\u0EB7\u0EC9","\u0E8A\u0EBB\u0EC8\u0EA7\u0EC2\u0EA1\u0E87","\u0E99\u0EB2\u0E97\u0EB5","\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5","\u0EA1\u0EB4\u0E99\u0EA5\u0EB4\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5",","),lt:U(function(y){return y%10===0||y%100>=10&&y%100<=20?"met\u0173":"metai"},function(y){return["m\u0117nuo","m\u0117nesiai","m\u0117nesi\u0173"][G(y)]},function(y){return["savait\u0117","savait\u0117s","savai\u010Di\u0173"][G(y)]},function(y){return["diena","dienos","dien\u0173"][G(y)]},function(y){return["valanda","valandos","valand\u0173"][G(y)]},function(y){return["minut\u0117","minut\u0117s","minu\u010Di\u0173"][G(y)]},function(y){return["sekund\u0117","sekund\u0117s","sekund\u017Ei\u0173"][G(y)]},function(y){return["milisekund\u0117","milisekund\u0117s","milisekund\u017Ei\u0173"][G(y)]},","),lv:U(function(y){return Y(y)?"gads":"gadi"},function(y){return Y(y)?"m\u0113nesis":"m\u0113ne\u0161i"},function(y){return Y(y)?"ned\u0113\u013Ca":"ned\u0113\u013Cas"},function(y){return Y(y)?"diena":"dienas"},function(y){return Y(y)?"stunda":"stundas"},function(y){return Y(y)?"min\u016Bte":"min\u016Btes"},function(y){return Y(y)?"sekunde":"sekundes"},function(y){return Y(y)?"milisekunde":"milisekundes"},","),mk:U(function(y){return y===1?"\u0433\u043E\u0434\u0438\u043D\u0430":"\u0433\u043E\u0434\u0438\u043D\u0438"},function(y){return y===1?"\u043C\u0435\u0441\u0435\u0446":"\u043C\u0435\u0441\u0435\u0446\u0438"},function(y){return y===1?"\u043D\u0435\u0434\u0435\u043B\u0430":"\u043D\u0435\u0434\u0435\u043B\u0438"},function(y){return y===1?"\u0434\u0435\u043D":"\u0434\u0435\u043D\u0430"},function(y){return y===1?"\u0447\u0430\u0441":"\u0447\u0430\u0441\u0430"},function(y){return y===1?"\u043C\u0438\u043D\u0443\u0442\u0430":"\u043C\u0438\u043D\u0443\u0442\u0438"},function(y){return y===1?"\u0441\u0435\u043A\u0443\u043D\u0434\u0430":"\u0441\u0435\u043A\u0443\u043D\u0434\u0438"},function(y){return y===1?"\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430":"\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438"},","),mn:U("\u0436\u0438\u043B","\u0441\u0430\u0440","\u0434\u043E\u043B\u043E\u043E \u0445\u043E\u043D\u043E\u0433","\u04E9\u0434\u04E9\u0440","\u0446\u0430\u0433","\u043C\u0438\u043D\u0443\u0442","\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434"),mr:U(function(y){return y===1?"\u0935\u0930\u094D\u0937":"\u0935\u0930\u094D\u0937\u0947"},function(y){return y===1?"\u092E\u0939\u093F\u0928\u093E":"\u092E\u0939\u093F\u0928\u0947"},function(y){return y===1?"\u0906\u0920\u0935\u0921\u093E":"\u0906\u0920\u0935\u0921\u0947"},"\u0926\u093F\u0935\u0938","\u0924\u093E\u0938",function(y){return y===1?"\u092E\u093F\u0928\u093F\u091F":"\u092E\u093F\u0928\u093F\u091F\u0947"},"\u0938\u0947\u0915\u0902\u0926","\u092E\u093F\u0932\u093F\u0938\u0947\u0915\u0902\u0926"),ms:U("tahun","bulan","minggu","hari","jam","minit","saat","milisaat"),nl:U("jaar",function(y){return y===1?"maand":"maanden"},function(y){return y===1?"week":"weken"},function(y){return y===1?"dag":"dagen"},"uur",function(y){return y===1?"minuut":"minuten"},function(y){return y===1?"seconde":"seconden"},function(y){return y===1?"milliseconde":"milliseconden"},","),no:U("\xE5r",function(y){return"m\xE5ned"+(y===1?"":"er")},function(y){return"uke"+(y===1?"":"r")},function(y){return"dag"+(y===1?"":"er")},function(y){return"time"+(y===1?"":"r")},function(y){return"minutt"+(y===1?"":"er")},function(y){return"sekund"+(y===1?"":"er")},function(y){return"millisekund"+(y===1?"":"er")},","),pl:U(function(y){return["rok","roku","lata","lat"][F(y)]},function(y){return["miesi\u0105c","miesi\u0105ca","miesi\u0105ce","miesi\u0119cy"][F(y)]},function(y){return["tydzie\u0144","tygodnia","tygodnie","tygodni"][F(y)]},function(y){return["dzie\u0144","dnia","dni","dni"][F(y)]},function(y){return["godzina","godziny","godziny","godzin"][F(y)]},function(y){return["minuta","minuty","minuty","minut"][F(y)]},function(y){return["sekunda","sekundy","sekundy","sekund"][F(y)]},function(y){return["milisekunda","milisekundy","milisekundy","milisekund"][F(y)]},","),pt:U(function(y){return"ano"+(y===1?"":"s")},function(y){return y===1?"m\xEAs":"meses"},function(y){return"semana"+(y===1?"":"s")},function(y){return"dia"+(y===1?"":"s")},function(y){return"hora"+(y===1?"":"s")},function(y){return"minuto"+(y===1?"":"s")},function(y){return"segundo"+(y===1?"":"s")},function(y){return"milissegundo"+(y===1?"":"s")},","),ro:U(function(y){return y===1?"an":"ani"},function(y){return y===1?"lun\u0103":"luni"},function(y){return y===1?"s\u0103pt\u0103m\xE2n\u0103":"s\u0103pt\u0103m\xE2ni"},function(y){return y===1?"zi":"zile"},function(y){return y===1?"or\u0103":"ore"},function(y){return y===1?"minut":"minute"},function(y){return y===1?"secund\u0103":"secunde"},function(y){return y===1?"milisecund\u0103":"milisecunde"},","),ru:U(function(y){return["\u043B\u0435\u0442","\u0433\u043E\u0434","\u0433\u043E\u0434\u0430"][O(y)]},function(y){return["\u043C\u0435\u0441\u044F\u0446\u0435\u0432","\u043C\u0435\u0441\u044F\u0446","\u043C\u0435\u0441\u044F\u0446\u0430"][O(y)]},function(y){return["\u043D\u0435\u0434\u0435\u043B\u044C","\u043D\u0435\u0434\u0435\u043B\u044F","\u043D\u0435\u0434\u0435\u043B\u0438"][O(y)]},function(y){return["\u0434\u043D\u0435\u0439","\u0434\u0435\u043D\u044C","\u0434\u043D\u044F"][O(y)]},function(y){return["\u0447\u0430\u0441\u043E\u0432","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][O(y)]},function(y){return["\u043C\u0438\u043D\u0443\u0442","\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442\u044B"][O(y)]},function(y){return["\u0441\u0435\u043A\u0443\u043D\u0434","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u044B"][O(y)]},function(y){return["\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u044B"][O(y)]},","),sq:U(function(y){return y===1?"vit":"vjet"},"muaj","jav\xEB","dit\xEB","or\xEB",function(y){return"minut"+(y===1?"\xEB":"a")},function(y){return"sekond"+(y===1?"\xEB":"a")},function(y){return"milisekond"+(y===1?"\xEB":"a")},","),sr:U(function(y){return["\u0433\u043E\u0434\u0438\u043D\u0438","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0435"][O(y)]},function(y){return["\u043C\u0435\u0441\u0435\u0446\u0438","\u043C\u0435\u0441\u0435\u0446","\u043C\u0435\u0441\u0435\u0446\u0430"][O(y)]},function(y){return["\u043D\u0435\u0434\u0435\u0459\u0438","\u043D\u0435\u0434\u0435\u0459\u0430","\u043D\u0435\u0434\u0435\u0459\u0435"][O(y)]},function(y){return["\u0434\u0430\u043D\u0438","\u0434\u0430\u043D","\u0434\u0430\u043D\u0430"][O(y)]},function(y){return["\u0441\u0430\u0442\u0438","\u0441\u0430\u0442","\u0441\u0430\u0442\u0430"][O(y)]},function(y){return["\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442","\u043C\u0438\u043D\u0443\u0442\u0430"][O(y)]},function(y){return["\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0435"][O(y)]},function(y){return["\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0435"][O(y)]},","),ta:U(function(y){return y===1?"\u0BB5\u0BB0\u0BC1\u0B9F\u0BAE\u0BCD":"\u0B86\u0BA3\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD"},function(y){return y===1?"\u0BAE\u0BBE\u0BA4\u0BAE\u0BCD":"\u0BAE\u0BBE\u0BA4\u0B99\u0BCD\u0B95\u0BB3\u0BCD"},function(y){return y===1?"\u0BB5\u0BBE\u0BB0\u0BAE\u0BCD":"\u0BB5\u0BBE\u0BB0\u0B99\u0BCD\u0B95\u0BB3\u0BCD"},function(y){return y===1?"\u0BA8\u0BBE\u0BB3\u0BCD":"\u0BA8\u0BBE\u0B9F\u0BCD\u0B95\u0BB3\u0BCD"},function(y){return y===1?"\u0BAE\u0BA3\u0BBF":"\u0BAE\u0BA3\u0BBF\u0BA8\u0BC7\u0BB0\u0BAE\u0BCD"},function(y){return"\u0BA8\u0BBF\u0BAE\u0BBF\u0B9F"+(y===1?"\u0BAE\u0BCD":"\u0B99\u0BCD\u0B95\u0BB3\u0BCD")},function(y){return"\u0BB5\u0BBF\u0BA9\u0BBE\u0B9F\u0BBF"+(y===1?"":"\u0B95\u0BB3\u0BCD")},function(y){return"\u0BAE\u0BBF\u0BB2\u0BCD\u0BB2\u0BBF \u0BB5\u0BBF\u0BA8\u0BBE\u0B9F\u0BBF"+(y===1?"":"\u0B95\u0BB3\u0BCD")}),te:U(function(y){return"\u0C38\u0C02\u0C35\u0C24\u0C4D\u0C38"+(y===1?"\u0C30\u0C02":"\u0C30\u0C3E\u0C32")},function(y){return"\u0C28\u0C46\u0C32"+(y===1?"":"\u0C32")},function(y){return y===1?"\u0C35\u0C3E\u0C30\u0C02":"\u0C35\u0C3E\u0C30\u0C3E\u0C32\u0C41"},function(y){return"\u0C30\u0C4B\u0C1C\u0C41"+(y===1?"":"\u0C32\u0C41")},function(y){return"\u0C17\u0C02\u0C1F"+(y===1?"":"\u0C32\u0C41")},function(y){return y===1?"\u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C02":"\u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C3E\u0C32\u0C41"},function(y){return y===1?"\u0C38\u0C46\u0C15\u0C28\u0C41":"\u0C38\u0C46\u0C15\u0C28\u0C4D\u0C32\u0C41"},function(y){return y===1?"\u0C2E\u0C3F\u0C32\u0C4D\u0C32\u0C40\u0C38\u0C46\u0C15\u0C28\u0C4D":"\u0C2E\u0C3F\u0C32\u0C4D\u0C32\u0C40\u0C38\u0C46\u0C15\u0C28\u0C4D\u0C32\u0C41"}),uk:U(function(y){return["\u0440\u043E\u043A\u0456\u0432","\u0440\u0456\u043A","\u0440\u043E\u043A\u0438"][O(y)]},function(y){return["\u043C\u0456\u0441\u044F\u0446\u0456\u0432","\u043C\u0456\u0441\u044F\u0446\u044C","\u043C\u0456\u0441\u044F\u0446\u0456"][O(y)]},function(y){return["\u0442\u0438\u0436\u043D\u0456\u0432","\u0442\u0438\u0436\u0434\u0435\u043D\u044C","\u0442\u0438\u0436\u043D\u0456"][O(y)]},function(y){return["\u0434\u043D\u0456\u0432","\u0434\u0435\u043D\u044C","\u0434\u043D\u0456"][O(y)]},function(y){return["\u0433\u043E\u0434\u0438\u043D","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0438"][O(y)]},function(y){return["\u0445\u0432\u0438\u043B\u0438\u043D","\u0445\u0432\u0438\u043B\u0438\u043D\u0430","\u0445\u0432\u0438\u043B\u0438\u043D\u0438"][O(y)]},function(y){return["\u0441\u0435\u043A\u0443\u043D\u0434","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][O(y)]},function(y){return["\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][O(y)]},","),ur:U("\u0633\u0627\u0644",function(y){return y===1?"\u0645\u06C1\u06CC\u0646\u06C1":"\u0645\u06C1\u06CC\u0646\u06D2"},function(y){return y===1?"\u06C1\u0641\u062A\u06C1":"\u06C1\u0641\u062A\u06D2"},"\u062F\u0646",function(y){return y===1?"\u06AF\u06BE\u0646\u0679\u06C1":"\u06AF\u06BE\u0646\u0679\u06D2"},"\u0645\u0646\u0679","\u0633\u06CC\u06A9\u0646\u0688","\u0645\u0644\u06CC \u0633\u06CC\u06A9\u0646\u0688"),sk:U(function(y){return["rok","roky","roky","rokov"][P(y)]},function(y){return["mesiac","mesiace","mesiace","mesiacov"][P(y)]},function(y){return["t\xFD\u017Ede\u0148","t\xFD\u017Edne","t\xFD\u017Edne","t\xFD\u017Ed\u0148ov"][P(y)]},function(y){return["de\u0148","dni","dni","dn\xED"][P(y)]},function(y){return["hodina","hodiny","hodiny","hod\xEDn"][P(y)]},function(y){return["min\xFAta","min\xFAty","min\xFAty","min\xFAt"][P(y)]},function(y){return["sekunda","sekundy","sekundy","sek\xFAnd"][P(y)]},function(y){return["milisekunda","milisekundy","milisekundy","milisek\xFAnd"][P(y)]},","),sl:U(function(y){return y%10===1?"leto":y%100===2?"leti":y%100===3||y%100===4||Math.floor(y)!==y&&y%100<=5?"leta":"let"},function(y){return y%10===1?"mesec":y%100===2||Math.floor(y)!==y&&y%100<=5?"meseca":y%10===3||y%10===4?"mesece":"mesecev"},function(y){return y%10===1?"teden":y%10===2||Math.floor(y)!==y&&y%100<=4?"tedna":y%10===3||y%10===4?"tedne":"tednov"},function(y){return y%100===1?"dan":"dni"},function(y){return y%10===1?"ura":y%100===2?"uri":y%10===3||y%10===4||Math.floor(y)!==y?"ure":"ur"},function(y){return y%10===1?"minuta":y%10===2?"minuti":y%10===3||y%10===4||Math.floor(y)!==y&&y%100<=4?"minute":"minut"},function(y){return y%10===1?"sekunda":y%100===2?"sekundi":y%100===3||y%100===4||Math.floor(y)!==y?"sekunde":"sekund"},function(y){return y%10===1?"milisekunda":y%100===2?"milisekundi":y%100===3||y%100===4||Math.floor(y)!==y?"milisekunde":"milisekund"},","),sv:U("\xE5r",function(y){return"m\xE5nad"+(y===1?"":"er")},function(y){return"veck"+(y===1?"a":"or")},function(y){return"dag"+(y===1?"":"ar")},function(y){return"timm"+(y===1?"e":"ar")},function(y){return"minut"+(y===1?"":"er")},function(y){return"sekund"+(y===1?"":"er")},function(y){return"millisekund"+(y===1?"":"er")},","),sw:g(U(function(y){return y===1?"mwaka":"miaka"},function(y){return y===1?"mwezi":"miezi"},"wiki",function(y){return y===1?"siku":"masiku"},function(y){return y===1?"saa":"masaa"},"dakika","sekunde","milisekunde"),{_numberFirst:!0}),tr:U("y\u0131l","ay","hafta","g\xFCn","saat","dakika","saniye","milisaniye",","),th:U("\u0E1B\u0E35","\u0E40\u0E14\u0E37\u0E2D\u0E19","\u0E2A\u0E31\u0E1B\u0E14\u0E32\u0E2B\u0E4C","\u0E27\u0E31\u0E19","\u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07","\u0E19\u0E32\u0E17\u0E35","\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35","\u0E21\u0E34\u0E25\u0E25\u0E34\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35"),uz:U("yil","oy","hafta","kun","soat","minut","sekund","millisekund"),uz_CYR:U("\u0439\u0438\u043B","\u043E\u0439","\u04B3\u0430\u0444\u0442\u0430","\u043A\u0443\u043D","\u0441\u043E\u0430\u0442","\u043C\u0438\u043D\u0443\u0442","\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434"),vi:U("n\u0103m","th\xE1ng","tu\u1EA7n","ng\xE0y","gi\u1EDD","ph\xFAt","gi\xE2y","mili gi\xE2y",","),zh_CN:U("\u5E74","\u4E2A\u6708","\u5468","\u5929","\u5C0F\u65F6","\u5206\u949F","\u79D2","\u6BEB\u79D2"),zh_TW:U("\u5E74","\u500B\u6708","\u5468","\u5929","\u5C0F\u6642","\u5206\u9418","\u79D2","\u6BEB\u79D2")};function U(y,k,M,I,T,K,$,ne,ae){var oe={y,mo:k,w:M,d:I,h:T,m:K,s:$,ms:ne};return typeof ae!="undefined"&&(oe.decimal=ae),oe}function j(y){return y===2?1:y>2&&y<11?2:0}function F(y){return y===1?0:Math.floor(y)!==y?1:y%10>=2&&y%10<=4&&!(y%100>10&&y%100<20)?2:3}function O(y){return Math.floor(y)!==y?2:y%100>=5&&y%100<=20||y%10>=5&&y%10<=9||y%10===0?0:y%10===1?1:y>1?2:0}function P(y){return y===1?0:Math.floor(y)!==y?1:y%10>=2&&y%10<=4&&y%100<10?2:3}function G(y){return y===1||y%10===1&&y%100>20?0:Math.floor(y)!==y||y%10>=2&&y%100>20||y%10>=2&&y%100<10?1:2}function Y(y){return y%10===1&&y%100!==11}function Q(y,k){return Object.prototype.hasOwnProperty.call(y,k)}function ee(y){var k=[y.language];if(Q(y,"fallbacks"))if(_(y.fallbacks)&&y.fallbacks.length)k=k.concat(y.fallbacks);else throw new Error("fallbacks must be an array with at least one element");for(var M=0;M<k.length;M++){var I=k[M];if(Q(y.languages,I))return y.languages[I];if(Q(X,I))return X[I]}throw new Error("No language found.")}function ie(y,k,M){var I=y.unitName,T=y.unitCount,K=M.spacer,$=M.maxDecimalPoints,ne;Q(M,"decimal")?ne=M.decimal:Q(k,"decimal")?ne=k.decimal:ne=".";var ae;"digitReplacements"in M?ae=M.digitReplacements:"_digitReplacements"in k&&(ae=k._digitReplacements);var oe,re=$===void 0?T:Math.floor(T*Math.pow(10,$))/Math.pow(10,$),me=re.toString();if(k._hideCountIf2&&T===2)oe="",K="";else if(ae){oe="";for(var Le=0;Le<me.length;Le++){var ze=me[Le];ze==="."?oe+=ne:oe+=ae[ze]}}else oe=me.replace(".",ne);var _e=k[I],Ie;return typeof _e=="function"?Ie=_e(T):Ie=_e,k._numberFirst?Ie+K+oe:oe+K+Ie}function te(y,k){var M,I,T,K,$=k.units,ne=k.unitMeasures,ae="largest"in k?k.largest:1/0;if(!$.length)return[];var oe={};for(K=y,I=0;I<$.length;I++){M=$[I];var re=ne[M],me=I===$.length-1;T=me?K/re:Math.floor(K/re),oe[M]=T,K-=T*re}if(k.round){var Le=ae;for(I=0;I<$.length;I++)if(M=$[I],T=oe[M],T!==0&&(Le--,Le===0)){for(var ze=I+1;ze<$.length;ze++){var _e=$[ze],Ie=oe[_e];oe[M]+=Ie*ne[_e]/ne[M],oe[_e]=0}break}for(I=$.length-1;I>=0;I--)if(M=$[I],T=oe[M],T!==0){var De=Math.round(T);if(oe[M]=De,I===0)break;var xt=$[I-1],ut=ne[xt],Xe=Math.floor(De*ne[M]/ut);if(Xe)oe[xt]+=Xe,oe[M]=0;else break}}var jn=[];for(I=0;I<$.length&&jn.length<ae;I++)M=$[I],T=oe[M],T&&jn.push({unitName:M,unitCount:T});return jn}function q(y,k){var M=ee(k);if(!y.length){var I=k.units,T=I[I.length-1];return ie({unitName:T,unitCount:0},M,k)}var K=k.conjunction,$=k.serialComma,ne;Q(k,"delimiter")?ne=k.delimiter:Q(M,"delimiter")?ne=M.delimiter:ne=", ";for(var ae=[],oe=0;oe<y.length;oe++)ae.push(ie(y[oe],M,k));return!K||y.length===1?ae.join(ne):y.length===2?ae.join(K):ae.slice(0,-1).join(ne)+($?",":"")+K+ae.slice(-1)}function R(y){var k=function(I,T){I=Math.abs(I);var K=g({},k,T||{}),$=te(I,K);return q($,K)};return g(k,{language:"en",spacer:" ",conjunction:"",serialComma:!0,units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},y)}var H=g(R({}),{getSupportedLanguages:function(){var k=[];for(var M in X)Q(X,M)&&M!=="gr"&&k.push(M);return k},humanizer:R});D=function(){return H}.call(L,S,L,se),D!==void 0&&(se.exports=D)})()},12651:(se,L,S)=>{var D=S(46343),g=S(40074),_=S(82438),N=S(19106),X=S(32293),U=S(30306),j=S(48360),F=S(22563),O=re=>Array.isArray(re)?re:[re],P=re=>re===void 0,G=re=>j(re)||Array.isArray(re)?Object.keys(re):[],Y=(re,me)=>re.hasOwnProperty(me),Q=re=>g(_(re)),ee=re=>P(re)||Array.isArray(re)&&re.length===0,ie=(re,me,Le,ze)=>me&&Y(me,Le)&&re&&Y(re,Le)&&ze(re[Le],me[Le]),te=(re,me)=>P(re)&&me===0||P(me)&&re===0||D(re,me),q=(re,me)=>P(re)&&me===!1||P(me)&&re===!1||D(re,me),R=re=>P(re)||D(re,{})||re===!0,H=re=>P(re)||D(re,{}),y=re=>P(re)||j(re)||re===!0||re===!1;function k(re,me){return ee(re)&&ee(me)?!0:D(Q(re),Q(me))}function M(re,me){return re=O(re),me=O(me),D(Q(re),Q(me))}function I(re,me,Le,ze){var _e=_(G(re).concat(G(me)));return H(re)&&H(me)?!0:H(re)&&G(me).length||H(me)&&G(re).length?!1:_e.every(function(Ie){var De=re[Ie],xt=me[Ie];return Array.isArray(De)&&Array.isArray(xt)?D(Q(re),Q(me)):Array.isArray(De)&&!Array.isArray(xt)||Array.isArray(xt)&&!Array.isArray(De)?!1:ie(re,me,Ie,ze)})}function T(re,me,Le,ze){return j(re)&&j(me)?ze(re,me):Array.isArray(re)&&Array.isArray(me)?I(re,me,Le,ze):D(re,me)}function K(re,me,Le,ze){var _e=N(re,ze),Ie=N(me,ze),De=U(_e,Ie,ze);return De.length===Math.max(_e.length,Ie.length)}var $={title:D,uniqueItems:q,minLength:te,minItems:te,minProperties:te,required:k,enum:k,type:M,items:T,anyOf:K,allOf:K,oneOf:K,properties:I,patternProperties:I,dependencies:I},ne=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],ae=["additionalProperties","additionalItems","contains","propertyNames","not"];function oe(re,me,Le){if(Le=X(Le,{ignore:[]}),R(re)&&R(me))return!0;if(!y(re)||!y(me))throw new Error("Either of the values are not a JSON schema.");if(re===me)return!0;if(F(re)&&F(me))return re===me;if(re===void 0&&me===!1||me===void 0&&re===!1||P(re)&&!P(me)||!P(re)&&P(me))return!1;var ze=_(Object.keys(re).concat(Object.keys(me)));if(Le.ignore.length&&(ze=ze.filter(Ie=>Le.ignore.indexOf(Ie)===-1)),!ze.length)return!0;function _e(Ie,De){return oe(Ie,De,Le)}return ze.every(function(Ie){var De=re[Ie],xt=me[Ie];if(ae.indexOf(Ie)!==-1)return oe(De,xt,Le);var ut=$[Ie];if(ut||(ut=D),D(De,xt))return!0;if(ne.indexOf(Ie)===-1&&(!Y(re,Ie)&&Y(me,Ie)||Y(re,Ie)&&!Y(me,Ie)))return De===xt;var Xe=ut(De,xt,Ie,_e);if(!F(Xe))throw new Error("Comparer must return true or false");return Xe})}se.exports=oe},28690:(se,L,S)=>{const D=S(75857),g=S(53435),_=S(48360),N=S(82438),X=S(19106),U=S(30795);function j(te){for(const q in te)P(te,q)&&ee(te[q])&&delete te[q];return te}const F=te=>N(g(te.map(G))),O=(te,q)=>te.map(R=>R&&R[q]),P=(te,q)=>Object.prototype.hasOwnProperty.call(te,q),G=te=>_(te)||Array.isArray(te)?Object.keys(te):[],Y=te=>te!==void 0,Q=te=>_(te)||te===!0||te===!1,ee=te=>!G(te).length&&te!==!1&&te!==!0,ie=(te,...q)=>U.apply(null,[te].concat(D(q)));se.exports={allUniqueKeys:F,deleteUndefinedProps:j,getValues:O,has:P,isEmptySchema:ee,isSchema:Q,keys:G,notUndefined:Y,uniqWith:X,withoutArr:ie}},52474:(se,L,S)=>{const D=S(12651),g=S(83657),{allUniqueKeys:_,deleteUndefinedProps:N,has:X,isSchema:U,notUndefined:j,uniqWith:F}=S(28690);function O(Q){g(Q,function(ee,ie){ee===!1&&Q.splice(ie,1)})}function P(Q,ee){return Q.map(function(ie){if(ie)if(Array.isArray(ie.items)){const te=ie.items[ee];if(U(te))return te;if(X(ie,"additionalItems"))return ie.additionalItems}else return ie.items})}function G(Q){return Q.map(function(ee){if(ee)return Array.isArray(ee.items)?ee.additionalItems:ee.items})}function Y(Q,ee,ie){return _(ie).reduce(function(q,R){const H=P(Q,R),y=F(H.filter(j),D);return q[R]=ee(y,R),q},[])}se.exports={keywords:["items","additionalItems"],resolver(Q,ee,ie){const te=Q.map(y=>y.items),q=te.filter(j),R={};q.every(U)?R.items=ie.items(te):R.items=Y(Q,ie.items,te);let H;return q.every(Array.isArray)?H=Q.map(y=>y.additionalItems):q.some(Array.isArray)&&(H=G(Q)),H&&(R.additionalItems=ie.additionalItems(H)),R.additionalItems===!1&&Array.isArray(R.items)&&O(R.items),N(R)}}},51537:(se,L,S)=>{const D=S(12651),g=S(83657),{allUniqueKeys:_,deleteUndefinedProps:N,getValues:X,keys:U,notUndefined:j,uniqWith:F,withoutArr:O}=S(28690);function P(Y){g(Y,function(Q,ee){Q===!1&&delete Y[ee]})}function G(Y,Q){return _(Y).reduce(function(ie,te){const q=X(Y,te),R=F(q.filter(j),D);return ie[te]=Q(R,te),ie},{})}se.exports={keywords:["properties","patternProperties","additionalProperties"],resolver(Y,Q,ee,ie){ie.ignoreAdditionalProperties||(Y.forEach(function(q){const R=Y.filter(M=>M!==q),H=U(q.properties),k=U(q.patternProperties).map(M=>new RegExp(M));R.forEach(function(M){const I=U(M.properties),T=I.filter($=>k.some(ne=>ne.test($)));O(I,H,T).forEach(function($){M.properties[$]=ee.properties([M.properties[$],q.additionalProperties],$)})})}),Y.forEach(function(q){const R=Y.filter(y=>y!==q),H=U(q.patternProperties);q.additionalProperties===!1&&R.forEach(function(y){const k=U(y.patternProperties);O(k,H).forEach(I=>delete y.patternProperties[I])})}));const te={additionalProperties:ee.additionalProperties(Y.map(q=>q.additionalProperties)),patternProperties:G(Y.map(q=>q.patternProperties),ee.patternProperties),properties:G(Y.map(q=>q.properties),ee.properties)};return te.additionalProperties===!1&&P(te.properties),N(te)}}},587:(se,L,S)=>{const D=S(46108),g=S(12651),_=S(23050),N=S(69383),X=S(75857),U=S(53435),j=S(58150),F=S(30306),O=S(46343),P=S(48360),G=S(92962),Y=S(40074),Q=S(82438),ee=S(19106),ie=S(51537),te=S(52474),q=(pe,Ue)=>pe.indexOf(Ue)!==-1,R=pe=>P(pe)||pe===!0||pe===!1,H=pe=>pe===!1,y=pe=>pe===!0,k=(pe,Ue,Ce)=>Ce(pe),M=pe=>Y(Q(U(pe))),I=pe=>pe!==void 0,T=pe=>Q(U(pe.map(Ie))),K=pe=>pe[0],$=pe=>M(pe),ne=pe=>Math.max.apply(Math,pe),ae=pe=>Math.min.apply(Math,pe),oe=pe=>pe.some(y),re=pe=>ee(X(pe),O);function me(pe){return function(Ue,Ce){return g({[pe]:Ue},{[pe]:Ce})}}function Le(pe){let{allOf:Ue=[],...Ce}=pe;return Ce=P(pe)?Ce:pe,[Ce,...Ue.map(Le)]}function ze(pe,Ue){return pe.map(Ce=>Ce&&Ce[Ue])}function _e(pe,Ue){return pe.map(function(Ce,st){try{return Ue(Ce,st)}catch{return}}).filter(I)}function Ie(pe){return P(pe)||Array.isArray(pe)?Object.keys(pe):[]}function De(pe,Ue){if(Ue=Ue||[],!pe.length)return Ue;const Ce=pe.slice(0).shift(),st=pe.slice(1);return Ue.length?De(st,X(Ue.map(Rt=>Ce.map(Gt=>[Gt].concat(Rt))))):De(st,Ce.map(Rt=>Rt))}function xt(pe,Ue){let Ce;try{Ce=pe.map(function(st){return JSON.stringify(st,null,2)}).join(`
`)}catch{Ce=pe.join(", ")}throw new Error('Could not resolve values for path:"'+Ue.join(".")+`". They are probably incompatible. Values: 
`+Ce)}function ut(pe,Ue,Ce,st,Rt,Gt){if(pe.length){const Xt=Rt.complexResolvers[Ue];if(!Xt||!Xt.resolver)throw new Error("No resolver found for "+Ue);const Nt=Ce.map(mr=>pe.reduce((Qt,ht)=>(mr[ht]!==void 0&&(Qt[ht]=mr[ht]),Qt),{})),hr=ee(Nt,g),xn=Xt.keywords.reduce((mr,Qt)=>({...mr,[Qt]:(ht,Ir=[])=>st(ht,null,Gt.concat(Qt,Ir))}),{}),Ve=Xt.resolver(hr,Gt.concat(Ue),xn,Rt);return P(Ve)||xt(hr,Gt.concat(Ue)),Ve}}function Xe(pe){return{required:pe}}const jn=["properties","patternProperties","definitions","dependencies"],Kt=["anyOf","oneOf"],dn=["additionalProperties","additionalItems","contains","propertyNames","not","items"],tt={type(pe){if(pe.some(Array.isArray)){const Ue=pe.map(function(st){return Array.isArray(st)?st:[st]}),Ce=j.apply(null,Ue);if(Ce.length===1)return Ce[0];if(Ce.length>1)return Q(Ce)}},dependencies(pe,Ue,Ce){return T(pe).reduce(function(Rt,Gt){const Xt=ze(pe,Gt);let Nt=ee(Xt.filter(I),O);const hr=Nt.filter(Array.isArray);if(hr.length){if(hr.length===Nt.length)Rt[Gt]=M(Nt);else{const xn=Nt.filter(R),Ve=hr.map(Xe);Rt[Gt]=Ce(xn.concat(Ve),Gt)}return Rt}return Nt=ee(Nt,g),Rt[Gt]=Ce(Nt,Gt),Rt},{})},oneOf(pe,Ue,Ce){const st=De(D(pe)),Rt=_e(st,Ce),Gt=ee(Rt,g);if(Gt.length)return Gt},not(pe){return{anyOf:pe}},pattern(pe){return pe.map(Ue=>"(?="+Ue+")").join("")},multipleOf(pe){let Ue=pe.slice(0),Ce=1;for(;Ue.some(st=>!Number.isInteger(st));)Ue=Ue.map(st=>st*10),Ce=Ce*10;return _(Ue)/Ce},enum(pe){const Ue=F.apply(null,pe.concat(O));if(Ue.length)return Y(Ue)}};tt.$id=K,tt.$ref=K,tt.$schema=K,tt.additionalItems=k,tt.additionalProperties=k,tt.anyOf=tt.oneOf,tt.contains=k,tt.default=K,tt.definitions=tt.dependencies,tt.description=K,tt.examples=re,tt.exclusiveMaximum=ae,tt.exclusiveMinimum=ne,tt.items=te,tt.maximum=ae,tt.maxItems=ae,tt.maxLength=ae,tt.maxProperties=ae,tt.minimum=ne,tt.minItems=ne,tt.minLength=ne,tt.minProperties=ne,tt.properties=ie,tt.propertyNames=k,tt.required=$,tt.title=K,tt.uniqueItems=oe;const Bl={properties:ie,items:te};function Js(pe,Ue,Ce){Ce=Ce||[],Ue=N(Ue,{ignoreAdditionalProperties:!1,resolvers:tt,complexResolvers:Bl,deep:!0});const st=Object.entries(Ue.complexResolvers);function Rt(Nt,hr,xn){Nt=D(Nt.filter(I)),xn=xn||[];const Ve=P(hr)?hr:{};if(!Nt.length)return;if(Nt.some(H))return!1;if(Nt.every(y))return!0;Nt=Nt.filter(P);const mr=T(Nt);if(Ue.deep&&q(mr,"allOf"))return Js({allOf:Nt},Ue,Ce);const Qt=st.map(([ht,Ir])=>mr.filter(gt=>Ir.keywords.includes(gt)));return Qt.forEach(ht=>G(mr,ht)),mr.forEach(function(ht){const Ir=ze(Nt,ht),gt=ee(Ir.filter(I),me(ht));if(gt.length===1&&q(Kt,ht))Ve[ht]=gt[0].map(bt=>Rt([bt],bt));else if(gt.length===1&&!q(jn,ht)&&!q(dn,ht))Ve[ht]=gt[0];else{const bt=Ue.resolvers[ht]||Ue.resolvers.defaultResolver;if(!bt)throw new Error("No resolver found for key "+ht+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const bf=(Ti,Zs=[])=>Rt(Ti,null,xn.concat(ht,Zs));Ve[ht]=bt(gt,xn.concat(ht),bf,Ue),Ve[ht]===void 0?xt(gt,xn.concat(ht)):Ve[ht]===void 0&&delete Ve[ht]}}),st.reduce((ht,[Ir,gt],bt)=>({...ht,...ut(Qt[bt],Ir,Nt,Rt,Ue,xn)}),Ve)}const Gt=U(Le(pe));return Rt(Gt)}Js.options={resolvers:tt},se.exports=Js},45838:(se,L)=>{var S=/~/,D=/~[01]/g;function g(O){switch(O){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+O)}function _(O){return S.test(O)?O.replace(D,g):O}function N(O,P,G){for(var Y,Q,ee=1,ie=P.length;ee<ie;){if(P[ee]==="constructor"||P[ee]==="prototype"||P[ee]==="__proto__")return O;if(Y=_(P[ee++]),Q=ie>ee,typeof O[Y]=="undefined"&&(Array.isArray(O)&&Y==="-"&&(Y=O.length),Q&&(P[ee]!==""&&P[ee]<1/0||P[ee]==="-"?O[Y]=[]:O[Y]={})),!Q)break;O=O[Y]}var te=O[Y];return G===void 0?delete O[Y]:O[Y]=G,te}function X(O){if(typeof O=="string"){if(O=O.split("/"),O[0]==="")return O;throw new Error("Invalid JSON pointer.")}else if(Array.isArray(O)){for(const P of O)if(typeof P!="string"&&typeof P!="number")throw new Error("Invalid JSON pointer. Must be of type string or number.");return O}throw new Error("Invalid JSON pointer.")}function U(O,P){if(typeof O!="object")throw new Error("Invalid input object.");P=X(P);var G=P.length;if(G===1)return O;for(var Y=1;Y<G;){if(O=O[_(P[Y++])],G===Y)return O;if(typeof O!="object"||O===null)return}}function j(O,P,G){if(typeof O!="object")throw new Error("Invalid input object.");if(P=X(P),P.length===0)throw new Error("Invalid JSON pointer for set.");return N(O,P,G)}function F(O){var P=X(O);return{get:function(G){return U(G,P)},set:function(G,Y){return j(G,P,Y)}}}L.get=U,L.set=j,L.compile=F},96576:(se,L,S)=>{var D=S(23212),g=S(59756),_=S(43316),N=S(65111),X=S(49460),U=S(65568),j=200;function F(O,P,G,Y){var Q=-1,ee=g,ie=!0,te=O.length,q=[],R=P.length;if(!te)return q;G&&(P=N(P,X(G))),Y?(ee=_,ie=!1):P.length>=j&&(ee=U,ie=!1,P=new D(P));e:for(;++Q<te;){var H=O[Q],y=G==null?H:G(H);if(H=Y||H!==0?H:0,ie&&y===y){for(var k=R;k--;)if(P[k]===y)continue e;q.push(H)}else ee(P,y,Y)||q.push(H)}return q}se.exports=F},38250:se=>{function L(S,D,g,_){for(var N=g-1,X=S.length;++N<X;)if(_(S[N],D))return N;return-1}se.exports=L},93854:(se,L,S)=>{var D=S(23212),g=S(59756),_=S(43316),N=S(65111),X=S(49460),U=S(65568),j=Math.min;function F(O,P,G){for(var Y=G?_:g,Q=O[0].length,ee=O.length,ie=ee,te=Array(ee),q=1/0,R=[];ie--;){var H=O[ie];ie&&P&&(H=N(H,X(P))),q=j(H.length,q),te[ie]=!G&&(P||Q>=120&&H.length>=120)?new D(ie&&H):void 0}H=O[0];var y=-1,k=te[0];e:for(;++y<Q&&R.length<q;){var M=H[y],I=P?P(M):M;if(M=G||M!==0?M:0,!(k?U(k,I):Y(R,I,G))){for(ie=ee;--ie;){var T=te[ie];if(!(T?U(T,I):Y(O[ie],I,G)))continue e}k&&k.push(I),R.push(M)}}return R}se.exports=F},49261:(se,L,S)=>{var D=S(65111),g=S(2478),_=S(38250),N=S(49460),X=S(84354),U=Array.prototype,j=U.splice;function F(O,P,G,Y){var Q=Y?_:g,ee=-1,ie=P.length,te=O;for(O===P&&(P=X(P)),G&&(te=D(O,N(G)));++ee<ie;)for(var q=0,R=P[ee],H=G?G(R):R;(q=Q(te,H,q,Y))>-1;)te!==O&&j.call(te,q,1),j.call(O,q,1);return O}se.exports=F},47648:(se,L,S)=>{var D=S(65406);function g(_){return D(_)?_:[]}se.exports=g},52107:(se,L,S)=>{var D=S(40091),g=S(41580);function _(N,X,U,j,F,O){return g(N)&&g(X)&&(O.set(X,N),D(N,X,void 0,_,O),O.delete(X)),N}se.exports=_},69383:(se,L,S)=>{var D=S(86912),g=S(23945),_=S(52107),N=S(48875),X=g(function(U){return U.push(void 0,_),D(N,void 0,U)});se.exports=X},53435:(se,L,S)=>{var D=S(90313),g=1/0;function _(N){var X=N==null?0:N.length;return X?D(N,g):[]}se.exports=_},58150:(se,L,S)=>{var D=S(65111),g=S(93854),_=S(23945),N=S(47648),X=_(function(U){var j=D(U,N);return j.length&&j[0]===U[0]?g(j):[]});se.exports=X},30306:(se,L,S)=>{var D=S(65111),g=S(93854),_=S(23945),N=S(47648),X=S(98087),U=_(function(j){var F=X(j),O=D(j,N);return F=typeof F=="function"?F:void 0,F&&O.pop(),O.length&&O[0]===j[0]?g(O,void 0,F):[]});se.exports=U},40575:(se,L,S)=>{var D=S(94687);function g(_,N,X){X=typeof X=="function"?X:void 0;var U=X?X(_,N):void 0;return U===void 0?D(_,N,void 0,X):!!U}se.exports=g},3668:se=>{function L(S){return S==null}se.exports=L},48875:(se,L,S)=>{var D=S(40091),g=S(77848),_=g(function(N,X,U,j){D(N,X,U,j)});se.exports=_},92962:(se,L,S)=>{var D=S(49261);function g(_,N){return _&&_.length&&N&&N.length?D(_,N):_}se.exports=g},41263:(se,L,S)=>{var D=S(87655);function g(_,N,X){return _==null?_:D(_,N,X)}se.exports=g},95479:(se,L,S)=>{var D=S(93640),g=S(5485),_=D(function(N,X,U){return N+(U?" ":"")+g(X)});se.exports=_},55009:(se,L,S)=>{var D=S(26137),g=S(23997),_=S(67642),N=9007199254740991,X=4294967295,U=Math.min;function j(F,O){if(F=_(F),F<1||F>N)return[];var P=X,G=U(F,X);O=g(O),F-=X;for(var Y=D(G,O);++P<F;)O(P);return Y}se.exports=j},82438:(se,L,S)=>{var D=S(15630);function g(_){return _&&_.length?D(_):[]}se.exports=g},19106:(se,L,S)=>{var D=S(15630);function g(_,N){return N=typeof N=="function"?N:void 0,_&&_.length?D(_,void 0,N):[]}se.exports=g},73450:(se,L,S)=>{var D=S(81586);function g(_,N){return _==null?!0:D(_,N)}se.exports=g},30795:(se,L,S)=>{var D=S(96576),g=S(23945),_=S(65406),N=g(function(X,U){return _(X)?D(X,U):[]});se.exports=N},63662:function(se){(function(L,S){se.exports?se.exports=S():L.nearley=S()})(this,function(){function L(j,F,O){return this.id=++L.highestId,this.name=j,this.symbols=F,this.postprocess=O,this}L.highestId=0,L.prototype.toString=function(j){var F=typeof j=="undefined"?this.symbols.map(U).join(" "):this.symbols.slice(0,j).map(U).join(" ")+" \u25CF "+this.symbols.slice(j).map(U).join(" ");return this.name+" \u2192 "+F};function S(j,F,O,P){this.rule=j,this.dot=F,this.reference=O,this.data=[],this.wantedBy=P,this.isComplete=this.dot===j.symbols.length}S.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},S.prototype.nextState=function(j){var F=new S(this.rule,this.dot+1,this.reference,this.wantedBy);return F.left=this,F.right=j,F.isComplete&&(F.data=F.build(),F.right=void 0),F},S.prototype.build=function(){var j=[],F=this;do j.push(F.right.data),F=F.left;while(F.left);return j.reverse(),j},S.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,N.fail))};function D(j,F){this.grammar=j,this.index=F,this.states=[],this.wants={},this.scannable=[],this.completed={}}D.prototype.process=function(j){for(var F=this.states,O=this.wants,P=this.completed,G=0;G<F.length;G++){var Y=F[G];if(Y.isComplete){if(Y.finish(),Y.data!==N.fail){for(var Q=Y.wantedBy,ee=Q.length;ee--;){var ie=Q[ee];this.complete(ie,Y)}if(Y.reference===this.index){var te=Y.rule.name;(this.completed[te]=this.completed[te]||[]).push(Y)}}}else{var te=Y.rule.symbols[Y.dot];if(typeof te!="string"){this.scannable.push(Y);continue}if(O[te]){if(O[te].push(Y),P.hasOwnProperty(te))for(var q=P[te],ee=0;ee<q.length;ee++){var R=q[ee];this.complete(Y,R)}}else O[te]=[Y],this.predict(te)}}},D.prototype.predict=function(j){for(var F=this.grammar.byName[j]||[],O=0;O<F.length;O++){var P=F[O],G=this.wants[j],Y=new S(P,0,this.index,G);this.states.push(Y)}},D.prototype.complete=function(j,F){var O=j.nextState(F);this.states.push(O)};function g(j,F){this.rules=j,this.start=F||this.rules[0].name;var O=this.byName={};this.rules.forEach(function(P){O.hasOwnProperty(P.name)||(O[P.name]=[]),O[P.name].push(P)})}g.fromCompiled=function(P,F){var O=P.Lexer;P.ParserStart&&(F=P.ParserStart,P=P.ParserRules);var P=P.map(function(Y){return new L(Y.name,Y.symbols,Y.postprocess)}),G=new g(P,F);return G.lexer=O,G};function _(){this.reset("")}_.prototype.reset=function(j,F){this.buffer=j,this.index=0,this.line=F?F.line:1,this.lastLineBreak=F?-F.col:0},_.prototype.next=function(){if(this.index<this.buffer.length){var j=this.buffer[this.index++];return j===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:j}}},_.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},_.prototype.formatError=function(j,F){var O=this.buffer;if(typeof O=="string"){var P=O.split(`
`).slice(Math.max(0,this.line-5),this.line),G=O.indexOf(`
`,this.index);G===-1&&(G=O.length);var Y=this.index-this.lastLineBreak,Q=String(this.line).length;return F+=" at line "+this.line+" col "+Y+`:

`,F+=P.map(function(ie,te){return ee(this.line-P.length+te+1,Q)+" "+ie},this).join(`
`),F+=`
`+ee("",Q+Y)+`^
`,F}else return F+" at index "+(this.index-1);function ee(ie,te){var q=String(ie);return Array(te-q.length+1).join(" ")+q}};function N(j,F,O){if(j instanceof g)var P=j,O=F;else var P=g.fromCompiled(j,F);this.grammar=P,this.options={keepHistory:!1,lexer:P.lexer||new _};for(var G in O||{})this.options[G]=O[G];this.lexer=this.options.lexer,this.lexerState=void 0;var Y=new D(P,0),Q=this.table=[Y];Y.wants[P.start]=[],Y.predict(P.start),Y.process(),this.current=0}N.fail={},N.prototype.feed=function(j){var F=this.lexer;F.reset(j,this.lexerState);for(var O;;){try{if(O=F.next(),!O)break}catch(k){var Q=new D(this.grammar,this.current+1);this.table.push(Q);var P=new Error(this.reportLexerError(k));throw P.offset=this.current,P.token=k.token,P}var G=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var Y=this.current+1,Q=new D(this.grammar,Y);this.table.push(Q);for(var ee=O.text!==void 0?O.text:O.value,ie=F.constructor===_?O.value:O,te=G.scannable,q=te.length;q--;){var R=te[q],H=R.rule.symbols[R.dot];if(H.test?H.test(ie):H.type?H.type===O.type:H.literal===ee){var y=R.nextState({data:ie,token:O,isToken:!0,reference:Y-1});Q.states.push(y)}}if(Q.process(),Q.states.length===0){var P=new Error(this.reportError(O));throw P.offset=this.current,P.token=O,P}this.options.keepHistory&&(G.lexerState=F.save()),this.current++}return G&&(this.lexerState=F.save()),this.results=this.finish(),this},N.prototype.reportLexerError=function(j){var F,O,P=j.token;return P?(F="input "+JSON.stringify(P.text[0])+" (lexer error)",O=this.lexer.formatError(P,"Syntax error")):(F="input (lexer error)",O=j.message),this.reportErrorCommon(O,F)},N.prototype.reportError=function(j){var F=(j.type?j.type+" token: ":"")+JSON.stringify(j.value!==void 0?j.value:j),O=this.lexer.formatError(j,"Syntax error");return this.reportErrorCommon(O,F)},N.prototype.reportErrorCommon=function(j,F){var O=[];O.push(j);var P=this.table.length-2,G=this.table[P],Y=G.states.filter(function(ee){var ie=ee.rule.symbols[ee.dot];return ie&&typeof ie!="string"});if(Y.length===0)O.push("Unexpected "+F+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(G.states,O);else{O.push("Unexpected "+F+`. Instead, I was expecting to see one of the following:
`);var Q=Y.map(function(ee){return this.buildFirstStateStack(ee,[])||[ee]},this);Q.forEach(function(ee){var ie=ee[0],te=ie.rule.symbols[ie.dot],q=this.getSymbolDisplay(te);O.push("A "+q+" based on:"),this.displayStateStack(ee,O)},this)}return O.push(""),O.join(`
`)},N.prototype.displayStateStack=function(j,F){for(var O,P=0,G=0;G<j.length;G++){var Y=j[G],Q=Y.rule.toString(Y.dot);Q===O?P++:(P>0&&F.push("    ^ "+P+" more lines identical to this"),P=0,F.push("    "+Q)),O=Q}},N.prototype.getSymbolDisplay=function(j){return X(j)},N.prototype.buildFirstStateStack=function(j,F){if(F.indexOf(j)!==-1)return null;if(j.wantedBy.length===0)return[j];var O=j.wantedBy[0],P=[j].concat(F),G=this.buildFirstStateStack(O,P);return G===null?null:[j].concat(G)},N.prototype.save=function(){var j=this.table[this.current];return j.lexerState=this.lexerState,j},N.prototype.restore=function(j){var F=j.index;this.current=F,this.table[F]=j,this.table.splice(F+1),this.lexerState=j.lexerState,this.results=this.finish()},N.prototype.rewind=function(j){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[j])},N.prototype.finish=function(){var j=[],F=this.grammar.start,O=this.table[this.table.length-1];return O.states.forEach(function(P){P.rule.name===F&&P.dot===P.rule.symbols.length&&P.reference===0&&P.data!==N.fail&&j.push(P)}),j.map(function(P){return P.data})};function X(j){var F=typeof j;if(F==="string")return j;if(F==="object"){if(j.literal)return JSON.stringify(j.literal);if(j instanceof RegExp)return"character matching "+j;if(j.type)return j.type+" token";if(j.test)return"token matching "+String(j.test);throw new Error("Unknown symbol type: "+j)}}function U(j){var F=typeof j;if(F==="string")return j;if(F==="object"){if(j.literal)return JSON.stringify(j.literal);if(j instanceof RegExp)return j.toString();if(j.type)return"%"+j.type;if(j.test)return"<"+String(j.test)+">";throw new Error("Unknown symbol type: "+j)}}return{Parser:N,Grammar:g,Rule:L}})},11442:(se,L,S)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"DraggableCore",{enumerable:!0,get:function(){return F.default}}),L.default=void 0;var D=Y(S(14041)),g=P(S(39067)),_=P(S(43144)),N=P(S(9546)),X=S(1154),U=S(69951),j=S(37201),F=P(S(43605)),O=P(S(48013));function P(R){return R&&R.__esModule?R:{default:R}}function G(R){if(typeof WeakMap!="function")return null;var H=new WeakMap,y=new WeakMap;return(G=function(k){return k?y:H})(R)}function Y(R,H){if(!H&&R&&R.__esModule)return R;if(R===null||typeof R!="object"&&typeof R!="function")return{default:R};var y=G(H);if(y&&y.has(R))return y.get(R);var k={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in R)if(I!=="default"&&Object.prototype.hasOwnProperty.call(R,I)){var T=M?Object.getOwnPropertyDescriptor(R,I):null;T&&(T.get||T.set)?Object.defineProperty(k,I,T):k[I]=R[I]}return k.default=R,y&&y.set(R,k),k}function Q(){return Q=Object.assign?Object.assign.bind():function(R){for(var H=1;H<arguments.length;H++){var y=arguments[H];for(var k in y)Object.prototype.hasOwnProperty.call(y,k)&&(R[k]=y[k])}return R},Q.apply(this,arguments)}function ee(R,H,y){return H=ie(H),H in R?Object.defineProperty(R,H,{value:y,enumerable:!0,configurable:!0,writable:!0}):R[H]=y,R}function ie(R){var H=te(R,"string");return typeof H=="symbol"?H:String(H)}function te(R,H){if(typeof R!="object"||R===null)return R;var y=R[Symbol.toPrimitive];if(y!==void 0){var k=y.call(R,H||"default");if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(R)}class q extends D.Component{static getDerivedStateFromProps(H,y){let{position:k}=H,{prevPropsPosition:M}=y;return k&&(!M||k.x!==M.x||k.y!==M.y)?((0,O.default)("Draggable: getDerivedStateFromProps %j",{position:k,prevPropsPosition:M}),{x:k.x,y:k.y,prevPropsPosition:{...k}}):null}constructor(H){super(H),ee(this,"onDragStart",(y,k)=>{if((0,O.default)("Draggable: onDragStart: %j",k),this.props.onStart(y,(0,U.createDraggableData)(this,k))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),ee(this,"onDrag",(y,k)=>{if(!this.state.dragging)return!1;(0,O.default)("Draggable: onDrag: %j",k);const M=(0,U.createDraggableData)(this,k),I={x:M.x,y:M.y,slackX:0,slackY:0};if(this.props.bounds){const{x:K,y:$}=I;I.x+=this.state.slackX,I.y+=this.state.slackY;const[ne,ae]=(0,U.getBoundPosition)(this,I.x,I.y);I.x=ne,I.y=ae,I.slackX=this.state.slackX+(K-I.x),I.slackY=this.state.slackY+($-I.y),M.x=I.x,M.y=I.y,M.deltaX=I.x-this.state.x,M.deltaY=I.y-this.state.y}if(this.props.onDrag(y,M)===!1)return!1;this.setState(I)}),ee(this,"onDragStop",(y,k)=>{if(!this.state.dragging||this.props.onStop(y,(0,U.createDraggableData)(this,k))===!1)return!1;(0,O.default)("Draggable: onDragStop: %j",k);const I={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:K,y:$}=this.props.position;I.x=K,I.y=$}this.setState(I)}),this.state={dragging:!1,dragged:!1,x:H.position?H.position.x:H.defaultPosition.x,y:H.position?H.position.y:H.defaultPosition.y,prevPropsPosition:{...H.position},slackX:0,slackY:0,isElementSVG:!1},H.position&&!(H.onDrag||H.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement!="undefined"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var H,y;return(H=(y=this.props)===null||y===void 0||(y=y.nodeRef)===null||y===void 0?void 0:y.current)!==null&&H!==void 0?H:_.default.findDOMNode(this)}render(){const{axis:H,bounds:y,children:k,defaultPosition:M,defaultClassName:I,defaultClassNameDragging:T,defaultClassNameDragged:K,position:$,positionOffset:ne,scale:ae,...oe}=this.props;let re={},me=null;const ze=!!!$||this.state.dragging,_e=$||M,Ie={x:(0,U.canDragX)(this)&&ze?this.state.x:_e.x,y:(0,U.canDragY)(this)&&ze?this.state.y:_e.y};this.state.isElementSVG?me=(0,X.createSVGTransform)(Ie,ne):re=(0,X.createCSSTransform)(Ie,ne);const De=(0,N.default)(k.props.className||"",I,{[T]:this.state.dragging,[K]:this.state.dragged});return D.createElement(F.default,Q({},oe,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),D.cloneElement(D.Children.only(k),{className:De,style:{...k.props.style,...re},transform:me}))}}L.default=q,ee(q,"displayName","Draggable"),ee(q,"propTypes",{...F.default.propTypes,axis:g.default.oneOf(["both","x","y","none"]),bounds:g.default.oneOfType([g.default.shape({left:g.default.number,right:g.default.number,top:g.default.number,bottom:g.default.number}),g.default.string,g.default.oneOf([!1])]),defaultClassName:g.default.string,defaultClassNameDragging:g.default.string,defaultClassNameDragged:g.default.string,defaultPosition:g.default.shape({x:g.default.number,y:g.default.number}),positionOffset:g.default.shape({x:g.default.oneOfType([g.default.number,g.default.string]),y:g.default.oneOfType([g.default.number,g.default.string])}),position:g.default.shape({x:g.default.number,y:g.default.number}),className:j.dontSetMe,style:j.dontSetMe,transform:j.dontSetMe}),ee(q,"defaultProps",{...F.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},43605:(se,L,S)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var D=P(S(14041)),g=F(S(39067)),_=F(S(43144)),N=S(1154),X=S(69951),U=S(37201),j=F(S(48013));function F(q){return q&&q.__esModule?q:{default:q}}function O(q){if(typeof WeakMap!="function")return null;var R=new WeakMap,H=new WeakMap;return(O=function(y){return y?H:R})(q)}function P(q,R){if(!R&&q&&q.__esModule)return q;if(q===null||typeof q!="object"&&typeof q!="function")return{default:q};var H=O(R);if(H&&H.has(q))return H.get(q);var y={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in q)if(M!=="default"&&Object.prototype.hasOwnProperty.call(q,M)){var I=k?Object.getOwnPropertyDescriptor(q,M):null;I&&(I.get||I.set)?Object.defineProperty(y,M,I):y[M]=q[M]}return y.default=q,H&&H.set(q,y),y}function G(q,R,H){return R=Y(R),R in q?Object.defineProperty(q,R,{value:H,enumerable:!0,configurable:!0,writable:!0}):q[R]=H,q}function Y(q){var R=Q(q,"string");return typeof R=="symbol"?R:String(R)}function Q(q,R){if(typeof q!="object"||q===null)return q;var H=q[Symbol.toPrimitive];if(H!==void 0){var y=H.call(q,R||"default");if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(q)}const ee={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ie=ee.mouse;class te extends D.Component{constructor(){super(...arguments),G(this,"dragging",!1),G(this,"lastX",NaN),G(this,"lastY",NaN),G(this,"touchIdentifier",null),G(this,"mounted",!1),G(this,"handleDragStart",R=>{if(this.props.onMouseDown(R),!this.props.allowAnyClick&&typeof R.button=="number"&&R.button!==0)return!1;const H=this.findDOMNode();if(!H||!H.ownerDocument||!H.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:y}=H;if(this.props.disabled||!(R.target instanceof y.defaultView.Node)||this.props.handle&&!(0,N.matchesSelectorAndParentsTo)(R.target,this.props.handle,H)||this.props.cancel&&(0,N.matchesSelectorAndParentsTo)(R.target,this.props.cancel,H))return;R.type==="touchstart"&&R.preventDefault();const k=(0,N.getTouchIdentifier)(R);this.touchIdentifier=k;const M=(0,X.getControlPosition)(R,k,this);if(M==null)return;const{x:I,y:T}=M,K=(0,X.createCoreData)(this,I,T);(0,j.default)("DraggableCore: handleDragStart: %j",K),(0,j.default)("calling",this.props.onStart),!(this.props.onStart(R,K)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,N.addUserSelectStyles)(y),this.dragging=!0,this.lastX=I,this.lastY=T,(0,N.addEvent)(y,ie.move,this.handleDrag),(0,N.addEvent)(y,ie.stop,this.handleDragStop))}),G(this,"handleDrag",R=>{const H=(0,X.getControlPosition)(R,this.touchIdentifier,this);if(H==null)return;let{x:y,y:k}=H;if(Array.isArray(this.props.grid)){let T=y-this.lastX,K=k-this.lastY;if([T,K]=(0,X.snapToGrid)(this.props.grid,T,K),!T&&!K)return;y=this.lastX+T,k=this.lastY+K}const M=(0,X.createCoreData)(this,y,k);if((0,j.default)("DraggableCore: handleDrag: %j",M),this.props.onDrag(R,M)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const K=document.createEvent("MouseEvents");K.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(K)}return}this.lastX=y,this.lastY=k}),G(this,"handleDragStop",R=>{if(!this.dragging)return;const H=(0,X.getControlPosition)(R,this.touchIdentifier,this);if(H==null)return;let{x:y,y:k}=H;if(Array.isArray(this.props.grid)){let K=y-this.lastX||0,$=k-this.lastY||0;[K,$]=(0,X.snapToGrid)(this.props.grid,K,$),y=this.lastX+K,k=this.lastY+$}const M=(0,X.createCoreData)(this,y,k);if(this.props.onStop(R,M)===!1||this.mounted===!1)return!1;const T=this.findDOMNode();T&&this.props.enableUserSelectHack&&(0,N.removeUserSelectStyles)(T.ownerDocument),(0,j.default)("DraggableCore: handleDragStop: %j",M),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,T&&((0,j.default)("DraggableCore: Removing handlers"),(0,N.removeEvent)(T.ownerDocument,ie.move,this.handleDrag),(0,N.removeEvent)(T.ownerDocument,ie.stop,this.handleDragStop))}),G(this,"onMouseDown",R=>(ie=ee.mouse,this.handleDragStart(R))),G(this,"onMouseUp",R=>(ie=ee.mouse,this.handleDragStop(R))),G(this,"onTouchStart",R=>(ie=ee.touch,this.handleDragStart(R))),G(this,"onTouchEnd",R=>(ie=ee.touch,this.handleDragStop(R)))}componentDidMount(){this.mounted=!0;const R=this.findDOMNode();R&&(0,N.addEvent)(R,ee.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const R=this.findDOMNode();if(R){const{ownerDocument:H}=R;(0,N.removeEvent)(H,ee.mouse.move,this.handleDrag),(0,N.removeEvent)(H,ee.touch.move,this.handleDrag),(0,N.removeEvent)(H,ee.mouse.stop,this.handleDragStop),(0,N.removeEvent)(H,ee.touch.stop,this.handleDragStop),(0,N.removeEvent)(R,ee.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,N.removeUserSelectStyles)(H)}}findDOMNode(){var R,H;return(R=this.props)!==null&&R!==void 0&&R.nodeRef?(H=this.props)===null||H===void 0||(H=H.nodeRef)===null||H===void 0?void 0:H.current:_.default.findDOMNode(this)}render(){return D.cloneElement(D.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}L.default=te,G(te,"displayName","DraggableCore"),G(te,"propTypes",{allowAnyClick:g.default.bool,children:g.default.node.isRequired,disabled:g.default.bool,enableUserSelectHack:g.default.bool,offsetParent:function(q,R){if(q[R]&&q[R].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:g.default.arrayOf(g.default.number),handle:g.default.string,cancel:g.default.string,nodeRef:g.default.object,onStart:g.default.func,onDrag:g.default.func,onStop:g.default.func,onMouseDown:g.default.func,scale:g.default.number,className:U.dontSetMe,style:U.dontSetMe,transform:U.dontSetMe}),G(te,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},89463:(se,L,S)=>{"use strict";const{default:D,DraggableCore:g}=S(11442);se.exports=D,se.exports.default=D,se.exports.DraggableCore=g},1154:(se,L,S)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.addClassName=M,L.addEvent=F,L.addUserSelectStyles=y,L.createCSSTransform=ie,L.createSVGTransform=te,L.getTouch=R,L.getTouchIdentifier=H,L.getTranslation=q,L.innerHeight=Y,L.innerWidth=Q,L.matchesSelector=U,L.matchesSelectorAndParentsTo=j,L.offsetXYFromParent=ee,L.outerHeight=P,L.outerWidth=G,L.removeClassName=I,L.removeEvent=O,L.removeUserSelectStyles=k;var D=S(37201),g=N(S(25615));function _(T){if(typeof WeakMap!="function")return null;var K=new WeakMap,$=new WeakMap;return(_=function(ne){return ne?$:K})(T)}function N(T,K){if(!K&&T&&T.__esModule)return T;if(T===null||typeof T!="object"&&typeof T!="function")return{default:T};var $=_(K);if($&&$.has(T))return $.get(T);var ne={},ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var oe in T)if(oe!=="default"&&Object.prototype.hasOwnProperty.call(T,oe)){var re=ae?Object.getOwnPropertyDescriptor(T,oe):null;re&&(re.get||re.set)?Object.defineProperty(ne,oe,re):ne[oe]=T[oe]}return ne.default=T,$&&$.set(T,ne),ne}let X="";function U(T,K){return X||(X=(0,D.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function($){return(0,D.isFunction)(T[$])})),(0,D.isFunction)(T[X])?T[X](K):!1}function j(T,K,$){let ne=T;do{if(U(ne,K))return!0;if(ne===$)return!1;ne=ne.parentNode}while(ne);return!1}function F(T,K,$,ne){if(!T)return;const ae={capture:!0,...ne};T.addEventListener?T.addEventListener(K,$,ae):T.attachEvent?T.attachEvent("on"+K,$):T["on"+K]=$}function O(T,K,$,ne){if(!T)return;const ae={capture:!0,...ne};T.removeEventListener?T.removeEventListener(K,$,ae):T.detachEvent?T.detachEvent("on"+K,$):T["on"+K]=null}function P(T){let K=T.clientHeight;const $=T.ownerDocument.defaultView.getComputedStyle(T);return K+=(0,D.int)($.borderTopWidth),K+=(0,D.int)($.borderBottomWidth),K}function G(T){let K=T.clientWidth;const $=T.ownerDocument.defaultView.getComputedStyle(T);return K+=(0,D.int)($.borderLeftWidth),K+=(0,D.int)($.borderRightWidth),K}function Y(T){let K=T.clientHeight;const $=T.ownerDocument.defaultView.getComputedStyle(T);return K-=(0,D.int)($.paddingTop),K-=(0,D.int)($.paddingBottom),K}function Q(T){let K=T.clientWidth;const $=T.ownerDocument.defaultView.getComputedStyle(T);return K-=(0,D.int)($.paddingLeft),K-=(0,D.int)($.paddingRight),K}function ee(T,K,$){const ae=K===K.ownerDocument.body?{left:0,top:0}:K.getBoundingClientRect(),oe=(T.clientX+K.scrollLeft-ae.left)/$,re=(T.clientY+K.scrollTop-ae.top)/$;return{x:oe,y:re}}function ie(T,K){const $=q(T,K,"px");return{[(0,g.browserPrefixToKey)("transform",g.default)]:$}}function te(T,K){return q(T,K,"")}function q(T,K,$){let{x:ne,y:ae}=T,oe="translate(".concat(ne).concat($,",").concat(ae).concat($,")");if(K){const re="".concat(typeof K.x=="string"?K.x:K.x+$),me="".concat(typeof K.y=="string"?K.y:K.y+$);oe="translate(".concat(re,", ").concat(me,")")+oe}return oe}function R(T,K){return T.targetTouches&&(0,D.findInArray)(T.targetTouches,$=>K===$.identifier)||T.changedTouches&&(0,D.findInArray)(T.changedTouches,$=>K===$.identifier)}function H(T){if(T.targetTouches&&T.targetTouches[0])return T.targetTouches[0].identifier;if(T.changedTouches&&T.changedTouches[0])return T.changedTouches[0].identifier}function y(T){if(!T)return;let K=T.getElementById("react-draggable-style-el");K||(K=T.createElement("style"),K.type="text/css",K.id="react-draggable-style-el",K.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,K.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,T.getElementsByTagName("head")[0].appendChild(K)),T.body&&M(T.body,"react-draggable-transparent-selection")}function k(T){if(T)try{if(T.body&&I(T.body,"react-draggable-transparent-selection"),T.selection)T.selection.empty();else{const K=(T.defaultView||window).getSelection();K&&K.type!=="Caret"&&K.removeAllRanges()}}catch{}}function M(T,K){T.classList?T.classList.add(K):T.className.match(new RegExp("(?:^|\\s)".concat(K,"(?!\\S)")))||(T.className+=" ".concat(K))}function I(T,K){T.classList?T.classList.remove(K):T.className=T.className.replace(new RegExp("(?:^|\\s)".concat(K,"(?!\\S)"),"g"),"")}},25615:(se,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.browserPrefixToKey=g,L.browserPrefixToStyle=_,L.default=void 0,L.getPrefix=D;const S=["Moz","Webkit","O","ms"];function D(){var U;let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window=="undefined")return"";const F=(U=window.document)===null||U===void 0||(U=U.documentElement)===null||U===void 0?void 0:U.style;if(!F||j in F)return"";for(let O=0;O<S.length;O++)if(g(j,S[O])in F)return S[O];return""}function g(U,j){return j?"".concat(j).concat(N(U)):U}function _(U,j){return j?"-".concat(j.toLowerCase(),"-").concat(U):U}function N(U){let j="",F=!0;for(let O=0;O<U.length;O++)F?(j+=U[O].toUpperCase(),F=!1):U[O]==="-"?F=!0:j+=U[O];return j}var X=L.default=D()},48013:(se,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=S;function S(){}},69951:(se,L,S)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.canDragX=X,L.canDragY=U,L.createCoreData=F,L.createDraggableData=O,L.getBoundPosition=_,L.getControlPosition=j,L.snapToGrid=N;var D=S(37201),g=S(1154);function _(Y,Q,ee){if(!Y.props.bounds)return[Q,ee];let{bounds:ie}=Y.props;ie=typeof ie=="string"?ie:P(ie);const te=G(Y);if(typeof ie=="string"){const{ownerDocument:q}=te,R=q.defaultView;let H;if(ie==="parent"?H=te.parentNode:H=q.querySelector(ie),!(H instanceof R.HTMLElement))throw new Error('Bounds selector "'+ie+'" could not find an element.');const y=H,k=R.getComputedStyle(te),M=R.getComputedStyle(y);ie={left:-te.offsetLeft+(0,D.int)(M.paddingLeft)+(0,D.int)(k.marginLeft),top:-te.offsetTop+(0,D.int)(M.paddingTop)+(0,D.int)(k.marginTop),right:(0,g.innerWidth)(y)-(0,g.outerWidth)(te)-te.offsetLeft+(0,D.int)(M.paddingRight)-(0,D.int)(k.marginRight),bottom:(0,g.innerHeight)(y)-(0,g.outerHeight)(te)-te.offsetTop+(0,D.int)(M.paddingBottom)-(0,D.int)(k.marginBottom)}}return(0,D.isNum)(ie.right)&&(Q=Math.min(Q,ie.right)),(0,D.isNum)(ie.bottom)&&(ee=Math.min(ee,ie.bottom)),(0,D.isNum)(ie.left)&&(Q=Math.max(Q,ie.left)),(0,D.isNum)(ie.top)&&(ee=Math.max(ee,ie.top)),[Q,ee]}function N(Y,Q,ee){const ie=Math.round(Q/Y[0])*Y[0],te=Math.round(ee/Y[1])*Y[1];return[ie,te]}function X(Y){return Y.props.axis==="both"||Y.props.axis==="x"}function U(Y){return Y.props.axis==="both"||Y.props.axis==="y"}function j(Y,Q,ee){const ie=typeof Q=="number"?(0,g.getTouch)(Y,Q):null;if(typeof Q=="number"&&!ie)return null;const te=G(ee),q=ee.props.offsetParent||te.offsetParent||te.ownerDocument.body;return(0,g.offsetXYFromParent)(ie||Y,q,ee.props.scale)}function F(Y,Q,ee){const ie=!(0,D.isNum)(Y.lastX),te=G(Y);return ie?{node:te,deltaX:0,deltaY:0,lastX:Q,lastY:ee,x:Q,y:ee}:{node:te,deltaX:Q-Y.lastX,deltaY:ee-Y.lastY,lastX:Y.lastX,lastY:Y.lastY,x:Q,y:ee}}function O(Y,Q){const ee=Y.props.scale;return{node:Q.node,x:Y.state.x+Q.deltaX/ee,y:Y.state.y+Q.deltaY/ee,deltaX:Q.deltaX/ee,deltaY:Q.deltaY/ee,lastX:Y.state.x,lastY:Y.state.y}}function P(Y){return{left:Y.left,top:Y.top,right:Y.right,bottom:Y.bottom}}function G(Y){const Q=Y.findDOMNode();if(!Q)throw new Error("<DraggableCore>: Unmounted during event!");return Q}},37201:(se,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.dontSetMe=N,L.findInArray=S,L.int=_,L.isFunction=D,L.isNum=g;function S(X,U){for(let j=0,F=X.length;j<F;j++)if(U.apply(U,[X[j],j,X]))return X[j]}function D(X){return typeof X=="function"||Object.prototype.toString.call(X)==="[object Function]"}function g(X){return typeof X=="number"&&!isNaN(X)}function _(X){return parseInt(X,10)}function N(X,U,j){if(X[U])return new Error("Invalid prop ".concat(U," passed to ").concat(j," - do not set this, set it on the child."))}},40311:(se,L,S)=>{"use strict";L.__esModule=!0,L.default=void 0;var D=j(S(14041)),g=S(89463),_=S(62927),N=S(14691),X=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function U(R){if(typeof WeakMap!="function")return null;var H=new WeakMap,y=new WeakMap;return(U=function(M){return M?y:H})(R)}function j(R,H){if(!H&&R&&R.__esModule)return R;if(R===null||typeof R!="object"&&typeof R!="function")return{default:R};var y=U(H);if(y&&y.has(R))return y.get(R);var k={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in R)if(I!=="default"&&Object.prototype.hasOwnProperty.call(R,I)){var T=M?Object.getOwnPropertyDescriptor(R,I):null;T&&(T.get||T.set)?Object.defineProperty(k,I,T):k[I]=R[I]}return k.default=R,y&&y.set(R,k),k}function F(){return F=Object.assign?Object.assign.bind():function(R){for(var H=1;H<arguments.length;H++){var y=arguments[H];for(var k in y)Object.prototype.hasOwnProperty.call(y,k)&&(R[k]=y[k])}return R},F.apply(this,arguments)}function O(R,H){if(R==null)return{};var y={},k=Object.keys(R),M,I;for(I=0;I<k.length;I++)M=k[I],!(H.indexOf(M)>=0)&&(y[M]=R[M]);return y}function P(R,H){var y=Object.keys(R);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(R);H&&(k=k.filter(function(M){return Object.getOwnPropertyDescriptor(R,M).enumerable})),y.push.apply(y,k)}return y}function G(R){for(var H=1;H<arguments.length;H++){var y=arguments[H]!=null?arguments[H]:{};H%2?P(Object(y),!0).forEach(function(k){Y(R,k,y[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(y)):P(Object(y)).forEach(function(k){Object.defineProperty(R,k,Object.getOwnPropertyDescriptor(y,k))})}return R}function Y(R,H,y){return H=Q(H),H in R?Object.defineProperty(R,H,{value:y,enumerable:!0,configurable:!0,writable:!0}):R[H]=y,R}function Q(R){var H=ee(R,"string");return typeof H=="symbol"?H:String(H)}function ee(R,H){if(typeof R!="object"||R===null)return R;var y=R[Symbol.toPrimitive];if(y!==void 0){var k=y.call(R,H||"default");if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(R)}function ie(R,H){R.prototype=Object.create(H.prototype),R.prototype.constructor=R,te(R,H)}function te(R,H){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,M){return k.__proto__=M,k},te(R,H)}var q=function(R){ie(H,R);function H(){for(var k,M=arguments.length,I=new Array(M),T=0;T<M;T++)I[T]=arguments[T];return k=R.call.apply(R,[this].concat(I))||this,k.handleRefs={},k.lastHandleRect=null,k.slack=null,k}var y=H.prototype;return y.componentWillUnmount=function(){this.resetData()},y.resetData=function(){this.lastHandleRect=this.slack=null},y.runConstraints=function(M,I){var T=this.props,K=T.minConstraints,$=T.maxConstraints,ne=T.lockAspectRatio;if(!K&&!$&&!ne)return[M,I];if(ne){var ae=this.props.width/this.props.height,oe=M-this.props.width,re=I-this.props.height;Math.abs(oe)>Math.abs(re*ae)?I=M/ae:M=I*ae}var me=M,Le=I,ze=this.slack||[0,0],_e=ze[0],Ie=ze[1];return M+=_e,I+=Ie,K&&(M=Math.max(K[0],M),I=Math.max(K[1],I)),$&&(M=Math.min($[0],M),I=Math.min($[1],I)),this.slack=[_e+(me-M),Ie+(Le-I)],[M,I]},y.resizeHandler=function(M,I){var T=this;return function(K,$){var ne=$.node,ae=$.deltaX,oe=$.deltaY;M==="onResizeStart"&&T.resetData();var re=(T.props.axis==="both"||T.props.axis==="x")&&I!=="n"&&I!=="s",me=(T.props.axis==="both"||T.props.axis==="y")&&I!=="e"&&I!=="w";if(!(!re&&!me)){var Le=I[0],ze=I[I.length-1],_e=ne.getBoundingClientRect();if(T.lastHandleRect!=null){if(ze==="w"){var Ie=_e.left-T.lastHandleRect.left;ae+=Ie}if(Le==="n"){var De=_e.top-T.lastHandleRect.top;oe+=De}}T.lastHandleRect=_e,ze==="w"&&(ae=-ae),Le==="n"&&(oe=-oe);var xt=T.props.width+(re?ae/T.props.transformScale:0),ut=T.props.height+(me?oe/T.props.transformScale:0),Xe=T.runConstraints(xt,ut);xt=Xe[0],ut=Xe[1];var jn=xt!==T.props.width||ut!==T.props.height,Kt=typeof T.props[M]=="function"?T.props[M]:null,dn=M==="onResize"&&!jn;Kt&&!dn&&(K.persist==null||K.persist(),Kt(K,{node:ne,size:{width:xt,height:ut},handle:I})),M==="onResizeStop"&&T.resetData()}}},y.renderResizeHandle=function(M,I){var T=this.props.handle;if(!T)return D.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+M,ref:I});if(typeof T=="function")return T(M,I);var K=typeof T.type=="string",$=G({ref:I},K?{}:{handleAxis:M});return D.cloneElement(T,$)},y.render=function(){var M=this,I=this.props,T=I.children,K=I.className,$=I.draggableOpts,ne=I.width,ae=I.height,oe=I.handle,re=I.handleSize,me=I.lockAspectRatio,Le=I.axis,ze=I.minConstraints,_e=I.maxConstraints,Ie=I.onResize,De=I.onResizeStop,xt=I.onResizeStart,ut=I.resizeHandles,Xe=I.transformScale,jn=O(I,X);return(0,_.cloneElement)(T,G(G({},jn),{},{className:(K?K+" ":"")+"react-resizable",children:[].concat(T.props.children,ut.map(function(Kt){var dn,tt=(dn=M.handleRefs[Kt])!=null?dn:M.handleRefs[Kt]=D.createRef();return D.createElement(g.DraggableCore,F({},$,{nodeRef:tt,key:"resizableHandle-"+Kt,onStop:M.resizeHandler("onResizeStop",Kt),onStart:M.resizeHandler("onResizeStart",Kt),onDrag:M.resizeHandler("onResize",Kt)}),M.renderResizeHandle(Kt,tt))}))}))},H}(D.Component);L.default=q,q.propTypes=N.resizableProps,q.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},87706:(se,L,S)=>{"use strict";var D;D=!0,L.default=void 0;var g=O(S(14041)),_=j(S(39067)),N=j(S(40311)),X=S(14691),U=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function j(y){return y&&y.__esModule?y:{default:y}}function F(y){if(typeof WeakMap!="function")return null;var k=new WeakMap,M=new WeakMap;return(F=function(T){return T?M:k})(y)}function O(y,k){if(!k&&y&&y.__esModule)return y;if(y===null||typeof y!="object"&&typeof y!="function")return{default:y};var M=F(k);if(M&&M.has(y))return M.get(y);var I={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in y)if(K!=="default"&&Object.prototype.hasOwnProperty.call(y,K)){var $=T?Object.getOwnPropertyDescriptor(y,K):null;$&&($.get||$.set)?Object.defineProperty(I,K,$):I[K]=y[K]}return I.default=y,M&&M.set(y,I),I}function P(){return P=Object.assign?Object.assign.bind():function(y){for(var k=1;k<arguments.length;k++){var M=arguments[k];for(var I in M)Object.prototype.hasOwnProperty.call(M,I)&&(y[I]=M[I])}return y},P.apply(this,arguments)}function G(y,k){var M=Object.keys(y);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(y);k&&(I=I.filter(function(T){return Object.getOwnPropertyDescriptor(y,T).enumerable})),M.push.apply(M,I)}return M}function Y(y){for(var k=1;k<arguments.length;k++){var M=arguments[k]!=null?arguments[k]:{};k%2?G(Object(M),!0).forEach(function(I){Q(y,I,M[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(M)):G(Object(M)).forEach(function(I){Object.defineProperty(y,I,Object.getOwnPropertyDescriptor(M,I))})}return y}function Q(y,k,M){return k=ee(k),k in y?Object.defineProperty(y,k,{value:M,enumerable:!0,configurable:!0,writable:!0}):y[k]=M,y}function ee(y){var k=ie(y,"string");return typeof k=="symbol"?k:String(k)}function ie(y,k){if(typeof y!="object"||y===null)return y;var M=y[Symbol.toPrimitive];if(M!==void 0){var I=M.call(y,k||"default");if(typeof I!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(y)}function te(y,k){if(y==null)return{};var M={},I=Object.keys(y),T,K;for(K=0;K<I.length;K++)T=I[K],!(k.indexOf(T)>=0)&&(M[T]=y[T]);return M}function q(y,k){y.prototype=Object.create(k.prototype),y.prototype.constructor=y,R(y,k)}function R(y,k){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,T){return I.__proto__=T,I},R(y,k)}var H=function(y){q(k,y);function k(){for(var I,T=arguments.length,K=new Array(T),$=0;$<T;$++)K[$]=arguments[$];return I=y.call.apply(y,[this].concat(K))||this,I.state={width:I.props.width,height:I.props.height,propsWidth:I.props.width,propsHeight:I.props.height},I.onResize=function(ne,ae){var oe=ae.size;I.props.onResize?(ne.persist==null||ne.persist(),I.setState(oe,function(){return I.props.onResize&&I.props.onResize(ne,ae)})):I.setState(oe)},I}k.getDerivedStateFromProps=function(T,K){return K.propsWidth!==T.width||K.propsHeight!==T.height?{width:T.width,height:T.height,propsWidth:T.width,propsHeight:T.height}:null};var M=k.prototype;return M.render=function(){var T=this.props,K=T.handle,$=T.handleSize,ne=T.onResize,ae=T.onResizeStart,oe=T.onResizeStop,re=T.draggableOpts,me=T.minConstraints,Le=T.maxConstraints,ze=T.lockAspectRatio,_e=T.axis,Ie=T.width,De=T.height,xt=T.resizeHandles,ut=T.style,Xe=T.transformScale,jn=te(T,U);return g.createElement(N.default,{axis:_e,draggableOpts:re,handle:K,handleSize:$,height:this.state.height,lockAspectRatio:ze,maxConstraints:Le,minConstraints:me,onResizeStart:ae,onResize:this.onResize,onResizeStop:oe,resizeHandles:xt,transformScale:Xe,width:this.state.width},g.createElement("div",P({},jn,{style:Y(Y({},ut),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},k}(g.Component);L.default=H,H.propTypes=Y(Y({},X.resizableProps),{},{children:_.default.element})},14691:(se,L,S)=>{"use strict";L.__esModule=!0,L.resizableProps=void 0;var D=_(S(39067)),g=S(89463);function _(X){return X&&X.__esModule?X:{default:X}}var N={axis:D.default.oneOf(["both","x","y","none"]),className:D.default.string,children:D.default.element.isRequired,draggableOpts:D.default.shape({allowAnyClick:D.default.bool,cancel:D.default.string,children:D.default.node,disabled:D.default.bool,enableUserSelectHack:D.default.bool,offsetParent:D.default.node,grid:D.default.arrayOf(D.default.number),handle:D.default.string,nodeRef:D.default.object,onStart:D.default.func,onDrag:D.default.func,onStop:D.default.func,onMouseDown:D.default.func,scale:D.default.number}),height:function(){for(var U=arguments.length,j=new Array(U),F=0;F<U;F++)j[F]=arguments[F];var O=j[0];if(O.axis==="both"||O.axis==="y"){var P;return(P=D.default.number).isRequired.apply(P,j)}return D.default.number.apply(D.default,j)},handle:D.default.oneOfType([D.default.node,D.default.func]),handleSize:D.default.arrayOf(D.default.number),lockAspectRatio:D.default.bool,maxConstraints:D.default.arrayOf(D.default.number),minConstraints:D.default.arrayOf(D.default.number),onResizeStop:D.default.func,onResizeStart:D.default.func,onResize:D.default.func,resizeHandles:D.default.arrayOf(D.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:D.default.number,width:function(){for(var U=arguments.length,j=new Array(U),F=0;F<U;F++)j[F]=arguments[F];var O=j[0];if(O.axis==="both"||O.axis==="x"){var P;return(P=D.default.number).isRequired.apply(P,j)}return D.default.number.apply(D.default,j)}};L.resizableProps=N},62927:(se,L,S)=>{"use strict";L.__esModule=!0,L.cloneElement=F;var D=g(S(14041));function g(O){return O&&O.__esModule?O:{default:O}}function _(O,P){var G=Object.keys(O);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(O);P&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(O,Q).enumerable})),G.push.apply(G,Y)}return G}function N(O){for(var P=1;P<arguments.length;P++){var G=arguments[P]!=null?arguments[P]:{};P%2?_(Object(G),!0).forEach(function(Y){X(O,Y,G[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(G)):_(Object(G)).forEach(function(Y){Object.defineProperty(O,Y,Object.getOwnPropertyDescriptor(G,Y))})}return O}function X(O,P,G){return P=U(P),P in O?Object.defineProperty(O,P,{value:G,enumerable:!0,configurable:!0,writable:!0}):O[P]=G,O}function U(O){var P=j(O,"string");return typeof P=="symbol"?P:String(P)}function j(O,P){if(typeof O!="object"||O===null)return O;var G=O[Symbol.toPrimitive];if(G!==void 0){var Y=G.call(O,P||"default");if(typeof Y!="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(O)}function F(O,P){return P.style&&O.props.style&&(P.style=N(N({},O.props.style),P.style)),P.className&&O.props.className&&(P.className=O.props.className+" "+P.className),D.default.cloneElement(O,P)}},11097:(se,L,S)=>{"use strict";se.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},se.exports.Resizable=S(40311).default,se.exports.ResizableBox=S(87706).default},16983:(se,L,S)=>{"use strict";var D;D={value:!0};var g=S(85608),_=S(14041),N=g.__importDefault(S(49069));function X(U,j,F){j===void 0&&(j=0),F===void 0&&(F=[]);var O=N.default(U,j),P=O[0],G=O[1],Y=O[2];return _.useEffect(Y,F),[P,G]}L.A=X},49069:(se,L,S)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var D=S(14041);function g(_,N){N===void 0&&(N=0);var X=D.useRef(!1),U=D.useRef(),j=D.useRef(_),F=D.useCallback(function(){return X.current},[]),O=D.useCallback(function(){X.current=!1,U.current&&clearTimeout(U.current),U.current=setTimeout(function(){X.current=!0,j.current()},N)},[N]),P=D.useCallback(function(){X.current=null,U.current&&clearTimeout(U.current)},[]);return D.useEffect(function(){j.current=_},[_]),D.useEffect(function(){return O(),P},[N]),[F,P,O]}L.default=g},38931:(se,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});function S(N){return N[0]}const D=N=>[].concat(...N.map(X=>Array.isArray(X)?D(X):X));function g(N){return N?Array.isArray(N)?D(N).join(""):N:""}const _={Lexer:void 0,ParserRules:[{name:"Reverse_path",symbols:["Path"]},{name:"Reverse_path$string$1",symbols:[{literal:"<"},{literal:">"}],postprocess:N=>N.join("")},{name:"Reverse_path",symbols:["Reverse_path$string$1"]},{name:"Forward_path$subexpression$1$subexpression$1",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:"@"}],postprocess:function(N){return N.join("")}},{name:"Forward_path$subexpression$1",symbols:["Forward_path$subexpression$1$subexpression$1","Domain",{literal:">"}]},{name:"Forward_path",symbols:["Forward_path$subexpression$1"]},{name:"Forward_path$subexpression$2",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:">"}],postprocess:function(N){return N.join("")}},{name:"Forward_path",symbols:["Forward_path$subexpression$2"]},{name:"Forward_path",symbols:["Path"]},{name:"Path$ebnf$1$subexpression$1",symbols:["A_d_l",{literal:":"}]},{name:"Path$ebnf$1",symbols:["Path$ebnf$1$subexpression$1"],postprocess:S},{name:"Path$ebnf$1",symbols:[],postprocess:()=>null},{name:"Path",symbols:[{literal:"<"},"Path$ebnf$1","Mailbox",{literal:">"}]},{name:"A_d_l$ebnf$1",symbols:[]},{name:"A_d_l$ebnf$1$subexpression$1",symbols:[{literal:","},"At_domain"]},{name:"A_d_l$ebnf$1",symbols:["A_d_l$ebnf$1","A_d_l$ebnf$1$subexpression$1"],postprocess:N=>N[0].concat([N[1]])},{name:"A_d_l",symbols:["At_domain","A_d_l$ebnf$1"]},{name:"At_domain",symbols:[{literal:"@"},"Domain"]},{name:"Domain$ebnf$1",symbols:[]},{name:"Domain$ebnf$1$subexpression$1",symbols:[{literal:"."},"sub_domain"]},{name:"Domain$ebnf$1",symbols:["Domain$ebnf$1","Domain$ebnf$1$subexpression$1"],postprocess:N=>N[0].concat([N[1]])},{name:"Domain",symbols:["sub_domain","Domain$ebnf$1"]},{name:"sub_domain",symbols:["U_label"]},{name:"Let_dig",symbols:["ALPHA_DIGIT"],postprocess:S},{name:"Ldh_str$ebnf$1",symbols:[]},{name:"Ldh_str$ebnf$1",symbols:["Ldh_str$ebnf$1","ALPHA_DIG_DASH"],postprocess:N=>N[0].concat([N[1]])},{name:"Ldh_str",symbols:["Ldh_str$ebnf$1","Let_dig"]},{name:"U_Let_dig",symbols:["ALPHA_DIGIT_U"],postprocess:S},{name:"U_Ldh_str$ebnf$1",symbols:[]},{name:"U_Ldh_str$ebnf$1",symbols:["U_Ldh_str$ebnf$1","ALPHA_DIG_DASH_U"],postprocess:N=>N[0].concat([N[1]])},{name:"U_Ldh_str",symbols:["U_Ldh_str$ebnf$1","U_Let_dig"]},{name:"U_label$ebnf$1$subexpression$1",symbols:["U_Ldh_str"]},{name:"U_label$ebnf$1",symbols:["U_label$ebnf$1$subexpression$1"],postprocess:S},{name:"U_label$ebnf$1",symbols:[],postprocess:()=>null},{name:"U_label",symbols:["U_Let_dig","U_label$ebnf$1"]},{name:"address_literal$subexpression$1",symbols:["IPv4_address_literal"]},{name:"address_literal$subexpression$1",symbols:["IPv6_address_literal"]},{name:"address_literal$subexpression$1",symbols:["General_address_literal"]},{name:"address_literal",symbols:[{literal:"["},"address_literal$subexpression$1",{literal:"]"}]},{name:"non_local_part",symbols:["Domain"],postprocess:function(N){return{DomainName:g(N[0])}}},{name:"non_local_part",symbols:["address_literal"],postprocess:function(N){return{AddressLiteral:g(N[0])}}},{name:"Mailbox",symbols:["Local_part",{literal:"@"},"non_local_part"],postprocess:function(N){return{localPart:g(N[0]),domainPart:g(N[2])}}},{name:"Local_part",symbols:["Dot_string"],postprocess:function(N){return{DotString:g(N[0])}}},{name:"Local_part",symbols:["Quoted_string"],postprocess:function(N){return{QuotedString:g(N[0])}}},{name:"Dot_string$ebnf$1",symbols:[]},{name:"Dot_string$ebnf$1$subexpression$1",symbols:[{literal:"."},"Atom"]},{name:"Dot_string$ebnf$1",symbols:["Dot_string$ebnf$1","Dot_string$ebnf$1$subexpression$1"],postprocess:N=>N[0].concat([N[1]])},{name:"Dot_string",symbols:["Atom","Dot_string$ebnf$1"]},{name:"Atom$ebnf$1",symbols:[/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/]},{name:"Atom$ebnf$1",symbols:["Atom$ebnf$1",/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/],postprocess:N=>N[0].concat([N[1]])},{name:"Atom",symbols:["Atom$ebnf$1"]},{name:"Quoted_string$ebnf$1",symbols:[]},{name:"Quoted_string$ebnf$1",symbols:["Quoted_string$ebnf$1","QcontentSMTP"],postprocess:N=>N[0].concat([N[1]])},{name:"Quoted_string",symbols:["DQUOTE","Quoted_string$ebnf$1","DQUOTE"]},{name:"QcontentSMTP",symbols:["qtextSMTP"]},{name:"QcontentSMTP",symbols:["quoted_pairSMTP"]},{name:"quoted_pairSMTP",symbols:[{literal:"\\"},/[\x20-\x7e]/]},{name:"qtextSMTP",symbols:[/[\x20-\x21\x23-\x5b\x5d-\x7e\u0080-\uFFFF]/],postprocess:S},{name:"IPv4_address_literal$macrocall$2",symbols:[{literal:"."},"Snum"]},{name:"IPv4_address_literal$macrocall$1",symbols:["IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2"]},{name:"IPv4_address_literal",symbols:["Snum","IPv4_address_literal$macrocall$1"]},{name:"IPv6_address_literal$subexpression$1",symbols:[/[iI]/,/[pP]/,/[vV]/,{literal:"6"},{literal:":"}],postprocess:function(N){return N.join("")}},{name:"IPv6_address_literal",symbols:["IPv6_address_literal$subexpression$1","IPv6_addr"]},{name:"General_address_literal$ebnf$1",symbols:["dcontent"]},{name:"General_address_literal$ebnf$1",symbols:["General_address_literal$ebnf$1","dcontent"],postprocess:N=>N[0].concat([N[1]])},{name:"General_address_literal",symbols:["Standardized_tag",{literal:":"},"General_address_literal$ebnf$1"]},{name:"Standardized_tag",symbols:["Ldh_str"]},{name:"dcontent",symbols:[/[\x21-\x5a\x5e-\x7e]/],postprocess:S},{name:"Snum",symbols:["DIGIT"]},{name:"Snum$subexpression$1",symbols:[/[1-9]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$1"]},{name:"Snum$subexpression$2",symbols:[{literal:"1"},"DIGIT","DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$2"]},{name:"Snum$subexpression$3",symbols:[{literal:"2"},/[0-4]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$3"]},{name:"Snum$subexpression$4",symbols:[{literal:"2"},{literal:"5"},/[0-5]/]},{name:"Snum",symbols:["Snum$subexpression$4"]},{name:"IPv6_addr",symbols:["IPv6_full"]},{name:"IPv6_addr",symbols:["IPv6_comp"]},{name:"IPv6_addr",symbols:["IPv6v4_full"]},{name:"IPv6_addr",symbols:["IPv6v4_comp"]},{name:"IPv6_hex",symbols:["HEXDIG"]},{name:"IPv6_hex$subexpression$1",symbols:["HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$1"]},{name:"IPv6_hex$subexpression$2",symbols:["HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$2"]},{name:"IPv6_hex$subexpression$3",symbols:["HEXDIG","HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$3"]},{name:"IPv6_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_full$macrocall$1",symbols:["IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2"]},{name:"IPv6_full",symbols:["IPv6_hex","IPv6_full$macrocall$1"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$1",symbols:["IPv6_comp$ebnf$1$subexpression$1"],postprocess:S},{name:"IPv6_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:N=>N.join("")},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$2$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$2",symbols:["IPv6_comp$ebnf$2$subexpression$1"],postprocess:S},{name:"IPv6_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6_comp",symbols:["IPv6_comp$ebnf$1","IPv6_comp$string$1","IPv6_comp$ebnf$2"]},{name:"IPv6v4_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_full$macrocall$1",symbols:["IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2"]},{name:"IPv6v4_full",symbols:["IPv6_hex","IPv6v4_full$macrocall$1",{literal:":"},"IPv4_address_literal"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6v4_comp$ebnf$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1"],postprocess:S},{name:"IPv6v4_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:N=>N.join("")},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",{literal:":"}]},{name:"IPv6v4_comp$ebnf$2",symbols:["IPv6v4_comp$ebnf$2$subexpression$1"],postprocess:S},{name:"IPv6v4_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp",symbols:["IPv6v4_comp$ebnf$1","IPv6v4_comp$string$1","IPv6v4_comp$ebnf$2","IPv4_address_literal"]},{name:"DIGIT",symbols:[/[0-9]/],postprocess:S},{name:"ALPHA_DIGIT_U",symbols:[/[0-9A-Za-z\u0080-\uFFFF]/],postprocess:S},{name:"ALPHA_DIGIT",symbols:[/[0-9A-Za-z]/],postprocess:S},{name:"ALPHA_DIG_DASH",symbols:[/[-0-9A-Za-z]/],postprocess:S},{name:"ALPHA_DIG_DASH_U",symbols:[/[-0-9A-Za-z\u0080-\uFFFF]/],postprocess:S},{name:"HEXDIG",symbols:[/[0-9A-Fa-f]/],postprocess:S},{name:"DQUOTE",symbols:[{literal:'"'}],postprocess:S}],ParserStart:"Reverse_path"};L.default=_},85626:function(se,L,S){"use strict";var D=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(L,"__esModule",{value:!0}),L.canonicalize=L.canonicalize_quoted_string=L.normalize=L.normalize_dot_string=L.parse=void 0;const g=S(63662),_=D(S(38931));_.default.ParserStart="Mailbox";const N=g.Grammar.fromCompiled(_.default);function X(P){const G=new g.Parser(N);if(G.feed(P),G.results.length!==1)throw new Error("address parsing failed: ambiguous grammar");return G.results[0]}L.parse=X;function U(P){return function(){const Q=P.indexOf("+");return Q===-1?P:P.substr(0,Q)}().replace(/\./g,"").toLowerCase()}L.normalize_dot_string=U;function j(P){var G,Y;const Q=X(P),ee=(G=Q.domainPart.AddressLiteral)!==null&&G!==void 0?G:Q.domainPart.DomainName.toLowerCase();return`${(Y=Q.localPart.QuotedString)!==null&&Y!==void 0?Y:U(Q.localPart.DotString)}@${ee}`}L.normalize=j;function F(P){return`"${P.substr(1).substr(0,P.length-2).replace(/(?:\\(.))/g,"$1").replace(/(?:(["\\]))/g,"\\$1")}"`}L.canonicalize_quoted_string=F;function O(P){var G;const Y=X(P),Q=(G=Y.domainPart.AddressLiteral)!==null&&G!==void 0?G:Y.domainPart.DomainName.toLowerCase();return`${Y.localPart.QuotedString?F(Y.localPart.QuotedString):Y.localPart.DotString}@${Q}`}L.canonicalize=O},47112:(se,L,S)=>{se=S.nmd(se),function(D){"use strict";D.exports.is_uri=_,D.exports.is_http_uri=N,D.exports.is_https_uri=X,D.exports.is_web_uri=U,D.exports.isUri=_,D.exports.isHttpUri=N,D.exports.isHttpsUri=X,D.exports.isWebUri=U;var g=function(j){var F=j.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return F};function _(j){if(j&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(j)&&!/%[^0-9a-f]/i.test(j)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(j)){var F=[],O="",P="",G="",Y="",Q="",ee="";if(F=g(j),O=F[1],P=F[2],G=F[3],Y=F[4],Q=F[5],!!(O&&O.length&&G.length>=0)){if(P&&P.length){if(!(G.length===0||/^\//.test(G)))return}else if(/^\/\//.test(G))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(O.toLowerCase()))return ee+=O+":",P&&P.length&&(ee+="//"+P),ee+=G,Y&&Y.length&&(ee+="?"+Y),Q&&Q.length&&(ee+="#"+Q),ee}}}function N(j,F){if(_(j)){var O=[],P="",G="",Y="",Q="",ee="",ie="",te="";if(O=g(j),P=O[1],G=O[2],Y=O[3],ee=O[4],ie=O[5],!!P){if(F){if(P.toLowerCase()!="https")return}else if(P.toLowerCase()!="http")return;if(G)return/:(\d+)$/.test(G)&&(Q=G.match(/:(\d+)$/)[0],G=G.replace(/:\d+$/,"")),te+=P+":",te+="//"+G,Q&&(te+=Q),te+=Y,ee&&ee.length&&(te+="?"+ee),ie&&ie.length&&(te+="#"+ie),te}}}function X(j){return N(j,!0)}function U(j){return N(j)||X(j)}}(se)},10646:se=>{"use strict";function L(S){return Object.prototype.toString.call(S)==="[object Array]"}se.exports=Array.isArray||L},43225:se=>{"use strict";function L(S){return typeof S=="function"}se.exports=L},50709:(se,L,S)=>{"use strict";var D=S(10646),g=S(70925);function _(N){var X;if(!D(N)||(X=N.length,!X))return!1;for(var U=0;U<X;U++)if(!g(N[U]))return!1;return!0}se.exports=_},70925:(se,L,S)=>{"use strict";var D=S(72100);function g(_){return D(_)&&_%1===0}se.exports=g},72100:se=>{"use strict";function L(S){return(typeof S=="number"||Object.prototype.toString.call(S)==="[object Number]")&&S.valueOf()===S.valueOf()}se.exports=L},91042:(se,L,S)=>{"use strict";S.d(L,{Y:()=>_});var D=S(14041),g=S(16261);function _(N,X){const[U,j]=(0,D.useState)({status:"not-executed",error:void 0,result:X}),F=(0,D.useRef)(),O=(0,D.useRef)(),P=(0,g.J)({execute(...G){O.current=G;const Y=N(...G);return F.current=Y,j(Q=>({...Q,status:"loading"})),Y.then(Q=>{Y===F.current&&j(ee=>({...ee,status:"success",error:void 0,result:Q}))},Q=>{Y===F.current&&j(ee=>({...ee,status:"error",error:Q}))}),Y},reset(){j({status:"not-executed",error:void 0,result:X}),F.current=void 0,O.current=void 0}});return[U,(0,D.useMemo)(()=>({reset(){P.current.reset()},execute:(...G)=>P.current.execute(...G)}),[]),{promise:F.current,lastArgs:O.current}]}}}]);})();

//# sourceMappingURL=1742.96b59c7e.chunk.js.map