(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9165],{56420:(ae,D,n)=>{"use strict";n.d(D,{Y:()=>le});var e=n(95208),z=n(77125),b=n(64947),K=n(93453),w=n(29365),J=n(46423),pe=n(5951),A=n(26343),Y=n(28233),O=n(55197),de=n(58837),Ee=n(72501),re=n(5893),p=n(14041),d=n(45250),Z=n.n(d),oe=n(70209),q=n(92483),F=n(75202),_=n(89475),ge=n(10265);const ve=(0,de.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),he=({icon:S})=>{var R;const I=(0,e.n)(),B=S&&(R=I.getSystemIcon(S))!=null?R:q.NT;return p.createElement(B,null)},ye=({link:S})=>{var I;return p.createElement(F.N_,{to:S.url},(I=S.title)!=null?I:S.url)},$=({item:S})=>{var I;return p.createElement(A.A,null,p.createElement(J.A,null,p.createElement(he,{icon:S.icon})),p.createElement(pe.A,{primary:S.title,secondary:(I=S.links)==null?void 0:I.reduce((B,R,j)=>[...B,j>0&&p.createElement("br",{key:j}),p.createElement(ye,{link:R,key:R.url})],[])}))};function le(S){const{t:I}=(0,ge.i)(_.O),{title:B,items:R,children:j}=S,{items:G}=(0,oe.l)(),[x,N]=(0,p.useState)(!1),[se,ie]=(0,p.useState)(null),Q=ve(),ee=(0,re.A)(M=>M.breakpoints.down("sm")),k=M=>{ie(M.currentTarget),N(!0)},U=()=>{N(!1)};return p.createElement(p.Fragment,null,p.createElement(z.A,{display:"flex",ml:1},ee?p.createElement(w.A,{color:"primary",size:"small",onClick:k,"data-testid":"support-button","aria-label":"Support"},p.createElement(q.NT,null)):p.createElement(b.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:k,startIcon:p.createElement(q.NT,null)},I("supportButton.title"))),p.createElement(O.Ay,{"data-testid":"support-button-popover",open:x,anchorEl:se,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:U},p.createElement(Y.A,{className:Q.popoverList,autoFocusItem:!!se},B&&p.createElement(A.A,{button:!1,alignItems:"flex-start",className:Q.menuItem},p.createElement(Ee.A,{variant:"subtitle1"},B)),p.Children.map(j,(M,W)=>p.createElement(A.A,{alignItems:"flex-start",key:`child-${W}`,className:Q.menuItem},M)),(R!=null?R:G).map((M,W)=>p.createElement($,{item:M,key:`item-${W}`}))),p.createElement(K.A,null,p.createElement(b.A,{color:"primary",onClick:U,"aria-label":"Close"},I("supportButton.close")))))}},39165:(ae,D,n)=>{"use strict";n.r(D),n.d(D,{ImportPage:()=>yt});var e=n(14041),z=n(18690),b=n(82326),K=n(16654),w=n(16454),J=n(17138),pe=n(56420),A=n(18139),Y=n(54195),O=n(42899),de=n(5893),Ee=n(54917),re=n(21332),p=n(67720),d=n(72501),Z=n(5336),oe=n(51419),q=n(52536),F=n(3969);function _(){const t=(0,A.gf)(Y.U);return(0,F.J7)(t)}const ge=t=>{const{exampleLocationUrl:a="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:o="https://github.com/backstage/backstage"}=t,r=(0,A.gf)(Y.U),l=r.getOptionalString("app.title")||"Backstage",i=(0,A.gf)(Z.g),c=r.has("integrations.github"),s=_();return e.createElement(re.n,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/"}},e.createElement(d.A,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",l,"."),e.createElement(d.A,{component:"h4",variant:"h6"},"Link to an existing entity file"),e.createElement(d.A,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",e.createElement("code",null,a)),e.createElement(d.A,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",l," catalog."),c&&e.createElement(e.Fragment,null,e.createElement(d.A,{component:"h4",variant:"h6"},"Link to a repository"," ",e.createElement(p.A,{label:"GitHub only",variant:"outlined",size:"small"})),e.createElement(d.A,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",e.createElement("code",null,o)),e.createElement(d.A,{variant:"body2",paragraph:!0},"The wizard discovers all ",e.createElement("code",null,s)," files in the repository, previews the entities, and adds them to the ",l," ","catalog."),i.preparePullRequest&&e.createElement(d.A,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",e.createElement("code",null,s)," and prepares the ",l," catalog to load all entities as soon as the Pull Request is merged.")))};var ve=n(21619),he=n(41045),ye=n(78733),$=n(58837);function le(t){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:t,previousStates:[]}}function S(t,a){switch(a.type){case"onAnalysis":{if(t.activeState!=="analyze")return t;const{activeState:o,previousStates:r}=t,[l,i,c,s]=a.args;return{...t,analysisUrl:i,activeFlow:l,analyzeResult:c,prepareResult:s==null?void 0:s.prepareResult,activeState:(s==null?void 0:s.prepareResult)===void 0?"prepare":"review",previousStates:r.concat(o)}}case"onPrepare":{if(t.activeState!=="prepare")return t;const{activeState:o,previousStates:r}=t,[l,i]=a.args;return{...t,prepareResult:l,activeState:"review",previousStates:i!=null&&i.notRepeatable?[]:r.concat(o)}}case"onReview":{if(t.activeState!=="review")return t;const{activeState:o,previousStates:r}=t,[l]=a.args;return{...t,reviewResult:l,activeState:"finish",previousStates:r.concat(o)}}case"onGoBack":{const{activeState:o,previousStates:r}=t;return{...t,activeState:r.length>0?r[r.length-1]:o,previousStates:r.slice(0,r.length-1)}}case"onReset":return{...le(a.initialUrl),prepareResult:t.prepareResult};default:throw new Error}}const I=t=>{const[a,o]=(0,e.useReducer)(S,t==null?void 0:t.initialUrl,le),{activeFlow:r,activeState:l,analysisUrl:i,previousStates:c}=a;return{activeFlow:r,activeState:l,activeStepNumber:["analyze","prepare","review","finish"].indexOf(l),analysisUrl:i,analyzeResult:a.analyzeResult,prepareResult:a.prepareResult,reviewResult:a.reviewResult,onAnalysis:(s,E,u,f)=>o({type:"onAnalysis",args:[s,E,u,f]}),onPrepare:(s,E)=>o({type:"onPrepare",args:[s,E]}),onReview:s=>o({type:"onReview",args:[s]}),onGoBack:c.length>0?()=>o({type:"onGoBack"}):void 0,onReset:()=>o({type:"onReset",initialUrl:t==null?void 0:t.initialUrl})}};var B=n(77125),R=n(69076),j=n(86901),G=n(51253),x=n(37877),N=n(16249),se=n(87318),ie=n(64947),Q=n(78467);const ee=(0,$.A)(t=>({wrapper:{marginTop:t.spacing(1),marginRight:t.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:t.spacing(1),marginRight:t.spacing(1)}})),k=t=>{const{loading:a,...o}=t,r=ee();return e.createElement("div",{className:r.wrapper},e.createElement(ie.A,{color:"primary",variant:"contained",...o,disabled:t.disabled||t.loading}),t.loading&&e.createElement(Q.A,{size:"1.5rem",className:r.buttonProgress}),t.loading)},U=t=>{const a=ee();return e.createElement(ie.A,{variant:"outlined",className:a.button,...t},t.children||"Back")},M=t=>{const a=ee();return e.createElement(se.z,{color:"primary",variant:"contained",className:a.button,...t},t.children)};var W=n(52755),ce=n(78560),We=n(91072),ze=n(37281),Ke=n(45809),we=n(69621),Ge=n(29365),Pe=n(58007),Ae=n(8109),Se=n(46423),ke=n(65569),fe=n(5951),He=n(23164),Ve=n(6924);const Ye=(0,$.A)(t=>({nested:{paddingLeft:t.spacing(4)}})),te=t=>{const{locations:a,collapsed:o=!1,locationListItemIcon:r,onItemClick:l,firstListItem:i,withLinks:c=!1}=t,s=Ye(),E=(0,A.gf)(We.n),[u,f]=(0,e.useState)([]),g=m=>{f(y=>y.includes(m)?y.filter(h=>h!==m):y.concat(m))};function v(m){return m.sort((y,h)=>E.forEntity((0,ce.U2)(y)).snapshot.entityRef.localeCompare(E.forEntity((0,ce.U2)(h)).snapshot.entityRef))}return e.createElement(Pe.A,null,i,a.map(m=>e.createElement(e.Fragment,{key:m.target},e.createElement(Ae.A,{dense:!0,button:!!l,onClick:()=>l==null?void 0:l(m.target)},e.createElement(Se.A,null,r(m.target)),e.createElement(fe.A,{primary:m.target,secondary:`Entities: ${m.entities.length}`}),o&&e.createElement(ke.A,null,e.createElement(Ge.A,{edge:"end",onClick:()=>g(m.target)},u.includes(m.target)?e.createElement(He.A,null):e.createElement(Ve.A,null)))),e.createElement(we.A,{in:!o||u.includes(m.target),timeout:"auto",unmountOnExit:!0},e.createElement(Pe.A,{component:"div",disablePadding:!0,dense:!0},v(m.entities).map(y=>e.createElement(Ae.A,{key:(0,ce.U2)(y),className:s.nested,...c?{component:ze.z,entityRef:y,button:c}:{}},e.createElement(fe.A,{primary:e.createElement(Ke.d,{entityRef:y})}))))))))};var Re=n(75202),$e=n(19953),Le=n.n($e),je=n(55488),Qe=n(20987),Xe=n(72814);const Je=t=>{var a,o;for(const r of t)for(const l of r.entities)if(["component","api","resource"].includes(l.kind.toLocaleLowerCase("en-US")))return{kind:l.kind.toLocaleLowerCase("en-US"),namespace:(o=(a=l.namespace)==null?void 0:a.toLocaleLowerCase("en-US"))!=null?o:je.oQ,name:l.name};return null},Ze=({prepareResult:t,onReset:a})=>{const o=(0,Xe.S)(Qe.s);if(t.type==="repository")return e.createElement(e.Fragment,null,e.createElement(d.A,{paragraph:!0},"The following Pull Request has been opened:"," ",e.createElement(Re.N_,{to:t.pullRequest.url,target:"_blank",rel:"noreferrer"},t.pullRequest.url)),e.createElement(d.A,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),e.createElement(O.A,{container:!0,spacing:0},e.createElement(U,{onClick:a},"Register another")));const[r,l]=Le()(t.locations,c=>c.exists),i=Je(l);return e.createElement(e.Fragment,null,l.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"The following entities have been added to the catalog:"),e.createElement(te,{locations:l,locationListItemIcon:()=>e.createElement(W.A,null),withLinks:!0})),r.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"A refresh was triggered for the following locations:"),e.createElement(te,{locations:r,locationListItemIcon:()=>e.createElement(W.A,null),withLinks:!0})),e.createElement(O.A,{container:!0,spacing:0},i&&e.createElement(M,{to:o(i)},"View Component"),e.createElement(U,{onClick:a},"Register another")))};var Ie=n(24453),me=n(80824);const qe=t=>{const{onAnalysis:a,analysisUrl:o="",disablePullRequest:r=!1,exampleLocationUrl:l="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=t,i=(0,A.gf)(Ie.m),c=(0,A.gf)(Z.g),{register:s,handleSubmit:E,formState:{errors:u},watch:f}=(0,me.mN)({mode:"onTouched",defaultValues:{url:o}}),[g,v]=(0,e.useState)(!1),[m,y]=(0,e.useState)(void 0),h=(0,e.useCallback)(async({url:P})=>{var H,X,ue;v(!0);try{const C=await c.analyzeUrl(P);switch(C.type){case"repository":!r&&C.generatedEntities.length>0?a("no-location",P,C):(y("Couldn't generate entities for your repository"),v(!1));break;case"locations":{C.locations.length===1?a("single-location",P,C,{prepareResult:C}):C.locations.length>1?a("multiple-locations",P,C):(y("There are no entities at this location"),v(!1));break}default:{const ne=`Received unknown analysis result of type ${C.type}. Please contact the support team.`;y(ne),v(!1),i.post(new Error(ne));break}}}catch(C){y((ue=(X=(H=C==null?void 0:C.data)==null?void 0:H.error)==null?void 0:X.message)!=null?ue:C.message),v(!1)}},[c,r,i,a]);return e.createElement("form",{onSubmit:E(h)},e.createElement(N.A,{...(0,F.eO)(s("url",{required:!0,validate:{httpsValidator:P=>typeof P=="string"&&P.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"URL",placeholder:l,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:!!u.url,required:!0}),u.url&&e.createElement(G.A,{error:!0},u.url.message),m&&e.createElement(G.A,{error:!0},m),e.createElement(O.A,{container:!0,spacing:0},e.createElement(k,{disabled:!!u.url||!f("url"),loading:g,type:"submit"},"Analyze")))};var _e=n(61783);const et=t=>{const{name:a,options:o,required:r,errors:l,rules:i,loading:c=!1,loadingText:s,helperText:E,errorHelperText:u,textFieldProps:f={}}=t;return e.createElement(me.xI,{name:a,rules:i,render:({field:{onChange:g}})=>e.createElement(_e.Ay,{loading:c,loadingText:s,options:o||[],autoSelect:!0,freeSolo:!0,onChange:(v,m)=>g(m),renderInput:v=>e.createElement(N.A,{...v,helperText:(l==null?void 0:l[a])&&u||E,error:!!(l!=null&&l[a]),margin:"normal",variant:"outlined",required:r,InputProps:{...v.InputProps,endAdornment:e.createElement(e.Fragment,null,c?e.createElement(Q.A,{color:"inherit",size:"1em"}):null,v.InputProps.endAdornment)},...f})})})};var tt=n(45250),Te=n(3399),Oe=n(30043),nt=n(53318),Be=n(73466);const at=t=>{const{defaultValues:a,onSubmit:o,render:r}=t,l=(0,me.mN)({mode:"onTouched",defaultValues:a}),{handleSubmit:i,watch:c,control:s,register:E,formState:u,setValue:f}=l;return e.createElement(me.Op,{...l},e.createElement("form",{onSubmit:i(o)},r({values:c(),formState:u,register:E,control:s,setValue:f})))};var xe=n(40703),Ue=n(48653),Me=n(45685),rt=n(62112);const ot=t=>{const{repositoryUrl:a,entities:o,classes:r}=t,l=_();return e.createElement(xe.A,{variant:"outlined",className:r==null?void 0:r.card},e.createElement(Me.A,{title:e.createElement("code",null,`${(0,tt.trimEnd)(a,"/")}/${l}`)}),e.createElement(Ue.A,{className:r==null?void 0:r.cardContent},e.createElement(rt.z,{text:o.map(i=>oe.Ay.stringify(i)).join(`---
`).trim(),language:"yaml"})))};var lt=n(28364);const st=t=>{const{title:a,description:o,classes:r}=t;return e.createElement(xe.A,{variant:"outlined",className:r==null?void 0:r.card},e.createElement(Me.A,{title:a,subheader:"Create a new Pull Request"}),e.createElement(Ue.A,{className:r==null?void 0:r.cardContent},e.createElement(lt.h,{content:o})))},it=(0,$.A)(t=>({previewCard:{marginTop:t.spacing(1)},previewCardContent:{paddingTop:0}}));function Ce(t,a,o){return t.map(r=>({...r,apiVersion:r.apiVersion,kind:r.kind,metadata:{...r.metadata,name:a},spec:{...r.spec,...o?{owner:o}:{}}}))}const ct=t=>{var C,ne,De,be,Fe,Ne;const{analyzeResult:a,onPrepare:o,onGoBack:r,renderFormFields:l}=t,i=it(),c=(0,A.gf)(Oe.v),s=(0,A.gf)(Z.g),E=(0,A.gf)(Ie.m),[u,f]=(0,e.useState)(!1),[g,v]=(0,e.useState)(),m=_(),{loading:y,value:h,error:P}=(0,Be.A)(()=>s.preparePullRequest(),[s.preparePullRequest]);(0,e.useEffect)(()=>{P&&E.post(P)},[P,E]);const{loading:H,value:X}=(0,Be.A)(async()=>(await c.getEntities({filter:{kind:"group"}})).items.map(T=>(0,nt.S)(T,{defaultKind:"group"})).sort()),ue=(0,e.useCallback)(async L=>{f(!0);try{const T=await s.submitPullRequest({repositoryUrl:a.url,title:L.title,body:L.body,fileContent:Ce(a.generatedEntities,L.componentName,L.owner).map(V=>oe.Ay.stringify(V)).join(`---
`)});o({type:"repository",url:a.url,integrationType:a.integrationType,pullRequest:{url:T.link},locations:[{target:T.location,entities:Ce(a.generatedEntities,L.componentName,L.owner).map(V=>({kind:V.kind,namespace:V.metadata.namespace,name:V.metadata.name}))}]},{notRepeatable:!0})}catch(T){(0,Te.tX)(T),v(T.message),f(!1)}},[a.generatedEntities,a.integrationType,a.url,s,o]);return e.createElement(e.Fragment,null,e.createElement(d.A,null,"You entered a link to a ",a.integrationType," repository but a"," ",e.createElement("code",null,m)," could not be found. Use this form to open a Pull Request that creates one."),!y&&e.createElement(at,{onSubmit:ue,defaultValues:{title:(C=h==null?void 0:h.title)!=null?C:"",body:(ne=h==null?void 0:h.body)!=null?ne:"",owner:((be=(De=a.generatedEntities[0])==null?void 0:De.spec)==null?void 0:be.owner)||"",componentName:((Ne=(Fe=a.generatedEntities[0])==null?void 0:Fe.metadata)==null?void 0:Ne.name)||"",useCodeowners:!1},render:({values:L,formState:T,register:V,setValue:At})=>e.createElement(e.Fragment,null,l({values:L,formState:T,register:V,setValue:At,groups:X!=null?X:[],groupsLoading:H}),e.createElement(B.A,{marginTop:2},e.createElement(d.A,{variant:"h6"},"Preview Pull Request")),e.createElement(st,{title:L.title,description:L.body,classes:{card:i.previewCard,cardContent:i.previewCardContent}}),e.createElement(B.A,{marginTop:2,marginBottom:1},e.createElement(d.A,{variant:"h6"},"Preview Entities")),e.createElement(ot,{entities:Ce(a.generatedEntities,L.componentName,L.owner),repositoryUrl:a.url,classes:{card:i.previewCard,cardContent:i.previewCardContent}}),g&&e.createElement(G.A,{error:!0},g),e.createElement(O.A,{container:!0,spacing:0},r&&e.createElement(U,{onClick:r,disabled:u}),e.createElement(k,{type:"submit",disabled:!!(T.errors.title||T.errors.body||T.errors.owner),loading:u},"Create PR")))}))},mt=({analyzeResult:t,prepareResult:a,onPrepare:o,onGoBack:r})=>{const[l,i]=(0,e.useState)((a==null?void 0:a.locations.map(g=>g.target))||[]),[c,s]=Le()(t==null?void 0:t.locations,g=>g.exists),E=(0,e.useCallback)(async()=>{o({type:"locations",locations:s.filter(g=>l.includes(g.target))})},[s,o,l]),u=g=>{i(v=>v.includes(g)?v.filter(m=>m!==g):v.concat(g))},f=()=>{i(g=>g.length<s.length?s.map(v=>v.target):[])};return e.createElement(e.Fragment,null,s.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"Select one or more locations that are present in your git repository:"),e.createElement(te,{firstListItem:e.createElement(Ae.A,{dense:!0,button:!0,onClick:f},e.createElement(Se.A,null,e.createElement(R.A,{edge:"start",checked:l.length===s.length,indeterminate:l.length>0&&l.length<s.length,tabIndex:-1,disableRipple:!0})),e.createElement(fe.A,{primary:"Select All"})),onItemClick:u,locations:s,locationListItemIcon:g=>e.createElement(R.A,{edge:"start",checked:l.includes(g),tabIndex:-1,disableRipple:!0}),collapsed:!0})),c.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"These locations already exist in the catalog:"),e.createElement(te,{locations:c,locationListItemIcon:()=>e.createElement(W.A,null),withLinks:!0,collapsed:!0})),e.createElement(O.A,{container:!0,spacing:0},r&&e.createElement(U,{onClick:r}),e.createElement(k,{disabled:l.length===0,onClick:E},"Review")))};var ut=n(52262);const pt=({prepareResult:t,onReview:a,onGoBack:o})=>{const r=(0,A.gf)(Oe.v),l=(0,A.gf)(Y.U),i=(0,ut.s)(),c=l.getOptionalString("app.title")||"Backstage",[s,E]=(0,e.useState)(!1),[u,f]=(0,e.useState)(),g=!!(t.type==="locations"&&t.locations.some(m=>m.exists)),v=(0,e.useCallback)(async()=>{E(!0),i.captureEvent("click","import entity");try{let m=new Array;t.type==="locations"&&(m=await Promise.all(t.locations.filter(h=>h.exists).map(async h=>{var H;const P=(0,ce.U2)((H=h.entities[0])!=null?H:h);return await r.refreshEntity(P),{target:h.target}})));const y=await Promise.all(t.locations.filter(h=>!h.exists).map(async h=>{const P=await r.addLocation({type:"url",target:h.target});return{target:P.location.target,entities:P.entities}}));a({...t,refreshed:m,locations:y})}catch(m){(0,Te.tX)(m),t.type==="repository"&&m.message.startsWith("Location was added but has no entities specified yet")?a({...t,locations:t.locations.map(y=>({target:y.target,entities:[]}))}):(f(m.message),E(!1))}},[t,a,r,i]);return e.createElement(e.Fragment,null,t.type==="repository"&&e.createElement(e.Fragment,null,e.createElement(d.A,{paragraph:!0},"The following Pull Request has been opened:"," ",e.createElement(Re.N_,{to:t.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},t.pullRequest.url)),e.createElement(d.A,{paragraph:!0},"You can already import the location and ",c," will fetch the entities as soon as the Pull Request is merged.")),e.createElement(d.A,null,g?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),e.createElement(te,{locations:t.locations,locationListItemIcon:()=>e.createElement(W.A,null)}),u&&e.createElement(G.A,{error:!0},u),e.createElement(O.A,{container:!0,spacing:0},o&&e.createElement(U,{onClick:o,disabled:s}),e.createElement(k,{disabled:s,loading:s,onClick:()=>v()},g?"Refresh":"Import")))};function dt(t,a){switch(t){case"single-location":return{...a,prepare:()=>({stepLabel:e.createElement(x.A,{optional:e.createElement(d.A,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:e.createElement(e.Fragment,null)})};case"multiple-locations":return{...a,prepare:(o,r)=>o.analyzeResult.type!=="locations"?a.prepare(o,r):{stepLabel:e.createElement(x.A,{optional:e.createElement(d.A,{variant:"caption"},"Discovered Locations: ",o.analyzeResult.locations.length)},"Select Locations"),content:e.createElement(mt,{analyzeResult:o.analyzeResult,prepareResult:o.prepareResult,onPrepare:o.onPrepare,onGoBack:o.onGoBack})}};case"no-location":return{...a,prepare:(o,r)=>o.analyzeResult.type!=="repository"?a.prepare(o,r):{stepLabel:e.createElement(x.A,null,"Create Pull Request"),content:e.createElement(ct,{analyzeResult:o.analyzeResult,onPrepare:o.onPrepare,onGoBack:o.onGoBack,renderFormFields:({values:l,setValue:i,formState:c,groupsLoading:s,groups:E,register:u})=>e.createElement(e.Fragment,null,e.createElement(B.A,{marginTop:2},e.createElement(d.A,{variant:"h6"},"Pull Request Details")),e.createElement(N.A,{...(0,F.eO)(u("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.title,required:!0}),e.createElement(N.A,{...(0,F.eO)(u("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.body,multiline:!0,required:!0}),e.createElement(B.A,{marginTop:2},e.createElement(d.A,{variant:"h6"},"Entity Configuration")),e.createElement(N.A,{...(0,F.eO)(u("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.componentName,required:!0}),!l.useCodeowners&&e.createElement(et,{name:"owner",errors:c.errors,options:E||[],loading:s,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),e.createElement(j.A,{control:e.createElement(R.A,{...(0,F.eO)(u("useCodeowners")),onChange:(f,g)=>{g&&i("owner","")}}),label:e.createElement(e.Fragment,null,"Use ",e.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),e.createElement(G.A,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return a}}const Et={analyze:(t,{apis:a})=>({stepLabel:e.createElement(x.A,null,"Select URL"),content:e.createElement(qe,{key:"analyze",analysisUrl:t.analysisUrl,onAnalysis:t.onAnalysis,disablePullRequest:!a.catalogImportApi.preparePullRequest})}),prepare:t=>({stepLabel:e.createElement(x.A,{optional:e.createElement(d.A,{variant:"caption"},"Optional")},"Import Actions"),content:e.createElement(U,{onClick:t.onGoBack})}),review:t=>({stepLabel:e.createElement(x.A,null,"Review"),content:e.createElement(pt,{prepareResult:t.prepareResult,onReview:t.onReview,onGoBack:t.onGoBack})}),finish:t=>({stepLabel:e.createElement(x.A,null,"Finish"),content:e.createElement(Ze,{prepareResult:t.prepareResult,onReset:t.onReset})})},gt=(0,$.A)(()=>({stepperRoot:{padding:0}})),vt=t=>{const{initialUrl:a,generateStepper:o=dt,variant:r}=t,l=(0,A.gf)(Z.g),i=gt(),c=I({initialUrl:a}),s=(0,e.useMemo)(()=>o(c.activeFlow,Et),[o,c.activeFlow]),E=u=>e.createElement(ve.A,null,u.stepLabel,e.createElement(he.A,null,u.content));return e.createElement(re.n,{variant:r},e.createElement(ye.A,{classes:{root:i.stepperRoot},activeStep:c.activeStepNumber,orientation:"vertical"},E(s.analyze(c,{apis:{catalogImportApi:l}})),E(s.prepare(c,{apis:{catalogImportApi:l}})),E(s.review(c,{apis:{catalogImportApi:l}})),E(s.finish(c,{apis:{catalogImportApi:l}}))))},ht=()=>{const t=(0,Ee.A)(),a=(0,A.gf)(Y.U),o=(0,de.A)(t.breakpoints.down("sm")),r=a.getOptionalString("app.title")||"Backstage",l=[e.createElement(O.A,{key:0,item:!0,xs:12,md:4,lg:6,xl:8},e.createElement(ge,null)),e.createElement(O.A,{key:1,item:!0,xs:12,md:8,lg:6,xl:4},e.createElement(vt,null))];return e.createElement(b.Y,{themeId:"home"},e.createElement(K.Y,{title:"Register an existing component"}),e.createElement(w.U,null,e.createElement(J.d,{title:`Start tracking your component in ${r}`},e.createElement(pe.Y,null,"Start tracking your component in ",r," by adding it to the software catalog.")),e.createElement(O.A,{container:!0,spacing:2},o?l:l.reverse())))},yt=()=>(0,z.P1)()||e.createElement(ht,null)},23164:(ae,D,n)=>{"use strict";var e,z=n(4293),b=n(78920);e={value:!0},D.A=void 0;var K=b(n(14041)),w=z(n(74044)),J=(0,w.default)(K.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");D.A=J},19953:(ae,D,n)=>{var e=n(72195),z=e(function(b,K,w){b[w?0:1].push(K)},function(){return[[],[]]});ae.exports=z}}]);})();

//# sourceMappingURL=9165.fb78647a.chunk.js.map