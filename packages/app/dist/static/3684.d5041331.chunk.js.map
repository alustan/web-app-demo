{"version":3,"file":"static/3684.d5041331.chunk.js","mappings":"yTAaA,MAAMA,KAAYC,EAAA,GAChB,CACE,KAAM,CAAC,CAAE,OAAAC,CAAO,KAAO,CACrB,QAAS,OACT,cAAe,SACf,UAAWA,EACX,UAAWA,CACb,GACA,MAAO,CACL,KAAM,EACN,UAAW,CACb,CACF,EACA,CAAE,KAAM,oCAAqC,CAC/C,EACMC,EAAoBC,GAAU,CAClC,KAAM,CACJ,QAAAC,EAAU,WACV,cAAAC,EAAgB,IAChB,SAAAC,EAAW,EACX,eAAAC,EAAiB,GACjB,eAAAC,EAAiB,GACjB,UAAAC,EAAY,IAAU,WACtB,MAAAC,EACA,UAAAC,EACA,aAAAC,EACA,OAAAX,EACA,UAAAY,EACA,gBAAAC,EACA,YAAAC,EACA,MAAAC,EAAQ,YACR,KAAAC,EAAO,iBACT,EAAId,EACE,CAAE,OAAAe,CAAO,KAAI,MAAU,EACvBC,KAAa,MAAqBD,CAAM,EACxCE,KAAqB,KAAY,GAAc,EAC/CC,KAAoB,KAAY,GAAoB,EACpDC,KAAW,MAAY,EACvBC,EAAUxB,EAAU,CAAE,OAAAE,CAAO,CAAC,EAC9BuB,KAAY,KAAa,EACzBC,KAAqB,eACzB,CAACC,EAAMC,IAAM,C,MACX,MAAMC,KAAiB,MAAeF,EAAK,EAAE,EACvCG,EAAOT,EAAmB,CAC9B,KAAMQ,EAAe,KAAK,kBAAkB,OAAO,EACnD,UAAWA,EAAe,UAAU,kBAAkB,OAAO,EAC7D,KAAMA,EAAe,IACvB,CAAC,EACDJ,EAAU,aACR,SACA,EAAAE,EAAK,OAAO,SAAS,QAArB,UAA8B,KAAkBE,CAAc,EAC9D,CAAE,WAAY,CAAE,GAAIC,CAAK,CAAE,CAC7B,EACAP,EAASO,CAAI,CACf,EACA,CAACT,EAAoBE,EAAUE,CAAS,CAC1C,EACMM,EAAqB,cACzB,CACE,eAAgB,IAAC,MAAmBZ,CAAM,CAAC,EAC3C,SAAAZ,EACA,eAAAC,EACA,eAAAC,EACA,cAAeE,EACf,kBAAmBC,EACnB,UAAAF,CACF,EACA,CAAE,YAAa,WAAY,eAAgB,EAAK,CAClD,EACMsB,EAAkB,GAAGV,EAAkB,CAAC,GAAGS,CAAkB,GACnE,OAAuB,gBACrB,IACA,CACE,MAAAd,EACA,cAAeO,EAAQ,KACvB,QAAAnB,EACA,UAAW,GACX,SAAU,CACR,MAAO,aACP,KAAM2B,CACR,CACF,EACgB,gBACd,IACA,CACE,GAAG5B,EACH,gBAAiBW,GAAmBK,EACpC,YAAaJ,GAAeU,EAC5B,UAAWZ,GAAaU,EAAQ,MAChC,SAAAjB,EACA,eAAAC,EACA,eAAAC,EACA,UAAAC,EACA,cAAAJ,EACA,aAAAO,EACA,KAAAK,CACF,CACF,CACF,CACF,C","sources":["webpack://app/../../node_modules/@backstage/plugin-catalog-graph/dist/components/CatalogGraphCard/CatalogGraphCard.esm.js"],"sourcesContent":["import { getCompoundEntityRef, parseEntityRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { InfoCard } from '@backstage/core-components';\nimport { useRouteRef, useAnalytics } from '@backstage/core-plugin-api';\nimport { useEntity, entityRouteRef, humanizeEntityRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport qs from 'qs';\nimport React, { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { catalogGraphRouteRef } from '../../routes.esm.js';\nimport { EntityRelationsGraph } from '../EntityRelationsGraph/EntityRelationsGraph.esm.js';\nimport { ALL_RELATION_PAIRS } from '../EntityRelationsGraph/relations.esm.js';\nimport { Direction } from '../EntityRelationsGraph/types.esm.js';\n\nconst useStyles = makeStyles(\n  {\n    card: ({ height }) => ({\n      display: \"flex\",\n      flexDirection: \"column\",\n      maxHeight: height,\n      minHeight: height\n    }),\n    graph: {\n      flex: 1,\n      minHeight: 0\n    }\n  },\n  { name: \"PluginCatalogGraphCatalogGraphCard\" }\n);\nconst CatalogGraphCard = (props) => {\n  const {\n    variant = \"gridItem\",\n    relationPairs = ALL_RELATION_PAIRS,\n    maxDepth = 1,\n    unidirectional = true,\n    mergeRelations = true,\n    direction = Direction.LEFT_RIGHT,\n    kinds,\n    relations,\n    entityFilter,\n    height,\n    className,\n    rootEntityNames,\n    onNodeClick,\n    title = \"Relations\",\n    zoom = \"enable-on-click\"\n  } = props;\n  const { entity } = useEntity();\n  const entityName = getCompoundEntityRef(entity);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  const catalogGraphRoute = useRouteRef(catalogGraphRouteRef);\n  const navigate = useNavigate();\n  const classes = useStyles({ height });\n  const analytics = useAnalytics();\n  const defaultOnNodeClick = useCallback(\n    (node, _) => {\n      const nodeEntityName = parseEntityRef(node.id);\n      const path = catalogEntityRoute({\n        kind: nodeEntityName.kind.toLocaleLowerCase(\"en-US\"),\n        namespace: nodeEntityName.namespace.toLocaleLowerCase(\"en-US\"),\n        name: nodeEntityName.name\n      });\n      analytics.captureEvent(\n        \"click\",\n        node.entity.metadata.title ?? humanizeEntityRef(nodeEntityName),\n        { attributes: { to: path } }\n      );\n      navigate(path);\n    },\n    [catalogEntityRoute, navigate, analytics]\n  );\n  const catalogGraphParams = qs.stringify(\n    {\n      rootEntityRefs: [stringifyEntityRef(entity)],\n      maxDepth,\n      unidirectional,\n      mergeRelations,\n      selectedKinds: kinds,\n      selectedRelations: relations,\n      direction\n    },\n    { arrayFormat: \"brackets\", addQueryPrefix: true }\n  );\n  const catalogGraphUrl = `${catalogGraphRoute()}${catalogGraphParams}`;\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title,\n      cardClassName: classes.card,\n      variant,\n      noPadding: true,\n      deepLink: {\n        title: \"View graph\",\n        link: catalogGraphUrl\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      EntityRelationsGraph,\n      {\n        ...props,\n        rootEntityNames: rootEntityNames || entityName,\n        onNodeClick: onNodeClick || defaultOnNodeClick,\n        className: className || classes.graph,\n        maxDepth,\n        unidirectional,\n        mergeRelations,\n        direction,\n        relationPairs,\n        entityFilter,\n        zoom\n      }\n    )\n  );\n};\n\nexport { CatalogGraphCard };\n//# sourceMappingURL=CatalogGraphCard.esm.js.map\n"],"names":["useStyles","makeStyles","height","CatalogGraphCard","props","variant","relationPairs","maxDepth","unidirectional","mergeRelations","direction","kinds","relations","entityFilter","className","rootEntityNames","onNodeClick","title","zoom","entity","entityName","catalogEntityRoute","catalogGraphRoute","navigate","classes","analytics","defaultOnNodeClick","node","_","nodeEntityName","path","catalogGraphParams","catalogGraphUrl"],"sourceRoot":""}