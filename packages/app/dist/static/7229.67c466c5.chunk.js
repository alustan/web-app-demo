"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7229,4315],{92303:(F,E,e)=>{e.d(E,{d:()=>p});var t=e(14041),i=e(16654),g=e(82326);function p(D){const{themeId:h,children:O,...T}=D;return t.createElement(g.Y,{themeId:h},t.createElement(i.Y,{...T}),O)}},40941:(F,E,e)=>{e.d(E,{t:()=>ge});var t=e(78560),i=e(77125),g=e(69076),p=e(86901),D=e(16249),h=e(72501),O=e(71677),T=e(58837),R=e(7031),r=e(44148),M=e(41260),U=e(6924),N=e(61783),n=e(14041),Y=e(18453),q=e(49724),J=e(16261);function ee(o){const l=(0,J.J)(o);(0,n.useEffect)(()=>()=>{l.current()},[])}function te(o,l,c,f=0){const m=(0,n.useRef)(),d=(0,n.useRef)(),C=(0,n.useRef)(o),v=(0,n.useRef)(),L=()=>{m.current&&(clearTimeout(m.current),m.current=void 0),d.current&&(clearTimeout(d.current),d.current=void 0)};return ee(L),(0,n.useEffect)(()=>{C.current=o},l),(0,n.useMemo)(()=>{const K=()=>{if(L(),!v.current)return;const G=v.current;v.current=void 0,C.current.apply(G.this,G.args)},W=function(...G){m.current&&clearTimeout(m.current),v.current={args:G,this:this},m.current=setTimeout(K,c),f>0&&!d.current&&(d.current=setTimeout(K,f))};return Object.defineProperties(W,{length:{value:o.length},name:{value:`${o.name||"anonymous"}__debounced__${c}`}}),W},[c,f,...l])}function ne(o,l,c,f=0){(0,n.useEffect)(te(o,l,c,f),l)}var X=e(48108),oe=e(47966),z=e(53318),Z=e(18139),Q=e(87290),S=e(30043),I=e(46123),P=e.n(I);function b({enabled:o}){const l=(0,Z.gf)(S.v),[c]=(0,n.useState)(async()=>{if(!o)return[];const f="relations.ownedBy",d=(await l.getEntityFacets({facets:[f]})).facets[f].map(C=>C.value);return l.getEntitiesByRefs({entityRefs:d}).then(C=>C.items.filter(v=>v!==void 0).map(v=>v).sort((v,L)=>(v.metadata.namespace||"").localeCompare(L.metadata.namespace||"","en-US")||(P()(v,"spec.profile.displayName")||v.metadata.title||v.metadata.name).localeCompare(P()(L,"spec.profile.displayName")||L.metadata.title||L.metadata.name,"en-US")||v.kind.localeCompare(L.kind,"en-US"))).then(C=>C).catch(()=>[])});return(0,Q.A)(async(f,m)=>{var G;const d=await c;if(!d)return{items:[]};const C=(G=m==null?void 0:m.limit)!=null?G:20,{text:v,start:L}=$(f),K=d.filter(V=>a(v,V)),W=L+C;return{items:K.slice(0,W),...s({entities:K,limit:W,payload:{text:v,start:W}})}},[c],{loading:!0,value:{items:[]}})}function $(o){return _(o)&&o.cursor?JSON.parse(atob(o.cursor)):{text:o.text||"",start:0}}function _(o){return!!o.cursor}function s({entities:o,limit:l,payload:c}){return o.length>l?{cursor:btoa(JSON.stringify(c))}:{}}function a(o,l){var f,m,d;const c=o.trim();return l.kind.includes(c)||((f=l.metadata.namespace)==null?void 0:f.includes(c))||l.metadata.name.includes(c)||((m=l.metadata.title)==null?void 0:m.includes(c))||((d=P()(l,"spec.profile.displayName"))==null?void 0:d.includes(c))}function u(){const o=(0,Z.gf)(S.v);return(0,Q.A)(async(l,c)=>{var v;const f=l,m=l,d=(v=c==null?void 0:c.limit)!=null?v:20;if(m.cursor){const L=await o.queryEntities({cursor:m.cursor,limit:d});return{cursor:L.pageInfo.nextCursor,items:[...m.items,...L.items]}}const C=await o.queryEntities({fullTextFilter:{term:f.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:d});return{cursor:C.pageInfo.nextCursor,items:C.items}},[],{loading:!0})}var A=e(76842);function x({mode:o,initialSelectedOwnersRefs:l}){const c=o==="owners-only",f=u(),m=b({enabled:c}),[d,C]=c?m:f;return[d,C,j({enabled:!c,initialSelectedOwnersRefs:l})]}function j({enabled:o,initialSelectedOwnersRefs:l}){const c=(0,n.useRef)({}),f=(0,Z.gf)(S.v),[,m]=(0,Q.A)(async()=>{(await f.getEntitiesByRefs({entityRefs:l})).items.forEach(C=>{C&&(c.current[(0,t.U2)(C)]=C)})},[]);return(0,A.u)(()=>{o&&l.length>0&&m()}),{getEntity:d=>c.current[d],setEntity:d=>{c.current[(0,t.U2)(d)]=d}}}var H=e(46509),k=e(96403),w=e(80084),se=e(10265);const ae=(0,T.A)({root:{},label:{},input:{},fullWidth:{width:"100%"},boxLabel:{width:"100%",textOverflow:"ellipsis",overflow:"hidden"}},{name:"CatalogReactEntityOwnerPicker"}),re=(0,R.A)(o=>({label:{width:"100%"},root:{width:"90%"}}),{name:"FixedWidthFormControlLabel"})(p.A),Ee=n.createElement(M.A,{fontSize:"small"}),fe=n.createElement(r.A,{fontSize:"small"});function ve(o){const l=ae(),c=o.entity.kind.toLocaleLowerCase("en-US")==="group",{primaryTitle:f}=(0,H.f)(o.entity);return n.createElement(i.A,{className:l.fullWidth},n.createElement(re,{className:l.fullWidth,control:n.createElement(g.A,{icon:Ee,checkedIcon:fe,checked:o.isSelected}),onClick:m=>m.preventDefault(),label:n.createElement(O.Ay,{title:f},n.createElement(i.A,{display:"flex",alignItems:"center"},c?n.createElement(oe.A,{fontSize:"small"}):n.createElement(X.A,{fontSize:"small"}),"\xA0",n.createElement(i.A,{className:l.boxLabel},n.createElement(h.A,{noWrap:!0},f))))}))}const ge=o=>{var me,de,ue;const l=ae(),{mode:c="owners-only"}=o||{},{updateFilters:f,filters:m,queryParameters:{owners:d}}=(0,Y.nK)(),[C,v]=(0,n.useState)(""),{t:L}=(0,se.i)(w.j),K=(0,n.useMemo)(()=>[d].flat().filter(Boolean),[d]),[W,G]=(0,n.useState)(K.length?K:(de=(me=m.owners)==null?void 0:me.values)!=null?de:[]),[{value:V,loading:he},ce,ie]=x({mode:c,initialSelectedOwnersRefs:W});ne(()=>ce({text:C}),[C,ce],250);const Ce=(V==null?void 0:V.items)||[];return(0,n.useEffect)(()=>{if(K.length){const y=new q.N9(K);G(y.values)}},[K]),(0,n.useEffect)(()=>{f({owners:W.length?new q.N9(W):void 0})},[W,f]),["user","group"].includes(((ue=m.kind)==null?void 0:ue.value.toLocaleLowerCase("en-US"))||"")?null:n.createElement(i.A,{className:l.root,pb:1,pt:1},n.createElement(h.A,{className:l.label,variant:"button",component:"label"},L("entityOwnerPicker.title"),n.createElement(N.Ay,{PopperComponent:y=>n.createElement("div",{...y},y.children),multiple:!0,disableCloseOnSelect:!0,loading:he,options:Ce,value:W,getOptionSelected:(y,B)=>typeof B=="string"?(0,t.U2)(y)===B:y===B,getOptionLabel:y=>{const B=typeof y=="string"?ie.getEntity(y)||(0,t.KU)(y,{defaultKind:"group",defaultNamespace:"default"}):y;return(0,z.Z)(B,(0,z.S)(B))},onChange:(y,B)=>{v(""),G(B.map(le=>{const Ae=typeof le=="string"?le:(0,t.U2)(le);return typeof le!="string"&&ie.setEntity(le),Ae}))},filterOptions:y=>y,renderOption:(y,{selected:B})=>n.createElement(ve,{entity:y,isSelected:B}),size:"small",popupIcon:n.createElement(U.A,{"data-testid":"owner-picker-expand"}),renderInput:y=>n.createElement(D.A,{...y,className:l.input,onChange:B=>{v(B.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:y=>{const B=y.currentTarget;Math.abs(B.scrollHeight-B.clientHeight-B.scrollTop)<1&&(V!=null&&V.cursor)&&ce({items:V.items,cursor:V.cursor})},"data-testid":"owner-picker-listbox"}})))}},97229:(F,E,e)=>{e.r(E),e.d(E,{EmbeddedDocsRouter:()=>_,Router:()=>$,isTechDocsAvailable:()=>b});var t=e(14041),i=e(18690),g=e(78560),p=e(64392),D=e(48043),h=e(84893);const O="backstage.io/techdocs-entity",T=({entity:s})=>{var u,A;let a=(0,g.sM)(s);if((u=s.metadata.annotations)!=null&&u[O])try{a=(0,g.KU)((A=s.metadata.annotations)==null?void 0:A[O])}catch{}return t.createElement(p.Wj,{entityRef:a},t.createElement(h.Z,null),t.createElement(D.p,{withSearch:!1}))};var R=e(4315),r=e(95403),M=e(16400),U=e(77125),N=e(64947),n=e(58837),Y=e(72501),q=e(65995),J=e(62112),ee=e(75202),te=e(46343),ne=e(40074),X=e(46123),oe=e(96403);const z=(0,n.A)(s=>({code:{borderRadius:6,margin:s.spacing(2,0),background:s.palette.type==="dark"?"#444":s.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Z(s,a){var se,ae;const u=(a==null?void 0:a.kind)||"Component",A=(a==null?void 0:a.metadata.name)||"example",x=((se=a==null?void 0:a.spec)==null?void 0:se.type)||"website",j=((ae=a==null?void 0:a.spec)==null?void 0:ae.owner)||"user:default/guest",H=`apiVersion: backstage.io/v1alpha1
kind: ${u}
metadata:
  name: ${A}
  annotations:${s.map(re=>`
    ${re}: value`).join("")}
spec:
  type: ${x}
  owner: ${j}`;let k=6;const w=[];return s.forEach(()=>{w.push(k),k++}),{yamlText:H,lineNumbers:w}}function Q(s,a="Component"){const u=s.length<=1;return t.createElement(t.Fragment,null,"The ",u?"annotation":"annotations"," ",s.map(A=>t.createElement("code",null,A)).reduce((A,x)=>t.createElement(t.Fragment,null,A,", ",x))," ",u?"is":"are"," missing. You need to add the"," ",u?"annotation":"annotations"," to your ",a," if you want to enable this tool.")}function S(s){let a;try{a=(0,M.tN)().entity}catch{}const{annotation:u,readMoreUrl:A}=s,x=Array.isArray(u)?u:[u],j=A||"https://backstage.io/docs/features/software-catalog/well-known-annotations",H=z(),k=(a==null?void 0:a.kind)||"Component",{yamlText:w,lineNumbers:se}=Z(x,a);return t.createElement(q.p,{missing:"field",title:"Missing Annotation",description:Q(x,k),action:t.createElement(t.Fragment,null,t.createElement(Y.A,{variant:"body1"},"Add the annotation to your ",k," YAML as shown in the highlighted example below:"),t.createElement(U.A,{className:H.code},t.createElement(J.z,{text:w,language:"yaml",showLineNumbers:!0,highlightedNumbers:se,customStyle:{background:"inherit",fontSize:"115%"}})),t.createElement(N.A,{color:"primary",component:ee.N_,to:j},"Read more"))})}const I="backstage.io/techdocs-ref",P="backstage.io/techdocs-entity",b=s=>{var a,u,A,x;return!!((u=(a=s==null?void 0:s.metadata)==null?void 0:a.annotations)!=null&&u[I])||!!((x=(A=s==null?void 0:s.metadata)==null?void 0:A.annotations)!=null&&x[P])},$=()=>t.createElement(i.BV,null,t.createElement(i.qh,{path:"/",element:t.createElement(R.TechDocsIndexPage,null)}),t.createElement(i.qh,{path:"/:namespace/:kind/:name/*",element:t.createElement(r.W,null)})),_=s=>{var j,H;const{children:a}=s,{entity:u}=(0,M.tN)(),A=(0,i.Ye)([{path:"/*",element:t.createElement(T,{entity:u}),children:[{path:"*",element:a}]}]);return((j=u.metadata.annotations)==null?void 0:j[I])||((H=u.metadata.annotations)==null?void 0:H[P])?A:t.createElement(S,{annotation:[I]})}},4348:(F,E,e)=>{e.d(E,{V:()=>t});function t(i,g){return g.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?i:i.toLocaleLowerCase("en-US")}},67633:(F,E,e)=>{e.d(E,{o:()=>J});var t=e(14041),i=e(36338),g=e(72814),p=e(18139),D=e(54195),h=e(97214),O=e(699),T=e(53318),R=e(17749),r=e(29021),M=e(65995),U=e(87318),N=e(143),n=e(48751),Y=e(4348);const q=[n.B.createTitleColumn({hidden:!0}),n.B.createNameColumn(),n.B.createOwnerColumn(),n.B.createKindColumn(),n.B.createTypeColumn()],J=ee=>{const{entities:te,title:ne,loading:X,columns:oe,actions:z,options:Z}=ee,[,Q]=(0,i.A)(),S=(0,g.S)(R.Oc),I=(0,p.gf)(D.U);if(!te)return null;const P=te.map(s=>{var u;const a=(0,O.t)(s,h.vv);return{entity:s,resolved:{docsUrl:S({namespace:(0,Y.V)((u=s.metadata.namespace)!=null?u:"default",I),kind:(0,Y.V)(s.kind,I),name:(0,Y.V)(s.metadata.name,I)}),ownedByRelations:a,ownedByRelationsTitle:a.map(A=>(0,T.S)(A,{defaultKind:"group"})).join(", ")}}}),b=[N.f.createCopyDocsUrlAction(Q)],$=20,_=P&&P.length>$;return t.createElement(t.Fragment,null,X||P&&P.length>0?t.createElement(r.X,{isLoading:X,options:{paging:_,pageSize:$,search:!0,actionsColumnIndex:-1,...Z},data:P,columns:oe||q,actions:z||b,title:ne?`${ne} (${P.length})`:`All (${P.length})`}):t.createElement(M.p,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:t.createElement(U.z,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};J.columns=n.B,J.actions=N.f},143:(F,E,e)=>{e.d(E,{f:()=>O});var t=e(14041),i=e(55290),g=e(7031),p=e(80109),D=e(15303);const h=(0,g.A)({root:{color:"#f3ba37"}})(p.A),O={createCopyDocsUrlAction(T){return R=>({icon:()=>t.createElement(i.A,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>T(`${window.location.origin}${R.resolved.docsUrl}`)})},createStarEntityAction(T,R){return r=>{const M=r.entity,U=T(M);return{cellStyle:{paddingLeft:"1em"},icon:()=>U?t.createElement(h,null):t.createElement(D.A,null),tooltip:U?"Remove from favorites":"Add to favorites",onClick:()=>R(M)}}}}},48751:(F,E,e)=>{e.d(E,{B:()=>R});var t=e(14041),i=e(77125),g=e(58837);const p=(0,g.A)(r=>({value:{marginBottom:r.spacing(.75)},subvalue:{color:r.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function D(r){const{value:M,subvalue:U}=r,N=p();return t.createElement(t.Fragment,null,t.createElement(i.A,{className:N.value},M),t.createElement(i.A,{className:N.subvalue},U))}var h=e(75202),O=e(14158);function T(r){return r.metadata.title||r.metadata.name}const R={createTitleColumn(r){return{...R.createNameColumn(),field:"entity.metadata.title",hidden:r==null?void 0:r.hidden}},createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,searchable:!0,defaultSort:"asc",customSort:(r,M)=>{const U=T(r.entity).toLocaleLowerCase(),N=T(M.entity).toLocaleLowerCase();return U.localeCompare(N)},render:r=>t.createElement(D,{value:t.createElement(h.N_,{to:r.resolved.docsUrl},T(r.entity)),subvalue:r.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:r})=>t.createElement(O.i,{entityRefs:r.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}}},4315:(F,E,e)=>{e.r(E),e.d(E,{TechDocsIndexPage:()=>Q});var t=e(14041),i=e(18690),g=e(16454),p=e(17138),D=e(56420),h=e(18453),O=e(77509),T=e(30117),R=e(40941),r=e(56829),M=e(88461),U=e(24259);class N{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":U.c}}}const n=()=>{const{updateFilters:S}=(0,h.nK)();return(0,t.useEffect)(()=>{S({techdocs:new N})},[S]),null};var Y=e(36338),q=e(45250),J=e(99338),ee=e(62112),te=e(44861),ne=e(67633),X=e(143),oe=e(48751);const z=S=>{var k,w;const{columns:I,actions:P,options:b}=S,{loading:$,error:_,entities:s,filters:a}=(0,h.nK)(),{isStarredEntity:u,toggleStarredEntity:A}=(0,te.I)(),[,x]=(0,Y.A)(),j=(0,q.capitalize)((w=(k=a.user)==null?void 0:k.value)!=null?w:"all"),H=[X.f.createCopyDocsUrlAction(x),X.f.createStarEntityAction(u,A)];return _?t.createElement(J.B,{severity:"error",title:"Could not load available documentation."},t.createElement(ee.z,{language:"text",text:_.toString()})):t.createElement(ne.o,{title:j,entities:s,loading:$,actions:P||H,columns:I,options:b})};z.columns=oe.B,z.actions=X.f;const Z=S=>{const{initialFilter:I="owned",columns:P,actions:b,ownerPickerMode:$}=S;return t.createElement(M.S,null,t.createElement(g.U,null,t.createElement(p.d,{title:""},t.createElement(D.Y,null,"Discover documentation in your ecosystem.")),t.createElement(h.B9,null,t.createElement(O.GI,null,t.createElement(O.GI.Filters,null,t.createElement(n,null),t.createElement(T.y,{initialFilter:I}),t.createElement(R.t,{mode:$}),t.createElement(r.m,null)),t.createElement(O.GI.Content,null,t.createElement(z,{actions:b,columns:P}))))))},Q=S=>(0,i.P1)()||t.createElement(Z,{...S})},88461:(F,E,e)=>{e.d(E,{S:()=>D});var t=e(14041),i=e(92303),g=e(18139),p=e(54195);const D=h=>{var r;const{children:O}=h,R=`Documentation available in ${(r=(0,g.gf)(p.U).getOptionalString("organization.name"))!=null?r:"Backstage"}`;return t.createElement(i.d,{title:"Documentation",subtitle:R,themeId:"documentation"},O)}},47966:(F,E,e)=>{var t,i=e(4293),g=e(78920);t={value:!0},E.A=void 0;var p=g(e(14041)),D=i(e(74044)),h=(0,D.default)(p.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");E.A=h},55290:(F,E,e)=>{var t,i=e(4293),g=e(78920);t={value:!0},E.A=void 0;var p=g(e(14041)),D=i(e(74044)),h=(0,D.default)(p.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");E.A=h}}]);})();

//# sourceMappingURL=7229.67c466c5.chunk.js.map