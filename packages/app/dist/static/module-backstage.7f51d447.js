"use strict";(()=>{var Yo=Object.defineProperty;var za=K=>{throw TypeError(K)};var Qo=(K,y,e)=>y in K?Yo(K,y,{enumerable:!0,configurable:!0,writable:!0,value:e}):K[y]=e;var ue=(K,y,e)=>Qo(K,typeof y!="symbol"?y+"":y,e),Ea=(K,y,e)=>y.has(K)||za("Cannot "+e);var he=(K,y,e)=>(Ea(K,y,"read from private field"),e?e.call(K):y.get(K)),mt=(K,y,e)=>y.has(K)?za("Cannot add the same private member more than once"):y instanceof WeakSet?y.add(K):y.set(K,e),Ct=(K,y,e,t)=>(Ea(K,y,"write to private field"),t?t.call(K,e):y.set(K,e),e),Gt=(K,y,e)=>(Ea(K,y,"access private method"),e);(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1556],{53424:(K,y,e)=>{var un,An,mn,ln,Pn,gn,Ln,pn,Cn,Zn,hn,cn,an,Bn,On,Xt,ja,_n,ya,Un;e.d(y,{E:()=>Vo});const t="Invalid discovery URL pattern,";class l{constructor(n){this.parts=n}static compile(n){const o=n.split(/\{\{\s*pluginId\s*\}\}/),f=o.join("pluginId");let C;try{C=new URL(f)}catch{throw new Error(`${t} URL '${f}' is invalid`)}if(C.hash)throw new Error(`${t} URL must not have a hash`);if(C.search)throw new Error(`${t} URL must not have a query`);if(f.endsWith("/"))throw new Error(`${t} URL must not end with a slash`);return new l(o)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}var u=e(96403),a=e.n(u);class A{constructor(){ue(this,"isClosed",!1);ue(this,"terminatingError");ue(this,"observable",new(a())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)})));ue(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(o=>o.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(o=>o.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,o,f){const C=typeof n=="function"?{next:n,error:o,complete:f}:n;return this.observable.subscribe(C)}}class c{constructor(n){ue(this,"isClosed");ue(this,"currentValue");ue(this,"terminatingError");ue(this,"observable");ue(this,"subscribers",new Set);this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(a())(o=>this.isClosed?(this.terminatingError?o.error(this.terminatingError):o.complete(),()=>{}):(o.next(this.currentValue),this.subscribers.add(o),()=>{this.subscribers.delete(o)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(o=>o.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(o=>o.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,o,f){const C=typeof n=="function"?{next:n,error:o,complete:f}:n;return this.observable.subscribe(C)}}class h{constructor(){ue(this,"subject",new A)}post(n){this.subject.next(n)}alert$(){return this.subject}}class d{captureEvent(n){}}class r{constructor(n,o){this.alertApi=n,this.errorApi=o}post(n,o){return o!=null&&o.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,o)}error$(){return this.errorApi.error$()}}class s{constructor(){ue(this,"subject",new A)}post(n,o){this.subject.next({error:n,context:o})}error$(){return this.subject}}class m{static forward(n,o){window.addEventListener("unhandledrejection",f=>{n.post(f.reason,o)})}}const g=new Map,sn=class sn{constructor(n,o){ue(this,"subscribers",new Set);ue(this,"observable",new(a())(n=>(this.subscribers.add(n),()=>{this.subscribers.delete(n)})));this.namespace=n,this.errorApi=o}static create(n){var o;return new sn((o=n.namespace)!=null?o:"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{var o;for(const[f,C]of g.entries())(o=n.key)!=null&&o.startsWith(f)&&C.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let o,f="absent";try{const C=localStorage.getItem(this.getKeyName(n));C&&(o=JSON.parse(C,(x,ee)=>(typeof ee=="object"&&ee!==null&&Object.freeze(ee),ee)),f="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:o,presence:f}}forBucket(n){const o=`${this.namespace}/${n}`;return g.has(o)||g.set(o,new sn(o,this.errorApi)),g.get(o)}async set(n,o){localStorage.setItem(this.getKeyName(n),JSON.stringify(o)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return sn.hasSubscribed||(sn.addStorageEventListener(),sn.hasSubscribed=!0),this.observable.filter(({key:o})=>o===n)}handleStorageChange(n){if(!(n!=null&&n.startsWith(this.namespace)))return;const o=n==null?void 0:n.slice(`${this.namespace}/`.length);o.includes("/")||this.notifyChanges(decodeURIComponent(o))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const o=this.snapshot(n);for(const f of this.subscribers)f.next(o)}};ue(sn,"hasSubscribed",!1);let p=sn;function v(E){var f;let n=E.baseImplementation||e.g.fetch;const o=[(f=E.middleware)!=null?f:[]].flat().reverse();for(const C of o)n=C.apply(n);return{fetch:n}}class R{constructor(n,o,f,C){this.identityApi=n,this.allowUrl=o,this.headerName=f,this.headerValue=C}static create(n){var x,ee;const o=P(n),f=((x=n.header)==null?void 0:x.name)||"authorization",C=((ee=n.header)==null?void 0:ee.value)||(ae=>`Bearer ${ae}`);return new R(n.identityApi,o,f,C)}apply(n){return async(o,f)=>{const C=new Request(o,f),{token:x}=await this.identityApi.getCredentials();return C.headers.get(this.headerName)||typeof x!="string"||!x||!this.allowUrl(C.url)?n(o,f):(C.headers.set(this.headerName,this.headerValue(x)),n(C))}}}function P(E){return E.allowUrl?E.allowUrl:E.urlPrefixAllowlist?T(E.urlPrefixAllowlist):E.config?T([E.config.getString("backend.baseUrl")]):()=>!1}function T(E){const n=E.map(o=>o.replace(/\/$/,""));return o=>n.some(f=>o===f||o.startsWith(`${f}/`))}function D(E,n){return!n||n==="/"?E:`${E.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class B{constructor(n){this.discoveryApi=n}apply(n){return async(o,f)=>{const C=new Request(o,f),x="plugin://";if(!C.url.startsWith(x))return n(o,f);const{hostname:ee,pathname:ae,search:de,hash:Oe,username:ke,password:qe}=new URL(`http://${C.url.substring(x.length)}`);let $e=await this.discoveryApi.getBaseUrl(ee);if(ke||qe){const rt=new URL($e),ft=`${ke}${qe?`:${qe}`:""}@`;$e=`${rt.protocol}//${ft}${rt.host}${rt.pathname}`}const nt=`${D($e,ae)}${de}${Oe}`;return n(nt,typeof o=="string"||M(o)?f:o)}}}function M(E){return typeof E=="object"&&(E==null?void 0:E.constructor)===URL}class b{static resolvePluginProtocol(n){return new B(n.discoveryApi)}static injectIdentityAuth(n){return R.create(n)}constructor(){}}function i(E,n){for(const o of n)if(!E.has(o))return!1;return!0}function j(E,...n){const o=new Set(E);for(const f of n)for(const C of f)o.add(C);return o}class U{constructor(){ue(this,"requests",[]);ue(this,"subject",new c(this.getCurrentPending()))}request(n){return new Promise((o,f)=>{this.requests.push({scopes:n,resolve:o,reject:f}),this.subject.next(this.getCurrentPending())})}resolve(n,o){this.requests=this.requests.filter(f=>i(n,f.scopes)?(f.resolve(o),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(o=>o.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((o,f)=>j(o,f.scopes),this.requests[0].scopes);return{scopes:n,resolve:o=>{n&&this.resolve(n,o)},reject:o=>{n&&this.reject(o)}}}}class G{constructor(){ue(this,"subject",new c([]));ue(this,"currentRequests",[]);ue(this,"handlerCount",0)}createAuthRequester(n){const o=new U,f=this.handlerCount;return this.handlerCount++,o.pending().subscribe({next:C=>{const x=this.currentRequests.slice(),ee=this.makeAuthRequest(C,n);ee?x[f]=ee:delete x[f],this.currentRequests=x,this.subject.next(x.filter(Boolean))}}),C=>o.request(C)}makeAuthRequest(n,o){const{scopes:f}=n;if(f)return{provider:o.provider,trigger:async()=>{const C=await o.onAuthRequest(f);n.resolve(C)},reject:()=>{const C=new Error("Login failed, rejected by user");C.name="RejectedError",n.reject(C)}}}authRequest$(){return this.subject}}function F(E){return new Promise((n,o)=>{const f=E.width||500,C=E.height||700,x=window.screen.width/2-f/2,ee=window.screen.height/2-C/2,ae=window.open(E.url,E.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${f},height=${C},top=${ee},left=${x}`);let de="";if(!ae||typeof ae.closed=="undefined"||ae.closed){const $e=new Error("Failed to open auth popup.");$e.name="PopupRejectedError",o($e);return}const Oe=$e=>{if($e.source!==ae||$e.origin!==E.origin)return;const{data:nt}=$e;if(nt.type==="config_info"){de=nt.targetOrigin;return}if(nt.type!=="authorization_response")return;const rt=nt;if("error"in rt){const ft=new Error(rt.error.message);ft.name=rt.error.name,o(ft)}else n(rt.response);qe()},ke=setInterval(()=>{if(ae.closed){const $e=`Login failed, ${de&&de!==window.location.origin?`Incorrect app origin, expected ${de}`:"popup was closed"}`,nt=new Error($e);nt.name="PopupClosedError",o(nt),qe()}},100);function qe(){window.removeEventListener("message",Oe),clearInterval(ke)}window.addEventListener("message",Oe)})}let Z=!1;function _(E){return[...E].join(" ")}class N{constructor(n){ue(this,"discoveryApi");ue(this,"environment");ue(this,"provider");ue(this,"joinScopesFunc");ue(this,"authRequester");ue(this,"sessionTransform");ue(this,"enableExperimentalRedirectFlow");ue(this,"popupOptions");var ke;const{configApi:o,discoveryApi:f,environment:C,provider:x,joinScopes:ee=_,oauthRequestApi:ae,sessionTransform:de=qe=>qe,popupOptions:Oe}=n;!Z&&!o&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),Z=!0),this.enableExperimentalRedirectFlow=o&&(ke=o.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?ke:!1,this.authRequester=ae.createAuthRequester({provider:x,onAuthRequest:async qe=>this.enableExperimentalRedirectFlow?this.executeRedirect(qe):this.showPopup(qe)}),this.discoveryApi=f,this.environment=C,this.provider=x,this.joinScopesFunc=ee,this.sessionTransform=de,this.popupOptions=Oe}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const o=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(C=>{throw new Error(`Auth refresh request failed, ${C}`)});if(!o.ok){const C=new Error(`Auth refresh request failed, ${o.statusText}`);throw C.status=o.status,C}const f=await o.json();if(f.error){const C=new Error(f.error.message);throw f.error.name&&(C.name=f.error.name),C}return await this.sessionTransform(f)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(o=>{throw new Error(`Logout request failed, ${o}`)});if(!n.ok){const o=new Error(`Logout request failed, ${n.statusText}`);throw o.status=n.status,o}}async showPopup(n){var ae,de,Oe,ke,qe,$e,nt,rt;const o=this.joinScopesFunc(n),f=await this.buildUrl("/start",{scope:o,origin:window.location.origin,flow:"popup"}),C=(de=(ae=this.popupOptions)==null?void 0:ae.size)!=null&&de.fullscreen?window.screen.width:((ke=(Oe=this.popupOptions)==null?void 0:Oe.size)==null?void 0:ke.width)||450,x=($e=(qe=this.popupOptions)==null?void 0:qe.size)!=null&&$e.fullscreen?window.screen.height:((rt=(nt=this.popupOptions)==null?void 0:nt.size)==null?void 0:rt.height)||730,ee=await F({url:f,name:`${this.provider.title} Login`,origin:new URL(f).origin,width:C,height:x});return await this.sessionTransform(ee)}async executeRedirect(n){const o=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:o,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,o){const f=await this.discoveryApi.getBaseUrl("auth"),C=this.buildQueryString({...o,env:this.environment});return`${f}/${this.provider.id}${n}${C}`}buildQueryString(n){if(!n)return"";const o=Object.entries(n).map(([f,C])=>{if(typeof C=="string")return`${encodeURIComponent(f)}=${encodeURIComponent(C)}`;if(C)return encodeURIComponent(f)}).filter(Boolean).join("&");return o?`?${o}`:""}}function V(E,n){for(const o of n)if(!E.has(o))return!1;return!0}class L{constructor(n){this.options=n}sessionExistsAndHasScope(n,o){if(!n)return!1;if(!o||this.options.sessionScopes===void 0)return!0;const f=this.options.sessionScopes(n);return V(f,o)}getExtendedScope(n,o){const f=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const C=this.options.sessionScopes(n);for(const x of C)f.add(x)}if(o)for(const C of o)f.add(C);return f}}var O=e(33129);class W{constructor(){ue(this,"subject",new c(O.Yj.SignedOut));ue(this,"signedIn",!1)}setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?O.Yj.SignedIn:O.Yj.SignedOut))}sessionState$(){return this.subject}}class I{constructor(n){ue(this,"connector");ue(this,"helper");ue(this,"sessionScopesFunc");ue(this,"sessionShouldRefreshFunc");ue(this,"stateTracker",new W);ue(this,"refreshPromise");ue(this,"currentSession");const{connector:o,defaultScopes:f=new Set,sessionScopes:C,sessionShouldRefresh:x}=n;this.connector=o,this.sessionScopesFunc=C,this.sessionShouldRefreshFunc=x,this.helper=new L({sessionScopes:C,defaultScopes:f})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const f=await this.collapsedSessionRefresh(n.scopes),C=this.sessionScopesFunc(this.currentSession),x=this.sessionScopesFunc(f);return V(x,C)&&(this.currentSession=f),f}catch(f){if(n.optional)return;throw f}}if(!this.currentSession&&!n.instantPopup)try{const o=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=o,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,n));try{const o=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),o}finally{delete this.refreshPromise}}}const w={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class Q{constructor(n){ue(this,"sessionManager");ue(this,"scopeTransform");this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}static create(n){const{configApi:o,discoveryApi:f,environment:C="development",provider:x=w,oauthRequestApi:ee,defaultScopes:ae=[],scopeTransform:de=$e=>$e,popupOptions:Oe}=n,ke=new N({configApi:o,discoveryApi:f,environment:C,provider:x,oauthRequestApi:ee,sessionTransform({backstageIdentity:$e,...nt}){const rt={...nt,providerInfo:{idToken:nt.providerInfo.idToken,accessToken:nt.providerInfo.accessToken,scopes:Q.normalizeScopes(de,nt.providerInfo.scope),expiresAt:nt.providerInfo.expiresInSeconds?new Date(Date.now()+nt.providerInfo.expiresInSeconds*1e3):void 0}};return $e&&(rt.backstageIdentity={token:$e.token,identity:$e.identity,expiresAt:$e.expiresInSeconds?new Date(Date.now()+$e.expiresInSeconds*1e3):void 0}),rt},popupOptions:Oe}),qe=new I({connector:ke,defaultScopes:new Set(ae),sessionScopes:$e=>$e.providerInfo.scopes,sessionShouldRefresh:$e=>{var rt,ft;let nt=1/0;return(rt=$e.providerInfo)!=null&&rt.expiresAt&&(nt=Math.min(nt,($e.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(ft=$e.backstageIdentity)!=null&&ft.expiresAt&&(nt=Math.min(nt,($e.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),nt<60*5}});return new Q({sessionManager:qe,scopeTransform:de})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,o){var x;const f=Q.normalizeScopes(this.scopeTransform,n),C=await this.sessionManager.getSession({...o,scopes:f});return(x=C==null?void 0:C.providerInfo.accessToken)!=null?x:""}async getIdToken(n={}){var f;const o=await this.sessionManager.getSession({...n,scopes:new Set(["openid"])});return(f=o==null?void 0:o.providerInfo.idToken)!=null?f:""}async getBackstageIdentity(n={}){const o=await this.sessionManager.getSession(n);return o==null?void 0:o.backstageIdentity}async getProfile(n={}){const o=await this.sessionManager.getSession(n);return o==null?void 0:o.profile}static normalizeScopes(n,o){if(!o)return new Set;const f=Array.isArray(o)?o:o.split(/[\s|,]/).filter(Boolean);return new Set(n(f))}}const J={id:"google",title:"Google",icon:()=>null},Y="https://www.googleapis.com/auth/";class z{static create(n){const{configApi:o,discoveryApi:f,oauthRequestApi:C,environment:x="development",provider:ee=J,defaultScopes:ae=["openid",`${Y}userinfo.email`,`${Y}userinfo.profile`]}=n;return Q.create({configApi:o,discoveryApi:f,oauthRequestApi:C,provider:ee,environment:x,defaultScopes:ae,scopeTransform(de){return de.map(Oe=>Oe==="openid"?Oe:Oe==="profile"||Oe==="email"?`${Y}userinfo.${Oe}`:Oe.startsWith(Y)?Oe:`${Y}${Oe}`)}})}}const q={id:"microsoft",title:"Microsoft",icon:()=>null},Jt=class Jt{constructor(n){ue(this,"oauth2");ue(this,"configApi");ue(this,"environment");ue(this,"provider");ue(this,"oauthRequestApi");ue(this,"discoveryApi");ue(this,"scopeTransform");const{configApi:o,environment:f="development",provider:C=q,oauthRequestApi:x,discoveryApi:ee,defaultScopes:ae=["openid","offline_access","profile","email","User.Read"],scopeTransform:de=Oe=>Oe.concat("offline_access")}=n;this.configApi=o,this.environment=f,this.provider=C,this.oauthRequestApi=x,this.discoveryApi=ee,this.scopeTransform=de,this.oauth2={[Jt.MicrosoftGraphID]:Q.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:ae})}}static create(n){return new Jt(n)}microsoftGraph(){return this.oauth2[Jt.MicrosoftGraphID]}static resourceForScopes(n){var C;const o=[...new Set(n.split(" ").map(Jt.resourceForScope).filter(x=>x!=="openid"))];if(o.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${o.join(", ")}. Access tokens can only have a single audience.`));const f=(C=o[0])!=null?C:Jt.MicrosoftGraphID;return Promise.resolve(f)}static resourceForScope(n){var f;const o=(f=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:f.groups;if(o){const{resourceURI:C}=o;return C.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return Jt.MicrosoftGraphID}}async getAccessToken(n,o){const f=n===void 0?Jt.MicrosoftGraphID:await Jt.resourceForScopes(Array.isArray(n)?n.join(" "):n);return f in this.oauth2||(this.oauth2[f]=Q.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[f].getAccessToken(n,o)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};ue(Jt,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let te=Jt;const se={id:"github",title:"GitHub",icon:()=>null};class ne{static create(n){const{configApi:o,discoveryApi:f,environment:C="development",provider:x=se,oauthRequestApi:ee,defaultScopes:ae=["read:user"]}=n;return Q.create({configApi:o,discoveryApi:f,oauthRequestApi:ee,provider:x,environment:C,defaultScopes:ae})}}const oe={id:"okta",title:"Okta",icon:()=>null},me=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Se="okta.";class be{static create(n){const{configApi:o,discoveryApi:f,environment:C="development",provider:x=oe,oauthRequestApi:ee,defaultScopes:ae=["openid","email","profile","offline_access"]}=n;return Q.create({configApi:o,discoveryApi:f,oauthRequestApi:ee,provider:x,environment:C,defaultScopes:ae,scopeTransform(de){return de.map(Oe=>me.has(Oe)||Oe.startsWith(Se)?Oe:`${Se}${Oe}`)}})}}const Be={id:"gitlab",title:"GitLab",icon:()=>null};class Je{static create(n){const{configApi:o,discoveryApi:f,environment:C="development",provider:x=Be,oauthRequestApi:ee,defaultScopes:ae=["read_user"]}=n;return Q.create({configApi:o,discoveryApi:f,oauthRequestApi:ee,provider:x,environment:C,defaultScopes:ae})}}const Qe={id:"onelogin",title:"onelogin",icon:()=>null},Te=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Ie="onelogin.";class Me{static create(n){const{configApi:o,discoveryApi:f,environment:C="development",provider:x=Qe,oauthRequestApi:ee}=n;return Q.create({configApi:o,discoveryApi:f,oauthRequestApi:ee,provider:x,environment:C,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(ae){return ae.map(de=>Te.has(de)||de.startsWith(Ie)?de:`${Ie}${de}`)}})}}const He={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Ye{static create(n){const{configApi:o,discoveryApi:f,environment:C="development",provider:x=He,oauthRequestApi:ee,defaultScopes:ae=["account"]}=n;return Q.create({configApi:o,discoveryApi:f,oauthRequestApi:ee,provider:x,environment:C,defaultScopes:ae})}}const lt={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class Et{static create(n){const{configApi:o,discoveryApi:f,environment:C="development",provider:x=lt,oauthRequestApi:ee,defaultScopes:ae=["PROJECT_ADMIN"]}=n;return Q.create({configApi:o,discoveryApi:f,oauthRequestApi:ee,provider:x,environment:C,defaultScopes:ae})}}const We={id:"atlassian",title:"Atlassian",icon:()=>null};class ze{static create(n){const{configApi:o,discoveryApi:f,environment:C="development",provider:x=We,oauthRequestApi:ee}=n;return Q.create({configApi:o,discoveryApi:f,oauthRequestApi:ee,provider:x,environment:C})}}const we={id:"vmwareCloudServices",title:"VMware Cloud",icon:()=>null};class ce{static create(n){const{configApi:o,discoveryApi:f,oauthRequestApi:C,environment:x="development",provider:ee=we,defaultScopes:ae=["openid"]}=n;return Q.create({configApi:o,discoveryApi:f,oauthRequestApi:C,provider:ee,environment:x,defaultScopes:ae})}}var Ae=e(45843),Re=e(61617),Ne=e(54195),ht=e(34477),Ot=e(43327),ct=e(24453),ut=e(83392),it=e(95159),Ce=e(94223),Pe=e(35177),Ge=e(40058),_e=e(3399),Xe=e(10288),Ke=e.n(Xe),At=e(52964),Ue=e(46195),et=e(3663);const tt=Ue.z.lazy(()=>Ue.z.object({rule:Ue.z.string(),resourceType:Ue.z.string(),params:Ue.z.record(Ue.z.any()).optional()}).or(Ue.z.object({anyOf:Ue.z.array(tt).nonempty()})).or(Ue.z.object({allOf:Ue.z.array(tt).nonempty()})).or(Ue.z.object({not:tt}))),pe=Ue.z.object({result:Ue.z.literal(et.b.ALLOW).or(Ue.z.literal(et.b.DENY))}),k=Ue.z.union([Ue.z.object({result:Ue.z.literal(et.b.ALLOW).or(Ue.z.literal(et.b.DENY))}),Ue.z.object({result:Ue.z.literal(et.b.CONDITIONAL),pluginId:Ue.z.string(),resourceType:Ue.z.string(),conditions:tt})]),H=(E,n)=>Ue.z.object({items:Ue.z.array(Ue.z.intersection(Ue.z.object({id:Ue.z.string()}),E)).refine(o=>o.length===n.size&&o.every(({id:f})=>n.has(f)),{message:"Items in response do not match request"})});class le{constructor(n){ue(this,"enabled");ue(this,"discovery");var o;this.discovery=n.discovery,this.enabled=(o=n.config.getOptionalBoolean("permission.enabled"))!=null?o:!1}async authorize(n,o){return this.makeRequest(n,pe,o)}async authorizeConditional(n,o){return this.makeRequest(n,k,o)}async makeRequest(n,o,f){if(!this.enabled)return n.map(ke=>({result:et.b.ALLOW}));const C={items:n.map(ke=>({id:At.A(),...ke}))},x=await this.discovery.getBaseUrl("permission"),ee=await Ke()(`${x}/authorize`,{method:"POST",body:JSON.stringify(C),headers:{...this.getAuthorizationHeader(f==null?void 0:f.token),"content-type":"application/json"}});if(!ee.ok)throw await _e.o3.fromResponse(ee);const ae=await ee.json(),Oe=H(o,new Set(C.items.map(({id:ke})=>ke))).parse(ae).items.reduce((ke,qe)=>(ke[qe.id]=qe,ke),{});return C.items.map(ke=>Oe[ke.id])}getAuthorizationHeader(n){return n?{Authorization:`Bearer ${n}`}:{}}}class ve{constructor(n,o){this.permissionClient=n,this.identityApi=o}static create(n){const{config:o,discovery:f,identity:C}=n,x=new le({discovery:f,config:o});return new ve(x,C)}async authorize(n){return(await this.permissionClient.authorize([n],await this.identityApi.getCredentials()))[0]}}const ge=[(0,Ae.b)({api:Re.I,deps:{configApi:Ne.U},factory:({configApi:E})=>l.compile(`${E.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,Ae.b)({api:ht.k,deps:{},factory:()=>new h}),(0,Ae.b)({api:Ot.c,deps:{},factory:()=>new d}),(0,Ae.b)({api:ct.m,deps:{alertApi:ht.k},factory:({alertApi:E})=>{const n=new r(E,new s);return m.forward(n,{hidden:!1}),n}}),(0,Ae.b)({api:ut.F,deps:{errorApi:ct.m},factory:({errorApi:E})=>p.create({errorApi:E})}),(0,Ae.b)({api:it.a,deps:{configApi:Ne.U,identityApi:Ce.K,discoveryApi:Re.I},factory:({configApi:E,identityApi:n,discoveryApi:o})=>v({middleware:[b.resolvePluginProtocol({discoveryApi:o}),b.injectIdentityAuth({identityApi:n,config:E})]})}),(0,Ae.b)({api:Pe.s,deps:{},factory:()=>new G}),(0,Ae.b)({api:O.Vk,deps:{discoveryApi:Re.I,oauthRequestApi:Pe.s,configApi:Ne.U},factory:({discoveryApi:E,oauthRequestApi:n,configApi:o})=>z.create({configApi:o,discoveryApi:E,oauthRequestApi:n,environment:o.getOptionalString("auth.environment")})}),(0,Ae.b)({api:O.u0,deps:{discoveryApi:Re.I,oauthRequestApi:Pe.s,configApi:Ne.U},factory:({discoveryApi:E,oauthRequestApi:n,configApi:o})=>te.create({configApi:o,discoveryApi:E,oauthRequestApi:n,environment:o.getOptionalString("auth.environment")})}),(0,Ae.b)({api:O.py,deps:{discoveryApi:Re.I,oauthRequestApi:Pe.s,configApi:Ne.U},factory:({discoveryApi:E,oauthRequestApi:n,configApi:o})=>ne.create({configApi:o,discoveryApi:E,oauthRequestApi:n,defaultScopes:["read:user"],environment:o.getOptionalString("auth.environment")})}),(0,Ae.b)({api:O.Zj,deps:{discoveryApi:Re.I,oauthRequestApi:Pe.s,configApi:Ne.U},factory:({discoveryApi:E,oauthRequestApi:n,configApi:o})=>be.create({configApi:o,discoveryApi:E,oauthRequestApi:n,environment:o.getOptionalString("auth.environment")})}),(0,Ae.b)({api:O.$7,deps:{discoveryApi:Re.I,oauthRequestApi:Pe.s,configApi:Ne.U},factory:({discoveryApi:E,oauthRequestApi:n,configApi:o})=>Je.create({configApi:o,discoveryApi:E,oauthRequestApi:n,environment:o.getOptionalString("auth.environment")})}),(0,Ae.b)({api:O.zk,deps:{discoveryApi:Re.I,oauthRequestApi:Pe.s,configApi:Ne.U},factory:({discoveryApi:E,oauthRequestApi:n,configApi:o})=>Me.create({configApi:o,discoveryApi:E,oauthRequestApi:n,environment:o.getOptionalString("auth.environment")})}),(0,Ae.b)({api:O.Hd,deps:{discoveryApi:Re.I,oauthRequestApi:Pe.s,configApi:Ne.U},factory:({discoveryApi:E,oauthRequestApi:n,configApi:o})=>Ye.create({configApi:o,discoveryApi:E,oauthRequestApi:n,defaultScopes:["account"],environment:o.getOptionalString("auth.environment")})}),(0,Ae.b)({api:O.GR,deps:{discoveryApi:Re.I,oauthRequestApi:Pe.s,configApi:Ne.U},factory:({discoveryApi:E,oauthRequestApi:n,configApi:o})=>Et.create({configApi:o,discoveryApi:E,oauthRequestApi:n,defaultScopes:["REPO_READ"]})}),(0,Ae.b)({api:O.cz,deps:{discoveryApi:Re.I,oauthRequestApi:Pe.s,configApi:Ne.U},factory:({discoveryApi:E,oauthRequestApi:n,configApi:o})=>ze.create({configApi:o,discoveryApi:E,oauthRequestApi:n,environment:o.getOptionalString("auth.environment")})}),(0,Ae.b)({api:O.dM,deps:{discoveryApi:Re.I,oauthRequestApi:Pe.s,configApi:Ne.U},factory:({discoveryApi:E,oauthRequestApi:n,configApi:o})=>ce.create({configApi:o,discoveryApi:E,oauthRequestApi:n,environment:o.getOptionalString("auth.environment")})}),(0,Ae.b)({api:Ge.x,deps:{discovery:Re.I,identity:Ce.K,config:Ne.U},factory:({config:E,discovery:n,identity:o})=>ve.create({config:E,discovery:n,identity:o})})];var fe=e(14041),at=e(64947),gt=e(41544),Rt=e(12554),It=e(96872),bt=e(18690),X=e(73657);function S({children:E}){return(0,bt.Ri)()?fe.createElement(fe.Fragment,null,E):fe.createElement(bt.fS,null,E)}const $=()=>fe.createElement(gt.M,{status:"404",statusMessage:"PAGE NOT FOUND"}),re=({step:E,error:n})=>{let o="";return E==="load-config"?o=`The configuration failed to load, someone should have a look at this error: ${n.message}`:E==="load-chunk"&&(o=`Lazy loaded chunk failed to load, try to reload the page: ${n.message}`),fe.createElement(S,null,fe.createElement(gt.M,{statusMessage:o,stack:n.stack}))},ye=({error:E,resetError:n,plugin:o})=>fe.createElement(Rt.b,{title:`Error in ${o==null?void 0:o.getId()}`,defaultExpanded:!0,error:E},fe.createElement(at.A,{variant:"outlined",onClick:n},"Retry")),De={Progress:It.k,Router:X.Kd,NotFoundErrorPage:$,BootErrorPage:re,ErrorBoundaryFallback:ye};var Ze=e(14451),St=e(27799),Lt=e(94389),Nt=e(20947),Ut=e(20473),$t=e(45917),xt=e(39347),Tt=e(63309),Kt=e(4832),jt=e(85121),Vt=e(17400),qt=e(42226),xn=e(69550),wn=e(52755),$n=e(89350),en=e(8911),Qt=e(33602),fn=e(48108),on=e(77225),tn=e(55700),qn=e(71865);const ea={brokenImage:St.A,catalog:en.A,scaffolder:Nt.A,techdocs:Ut.A,search:$t.A,chat:xt.A,dashboard:Tt.A,docs:Kt.A,email:jt.A,github:qt.A,group:Qt.A,help:xn.A,"kind:api":Vt.A,"kind:component":$n.A,"kind:domain":Ze.A,"kind:group":Qt.A,"kind:location":wn.A,"kind:system":Lt.A,"kind:user":fn.A,"kind:resource":tn.A,"kind:template":qn.A,user:fn.A,warning:on.A};var ta=e(58733),Wn=e(55288),Nn=e(91360),Rn=e(50868),na=e(12285),aa=e(87271),oa=e(64636);oa.A.configure(E=>`v5-${E}`);const Kn=(0,Wn.A)({productionPrefix:"jss4-"});function ie(E){const{children:n,theme:o,noCssBaseline:f=!1}=E,C=o.getTheme("v4"),x=o.getTheme("v5");let ee;f||(ee=fe.createElement(ta.Ay,null));let ae=fe.createElement(fe.Fragment,null,ee,n);return C&&(ae=fe.createElement(Nn.Ay,{generateClassName:Kn},fe.createElement(Rn.A,{theme:C},ae))),x&&(ae=fe.createElement(na.A,{injectFirst:!0},fe.createElement(aa.A,{theme:x},ae))),ae}const Ee={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}};var je=e(98392),Le=e(17161);const xe={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},Fe={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function Ve(E){var de;const{colors:n,shape:o,options:f}=E,x=`linear-gradient(90deg, ${(n.length===1?[n[0],n[0]]:n).join(", ")})`,ee=`${o},  ${x}`,ae=(de=f==null?void 0:f.fontColor)!=null?de:"#FFFFFF";return{colors:n,shape:o,backgroundImage:ee,fontColor:ae}}const dt={home:Ve({colors:Fe.teal,shape:xe.wave}),documentation:Ve({colors:Fe.pinkSea,shape:xe.wave2}),tool:Ve({colors:Fe.purpleSky,shape:xe.round}),service:Ve({colors:Fe.marineBlue,shape:xe.wave}),website:Ve({colors:Fe.veryBlue,shape:xe.wave}),library:Ve({colors:Fe.rubyRed,shape:xe.wave}),other:Ve({colors:Fe.darkGrey,shape:xe.wave}),app:Ve({colors:Fe.toastyOrange,shape:xe.wave}),apis:Ve({colors:Fe.teal,shape:xe.wave2}),card:Ve({colors:Fe.greens,shape:xe.wave})},ot=16,pt='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',yt="home",Pt={htmlFontSize:ot,fontFamily:pt,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};function st(E){const{palette:n,htmlFontSize:o=ot,fontFamily:f=pt,defaultPageTheme:C=yt,pageTheme:x=dt,typography:ee}=E;if(!x[C])throw new Error(`${C} is not defined in pageTheme.`);return Pt.htmlFontSize=o,Pt.fontFamily=f,{palette:n,typography:ee!=null?ee:Pt,page:x[C],getPageTheme:({themeId:ae})=>{var de;return(de=x[ae])!=null?de:x[C]}}}var Bt=e(80012);const vt={MuiCssBaseline:{styleOverrides:E=>({html:{height:"100%",fontFamily:E.typography.fontFamily},body:{height:"100%",fontFamily:E.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43,"&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:E.palette.background.paper,width:"1em"},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:E.palette.textVerySubtle,border:`3px solid ${E.palette.background.paper}`},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:E.palette.mode==="dark"?(0,Bt.a)(E.palette.textVerySubtle,.2):(0,Bt.e$)(E.palette.textVerySubtle,.2)},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:E.palette.mode==="dark"?(0,Bt.a)(E.palette.textVerySubtle,.2):(0,Bt.e$)(E.palette.textVerySubtle,.2)}},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:E})=>({"&:nth-of-type(odd)":{backgroundColor:E.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:E})=>({"&:nth-of-type(odd)":{backgroundColor:E.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:E})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:E.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:E})=>({padding:E.spacing(1.5,2,1.5,2.5)}),head:({theme:E})=>({wordBreak:"break-word",overflow:"hidden",color:E.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:E})=>({color:E.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,Bt.e$)(E.palette.link,.3),background:(0,Bt.a)(E.palette.link,.95)},[E.breakpoints.up("md")]:{minWidth:120,fontSize:E.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:E})=>({color:E.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:E})=>({marginRight:E.spacing(1),marginBottom:E.spacing(1)}),label:({theme:E})=>({lineHeight:E.spacing(2.5),fontWeight:E.typography.fontWeightMedium,fontSize:E.spacing(1.75)}),labelSmall:({theme:E})=>({fontSize:E.spacing(1.5)}),deleteIcon:({theme:E})=>({width:E.spacing(3),height:E.spacing(3),margin:E.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:E})=>({width:E.spacing(2),height:E.spacing(2),margin:E.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}},Mt=E=>(...n)=>{const o=n.length===0?[1]:n,f=(C,x)=>typeof C=="string"?C:x*C;return o.map(C=>{const x=f(C,E);return typeof x=="number"?`${x}px`:x}).join(" ")};function Ft(E,n){if(!n||typeof n=="string")return;const o=typeof n=="function"?n(E):n;if(o)return{"@global":o}}function Dt(E,n){if(!(!n||typeof n=="string")){if(typeof n=="object"){const o={...E},f=E.spacing(1);return typeof f=="number"&&(o.spacing=Mt(f)),Object.fromEntries(Object.entries(n).map(([C,x])=>typeof x=="function"?[C,x({theme:o})]:[C,x]))}return n}}const zt=/^&.Mui-([\w-]+)$/;function kt(E){let n=E;if(!E||typeof E!="object")return n;for(const o of Object.keys(E)){const f=E[o];if(!(!f||typeof f!="object"))for(const C of Object.keys(f)){const x=C,ee=x.match(zt);if(ee){const[,ae]=ee,{[x]:de,...Oe}=f;de&&(n={...n,[o]:Oe,[ae]:de})}}}return n}function ra(E,n={}){const o={},f={};for(const C of Object.keys(n)){const x=n[C];x&&("styleOverrides"in x&&(C==="MuiCssBaseline"?o[C]=Ft(E,x.styleOverrides):o[C]=kt(Dt(E,x.styleOverrides))),"defaultProps"in x&&(f[C]=x.defaultProps))}return{overrides:o,props:f}}class Sn{constructor(n,o){mt(this,un,new Map);Ct(this,un,new Map),n&&he(this,un).set("v4",n),o&&he(this,un).set("v5",o)}getTheme(n){return he(this,un).get(n)}}un=new WeakMap;function Fn(E){const n=st(E),o={...vt,...E.components},f=(0,Le.A)({...n,components:o}),C=ra(f,o),x={...(0,je.A)(n),...C};return new Sn(x,f)}function va(E){const n=adaptV4Theme(E),o=createTheme$1(E);return new Sn(o,createTheme(n))}const Tn={light:Fn({palette:Ee.light}),dark:Fn({palette:Ee.dark})};var zn=e(75962),jn=e(87145);const sa=[{id:"light",title:"Light Theme",variant:"light",icon:fe.createElement(jn.A,null),Provider:({children:E})=>fe.createElement(ie,{theme:Tn.light,children:E})},{id:"dark",title:"Dark Theme",variant:"dark",icon:fe.createElement(zn.A,null),Provider:({children:E})=>fe.createElement(ie,{theme:Tn.dark,children:E})}];var rn=e(73466),Va=e(39067),ia=e.n(Va);class Ya{constructor(...n){ue(this,"holders");this.holders=n}get(n){for(const o of this.holders){const f=o.get(n);if(f)return f}}}var dn=e(97388);const Aa=(0,dn.tK)("api-context"),la=E=>{var x;const{apis:n,children:o}=E,f=(x=(0,fe.useContext)(Aa))==null?void 0:x.atVersion(1),C=f?new Ya(n,f):n;return fe.createElement(Aa.Provider,{value:(0,dn.Bl)({1:C}),children:o})};la.propTypes={apis:ia().shape({get:ia().func.isRequired}).isRequired,children:ia().node};class ca{constructor(n){ue(this,"apis",new Map);this.factories=n}static validateFactories(n,o){for(const f of o){const C=[f],x=new Set;for(;C.length;){const ee=C.shift(),ae=n.get(ee);if(ae)for(const de of Object.values(ae.deps)){if(de.id===f.id)throw new Error(`Circular dependency of api factory for ${f}`);x.has(de)||(x.add(de),C.push(de))}}}}get(n){return this.load(n)}load(n,o=[]){const f=this.apis.get(n.id);if(f)return f;const C=this.factories.get(n);if(!C)return;if(o.includes(C.api))throw new Error(`Circular dependency of api factory for ${C.api}`);const x=this.loadDeps(n,C.deps,[...o,C.api]),ee=C.factory(x);return this.apis.set(n.id,ee),ee}loadDeps(n,o,f){const C={};for(const x in o)if(o.hasOwnProperty(x)){const ee=o[x],ae=this.load(ee,f);if(!ae)throw new Error(`No API factory available for dependency ${ee} of dependent ${n}`);C[x]=ae}return C}}var Pa=(E=>(E[E.default=10]="default",E[E.app=50]="app",E[E.static=100]="static",E))(Pa||{});class Qa{constructor(){ue(this,"factories",new Map)}register(n,o){const f=Pa[n],C=this.factories.get(o.api.id);return C&&C.priority>=f?!1:(this.factories.set(o.api.id,{priority:f,factory:o}),!0)}get(n){const o=this.factories.get(n.id);if(o)return o.factory}getAllApis(){const n=new Set;for(const{factory:o}of this.factories.values())n.add(o.api);return n}}var da=e(68541),En=e(86702);const Dn="theme";class kn{constructor(n){ue(this,"activeThemeId");ue(this,"subject",new c(void 0));this.themes=n}static createWithStorage(n){var C;const o=new kn(n);if(!window.localStorage)return o;const f=(C=window.localStorage.getItem(Dn))!=null?C:void 0;return o.setActiveThemeId(f),o.activeThemeId$().subscribe(x=>{x?window.localStorage.setItem(Dn,x):window.localStorage.removeItem(Dn)}),window.addEventListener("storage",x=>{var ee;if(x.key===Dn){const ae=(ee=localStorage.getItem(Dn))!=null?ee:void 0;o.setActiveThemeId(ae)}}),o}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const Hn=null;function Jo(E,n){let o,f=!1;const C={};try{o=n!=null&&n.key?E.getConfig(n.key):E;for(const x of Hn){const ee=o.getOptionalNumber(x);ee!==void 0&&(C[x]=ee,f=!0)}}catch(x){throw new InputError(`Failed to read duration from config, ${x}`)}try{if(!f){const ee=Hn.map(ae=>`'${ae}'`).join(", ");throw new Error(`Needs one or more of ${ee}`)}const x=o.keys().filter(ee=>!Hn.includes(ee));if(x.length){const ee=x.length===1?"property":"properties",ae=x.map(Oe=>`'${Oe}'`).join(", "),de=Hn.map(Oe=>`'${Oe}'`).join(", ");throw new Error(`Unknown ${ee} ${ae}; expected one or more of ${de}`)}}catch(x){let ee="Failed to read duration from config";throw n!=null&&n.key&&(ee+=` at '${n.key}'`),new InputError(`${ee}, ${x}`)}return C}var Ja=Object.defineProperty,Xa=(E,n,o)=>n in E?Ja(E,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):E[n]=o,Ca=(E,n,o)=>(Xa(E,typeof n!="symbol"?n+"":n,o),o);const Za=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function Gn(E){return typeof E=="object"&&E!==null&&!Array.isArray(E)}function ua(E){return typeof E!="object"||E===null?E:Array.isArray(E)?E.map(ua):Object.fromEntries(Object.entries(E).map(([n,o])=>[n,ua(o)]))}function In(E,n){if(E===null)return;if(E===void 0)return n===void 0?void 0:In(n);if(typeof E!="object"||Array.isArray(E))return E;const o=Gn(n)?n:{},f={};for(const C of new Set([...Object.keys(E),...Object.keys(o)])){const x=In(E[C],o[C]);x!==void 0&&(f[C]=x)}return f}function ma(E){if(E===null)return"null";if(Array.isArray(E))return"array";const n=typeof E;return n==="number"&&isNaN(E)?"nan":n==="string"&&E===""?"empty-string":n}const Yt={type(E,n,o,f){return`Invalid type in config for key '${E}' in '${n}', got ${o}, wanted ${f}`},missing(E,n){return`Missing required config value at '${E}' in '${n}'`},convert(E,n,o){return`Unable to convert config value for key '${E}' in '${n}' to a ${o}`}};class yn{constructor(n,o="mock-config",f,C=""){this.data=n,this.context=o,this.fallback=f,this.prefix=C,Ca(this,"filteredKeys"),Ca(this,"notifiedFilteredKeys",new Set)}static fromConfigs(n){return n.length===0?new yn(void 0):n.reduce((o,{data:f,context:C,filteredKeys:x,deprecatedKeys:ee})=>{const ae=new yn(f,C,o);if(ae.filteredKeys=x,ee)for(const{key:de,description:Oe}of ee)console.warn(`The configuration key '${de}' of ${C} is deprecated and may be removed soon. ${Oe||""}`);return ae},void 0)}has(n){var o,f;const C=this.readValue(n);return C===null?!1:C!==void 0?!0:(f=(o=this.fallback)==null?void 0:o.has(n))!=null?f:!1}keys(){var n,o;const f=this.data?Object.keys(this.data):[],C=(o=(n=this.fallback)==null?void 0:n.keys())!=null?o:[];return[...new Set([...f,...C])].filter(x=>{var ee;return((ee=this.data)==null?void 0:ee[x])!==null})}get(n){const o=this.getOptional(n);if(o===void 0)throw new Error(Yt.missing(this.fullKey(n!=null?n:""),this.context));return o}getOptional(n){var o,f;const C=ua(this.readValue(n)),x=(o=this.fallback)==null?void 0:o.getOptional(n);if(C!==null)return C===void 0?In(x):x===void 0?In(C):In(C,x)}getConfig(n){const o=this.getOptionalConfig(n);if(o===void 0)throw new Error(Yt.missing(this.fullKey(n),this.context));return o}getOptionalConfig(n){var o;const f=this.readValue(n),C=(o=this.fallback)==null?void 0:o.getOptionalConfig(n);if(Gn(f))return this.copy(f,n,C);if(f!==null){if(f!==void 0)throw new TypeError(Yt.type(this.fullKey(n),this.context,ma(f),"object"));return C}}getConfigArray(n){const o=this.getOptionalConfigArray(n);if(o===void 0)throw new Error(Yt.missing(this.fullKey(n),this.context));return o}getOptionalConfigArray(n){var o;const f=this.readConfigValue(n,C=>{if(!Array.isArray(C))return{expected:"object-array"};for(const[x,ee]of C.entries())if(!Gn(ee))return{expected:"object-array",value:ee,key:`${n}[${x}]`};return!0});if(f)return f.map((C,x)=>this.copy(C,`${n}[${x}]`))}getNumber(n){const o=this.getOptionalNumber(n);if(o===void 0)throw new Error(Yt.missing(this.fullKey(n),this.context));return o}getOptionalNumber(n){const o=this.readConfigValue(n,C=>typeof C=="number"||typeof C=="string"||{expected:"number"});if(typeof o=="number"||o===void 0)return o;const f=Number(o);if(!Number.isFinite(f))throw new Error(Yt.convert(this.fullKey(n),this.context,"number"));return f}getBoolean(n){const o=this.getOptionalBoolean(n);if(o===void 0)throw new Error(Yt.missing(this.fullKey(n),this.context));return o}getOptionalBoolean(n){const o=this.readConfigValue(n,C=>typeof C=="boolean"||typeof C=="number"||typeof C=="string"||{expected:"boolean"});if(typeof o=="boolean"||o===void 0)return o;const f=String(o).trim();if(/^(?:y|yes|true|1|on)$/i.test(f))return!0;if(/^(?:n|no|false|0|off)$/i.test(f))return!1;throw new Error(Yt.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const o=this.getOptionalString(n);if(o===void 0)throw new Error(Yt.missing(this.fullKey(n),this.context));return o}getOptionalString(n){return this.readConfigValue(n,o=>typeof o=="string"&&o!==""||{expected:"string"})}getStringArray(n){const o=this.getOptionalStringArray(n);if(o===void 0)throw new Error(Yt.missing(this.fullKey(n),this.context));return o}getOptionalStringArray(n){return this.readConfigValue(n,o=>{if(!Array.isArray(o))return{expected:"string-array"};for(const[f,C]of o.entries())if(typeof C!="string"||C==="")return{expected:"string-array",value:C,key:`${n}[${f}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,o,f){const C=new yn(n,this.context,f,this.fullKey(o));return C.filteredKeys=this.filteredKeys,C}readConfigValue(n,o){var f,C;const x=this.readValue(n);if(x===void 0)return(C=this.fallback)==null?void 0:C.readConfigValue(n,o);if(x===null)return;const ee=o(x);if(ee!==!0){const{key:ae=n,value:de=x,expected:Oe}=ee;throw new TypeError(Yt.type(this.fullKey(ae),this.context,ma(de),Oe))}return x}readValue(n){const o=n?n.split("."):[];for(const C of o)if(!Za.test(C))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let f=this.data;for(const[C,x]of o.entries())if(Gn(f))f=f[x];else if(f!=null){const ee=this.fullKey(o.slice(0,C).join("."));throw new TypeError(Yt.type(ee,this.context,ma(f),"object"))}return f}}function Oa(E){if(E.length<3)throw new Error(`The '${E}' feature flag must have a minimum length of three characters.`);if(E.length>150)throw new Error(`The '${E}' feature flag must not exceed 150 characters.`);if(!E.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${E}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class _a{constructor(){ue(this,"registeredFeatureFlags",[]);ue(this,"flags")}registerFlag(n){Oa(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===En.S.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[f,C]of Object.entries(n.states))this.flags.set(f,C);const o=Array.from(this.flags.entries()).filter(([,f])=>f===En.S.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(o)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const o=JSON.parse(n);if(typeof o!="object"||o===null||Array.isArray(o))return new Map;const f=Object.entries(o).filter(([C,x])=>(Oa(C),x===En.S.Active));return new Map(f)}catch{return new Map}}}var Ra=e(90608),qa=e(87350);function eo(E){const n={};for(const f in E.collectors)E.collectors.hasOwnProperty(f)&&(n[f]=E.collectors[f]());const o=[{node:fe.Children.toArray(E.root),parent:void 0,contexts:{}}];for(;o.length!==0;){const{node:f,parent:C,contexts:x}=o.shift();fe.Children.forEach(f,ee=>{if(!(0,fe.isValidElement)(ee))return;const ae={};for(const de in n)if(n.hasOwnProperty(de)){const Oe=n[de];ae[de]=Oe.visit(Oe.accumulator,ee,C,x[de])}for(const de of E.discoverers){const Oe=de(ee);Oe&&o.push({node:Oe,parent:ee,contexts:ae})}})}return Object.fromEntries(Object.entries(n).map(([f,C])=>[f,C.accumulator]))}function Vn(E,n){return()=>({accumulator:E(),visit:n})}function to(E){var n;return(n=E.props)==null?void 0:n.children}function no(E){var n,o,f;if((n=E.props)!=null&&n.path&&((o=E.props)!=null&&o.element))return(f=E.props)==null?void 0:f.element}var Ht=e(85408);const ao=Vn(()=>new Set,(E,n)=>{const o=(0,Ht.E)(n,"core.plugin");o&&E.add(o)});var Sa=e(18139);const Ta=E=>{const{children:n}=E,o=(0,Sa.gf)(En.B),f="with"in E?o.isActive(E.with):!o.isActive(E.without);return fe.createElement(fe.Fragment,null,f?n:null)};(0,Ht.h)(Ta,"core.featureFlagged",!0);const Yn={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Qn(E){var o,f;const n=E;return n!=null&&n.type?(f=(o=n.type.displayName)!=null?o:n.type.name)!=null?f:String(n.type):String(n)}const Da=E=>{const n=new Set;return E&&n.add(E),n};function Ia(E,n=new Array){return fe.Children.forEach(E,o=>{if(!(0,fe.isValidElement)(o))return;const f=(0,Ht.E)(o,"core.mountPoint");if(f){const C=(0,Ht.E)(o,"core.plugin");n.push({routeRef:f,plugin:C})}Ia(o.props.children,n)}),n}const oo=Vn(()=>({paths:new Map,parents:new Map,objects:new Array}),(E,n,o,f)=>{var ae,de,Oe,ke,qe,$e,nt;if(f!=null&&f.isElementAncestor)return f;if((o==null?void 0:o.props.element)===n)return{...f,isElementAncestor:!0};const C=(ae=n.props)==null?void 0:ae.path,x=(0,Ht.E)(n,"core.mountPoint");if(x&&C)throw new Error(`Path property may not be set directly on a routable extension "${Qn(n)}"`);const ee=(Oe=(de=f==null?void 0:f.obj)==null?void 0:de.children)!=null?Oe:E.objects;if(C!==void 0){if(typeof C!="string")throw new Error(`Element path must be a string at "${Qn(n)}"`);const rt=C.startsWith("/")?C.slice(1):C,ft=n.props.element;if((0,Ht.E)(n,"core.gatherMountPoints")){if(ft)throw new Error(`Mount point gatherers may not have an element prop "${Qn(n)}"`);const Wt={path:rt,element:"gathered",routeRefs:new Set,caseSensitive:!!((ke=n.props)!=null&&ke.caseSensitive),children:[Yn],plugins:new Set};return ee.push(Wt),{obj:Wt,gatherPath:rt,routeRef:f==null?void 0:f.routeRef,gatherRouteRef:f==null?void 0:f.routeRef}}if(ft){const[Wt,...Zt]=Ia(ft);if(Zt.length>0)throw new Error(`Route element with path "${C}" may not contain multiple routable extensions`);if(!Wt)return f;const{routeRef:wt,plugin:_t}=Wt,Fa={path:rt,element:"mounted",routeRefs:new Set([wt]),caseSensitive:!!((qe=n.props)!=null&&qe.caseSensitive),children:[Yn],plugins:Da(_t)};return ee.push(Fa),E.paths.set(wt,rt),E.parents.set(wt,f==null?void 0:f.routeRef),{obj:Fa,routeRef:wt!=null?wt:f==null?void 0:f.routeRef,gatherPath:rt,gatherRouteRef:f==null?void 0:f.gatherRouteRef}}}if(x){if((f==null?void 0:f.gatherPath)===void 0)throw new Error(`Routable extension "${Qn(n)}" with mount point "${x}" must be assigned a path`);($e=f==null?void 0:f.obj)==null||$e.routeRefs.add(x);const rt=(0,Ht.E)(n,"core.plugin");return rt&&((nt=f==null?void 0:f.obj)==null||nt.plugins.add(rt)),E.paths.set(x,f.gatherPath),E.parents.set(x,f==null?void 0:f.gatherRouteRef),{...f,routeRef:x}}return f}),ro=Vn(()=>({paths:new Map,parents:new Map,objects:new Array}),(E,n,o,f)=>{var rt,ft,Wt,Zt,wt;if((o==null?void 0:o.props.element)===n)return f;let C=f==null?void 0:f.obj,x=f==null?void 0:f.routeRef,ee=f==null?void 0:f.sticky;const ae=(rt=n.props)==null?void 0:rt.path,de=(ft=C==null?void 0:C.children)!=null?ft:E.objects,Oe=!!((Wt=n.props)!=null&&Wt.caseSensitive);let ke=f==null?void 0:f.path;if((0,Ht.E)(n,"core.gatherMountPoints")){if(!ae)throw new Error("Mount point gatherer must have a path");ke=ae}const qe=(Zt=n.props)==null?void 0:Zt.element;let $e=(0,Ht.E)(n,"core.mountPoint");if(!$e&&(0,fe.isValidElement)(qe)&&($e=(0,Ht.E)(qe,"core.mountPoint")),$e){let _t=ae;if(ke&&(_t?ke=void 0:_t=ke),!_t)throw new Error("Mounted routable extension must have a path");E.paths.set($e,_t),x&&ee?(E.parents.set($e,x),ae&&(x=$e,ee=!1)):(E.parents.set($e,x),x=$e),ae?(C={caseSensitive:Oe,path:ae,element:"mounted",routeRefs:new Set([$e]),children:[Yn],plugins:Da((0,Ht.E)(n.props.element,"core.plugin"))},de.push(C)):C==null||C.routeRefs.add($e)}if((0,Ht.E)(n,"core.gatherMountPoints")&&(ee=!0),(0,Ht.E)(n,"core.gatherMountPoints")){if(!ae)throw new Error("Mount point gatherer must have a path");$e||(C={caseSensitive:Oe,path:ae,element:"gathered",routeRefs:new Set,children:[Yn],plugins:((wt=f==null?void 0:f.obj)==null?void 0:wt.plugins)||new Set},de.push(C))}return{obj:C,path:ke,routeRef:x,sticky:ee}}),so=Vn(()=>new Set,(E,n)=>{if(n.type===Ta){const o=n.props;E.add("with"in o?o.with:o.without)}});var Ma=e(21613);const Mn=(0,dn.Q6)("route-ref-type",()=>Symbol("route-ref-type"));function ba(E){return E[Mn]==="absolute"}function La(E){return E[Mn]==="sub"}function io(E){return E[Mn]==="external"}function Jn(...E){const n=E.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}var lo=e(46155),co=e.n(lo);function uo(E,n,o){let f,C="";if(ba(E))f=E;else if(La(E))f=E.parent,C=E.path;else if(io(E)){const ae=o.get(E);if(!ae)return[void 0,""];if(ba(ae))f=ae;else if(La(ae))f=ae.parent,C=ae.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${ae}`)}else throw E[Mn]?new Error(`Unknown or invalid route ref type, ${E[Mn]}`):new Error(`Unknown object passed to useRouteRef, got ${E}`);if(!f)return[void 0,""];const x=n.get(f);if(x===void 0)return[void 0,""];const ee=Jn(x,C);return[f,ee]}function mo(E,n,o,f,C){var ke;const x=(ke=(0,Ma.ue)(C,n))!=null?ke:[],ee=Array();let ae=-1;for(let qe=E;qe&&(ae=x.findIndex($e=>$e.route.routeRefs.has(qe)),ae===-1);qe=f.get(qe))ee.unshift(qe);ee.length===0&&(ae-=1);const de=ae===-1?"":x[ae].pathname,Oe=ee.slice(0,-1).map(qe=>{const $e=o.get(qe);if($e===void 0)throw new Error(`No path for ${qe}`);if($e.includes(":"))throw new Error(`Cannot route to ${E} with parent ${qe} as it has parameters`);return $e});return`${Jn(de,...Oe)}/`}class go{constructor(n,o,f,C,x){this.routePaths=n,this.routeParents=o,this.routeObjects=f,this.routeBindings=C,this.appBasePath=x}resolve(n,o){const[f,C]=uo(n,this.routePaths,this.routeBindings);if(!f)return;let x;typeof o=="string"?x=this.trimPath(o):o.pathname?x={...o,pathname:this.trimPath(o.pathname)}:x=o;const ee=this.appBasePath+mo(f,x,this.routePaths,this.routeParents,this.routeObjects);return(...[de])=>{const Oe=de&&co()(de,ke=>typeof ke=="string"?ke.replaceAll(/[&?#;\/]/g,qe=>encodeURIComponent(qe)):ke);return Jn(ee,(0,Ma.tW)(C,Oe))}}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const po=(0,dn.tK)("routing-context"),ho=({routePaths:E,routeParents:n,routeObjects:o,routeBindings:f,basePath:C="",children:x})=>{const ee=new go(E,n,o,f,C),ae=(0,dn.Bl)({1:ee});return fe.createElement(po.Provider,{value:ae},x)};function fo(E,n){const o=new Set(n.values());o.delete(void 0);for(const f of n.keys()){if(o.has(f))continue;let C=f,x="";for(;C;){const ae=E.get(C);if(ae===void 0)throw new Error(`No path for ${C}`);x=Jn(ae,x),C=n.get(C)}const ee=x.match(/:(\w+)/g);if(ee){for(let ae=0;ae<ee.length;ae++)for(let de=ae+1;de<ee.length;de++)if(ee[de]===ee[ae])throw new Error(`Parameter ${ee[de]} is duplicated in path ${x}`)}}}function Eo(E,n){for(const o of n)if(o.externalRoutes){for(const[f,C]of Object.entries(o.externalRoutes))if(!C.optional&&!E.has(C))throw new Error(`External route '${f}' of the '${o.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const yo=(0,dn.tK)("app-context"),vo=({appContext:E,children:n})=>{const o=(0,dn.Bl)({1:E});return fe.createElement(yo.Provider,{value:o,children:n})},Ba="app",Ao=`${Ba}-auth-cookie-expires-at`,Po=5*6e4,Ua=5e3,Co=2,Oo=5*6e4;function Ro({discoveryApi:E,fetchApi:n,errorApi:o}){let f=!1,C,x=!0,ee=Ua;const ae="BroadcastChannel"in window?new BroadcastChannel(Ao):void 0,de=$e=>{const nt=(1+3*Math.random())*6e4;return Math.max($e-Date.now(),Po)-nt},Oe=async()=>{try{const nt=`${await E.getBaseUrl(Ba)}/.backstage/auth/v1/cookie`,rt=await n.fetch(nt,{credentials:"include"});if(!rt.ok)throw new Error(`Request failed with status ${rt.status} ${rt.statusText}, see request towards ${nt} for more details`);const ft=await rt.json();if(!ft.expiresAt)throw new Error("No expiration date in response");const Wt=Date.parse(ft.expiresAt);if(Number.isNaN(Wt))throw new Error("Invalid expiration date in response");x=!0,ae==null||ae.postMessage({action:"COOKIE_REFRESH_SUCCESS",payload:{expiresAt:new Date(Wt).toISOString()}}),qe(de(Wt))}catch($e){x?(x=!1,ee=Ua):(ee=Math.min(Oo,ee*Co),console.error("Session cookie refresh failed",$e),o.post(new Error("Session refresh failed, see developer console for details"))),qe(ee)}},ke=$e=>{const{data:nt}=$e;if(!(nt===null||typeof nt!="object")&&"action"in nt&&nt.action==="COOKIE_REFRESH_SUCCESS"){const rt=Date.parse(nt.payload.expiresAt);if(Number.isNaN(rt)){console.warn("Received invalid expiration from session refresh channel");return}qe(de(rt))}};function qe($e){f||(C&&clearTimeout(C),C=setTimeout(Oe,$e))}return ae==null||ae.addEventListener("message",ke),Oe(),()=>{f=!0,C&&clearTimeout(C),ae==null||ae.removeEventListener("message",ke),ae==null||ae.close()}}function xa(E){return new Error(`Tried to access IdentityApi ${E} before app was loaded`)}function ga(E){console.warn(`WARNING: Call to ${E} is deprecated and will break in the future`)}class So{constructor(){ue(this,"target");ue(this,"waitForTarget");ue(this,"resolveTarget",()=>{});ue(this,"signOutTargetUrl","/");mt(this,An);this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,o){this.target=n,this.signOutTargetUrl=o.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw xa("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return ga("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw xa("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return ga("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(o=>o.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return ga("getIdToken"),n.getIdToken()})}async signOut(){var n;await this.waitForTarget.then(o=>o.signOut()),await((n=he(this,An))==null?void 0:n.call(this)),window.location.href=this.signOutTargetUrl}enableCookieAuth(n){if(he(this,An))return;const o=Ro(n);Ct(this,An,async()=>{o();const f=await n.discoveryApi.getBaseUrl("app");try{await n.fetchApi.fetch(`${f}/.backstage/auth/v1/cookie`,{method:"DELETE"})}catch{}})}}An=new WeakMap;var To=e(11746);function Do(E,n,o){if(E!==void 0){const C=o.find(x=>x.id===E);if(C)return C}if(n){const C=o.find(x=>x.variant==="dark");if(C)return C}const f=o.find(C=>C.variant==="light");return f||o[0]}const Io=()=>{const E=(0,fe.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,o]=(0,fe.useState)(E.matches);return(0,fe.useEffect)(()=>{const f=C=>{o(C.matches)};return E.addListener(f),()=>{E.removeListener(f)}},[E]),n};function wa({children:E}){const n=(0,Sa.gf)(da.Q),o=(0,To.A)(n.activeThemeId$(),n.getActiveThemeId()),f=window.matchMedia?Io():!1,C=Do(o,f,n.getInstalledThemes());if(!C)throw new Error("App has no themes");return fe.createElement(C.Provider,{children:E})}const Mo=async()=>bo();function bo(E="__APP_INJECTED_RUNTIME_CONFIG__"){const n=[{context:"app-config.yaml",data:{app:{title:"Alustan Demo App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},techdocs:{builder:"local"},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!n)throw new Error("No static configuration provided");if(!Array.isArray(n))throw new Error("Static configuration has invalid format");const o=n.slice();if(E!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const C=JSON.parse(E);Array.isArray(C)?o.push(...C):o.push({data:C,context:"env"})}catch(C){throw new Error(`Failed to load runtime configuration, ${C}`)}const f=window.__APP_CONFIG__;return f&&o.push({context:"window",data:f}),o}class Lo{constructor(){ue(this,"apis",[])}add(n,o){return this.apis.push([n.id,o]),o}build(){return new vn(new Map(this.apis))}}class vn{constructor(n){this.apis=n}static builder(){return new Lo}static from(n){return new vn(new Map(n.map(([o,f])=>[o.id,f])))}static with(n,o){return new vn(new Map([[n.id,o]]))}with(n,o){return new vn(new Map([...this.apis,[n.id,o]]))}get(n){return this.apis.get(n.id)}}function Bo(E){var f,C;const n=new Map,o=new Map;for(const x of E){for(const[ee,ae]of Object.entries((f=x.routes)!=null?f:{})){const de=`${x.getId()}.${ee}`;if(n.has(de))throw new Error(`Unexpected duplicate route '${de}'`);n.set(de,ae)}for(const[ee,ae]of Object.entries((C=x.externalRoutes)!=null?C:{})){const de=`${x.getId()}.${ee}`;if(o.has(de))throw new Error(`Unexpected duplicate external route '${de}'`);o.set(de,ae)}}return{routes:n,externalRoutes:o}}function Uo(E,n,o){var ae;const f=Bo(o),C=new Map;E&&E({bind:(Oe,ke)=>{for(const[qe,$e]of Object.entries(ke)){const nt=Oe[qe];if(!nt)throw new Error(`Key ${qe} is not an existing external route`);if(!$e&&!nt.optional)throw new Error(`External route ${qe} is required but was undefined`);$e&&C.set(nt,$e)}}});const x=(ae=n.getOptionalConfig("app.routes.bindings"))==null?void 0:ae.get(),ee=new Set;if(x)for(const[de,Oe]of Object.entries(x)){if(!xo(Oe))throw new Error(`Invalid config at app.routes.bindings['${de}'], value must be a non-empty string or false`);const ke=f.externalRoutes.get(de);if(!ke)throw new Error(`Invalid config at app.routes.bindings, '${de}' is not a valid external route`);if(Oe===!1)ee.add(ke),C.delete(ke);else if(!C.has(ke)){const qe=f.routes.get(Oe);if(!qe)throw new Error(`Invalid config at app.routes.bindings['${de}'], '${Oe}' is not a valid route`);C.set(ke,qe)}}for(const de of f.externalRoutes.values())if(!C.has(de)&&!ee.has(de)){const Oe="getDefaultTarget"in de?de.getDefaultTarget():void 0;if(Oe){const ke=f.routes.get(Oe);ke&&C.set(de,ke)}}return C}function xo(E){return!!(E===!1||typeof E=="string"&&E)}var wo=e(51750),$o=e(45681),$a=e(55362);const bn="language",nn="en",Xn=class Xn{constructor(n,o){mt(this,mn);mt(this,ln);mt(this,Pn);Ct(this,mn,n),Ct(this,ln,o),Ct(this,Pn,new c({language:he(this,ln)}))}static create(n){var C,x;const o=(C=n==null?void 0:n.availableLanguages)!=null?C:[nn];if(o.length!==new Set(o).size)throw new Error(`Supported languages may not contain duplicates, got '${o.join("', '")}'`);if(!o.includes(nn))throw new Error(`Supported languages must include '${nn}'`);const f=(x=n==null?void 0:n.defaultLanguage)!=null?x:nn;if(!o.includes(f))throw new Error(`Initial language must be one of the supported languages, got '${f}'`);return new Xn(o,f)}static createWithStorage(n){const o=Xn.create(n);if(!window.localStorage)return o;const f=window.localStorage.getItem(bn),{languages:C}=o.getAvailableLanguages();return f&&C.includes(f)&&o.setLanguage(f),o.language$().subscribe(({language:x})=>{x!==window.localStorage.getItem(bn)&&window.localStorage.setItem(bn,x)}),window.addEventListener("storage",x=>{var ee;if(x.key===bn){const ae=(ee=localStorage.getItem(bn))!=null?ee:void 0;ae&&o.setLanguage(ae)}}),o}getAvailableLanguages(){return{languages:he(this,mn).slice()}}setLanguage(n){const o=n!=null?n:nn;if(o!==he(this,ln)){if(o&&!he(this,mn).includes(o))throw new Error(`Failed to change language to '${o}', available languages are '${he(this,mn).join("', '")}'`);Ct(this,ln,o),he(this,Pn).next({language:o})}}getLanguage(){return{language:he(this,ln)}}language$(){return he(this,Pn)}};mn=new WeakMap,ln=new WeakMap,Pn=new WeakMap;let pa=Xn;var Wo=e(47304);function No(E){const n=E;if(n.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation resource, bad version '${n.version}'`);return n}function Wa(E){const n=E;if(n.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation ref, bad version '${n.version}'`);return n}function Na(E){return Object.fromEntries(Object.entries(E).filter(n=>n[1]!==null))}class Ko{constructor(n){mt(this,Cn);mt(this,gn,new Set);mt(this,Ln,new Map);mt(this,pn,new Map);this.onLoad=n}addTranslationResource(n){const o=No(n);for(const f of o.resources){const C=Gt(this,Cn,Zn).call(this,f.language,o.id);he(this,pn).has(C)||he(this,pn).set(C,f.loader)}}needsLoading(n,o){const f=Gt(this,Cn,Zn).call(this,n,o);return he(this,pn).get(f)?!he(this,gn).has(f):!1}async load(n,o){const f=Gt(this,Cn,Zn).call(this,n,o),C=he(this,pn).get(f);if(!C||he(this,gn).has(f))return;const x=he(this,Ln).get(f);if(x){await x;return}const ee=C().then(ae=>{this.onLoad({language:n,namespace:o,messages:ae.messages}),he(this,gn).add(f)},ae=>{throw he(this,gn).add(f),ae});he(this,Ln).set(f,ee),await ee}}gn=new WeakMap,Ln=new WeakMap,pn=new WeakMap,Cn=new WeakSet,Zn=function(n,o){return`${n}/${o}`};const fa=class fa{constructor(n,o,f){mt(this,Xt);mt(this,hn);mt(this,cn);mt(this,an);mt(this,Bn,new Set);mt(this,On,new Set);Ct(this,hn,n),Ct(this,cn,o),Ct(this,an,f)}static create(n){const{languages:o}=n.languageApi.getAvailableLanguages(),f=(0,Wo.Q_)({fallbackLng:nn,supportedLngs:o,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(f.init(),!f.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:C}=n.languageApi.getLanguage();C!==nn&&f.changeLanguage(C);const x=new Ko(de=>{f.addResourceBundle(de.language,de.namespace,Na(de.messages),!1,!0)}),ee=(n==null?void 0:n.resources)||[];for(let de=ee.length-1;de>=0;de--){const Oe=ee[de];Oe.$$type==="@backstage/TranslationResource"?x.addTranslationResource(Oe):Oe.$$type==="@backstage/TranslationMessages"&&f.addResourceBundle(nn,Oe.id,Na(Oe.messages),!0,!1)}const ae=new fa(f,x,n.languageApi.getLanguage().language);return n.languageApi.language$().subscribe(({language:de})=>{var Oe;Gt(Oe=ae,Xt,ja).call(Oe,de)}),ae}getTranslation(n){const o=Wa(n);return Gt(this,Xt,ya).call(this,o),Gt(this,Xt,_n).call(this,o)}translation$(n){const o=Wa(n);return Gt(this,Xt,ya).call(this,o),new(a())(f=>{let C={};const x=()=>{C={};const ae=C;he(this,cn).load(he(this,an),o.id).then(()=>{if(ae===C){const de=Gt(this,Xt,_n).call(this,o);de.ready&&f.next(de)}},de=>{ae===C&&f.error(Array.isArray(de)?de[0]:de)})},ee=()=>{const ae=Gt(this,Xt,_n).call(this,o);ae.ready?f.next(ae):x()};return he(this,cn).needsLoading(he(this,an),o.id)&&x(),he(this,On).add(ee),()=>{he(this,On).delete(ee)}})}};hn=new WeakMap,cn=new WeakMap,an=new WeakMap,Bn=new WeakMap,On=new WeakMap,Xt=new WeakSet,ja=function(n){he(this,an)!==n&&(Ct(this,an,n),he(this,hn).changeLanguage(n),he(this,On).forEach(o=>o()))},_n=function(n){return he(this,cn).needsLoading(he(this,an),n.id)?{ready:!1}:{ready:!0,t:he(this,hn).getFixedT(null,n.id)}},ya=function(n){if(he(this,Bn).has(n.id))return;he(this,Bn).add(n.id);const o=n.getDefaultMessages();he(this,hn).addResourceBundle(nn,n.id,o,!0,!1);const f=n.getDefaultResource();f&&he(this,cn).addTranslationResource(f)};let ha=fa;function Ka(E){const n=new URL(E);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function Fo(E){const n=yn.fromConfigs(E),o=n.getOptionalString("app.baseUrl"),f=n.getOptionalString("backend.baseUrl");let C=E,x,ee;if(o&&f){const ae=new URL(o).origin,de=new URL(f).origin;if(ae===de){const Oe=Ka(f);f!==Oe&&(x=Oe)}}if(o){const ae=Ka(o);o!==ae&&(ee=ae)}return(ee||x)&&(C=C.concat({data:{app:ee&&{baseUrl:ee},backend:x&&{baseUrl:x}},context:"relative-resolver"})),C}function zo(){var o;const E=document.querySelector('meta[name="backstage-app-mode"]');return((o=E==null?void 0:E.getAttribute("content"))!=null?o:"public")==="protected"}function jo(E,n,o){var de;const f=!!E,C=(0,rn.A)(E||(()=>Promise.resolve([])));let x;if(f&&C.loading){const{Progress:Oe}=n;x=fe.createElement(Oe,null)}else if(C.error){const{BootErrorPage:Oe}=n;x=fe.createElement(Oe,{step:"load-config",error:C.error})}const{ThemeProvider:ee=wa}=n;return x?{node:fe.createElement(la,{apis:vn.with(da.Q,o)},fe.createElement(ee,null,x))}:{api:yn.fromConfigs((de=C.value)!=null&&de.length?Fo(C.value):[])}}class ko{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class Ho{constructor(n){ue(this,"apiHolder");ue(this,"configApi");ue(this,"apis");ue(this,"icons");ue(this,"plugins");ue(this,"featureFlags");ue(this,"components");ue(this,"themes");ue(this,"configLoader");ue(this,"defaultApis");ue(this,"bindRoutes");ue(this,"appLanguageApi");ue(this,"translationResources");ue(this,"appIdentityProxy",new So);ue(this,"apiFactoryRegistry");mt(this,Un,!1);var o,f,C,x,ee,ae,de,Oe,ke;this.apis=(o=n.apis)!=null?o:[],this.icons=n.icons,this.plugins=new Set((f=n.plugins)!=null?f:[]),this.featureFlags=(C=n.featureFlags)!=null?C:[],this.components=n.components,this.themes=n.themes,this.configLoader=(x=n.configLoader)!=null?x:Mo,this.defaultApis=(ee=n.defaultApis)!=null?ee:[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new Qa,this.appLanguageApi=pa.createWithStorage({defaultLanguage:(ae=n.__experimentalTranslations)==null?void 0:ae.defaultLanguage,availableLanguages:(de=n.__experimentalTranslations)==null?void 0:de.availableLanguages}),this.translationResources=(ke=(Oe=n.__experimentalTranslations)==null?void 0:Oe.resources)!=null?ke:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const o=this.getProvider();return()=>fe.createElement(o,null,n)}getProvider(){if(he(this,Un))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");Ct(this,Un,!0);const n=new ko(this);let o,f;return({children:x})=>{const ee=(0,fe.useRef)(!0),ae=(0,fe.useMemo)(()=>kn.createWithStorage(this.themes),[]),{routing:de,featureFlags:Oe}=(0,fe.useMemo)(()=>{const ft=(0,wo.h)();ft&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const Wt=eo({root:x,discoverers:[to,no],collectors:{routing:ft?ro:oo,collectedPlugins:ao,featureFlags:so}});return Wt.collectedPlugins.forEach(Zt=>this.plugins.add(Zt)),this.verifyPlugins(this.plugins),this.getApiHolder(),Wt},[x]),ke=jo(this.configLoader,this.components,ae),qe="api"in ke;if(qe){const{api:ft}=ke;this.configApi=ft}if("node"in ke)return ke.node;if(f)throw f;if(!o)try{o=Uo(this.bindRoutes,ke.api,this.plugins),fo(de.paths,de.parents),Eo(o,this.plugins)}catch(ft){throw f=ft,ft}if(qe&&ee.current){ee.current=!1;const ft=this.getApiHolder().get(En.B);if(ft){for(const wt of this.featureFlags)ft.registerFlag({...wt,pluginId:""});for(const wt of this.plugins.values())if("getFeatureFlags"in wt)for(const _t of wt.getFeatureFlags())ft.registerFlag({name:_t.name,pluginId:wt.getId()});else for(const _t of wt.output())_t.type==="feature-flag"&&ft.registerFlag({name:_t.name,pluginId:wt.getId()});const Wt=ft.getRegisteredFlags(),Zt=new Set(Wt.map(wt=>wt.name));for(const wt of Oe)Zt.has(wt)||ft.registerFlag({name:wt,pluginId:""})}}const{ThemeProvider:$e=wa,Progress:nt}=this.components,rt=this.getApiHolder();if(zo()){const ft=rt.get(ct.m),Wt=rt.get(it.a),Zt=rt.get(Re.I);if(!ft||!Wt||!Zt)throw new Error("App is running in protected mode but missing required APIs");this.appIdentityProxy.enableCookieAuth({errorApi:ft,fetchApi:Wt,discoveryApi:Zt})}return fe.createElement(la,{apis:rt},fe.createElement(vo,{appContext:n},fe.createElement($e,null,fe.createElement(ho,{routePaths:de.paths,routeParents:de.parents,routeObjects:de.objects,routeBindings:o,basePath:(0,$a.D)(ke.api)},fe.createElement($o.W.Provider,{value:{routeObjects:de.objects,appIdentityProxy:this.appIdentityProxy}},fe.createElement(fe.Suspense,{fallback:fe.createElement(nt,null)},x))))))}}getRouter(){return $a.L}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const o of n.getApis())this.apiFactoryRegistry.get(o.api)||this.apiFactoryRegistry.register("default",o);return ca.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:da.Q,deps:{},factory:()=>kn.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:Ne.U,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:Ce.K,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:Ra.p,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:qa.J,deps:{languageApi:Ra.p},factory:({languageApi:n})=>ha.create({languageApi:n,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:En.B,deps:{},factory:()=>new _a});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const o of n.getApis())if(!this.apiFactoryRegistry.register("default",o))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${o.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return ca.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new ca(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const o=new Set;for(const f of n){const C=f.getId();if(o.has(C))throw new Error(`Duplicate plugin found '${C}'`);o.add(C)}}}Un=new WeakMap;function Go(E){return new Ho(E)}function Vo(E){var n,o,f,C;return Go({...E,apis:(n=E==null?void 0:E.apis)!=null?n:[],bindRoutes:E==null?void 0:E.bindRoutes,components:{...De,...E==null?void 0:E.components},configLoader:E==null?void 0:E.configLoader,defaultApis:ge,icons:{...ea,...E==null?void 0:E.icons},plugins:(o=E==null?void 0:E.plugins)!=null?o:[],featureFlags:(f=E==null?void 0:E.featureFlags)!=null?f:[],themes:(C=E==null?void 0:E.themes)!=null?C:sa})}},24259:(K,y,e)=>{e.d(y,{c:()=>t});const t=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111")},55488:(K,y,e)=>{e.d(y,{P:()=>u,_P:()=>l,oQ:()=>t});const t="default",l="backstage.io/view-url",u="backstage.io/edit-url",a="kubernetes.io/api-server",A="kubernetes.io/api-server-certificate-authority",c="kubernetes.io/auth-provider"},78560:(K,y,e)=>{e.d(y,{KU:()=>a,U2:()=>A,sM:()=>u});var t=e(55488);function l(c){let h=c.indexOf(":");const d=c.indexOf("/");d!==-1&&d<h&&(h=-1);const r=h===-1?void 0:c.slice(0,h),s=d===-1?void 0:c.slice(h+1,d),m=c.slice(Math.max(h+1,d+1));if(r===""||s===""||m==="")throw new TypeError(`Entity reference "${c}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:r,namespace:s,name:m}}function u(c){return{kind:c.kind,namespace:c.metadata.namespace||t.oQ,name:c.metadata.name}}function a(c,h){var d,r,s,m;if(!c)throw new Error("Entity reference must not be empty");const g=h==null?void 0:h.defaultKind,p=(h==null?void 0:h.defaultNamespace)||t.oQ;let v,R,P;if(typeof c=="string"){const T=l(c);v=(d=T.kind)!=null?d:g,R=(r=T.namespace)!=null?r:p,P=T.name}else v=(s=c.kind)!=null?s:g,R=(m=c.namespace)!=null?m:p,P=c.name;if(v)if(R){if(!P){const T=JSON.stringify(c);throw new Error(`Entity reference ${T} had missing or empty name`)}}else{const T=JSON.stringify(c);throw new Error(`Entity reference ${T} had missing or empty namespace`)}else{const T=JSON.stringify(c);throw new Error(`Entity reference ${T} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:v,namespace:R,name:P}}function A(c){var h,d;let r,s,m;return"metadata"in c?(r=c.kind,s=(h=c.metadata.namespace)!=null?h:t.oQ,m=c.metadata.name):(r=c.kind,s=(d=c.namespace)!=null?d:t.oQ,m=c.name),`${r.toLocaleLowerCase("en-US")}:${s.toLocaleLowerCase("en-US")}/${m.toLocaleLowerCase("en-US")}`}},97214:(K,y,e)=>{e.d(y,{Ey:()=>u,IB:()=>c,Kx:()=>r,L8:()=>l,Qz:()=>s,ZD:()=>A,fO:()=>a,fT:()=>d,jn:()=>p,nC:()=>h,sA:()=>v,u0:()=>m,vv:()=>t,zj:()=>g});const t="ownedBy",l="ownerOf",u="consumesApi",a="apiConsumedBy",A="providesApi",c="apiProvidedBy",h="dependsOn",d="dependencyOf",r="parentOf",s="childOf",m="memberOf",g="hasMember",p="partOf",v="hasPart"},98890:(K,y,e)=>{e.d(y,{Eo:()=>t,I4:()=>u,r2:()=>l});const t="backstage.io/managed-by-location",l="backstage.io/managed-by-origin-location",u="backstage.io/source-location"},79112:(K,y,e)=>{e.d(y,{Cr:()=>s,KL:()=>r,aY:()=>d});var t=e(45250),l=e.n(t),u=e(78560),a=e(11601),A=e.n(a),c=e(98890);const h=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function d(m){if(typeof m!="string")throw new TypeError(`Unable to parse location ref '${m}', unexpected argument ${typeof m}`);const g=m.indexOf(":");if(g<0)throw new TypeError(`Unable to parse location ref '${m}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const p=m.substring(0,g).trim(),v=m.substring(g+1).trim();if(!p||!v)throw new TypeError(`Unable to parse location ref '${m}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(p==="http"||p==="https")throw new TypeError(`Invalid location ref '${m}', please prefix it with 'url:', e.g. 'url:${m}'`);if(h.test(v))throw new TypeError(`Invalid location ref '${m}', target is a javascript: URL`);return{type:p,target:v}}function r(m){const{type:g,target:p}=m;if(g){if(!p)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(h.test(p))throw new TypeError(`Invalid location ref '${g}:${p}', target is a javascript: URL`);return`${g}:${p}`}function s(m){var g,p,v,R,P;const T=(P=(p=(g=m.metadata)==null?void 0:g.annotations)==null?void 0:p[c.I4])!=null?P:(R=(v=m.metadata)==null?void 0:v.annotations)==null?void 0:R[c.Eo];if(!T)throw new Error(`Entity '${(0,u.U2)(m)}' is missing location`);return d(T)}},29666:(K,y,e)=>{e.d(y,{y:()=>a});var t=e(45250),l=e.n(t);class u{static isValidPrefixAndOrSuffix(c,h,d,r){if(typeof c!="string")return!1;const s=c.split(h);return s.length===1?r(s[0]):s.length===2?d(s[0])&&r(s[1]):!1}static isJsonSafe(c){try{return l().isEqual(c,JSON.parse(JSON.stringify(c)))}catch{return!1}}static isValidDnsSubdomain(c){return typeof c=="string"&&c.length>=1&&c.length<=253&&c.split(".").every(u.isValidDnsLabel)}static isValidDnsLabel(c){return typeof c=="string"&&c.length>=1&&c.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(c)}static isValidTag(c){return typeof c=="string"&&c.length>=1&&c.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(c)}static isValidUrl(c){if(typeof c!="string")return!1;try{return new URL(c),!0}catch{return!1}}static isValidString(c){var h;return typeof c=="string"&&((h=c==null?void 0:c.trim())==null?void 0:h.length)>=1}static isNonEmptyString(c){var h;return typeof c=="string"&&((h=c==null?void 0:c.trim())==null?void 0:h.length)>=1}}class a{static isValidApiVersion(c){return u.isValidPrefixAndOrSuffix(c,"/",u.isValidDnsSubdomain,h=>h.length>=1&&h.length<=63&&/^[a-z0-9A-Z]+$/.test(h))}static isValidKind(c){return typeof c=="string"&&c.length>=1&&c.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(c)}static isValidObjectName(c){return typeof c=="string"&&c.length>=1&&c.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(c)}static isValidNamespace(c){return u.isValidDnsLabel(c)}static isValidLabelKey(c){return u.isValidPrefixAndOrSuffix(c,"/",u.isValidDnsSubdomain,a.isValidObjectName)}static isValidLabelValue(c){return c===""||a.isValidObjectName(c)}static isValidAnnotationKey(c){return u.isValidPrefixAndOrSuffix(c,"/",u.isValidDnsSubdomain,a.isValidObjectName)}static isValidAnnotationValue(c){return typeof c=="string"}}},55362:(K,y,e)=>{e.d(y,{L:()=>D,D:()=>R});var t=e(14041),l=e(18139),u=e(54195),a=e(95208),A=e(85408),c=e(45681),h=e(51750),d=e(21613),r=e(18690),s=e(52262),m=e(19224);const g=(B,M)=>{try{const b=(0,d.ue)(M,{pathname:B}),i=b==null?void 0:b.filter(Z=>{var _;return((_=Z==null?void 0:Z.route.routeRefs)==null?void 0:_.size)>0}).pop(),j=i==null?void 0:i.route;if(!j||j.path===""&&B!=="/")return;let U;j.routeRefs.size===1&&(U=j.routeRefs.values().next().value);let G;j.plugins.size===1&&(G=j.plugins.values().next().value);const F=Object.entries((i==null?void 0:i.params)||{}).reduce((Z,[_,N])=>(N!==void 0&&_!=="*"&&(Z[_]=N),Z),{});return{extension:"App",pluginId:(G==null?void 0:G.getId())||"root",...U?{routeRef:U.id}:{},_routeNodeType:j.element,params:F}}catch{return}},p=({pathname:B,search:M,hash:b,attributes:i})=>{const j=(0,s.s)();return(0,t.useEffect)(()=>{j.captureEvent("navigate",`${B}${M}${b}`,{attributes:i})},[j,B,M,b,i]),null},v=({routeObjects:B})=>{const{pathname:M,search:b,hash:i}=(0,r.zy)(),{params:j,...U}=g(M,B)||{params:{}};return t.createElement(m.I,{attributes:U},t.createElement(p,{pathname:M,search:b,hash:i,attributes:j}))};function R(B){return(0,h.h)()?P(B):""}function P(B){var b;let{pathname:M}=new URL((b=B.getOptionalString("app.baseUrl"))!=null?b:"/","http://sample.dev");return M=M.replace(/\/*$/,""),M}function T({component:B,appIdentityProxy:M,children:b}){const[i,j]=(0,t.useState)(),U=(0,l.gf)(u.U),G=P(U);return i?(M.setTarget(i,{signOutTargetUrl:G||"/"}),t.createElement(t.Fragment,null,b)):t.createElement(B,{onSignInSuccess:j})}function D(B){const{Router:M,SignInPage:b}=(0,a.n)().getComponents(),i=(0,l.gf)(u.U),j=P(i),U=`${j}/*`,G=(0,t.useContext)(c.W);if(!G)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:F,appIdentityProxy:Z}=G;return b?(0,h.h)()?t.createElement(M,null,t.createElement(v,{routeObjects:F}),t.createElement(T,{component:b,appIdentityProxy:Z},t.createElement(r.BV,null,t.createElement(r.qh,{path:U,element:t.createElement(t.Fragment,null,B.children)})))):t.createElement(M,{basename:j},t.createElement(v,{routeObjects:F}),t.createElement(T,{component:b,appIdentityProxy:Z},B.children)):(Z.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:j||"/"}),(0,h.h)()?t.createElement(M,null,t.createElement(v,{routeObjects:F}),t.createElement(r.BV,null,t.createElement(r.qh,{path:U,element:t.createElement(t.Fragment,null,B.children)}))):t.createElement(M,{basename:j},t.createElement(v,{routeObjects:F}),B.children))}(0,A.h)(D,"core.type","AppRouter")},45681:(K,y,e)=>{e.d(y,{W:()=>l});var t=e(14041);const l=(0,t.createContext)(void 0)},51750:(K,y,e)=>{e.d(y,{h:()=>u});var t=e(14041),l=e(18690);function u(){const[a]=(0,l.AV)(t.createElement(l.qh,{index:!0,element:t.createElement("div",null)}));return!a.index}},60540:(K,y,e)=>{e.d(y,{i:()=>d});var t=e(14041),l=e(18690),u=e(95208),a=e(77026),A=e(85408),c=e(51750);let h=!1;const d=r=>{const s=(0,u.n)(),{NotFoundErrorPage:m}=s.getComponents(),g=(0,t.useMemo)(()=>(0,c.h)(),[]),v=[...(0,a.O)(r.children,R=>R.getElements().flatMap(P=>{var B;let T=P.props.path;if(T==="")return[];T=(B=T==null?void 0:T.replace(/\/\*$/,""))!=null?B:"/";let D=g?P:P.props.element;return!g&&!D&&(D=P,h||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),h=!0)),[{path:T,element:D,children:P.props.children?[{path:T==="/"?"/":"*",element:P.props.children}]:void 0}]}).sort((P,T)=>T.path.localeCompare(P.path)).map(P=>({...P,path:P.path==="/"?"/":`${P.path}/*`}))),{path:"*",element:t.createElement(m,null)}];return(0,l.Ye)(v)};(0,A.h)(d,"core.type","FlatRoutes")},77462:(K,y,e)=>{e.d(y,{D:()=>m});var t=e(18139),l=e(34477),u=e(10265),a=e(29365),A=e(38097),c=e(72501),h=e(32881),d=e(74219),r=e(14041),s=e(89475);function m(g){const[p,v]=(0,r.useState)([]),R=(0,t.gf)(l.k),{t:P}=(0,u.i)(s.O),{anchorOrigin:T={vertical:"top",horizontal:"center"},transientTimeoutMs:D}=g,B=D!=null?D:5e3;(0,r.useEffect)(()=>{const i=R.alert$().subscribe(j=>v(U=>U.concat(j)));return()=>{i.unsubscribe()}},[R]);const[M]=p;if((0,r.useEffect)(()=>{if(M&&M.display==="transient"){const i=setTimeout(()=>{v(j=>{const U=j.filter(G=>G!==M);return U.length===j.length?j:U})},B);return()=>clearTimeout(i)}},[M,B]),p.length===0)return null;const b=()=>{v(i=>i.filter(j=>j!==M))};return r.createElement(A.A,{open:!0,anchorOrigin:T},r.createElement(d.A,{action:r.createElement(a.A,{color:"inherit",size:"small",onClick:b,"data-testid":"error-button-close"},r.createElement(h.A,null)),severity:M.severity},r.createElement(c.A,{component:"span"},String(M.message),p.length>1&&r.createElement("em",null,P("alertDisplay.message",{count:p.length-1})))))}},62112:(K,y,e)=>{e.d(y,{z:()=>d});var t=e(77125),l=e(54917),u=e(14041),a=e(20279),A=e(40697),c=e(25577),h=e(31994);function d(r){const{text:s,language:m,showLineNumbers:g=!1,highlightedNumbers:p,customStyle:v,showCopyCodeButton:R=!1}=r,P=(0,l.A)(),T=P.palette.type==="dark"?A.A:c.A,D=P.palette.type==="dark"?"#256bf3":"#e6ffed";return u.createElement(t.A,{position:"relative"},u.createElement(a.A,{customStyle:v,language:m,style:T,showLineNumbers:g,wrapLines:!0,lineNumberStyle:{color:P.palette.textVerySubtle},lineProps:B=>p!=null&&p.includes(B)?{style:{backgroundColor:D}}:{}},s),R&&u.createElement(t.A,{position:"absolute",top:0,right:0},u.createElement(h.l,{text:s})))}},31994:(K,y,e)=>{e.d(y,{l:()=>s});var t=e(18139),l=e(24453),u=e(29365),a=e(71677),A=e(99594),c=e(14041),h=e(36338),d=e(89475),r=e(10265);function s(m){const{t:g}=(0,r.i)(d.O),{text:p,tooltipDelay:v=1e3,tooltipText:R=g("copyTextButton.tooltipText"),"aria-label":P="Copy text"}=m,T=(0,t.gf)(l.m),[D,B]=(0,c.useState)(!1),[{error:M},b]=(0,h.A)();(0,c.useEffect)(()=>{M&&T.post(M)},[M,T]);const i=j=>{j.stopPropagation(),B(!0),b(p)};return c.createElement(c.Fragment,null,c.createElement(a.Ay,{id:"copy-test-tooltip",title:R,placement:"top",leaveDelay:v,onClose:()=>B(!1),open:D},c.createElement(u.A,{onClick:i,"aria-label":P},c.createElement(A.A,null))))}},80609:(K,y,e)=>{e.d(y,{w:()=>L});var t=e(14041),l=e(66650),u=e(67566),a=e(41809),A=e(67991),c=e.n(A),h=e(12784),d=e.n(h),r=e(47090),s=e(22249),m=e(58837);const g=(0,m.A)(O=>({node:{fill:O.palette.primary.light,stroke:O.palette.primary.light},text:{fill:O.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function p({node:{id:O}}){const W=g(),[I,w]=t.useState(0),[Q,J]=t.useState(0),Y=t.useRef(null);t.useLayoutEffect(()=>{if(Y.current){let{height:se,width:ne}=Y.current.getBBox();se=Math.round(se),ne=Math.round(ne),(se!==Q||ne!==I)&&(w(ne),J(se))}},[I,Q]);const z=10,q=I+z*2,te=Q+z*2;return t.createElement("g",null,t.createElement("rect",{className:W.node,width:q,height:te,rx:10}),t.createElement("text",{ref:Y,className:W.text,y:te/2,x:q/2,textAnchor:"middle",alignmentBaseline:"middle"},O))}const v="arrow-marker",R="node",P="edge",T="label",D=(0,s.A)(O=>({node:{transition:`${O.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),B=O=>t.createElement(p,{...O});function M({render:O=B,setNode:W,node:I}){const{width:w,height:Q,x:J=0,y:Y=0}=I,z=I,q=D(),te=t.useRef(null);return t.useLayoutEffect(()=>{if(te.current){let{height:se,width:ne}=te.current.getBBox();se=Math.round(se),ne=Math.round(ne),(se!==Q||ne!==w)&&W(I.id,{...I,height:se,width:ne})}},[I,w,Q,W]),t.createElement("g",{ref:te,"data-testid":R,className:q.node,transform:`translate(${J-w/2},${Y-Q/2})`},O({node:z}))}var b=e(1121),i=e(24260),j=e(20644),U=e.n(j);const G=(0,s.A)(O=>({text:{fill:O.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function F({edge:{label:O}}){const W=G();return t.createElement("text",{className:W.text,textAnchor:"middle"},O)}const Z=(0,s.A)(O=>({path:{strokeWidth:1.3,stroke:O.palette.textSubtle,fill:"none",transition:`${O.transitions.duration.shortest}ms`},label:{transition:`${O.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),_=O=>t.createElement(F,{...O});function N({render:O=_,setEdge:W,id:I,edge:w,curve:Q,showArrowHeads:J}){const{x:Y=0,y:z=0,width:q,height:te,points:se}=w,ne=w,oe=Z(),me=t.useRef(null);t.useLayoutEffect(()=>{if(me.current){let{height:Be,width:Je}=me.current.getBBox();Be=Math.round(Be),Je=Math.round(Je),(Be!==te||Je!==q)&&W(I,{...w,height:Be,width:Je})}},[w,te,q,W,I]);let Se="";const be=t.useMemo(()=>b.A().x(Be=>Be.x).y(Be=>Be.y).curve(i[Q]),[Q]);if(se){const Be=se.filter(Je=>U()(Je.x)&&U()(Je.y));Se=be(Be)||""}return t.createElement(t.Fragment,null,Se&&t.createElement("path",{"data-testid":P,className:oe.path,markerEnd:J?`url(#${v})`:void 0,d:Se}),ne.label?t.createElement("g",{ref:me,"data-testid":T,className:oe.label,transform:`translate(${Y},${z})`},O({edge:ne})):null)}const V="workspace";function L(O){var tt,pe;const{edges:W,nodes:I,renderNode:w,direction:Q=r.D.Direction.TOP_BOTTOM,align:J,nodeMargin:Y=50,edgeMargin:z=10,rankMargin:q=50,paddingX:te=0,paddingY:se=0,acyclicer:ne,ranker:oe=r.D.Ranker.NETWORK_SIMPLEX,labelPosition:me=r.D.LabelPosition.RIGHT,labelOffset:Se=10,edgeRanks:be=1,edgeWeight:Be=1,renderLabel:Je,defs:Qe,zoom:Te="enabled",curve:Ie="curveMonotoneX",showArrowHeads:Me=!1,fit:He="grow",...Ye}=O,lt=(0,a.A)(),[Et,We]=t.useState(100),[ze,we]=t.useState(100),ce=t.useRef(new(c()).graphlib.Graph),[Ae,Re]=t.useState(((tt=ce.current.graph())==null?void 0:tt.width)||0),[Ne,ht]=t.useState(((pe=ce.current.graph())==null?void 0:pe.height)||0),[Ot,ct]=t.useState([]),[ut,it]=t.useState([]),Ce=Math.max(Ae,Et),Pe=Math.max(Ne,ze),Ge=Math.min(Ne,ze),_e=He==="grow"?Pe:Ge,Xe=t.useMemo(()=>d()(k=>{if(!k)return;const H=u.A(k),le=u.A(k.getElementById(V));function ve(){H.call(l.s_().scaleExtent([1,1/0]).on("zoom",at=>{at.transform.x=Math.min(0,Math.max(at.transform.x,Ce-Ce*at.transform.k)),at.transform.y=Math.min(0,Math.max(at.transform.y,Pe-Pe*at.transform.k)),le.attr("transform",at.transform)}))}Te==="enabled"?ve():Te==="enable-on-click"&&H.on("click",()=>ve());const{width:ge,height:fe}=k.getBoundingClientRect();Et!==ge&&We(ge),ze!==fe&&we(fe)},100),[ze,Et,Ce,Pe,Te]),Ke=t.useCallback(()=>{const k=ce.current.nodes(),H=ce.current.edges();k.forEach(le=>{I.some(ge=>ge.id===le)||ce.current.removeNode(le)}),H.forEach(le=>{W.some(ge=>ge.from===le.v&&ge.to===le.w)||ce.current.removeEdge(le.v,le.w)}),I.forEach(le=>{const ve=ce.current.nodes().find(ge=>le.id===ge);if(ve&&ce.current.node(ve)){const{width:ge,height:fe,x:at,y:gt}=ce.current.node(ve);ce.current.setNode(ve,{...le,width:ge,height:fe,x:at,y:gt})}else ce.current.setNode(le.id,{...le,width:0,height:0})}),W.forEach(le=>{ce.current.setEdge(le.from,le.to,{...le,label:le.label,width:0,height:0,labelpos:me,labeloffset:Se,weight:Be,minlen:be})})},[W,I,me,Se,Be,be]),At=t.useMemo(()=>d()(()=>{c().layout(ce.current);const{height:k,width:H}=ce.current.graph(),le=Math.max(0,k||0),ve=Math.max(0,H||0);Re(ve),ht(le),ct(ce.current.nodes()),it(ce.current.edges())},250,{leading:!0}),[]);t.useEffect(()=>(ce.current.setGraph({rankdir:Q,align:J,nodesep:Y,edgesep:z,ranksep:q,marginx:te,marginy:se,acyclicer:ne,ranker:oe}),Ke(),At(),At.cancel),[ne,J,Q,z,te,se,Y,q,oe,Ke,At]);function Ue(k,H){return ce.current.setNode(k,H),At(),ce.current}function et(k,H){return ce.current.setEdge(k,H),At(),ce.current}return t.createElement("svg",{ref:Xe,...Ye,width:"100%",height:_e,viewBox:`0 0 ${Ce} ${Pe}`},t.createElement("defs",null,t.createElement("marker",{id:v,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},t.createElement("path",{fill:lt.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Qe),t.createElement("g",{id:V},t.createElement("svg",{width:Ae,height:Ne,y:Pe/2-Ne/2,x:Ce/2-Ae/2,viewBox:`0 0 ${Ae} ${Ne}`},ut.map(k=>{const H=ce.current.edge(k);return H?t.createElement(N,{key:`${k.v}-${k.w}`,id:k,setEdge:et,render:Je,edge:H,curve:Ie,showArrowHeads:Me}):null}),Ot.map(k=>{const H=ce.current.node(k);return H?t.createElement(M,{key:k,setNode:Ue,render:w,node:H}):null}))))}},47090:(K,y,e)=>{e.d(y,{D:()=>t});var t;(l=>{(u=>{u.TOP_BOTTOM="TB",u.BOTTOM_TOP="BT",u.LEFT_RIGHT="LR",u.RIGHT_LEFT="RL"})(l.Direction||(l.Direction={})),(u=>{u.UP_LEFT="UL",u.UP_RIGHT="UR",u.DOWN_LEFT="DL",u.DOWN_RIGHT="DR"})(l.Alignment||(l.Alignment={})),(u=>{u.NETWORK_SIMPLEX="network-simplex",u.TIGHT_TREE="tight-tree",u.LONGEST_PATH="longest-path"})(l.Ranker||(l.Ranker={})),(u=>{u.LEFT="l",u.RIGHT="r",u.CENTER="c"})(l.LabelPosition||(l.LabelPosition={}))})(t||(t={}))},65995:(K,y,e)=>{e.d(y,{p:()=>g});var t=e(42899),l=e(58837),u=e(72501),a=e(14041);const A=e.p+"static/missingAnnotation.67f79e98..svg",c=e.p+"static/noInformation.4b426325..svg",h=e.p+"static/createComponent.975d1e1e..svg",d=e.p+"static/noBuild.1715fa71..svg",r=(0,l.A)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),s=({missing:p})=>{const v=r();switch(p){case"field":return a.createElement("img",{src:A,className:v.generalImg,alt:"annotation is missing"});case"info":return a.createElement("img",{src:c,alt:"no Information",className:v.generalImg});case"content":return a.createElement("img",{src:h,alt:"create Component",className:v.generalImg});case"data":return a.createElement("img",{src:d,alt:"no Build",className:v.generalImg});default:return null}},m=(0,l.A)(p=>({root:{backgroundColor:p.palette.background.default,padding:p.spacing(2,0,0,0)},action:{marginTop:p.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function g(p){const{title:v,description:R,missing:P,action:T}=p,D=m();return a.createElement(t.A,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:D.root,spacing:2},a.createElement(t.A,{item:!0,xs:12,md:6},a.createElement(t.A,{container:!0,direction:"column"},a.createElement(t.A,{item:!0,xs:!0},a.createElement(u.A,{variant:"h5"},v)),a.createElement(t.A,{item:!0,xs:!0},a.createElement(u.A,{variant:"body1"},R)),a.createElement(t.A,{item:!0,xs:!0,className:D.action},T))),a.createElement(t.A,{item:!0,xs:12,md:6,className:D.imageContainer},typeof P=="string"?a.createElement(s,{missing:P}):P.customImage))}},12554:(K,y,e)=>{e.d(y,{b:()=>s});var t=e(58837),l=e(58007),u=e(8109),a=e(5951),A=e(14041),c=e(31994),h=e(99338);const d=(0,t.A)(m=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:m.spacing(2)},divider:{margin:m.spacing(2)}}),{name:"BackstageErrorPanel"}),r=({error:m,message:g,stack:p,children:v})=>{const R=d();return A.createElement(l.A,{dense:!0},A.createElement(u.A,{alignItems:"flex-start"},A.createElement(a.A,{classes:{secondary:R.text},primary:"Error",secondary:m}),A.createElement(c.l,{text:m})),A.createElement(u.A,{alignItems:"flex-start"},A.createElement(a.A,{classes:{secondary:R.text},primary:"Message",secondary:g}),A.createElement(c.l,{text:g})),p&&A.createElement(u.A,{alignItems:"flex-start"},A.createElement(a.A,{classes:{secondary:R.text},primary:"Stack Trace",secondary:p}),A.createElement(c.l,{text:p})),v)};function s(m){const{title:g,error:p,defaultExpanded:v,titleFormat:R,children:P}=m;return A.createElement(h.B,{severity:"error",title:g!=null?g:p.message,defaultExpanded:v,titleFormat:R},A.createElement(r,{error:p.name,message:p.message,stack:p.stack,children:P}))}},75202:(K,y,e)=>{e.d(y,{N_:()=>j});var t=e(18139),l=e(54195),u=e(52262),a=e(49203),A=e(58837),c=e(72501),h=e(53373),d=e.n(h),r=e(45250),s=e.n(r),m=e(14041),g=e(18690),p=e(73657);function v(){const[U]=(0,g.AV)(m.createElement(g.qh,{index:!0,element:m.createElement("div",null)}));return!U.index}const R=(0,A.A)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),P=U=>/^([a-z+.-]+):/.test(U),T=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,D=window.open;if(D&&!D.__backstage){const U=function(...F){const Z=String(F[0]);if(T.test(Z))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return D.apply(this,F)};U.__backstage=!0,window.open=U}const B=()=>{try{return(0,t.gf)(l.U).getOptionalString("app.baseUrl")}catch{return}},M=()=>{var Z;const U="http://sample.dev",G=(Z=B())!=null?Z:"/",{pathname:F}=new URL(G,U);return(0,r.trimEnd)(F,"/")},b=U=>{let G=String(U);const F=M(),Z=P(G),_=G.startsWith(F);return!Z&&!_&&(G=F.concat(G)),G},i=U=>{var G;return U instanceof Array?U.map(i).join(" ").trim():typeof U=="object"&&U?i((G=U==null?void 0:U.props)==null?void 0:G.children):["string","number"].includes(typeof U)?String(U):""},j=m.forwardRef(({onClick:U,noTrack:G,...F},Z)=>{const _=R(),N=(0,u.s)(),V=v()?b(F.to):F.to,L=i(F.children)||V,O=P(V),W=O&&!!/^https?:/.exec(V);if(T.test(V))throw new Error("Link component rejected javascript: URL as a security precaution");const I=w=>{U==null||U(w),G||N.captureEvent("click",L,{attributes:{to:V}})};return O?m.createElement(a.A,{...W?{target:"_blank",rel:"noopener"}:{},...F,...F["aria-label"]?{"aria-label":`${F["aria-label"]}, Opens in a new window`}:{},ref:Z,href:V,onClick:I,className:d()(_.externalLink,F.className)},F.children,m.createElement(c.A,{component:"span",className:_.visuallyHidden},", Opens in a new window")):m.createElement(a.A,{...F,ref:Z,component:p.N_,to:V,onClick:I})})},87318:(K,y,e)=>{e.d(y,{z:()=>A});var t=e(64947),l=e(14041),u=e(75202);const a=l.forwardRef((h,d)=>l.createElement(u.N_,{ref:d,...h,color:"initial"})),A=l.forwardRef((h,d)=>l.createElement(t.A,{ref:d,component:a,...h})),c=null},28364:(K,y,e)=>{e.d(y,{h:()=>s});var t=e(58837),l=e(60767),u=e(28138),a=e(14041),A=e(62112);const c=(0,t.A)(m=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${m.palette.border}`},"& th, & td":{border:`1px solid ${m.palette.border}`,padding:m.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:m.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:m.palette.background.paper},"& tr":{backgroundColor:m.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:m.palette.background.default},"& a":{color:m.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),h=(m,g)=>g?typeof g=="string"?m+g:a.Children.toArray(g.props.children).reduce(h,m):m,d=({level:m,children:g})=>{const R=a.Children.toArray(g).reduce(h,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return a.createElement(`h${m}`,{id:R},g)},r={code:({inline:m,className:g,children:p,...v})=>{const R=String(p).replace(/\n+$/,""),P=/language-(\w+)/.exec(g||"");return!m&&P?a.createElement(A.z,{language:P[1],text:R}):a.createElement("code",{className:g,...v},p)},h1:d,h2:d,h3:d,h4:d,h5:d,h6:d};function s(m){const{content:g,dialect:p="gfm",linkTarget:v,transformLinkUri:R,transformImageUri:P,className:T}=m,D=c();return a.createElement(l.$,{remarkPlugins:p==="gfm"?[u.A]:[],className:`${D.markdown} ${T!=null?T:""}`.trim(),children:g,components:r,linkTarget:v,transformLinkUri:R,transformImageUri:P})}},60197:(K,y,e)=>{e.d(y,{z:()=>j});var t=e(58837),l=e(76891),u=e(93453),a=e(46805),A=e(61477),c=e(58007),h=e(64947),d=e(14041),r=e(11746),s=e(8109),m=e(91467),g=e(5951),p=e(72501),v=e(3399),R=e(89475),P=e(10265);const T=(0,t.A)(U=>({root:{paddingLeft:U.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),D=({request:U,busy:G,setBusy:F})=>{const Z=T(),[_,N]=(0,d.useState)(),{t:V}=(0,P.i)(R.O),L=async()=>{F(!0);try{await U.trigger()}catch(W){N((0,v.bJ)(W)?W.message:"An unspecified error occurred")}finally{F(!1)}},O=U.provider.icon;return d.createElement(s.A,{disabled:G,classes:{root:Z.root}},d.createElement(m.A,null,d.createElement(O,{fontSize:"large"})),d.createElement(g.A,{primary:U.provider.title,secondary:_&&d.createElement(p.A,{color:"error"},_)}),d.createElement(h.A,{color:"primary",variant:"contained",onClick:L},V("oauthRequestDialog.login")))};var B=e(18139),M=e(35177),b=e(54195);const i=(0,t.A)(U=>({dialog:{paddingTop:U.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:U.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:U.spacing(2,0)}}),{name:"OAuthRequestDialog"});function j(U){var I;const G=i(),[F,Z]=(0,d.useState)(!1),_=(0,B.gf)(M.s),N=(0,B.gf)(b.U),{t:V}=(0,P.i)(R.O),L=(I=N.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?I:!1,O=(0,r.A)((0,d.useMemo)(()=>_.authRequest$(),[_]),[]),W=()=>{O.forEach(w=>w.reject())};return d.createElement(l.A,{open:!!O.length,fullWidth:!0,maxWidth:"xs",classes:{paper:G.dialog},"aria-labelledby":"oauth-req-dialog-title"},d.createElement("main",null,d.createElement(A.A,{classes:{root:G.title},id:"oauth-req-dialog-title"},d.createElement(p.A,{className:G.titleHeading,variant:"h1",variantMapping:{h1:"span"}},V("oauthRequestDialog.title")),L?d.createElement(p.A,null,V("oauthRequestDialog.authRedirectTitle")):null),d.createElement(a.A,{dividers:!0,classes:{root:G.contentList}},d.createElement(c.A,null,O.map(w=>d.createElement(D,{key:w.provider.title,request:w,busy:F,setBusy:Z}))))),d.createElement(u.A,{classes:{root:G.actionButtons}},d.createElement(h.A,{onClick:W},V("oauthRequestDialog.rejectAll"))))}},96872:(K,y,e)=>{e.d(y,{k:()=>A});var t=e(77125),l=e(88951),u=e(54917),a=e(14041);function A(c){const h=(0,u.A)(),[d,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const s=setTimeout(()=>r(!0),h.transitions.duration.short);return()=>clearTimeout(s)},[h.transitions.duration.short]),d?a.createElement(l.A,{...c,"data-testid":"progress"}):a.createElement(t.A,{display:"none"})}},99424:(K,y,e)=>{e.d(y,{_:()=>s});var t=e(58837),l=e(37197),u=e(8109),a=e(5951),A=e(14041),c=e(62112),h=e(31994),d=e(12554);const r=(0,t.A)(m=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:m.spacing(2)},divider:{margin:m.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function s(m){var G;const{title:g,error:p,defaultExpanded:v}=m,R=r();if(p.name!=="ResponseError")return A.createElement(d.b,{title:g!=null?g:p.message,defaultExpanded:v,error:p});const{body:P,cause:T}=p,{request:D,response:B}=P,M=`${B.statusCode}: ${T.name}`,b=D&&`${D.method} ${D.url}`,i=T.message.replace(/\\n/g,`
`),j=(G=T.stack)==null?void 0:G.replace(/\\n/g,`
`),U=JSON.stringify(P,void 0,2);return A.createElement(d.b,{title:g!=null?g:p.message,defaultExpanded:v,error:{name:M,message:i,stack:j}},b&&A.createElement(u.A,{alignItems:"flex-start"},A.createElement(a.A,{classes:{secondary:R.text},primary:"Request",secondary:D?`${b}`:void 0}),A.createElement(h.l,{text:b})),A.createElement(A.Fragment,null,A.createElement(l.A,{component:"li",className:R.divider}),A.createElement(u.A,{alignItems:"flex-start"},A.createElement(a.A,{classes:{secondary:R.text},primary:"Full Error as JSON"})),A.createElement(c.z,{language:"json",text:U,showCopyCodeButton:!0})))}},81252:(K,y,e)=>{e.d(y,{w:()=>b});var t=e(77125),l=e(69076),u=e(67720),a=e(95061),A=e(41857),c=e(48543),h=e(26343),d=e(81215),r=e(7031),s=e(99703),m=e(58837),g=e(72501),p=e(14041),v=e(10437);const R=(0,m.A)(i=>(0,s.A)({icon:{position:"absolute",right:i.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageClosedDropdown"}),P=()=>{const i=R();return p.createElement(v.A,{className:i.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},p.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"currentColor"}))},T=(0,m.A)(i=>(0,s.A)({icon:{position:"absolute",right:i.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageOpenedDropdown"}),D=()=>{const i=T();return p.createElement(v.A,{className:i.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},p.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"currentColor"}))},B=(0,r.A)(i=>(0,s.A)({root:{"label + &":{marginTop:i.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:i.palette.primary.main}},input:{borderRadius:i.shape.borderRadius,position:"relative",backgroundColor:i.palette.background.paper,border:"1px solid #ced4da",fontSize:i.typography.body1.fontSize,padding:i.spacing(1.25,3.25,1.25,1.5),transition:i.transitions.create(["border-color","box-shadow"]),"&:focus":{background:i.palette.background.paper,borderRadius:i.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(A.A),M=(0,m.A)(i=>(0,s.A)({formControl:{margin:i.spacing(1,0)},label:{transform:"initial",fontWeight:"bold",fontSize:i.typography.body2.fontSize,fontFamily:i.typography.fontFamily,color:i.palette.text.primary,"&.Mui-focused":{color:i.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:i.typography.body2.fontSize,fontFamily:i.typography.fontFamily,color:i.palette.text.primary,"&.Mui-focused":{color:i.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function b(i){const{multiple:j,items:U,label:G,placeholder:F,selected:Z,onChange:_,triggerReset:N,native:V=!1,disabled:L=!1,margin:O,"data-testid":W="select"}=i,I=M(),[w,Q]=(0,p.useState)(Z||(j?[]:"")),[J,Y]=(0,p.useState)(!1);(0,p.useEffect)(()=>{Q(j?[]:"")},[N,j]),(0,p.useEffect)(()=>{Q(Z||(j?[]:""))},[Z,j]);const z=ne=>{Q(ne.target.value),_(ne.target.value)},q=ne=>{if(L){ne.preventDefault();return}Y(oe=>j&&!(ne.target instanceof HTMLElement)?!0:!oe)},te=()=>{Y(!1)},se=ne=>()=>{const oe=w.filter(me=>me!==ne);Q(oe),_(oe)};return p.createElement(t.A,{className:I.root},p.createElement(a.A,{className:I.formControl},p.createElement(c.A,{className:I.formLabel},G),p.createElement(d.A,{"aria-label":G,value:w,native:V,disabled:L,"data-testid":W,displayEmpty:!0,multiple:j,margin:O,onChange:z,open:J,onOpen:q,onClose:te,input:p.createElement(B,null),label:G,renderValue:ne=>{var oe;return j&&w.length!==0?p.createElement(t.A,{className:I.chips},ne.map(me=>{const Se=U.find(be=>be.value===me);return Se?p.createElement(u.A,{key:Se==null?void 0:Se.value,label:Se==null?void 0:Se.label,clickable:!0,onDelete:se(me),className:I.chip}):!1})):p.createElement(g.A,null,w.length===0?F||"":(oe=U.find(me=>me.value===ne))==null?void 0:oe.label)},IconComponent:()=>J?p.createElement(D,null):p.createElement(P,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},!!F&&!j&&p.createElement(h.A,{value:[]},F),V?U&&U.map(ne=>p.createElement("option",{value:ne.value,key:ne.value},ne.label)):U&&U.map(ne=>p.createElement(h.A,{key:ne.value,value:ne.value},j&&p.createElement(l.A,{color:"primary",checked:w.includes(ne.value)||!1,className:I.checkbox}),ne.label)))))}},62905:(K,y,e)=>{e.d(y,{k:()=>d});var t=e(14041),l=e(93285),u=e(18690),a=e(21613),A=e(16454),c=e(44390);function h(r){var T,D,B,M,b;const s=(0,u.g)(),g=r.map(({path:i,children:j})=>({caseSensitive:!1,path:`${i}/*`,element:j})).sort((i,j)=>j.path.replace(/\/\*$/,"").localeCompare(i.path.replace(/\/\*$/,""))),p=(D=(0,u.Ye)(g))!=null?D:(T=r[0])==null?void 0:T.children;let v=(B=s["*"])!=null?B:"";v.startsWith("/")||(v=`/${v}`);const[R]=(M=(0,a.ue)(g,v))!=null?M:[],P=R?r.findIndex(i=>`${i.path}/*`===R.route.path):0;return{index:P===-1?0:P,element:p,route:(b=r[P])!=null?b:r[0]}}function d(r){const{routes:s}=r,m=(0,u.Zp)(),{index:g,route:p,element:v}=h(s),R=(0,t.useMemo)(()=>s.map(T=>({id:T.path,label:T.title,tabProps:T.tabProps})),[s]),P=T=>{let{path:D}=s[T];D=D.replace(/\/\*$/,""),D=D.replace(/^\//,""),m(D)};return t.createElement(t.Fragment,null,t.createElement(c.o,{tabs:R,selectedIndex:g,onChange:P}),t.createElement(A.U,null,t.createElement(l.m,{title:p==null?void 0:p.title}),v))}},99338:(K,y,e)=>{e.d(y,{B:()=>B});var t=e(268),l=e(58837),u=e(8973),a=e(29655),A=e(91567),c=e(42899),h=e(72501),d=e(9181),r=e(6924),s=e(14041),m=e(28364);const g=(M,b)=>(b.palette.type==="light"?t.e$:t.a)(b.palette[M].light,.6),p=(M,b)=>(b.palette.type==="light"?t.a:t.e$)(b.palette[M].light,.9),v=(0,l.A)(M=>({root:{marginRight:M.spacing(1),fill:({severity:b})=>g(b,M)}})),R=({severity:M})=>{const b=v({severity:M});return s.createElement(d.A,{classes:b})},P=({severity:M})=>{const b=v({severity:M});return s.createElement(r.A,{classes:b})},T=(0,l.A)(M=>({panel:{backgroundColor:({severity:b})=>p(b,M),color:({severity:b})=>g(b,M),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:b})=>g(b,M),fontWeight:M.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:b})=>g(b,M),backgroundColor:({severity:b})=>p(b,M)},details:{width:"100%",display:"block",color:M.palette.textContrast,backgroundColor:M.palette.background.default,border:`1px solid ${M.palette.border}`,padding:M.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),D=M=>M.charAt(0).toLocaleUpperCase("en-US")+M.slice(1);function B(M){const{severity:b="warning",title:i,titleFormat:j,message:U,children:G,defaultExpanded:F}=M,Z=T({severity:b}),_=D(b)+(i?`: ${i}`:"");return s.createElement(u.A,{defaultExpanded:F!=null?F:!1,className:Z.panel,role:"alert"},s.createElement(a.A,{expandIcon:s.createElement(P,{severity:b}),className:Z.summary},s.createElement(R,{severity:b}),s.createElement(h.A,{className:Z.summaryText,variant:"subtitle1"},j==="markdown"?s.createElement(m.h,{content:_,className:Z.markdownContent}):_)),(U||G)&&s.createElement(A.A,null,s.createElement(c.A,{container:!0},U&&s.createElement(c.A,{item:!0,xs:12},s.createElement(h.A,{className:Z.message,variant:"body1"},U)),G&&s.createElement(c.A,{item:!0,xs:12,className:Z.details},G))))}},70209:(K,y,e)=>{e.d(y,{l:()=>c});var t=e(18139),l=e(54195),u=e(89475),a=e(10265);const A=()=>{const{t:h}=(0,a.i)(u.O);return{url:"https://github.com/backstage/backstage/issues",items:[{title:h("supportConfig.default.title"),icon:"warning",links:[{title:h("supportConfig.default.linkTitle"),url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]}};function c(){const d=(0,t.Q2)().get(l.U),r=d==null?void 0:d.getOptionalConfig("app.support"),s=A();return r?{url:r.getString("url"),items:r.getConfigArray("items").flatMap(m=>{var g;return{title:m.getString("title"),icon:m.getOptionalString("icon"),links:((g=m.getOptionalConfigArray("links"))!=null?g:[]).flatMap(p=>({url:p.getString("url"),title:p.getString("title")}))}})}:s}},92483:(K,y,e)=>{e.d(y,{Hk:()=>m,NT:()=>p,Vf:()=>r,fX:()=>c,ny:()=>v,z9:()=>a});var t=e(95208),l=e(27799),u=e(14041);function a(P){var i;const{id:T,Fallback:D=l.A,...B}=P,b=(i=(0,t.n)().getSystemIcon(T))!=null?i:D;return u.createElement(b,{...B})}function A(P){return React__default.createElement(a,{id:"brokenImage",...P})}function c(P){return u.createElement(a,{id:"catalog",...P})}function h(P){return React__default.createElement(a,{id:"chat",...P})}function d(P){return React__default.createElement(a,{id:"dashboard",...P})}function r(P){return u.createElement(a,{id:"docs",...P})}function s(P){return React__default.createElement(a,{id:"email",...P})}function m(P){return u.createElement(a,{id:"github",...P})}function g(P){return React__default.createElement(a,{id:"group",...P})}function p(P){return u.createElement(a,{id:"help",...P})}function v(P){return u.createElement(a,{id:"user",...P})}function R(P){return React__default.createElement(a,{id:"warning",...P})}},25646:(K,y,e)=>{e.d(y,{O:()=>r});var t=e(77125),l=e(37197),u=e(58837),a=e(72501),A=e(52235),c=e(14041),h=e(75202);const d=(0,u.A)(s=>({root:{maxWidth:"fit-content",padding:s.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:s.palette.textSubtle},arrow:{color:s.palette.textSubtle}}),{name:"BackstageBottomLink"});function r(s){const{link:m,title:g,onClick:p}=s,v=d();return c.createElement(t.A,null,c.createElement(l.A,null),c.createElement(h.N_,{to:m,onClick:p,underline:"none"},c.createElement(t.A,{display:"flex",alignItems:"center",className:v.root},c.createElement(t.A,{className:v.boxTitle,fontWeight:"fontWeightBold",m:1},c.createElement(a.A,null,c.createElement("strong",null,g))),c.createElement(A.A,{className:v.arrow}))))}},16454:(K,y,e)=>{e.d(y,{U:()=>c});var t=e(58837),l=e(53373),u=e.n(l),a=e(14041);const A=(0,t.A)(h=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:h.spacing(3),paddingBottom:h.spacing(3),paddingLeft:h.spacing(2),paddingRight:h.spacing(2),[h.breakpoints.up("sm")]:{paddingLeft:h.spacing(3),paddingRight:h.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function c(h){const{className:d,stretch:r,noPadding:s,children:m,...g}=h,p=A();return a.createElement("article",{...g,className:u()(p.root,d,{[p.stretch]:r,[p.noPadding]:s})},m)}},17138:(K,y,e)=>{e.d(y,{d:()=>d});var t=e(77125),l=e(58837),u=e(72501),a=e(14041),A=e(93285);const c=r=>(0,l.A)(s=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:s.spacing(2),textAlign:r.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:s.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),h=({title:r="Unknown page",className:s})=>a.createElement(u.A,{variant:"h4",component:"h2",className:s,"data-testid":"header-title"},r);function d(r){const{description:s,title:m,titleComponent:g=void 0,children:p,textAlign:v="left"}=r,R=c({textAlign:v})(),P=g||a.createElement(h,{title:m,className:R.title});return a.createElement(a.Fragment,null,a.createElement(A.m,{title:m}),a.createElement(t.A,{className:R.container},a.createElement(t.A,{className:R.leftItemsBox},P,s&&a.createElement(u.A,{className:R.description,variant:"body2"},s)),a.createElement(t.A,{className:R.rightItemsBox},p)))}},66670:(K,y,e)=>{e.d(y,{t:()=>d});var t=e(72501),l=e(14041),u=e(87318),a=e(12554),A=e(89475),c=e(10265);const h=r=>{const{slackChannel:s}=r,{t:m}=(0,c.i)(A.O);if(s){if(typeof s=="string")return l.createElement(t.A,null,m("errorBoundary.title",{slackChannel:s}));if(!s.href)return l.createElement(t.A,null,m("errorBoundary.title",{slackChannel:s.name}))}else return null;return l.createElement(u.z,{to:s.href,variant:"contained"},s.name)},d=class extends l.Component{constructor(s){super(s),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(s,m){console.error(`ErrorBoundary, error: ${s}`,{error:s,errorInfo:m}),this.setState({error:s,errorInfo:m})}render(){const{slackChannel:s,children:m}=this.props,{error:g}=this.state;return g?l.createElement(a.b,{title:"Something Went Wrong",error:g},l.createElement(h,{slackChannel:s})):m}}},41544:(K,y,e)=>{e.d(y,{M:()=>G});var t=e(42899),l=e(58837),u=e(72501),a=e(14041),A=e(18690),c=e(75202),h=e(45250),d=e(70209);const r=e.p+"static/mic-drop.fe3ef4d0..svg",s=(0,l.A)(F=>({micDrop:{maxWidth:"60%",bottom:F.spacing(2),right:F.spacing(2),[F.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:F.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),m=()=>{const F=s();return a.createElement("img",{src:r,className:F.micDrop,alt:"Girl dropping mic from her hands"})};var g=e(10265),p=e(89475),v=e(18846),R=e(62112),P=e(66650),T=e(67991),D=e(12784),B=e(90147),M=e(93285),b=e(16975);const i=(0,l.A)(F=>({title:{paddingBottom:F.spacing(5),[F.breakpoints.down("xs")]:{paddingBottom:F.spacing(4),fontSize:F.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function j(F){const{stack:Z}=F,_=i(),{t:N}=(0,g.i)(p.O),[V,L]=(0,a.useState)(!1);return V?a.createElement(a.Fragment,null,a.createElement(u.A,{variant:"h6",className:_.title},a.createElement(c.N_,{to:"#",onClick:()=>L(!1)},N("errorPage.showLessDetails"))),a.createElement(R.z,{text:Z,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})):a.createElement(u.A,{variant:"h6",className:_.title},a.createElement(c.N_,{to:"#",onClick:()=>L(!0)},N("errorPage.showMoreDetails")))}const U=(0,l.A)(F=>({container:{padding:F.spacing(8),[F.breakpoints.down("xs")]:{padding:F.spacing(2)}},title:{paddingBottom:F.spacing(5),[F.breakpoints.down("xs")]:{paddingBottom:F.spacing(4),fontSize:F.typography.h3.fontSize}},subtitle:{color:F.palette.textSubtle}}),{name:"BackstageErrorPage"});function G(F){const{status:Z="",statusMessage:_,additionalInfo:N,supportUrl:V,stack:L}=F,O=U(),W=(0,A.Zp)(),I=(0,d.l)(),{t:w}=(0,g.i)(p.O);return a.createElement(t.A,{container:!0,className:O.container},a.createElement(t.A,{item:!0,xs:12,sm:8,md:4},a.createElement(u.A,{"data-testid":"error",variant:"body1",className:O.subtitle},w("errorPage.subtitle",{status:Z,statusMessage:_})),a.createElement(u.A,{variant:"body1",className:O.subtitle},N),a.createElement(u.A,{variant:"h2",className:O.title},w("errorPage.title")),a.createElement(u.A,{variant:"h6",className:O.title},a.createElement(c.N_,{to:"#","data-testid":"go-back-link",onClick:()=>W(-1)},w("errorPage.goBack")),"... or please"," ",a.createElement(c.N_,{to:V||I.url},"contact support")," if you think this is a bug."),L&&a.createElement(j,{stack:L})),a.createElement(m,null))}},16654:(K,y,e)=>{e.d(y,{Y:()=>G});var t=e(18139),l=e(54195),u=e(77125),a=e(42899),A=e(58837),c=e(71677),h=e(72501),d=e(14041),r=e(93285),s=e(75202),m=e(45634),g=e(58007),p=e(8109),v=e(55197),R=e(7031);const P=(0,R.A)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(h.A),T=(0,R.A)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(u.A),D=(0,R.A)({root:{fontStyle:"italic"}},{name:"BreadcrumbsCurrentPage"})(u.A);function B(F){const{children:Z,..._}=F,[N,V]=d.useState(null),L=d.Children.toArray(Z),[O,W,...I]=L,w=I.length?I.pop():L[L.length-1],Q=L.length>3,J=q=>{V(q.currentTarget)},Y=()=>{V(null)},z=!!N;return d.createElement(d.Fragment,null,d.createElement(m.A,{"aria-label":"breadcrumb",..._},L.length>1&&d.createElement(T,{clone:!0},O),L.length>2&&d.createElement(T,{clone:!0},W),Q&&d.createElement(P,{onClick:J},"..."),d.createElement(D,null,w)),d.createElement(v.Ay,{open:z,anchorEl:N,onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},d.createElement(g.A,null,I.map((q,te)=>d.createElement(p.A,{key:te,button:!0},d.createElement(T,{clone:!0},q))))))}var M=e(7496);const b=(0,A.A)(F=>({header:{gridArea:"pageHeader",padding:F.spacing(3),width:"100%",boxShadow:F.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:F.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[F.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:F.page.fontColor,wordBreak:"break-word",fontSize:F.typography.h3.fontSize,marginBottom:0},subtitle:{color:F.page.fontColor,opacity:.8,display:"inline-block",marginTop:F.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:F.spacing(1),color:F.page.fontColor},breadcrumb:{color:F.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-F.spacing(.3),marginBottom:F.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-F.spacing(.3),marginBottom:F.spacing(.3)}}),{name:"BackstageHeader"}),i=({type:F,typeLink:Z,classes:_,pageTitle:N})=>F?Z?d.createElement(B,{className:_.breadcrumb},d.createElement(s.N_,{to:Z},F),d.createElement(h.A,null,N)):d.createElement(h.A,{className:_.type},F):null,j=({pageTitle:F,classes:Z,tooltip:_})=>{const{contentRef:N}=(0,M.H)(),V=d.createElement(h.A,{ref:N,tabIndex:-1,className:Z.title,variant:"h1"},F);return _?d.createElement(c.Ay,{title:_,placement:"top-start"},V):V},U=({classes:F,subtitle:Z})=>Z?typeof Z!="string"?d.createElement(d.Fragment,null,Z):d.createElement(h.A,{className:F.subtitle,variant:"subtitle2",component:"span"},Z):null;function G(F){const{children:Z,pageTitleOverride:_,style:N,subtitle:V,title:L,tooltip:O,type:W,typeLink:I}=F,w=b(),J=(0,t.gf)(l.U).getOptionalString("app.title")||"Backstage",Y=_||L,z=L||_,q=`${Y} | %s | ${J}`,te=`${Y} | ${J}`;return d.createElement(d.Fragment,null,d.createElement(r.m,{titleTemplate:q,defaultTitle:te}),d.createElement("header",{style:N,className:w.header},d.createElement(u.A,{className:w.leftItemsBox},d.createElement(i,{classes:w,type:W,typeLink:I,pageTitle:z}),d.createElement(j,{classes:w,pageTitle:z,tooltip:O}),d.createElement(U,{classes:w,subtitle:V})),d.createElement(a.A,{container:!0,className:w.rightItemsBox,spacing:4},Z)))}},64398:(K,y,e)=>{e.d(y,{S:()=>r});var t=e(42899),l=e(58837),u=e(268),a=e(72501),A=e(14041),c=e(75202);const h=(0,l.A)(s=>({root:{textAlign:"left"},label:{color:s.page.fontColor,fontWeight:s.typography.fontWeightBold,letterSpacing:0,fontSize:s.typography.fontSize,marginBottom:s.spacing(1)/2,lineHeight:1},value:{color:(0,u.X4)(s.page.fontColor,.8),fontSize:s.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),d=({value:s,className:m,typographyRootComponent:g})=>A.createElement(a.A,{component:g!=null?g:typeof s=="string"?"p":"span",className:m},s);function r(s){const{label:m,value:g,url:p,contentTypograpyRootComponent:v}=s,R=h(),P=A.createElement(d,{className:R.value,value:g||"<Unknown>",typographyRootComponent:v});return A.createElement(t.A,{item:!0},A.createElement(a.A,{component:"span",className:R.root},A.createElement(a.A,{className:R.label},m),p?A.createElement(c.N_,{to:p},P):P))}},44390:(K,y,e)=>{e.d(y,{o:()=>d});var t=e(77125),l=e(58837),u=e(38605),a=e(31653),A=e(14041),c=e(75202);const h=(0,l.A)(r=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:r.palette.background.paper,paddingLeft:r.spacing(3),minWidth:0},defaultTab:{...r.typography.caption,padding:r.spacing(3,3),textTransform:"uppercase",fontWeight:r.typography.fontWeightBold,color:r.palette.text.secondary},selected:{color:r.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:r.palette.background.default,color:r.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function d(r){const{tabs:s,onChange:m,selectedIndex:g}=r,[p,v]=(0,A.useState)(g!=null?g:0),R=h(),P=(0,A.useCallback)((D,B)=>{g===void 0&&v(B),m&&m(B)},[g,m]);(0,A.useEffect)(()=>{g!==void 0&&v(g)},[g]);function T(D){return D.replace(/^\//,"")}return A.createElement(t.A,{className:R.tabsWrapper},A.createElement(a.A,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:P,value:p},s.map((D,B)=>A.createElement(u.A,{"data-testid":`header-tab-${B}`,label:D.label,key:D.id,component:c.N_,to:T(D.id),value:B,className:R.defaultTab,classes:{selected:R.selected,root:R.tabRoot},...D.tabProps}))))}},21332:(K,y,e)=>{e.d(y,{n:()=>P});var t=e(40703),l=e(59469),u=e(48653),a=e(45685),A=e(37197),c=e(58837),h=e(7031),d=e(53373),r=e.n(d),s=e(14041),m=e(25646),g=e(66670);const p=(0,c.A)(T=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},contentAlignBottom:{display:"flex",alignItems:"self-end"},header:{padding:T.spacing(2,2,2,2.5)},headerTitle:{fontWeight:T.typography.fontWeightBold},headerSubheader:{paddingTop:T.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),v=(0,h.A)(T=>({root:{display:"inline-block",padding:T.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(l.A),R={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function P(T){const{title:D,subheader:B,divider:M=!0,deepLink:b,slackChannel:i,errorBoundaryProps:j,variant:U,alignContent:G="normal",children:F,headerStyle:Z,headerProps:_,icon:N,action:V,actionsClassName:L,actions:O,cardClassName:W,actionsTopRight:I,className:w,noPadding:Q,titleTypographyProps:J,subheaderTypographyProps:Y}=T,z=p();let q={},te={};U&&U.split(/[\s]+/g).forEach(me=>{q={...q,...R.card[me]},te={...te,...R.cardContent[me]}});const se=()=>!B&&!N?null:s.createElement("div",{"data-testid":"info-card-subheader"},B&&s.createElement("div",{className:z.subheader},B),N),ne=j||(i?{slackChannel:i}:{});return s.createElement(t.A,{style:q,className:w},s.createElement(g.t,{...ne},D&&s.createElement(a.A,{classes:{root:r()(z.header),title:z.headerTitle,subheader:z.headerSubheader,avatar:z.headerAvatar,action:z.headerAction,content:z.headerContent},title:D,subheader:se(),action:V,style:{...Z},titleTypographyProps:J,subheaderTypographyProps:Y,..._}),I&&s.createElement(v,null,I),M&&s.createElement(A.A,null),s.createElement(u.A,{className:r()(W,{[z.noPadding]:Q,[z.contentAlignBottom]:G==="bottom"}),style:te},F),O&&s.createElement(l.A,{className:L},O),b&&s.createElement(m.O,{...b})))}},82326:(K,y,e)=>{e.d(y,{Y:()=>A});var t=e(14041),l=e(58837),u=e(50868);const a=(0,l.A)(c=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[c.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function A(c){const{themeId:h,children:d}=c,r=a();return t.createElement(u.A,{theme:s=>({...s,page:s.getPageTheme({themeId:h})})},t.createElement("main",{className:r.root},d))}},39649:(K,y,e)=>{e.d(y,{B:()=>O});var t=e(77125),l=e(64947),u=e(58837),a=e(5893),A=e(53373),c=e.n(A),h=e(14041),d=e(31072),r=e(77026),s=e(1125),m=e(29365),g=e(73845),p=e(72501),v=e(32881),R=e(27326),P=e(45250),T=e(18690),D=e(77366),B=e(58269),M=e(88835);const b=(0,u.A)(I=>({root:{position:"fixed",backgroundColor:I.palette.navigation.background,color:I.palette.navigation.color,bottom:0,left:0,right:0,zIndex:I.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:w=>({background:I.palette.navigation.background,width:"100%",bottom:`${w.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${w.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:I.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:I.spacing(2,3)},overlayHeaderClose:{color:I.palette.navigation.color},marginMobileSidebar:w=>({marginBottom:`${w.sidebarConfig.mobileSidebarHeight}px`})})),i=I=>(0,P.orderBy)(I,({props:{priority:w}})=>Number.isInteger(w)?w:-1,"desc"),j=h.createElement(B.C).type,U=({children:I,label:w="Menu",open:Q,onClose:J})=>{const{sidebarConfig:Y}=(0,h.useContext)(d.yY),z=b({sidebarConfig:Y});return h.createElement(g.Ay,{anchor:"bottom",open:Q,onClose:J,ModalProps:{BackdropProps:{classes:{root:z.marginMobileSidebar}}},classes:{root:z.marginMobileSidebar,paperAnchorBottom:z.overlay}},h.createElement(t.A,{className:z.overlayHeader},h.createElement(p.A,{variant:"h3"},w),h.createElement(m.A,{onClick:J,classes:{root:z.overlayHeaderClose}},h.createElement(v.A,null))),h.createElement(t.A,{component:"nav"},I))},G=I=>{const{sidebarConfig:w}=(0,h.useContext)(d.yY),{children:Q}=I,J=b({sidebarConfig:w}),Y=(0,T.zy)(),[z,q]=(0,h.useState)(-1);(0,h.useEffect)(()=>{q(-1)},[Y.pathname]);let te=(0,r.O)(Q,ne=>ne.getElements().filter(oe=>oe.type===j));if(Q)te.length?te=i(te):te.push(h.createElement(B.C,{key:"default_menu",icon:h.createElement(R.A,null)},Q));else return null;const se=z>=0&&!te[z].props.to;return h.createElement(D.T9,{value:{isOpen:!0,setOpen:()=>{}}},h.createElement(M.k.Provider,{value:{selectedMenuItemIndex:z,setSelectedMenuItemIndex:q}},h.createElement(U,{label:te[z]&&te[z].props.label,open:se,onClose:()=>q(-1)},te[z]&&te[z].props.children),h.createElement(s.A,{className:J.root,"data-testid":"mobile-sidebar-root",component:"nav"},te)))};var F=e(7496),Z=e(65901),_=e(10265),N=e(89475);const V=(0,u.A)(I=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:I.zIndex.appBar,background:I.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:I.transitions.create("width",{easing:I.transitions.easing.sharp,duration:I.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:w=>({width:w.sidebarConfig.drawerWidthClosed}),drawerOpen:w=>({width:w.sidebarConfig.drawerWidthOpen,transition:I.transitions.create("width",{easing:I.transitions.easing.sharp,duration:I.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),L=I=>{const{sidebarConfig:w}=(0,h.useContext)(d.yY),{openDelayMs:Q=w.defaultOpenDelayMs,closeDelayMs:J=w.defaultCloseDelayMs,disableExpandOnHover:Y,children:z}=I,q=V({sidebarConfig:w}),te=(0,a.A)(Te=>Te.breakpoints.down("md"),{noSsr:!0}),[se,ne]=(0,h.useState)(0),oe=(0,h.useRef)(),{isPinned:me,toggleSidebarPinState:Se}=(0,Z.Ut)(),be=()=>{me||Y||(oe.current&&(clearTimeout(oe.current),oe.current=void 0),se!==2&&!te&&(oe.current=window.setTimeout(()=>{oe.current=void 0,ne(2)},Q),ne(1)))},Be=()=>{me||Y||(oe.current&&(clearTimeout(oe.current),oe.current=void 0),se===1?ne(0):se===2&&(oe.current=window.setTimeout(()=>{oe.current=void 0,ne(0)},J)))},Je=se===2&&!te||me,Qe=Te=>{Te?(ne(2),Se()):(ne(0),Se())};return h.createElement("nav",{style:{},"aria-label":"sidebar nav"},h.createElement(W,null),h.createElement(D.T9,{value:{isOpen:Je,setOpen:Qe}},h.createElement(t.A,{className:q.root,"data-testid":"sidebar-root",onMouseEnter:Y?()=>{}:be,onFocus:Y?()=>{}:be,onMouseLeave:Y?()=>{}:Be,onBlur:Y?()=>{}:Be},h.createElement(t.A,{className:c()(q.drawer,q.drawerWidth,{[q.drawerOpen]:Je})},z))))},O=I=>{var se,ne;const w=(0,d.Rv)((se=I.sidebarOptions)!=null?se:{}),Q=(0,d.i8)((ne=I.submenuOptions)!=null?ne:{}),{children:J,disableExpandOnHover:Y,openDelayMs:z,closeDelayMs:q}=I,{isMobile:te}=(0,Z.Ut)();return te?h.createElement(G,null,J):h.createElement(d.yY.Provider,{value:{sidebarConfig:w,submenuConfig:Q}},h.createElement(L,{openDelayMs:z,closeDelayMs:q,disableExpandOnHover:Y},J))};function W(){const{sidebarConfig:I}=(0,h.useContext)(d.yY),{focusContent:w,contentRef:Q}=(0,F.H)(),J=V({sidebarConfig:I}),{t:Y}=(0,_.i)(N.O);return Q!=null&&Q.current?h.createElement(l.A,{onClick:w,variant:"contained",className:c()(J.visuallyHidden)},Y("skipToContent")):null}},7370:(K,y,e)=>{e.d(y,{Ds:()=>W,Mj:()=>w,tW:()=>J,uk:()=>L});var t=e(77026),l=e(52262),u=e(94509),a=e(77125),A=e(58837),c=e(60882),h=e(72501),d=e(5893),r=e(79065),s=e(55704),m=e(62248),g=e(53373),p=e.n(g),v=e(14041),R=e(21613),P=e(18690),T=e(73657),D=e(31072),B=e(77366),M=e(76059),b=e(82775),i=e(64947);const j=z=>(0,A.A)(q=>{var te,se,ne,oe;return{root:{color:q.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:z.drawerWidthClosed,justifyContent:"center"},open:{[q.breakpoints.up("sm")]:{width:z.drawerWidthOpen}},highlightable:{"&:hover":{background:(se=(te=q.palette.navigation.navItem)==null?void 0:te.hoverBackground)!=null?se:"#404040"}},highlighted:{background:(oe=(ne=q.palette.navigation.navItem)==null?void 0:ne.hoverBackground)!=null?oe:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:z.iconContainerWidth,marginRight:-q.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:q.typography.fontWeightBold,fontSize:q.typography.fontSize},searchFieldHTMLInput:{padding:q.spacing(2,0,2)},searchContainer:{width:z.drawerWidthOpen-z.iconContainerWidth},secondaryAction:{width:q.spacing(6),textAlign:"center",marginRight:q.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:q.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${z.selectedIndicatorWidth}px ${q.palette.navigation.indicator}`,color:q.palette.navigation.selectedColor},"&$closed":{width:z.drawerWidthClosed},"& $closedItemIcon":{paddingRight:z.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-z.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function U(z){return(0,v.useMemo)(()=>j(z),[z])()}const G=(z,q)=>(0,t.O)(z.props.children,te=>{let se=!1;return te.getElements().forEach(({props:{to:ne,dropdownItems:oe}})=>{if(!se){if(oe!=null&&oe.length){oe.forEach(({to:me})=>se=se||(0,b.z)(q,(0,R.o1)(me)));return}ne&&(se=(0,b.z)(q,(0,R.o1)(ne)))}}),se},[q.pathname]);function F(z){return z.to===void 0}const Z=v.createElement(M.O).type,_=v.forwardRef(function({to:q,end:te,style:se,className:ne,activeStyle:oe,caseSensitive:me,activeClassName:Se="active","aria-current":be="page",...Be},Je){let{pathname:Qe}=(0,P.zy)(),{pathname:Te}=(0,P.x$)(q);me||(Qe=Qe.toLocaleLowerCase("en-US"),Te=Te.toLocaleLowerCase("en-US"));let Ie=Qe===Te;!Ie&&!te&&(Ie=Qe.startsWith(`${Te}/`));const Me=Ie?be:void 0;return v.createElement(T.N_,{...Be,to:q,ref:Je,"aria-current":Me,style:{...se,...Ie?oe:void 0},className:p()([typeof ne!="function"?ne:void 0,Ie?Se:void 0])})}),N=(0,v.forwardRef)((z,q)=>{const{icon:te,text:se,hasNotifications:ne=!1,hasSubmenu:oe=!1,disableHighlight:me=!1,onClick:Se,noTrack:be,children:Be,className:Je,...Qe}=z,{sidebarConfig:Te}=(0,v.useContext)(D.yY),Ie=U(Te),{isOpen:Me}=(0,B.FS)(),He=!Me&&oe?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Ye=v.createElement(a.A,{style:He},v.createElement(te,{fontSize:"small"}),!Me&&oe?v.createElement(m.A,{fontSize:"small"}):v.createElement(v.Fragment,null)),lt=v.createElement(u.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!ne,className:p()({[Ie.closedItemIcon]:!Me})},Ye),Et=v.createElement(v.Fragment,null,v.createElement(a.A,{"data-testid":"login-button",className:Ie.iconContainer},lt),se&&v.createElement(h.A,{variant:"subtitle2",component:"span",className:Ie.label},se),v.createElement("div",{className:Ie.secondaryAction},Be)),We=Me?Et:lt,ze={onClick:Se,className:p()(Je,Ie.root,Me?Ie.open:Ie.closed,F(z)&&Ie.buttonItem,{[Ie.highlightable]:!me})},we=(0,l.s)(),{pathname:ce}=(0,P.x$)(!F(z)&&z.to?z.to:""),Ae=(0,v.useCallback)(Re=>{if(!be){const Ne="click",ht=se!=null?se:"Sidebar Item",Ot=ce?{attributes:{to:ce}}:void 0;we.captureEvent(Ne,ht,Ot)}Se==null||Se(Re)},[we,se,ce,be,Se]);return F(z)?v.createElement(i.A,{role:"button","aria-label":se,...ze,ref:q,onClick:Ae},We):v.createElement(_,{...ze,activeClassName:Ie.selected,to:z.to?z.to:"",ref:q,"aria-label":se||z.to,...Qe,onClick:Ae},We)}),V=({children:z,...q})=>{const{sidebarConfig:te}=(0,v.useContext)(D.yY),se=U(te),[ne,oe]=(0,v.useState)(!1),me=(0,P.zy)(),Se=G(z,me),be=(0,d.A)(Te=>Te.breakpoints.down("sm")),Be=()=>{oe(!0)},Je=()=>{oe(!1)},Qe=()=>be?ne?v.createElement(s.A,{fontSize:"small",className:se.submenuArrow}):v.createElement(r.A,{fontSize:"small",className:se.submenuArrow}):!ne&&v.createElement(m.A,{fontSize:"small",className:se.submenuArrow});return v.createElement(D.U1.Provider,{value:{isHoveredOn:ne,setIsHoveredOn:oe}},v.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:Je,onTouchStart:ne?Je:Be,onMouseEnter:Be,className:p()(ne&&se.highlighted)},v.createElement(N,{hasSubmenu:!0,className:Se?se.selected:"",...q},Qe()),ne&&z))},L=(0,v.forwardRef)((z,q)=>{const[te]=(0,t.O)(z.children,se=>se.getElements().filter(ne=>ne.type===Z));return te?v.createElement(V,{...z},te):v.createElement(N,{...z,ref:q})});function O(z){const{sidebarConfig:q}=useContext(SidebarConfigContext),[te,se]=useState(""),ne=U(q),oe=z.icon?z.icon:SearchIcon,me=()=>{z.onSearch(te),se("")},Se=Qe=>{Qe.key==="Enter"&&(Qe.preventDefault(),me())},be=Qe=>{se(Qe.target.value)},Be=Qe=>{Qe.preventDefault(),Qe.stopPropagation()},Je=Qe=>{me(),Qe.preventDefault()};return React__default.createElement(Box,{className:ne.searchRoot},React__default.createElement(L,{icon:oe,to:z.to,onClick:Je,disableHighlight:!0},React__default.createElement(TextField,{placeholder:"Search",value:te,onClick:Be,onChange:be,onKeyDown:Se,className:ne.searchContainer,InputProps:{disableUnderline:!0,className:ne.searchField},inputProps:{className:ne.searchFieldHTMLInput}})))}const W=(0,c.A)("div")({flex:1},{name:"BackstageSidebarSpace"}),I=(0,c.A)("div")({height:8},{name:"BackstageSidebarSpacer"}),w=(0,c.A)("hr")(({theme:z})=>({height:1,width:"100%",background:"#383838",border:"none",margin:z.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),Q=z=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:z.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:z.palette.text.secondary,borderRadius:"5px"}}),J=(0,c.A)("div")(({theme:z})=>{const q=Q(z);return{flex:"0 1 auto",overflowX:"hidden",width:"100%",minHeight:"48px",overflowY:"hidden","@media (hover: none)":q,"&:hover":q}}),Y=()=>{const{sidebarConfig:z}=useContext(SidebarConfigContext),q=U(z),{isOpen:te,setOpen:se}=useSidebarOpenState();if(useMediaQuery(me=>me.breakpoints.down("md"),{noSsr:!0}))return null;const oe=()=>{se(!te)};return React__default.createElement(Button,{role:"button",onClick:oe,className:q.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React__default.createElement(Box,{className:q.arrows},te?React__default.createElement(DoubleArrowLeft,null):React__default.createElement(DoubleArrowRight,null)))}},88835:(K,y,e)=>{e.d(y,{k:()=>l});var t=e(14041);const l=(0,t.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}})},7496:(K,y,e)=>{e.d(y,{G:()=>s,H:()=>m});var t=e(77125),l=e(58837),u=e(5893),a=e(14041),A=e(31072);const c={getSidebarPinState(){let g;try{g=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!g},setSidebarPinState(g){return window.localStorage.setItem("sidebarPinState",JSON.stringify(g))}};var h=e(65901);const d=(0,l.A)(g=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[g.breakpoints.up("sm")]:{paddingLeft:p=>p.isPinned?p.sidebarConfig.drawerWidthOpen:p.sidebarConfig.drawerWidthClosed},[g.breakpoints.down("xs")]:{paddingBottom:p=>p.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),r=(0,a.createContext)({content:{contentRef:void 0}});function s(g){const[p,v]=(0,a.useState)(()=>c.getSidebarPinState()),{sidebarConfig:R}=(0,a.useContext)(A.yY),P=(0,a.useRef)(null),T=(0,a.useMemo)(()=>({content:{contentRef:P}}),[P]);(0,a.useEffect)(()=>{c.setSidebarPinState(p)},[p]);const D=(0,u.A)(b=>b.breakpoints.down("xs"),{noSsr:!0}),B=()=>v(!p),M=d({isPinned:p,sidebarConfig:R});return a.createElement(h.qj,{value:{isPinned:p,toggleSidebarPinState:B,isMobile:D}},a.createElement(r.Provider,{value:T},a.createElement(t.A,{className:M.root},g.children)))}function m(){const{content:g}=(0,a.useContext)(r);return{focusContent:(0,a.useCallback)(()=>{var v,R;(R=(v=g==null?void 0:g.contentRef)==null?void 0:v.current)==null||R.focus()},[g]),contentRef:g==null?void 0:g.contentRef}}},58269:(K,y,e)=>{e.d(y,{C:()=>m});var t=e(13085),l=e(58837),u=e(14041),a=e(18690),A=e(75202),c=e(31072),h=e(88835),d=e(65901);const r=(0,l.A)(g=>({root:{flexGrow:0,margin:g.spacing(0,2),color:g.palette.navigation.color},selected:p=>({color:`${g.palette.navigation.selectedColor}!important`,borderTop:`solid ${p.sidebarConfig.selectedIndicatorWidth}px ${g.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),s=g=>{const{to:p,label:v,icon:R,value:P}=g,{sidebarConfig:T}=(0,u.useContext)(c.yY),D=r({sidebarConfig:T}),B=(0,a.zy)(),{selectedMenuItemIndex:M,setSelectedMenuItemIndex:b}=(0,u.useContext)(h.k),i=(U,G)=>{b(G===M?-1:G)},j=P===M&&M>=0||P!==M&&!(M>=0)&&p===B.pathname;return u.createElement(t.A,{"aria-label":v,label:v,icon:R,component:A.N_,to:p||B.pathname,onChange:i,value:P,selected:j,classes:D})},m=g=>{const{children:p,to:v,label:R,icon:P,value:T}=g,{isMobile:D}=(0,d.Ut)();return D?u.createElement(s,{to:v,label:R,icon:P,value:T}):u.createElement(u.Fragment,null,p)}},77366:(K,y,e)=>{e.d(y,{FS:()=>h,T9:()=>c});var t=e(14041),l=e(97388);const u={isOpen:!1,setOpen:()=>{}},a=(0,t.createContext)(u),A=(0,l.tK)("sidebar-open-state-context");function c(d){const{children:r,value:s}=d;return t.createElement(a.Provider,{value:s},t.createElement(A.Provider,{value:(0,l.Bl)({1:s})},r))}const h=()=>{const d=(0,t.useContext)(A),r=(0,t.useContext)(a);if(d===void 0)return r||u;const s=d.atVersion(1);if(s===void 0)throw new Error("No context found for version 1.");return s}},65901:(K,y,e)=>{e.d(y,{Ut:()=>h,qj:()=>c});var t=e(97388),l=e(14041);const u={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},a=(0,l.createContext)(u),A=(0,t.tK)("sidebar-pin-state-context");function c(d){const{children:r,value:s}=d;return l.createElement(a.Provider,{value:s},l.createElement(A.Provider,{value:(0,t.Bl)({1:s})},r))}const h=()=>{const d=(0,l.useContext)(A),r=(0,l.useContext)(a);if(d===void 0)return r||u;const s=d.atVersion(1);if(s===void 0)throw new Error("No context found for version 1.");return s}},76059:(K,y,e)=>{e.d(y,{O:()=>s});var t=e(77125),l=e(58837),u=e(72501),a=e(53373),A=e.n(a),c=e(14041),h=e(31072),d=e(77366);const r=(0,l.A)(m=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:m.spacing(7)+1},drawer:g=>{var p,v;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[m.breakpoints.up("sm")]:{marginLeft:g.left,transition:m.transitions.create("margin-left",{easing:m.transitions.easing.sharp,duration:m.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(v=(p=m.palette.navigation.submenu)==null?void 0:p.background)!=null?v:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:g.submenuConfig.drawerWidthClosed,transitionDelay:`${g.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:g=>({width:g.submenuConfig.drawerWidthOpen,[m.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:m.spacing(3),left:0,top:0}}),title:{fontSize:m.typography.h5.fontSize,fontWeight:m.typography.fontWeightMedium,color:m.palette.navigation.color,padding:m.spacing(2.5),[m.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),s=m=>{const{isOpen:g}=(0,d.FS)(),{sidebarConfig:p,submenuConfig:v}=(0,c.useContext)(h.yY),R=g?p.drawerWidthOpen:p.drawerWidthClosed,P=r({left:R,submenuConfig:v}),{isHoveredOn:T}=(0,c.useContext)(h.U1),[D,B]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{B(T)},[T]),c.createElement(t.A,{className:A()(P.drawer,{[P.drawerOpen]:D})},c.createElement(u.A,{variant:"h5",component:"span",className:P.title},m.title),m.children)}},31072:(K,y,e)=>{e.d(y,{Rv:()=>c,U1:()=>m,hC:()=>A,i8:()=>d,yY:()=>s});var t=e(14041);const l=72,u=24,a=18,A={drawerWidthClosed:l,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:l,iconSize:l-u*2,iconPadding:u,selectedIndicatorWidth:3,userBadgePadding:a,userBadgeDiameter:l-a*2,mobileSidebarHeight:56},c=g=>({...A,...g,iconContainerWidth:A.drawerWidthClosed,iconSize:A.drawerWidthClosed-A.iconPadding*2,userBadgeDiameter:A.drawerWidthClosed-A.userBadgePadding*2}),h={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:A.defaultOpenDelayMs+200},d=g=>({...h,...g}),r="@backstage/core/sidebar-intro-dismissed",s=(0,t.createContext)({sidebarConfig:A,submenuConfig:h}),m=(0,t.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}})},82775:(K,y,e)=>{e.d(y,{z:()=>A});var t=e(45250),l=e.n(t),u=e(45810),a=e.n(u);function A(c,h,d=!1){const r=new URLSearchParams(h.search).toString(),s=a().parse(r),m=new URLSearchParams(c.search).toString(),g=a().parse(m),p=d?t.isEqual:t.isMatch;return(0,t.isEqual)(h.pathname,c.pathname)&&p(g,s)}},89534:(K,y,e)=>{e.d(y,{q4:()=>ze});var t=e(18139),l=e(54195);class u{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const ce="user:default/guest";return{type:"user",userEntityRef:ce,ownershipEntityRefs:[ce]}}async getCredentials(){return{}}async signOut(){}}function a(we){const[ce,Ae,Re]=we.split(".");return JSON.parse(window.atob(Ae))}class A{constructor(ce){this.result=ce}getUserId(){return this.result.userId}static fromResult(ce){return new A(ce)}async getIdToken(){var ce,Ae;return(Ae=(ce=this.result).getIdToken)==null?void 0:Ae.call(ce)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const ce=await this.getIdToken();if(!ce){const Ne=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:Ne,ownershipEntityRefs:[Ne]}}const{sub:Ae,ent:Re}=a(ce);return{type:"user",userEntityRef:Ae,ownershipEntityRefs:Re!=null?Re:[]}}async getCredentials(){var Ae,Re;return{token:await((Re=(Ae=this.result).getIdToken)==null?void 0:Re.call(Ae))}}async signOut(){var ce,Ae;return(Ae=(ce=this.result).signOut)==null?void 0:Ae.call(ce)}}class c{constructor(ce,Ae,Re){ue(this,"profilePromise");this.identity=ce,this.authApi=Ae,this.profile=Re}static createGuest(){return new u}static fromLegacy(ce){return A.fromResult(ce)}static create(ce){return new c(ce.identity,ce.authApi,ce.profile)}getUserId(){const ce=this.identity.userEntityRef,Ae=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(ce);if(!Ae)throw new TypeError(`Invalid user entity reference "${ce}"`);return Ae[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(ce){throw this.profilePromise=void 0,ce}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}var h=e(64947),d=e(42899),r=e(72501),s=e(14041),m=e(76842),g=e(96872),p=e(16454),v=e(17138),R=e(16654),P=e(21332),T=e(82326),D=e(24453),B=e(58837);const M=(0,B.A)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),b=({children:we})=>{const ce=M();return s.createElement(d.A,{component:"li",item:!0,classes:ce},we)};var i=e(3399),j=e(89475),U=e(10265);const Z={Component:({config:we,onSignInStarted:ce,onSignInSuccess:Ae,onSignInFailure:Re})=>{const{apiRef:Ne,title:ht,message:Ot}=we,ct=(0,t.gf)(Ne),ut=(0,t.gf)(D.m),{t:it}=(0,U.i)(j.O),Ce=async()=>{try{ce();const Pe=await ct.getBackstageIdentity({instantPopup:!0});if(!Pe)throw Re(),new Error(`The ${ht} provider is not configured to support sign-in`);const Ge=await ct.getProfile();Ae(c.create({identity:Pe.identity,profile:Ge,authApi:ct}))}catch(Pe){Re(),ut.post(new i.HK(it("signIn.loginFailed"),Pe))}};return s.createElement(b,null,s.createElement(P.n,{variant:"fullHeight",title:ht,actions:s.createElement(h.A,{color:"primary",variant:"outlined",onClick:Ce},it("signIn.title"))},s.createElement(r.A,{variant:"body1"},Ot)))},loader:async(we,ce)=>{const Ae=we.get(ce),Re=await Ae.getBackstageIdentity({optional:!0});if(!Re)return;const Ne=await Ae.getProfile();return c.create({identity:Re.identity,profile:Ne,authApi:Ae})}};var _=e(46195);const N=_.z.object({providerInfo:_.z.object({}).catchall(_.z.unknown()).optional(),profile:_.z.object({email:_.z.string().optional(),displayName:_.z.string().optional(),picture:_.z.string().optional()}),backstageIdentity:_.z.object({token:_.z.string(),identity:_.z.object({type:_.z.literal("user"),userEntityRef:_.z.string(),ownershipEntityRefs:_.z.array(_.z.string())})})}),V={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function L(we){const ce=new Date(Date.now()+V.defaultTokenExpiryMillis);if(!we)return ce;const[Ae,Re,Ne]=we.split("."),ht=JSON.parse(window.atob(Re));return typeof ht.exp!="number"?ce:new Date(ht.exp*1e3-V.tokenExpiryMarginMillis)}class O{constructor(ce){ue(this,"options");ue(this,"abortController");ue(this,"state");this.options=ce,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:ce}=this.getSessionSync(),Ae=ce.identity.userEntityRef,Re=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(Ae);if(!Re)throw new TypeError(`Invalid user entity reference "${Ae}"`);return Re[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const ce=this.state.type==="active"?this.state.session:void 0,Ae=this.fetchSession().then(Re=>(this.state={type:"active",session:Re,expiresAt:L(Re.backstageIdentity.token)},Re),Re=>{throw this.state={type:"failed",error:Re},Re});return this.state={type:"fetching",promise:Ae,previous:ce},Ae}async fetchSession(){const ce=await this.options.discoveryApi.getBaseUrl("auth"),Ae=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,Re=new Headers(Ae);Re.set("X-Requested-With","XMLHttpRequest");const Ne=await fetch(`${ce}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:Re,credentials:"include"});if(!Ne.ok)throw await i.o3.fromResponse(Ne);return N.parse(await Ne.json())}}var W=e(61617),I=e(48472);const w=async we=>{try{return await we.getBackstageIdentity()}catch(ce){if(ce.name==="ResponseError"&&ce.cause.name==="NotFoundError")return;throw ce}},Y={Component:({onSignInStarted:we,onSignInSuccess:ce,onSignInFailure:Ae})=>{const Re=(0,t.gf)(W.I),[Ne,ht]=(0,I.A)("enableLegacyGuestToken"),{t:Ot}=(0,U.i)(j.O),ct=async()=>{we();const ut=new O({provider:"guest",discoveryApi:Re});if(!await w(ut).catch(Ce=>{console.warn(`Failed to sign in as a guest, ${Ce}`)})){if(confirm("Failed to sign in as a guest using the auth backend. Do you want to fallback to the legacy guest token?")){ht(!0),ce(new u);return}throw Ae(),new Error("You cannot sign in as a guest, you must either enable the legacy guest token or configure the auth backend to support guest sign in.")}ce(ut)};return s.createElement(b,null,s.createElement(P.n,{title:"Guest",variant:"fullHeight",actions:s.createElement(h.A,{color:"primary",variant:"outlined",onClick:ct},Ot("signIn.guestProvider.enter"))},s.createElement(r.A,{variant:"body1",style:{whiteSpace:"pre-line"}},Ot("signIn.guestProvider.subtitle"))))},loader:async we=>{const ce=localStorage.getItem("enableLegacyGuestToken")==="true",Ae=new O({provider:"guest",discoveryApi:we.get(W.I)}),Re=await w(Ae).catch(Ne=>{console.warn(`Failed to sign in as a guest, ${Ne}`)});if(!(!Re&&!ce)){if(Re&&ce)if(confirm("You are currently using the legacy guest token, but you have the new guest backend module installed. Do you want to use the new module?"))localStorage.removeItem("enableLegacyGuestToken");else return new u;else if(ce)return new u;return Ae}}};var z=e(80824),q=e(95061),te=e(16249),se=e(51253),ne=e(3514),oe=e.n(ne);const me=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Se=(0,B.A)(we=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:we.spacing(2)},subTitle:{whiteSpace:"pre-line"}}),{name:"BackstageCustomProvider"}),be=we=>{const{ref:ce,...Ae}=we;return{inputRef:ce,...Ae}},Qe={Component:({onSignInStarted:we,onSignInSuccess:ce})=>{const Ae=Se(),{t:Re}=(0,U.i)(j.O),{register:Ne,handleSubmit:ht,formState:Ot}=(0,z.mN)({mode:"onChange"}),{errors:ct}=Ot,ut=({userId:it,idToken:Ce})=>{we(),ce(c.fromLegacy({userId:it,getIdToken:Ce!==void 0?async()=>Ce:void 0,profile:{email:`${it}@example.com`}}))};return s.createElement(b,null,s.createElement(P.n,{title:Re("signIn.customProvider.title"),variant:"fullHeight"},s.createElement(r.A,{variant:"body1",className:Ae.subTitle},Re("signIn.customProvider.subtitle")),s.createElement("form",{className:Ae.form,onSubmit:ht(ut)},s.createElement(q.A,null,s.createElement(te.A,{...be(Ne("userId",{required:!0})),label:Re("signIn.customProvider.userId"),margin:"normal",error:!!ct.userId}),ct.userId&&s.createElement(se.A,{error:!0},ct.userId.message)),s.createElement(q.A,null,s.createElement(te.A,{...be(Ne("idToken",{required:!1,validate:it=>!it||me.test(it)||Re("signIn.customProvider.tokenInvalid")})),label:Re("signIn.customProvider.idToken"),margin:"normal",autoComplete:"off",error:!!ct.idToken}),ct.idToken&&s.createElement(se.A,{error:!0},ct.idToken.message)),s.createElement(h.A,{type:"submit",color:"primary",variant:"outlined",className:Ae.button,disabled:!(Ot!=null&&Ot.isDirty)||!oe()(ct)},Re("signIn.customProvider.continue")))))},loader:async()=>{}};class Te{constructor(ce){this.config=ce}static from(ce){return new Te(ce)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const Ie="@backstage/core:SignInPage:provider",Me={guest:Y,custom:Qe,common:Z};function He(we,ce){if(we in ce)throw new Error(`"${we}" ID is duplicated. IDs of identity providers have to be unique.`)}function Ye(we){return we.reduce((Ae,Re)=>{if(typeof Re=="string")return He(Re,Ae),Ae[Re]={components:Me[Re],id:Re},Ae;const{id:Ne}=Re;return He(Ne,Ae),Ae[Ne]={components:Me.common,id:Ne,config:Re},Ae},{})}const lt=(we,ce)=>{const Ae=(0,t.gf)(D.m),Re=(0,t.Q2)(),[Ne,ht]=(0,s.useState)(!0),Ot=(0,s.useCallback)(ut=>{ce(Te.from({identityApi:ut,signOut:async()=>{var it;localStorage.removeItem(Ie),await((it=ut.signOut)==null?void 0:it.call(ut))}}))},[ce]);(0,s.useLayoutEffect)(()=>{var Pe;if(!Ne)return;const ut=localStorage.getItem(Ie);if(ut===null){ht(!1);return}const it=we[ut];if(!it){ht(!1);return}let Ce=!1;return it.components.loader(Re,(Pe=it.config)==null?void 0:Pe.apiRef).then(Ge=>{if(Ce){localStorage.removeItem(Ie);return}Ge?Ot(Ge):ht(!1)}).catch(Ge=>{localStorage.removeItem(Ie),!Ce&&(Ae.post(Ge),ht(!1))}),()=>{Ce=!0}},[Ne,Ae,ce,Re,we,Ot]);const ct=(0,s.useMemo)(()=>Object.keys(we).map(ut=>{const it=we[ut],{Component:Ce}=it.components,Pe=Xe=>{Ot(Xe)},Ge=()=>{var Xe;localStorage.setItem(Ie,((Xe=it==null?void 0:it.config)==null?void 0:Xe.id)||it.id)},_e=()=>{localStorage.removeItem(Ie)};return s.createElement(Ce,{key:it.id,config:it.config,onSignInStarted:Ge,onSignInSuccess:Pe,onSignInFailure:_e})}),[we,Ot]);return[Ne,ct]},Et=({onSignInSuccess:we,providers:ce=[],title:Ae,align:Re="left"})=>{const Ne=(0,t.gf)(l.U),ht=M(),Ot=Ye(ce),[ct,ut]=lt(Ot,we);return ct?s.createElement(g.k,null):s.createElement(T.Y,{themeId:"home"},s.createElement(R.Y,{title:Ne.getString("app.title")}),s.createElement(p.U,null,Ae&&s.createElement(v.d,{title:Ae,textAlign:Re}),s.createElement(d.A,{container:!0,justifyContent:Re==="center"?Re:"flex-start",spacing:2,component:"ul",classes:ht},ut)))},We=({provider:we,auto:ce,onSignInSuccess:Ae})=>{const Re=M(),Ne=(0,t.gf)(we.apiRef),ht=(0,t.gf)(l.U),{t:Ot}=(0,U.i)(j.O),[ct,ut]=(0,s.useState)(),[it,Ce]=(0,s.useState)(!1),Pe=async({checkExisting:Ge,showPopup:_e})=>{try{let Xe;if(Ge&&(Xe=await Ne.getBackstageIdentity({optional:!0})),!Xe&&(_e||ce)&&(Ce(!0),Xe=await Ne.getBackstageIdentity({instantPopup:!0}),!Xe))throw new Error(`The ${we.title} provider is not configured to support sign-in`);if(!Xe){Ce(!0);return}const Ke=await Ne.getProfile();Ae(c.create({identity:Xe.identity,authApi:Ne,profile:Ke}))}catch(Xe){ut(Xe),Ce(!0)}};return(0,m.u)(()=>Pe({checkExisting:!0})),it?s.createElement(T.Y,{themeId:"home"},s.createElement(R.Y,{title:ht.getString("app.title")}),s.createElement(p.U,null,s.createElement(d.A,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:Re},s.createElement(b,null,s.createElement(P.n,{variant:"fullHeight",title:we.title,actions:s.createElement(h.A,{color:"primary",variant:"outlined",onClick:()=>{Pe({showPopup:!0})}},Ot("signIn.title"))},s.createElement(r.A,{variant:"body1"},we.message),ct&&ct.name!=="PopupRejectedError"&&s.createElement(r.A,{variant:"body1",color:"error"},ct.message)))))):s.createElement(g.k,null)};function ze(we){return"provider"in we?s.createElement(We,{...we}):s.createElement(Et,{...we})}},89475:(K,y,e)=>{e.d(y,{O:()=>l});var t=e(97963);const l=(0,t.h)({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:`Enter your own User ID and credentials.
 This selection will not be stored.`,userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:`Enter as a Guest User.
 You will not have a verified identity, meaning some features might be unavailable.`,enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All"},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all"}},alertDisplay:{message_one:"({{ count }} older message)",message_other:"({{ count }} older messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}})},19224:(K,y,e)=>{e.d(y,{I:()=>A,p:()=>a});var t=e(97388),l=e(14041);const u=(0,t.tK)("analytics-context"),a=()=>{const c=(0,l.useContext)(u);if(c===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const h=c.atVersion(1);if(h===void 0)throw new Error("No context found for version 1.");return h},A=c=>{const{attributes:h,children:d}=c,s={...a(),...h},m=(0,t.Bl)({1:s});return l.createElement(u.Provider,{value:m},d)}},48813:(K,y,e)=>{e.d(y,{J:()=>a,t:()=>u});var t=e(97388);const l=(0,t.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),u="_ROUTABLE-EXTENSION-RENDERED";class a{constructor(c,h={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=c,this.context=h,l.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{l.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...l.mostRecentGatheredNavigation,...l.mostRecentRoutableExtensionRender}),l.mostRecentGatheredNavigation=void 0,l.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),l.beforeUnloadRegistered=!0)}setContext(c){this.context=c}captureEvent(c,h,{value:d,attributes:r}={}){const{_routeNodeType:s,...m}=this.context;if(c===u){l.mostRecentGatheredNavigation&&(l.mostRecentRoutableExtensionRender={context:{...m,extension:"App"}});return}if(l.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...l.mostRecentGatheredNavigation,...l.mostRecentRoutableExtensionRender})}catch(g){console.warn("Error during analytics event capture. %o",g)}l.mostRecentGatheredNavigation=void 0,l.mostRecentRoutableExtensionRender=void 0}if(c==="navigate"&&s==="gathered"&&m.pluginId==="root"){l.mostRecentGatheredNavigation={action:c,subject:h,value:d,attributes:r,context:m};return}try{this.analyticsApi.captureEvent({action:c,subject:h,value:d,attributes:r,context:m})}catch(g){console.warn("Error during analytics event capture. %o",g)}}}},52262:(K,y,e)=>{e.d(y,{s:()=>h});var t=e(19224),l=e(18139),u=e(43327),a=e(14041),A=e(48813);function c(){try{return(0,l.gf)(u.c)}catch{return{captureEvent:()=>{}}}}function h(){const d=(0,a.useRef)(null),r=(0,t.p)(),s=c();function m(){return d.current===null&&(d.current=new A.J(s)),d.current}const g=m();return g.setContext(r),g}},34477:(K,y,e)=>{e.d(y,{k:()=>u});var t=e(14041),l=e(28967);const u=(0,l.y)({id:"core.alert"})},43327:(K,y,e)=>{e.d(y,{c:()=>u});var t=e(14041),l=e(28967);const u=(0,l.y)({id:"core.analytics"})},90608:(K,y,e)=>{e.d(y,{p:()=>l});var t=e(28967);const l=(0,t.y)({id:"core.applanguage"})},68541:(K,y,e)=>{e.d(y,{Q:()=>u});var t=e(14041),l=e(28967);const u=(0,l.y)({id:"core.apptheme"})},54195:(K,y,e)=>{e.d(y,{U:()=>u});var t=e(14041),l=e(28967);const u=(0,l.y)({id:"core.config"})},61617:(K,y,e)=>{e.d(y,{I:()=>u});var t=e(14041),l=e(28967);const u=(0,l.y)({id:"core.discovery"})},24453:(K,y,e)=>{e.d(y,{m:()=>u});var t=e(14041),l=e(28967);const u=(0,l.y)({id:"core.error"})},86702:(K,y,e)=>{e.d(y,{B:()=>a,S:()=>u});var t=e(14041),l=e(28967),u=(A=>(A[A.None=0]="None",A[A.Active=1]="Active",A))(u||{});const a=(0,l.y)({id:"core.featureflags"})},95159:(K,y,e)=>{e.d(y,{a:()=>u});var t=e(14041),l=e(28967);const u=(0,l.y)({id:"core.fetch"})},94223:(K,y,e)=>{e.d(y,{K:()=>u});var t=e(14041),l=e(28967);const u=(0,l.y)({id:"core.identity"})},35177:(K,y,e)=>{e.d(y,{s:()=>u});var t=e(14041),l=e(28967);const u=(0,l.y)({id:"core.oauthrequest"})},83392:(K,y,e)=>{e.d(y,{F:()=>u});var t=e(14041),l=e(28967);const u=(0,l.y)({id:"core.storage"})},87350:(K,y,e)=>{e.d(y,{J:()=>l});var t=e(28967);const l=(0,t.y)({id:"core.translation"})},33129:(K,y,e)=>{e.d(y,{$7:()=>h,GR:()=>m,Hd:()=>s,Vk:()=>a,Yj:()=>u,Zj:()=>c,cz:()=>g,dM:()=>p,py:()=>A,u0:()=>d,zk:()=>r});var t=e(14041),l=e(28967),u=(v=>(v.SignedIn="SignedIn",v.SignedOut="SignedOut",v))(u||{});const a=(0,l.y)({id:"core.auth.google"}),A=(0,l.y)({id:"core.auth.github"}),c=(0,l.y)({id:"core.auth.okta"}),h=(0,l.y)({id:"core.auth.gitlab"}),d=(0,l.y)({id:"core.auth.microsoft"}),r=(0,l.y)({id:"core.auth.onelogin"}),s=(0,l.y)({id:"core.auth.bitbucket"}),m=(0,l.y)({id:"core.auth.bitbucket-server"}),g=(0,l.y)({id:"core.auth.atlassian"}),p=(0,l.y)({id:"core.auth.vmware-cloud"})},28967:(K,y,e)=>{e.d(y,{y:()=>l});class t{constructor(a){if(this.config=a,!a.id.split(".").flatMap(c=>c.split("-")).every(c=>c.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${a.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function l(u){return new t(u)}},45843:(K,y,e)=>{e.d(y,{b:()=>t});function t(l,u){return"id"in l?{api:l,deps:{},factory:()=>u}:l}},18139:(K,y,e)=>{e.d(y,{Q2:()=>a,gf:()=>A});var t=e(14041),l=e(97388),u=e(3399);function a(){const h=(0,l.qO)("api-context");if(!h)throw new u.EH("API context is not available");const d=h.atVersion(1);if(!d)throw new u.EH("ApiContext v1 not available");return d}function A(h){const r=a().get(h);if(!r)throw new u.EH(`No implementation available for ${h}`);return r}function c(h){return function(r){const s=g=>{const p=a(),v={};for(const R in h)if(h.hasOwnProperty(R)){const P=h[R],T=p.get(P);if(!T)throw new NotImplementedError(`No implementation available for ${P}`);v[R]=T}return React.createElement(r,{...g,...v})},m=r.displayName||r.name||"Component";return s.displayName=`withApis(${m})`,s}}},95208:(K,y,e)=>{e.d(y,{n:()=>l});var t=e(97388);const l=()=>{const u=(0,t.qO)("app-context");if(!u)throw new Error("App context is not available");const a=u.atVersion(1);if(!a)throw new Error("AppContext v1 not available");return a}},85408:(K,y,e)=>{e.d(y,{E:()=>A,h:()=>a});var t=e(97388);const l=(0,t.Q6)("component-data-store",()=>new WeakMap),u="__backstage_data";function a(c,h,d){var m;const r=c;let s=(m=r[u])!=null?m:l.get(c);if(s||(s={map:new Map},Object.defineProperty(r,u,{enumerable:!1,configurable:!0,writable:!1,value:s}),l.set(c,s)),s.map.has(h)){const g=c.displayName||c.name;throw new Error(`Attempted to attach duplicate data "${h}" to component "${g}"`)}s.map.set(h,d)}function A(c,h){var s;if(!c)return;const d=c.type;if(!d)return;const r=(s=d[u])!=null?s:l.get(d);if(r)return r.map.get(h)}},18050:(K,y,e)=>{e.d(y,{NC:()=>s,zZ:()=>m,QJ:()=>r});var t=e(14041),l=e(19224),u=e(52262),a=e(95208),A=e(72814),c=e(85408);class h extends t.Component{constructor(){super(...arguments);ue(this,"state",{error:void 0});ue(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(v){return{error:v}}render(){const{error:v}=this.state,{app:R,plugin:P}=this.props,{ErrorBoundaryFallback:T}=R.getComponents();return v?t.createElement(T,{error:v,resetError:this.handleErrorReset,plugin:P}):this.props.children}}var d=e(48813);function r(g){const{component:p,mountPoint:v,name:R}=g;return m({component:{lazy:()=>p().then(P=>{const T=B=>{const M=(0,u.s)();try{(0,A.S)(v)}catch(b){if(typeof b=="object"&&b!==null){const{message:i}=b;if(typeof i=="string"&&i.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${v} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw b}return(0,t.useEffect)(()=>{M.captureEvent(d.t,"")},[M]),t.createElement(P,{...B})},D=R||P.displayName||P.name||"LazyComponent";return T.displayName=`RoutableExtension(${D})`,T},P=>D=>{const B=(0,a.n)(),{BootErrorPage:M}=B.getComponents();return t.createElement(M,{step:"load-chunk",error:P})})},data:{"core.mountPoint":v},name:R})}function s(g){const{component:p,name:v}=g;return m({component:p,name:v})}function m(g){const{data:p={},name:v}=g;v||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let R;if("lazy"in g.component){const T=g.component.lazy;R=(0,t.lazy)(()=>T().then(D=>({default:D})))}else R=g.component.sync;const P=v||R.displayName||R.name||"Component";return{expose(T){const D=B=>{const M=(0,a.n)(),{Progress:b}=M.getComponents(),i=p==null?void 0:p["core.mountPoint"];return t.createElement(t.Suspense,{fallback:t.createElement(b,null)},t.createElement(h,{app:M,plugin:T},t.createElement(l.I,{attributes:{pluginId:T.getId(),...v&&{extension:v},...i&&{routeRef:i.id}}},t.createElement(R,{...B}))))};(0,c.h)(D,"core.plugin",T),(0,c.h)(D,"core.extensionName",v);for(const[B,M]of Object.entries(p))(0,c.h)(D,B,M);return D.displayName=`Extension(${P})`,D}}}},77026:(K,y,e)=>{e.d(y,{O:()=>h});var t=e(14041),l=e(85408),u=e(18139),a=e(86702);function A(d,r,s,m){return t.Children.toArray(d).flatMap(g=>{if(!(0,t.isValidElement)(g))return[];if(g.type===t.Fragment)return A(g.props.children,r,s,m);if((0,l.E)(g,"core.featureFlagged")){const p=g.props;return("with"in p?r.isActive(p.with):!r.isActive(p.without))?A(g.props.children,r,s,m):[]}if(s===void 0||s(g))return[g];if(m)throw new Error(m);return A(g.props.children,r,s,m)})}class c{constructor(r,s){this.node=r,this.featureFlagsApi=s}selectByComponentData(r){const s=A(this.node,this.featureFlagsApi,m=>(0,l.E)(m,r.key)!==void 0,r.withStrictError);return new c(s,this.featureFlagsApi)}findComponentData(r){return A(this.node,this.featureFlagsApi,m=>(0,l.E)(m,r.key)!==void 0).map(m=>(0,l.E)(m,r.key)).filter(m=>m!==void 0)}getElements(){return A(this.node,this.featureFlagsApi)}}function h(d,r,s=[]){const m=(0,u.gf)(a.B),g=new c(d,m);return(0,t.useMemo)(()=>r(g),[d,...s])}},50809:(K,y,e)=>{e.d(y,{i:()=>l});class t{constructor(a){this.config=a}getId(){return this.config.id}getApis(){var a;return(a=this.config.apis)!=null?a:[]}getFeatureFlags(){var a,A;return(A=(a=this.config.featureFlags)==null?void 0:a.slice())!=null?A:[]}get routes(){var a;return(a=this.config.routes)!=null?a:{}}get externalRoutes(){var a;return(a=this.config.externalRoutes)!=null?a:{}}provide(a){return a.expose(this)}toString(){return`plugin{${this.config.id}}`}}function l(u){return new t(u)}},2488:(K,y,e)=>{var a;e.d(y,{I:()=>u});var t=e(13930);a=t.b;class l{constructor(c,h,d,r){ue(this,a,"external");this.id=c,this.params=h,this.optional=d,this.defaultTarget=r}toString(){return`routeRef{type=external,id=${this.id}}`}getDefaultTarget(){return this.defaultTarget}}function u(A){var c;return new l(A.id,(c=A.params)!=null?c:[],!!A.optional,A==null?void 0:A.defaultTarget)}},77555:(K,y,e)=>{var a;e.d(y,{H:()=>u});var t=e(13930);a=t.b;class l{constructor(c,h){ue(this,a,"absolute");this.id=c,this.params=h}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}function u(A){var c;return new l(A.id,(c=A.params)!=null?c:[])}},13930:(K,y,e)=>{e.d(y,{b:()=>l});var t=e(97388);const l=(0,t.Q6)("route-ref-type",()=>Symbol("route-ref-type"))},72814:(K,y,e)=>{e.d(y,{S:()=>a});var t=e(14041),l=e(18690),u=e(97388);function a(A){const{pathname:c}=(0,l.zy)(),h=(0,u.qO)("routing-context");if(!h)throw new Error("Routing context is not available");const d=h.atVersion(1),r=(0,t.useMemo)(()=>d&&d.resolve(A,{pathname:c}),[d,A,c]);if(!h)throw new Error("useRouteRef used outside of routing context");if(!d)throw new Error("RoutingContext v1 not available");const s="optional"in A&&A.optional;if(!r&&!s)throw new Error(`No path for ${A}`);return r}},76888:(K,y,e)=>{e.d(y,{K:()=>l});var t=e(18690);function l(u){return(0,t.g)()}},97963:(K,y,e)=>{var A,c,h;e.d(y,{h:()=>a});function t(d){return{$$type:"@backstage/TranslationResource",version:"v1",id:d.ref.id,resources:Object.entries(d.translations).map(([r,s])=>({language:r,loader:()=>s().then(m=>{const g=m.default;return{messages:(g==null?void 0:g.$$type)==="@backstage/TranslationMessages"?g.messages:g}})}))}}function l(d){const r=new Array;function s(m,g){for(const[p,v]of Object.entries(m))typeof v=="string"?r.push([g+p,v]):s(v,`${g}${p}.`)}return s(d,""),Object.fromEntries(r)}class u{constructor(r){mt(this,A);mt(this,c);mt(this,h);ue(this,"$$type","@backstage/TranslationRef");ue(this,"version","v1");Ct(this,A,r.id),Ct(this,c,l(r.messages))}get id(){return he(this,A)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return he(this,c)}setDefaultResource(r){Ct(this,h,r)}getDefaultResource(){return he(this,h)}toString(){return`TranslationRef{id=${this.id}}`}}A=new WeakMap,c=new WeakMap,h=new WeakMap;function a(d){const r=new u(d);return d.translations&&r.setDefaultResource(t({ref:r,translations:d.translations})),r}},10265:(K,y,e)=>{e.d(y,{i:()=>c});var t=e(14041),l=e(18139),u=e(24453),a=e(87350);const A=new WeakSet,c=h=>{const d=(0,l.gf)(u.m),r=(0,l.gf)(a.J),[s,m]=(0,t.useState)(()=>r.getTranslation(h)),g=(0,t.useMemo)(()=>r.translation$(h),[r,h]),p=(0,t.useCallback)(R=>{if(!A.has(h)){const P=`Failed to load translation resource '${h.id}'; caused by ${R}`;console.error(P),d.post(new Error(P)),A.add(h)}},[d,h]);(0,t.useEffect)(()=>{const R=g.subscribe({next(P){P.ready&&m(P)},error(P){p(P)}});return()=>{R.unsubscribe()}},[g,p]);const v=(0,t.useRef)(!0);if((0,t.useEffect)(()=>{v.current?v.current=!1:m(r.getTranslation(h))},[r,h]),!s.ready)throw new Promise(R=>{const P=g.subscribe({next(T){T.ready&&(P.unsubscribe(),R())},error(T){P.unsubscribe(),p(T),R()}})});return{t:s.t}}},3399:(K,y,e)=>{e.d(y,{EH:()=>b,HK:()=>j,bJ:()=>u,m_:()=>D,o3:()=>_,tX:()=>a});var t=e(69655),l=e.n(t);function u(N){if(typeof N!="object"||N===null||Array.isArray(N))return!1;const V=N;return!(typeof V.name!="string"||V.name===""||typeof V.message!="string")}function a(N){if(typeof N!="object"||N===null||Array.isArray(N))throw new Error(`Encountered invalid error, not an object, got '${N}'`);const V=N;if(typeof V.name!="string"||V.name==="")throw new Error(`Encountered error object without a name, got '${N}'`);if(typeof V.message!="string")throw new Error(`Encountered error object without a message, got '${N}'`)}function A(N,V){const O={name:"Unknown",message:"<no reason given>",...serializeError$1(N)};return V!=null&&V.includeStack||delete O.stack,O}function c(N){const V=(0,t.deserializeError)(N);return N.stack||(V.stack=void 0),V}function h(N){if(u(N)){const V=String(N);return V!=="[object Object]"?V:`${N.name}: ${N.message}`}return`unknown error '${N}'`}var d=Object.defineProperty,r=(N,V,L)=>V in N?d(N,V,{enumerable:!0,configurable:!0,writable:!0,value:L}):N[V]=L,s=(N,V,L)=>(r(N,typeof V!="symbol"?V+"":V,L),L);class m extends Error{constructor(V,L){var O;let W=V;if(L!==void 0){const I=h(L);W?W+=`; caused by ${I}`:W=`caused by ${I}`}super(W),s(this,"cause"),(O=Error.captureStackTrace)==null||O.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=u(L)?L:void 0}}var g=Object.defineProperty,p=(N,V,L)=>V in N?g(N,V,{enumerable:!0,configurable:!0,writable:!0,value:L}):N[V]=L,v=(N,V,L)=>(p(N,typeof V!="symbol"?V+"":V,L),L);class R extends m{constructor(){super(...arguments),v(this,"name","InputError")}}class P extends m{constructor(){super(...arguments),v(this,"name","AuthenticationError")}}class T extends m{constructor(){super(...arguments),v(this,"name","NotAllowedError")}}class D extends m{constructor(){super(...arguments),v(this,"name","NotFoundError")}}class B extends m{constructor(){super(...arguments),v(this,"name","ConflictError")}}class M extends m{constructor(){super(...arguments),v(this,"name","NotModifiedError")}}class b extends m{constructor(){super(...arguments),v(this,"name","NotImplementedError")}}class i extends null{}class j extends m{constructor(V,L){super(V,L),this.name=u(L)?L.name:"Error"}}async function U(N){var V;try{const L=await N.text();if(L){if((V=N.headers.get("content-type"))!=null&&V.startsWith("application/json"))try{const O=JSON.parse(L);if(O.error&&O.response)return O}catch{}return{error:{name:"Error",message:`Request failed with status ${N.status} ${N.statusText}, ${L}`},response:{statusCode:N.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${N.status} ${N.statusText}`},response:{statusCode:N.status}}}var G=Object.defineProperty,F=(N,V,L)=>V in N?G(N,V,{enumerable:!0,configurable:!0,writable:!0,value:L}):N[V]=L,Z=(N,V,L)=>(F(N,typeof V!="symbol"?V+"":V,L),L);class _ extends Error{constructor(V){super(V.message),Z(this,"response"),Z(this,"body"),Z(this,"cause"),Z(this,"statusCode"),Z(this,"statusText"),this.name="ResponseError",this.response=V.response,this.body=V.data,this.cause=V.cause,this.statusCode=V.statusCode,this.statusText=V.statusText}static async fromResponse(V){const L=await U(V),O=L.response.statusCode||V.status,W=V.statusText,I=`Request failed with ${O} ${W}`,w=c(L.error);return new _({message:I,response:V,data:L,cause:w,statusCode:O,statusText:W})}}},76242:(K,y,e)=>{var c,h,d,r,s;e.d(y,{g:()=>A});var t=e(45843),l=e(33129),u=e(14146);class a{constructor(p){mt(this,c);Ct(this,c,p)}async getCredentials(p){const v=new URL(p.url),R=he(this,c).find(P=>P.isUrlSupported(v));if(!R)throw new Error(`No auth provider available for '${p.url}', see https://backstage.io/link?scm-auth`);return R.getCredentials(p)}}c=new WeakMap;const m=class m{constructor(p,v,R,P){mt(this,h);mt(this,d);mt(this,r);mt(this,s);Ct(this,h,v),Ct(this,d,R),Ct(this,r,P),Ct(this,s,p)}static createDefaultApiFactory(){return(0,t.b)({api:u.$,deps:{github:l.py,gitlab:l.$7,azure:l.u0,bitbucket:l.Hd},factory:({github:p,gitlab:v,azure:R,bitbucket:P})=>m.merge(m.forGithub(p),m.forGitlab(v),m.forAzure(R),m.forBitbucket(P))})}static forAuthApi(p,v){return new m("generic",p,v.host,v.scopeMapping)}static forGithub(p,v){var P;const R=(P=v==null?void 0:v.host)!=null?P:"github.com";return new m("github",p,R,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(p,v){var P;const R=(P=v==null?void 0:v.host)!=null?P:"gitlab.com";return new m("gitlab",p,R,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(p,v){var P;const R=(P=v==null?void 0:v.host)!=null?P:"dev.azure.com";return new m("azure",p,R,{default:["499b84ac-1321-427f-aa17-267ca6975798/vso.build","499b84ac-1321-427f-aa17-267ca6975798/vso.code","499b84ac-1321-427f-aa17-267ca6975798/vso.graph","499b84ac-1321-427f-aa17-267ca6975798/vso.project","499b84ac-1321-427f-aa17-267ca6975798/vso.profile"],repoWrite:["499b84ac-1321-427f-aa17-267ca6975798/vso.code_manage"]})}static forBitbucket(p,v){var P;const R=(P=v==null?void 0:v.host)!=null?P:"bitbucket.org";return new m("bitbucket",p,R,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...p){return new a(p)}isUrlSupported(p){return p.host===he(this,d)}getAdditionalScopesForProvider(p){var v,R;return!(p!=null&&p.customScopes)||he(this,s)==="generic"?[]:(R=(v=p.customScopes)==null?void 0:v[he(this,s)])!=null?R:[]}async getCredentials(p){const{url:v,additionalScope:R,...P}=p,T=he(this,r).default.slice();R!=null&&R.repoWrite&&T.push(...he(this,r).repoWrite);const D=this.getAdditionalScopesForProvider(R);D.length&&T.push(...D);const B=[...new Set(T)],M=await he(this,h).getAccessToken(B,P);return{token:M,headers:{Authorization:`Bearer ${M}`}}}};h=new WeakMap,d=new WeakMap,r=new WeakMap,s=new WeakMap;let A=m},14146:(K,y,e)=>{e.d(y,{$:()=>l});var t=e(28967);const l=(0,t.y)({id:"core.scmauth"})},54934:(K,y,e)=>{var Ue,et,tt,pe,k,H,le;e.d(y,{L:()=>_e,Y:()=>Xe});var t=e(21385);const l="amazonaws.com";function u(X){var Nt,Ut;const S=X.getOptionalString("endpoint"),$=(Nt=X.getOptionalBoolean("s3ForcePathStyle"))!=null?Nt:!1;let re,ye;if(S){try{const $t=new URL(S);re=$t.host,ye=$t.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${S}' is not a valid URL`)}if(ye!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${S}'`)}else re=l;const De=X.getOptionalString("accessKeyId"),Ze=(Ut=X.getOptionalString("secretAccessKey"))==null?void 0:Ut.trim(),St=X.getOptionalString("roleArn"),Lt=X.getOptionalString("externalId");return{host:re,endpoint:S,s3ForcePathStyle:$,accessKeyId:De,secretAccessKey:Ze,roleArn:St,externalId:Lt}}function a(X){const S=X.map(u);return S.some($=>$.host===l)||S.push({host:l}),S}const Ke=class Ke{constructor(S){this.integrationConfig=S}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(S){return(0,t.ku)(S)}resolveEditUrl(S){return S}};ue(Ke,"factory",({config:S})=>{var re;const $=a((re=S.getOptionalConfigArray("integrations.awsS3"))!=null?re:[]);return(0,t.oS)($.map(ye=>new Ke(ye)),ye=>ye.config.host)});let A=Ke;const c="console.aws.amazon.com";function h(X){var St;const S=X.getOptionalString("accessKeyId"),$=(St=X.getOptionalString("secretAccessKey"))==null?void 0:St.trim(),re=X.getOptionalString("roleArn"),ye=X.getOptionalString("externalId"),De=X.getString("region");return{host:X.getOptionalString("host")||`${De}.${c}`,accessKeyId:S,secretAccessKey:$,roleArn:re,externalId:ye,region:De}}function d(X){return X.map(h)}const At=class At{constructor(S){this.integrationConfig=S}get type(){return"awsCodeCommit"}get config(){return this.integrationConfig}get title(){return this.integrationConfig.host}resolveUrl(S){return(0,t.ku)(S)}resolveEditUrl(S){const re=new URL(S).pathname.match(/^\/codesuite\/codecommit\/repositories\/([^\/]+)\//);if(!re)throw new Error("");const[,ye]=re;return s(S,ye)}};ue(At,"factory",({config:S})=>{var re;const $=d((re=S.getOptionalConfigArray("integrations.awsCodeCommit"))!=null?re:[]);return(0,t.oS)($.map(ye=>new At(ye)),ye=>ye.config.host)});let r=At;function s(X,S,$){return X.replace(new RegExp(`/codesuite/codecommit/repositories/${S}/(browse|files/edit)/`),`/codesuite/codecommit/repositories/${S}/files/edit/`)}const m="GB",ve=class ve{constructor(S,$,re,ye,De,Ze){mt(this,Ue);mt(this,et);mt(this,tt);mt(this,pe);mt(this,k);mt(this,H);mt(this,le,(...S)=>{const $=new URL(he(this,Ue));return $.pathname=S.map(re=>encodeURIComponent(re)).join("/"),$});Ct(this,Ue,S),Ct(this,et,$),Ct(this,tt,re),Ct(this,pe,ye),Ct(this,k,De),Ct(this,H,Ze)}static fromRepoUrl(S){var Ut;const $=new URL(S);let re,ye,De;const Ze=$.pathname.split("/").map($t=>decodeURIComponent($t));if(Ze[2]==="_git"?(re=Ze[1],ye=De=Ze[3]):Ze[3]==="_git"?(re=Ze[1],ye=Ze[2],De=Ze[4]):Ze[4]==="_git"&&(re=`${Ze[1]}/${Ze[2]}`,ye=Ze[3],De=Ze[5]),!re||!ye||!De)throw new Error("Azure URL must point to a git repository");const St=(Ut=$.searchParams.get("path"))!=null?Ut:void 0;let Lt;const Nt=$.searchParams.get("version");if(Nt){if(Nt.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Lt=Nt.slice(2)}return new ve($.origin,re,ye,De,St,Lt)}toRepoUrl(){let S;return he(this,tt)===he(this,pe)?S=he(this,le).call(this,he(this,et),"_git",he(this,pe)):S=he(this,le).call(this,he(this,et),he(this,tt),"_git",he(this,pe)),he(this,k)&&S.searchParams.set("path",he(this,k)),he(this,H)&&S.searchParams.set("version",m+he(this,H)),S.toString()}toFileUrl(){if(!he(this,k))throw new Error("Azure URL must point to a specific path to be able to download a file");const S=he(this,le).call(this,he(this,et),he(this,tt),"_apis","git","repositories",he(this,pe),"items");return S.searchParams.set("api-version","6.0"),S.searchParams.set("path",he(this,k)),he(this,H)&&S.searchParams.set("version",he(this,H)),S.toString()}toArchiveUrl(){const S=he(this,le).call(this,he(this,et),he(this,tt),"_apis","git","repositories",he(this,pe),"items");return S.searchParams.set("recursionLevel","full"),S.searchParams.set("download","true"),S.searchParams.set("api-version","6.0"),he(this,k)&&S.searchParams.set("scopePath",he(this,k)),he(this,H)&&S.searchParams.set("version",he(this,H)),S.toString()}toCommitsUrl(){const S=he(this,le).call(this,he(this,et),he(this,tt),"_apis","git","repositories",he(this,pe),"commits");return S.searchParams.set("api-version","6.0"),he(this,H)&&S.searchParams.set("searchCriteria.itemVersion.version",he(this,H)),S.toString()}getOwner(){return he(this,et)}getProject(){return he(this,tt)}getRepo(){return he(this,pe)}getPath(){return he(this,k)}getRef(){return he(this,H)}};Ue=new WeakMap,et=new WeakMap,tt=new WeakMap,pe=new WeakMap,k=new WeakMap,H=new WeakMap,le=new WeakMap;let g=ve;const p="dev.azure.com",v=["clientId","clientSecret","tenantId","personalAccessToken"],R=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function P(X){for(const S of R.entries()){const[$,re]=S,ye=v.filter(De=>!re.includes(De));if(re.every(De=>X[De]!==void 0)&&ye.every(De=>X[De]===void 0))return{kind:$,organizations:X.organizations,...re.reduce((De,Ze)=>(De[Ze]=X[Ze],De),{})}}throw new Error("is not a valid credential")}function T(X){var De,Ze,St,Lt,Nt,Ut,$t;const S=(De=X.getOptionalString("host"))!=null?De:p;let $=(Ze=X.getOptionalConfigArray("credentials"))==null?void 0:Ze.map(xt=>{var Kt,jt;return{organizations:xt.getOptionalStringArray("organizations"),personalAccessToken:(Kt=xt.getOptionalString("personalAccessToken"))==null?void 0:Kt.trim(),tenantId:xt.getOptionalString("tenantId"),clientId:xt.getOptionalString("clientId"),clientSecret:(jt=xt.getOptionalString("clientSecret"))==null?void 0:jt.trim()}});const re=(St=X.getOptionalString("token"))==null?void 0:St.trim();if(X.getOptional("credential")!==void 0&&X.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(X.getOptional("token")!==void 0&&X.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(re!==void 0){const xt=[{personalAccessToken:re}];$=(Lt=$==null?void 0:$.concat(xt))!=null?Lt:xt}if(X.getOptional("credential")!==void 0){const xt=[{organizations:X.getOptionalStringArray("credential.organizations"),token:(Nt=X.getOptionalString("credential.token"))==null?void 0:Nt.trim(),tenantId:X.getOptionalString("credential.tenantId"),clientId:X.getOptionalString("credential.clientId"),clientSecret:(Ut=X.getOptionalString("credential.clientSecret"))==null?void 0:Ut.trim()}];$=($t=$==null?void 0:$.concat(xt))!=null?$t:xt}if(!(0,t.HO)(S))throw new Error(`Invalid Azure integration config, '${S}' is not a valid host`);let ye;if($!==void 0){const xt=$==null?void 0:$.reduce((Tt,Kt,jt)=>{let Vt;try{P(Kt)}catch(qt){Vt=qt.message}return Vt!==void 0&&Tt.push(`credential at position ${jt+1} ${Vt}`),Tt},Array.of()).concat(Object.entries($.filter(Tt=>Tt.organizations!==void 0&&Tt.organizations.length>0).reduce((Tt,Kt,jt)=>{var Vt;return(Vt=Kt.organizations)==null||Vt.forEach(qt=>{Tt[qt]||(Tt[qt]=[]),Tt[qt].push(jt+1)}),Tt},{})).filter(([Tt,Kt])=>Kt.length>1).reduce((Tt,[Kt,jt])=>(Tt.push(`organization ${Kt} is specified multiple times in credentials at positions ${jt.slice(0,jt.length-1).join(", ")} and ${jt[jt.length-1]}`),Tt),Array.of()));if((xt==null?void 0:xt.length)>0)throw new Error(`Invalid Azure integration config for ${S}: ${xt.join("; ")}`);if(ye=$.map(Tt=>P(Tt)),ye.some(Tt=>Tt.kind!=="PersonalAccessToken")&&S!==p)throw new Error(`Invalid Azure integration config for ${S}, only personal access tokens can be used with hosts other than ${p}`);if(ye.filter(Tt=>Tt.organizations===void 0||Tt.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${S}, you cannot specify multiple credentials without organizations`)}return{host:S,credentials:ye}}function D(X){const S=X.map(T);return S.some($=>$.host===p)||S.push({host:p}),S}const ge=class ge{constructor(S){this.integrationConfig=S}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(S){var ye;const{url:$,base:re}=S;if((0,t.AY)($))return $;try{const De=g.fromRepoUrl(re),Ze=new URL(re),St=new URL(`https://a.com${(ye=De.getPath())!=null?ye:""}`),Lt=new URL($,St).pathname;return Ze.searchParams.set("path",Lt),S.lineNumber&&(Ze.searchParams.set("line",String(S.lineNumber)),Ze.searchParams.set("lineEnd",String(S.lineNumber+1)),Ze.searchParams.set("lineStartColumn","1"),Ze.searchParams.set("lineEndColumn","1")),Ze.toString()}catch{return new URL($,re).toString()}}resolveEditUrl(S){return S}};ue(ge,"factory",({config:S})=>{var re;const $=D((re=S.getOptionalConfigArray("integrations.azure"))!=null?re:[]);return(0,t.oS)($.map(ye=>new ge(ye)),ye=>ye.config.host)});let B=ge;var M=e(52536),b=e.n(M);const i="bitbucket.org",j="https://api.bitbucket.org/2.0";function U(X){var De;const S=i,$=j,re=X.getString("username"),ye=(De=X.getString("appPassword"))==null?void 0:De.trim();return{host:S,apiBaseUrl:$,username:re,appPassword:ye}}function G(X){const S=X.map(U);return S.length===0&&S.push({host:i,apiBaseUrl:j}),S}const fe=class fe{constructor(S){this.integrationConfig=S}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(S){const $=(0,t.ku)(S);if(S.lineNumber){const re=new URL($);return re.hash=`lines-${S.lineNumber}`,re.toString()}return $}resolveEditUrl(S){const $=b()(S),re=new URL(S);return re.searchParams.set("mode","edit"),re.searchParams.set("at",$.ref),re.toString()}};ue(fe,"factory",({config:S})=>{var re;const $=G((re=S.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?re:[]);return(0,t.oS)($.map(ye=>new fe(ye)),ye=>ye.config.host)});let F=fe;var Z=e(45250);const _="bitbucket.org",N="https://api.bitbucket.org/2.0";function V(X){var Ze,St,Lt;const S=(Ze=X.getOptionalString("host"))!=null?Ze:_;let $=X.getOptionalString("apiBaseUrl");const re=(St=X.getOptionalString("token"))==null?void 0:St.trim(),ye=X.getOptionalString("username"),De=(Lt=X.getOptionalString("appPassword"))==null?void 0:Lt.trim();if(!(0,t.HO)(S))throw new Error(`Invalid Bitbucket integration config, '${S}' is not a valid host`);return $?$=(0,Z.trimEnd)($,"/"):S===_?$=N:$=`https://${S}/rest/api/1.0`,{host:S,apiBaseUrl:$,token:re,username:ye,appPassword:De}}function L(X){const S=X.map(V);return S.some($=>$.host===_)||S.push({host:_,apiBaseUrl:N}),S}const at=class at{constructor(S){this.integrationConfig=S}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(S){const $=(0,t.ku)(S);if(!S.lineNumber)return $;const re=new URL($);return this.integrationConfig.host==="bitbucket.org"?re.hash=`lines-${S.lineNumber}`:re.hash=`${S.lineNumber}`,re.toString()}resolveEditUrl(S){const $=b()(S),re=new URL(S);return re.searchParams.set("mode","edit"),re.searchParams.set("spa","0"),re.searchParams.set("at",$.ref),re.toString()}};ue(at,"factory",({config:S})=>{var re,ye,De;const $=L((De=S.getOptionalConfigArray("integrations.bitbucket"))!=null?De:[...(re=S.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?re:[],...(ye=S.getOptionalConfigArray("integrations.bitbucketServer"))!=null?ye:[]]);return(0,t.oS)($.map(Ze=>new at(Ze)),Ze=>Ze.config.host)});let O=at;function W(X){var Ze;const S=X.getString("host");let $=X.getOptionalString("apiBaseUrl");const re=(Ze=X.getOptionalString("token"))==null?void 0:Ze.trim(),ye=X.getOptionalString("username"),De=X.getOptionalString("password");if(!(0,t.HO)(S))throw new Error(`Invalid Bitbucket Server integration config, '${S}' is not a valid host`);return $?$=(0,Z.trimEnd)($,"/"):$=`https://${S}/rest/api/1.0`,{host:S,apiBaseUrl:$,token:re,username:ye,password:De}}function I(X){return X.map(W)}const gt=class gt{constructor(S){this.integrationConfig=S}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(S){const $=(0,t.ku)(S);if(S.lineNumber){const re=new URL($);return re.hash=S.lineNumber.toString(),re.toString()}return $}resolveEditUrl(S){return S.includes("?")?S.substring(0,S.indexOf("?")):S}};ue(gt,"factory",({config:S})=>{var re;const $=I((re=S.getOptionalConfigArray("integrations.bitbucketServer"))!=null?re:[]);return(0,t.oS)($.map(ye=>new gt(ye)),ye=>ye.config.host)});let w=gt;function Q(X){var St;const S=X.getString("host");let $=X.getOptionalString("baseUrl"),re=X.getOptionalString("cloneUrl"),ye=X.getString("gitilesBaseUrl");const De=X.getOptionalString("username"),Ze=(St=X.getOptionalString("password"))==null?void 0:St.trim();if((0,t.HO)(S)){if($&&!(0,t.AY)($))throw new Error(`Invalid Gerrit integration config, '${$}' is not a valid baseUrl`);if(re&&!(0,t.AY)(re))throw new Error(`Invalid Gerrit integration config, '${re}' is not a valid cloneUrl`);if(!(0,t.AY)(ye))throw new Error(`Invalid Gerrit integration config, '${ye}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${S}' is not a valid host`);return $?$=(0,Z.trimEnd)($,"/"):$=`https://${S}`,ye?ye=(0,Z.trimEnd)(ye,"/"):ye=`https://${S}`,re?re=(0,Z.trimEnd)(re,"/"):re=$,{host:S,baseUrl:$,cloneUrl:re,gitilesBaseUrl:ye,username:De,password:Ze}}function J(X){return X.map(Q)}var Y=e(1048).Buffer;const z=")]}'";function q(X,S){const $=new URL(X.gitilesBaseUrl),re=new URL(S),De=re.pathname.substring(re.pathname.startsWith("/a/")?2:0).replace($.pathname,"").split("/").filter($t=>!!$t),Ze=De.indexOf("+");if(Ze<=0)throw new Error(`Unable to parse project from url: ${S}`);const St=(0,Z.trimStart)(De.slice(0,Ze).join("/"),"/"),Lt=De.indexOf("heads");if(Lt<=0)throw new Error(`Unable to parse branch from url: ${S}`);const Nt=De[Lt+1],Ut=De.slice(Lt+2).join("/");return{branch:Nt,filePath:Ut===""?"/":Ut,project:St}}function te(X,S,$,re){return`${X.gitilesBaseUrl}/${S}/+/refs/heads/${$}/${(0,Z.trimStart)(re,"/")}`}function se(X,S,$,re){const ye=re==="/"||re===""?".tar.gz":`/${re}.tar.gz`;return`${oe(X)}/${S}/+archive/refs/heads/${$}${ye}`}function ne(X){return X.password?"/a/":"/"}function oe(X){if(!X.baseUrl||!X.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(X.gitilesBaseUrl.startsWith(X.baseUrl))return X.gitilesBaseUrl.replace(X.baseUrl.concat("/"),X.baseUrl.concat(ne(X)));if(X.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return X.gitilesBaseUrl}function me(X,S){const{branch:$,project:re}=q(X,S);return`${X.baseUrl}${ne(X)}projects/${encodeURIComponent(re)}/branches/${$}`}function Se(X,S){const{project:$}=q(X,S);return`${X.cloneUrl}${ne(X)}${$}`}function be(X,S){const{branch:$,filePath:re,project:ye}=q(X,S);return`${X.baseUrl}${ne(X)}projects/${encodeURIComponent(ye)}/branches/${$}/files/${encodeURIComponent(re)}/content`}function Be(X){return`${X.baseUrl}${ne(X)}projects/`}function Je(X){const S={};if(!X.password)return S;const $=Y.from(`${X.username}:${X.password}`,"utf8");return S.Authorization=`Basic ${$.toString("base64")}`,{headers:S}}async function Qe(X){const S=await X.text();if(S.startsWith(z))try{return JSON.parse(S.slice(z.length))}catch($){throw new Error(`Invalid response from Gerrit: ${S.slice(0,10)} - ${$}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${S.slice(0,10)}`)}const Rt=class Rt{constructor(S){this.integrationConfig=S}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(S){const{url:$,base:re,lineNumber:ye}=S;let De;if($.startsWith("/")){const{branch:Ze,project:St}=q(this.config,re);return te(this.config,St,Ze,$)}return $?De=new URL($,re):De=new URL(re),ye&&(De.hash=ye.toString()),De.toString()}resolveEditUrl(S){return S}};ue(Rt,"factory",({config:S})=>{var re;const $=J((re=S.getOptionalConfigArray("integrations.gerrit"))!=null?re:[]);return(0,t.oS)($.map(ye=>new Rt(ye)),ye=>ye.config.host)});let Te=Rt;var Ie=e(78264),Me=e(85911);function He(X){var De;const S=X.getString("host");let $=X.getOptionalString("baseUrl");const re=X.getOptionalString("username"),ye=(De=X.getOptionalString("password"))==null?void 0:De.trim();if((0,t.HO)(S)){if($&&!(0,t.AY)($))throw new Error(`Invalid Gitea integration config, '${$}' is not a valid baseUrl`)}else throw new Error(`Invalid Gitea integration config, '${S}' is not a valid host`);return $?$=(0,Z.trimEnd)($,"/"):$=`https://${S}`,{host:S,baseUrl:$,username:re,password:ye}}var Ye=e(1048).Buffer;function lt(X,S){const $=ce(X,S);return`${$.url}/${$.owner}/${$.name}/_edit/${$.ref}/${$.path}`}function Et(X,S){const $=ce(X,S);return`${$.url}/api/v1/repos/${$.owner}/${$.name}/contents/${$.path}?ref=${$.ref}`}function We(X,S){const $=ce(X,S);return`${$.url}/api/v1/repos/${$.owner}/${$.name}/archive/${$.ref}.tar.gz`}function ze(X,S){const $=ce(X,S);return`${$.url}/api/v1/repos/${$.owner}/${$.name}/git/commits/${$.ref}`}function we(X){const S={},{username:$,password:re}=X;return re?($?S.Authorization=`basic ${Ye.from(`${$}:${re}`).toString("base64")}`:S.Authorization=`token ${re}`,{headers:S}):S}function ce(X,S){var re;const $=(re=X.baseUrl)!=null?re:`https://${X.host}`;try{const[ye,De,Ze,St,Lt,Nt,...Ut]=S.replace($,"").split("/"),$t=Ut.join("/").replace(/^\//,"");return{url:$,owner:De,name:Ze,ref:Nt,path:$t}}catch(ye){throw new Error(`Incorrect URL: ${S}, ${ye}`)}}const It=class It{constructor(S){this.config=S}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(S){return(0,t.ku)(S)}resolveEditUrl(S){return lt(this.config,S)}};ue(It,"factory",({config:S})=>{var ye;const re=((ye=S.getOptionalConfigArray("integrations.gitea"))!=null?ye:[]).map(De=>He(De));return(0,t.oS)(re.map(De=>new It(De)),De=>De.config.host)});let Ae=It;function Re(X){const S=X.getString("host"),$=X.getOptionalString("token"),re=X.getOptionalString("apiKey");if(!(0,t.HO)(S))throw new Error(`Invalid Harness Code integration config, '${S}' is not a valid host`);return{host:S,apiKey:re,token:$}}function Ne(X,S){const $=it(X,S);return`${$.baseUrl}/ng/account/${$.accountId}/module/code/orgs/${$.orgName}/projects/${$.projectName}/repos/${$.repoName}/files/${$.branch}/~/${$.path}`}function ht(X,S){const $=it(X,S);return`${$.baseUrl}/gateway/code/api/v1/repos/${$.accountId}/${$.orgName}/${$.projectName}/${$.repoName}/+/raw/${$.path}?routingId=${$.accountId}&git_ref=refs/heads/${$.refString}`}function Ot(X,S){const $=it(X,S);return`${$.baseUrl}/gateway/code/api/v1/repos/${$.accountId}/${$.orgName}/${$.projectName}/${$.repoName}/+/archive/${$.branch}.zip?routingId=${$.accountId}`}function ct(X,S){const $=it(X,S);return`${$.baseUrl}/gateway/code/api/v1/repos/${$.accountId}/${$.orgName}/${$.projectName}/${$.repoName}/+/content?routingId=${$.accountId}&include_commit=true&git_ref=refs/heads/${$.branch}`}function ut(X){const S={},{token:$,apiKey:re}=X;return re?S["x-api-key"]=re:$&&(S.Authorization=`Bearer ${$}`),{headers:S}}function it(X,S){const $=`https://${X.host}`;try{const re=new URL(S),ye=re.pathname.split("/").filter(tn=>tn!==""),De=re.pathname.split("/"),[Ze,St,Lt,Nt,Ut,$t,xt,Tt,Kt,jt,Vt,qt,xn,wn,...$n]=ye,en=De.slice(De.findIndex(tn=>tn==="files"||tn==="edit")+1),Qt=en.findIndex(tn=>tn==="~"),fn=en.slice(0,Qt).join("/"),on=Qt!==-1?en.slice(Qt+1).join("/").replace(/^\//,""):"";return{baseUrl:$,accountId:Lt,orgName:xt,projectName:Kt,refString:fn,path:on,repoName:Vt,refDashStr:en.slice(0,Qt).join("-"),branch:Qt!==-1?en.slice(0,Qt).join("/"):en.join("/")}}catch(re){throw new Error(`Incorrect URL: ${S}, ${re}`)}}const bt=class bt{constructor(S){this.config=S}get type(){return"harness"}get title(){return this.config.host}resolveUrl(S){return(0,t.ku)(S)}resolveEditUrl(S){return Ne(this.config,S)}};ue(bt,"factory",({config:S})=>{var ye;const re=((ye=S.getOptionalConfigArray("integrations.harness"))!=null?ye:[]).map(De=>Re(De));return(0,t.oS)(re.map(De=>new bt(De)),De=>De.config.host)});let Ce=bt;class Pe{constructor(S){ue(this,"byType");this.byType=S}static fromConfig(S){return new Pe({awsS3:A.factory({config:S}),awsCodeCommit:r.factory({config:S}),azure:B.factory({config:S}),bitbucket:O.factory({config:S}),bitbucketCloud:F.factory({config:S}),bitbucketServer:w.factory({config:S}),gerrit:Te.factory({config:S}),github:Ie.U.factory({config:S}),gitlab:Me._.factory({config:S}),gitea:Ae.factory({config:S}),harness:Ce.factory({config:S})})}get awsS3(){return this.byType.awsS3}get awsCodeCommit(){return this.byType.awsCodeCommit}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}get harness(){return this.byType.harness}list(){return Object.values(this.byType).flatMap(S=>S.list())}byUrl(S){let $=Object.values(this.byType).map(re=>re.byUrl(S)).filter(Boolean);if($.length>1){const re=$.filter(ye=>!(ye instanceof O));re.length!==0&&($=re)}return $[0]}byHost(S){return Object.values(this.byType).map($=>$.byHost(S)).find(Boolean)}resolveUrl(S){const $=this.byUrl(S.base);return $?$.resolveUrl(S):(0,t.ku)(S)}resolveEditUrl(S){const $=this.byUrl(S);return $?$.resolveEditUrl(S):S}}var Ge=e(28967);class _e{static fromConfig(S){return Pe.fromConfig(S)}}const Xe=(0,Ge.y)({id:"integration.scmintegrations"})},78264:(K,y,e)=>{e.d(y,{U:()=>d,F:()=>r});var t=e(21385),l=e(45250);const u="github.com",a="https://api.github.com",A="https://raw.githubusercontent.com";function c(m){var T,D,B;const g=(T=m.getOptionalString("host"))!=null?T:u;let p=m.getOptionalString("apiBaseUrl"),v=m.getOptionalString("rawBaseUrl");const R=(D=m.getOptionalString("token"))==null?void 0:D.trim(),P=(B=m.getOptionalConfigArray("apps"))==null?void 0:B.map(M=>({appId:M.getNumber("appId"),clientId:M.getString("clientId"),clientSecret:M.getString("clientSecret"),webhookSecret:M.getString("webhookSecret"),privateKey:M.getString("privateKey"),allowedInstallationOwners:M.getOptionalStringArray("allowedInstallationOwners")}));if(!(0,t.HO)(g))throw new Error(`Invalid GitHub integration config, '${g}' is not a valid host`);return p?p=(0,l.trimEnd)(p,"/"):g===u&&(p=a),v?v=(0,l.trimEnd)(v,"/"):g===u&&(v=A),{host:g,apiBaseUrl:p,rawBaseUrl:v,token:R,apps:P}}function h(m){const g=m.map(c);return g.some(p=>p.host===u)||g.push({host:u,apiBaseUrl:a,rawBaseUrl:A}),g}const s=class s{constructor(g){this.integrationConfig=g}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(g){return r((0,t.ku)(g),"tree")}resolveEditUrl(g){return r(g,"edit")}parseRateLimitInfo(g){return{isRateLimited:g.status===429||g.status===403&&g.headers.get("x-ratelimit-remaining")==="0"}}};ue(s,"factory",({config:g})=>{var v;const p=h((v=g.getOptionalConfigArray("integrations.github"))!=null?v:[]);return(0,t.oS)(p.map(R=>new s(R)),R=>R.config.host)});let d=s;function r(m,g){return m.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(p,v,R,P)=>`//${v}/${R}/${P}/${g}/`)}},85911:(K,y,e)=>{e.d(y,{_:()=>d,B:()=>r});var t=e(21385),l=e(45250);const u="gitlab.com",a="https://gitlab.com/api/v4";function A(m){var P;const g=m.getString("host");let p=m.getOptionalString("apiBaseUrl");const v=(P=m.getOptionalString("token"))==null?void 0:P.trim();let R=m.getOptionalString("baseUrl");if(p?p=(0,l.trimEnd)(p,"/"):g===u&&(p=a),R?R=(0,l.trimEnd)(R,"/"):R=`https://${g}`,(0,t.HO)(g)){if(!p||!(0,t.AY)(p))throw new Error(`Invalid GitLab integration config, '${p}' is not a valid apiBaseUrl`);if(!(0,t.AY)(R))throw new Error(`Invalid GitLab integration config, '${R}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${g}' is not a valid host`);return{host:g,token:v,apiBaseUrl:p,baseUrl:R}}function c(m){const g=m.map(A);return g.some(p=>p.host===u)||g.push({host:u,apiBaseUrl:a,baseUrl:`https://${u}`}),g}function h(m){let g="";return m.host!==u&&(g=new URL(m.baseUrl).pathname),trimEnd(g,"/")}const s=class s{constructor(g){this.integrationConfig=g}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(g){return(0,t.ku)(g)}resolveEditUrl(g){return r(g,"edit")}};ue(s,"factory",({config:g})=>{var v;const p=c((v=g.getOptionalConfigArray("integrations.gitlab"))!=null?v:[]);return(0,t.oS)(p.map(R=>new s(R)),R=>R.config.host)});let d=s;function r(m,g){return m.replace(/\/\-\/(blob|tree|edit)\//,`/-/${g}/`)}},21385:(K,y,e)=>{e.d(y,{AY:()=>c,HO:()=>A,ku:()=>d,oS:()=>h});var t=e(52536),l=e.n(t),u=e(45250),a=e.n(u);function A(r){const s=new URL("http://example.com");return s.host=r,s.host===r}function c(r){try{return new URL(r),!0}catch{return!1}}function h(r,s){return{list(){return r},byUrl(m){try{const g=typeof m=="string"?new URL(m):m;return r.find(p=>s(p)===g.host)}catch{return}},byHost(m){return r.find(g=>s(g)===m)}}}function d(r){const{url:s,base:m,lineNumber:g}=r;try{return new URL(s),s}catch{}let p;if(s.startsWith("/")){const{href:v,filepath:R}=l()(m);p=new URL(v);const P=(0,u.trimEnd)(p.pathname.substring(0,p.pathname.length-R.length),"/");p.pathname=`${P}${s}`}else p=new URL(s,m);return p.search=new URL(m).search,g&&(p.hash=`L${g}`),p.toString()}},14883:(K,y,e)=>{e.d(y,{C:()=>p});var t=e(14041),l=e(96872);const u=t.lazy(()=>Promise.all([e.e(1072),e.e(4164),e.e(2589),e.e(2464)]).then(e.bind(e,42464)).then(v=>({default:v.AsyncApiDefinition}))),a=v=>t.createElement(t.Suspense,{fallback:t.createElement(l.k,null)},t.createElement(u,{...v})),A=t.lazy(()=>e.e(5064).then(e.bind(e,5064)).then(v=>({default:v.GraphQlDefinition}))),c=v=>t.createElement(t.Suspense,{fallback:t.createElement(l.k,null)},t.createElement(A,{...v})),h=t.lazy(()=>Promise.all([e.e(1072),e.e(4164),e.e(1518),e.e(1119)]).then(e.bind(e,71119)).then(v=>({default:v.OpenApiDefinition}))),d=v=>{var P;const R=(P=v.supportedSubmitMethods)==null?void 0:P.map(T=>T.toLocaleLowerCase());return t.createElement(t.Suspense,{fallback:t.createElement(l.k,null)},t.createElement(h,{...v,supportedSubmitMethods:R}))};var r=e(62112),s=e(54917);const m=v=>{const R=(0,s.A)();return t.createElement(r.z,{customStyle:{backgroundColor:R.palette.background.default},text:v.definition,language:"protobuf",showCopyCodeButton:!0})},g=v=>{const{definition:R}=v,P=(0,s.A)();return t.createElement(r.z,{customStyle:{backgroundColor:P.palette.background.default},text:R,language:"typescript",showCopyCodeButton:!0})};function p(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:v=>t.createElement(d,{definition:v})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:v=>t.createElement(a,{definition:v})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:v=>t.createElement(c,{definition:v})},{type:"grpc",title:"gRPC",component:v=>t.createElement(m,{definition:v})},{type:"trpc",title:"tRPC",component:v=>t.createElement(g,{definition:v})}]}},90338:(K,y,e)=>{e.d(y,{P:()=>l});var t=e(28967);const l=(0,t.y)({id:"plugin.api-docs.config"})},49415:(K,y,e)=>{e.d(y,{Br:()=>m,Io:()=>v,Rf:()=>r,Vw:()=>s,aR:()=>p,hR:()=>d,l:()=>R,pW:()=>g});var t=e(14041),l=e(90338),u=e(50809),a=e(45843),A=e(18050),c=e(14883),h=e(48534);const d=(0,u.i)({id:"api-docs",routes:{root:h.y},apis:[(0,a.b)({api:l.P,deps:{},factory:()=>{const P=(0,c.C)();return{getApiDefinitionWidget:T=>P.find(D=>D.type===T.spec.type)}}})],externalRoutes:{registerApi:h.J}}),r=d.provide((0,A.QJ)({name:"ApiExplorerPage",component:()=>Promise.all([e.e(441),e.e(9021),e.e(8158),e.e(9287),e.e(116)]).then(e.bind(e,90116)).then(P=>P.ApiExplorerIndexPage),mountPoint:h.y})),s=d.provide((0,A.NC)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(7996).then(e.bind(e,27996)).then(P=>P.ApiDefinitionCard)}})),m=d.provide((0,A.NC)({name:"EntityConsumedApisCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(2389)]).then(e.bind(e,2389)).then(P=>P.ConsumedApisCard)}})),g=d.provide((0,A.NC)({name:"EntityConsumingComponentsCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(2852)]).then(e.bind(e,92852)).then(P=>P.ConsumingComponentsCard)}})),p=d.provide((0,A.NC)({name:"EntityProvidedApisCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(2389)]).then(e.bind(e,2389)).then(P=>P.ProvidedApisCard)}})),v=d.provide((0,A.NC)({name:"EntityProvidingComponentsCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(2852)]).then(e.bind(e,92852)).then(P=>P.ProvidingComponentsCard)}})),R=d.provide((0,A.NC)({name:"EntityHasApisCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(2389)]).then(e.bind(e,2389)).then(P=>P.HasApisCard)}}))},48534:(K,y,e)=>{e.d(y,{J:()=>a,y:()=>u});var t=e(77555),l=e(2488);const u=(0,t.H)({id:"api-docs"}),a=(0,l.I)({id:"register-component",optional:!0,defaultTarget:"catalog-import.importPage"})},71913:(K,y,e)=>{e.d(y,{C4:()=>a,Nf:()=>A,tS:()=>c});var t=e(79701);const l="catalog-entity",u=(0,t.i)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:l}),a=(0,t.i)({name:"catalog.entity.create",attributes:{action:"create"}}),A=(0,t.i)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:l}),c=(0,t.i)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:l}),h=(0,t.i)({name:"catalog.location.read",attributes:{action:"read"}}),d=(0,t.i)({name:"catalog.location.create",attributes:{action:"create"}}),r=(0,t.i)({name:"catalog.location.delete",attributes:{action:"delete"}}),s=[u,a,A,c,h,d,r]},60241:(K,y,e)=>{e.d(y,{O:()=>t});var t=(l=>(l.TOP_BOTTOM="TB",l.BOTTOM_TOP="BT",l.LEFT_RIGHT="LR",l.RIGHT_LEFT="RL",l))(t||{})},25080:(K,y,e)=>{e.d(y,{N:()=>c,e:()=>A});var t=e(18050),l=e(50809),u=e(15496);const a=(0,l.i)({id:"catalog-graph",routes:{catalogGraph:u.c},externalRoutes:{catalogEntity:u.B}}),A=a.provide((0,t.NC)({name:"EntityCatalogGraphCard",component:{lazy:()=>Promise.all([e.e(6624),e.e(3684)]).then(e.bind(e,93684)).then(h=>h.CatalogGraphCard)}})),c=a.provide((0,t.QJ)({name:"CatalogGraphPage",component:()=>Promise.all([e.e(6624),e.e(370)]).then(e.bind(e,60370)).then(h=>h.CatalogGraphPage),mountPoint:u.c}))},15496:(K,y,e)=>{e.d(y,{B:()=>a,c:()=>u});var t=e(77555),l=e(2488);const u=(0,t.H)({id:"catalog-graph"}),a=(0,l.I)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0,defaultTarget:"catalog.catalogEntity"})},5336:(K,y,e)=>{e.d(y,{g:()=>l});var t=e(28967);const l=(0,t.y)({id:"plugin.catalog-import.service"})},3969:(K,y,e)=>{e.d(y,{At:()=>u,J7:()=>l,eO:()=>t});function t(a){const{ref:A,...c}=a;return{inputRef:A,...c}}function l(a){var A;return(A=a.getOptionalString("catalog.import.entityFilename"))!=null?A:"catalog-info.yaml"}function u(a){var A;return(A=a.getOptionalString("catalog.import.pullRequestBranchName"))!=null?A:"backstage-integration"}},6161:(K,y,e)=>{e.d(y,{S5:()=>N,Gn:()=>_});var t=e(77555),l=e(50809),u=e(45843),a=e(61617),A=e(95159),c=e(54195),h=e(18050),d=e(14146),r=e(54934),s=e(30043),m=e(5336),g=e(51419),p=e(52536),v=e.n(p),R=e(98028),P=e(3969),T=e(93584);async function D(V,L,O){const{owner:W,repo:I,title:w,body:Q,fileContent:J,repositoryUrl:Y,githubIntegrationConfig:z}=V,{token:q}=await L.getCredentials({url:Y,additionalScope:{repoWrite:!0}}),te=new R.E({auth:q,baseUrl:z.apiBaseUrl}),se=(0,P.At)(O),ne=(0,P.J7)(O),oe=await te.repos.get({owner:W,repo:I}).catch(be=>{throw new Error(B("Couldn't fetch repo data",be))}),me=await te.git.getRef({owner:W,repo:I,ref:`heads/${oe.data.default_branch}`}).catch(be=>{throw new Error(B("Couldn't fetch default branch data",be))});return await te.git.createRef({owner:W,repo:I,ref:`refs/heads/${se}`,sha:me.data.object.sha}).catch(be=>{throw new Error(B(`Couldn't create a new branch with name '${se}'`,be))}),await te.repos.createOrUpdateFileContents({owner:W,repo:I,path:ne,message:w,content:T.o4.encode(J),branch:se}).catch(be=>{throw new Error(B(`Couldn't create a commit with ${ne} file added`,be))}),{link:(await te.pulls.create({owner:W,repo:I,title:w,head:se,body:Q,base:oe.data.default_branch}).catch(be=>{throw new Error(B(`Couldn't create a pull request for ${se} branch`,be))})).data.html_url,location:`https://${z.host}/${W}/${I}/blob/${oe.data.default_branch}/${ne}`}}function B(V,L){return`${V}, received http response status code ${L.status}: ${L.message}`}const M="6.0";class b{constructor(L){ue(this,"createEndpoint",(L,O,W=void 0)=>{const I=new URL(`${this._options.tenantUrl}/${this._options.project}/_apis/git/repositories`);return I.pathname+=L,I.searchParams.set("api-version",O),Object.entries(W!=null?W:{}).forEach(([w,Q])=>I.searchParams.set(w,Q)),I.toString()});this._options=L}async get(L,O,W=void 0,I){const w=this.createEndpoint(L,O,W),Q=await fetch(w,{headers:{Authorization:`Bearer ${I}`}});return Q.ok?await Q.json():Q.json().then(J=>Promise.reject(new Error(J.message)))}async post(L,O,W,I){const w=this.createEndpoint(L,O),Q=await fetch(w,{method:"POST",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify(W)});return Q.ok?await Q.json():Q.json().then(J=>Promise.reject(new Error(J.message)))}async getRepository(L,O){return this.get(`/${L}`,M,void 0,O)}async getDefaultBranch(L,O){var w;const W=L.defaultBranch.replace("refs/",""),I=await this.get(`/${L.name}/refs`,M,{filter:W},O);return(w=I.value)!=null&&w.length?I.value[0]:Promise.reject(new Error(`The requested ref '${W}' was not found`))}async pushNewBranch(L,O){const{sourceBranch:W,repoName:I}=L,w={refUpdates:[{name:`refs/heads/${L.branchName}`,oldObjectId:W.objectId}],commits:[{comment:L.title,changes:[{changeType:"add",item:{path:`/${L.fileName}`},newContent:{content:L.fileContent,contentType:"rawtext"}}]}]};return(await this.post(`/${I}/pushes`,M,w,O)).refUpdates[0]}async createPullRequest(L,O){const{repoName:W,sourceName:I,targetName:w}=L,Q={title:L.title,description:L.description,sourceRefName:I,targetRefName:w};return await this.post(`/${W}/pullrequests`,M,Q,O)}}async function i(V,L=void 0){const{title:O,repository:W,token:I,fileContent:w,fileName:Q,branchName:J,description:Y}=V,z=L!=null?L:new b(V),q=await z.getRepository(W,I),te=await z.getDefaultBranch(q,I),se={title:O,repoName:q.name,sourceBranch:te,branchName:J,fileContent:w,fileName:Q},ne=await z.pushNewBranch(se,I),oe={title:O,description:Y,repoName:q.name,sourceName:ne.name,targetName:te.name};return z.createPullRequest(oe,I)}function j(V){const{org:L,repo:O,project:W,host:I}=G(V);if(!L||!O||!W)throw new Error("Invalid AzureDevops Repository. Please use a valid repository url and try again ");return{tenantUrl:`https://${I}/${L}`,repoName:O,project:W}}async function U(V,L,O){const{repositoryUrl:W,fileContent:I,title:w,body:Q}=V,J=(0,P.At)(O),Y=(0,P.J7)(O),{token:z}=await L.getCredentials({url:W,additionalScope:{repoWrite:!0}}),{tenantUrl:q,repoName:te,project:se}=j(W),ne=await i({token:z,fileContent:I,title:w,description:Q,project:se,repository:te,branchName:J,tenantUrl:q,fileName:Y}),oe=`${ne.repository.webUrl}?path=/${Y}`;return{link:`${ne.repository.webUrl}/pullrequest/${ne.pullRequestId}`,location:oe}}function G(V){const L=new URL(V);let O=L.host,W,I,w;const Q=L.pathname.split("/").map(J=>decodeURIComponent(J));return Q[2]==="_git"?(W=Q[1],I=w=Q[3]):Q[3]==="_git"?(W=Q[1],I=Q[2],w=Q[4]):Q[4]==="_git"&&(O=`${O}/${Q[1]}`,W=Q[2],I=Q[3],w=Q[5]),{host:O,org:W,project:I,repo:w}}class F{constructor(L){ue(this,"discoveryApi");ue(this,"fetchApi");ue(this,"scmAuthApi");ue(this,"scmIntegrationsApi");ue(this,"catalogApi");ue(this,"configApi");this.discoveryApi=L.discoveryApi,this.scmAuthApi=L.scmAuthApi,this.fetchApi=L.fetchApi,this.scmIntegrationsApi=L.scmIntegrationsApi,this.catalogApi=L.catalogApi,this.configApi=L.configApi}async analyzeUrl(L){var Q;if(new URL(L).pathname.match(/\.ya?ml$/)||(Q=new URL(L).searchParams.get("path"))!=null&&Q.match(/.ya?ml$/)){const J=await this.catalogApi.addLocation({type:"url",target:L,dryRun:!0});return{type:"locations",locations:[{exists:J.exists,target:J.location.target,entities:J.entities.map(Y=>{var z;return{kind:Y.kind,namespace:(z=Y.metadata.namespace)!=null?z:"default",name:Y.metadata.name}})}]}}const O=["github","azure"],W=this.scmIntegrationsApi.byUrl(L);if(!(!!W&&O.find(J=>J===W.type))){const J=(0,P.J7)(this.configApi);throw W?new Error(`The ${W.title} integration only supports full URLs to ${J} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid git URL because there was no configured integration that matched the given host name. Currently GitHub and Azure DevOps are supported. You could try to paste the full URL to a ${J} file instead.`)}const w=await this.analyzeLocation({repo:L});if(w.existingEntityFiles.length>0){const J=w.existingEntityFiles.reduce((Y,z)=>{var q;return Y[z.location.target]={target:z.location.target,exists:z.isRegistered,entities:[...z.location.target in Y?Y[z.location.target].entities:[],{name:z.entity.metadata.name,namespace:(q=z.entity.metadata.namespace)!=null?q:"default",kind:z.entity.kind}]},Y},{});return{type:"locations",locations:Object.values(J)}}return{type:"repository",integrationType:W.type,url:L,generatedEntities:w.generateEntities.map(J=>J.entity)}}async preparePullRequest(){var I;const L=(I=this.configApi.getOptionalString("app.title"))!=null?I:"Backstage",O=this.configApi.getString("app.baseUrl");return{title:`Add ${(0,P.J7)(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${L} software catalog](${O}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(L){const{repositoryUrl:O,fileContent:W,title:I,body:w}=L,Q=g.Ay.parse(W),J=await this.catalogApi.validateEntity(Q,`url:${O}`);if(!J.valid)throw new Error(J.errors[0].message);const Y=this.scmIntegrationsApi.byUrl(O);switch(Y==null?void 0:Y.type){case"github":{const{config:z}=Y,{name:q,owner:te}=v()(O);return D({githubIntegrationConfig:z,repo:q,owner:te,repositoryUrl:O,fileContent:W,title:I,body:w},this.scmAuthApi,this.configApi)}case"azure":return U({repositoryUrl:O,fileContent:W,title:I,body:w},this.scmAuthApi,this.configApi);default:throw new Error("unimplemented!")}}async analyzeLocation(L){const O=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({location:{type:"url",target:L.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(I=>{throw new Error(`Failed to generate entity definitions, ${I.message}`)});if(!O.ok)throw new Error(`Failed to generate entity definitions. Received http response ${O.status}: ${O.statusText}`);return await O.json()}}const Z=(0,t.H)({id:"catalog-import"}),_=(0,l.i)({id:"catalog-import",apis:[(0,u.b)({api:m.g,deps:{discoveryApi:a.I,scmAuthApi:d.$,fetchApi:A.a,scmIntegrationsApi:r.Y,catalogApi:s.v,configApi:c.U},factory:({discoveryApi:V,scmAuthApi:L,fetchApi:O,scmIntegrationsApi:W,catalogApi:I,configApi:w})=>new F({discoveryApi:V,scmAuthApi:L,scmIntegrationsApi:W,fetchApi:O,catalogApi:I,configApi:w})})],routes:{importPage:Z}}),N=_.provide((0,h.QJ)({name:"CatalogImportPage",component:()=>Promise.all([e.e(441),e.e(9165)]).then(e.bind(e,39165)).then(V=>V.ImportPage),mountPoint:Z}))},30043:(K,y,e)=>{e.d(y,{v:()=>l});var t=e(28967);const l=(0,t.y)({id:"plugin.catalog.service"})},91072:(K,y,e)=>{e.d(y,{n:()=>l});var t=e(28967);const l=(0,t.y)({id:"plugin.catalog.entity-presentation"})},96479:(K,y,e)=>{e.d(y,{T:()=>A});var t=e(78560),l=e(55488),u=e(46123),a=e.n(u);function A(d,r){const{kind:s,namespace:m,name:g,title:p,description:v,displayName:R,type:P}=c(d),T=(0,t.U2)({kind:s||"unknown",namespace:m||l.oQ,name:g||"unknown"}),D=h({kind:s,namespace:m,name:g,context:r}),B=[R,p,D].find(b=>b&&typeof b=="string"),M=[B!==T?T:void 0,P,v].filter(b=>b&&typeof b=="string").join(" | ");return{entityRef:T,primaryTitle:B,secondaryTitle:M||void 0,Icon:void 0}}function c(d){if(typeof d=="string"){let r=d.indexOf(":");const s=d.indexOf("/");s!==-1&&s<r&&(r=-1);const m=r===-1?void 0:d.slice(0,r),g=s===-1?void 0:d.slice(r+1,s),p=d.slice(Math.max(r+1,s+1));return{kind:m,namespace:g,name:p}}if(typeof d=="object"&&d!==null){const r=[a()(d,"kind")].find(P=>P&&typeof P=="string"),s=[a()(d,"metadata.namespace"),a()(d,"namespace")].find(P=>P&&typeof P=="string"),m=[a()(d,"metadata.name"),a()(d,"name")].find(P=>P&&typeof P=="string"),g=[a()(d,"metadata.title")].find(P=>P&&typeof P=="string"),p=[a()(d,"metadata.description")].find(P=>P&&typeof P=="string"),v=[a()(d,"spec.profile.displayName")].find(P=>P&&typeof P=="string"),R=[a()(d,"spec.type")].find(P=>P&&typeof P=="string");return{kind:r,namespace:s,name:m,title:g,description:p,displayName:v,type:R}}return{}}function h(d){var R,P,T,D,B;const r=((R=d.kind)==null?void 0:R.toLocaleLowerCase("en-US"))||"unknown",s=d.namespace||l.oQ,m=d.name||"unknown",g=(T=(P=d.context)==null?void 0:P.defaultKind)==null?void 0:T.toLocaleLowerCase("en-US"),p=(B=(D=d.context)==null?void 0:D.defaultNamespace)==null?void 0:B.toLocaleLowerCase("en-US");let v=m;return(p&&s.toLocaleLowerCase("en-US")!==p||s!==l.oQ)&&(v=`${s}/${v}`),g&&r.toLocaleLowerCase("en-US")!==g&&(v=`${r}:${v}`),v}},46509:(K,y,e)=>{e.d(y,{f:()=>h});var t=e(78560),l=e(18139),u=e(14041),a=e(91072),A=e(96479);function c(d,r,s){const[m,g]=(0,u.useState)(d);return(0,u.useEffect)(()=>{g(d);const p=r==null?void 0:r.subscribe({next:v=>{g(v)},complete:()=>{p==null||p.unsubscribe()}});return()=>{p==null||p.unsubscribe()}},s),m}function h(d,r){const m=(0,l.Q2)().get(a.n),g=[m,JSON.stringify(d),JSON.stringify(r||null)],p=(0,u.useMemo)(()=>{if(!m){const v=(0,A.T)(d,r);return{snapshot:v,promise:Promise.resolve(v)}}return m.forEntity(typeof d=="string"||"metadata"in d?d:(0,t.U2)(d),r)},g);return c(p.snapshot,p.update$,[p])}},9974:(K,y,e)=>{e.d(y,{a:()=>l});var t=e(28967);const l=(0,t.y)({id:"catalog-react.starred-entities"})},45809:(K,y,e)=>{e.d(y,{d:()=>m});var t=e(77125),l=e(71677),u=e(58837),a=e(14041),A=e(46123),c=e.n(A),h=e(46509),d=e(96403),r=e.n(d);const s=(0,u.A)(g=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:g.spacing(.5),color:g.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),m=g=>{const{entityRef:p,hideIcon:v,disableTooltip:R,defaultKind:P,defaultNamespace:T}=g,D=s(),{primaryTitle:B,secondaryTitle:M,Icon:b}=(0,h.f)(p,{defaultKind:P,defaultNamespace:T});let i=a.createElement(a.Fragment,null,B);return i=a.createElement(t.A,{component:"span",className:D.root},b&&!v?a.createElement(t.A,{component:"span",className:D.icon},a.createElement(b,{fontSize:"inherit"})):null,i),M&&!R&&(i=a.createElement(l.Ay,{enterDelay:1500,title:M},i)),i}},37281:(K,y,e)=>{e.d(y,{z:()=>d});var t=e(78560),l=e(55488),u=e(75202),a=e(72814),A=e(14041),c=e(20987),h=e(45809);const d=(0,A.forwardRef)((s,m)=>{var b;const{entityRef:g,defaultKind:p,defaultNamespace:v,title:R,children:P,hideIcon:T,...D}=s,B=r(s.entityRef),M=(b=P!=null?P:R)!=null?b:A.createElement(h.d,{entityRef:g,defaultKind:p,defaultNamespace:v,hideIcon:T});return A.createElement(u.N_,{...D,ref:m,to:B},M)});function r(s){var P;const m=(0,a.S)(c.s);let g,p,v;if(typeof s=="string"){const T=(0,t.KU)(s);g=T.kind,p=T.namespace,v=T.name}else"metadata"in s?(g=s.kind,p=s.metadata.namespace,v=s.metadata.name):(g=s.kind,p=s.namespace,v=s.name);g=g.toLocaleLowerCase("en-US"),p=(P=p==null?void 0:p.toLocaleLowerCase("en-US"))!=null?P:l.oQ;const R={kind:encodeURIComponent(g),namespace:encodeURIComponent(p),name:encodeURIComponent(v)};return m(R)}},14158:(K,y,e)=>{e.d(y,{i:()=>a});var t=e(78560),l=e(14041),u=e(37281);function a(A){const{entityRefs:c,hideIcons:h,...d}=A;return l.createElement(l.Fragment,null,c.map((r,s)=>{const m=typeof r=="string"?r:(0,t.U2)(r);return l.createElement(l.Fragment,{key:`${s}.${m}`},s>0&&", ",l.createElement(u.z,{...d,entityRef:r,hideIcon:h}))}))}},53318:(K,y,e)=>{e.d(y,{S:()=>a,Z:()=>A});var t=e(55488),l=e(46123),u=e.n(l);function a(c,h){const d=h==null?void 0:h.defaultKind;let r,s,m;return"metadata"in c?(r=c.kind,s=c.metadata.namespace,m=c.metadata.name):(r=c.kind,s=c.namespace,m=c.name),(s===void 0||s==="")&&(s=t.oQ),(h==null?void 0:h.defaultNamespace)!==void 0?(h==null?void 0:h.defaultNamespace)===s&&(s=void 0):s===t.oQ&&(s=void 0),r=r.toLocaleLowerCase("en-US"),r=d&&d.toLocaleLowerCase("en-US")===r?void 0:r,`${r?`${r}:`:""}${s?`${s}/`:""}${m}`}function A(c,h){for(const d of["spec.profile.displayName","metadata.title"]){const r=u()(c,d);if(r&&typeof r=="string")return r}return h}},25999:(K,y,e)=>{e.d(y,{u:()=>T});var t=e(29365),l=e(71677),u=e(7031),a=e(80109),A=e(15303),c=e(14041),h=e(78560),d=e(18139),r=e(46123),s=e(9974),m=e(96403);function g(D){return typeof D=="string"?D:(0,h.U2)(D)}function p(D){const B=(0,d.gf)(s.a),[M,b]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{const j=B.starredEntitie$().subscribe({next(U){b(U.has(g(D)))}});return()=>{j.unsubscribe()}},[D,B]),{toggleStarredEntity:(0,c.useCallback)(()=>B.toggleStarred(g(D)).then(),[D,B]),isStarredEntity:M}}var v=e(80084),R=e(10265);const P=(0,u.A)({root:{color:"#f3ba37"}})(a.A),T=D=>{const{toggleStarredEntity:B,isStarredEntity:M}=p(D.entity),{t:b}=(0,R.i)(v.j);return c.createElement(t.A,{"aria-label":"favorite",color:"inherit",...D,onClick:()=>B()},c.createElement(l.Ay,{title:b(M?"favoriteEntity.removeFromFavorites":"favoriteEntity.addToFavorites")},M?c.createElement(P,null):c.createElement(A.A,null)))}},16400:(K,y,e)=>{e.d(y,{T7:()=>c,TY:()=>r,tN:()=>d});var t=e(78560),l=e(19224),u=e(97388),a=e(14041);const A=(0,u.tK)("entity-context"),c=s=>{const{children:m,entity:g,loading:p,error:v,refresh:R}=s,P={entity:g,loading:p,error:v,refresh:R};return a.createElement(A.Provider,{value:(0,u.Bl)({1:P})},a.createElement(l.I,{attributes:{...g?{entityRef:(0,t.U2)(g)}:void 0}},m))},h=s=>React.createElement(c,{entity:s.entity,loading:!s.entity,error:void 0,refresh:void 0,children:s.children});function d(){const s=(0,u.qO)("entity-context");if(!s)throw new Error("Entity context is not available");const m=s.atVersion(1);if(!m)throw new Error("EntityContext v1 not available");if(!m.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:m.entity}}function r(){const s=(0,u.qO)("entity-context");if(!s)throw new Error("Entity context is not available");const m=s.atVersion(1);if(!m)throw new Error("EntityContext v1 not available");const{entity:g,loading:p,error:v,refresh:R}=m;return{entity:g,loading:p,error:v,refresh:R}}},56299:(K,y,e)=>{e.d(y,{A:()=>a});var t=e(78560),l=e(90712),u=e(16400);function a(A){const{entity:c,loading:h,error:d}=(0,u.TY)(),{allowed:r,loading:s,error:m}=(0,l.J)({permission:A,resourceRef:c?(0,t.U2)(c):void 0});return h||s?{loading:!0,allowed:!1}:d?{loading:!1,allowed:!1,error:d}:{loading:!1,allowed:r,error:m}}},20987:(K,y,e)=>{e.d(y,{s:()=>u});var t=e(77555),l=e(97388);const u=(0,l.Q6)("catalog:entity-route-ref",()=>(0,t.H)({id:"catalog:entity",params:["namespace","kind","name"]}));function a(A){var c,h;return{kind:A.kind.toLocaleLowerCase("en-US"),namespace:(h=(c=A.metadata.namespace)==null?void 0:c.toLocaleLowerCase("en-US"))!=null?h:DEFAULT_NAMESPACE,name:A.metadata.name}}},80084:(K,y,e)=>{e.d(y,{j:()=>l});var t=e(97963);const l=(0,t.h)({id:"catalog-react",messages:{catalogFilter:{title:"Filters",buttonTitle:"Filters"},entityKindPicker:{title:"Kind",errorMessage:"Failed to load entity kinds"},entityLifecyclePicker:{title:"Lifecycle"},entityNamespacePicker:{title:"Namespace"},entityOwnerPicker:{title:"Owner"},entityProcessingStatusPicker:{title:"Processing Status"},entityTagPicker:{title:"Tags"},entityPeekAheadPopover:{title:"Drill into the entity to see all of the tags.",emailCardAction:{title:"Email {{email}}",subTitle:"mailto {{email}}"},entityCardActionsTitle:"Show details"},entitySearchBar:{placeholder:"Search"},entityTypePicker:{title:"Type",errorMessage:"Failed to load entity types",optionAllTitle:"all"},favoriteEntity:{addToFavorites:"Add to favorites",removeFromFavorites:"Remove from favorites"},inspectEntityDialog:{title:"Entity Inspector",closeButtonTitle:"Close",ancestryPage:{title:"Ancestry"},colocatedPage:{title:"Colocated",description:"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).",alertNoLocation:"Entity had no location information.",alertNoEntity:"There were no other entities on this location."},jsonPage:{title:"Entity as JSON",description:"This is the raw entity data as received from the catalog, on JSON form."},overviewPage:{title:"Overview"},yamlPage:{title:"Entity as YAML",description:"This is the raw entity data as received from the catalog, on YAML form."}},unregisterEntityDialog:{title:"Are you sure you want to unregister this entity?",cancelButtonTitle:"Cancel",deleteButtonTitle:"Delete Entity",deleteEntitySuccessMessage:"Removed entity {{entityName}}",bootstrapState:{title:'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "{{location}}"). If you believe this is in error, please contact the {{appTitle}} integrator.',advancedDescription:"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.",advancedOptions:"Advanced Options"},onlyDeleteStateTitle:"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.",unregisterState:{title:"This action will unregister the following entities:",subTitle:"Located at the following location:",description:"To undo, just re-register the entity in {{appTitle}}.",unregisterButtonTitle:"Unregister Location",advancedOptions:"Advanced Options",advancedDescription:"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."},errorStateTitle:"Internal error: Unknown state"},userListPicker:{defaultOrgName:"Company",personalFilter:{title:"Personal",ownedLabel:"Owned",starredLabel:"Starred"},orgFilterAllLabel:"All"}}})},699:(K,y,e)=>{e.d(y,{t:()=>l});var t=e(78560);function l(u,a,A){var h;let c=((h=u==null?void 0:u.relations)==null?void 0:h.filter(d=>d.type===a).map(d=>(0,t.KU)(d.targetRef)))||[];return A!=null&&A.kind&&(c=c.filter(d=>d.kind.toLocaleLowerCase("en-US")===A.kind.toLocaleLowerCase("en-US"))),c}},99361:(K,y,e)=>{e.d(y,{_:()=>Kn});var t=e(55488),l=e(97214),u=e(64398),a=e(82326),A=e(16654),c=e(96872),h=e(62905),d=e(16454),r=e(99338),s=e(75202),m=e(85408),g=e(76888),p=e(77026),v=e(72814),R=e(45809),P=e(25999),T=e(699),D=e(14158),B=e(20987),M=e(16400),b=e(37281),i=e(14041),j=e(46123),U=e(77125),G=e(64947),F=e(76891),Z=e(93453),_=e(46805),N=e(59461),V=e(61477),L=e(37197),O=e(58837),W=e(74219),I=e(98890),w=e(78560),Q=e(30043),J=e(73466),Y=e(18139);function z(ie){var Bt;const Ee=(0,Y.gf)(Q.v),je=(Bt=ie.metadata.annotations)==null?void 0:Bt[I.r2],Le=ie.metadata.uid,xe=je==="bootstrap:bootstrap",Fe=(0,J.A)(async()=>{const vt=Ee.getLocationByRef(je);let Mt;if(!je)Mt=Promise.resolve([]);else{const Ft=`metadata.annotations.${I.r2}`;Mt=Ee.getEntities({filter:{[Ft]:je},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(Dt=>Dt.items)}return Promise.all([vt,Mt]).then(([Ft,Dt])=>({location:Ft,colocatedEntities:Dt}))},[Ee,ie]),Ve=(0,i.useCallback)(async function(){const{location:Mt}=Fe.value;await Ee.removeLocationById(Mt.id)},[Ee,Fe]),dt=(0,i.useCallback)(async function(){await Ee.removeEntityByUid(Le)},[Ee,Le]);if(xe)return{type:"bootstrap",location:je,deleteEntity:dt};const{loading:ot,error:pt,value:yt}=Fe;if(ot)return{type:"loading"};if(pt)return{type:"error",error:pt};const{location:Pt,colocatedEntities:st}=yt;return Pt?{type:"unregister",location:je,colocatedEntities:st.map(w.sM),unregisterLocation:Ve,deleteEntity:dt}:{type:"only-delete",deleteEntity:dt}}var q=e(34477),te=e(54195),se=e(99424),ne=e(3399),oe=e(80084),me=e(10265);const Se=(0,O.A)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),be=({entity:ie,onConfirm:Ee,onClose:je})=>{var Ft;const Le=(0,Y.gf)(q.k),xe=(0,Y.gf)(te.U),Fe=Se(),Ve=z(ie),[dt,ot]=(0,i.useState)(!1),[pt,yt]=(0,i.useState)(!1),Pt=(Ft=xe.getOptionalString("app.title"))!=null?Ft:"Backstage",{t:st}=(0,me.i)(oe.j),Bt=(0,i.useCallback)(async function(){if("unregisterLocation"in Ve){yt(!0);try{await Ve.unregisterLocation(),Ee()}catch(zt){(0,ne.tX)(zt),Le.post({message:zt.message})}finally{yt(!1)}}},[Le,Ee,Ve]),vt=(0,i.useCallback)(async function(){var zt;if("deleteEntity"in Ve){yt(!0);try{await Ve.deleteEntity();const kt=(zt=ie.metadata.title)!=null?zt:ie.metadata.name;Ee(),Le.post({message:st("unregisterEntityDialog.deleteEntitySuccessMessage",{entityName:kt}),severity:"success",display:"transient"})}catch(kt){(0,ne.tX)(kt),Le.post({message:kt.message})}finally{yt(!1)}}},[Le,Ee,Ve,ie,st]),Mt=()=>i.createElement(Z.A,{className:Fe.dialogActions},i.createElement(G.A,{onClick:je,color:"primary"},st("unregisterEntityDialog.cancelButtonTitle")));return Ve.type==="loading"?i.createElement(c.k,null):Ve.type==="error"?i.createElement(se._,{error:Ve.error}):Ve.type==="bootstrap"?i.createElement(i.Fragment,null,i.createElement(W.A,{severity:"info"},st("unregisterEntityDialog.bootstrapState.title",{appTitle:Pt,location:Ve.location})),i.createElement(U.A,{marginTop:2},!dt&&i.createElement(i.Fragment,null,i.createElement(G.A,{variant:"text",size:"small",color:"primary",className:Fe.advancedButton,onClick:()=>ot(!0)},st("unregisterEntityDialog.bootstrapState.advancedOptions")),i.createElement(Mt,null)),dt&&i.createElement(i.Fragment,null,i.createElement(N.A,null,st("unregisterEntityDialog.bootstrapState.advancedDescription")),i.createElement(G.A,{variant:"contained",color:"secondary",disabled:pt,onClick:vt},st("unregisterEntityDialog.deleteButtonTitle")),i.createElement(Mt,null)))):Ve.type==="only-delete"?i.createElement(i.Fragment,null,i.createElement(N.A,null,st("unregisterEntityDialog.onlyDeleteStateTitle")),i.createElement(G.A,{variant:"contained",color:"secondary",disabled:pt,onClick:vt},st("unregisterEntityDialog.deleteButtonTitle")),i.createElement(Mt,null)):Ve.type==="unregister"?i.createElement(i.Fragment,null,i.createElement(N.A,null,st("unregisterEntityDialog.unregisterState.title")),i.createElement(N.A,{component:"ul"},Ve.colocatedEntities.map(Dt=>i.createElement("li",{key:`${Dt.kind}:${Dt.namespace}/${Dt.name}`},i.createElement(b.z,{entityRef:Dt})))),i.createElement(N.A,null,st("unregisterEntityDialog.unregisterState.subTitle")),i.createElement(N.A,{component:"ul"},i.createElement("li",null,Ve.location)),i.createElement(N.A,null,st("unregisterEntityDialog.unregisterState.description",{appTitle:Pt})),i.createElement(U.A,{marginTop:2},i.createElement(G.A,{variant:"contained",color:"secondary",disabled:pt,onClick:Bt},st("unregisterEntityDialog.unregisterState.unregisterButtonTitle")),!dt&&i.createElement(U.A,{component:"span",marginLeft:2},i.createElement(G.A,{variant:"text",size:"small",color:"primary",className:Fe.advancedButton,onClick:()=>ot(!0)},st("unregisterEntityDialog.unregisterState.advancedOptions")))),dt&&i.createElement(i.Fragment,null,i.createElement(U.A,{paddingTop:4,paddingBottom:4},i.createElement(L.A,null)),i.createElement(N.A,null,st("unregisterEntityDialog.unregisterState.advancedDescription")),i.createElement(G.A,{variant:"contained",color:"secondary",disabled:pt,onClick:vt},st("unregisterEntityDialog.deleteButtonTitle")))):i.createElement(W.A,{severity:"error"},st("unregisterEntityDialog.errorStateTitle"))},Be=ie=>{const{open:Ee,onConfirm:je,onClose:Le,entity:xe}=ie,{t:Fe}=(0,me.i)(oe.j);return i.createElement(F.A,{open:Ee,onClose:Le},i.createElement(V.A,{id:"responsive-dialog-title"},Fe("unregisterEntityDialog.title")),i.createElement(_.A,null,i.createElement(be,{entity:xe,onConfirm:je,onClose:Le})))};var Je=e(38605),Qe=e(31653),Te=e(80609),Ie=e(47090),Me=e(95208),He=e(53373),Ye=e.n(He),lt=e(18690),Et=e(53318),We=e(10437);const ze=We.A;function we(ie,Ee){if(ie)return ie.toLocaleLowerCase("en-US");if(Ee)try{return(0,w.KU)(Ee).kind.toLocaleLowerCase("en-US")}catch{return}}function ce(ie,Ee){const je=(0,Me.n)(),Le=we(ie,Ee);return Le&&je.getSystemIcon(`kind:${Le}`)||ze}function Ae(ie){const{kind:Ee,entityRef:je,...Le}=ie,xe=ce(Ee,je);return i.createElement(xe,{...Le})}const Re=(0,O.A)(ie=>({node:{fill:ie.palette.grey[300],stroke:ie.palette.grey[300],"&.primary":{fill:ie.palette.primary.light,stroke:ie.palette.primary.light},"&.secondary":{fill:ie.palette.secondary.light,stroke:ie.palette.secondary.light}},text:{fill:ie.palette.getContrastText(ie.palette.grey[300]),"&.primary":{fill:ie.palette.primary.contrastText},"&.secondary":{fill:ie.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Ne(ie){const Ee=(0,Y.gf)(Q.v),je=(0,w.U2)(ie),{loading:Le,error:xe,value:Fe}=(0,J.A)(async()=>{const Ve=await Ee.getEntityAncestors({entityRef:je}),dt=new Array,ot=new Array;for(const pt of Ve.items){const yt=(0,w.U2)(pt.entity),Pt=yt===Ve.rootEntityRef;dt.push({id:yt,root:Pt,...pt.entity});for(const st of pt.parentEntityRefs)ot.push({from:yt,to:st})}return{nodes:dt,edges:ot}},[je]);return{loading:Le,error:xe,nodes:(Fe==null?void 0:Fe.nodes)||[],edges:(Fe==null?void 0:Fe.edges)||[]}}function ht({node:ie}){const Ee=Re(),je=(0,lt.Zp)(),Le=(0,v.S)(B.s),[xe,Fe]=(0,i.useState)(0),[Ve,dt]=(0,i.useState)(0),ot=(0,Me.n)(),pt=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{if(pt.current){let{height:zt,width:kt}=pt.current.getBBox();zt=Math.round(zt),kt=Math.round(kt),(zt!==Ve||kt!==xe)&&(Fe(kt),dt(zt))}},[xe,Ve]);const yt=ot.getSystemIcon(`kind:${ie.kind.toLocaleLowerCase("en-US")}`),Pt=10,st=Ve,Bt=yt?st+Pt:0,vt=Bt+xe+Pt*2,Mt=Ve+Pt*2,Ft=ie.metadata.title||(ie.kind&&ie.metadata.name&&ie.metadata.namespace?(0,Et.S)({kind:ie.kind,name:ie.metadata.name,namespace:ie.metadata.namespace||""}):ie.id),Dt=()=>{je(Le({kind:ie.kind,namespace:ie.metadata.namespace||t.oQ,name:ie.metadata.name}))};return i.createElement("g",{onClick:Dt,className:Ee.clickable},i.createElement("rect",{className:Ye()(Ee.node,ie.root?"secondary":"primary"),width:vt,height:Mt,rx:10}),yt&&i.createElement(Ae,{kind:ie.kind,y:Pt,x:Pt,width:st,height:st,className:Ye()(Ee.text,ie.root?"secondary":"primary")}),i.createElement("text",{ref:pt,className:Ye()(Ee.text,ie.root?"secondary":"primary"),y:Mt/2,x:Bt+(xe+Pt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Ft))}function Ot(ie){const{loading:Ee,error:je,nodes:Le,edges:xe}=Ne(ie.entity),{t:Fe}=(0,me.i)(oe.j);return Ee?i.createElement(c.k,null):je?i.createElement(se._,{error:je}):i.createElement(i.Fragment,null,i.createElement(N.A,{variant:"h2"},Fe("inspectEntityDialog.ancestryPage.title")),i.createElement(N.A,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",i.createElement(s.N_,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),i.createElement(U.A,{mt:4},i.createElement(Te.w,{nodes:Le,edges:xe,renderNode:ht,direction:Ie.D.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}var ct=e(58007),ut=e(8109),it=e(40703),Ce=e(48653),Pe=e(46423),Ge=e(5951),_e=e(62261),Xe=e(72501),Ke=e(97262);const At=(0,O.A)(ie=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:ie.spacing(2)},helpIcon:{marginLeft:ie.spacing(1),color:ie.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Ue(ie){const Ee=At();return i.createElement(Ge.A,{...ie,primaryTypographyProps:{className:Ee.monospace},secondaryTypographyProps:{className:Ee.monospace}})}function et(ie){const Ee=At();return i.createElement(_e.A,{className:Ee.monospace},ie.children)}function tt(ie){return i.createElement(U.A,{mt:2},i.createElement(it.A,{variant:"outlined"},i.createElement(Ce.A,null,i.createElement(Xe.A,{variant:"h6",gutterBottom:!0},ie.title,ie.helpLink&&i.createElement(H,{to:ie.helpLink})),ie.children)))}function pe(ie){if(ie.match(/^url:https?:\/\//))return ie.slice(4);if(ie.match(/^https?:\/\//))return ie}function k(ie){const[Ee,je]=ie.entry,Le=pe(je);return i.createElement(ut.A,null,ie.indent&&i.createElement(Pe.A,null),i.createElement(Ue,{primary:Ee,secondary:Le?i.createElement(s.N_,{to:Le},je):je}))}function H(ie){const Ee=At();return i.createElement(s.N_,{to:ie.to,className:Ee.helpIcon},i.createElement(Ke.A,{fontSize:"inherit"}))}const le=(0,O.A)({root:{display:"flex",flexDirection:"column"}});function ve(ie){var ot,pt;const Ee=(0,Y.gf)(Q.v),je=(0,w.U2)(ie),Le=(ot=ie.metadata.annotations)==null?void 0:ot[I.Eo],xe=(pt=ie.metadata.annotations)==null?void 0:pt[I.r2],{loading:Fe,error:Ve,value:dt}=(0,J.A)(async()=>!Le&&!xe?[]:(await Ee.getEntities({filter:[...Le?[{[`metadata.annotations.${I.Eo}`]:Le}]:[],...xe?[{[`metadata.annotations.${I.r2}`]:xe}]:[]]})).items,[Le,xe]);return{loading:Fe,error:Ve,location:Le,originLocation:xe,colocatedEntities:dt==null?void 0:dt.filter(yt=>(0,w.U2)(yt)!==je)}}function ge(ie){return i.createElement(ct.A,{dense:!0},ie.header&&i.createElement(k,{key:"header",entry:ie.header}),ie.entities.map(Ee=>i.createElement(ut.A,{key:(0,w.U2)(Ee)},i.createElement(Ue,{primary:i.createElement(b.z,{entityRef:Ee})}))))}function fe(ie){const{entity:Ee}=ie,{t:je}=(0,me.i)(oe.j),{loading:Le,error:xe,location:Fe,originLocation:Ve,colocatedEntities:dt}=ve(Ee);if(Le)return i.createElement(c.k,null);if(xe)return i.createElement(se._,{error:xe});if(!Fe&&!Ve)return i.createElement(W.A,{severity:"warning"},je("inspectEntityDialog.colocatedPage.alertNoLocation"));if(!(dt!=null&&dt.length))return i.createElement(W.A,{severity:"info"},je("inspectEntityDialog.colocatedPage.alertNoEntity"));if(Fe===Ve)return i.createElement(ge,{entities:dt});const ot=dt.filter(yt=>{var Pt;return((Pt=yt.metadata.annotations)==null?void 0:Pt[I.Eo])===Fe}),pt=dt.filter(yt=>{var Pt;return((Pt=yt.metadata.annotations)==null?void 0:Pt[I.r2])===Ve});return i.createElement(i.Fragment,null,ot.length>0&&i.createElement(ge,{entities:ot,header:["At the same location",Fe]}),pt.length>0&&i.createElement(ge,{entities:pt,header:["At the same origin",Ve]}))}function at(ie){const Ee=le(),{t:je}=(0,me.i)(oe.j);return i.createElement(i.Fragment,null,i.createElement(N.A,{variant:"h2"},je("inspectEntityDialog.colocatedPage.title")),i.createElement(N.A,null,je("inspectEntityDialog.colocatedPage.description")),i.createElement("div",{className:Ee.root},i.createElement(fe,{entity:ie.entity})))}var gt=e(62112);function Rt(ie){return Object.fromEntries([...Object.entries(ie)].sort((Ee,je)=>Ee[0]<je[0]?-1:1))}function It(ie){const{t:Ee}=(0,me.i)(oe.j);return i.createElement(i.Fragment,null,i.createElement(N.A,{variant:"h2"},Ee("inspectEntityDialog.jsonPage.title")),i.createElement(N.A,null,Ee("inspectEntityDialog.jsonPage.description")),i.createElement(N.A,null,i.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},i.createElement(gt.z,{text:JSON.stringify(Rt(ie.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}var bt=e(65569),X=e(87809),S=e.n(X),$=e(40074),re=e.n($),ye=e(31994);const De=(0,O.A)({root:{display:"flex",flexDirection:"column"}});function Ze(ie){var Pt,st,Bt;const Ee=De(),{apiVersion:je,kind:Le,metadata:xe,spec:Fe,relations:Ve=[],status:dt={}}=ie.entity,ot=S()(re()(Ve,vt=>vt.targetRef),"type"),{t:pt}=(0,me.i)(oe.j),yt=(0,w.U2)(ie.entity);return i.createElement(i.Fragment,null,i.createElement(N.A,{variant:"h2"},pt("inspectEntityDialog.overviewPage.title")),i.createElement("div",{className:Ee.root},i.createElement(tt,{title:"Identity"},i.createElement(ct.A,{dense:!0},i.createElement(ut.A,null,i.createElement(Ue,{primary:"apiVersion",secondary:je})),i.createElement(ut.A,null,i.createElement(Ue,{primary:"kind",secondary:Le})),(Fe==null?void 0:Fe.type)&&i.createElement(ut.A,null,i.createElement(Ue,{primary:"spec.type",secondary:(Pt=Fe.type)==null?void 0:Pt.toString()})),xe.uid&&i.createElement(ut.A,null,i.createElement(Ue,{primary:"uid",secondary:xe.uid}),i.createElement(bt.A,null,i.createElement(ye.l,{text:xe.uid}))),xe.etag&&i.createElement(ut.A,null,i.createElement(Ue,{primary:"etag",secondary:xe.etag}),i.createElement(bt.A,null,i.createElement(ye.l,{text:xe.etag}))),i.createElement(ut.A,null,i.createElement(Ue,{primary:"entityRef",secondary:yt}),i.createElement(bt.A,null,i.createElement(ye.l,{text:yt}))))),i.createElement(tt,{title:"Metadata"},!!Object.keys(xe.annotations||{}).length&&i.createElement(ct.A,{dense:!0,subheader:i.createElement(et,null,"Annotations",i.createElement(H,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(xe.annotations).map(vt=>i.createElement(k,{key:vt[0],indent:!0,entry:vt}))),!!Object.keys(xe.labels||{}).length&&i.createElement(ct.A,{dense:!0,subheader:i.createElement(et,null,"Labels")},Object.entries(xe.labels).map(vt=>i.createElement(k,{key:vt[0],indent:!0,entry:vt}))),!!((st=xe.tags)!=null&&st.length)&&i.createElement(ct.A,{dense:!0,subheader:i.createElement(et,null,"Tags")},xe.tags.map((vt,Mt)=>i.createElement(ut.A,{key:`${vt}-${Mt}`},i.createElement(Pe.A,null),i.createElement(Ue,{primary:vt}))))),!!Ve.length&&i.createElement(tt,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(ot).map(([vt,Mt],Ft)=>i.createElement("div",{key:Ft},i.createElement(ct.A,{dense:!0,subheader:i.createElement(et,null,vt)},Mt.map(Dt=>i.createElement(ut.A,{key:Dt.targetRef},i.createElement(Ue,{primary:i.createElement(b.z,{entityRef:Dt.targetRef})}))))))),!!((Bt=dt.items)!=null&&Bt.length)&&i.createElement(tt,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},dt.items.map((vt,Mt)=>i.createElement("div",{key:Mt},i.createElement(Xe.A,null,vt.level,": ",vt.type),i.createElement(U.A,{ml:2},vt.message))))))}var St=e(51419);function Lt(ie){const{t:Ee}=(0,me.i)(oe.j);return i.createElement(i.Fragment,null,i.createElement(N.A,{variant:"h2"},Ee("inspectEntityDialog.yamlPage.title")),i.createElement(N.A,null,Ee("inspectEntityDialog.yamlPage.description")),i.createElement(N.A,null,i.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},i.createElement(gt.z,{text:St.Ay.stringify(Rt(ie.entity)),language:"yaml",showCopyCodeButton:!0}))))}const Nt=(0,O.A)(ie=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:ie.palette.background.paper},tabs:{borderRight:`1px solid ${ie.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Ut(ie){const{children:Ee,value:je,index:Le,...xe}=ie,Fe=Nt();return i.createElement("div",{role:"tabpanel",hidden:je!==Le,id:`vertical-tabpanel-${Le}`,"aria-labelledby":`vertical-tab-${Le}`,className:Fe.tabContents,...xe},je===Le&&i.createElement(U.A,{pl:3,pr:3},Ee))}function $t(ie){return{id:`vertical-tab-${ie}`,"aria-controls":`vertical-tabpanel-${ie}`}}function xt(ie){const Ee=Nt(),[je,Le]=i.useState(0),{t:xe}=(0,me.i)(oe.j);return(0,i.useEffect)(()=>{Le(0)},[ie.open]),ie.entity?i.createElement(F.A,{fullWidth:!0,maxWidth:"xl",open:ie.open,onClose:ie.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:Ee.fullHeightDialog}},i.createElement(V.A,{id:"entity-inspector-dialog-title"},xe("inspectEntityDialog.title")),i.createElement(_.A,{dividers:!0},i.createElement("div",{className:Ee.root},i.createElement(Qe.A,{orientation:"vertical",variant:"scrollable",value:je,onChange:(Fe,Ve)=>Le(Ve),"aria-label":"Inspector options",className:Ee.tabs},i.createElement(Je.A,{label:"Overview",...$t(0)}),i.createElement(Je.A,{label:"Ancestry",...$t(1)}),i.createElement(Je.A,{label:"Colocated",...$t(2)}),i.createElement(Je.A,{label:"Raw JSON",...$t(3)}),i.createElement(Je.A,{label:"Raw YAML",...$t(4)})),i.createElement(Ut,{value:je,index:0},i.createElement(Ze,{entity:ie.entity})),i.createElement(Ut,{value:je,index:1},i.createElement(Ot,{entity:ie.entity})),i.createElement(Ut,{value:je,index:2},i.createElement(at,{entity:ie.entity})),i.createElement(Ut,{value:je,index:3},i.createElement(It,{entity:ie.entity})),i.createElement(Ut,{value:je,index:4},i.createElement(Lt,{entity:ie.entity})))),i.createElement(Z.A,null,i.createElement(G.A,{onClick:ie.onClose,color:"primary"},xe("inspectEntityDialog.closeButtonTitle")))):null}var Tt=e(29365),Kt=e(26343),jt=e(28233),Vt=e(55197),qt=e(71677),xn=e(85005),wn=e(71407),$n=e(26314),en=e(56299),Qt=e(71913),fn=e(92399),on=e(58954);function tn(ie){var pt;const{unregisterEntityOptions:Ee,isUnregisterAllowed:je,onUnregisterEntity:Le,onClose:xe}=ie,{t:Fe}=(0,me.i)(on.W),Ve=typeof(Ee==null?void 0:Ee.disableUnregister)=="boolean",dt=(pt=!je||(Ve?!!(Ee!=null&&Ee.disableUnregister):(Ee==null?void 0:Ee.disableUnregister)==="disable"))!=null?pt:!1;let ot=i.createElement(i.Fragment,null);return(Ee==null?void 0:Ee.disableUnregister)!=="hidden"&&(ot=i.createElement(Kt.A,{onClick:()=>{xe(),Le()},disabled:dt},i.createElement(Pe.A,null,i.createElement(fn.A,{fontSize:"small"})),i.createElement(Ge.A,{primary:Fe("entityContextMenu.unregisterMenuTitle")}))),i.createElement(i.Fragment,null,ot)}var qn=e(36338);const ea=(0,O.A)(ie=>({button:{color:ie.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function ta(ie){const{UNSTABLE_extraContextMenuItems:Ee,UNSTABLE_contextMenuOptions:je,onUnregisterEntity:Le,onInspectEntity:xe}=ie,{t:Fe}=(0,me.i)(on.W),[Ve,dt]=(0,i.useState)(),ot=ea(),yt=(0,en.A)(Qt.Nf).allowed,Pt=Dt=>{dt(Dt.currentTarget)},st=()=>{dt(void 0)},Bt=(0,Y.gf)(q.k),[vt,Mt]=(0,qn.A)();(0,i.useEffect)(()=>{!vt.error&&vt.value&&Bt.post({message:Fe("entityContextMenu.copiedMessage"),severity:"info",display:"transient"})},[vt,Bt,Fe]);const Ft=Ee&&[...Ee.map(Dt=>i.createElement(Kt.A,{key:Dt.title,onClick:()=>{st(),Dt.onClick()}},i.createElement(Pe.A,null,i.createElement(Dt.Icon,{fontSize:"small"})),i.createElement(Ge.A,{primary:Dt.title}))),i.createElement(L.A,{key:"the divider is here!"})];return i.createElement(i.Fragment,null,i.createElement(qt.Ay,{title:Fe("entityContextMenu.moreButtonTitle"),arrow:!0},i.createElement(Tt.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Ve,role:"button",onClick:Pt,"data-testid":"menu-button",className:ot.button,id:"long-menu"},i.createElement(wn.A,null))),i.createElement(Vt.Ay,{open:!!Ve,onClose:st,anchorEl:Ve,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},i.createElement(jt.A,{autoFocusItem:!!Ve},Ft,i.createElement(tn,{unregisterEntityOptions:je,isUnregisterAllowed:yt,onUnregisterEntity:Le,onClose:st}),i.createElement(Kt.A,{onClick:()=>{st(),xe()}},i.createElement(Pe.A,null,i.createElement(xn.A,{fontSize:"small"})),i.createElement(Ge.A,{primary:Fe("entityContextMenu.inspectMenuTitle")})),i.createElement(Kt.A,{onClick:()=>{st(),Mt(window.location.toString())}},i.createElement(Pe.A,null,i.createElement($n.A,{fontSize:"small"})),i.createElement(Ge.A,{primary:Fe("entityContextMenu.copyURLMenuTitle")})))))}var Wn=e(88549);const Nn="plugin.catalog.entityLayoutRoute",Rn=()=>null;(0,m.h)(Rn,Nn,!0),(0,m.h)(Rn,"core.gatherMountPoints",!0);function na(ie){const{entity:Ee,title:je}=ie;return i.createElement(U.A,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},i.createElement(U.A,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},Ee?i.createElement(R.d,{entityRef:Ee,hideIcon:!0}):je),Ee&&i.createElement(P.u,{entity:Ee}))}function aa(ie,Ee,je,Le){var dt,ot,pt,yt,Pt;const xe=(dt=ie!=null?ie:Le==null?void 0:Le.kind)!=null?dt:"",Fe=(ot=Ee!=null?Ee:Le==null?void 0:Le.metadata.namespace)!=null?ot:"";return{headerTitle:`${(Pt=(yt=(pt=Le==null?void 0:Le.metadata.title)!=null?pt:je)!=null?yt:Le==null?void 0:Le.metadata.name)!=null?Pt:""}${Fe&&Fe!==t.oQ?` in ${Fe}`:""}`,headerType:(()=>{let st=xe.toLocaleLowerCase("en-US");return Le&&Le.spec&&"type"in Le.spec&&(st+=" \u2014 ",st+=Le.spec.type.toLocaleLowerCase("en-US")),st})()}}function oa(ie){var xe,Fe;const{entity:Ee}=ie,je=(0,T.t)(Ee,l.vv),{t:Le}=(0,me.i)(on.W);return i.createElement(i.Fragment,null,je.length>0&&i.createElement(u.S,{label:Le("entityLabels.ownerLabel"),contentTypograpyRootComponent:"p",value:i.createElement(D.i,{entityRefs:je,defaultKind:"Group",color:"inherit"})}),((xe=Ee.spec)==null?void 0:xe.lifecycle)&&i.createElement(u.S,{label:Le("entityLabels.lifecycleLabel"),value:(Fe=Ee.spec.lifecycle)==null?void 0:Fe.toString()}))}const Kn=ie=>{var Tn,zn,jn;const{UNSTABLE_extraContextMenuItems:Ee,UNSTABLE_contextMenuOptions:je,children:Le,NotFoundComponent:xe}=ie,{kind:Fe,namespace:Ve,name:dt}=(0,g.K)(B.s),{entity:ot,loading:pt,error:yt}=(0,M.TY)(),Pt=(0,lt.zy)(),st=(0,p.O)(Le,sa=>sa.selectByComponentData({key:Nn,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:rn})=>{if(ot){if(rn.if&&!rn.if(ot))return[]}else return[];return[{path:rn.path,title:rn.title,children:rn.children,tabProps:rn.tabProps}]}),[ot]),{headerTitle:Bt,headerType:vt}=aa(Fe,Ve,dt,ot),[Mt,Ft]=(0,i.useState)(!1),[Dt,zt]=(0,i.useState)(!1),kt=(0,lt.Zp)(),ra=(0,v.S)(Wn.rQ),Sn=(0,v.S)(Wn.pS),{t:Fn}=(0,me.i)(on.W),va=async()=>{Ft(!1),zt(!1),kt(Sn?Sn():ra())};return(0,i.useEffect)(()=>{Ft(!1),zt(!1)},[Pt.pathname]),i.createElement(a.Y,{themeId:(jn=(zn=(Tn=ot==null?void 0:ot.spec)==null?void 0:Tn.type)==null?void 0:zn.toString())!=null?jn:"home"},i.createElement(A.Y,{title:i.createElement(na,{title:Bt,entity:ot}),pageTitleOverride:Bt,type:vt},ot&&i.createElement(i.Fragment,null,i.createElement(oa,{entity:ot}),i.createElement(ta,{UNSTABLE_extraContextMenuItems:Ee,UNSTABLE_contextMenuOptions:je,onUnregisterEntity:()=>Ft(!0),onInspectEntity:()=>zt(!0)}))),pt&&i.createElement(c.k,null),ot&&i.createElement(h.k,{routes:st}),yt&&i.createElement(d.U,null,i.createElement(W.A,{severity:"error"},yt.toString())),!pt&&!yt&&!ot&&i.createElement(d.U,null,xe||i.createElement(r.B,{title:Fn("entityLabels.warningPanelTitle")},"There is no ",Fe," with the requested"," ",i.createElement(s.N_,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),i.createElement(Be,{open:Mt,entity:ot,onConfirm:va,onClose:()=>Ft(!1)}),i.createElement(xt,{open:Dt,entity:ot,onClose:()=>zt(!1)}))};Kn.Route=Rn},730:(K,y,e)=>{e.d(y,{k:()=>B,B:()=>D});var t=e(16400),l=e(74219),u=e(14041),a=e(18690),A=e(30043),c=e(64947),h=e(76891),d=e(93453),r=e(61477),s=e(18139),m=e(34477),g=e(3399),p=e(58954),v=e(10265);function R(M){const{open:b,onClose:i,onConfirm:j,entity:U}=M,[G,F]=(0,u.useState)(!1),Z=(0,s.gf)(A.v),_=(0,s.gf)(m.k),{t:N}=(0,v.i)(p.W),V=async()=>{F(!0);try{const L=U.metadata.uid;await Z.removeEntityByUid(L),j()}catch(L){(0,g.tX)(L),_.post({message:L.message})}finally{F(!1)}};return u.createElement(h.A,{open:b,onClose:i},u.createElement(r.A,{id:"responsive-dialog-title"},N("deleteEntity.dialogTitle")),u.createElement(d.A,null,u.createElement(c.A,{variant:"contained",color:"secondary",disabled:G,onClick:V},N("deleteEntity.deleteButtonTitle")),u.createElement(c.A,{onClick:i,color:"primary"},N("deleteEntity.cancelButtonTitle"))))}var P=e(72814),T=e(88549);function D(M){var b,i;return((i=(b=M==null?void 0:M.metadata)==null?void 0:b.annotations)==null?void 0:i["backstage.io/orphan"])==="true"}function B(){const M=(0,a.Zp)(),b=(0,P.S)(T.rQ),[i,j]=(0,u.useState)(!1),{entity:U}=(0,t.tN)(),{t:G}=(0,v.i)(p.W),F=async()=>{j(!1),M(b())};return u.createElement(u.Fragment,null,u.createElement(l.A,{severity:"warning",onClick:()=>j(!0)},G("deleteEntity.description")),u.createElement(R,{open:i,entity:U,onConfirm:F,onClose:()=>j(!1)}))}},70944:(K,y,e)=>{e.d(y,{k:()=>P,s:()=>R});var t=e(78560),l=e(30043),u=e(16400),a=e(37281),A=e(77125),c=e(14041),h=e(99424);const d="backstage.io/catalog-processing";var r=e(18139),s=e(73466),m=e(58954),g=e(10265);const p=T=>T.error&&T.level==="error"&&T.type===d;async function v(T,D){return{items:(await D.getEntityAncestors({entityRef:T})).items.map(b=>{var U,G;return{errors:((G=(U=b.entity.status)==null?void 0:U.items)!=null?G:[]).filter(p).map(F=>F.error).filter(F=>!!F),entity:b.entity}}).filter(b=>b.errors.length>0)}}async function R(T,D){const B=D.apis.get(l.v);if(!B)throw new Error(`No implementation available for ${l.v}`);return(await v((0,t.U2)(T),B)).items.length>0}function P(){const{entity:T}=(0,u.tN)(),D=(0,t.U2)(T),B=(0,r.gf)(l.v),{loading:M,error:b,value:i}=(0,s.A)(async()=>v(D,B),[D,B]),{t:j}=(0,g.i)(m.W);return b?c.createElement(A.A,{mb:1},c.createElement(h._,{error:b})):M||!i?null:c.createElement(c.Fragment,null,i.items.map((U,G)=>c.createElement(A.A,{key:G,mb:1},(0,t.U2)(T)!==(0,t.U2)(U.entity)&&c.createElement(A.A,{p:1},j("entityProcessingErrorsDescription")," ",c.createElement(a.z,{entityRef:U.entity})),U.errors.map((F,Z)=>c.createElement(h._,{key:Z,error:F})))))}},78183:(K,y,e)=>{e.d(y,{G:()=>p,e:()=>g});var t=e(30043),l=e(16400),u=e(74219),a=e(14041),A=e(73466),c=e(77125),h=e(99424),d=e(18139),r=e(58954),s=e(10265);async function m(v,R){var D;const P=(D=v.relations)==null?void 0:D.map(B=>B.targetRef);if(!P||(P==null?void 0:P.length)<1||P.length>1e3)return[];const T=await R.getEntitiesByRefs({entityRefs:P,fields:["kind","metadata.name","metadata.namespace"]});return P.filter((B,M)=>T.items[M]===void 0)}async function g(v,R){const P=R.apis.get(t.v);if(!P)throw new Error(`No implementation available for ${t.v}`);return(await m(v,P)).length>0}function p(){const{entity:v}=(0,l.tN)(),R=(0,d.gf)(t.v),{loading:P,error:T,value:D}=(0,A.A)(async()=>m(v,R),[v,R]),{t:B}=(0,s.i)(r.W);return T?a.createElement(c.A,{mb:1},a.createElement(h._,{error:T})):P||!D||D.length===0?null:a.createElement(a.Fragment,null,a.createElement(u.A,{severity:"warning",style:{whiteSpace:"pre-line"}},B("entityRelationWarningDescription")," ",D.join(", ")))}},41507:(K,y,e)=>{e.d(y,{m:()=>r});var t=e(16400),l=e(14041),u=e(85408),a=e(18139),A=e(77026),c=e(73466);const h="core.backstage.entitySwitch",d=g=>null;(0,u.h)(d,h,!0);const r=g=>{var D,B;const{entity:p,loading:v}=(0,t.TY)(),R=(0,a.Q2)(),P=(0,A.O)(g.children,M=>M.selectByComponentData({key:h,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(b=>{if(v&&!p)return[];const{if:i,children:j}=b.props;return p?[{if:i==null?void 0:i(p,{apis:R}),children:j}]:[{if:i===void 0,children:j}]}),[R,p,v]);if(P.some(M=>typeof M.if=="object"&&"then"in M.if))return l.createElement(s,{results:P,renderMultipleMatches:g.renderMultipleMatches});if(g.renderMultipleMatches==="all"){const M=P.filter(b=>b.if).map(b=>b.children);return M.length===0?m(P):l.createElement(l.Fragment,null,M)}return(B=(D=P.find(M=>M.if))==null?void 0:D.children)!=null?B:m(P)};function s({results:g,renderMultipleMatches:p}){const{loading:v,value:R}=(0,c.A)(async()=>{var T;const P=g.map(async({if:D,children:B})=>{try{if(await D)return B}catch{}return null});if(p==="all"){const D=(await Promise.all(P)).filter(Boolean);return D.length===0?m(g):l.createElement(l.Fragment,null,D)}return(T=(await Promise.all(P)).find(Boolean))!=null?T:m(g)},[g]);return v||!R?null:R}function m(g){var p,v;return(v=(p=g.filter(R=>R.if===void 0)[0])==null?void 0:p.children)!=null?v:null}r.Case=d},85294:(K,y,e)=>{e.d(y,{VF:()=>u,Wm:()=>a});function t(r,s){return!!(r&&typeof r=="string"&&(r==null?void 0:r.toLocaleLowerCase("en-US"))===(s==null?void 0:s.toLocaleLowerCase("en-US")))}function l(r,s){return typeof s=="string"?t(r,s):s.length===0||s.some(m=>t(r,m))}function u(r){return h({kind:r})}function a(r){return h({kind:"component",type:r})}function A(r){return h({kind:"resource",type:r})}function c(r){return h({kind:"api",type:r})}function h(r){return s=>{var m;return!(r.kind&&!l(s.kind,r.kind)||r.type&&!l((m=s.spec)==null?void 0:m.type,r.type))}}function d(r){return s=>{var m;return l((m=s.metadata)==null?void 0:m.namespace,r)}}},59780:(K,y,e)=>{var Ce,Pe,Ge,_e,Xe,Ke,ka,Ha,Ga;e.d(y,{yW:()=>Et,XQ:()=>lt,sU:()=>it,TZ:()=>We,E:()=>ht,JF:()=>ct,yE:()=>Ae,bb:()=>Ne,yP:()=>Re,Sz:()=>ce,N8:()=>ze,Z9:()=>Ye});var t=e(78560),l=e(79112),u=e(3399),a=e(24259);function A(pe){return!pe.cursor}var c=e(10288),h=e.n(c);const d="catalog";var r=e(94214),s=Object.defineProperty,m=(pe,k,H)=>k in pe?s(pe,k,{enumerable:!0,configurable:!0,writable:!0,value:H}):pe[k]=H,g=(pe,k,H)=>(m(pe,typeof k!="symbol"?k+"":k,H),H);class p{constructor(k){g(this,"discoveryApi"),g(this,"fetchApi"),this.discoveryApi=k.discoveryApi,this.fetchApi=k.fetchApi||{fetch:h()}}async analyzeLocation(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/analyze-location").expand({});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"POST",body:JSON.stringify(k.body)})}async createLocation(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/locations{?dryRun}").expand({...k.query});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"POST",body:JSON.stringify(k.body)})}async deleteEntityByUid(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/entities/by-uid/{uid}").expand({uid:k.path.uid});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"DELETE"})}async deleteLocation(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/locations/{id}").expand({id:k.path.id});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"DELETE"})}async getEntities(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/entities{?fields,limit,filter*,offset,after,order*}").expand({...k.query});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"GET"})}async getEntitiesByQuery(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/entities/by-query{?fields,limit,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}").expand({...k.query});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"GET"})}async getEntitiesByRefs(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/entities/by-refs/{?filter*}").expand({...k.query});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"POST",body:JSON.stringify(k.body)})}async getEntityAncestryByName(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/entities/by-name/{kind}/{namespace}/{name}/ancestry").expand({kind:k.path.kind,namespace:k.path.namespace,name:k.path.name});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"GET"})}async getEntityByName(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/entities/by-name/{kind}/{namespace}/{name}").expand({kind:k.path.kind,namespace:k.path.namespace,name:k.path.name});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"GET"})}async getEntityByUid(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/entities/by-uid/{uid}").expand({uid:k.path.uid});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"GET"})}async getEntityFacets(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/entity-facets{?facet*,filter*}").expand({...k.query});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"GET"})}async getLocation(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/locations/{id}").expand({id:k.path.id});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"GET"})}async getLocationByEntity(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/locations/by-entity/{kind}/{namespace}/{name}").expand({kind:k.path.kind,namespace:k.path.namespace,name:k.path.name});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"GET"})}async getLocations(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/locations").expand({});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"GET"})}async refreshEntity(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/refresh").expand({});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"POST",body:JSON.stringify(k.body)})}async validateEntity(k,H){const le=await this.discoveryApi.getBaseUrl(d),ge=r.parse("/validate-entity").expand({});return await this.fetchApi.fetch(`${le}${ge}`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"POST",body:JSON.stringify(k.body)})}}var v=Object.defineProperty,R=(pe,k,H)=>k in pe?v(pe,k,{enumerable:!0,configurable:!0,writable:!0,value:H}):pe[k]=H,P=(pe,k,H)=>(R(pe,k+"",H),H);class T{constructor(k){P(this,"apiClient"),this.apiClient=new p(k)}async getEntityAncestors(k,H){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,t.KU)(k.entityRef)},H))}async getLocationById(k,H){return await this.requestOptional(await this.apiClient.getLocation({path:{id:k}},H))}async getLocationByEntity(k,H){return await this.requestOptional(await this.apiClient.getLocationByEntity({path:(0,t.KU)(k)},H))}async getEntities(k,H){const{filter:le=[],fields:ve=[],order:ge,offset:fe,limit:at,after:gt}=k!=null?k:{},Rt=[];if(ge)for(const X of[ge].flat())X&&Rt.push(`${X.order}:${X.field}`);const It=await this.requestRequired(await this.apiClient.getEntities({query:{fields:ve,limit:at,filter:this.getFilterValue(le),offset:fe,after:gt,order:ge?Rt:void 0}},H));if(Rt.length)return{items:It};const bt=(X,S)=>{var $,re;if((($=X.metadata)==null?void 0:$.name)===void 0||X.kind===void 0||((re=S.metadata)==null?void 0:re.name)===void 0||S.kind===void 0)return 0;const ye=(0,t.U2)(X),De=(0,t.U2)(S);return ye<De?-1:ye>De?1:0};return{items:It.sort(bt)}}async getEntitiesByRefs(k,H){const le=await this.apiClient.getEntitiesByRefs({body:{entityRefs:k.entityRefs,fields:k.fields},query:{filter:this.getFilterValue(k.filter)}},H);if(!le.ok)throw await u.o3.fromResponse(le);const{items:ve}=await le.json();return{items:ve.map(ge=>ge!=null?ge:void 0)}}async queryEntities(k={},H){var le,ve;const ge={};if(A(k)){const{fields:fe=[],filter:at,limit:gt,orderFields:Rt,fullTextFilter:It}=k;ge.filter=this.getFilterValue(at),gt!==void 0&&(ge.limit=gt),Rt!==void 0&&(ge.orderField=(Array.isArray(Rt)?Rt:[Rt]).map(({field:X,order:S})=>`${X},${S}`)),fe.length&&(ge.fields=fe);const bt=(le=It==null?void 0:It.term)==null?void 0:le.trim();bt&&(ge.fullTextFilterTerm=bt),(ve=It==null?void 0:It.fields)!=null&&ve.length&&(ge.fullTextFilterFields=It.fields)}else{const{fields:fe=[],limit:at,cursor:gt}=k;ge.cursor=gt,at!==void 0&&(ge.limit=at),fe.length&&(ge.fields=fe)}return this.apiClient.getEntitiesByQuery({query:ge},H).then(fe=>fe.json())}async getEntityByRef(k,H){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,t.KU)(k)},H))}async getEntityByName(k,H){const{kind:le,namespace:ve="default",name:ge}=k;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:le,namespace:ve,name:ge}},H))}async refreshEntity(k,H){const le=await this.apiClient.refreshEntity({body:{entityRef:k}},H);if(le.status!==200)throw new Error(await le.text())}async getEntityFacets(k,H){const{filter:le=[],facets:ve}=k;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:ve,filter:this.getFilterValue(le)}},H))}async addLocation(k,H){const{type:le="url",target:ve,dryRun:ge}=k,fe=await this.apiClient.createLocation({body:{type:le,target:ve},query:{dryRun:ge?"true":void 0}},H);if(fe.status!==201)throw new Error(await fe.text());const{location:at,entities:gt,exists:Rt}=await fe.json();if(!at)throw new Error(`Location wasn't added: ${ve}`);return{location:at,entities:gt,exists:Rt}}async getLocationByRef(k,H){return(await this.requestRequired(await this.apiClient.getLocations({},H))).map(ve=>ve.data).find(ve=>k===(0,l.KL)(ve))}async removeLocationById(k,H){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:k}},H))}async removeEntityByUid(k,H){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:k}},H))}async validateEntity(k,H,le){const ve=await this.apiClient.validateEntity({body:{entity:k,location:H}},le);if(ve.ok)return{valid:!0};if(ve.status!==400)throw await u.o3.fromResponse(ve);const{errors:ge=[]}=await ve.json();return{valid:!1,errors:ge}}async requestIgnored(k){if(!k.ok)throw await u.o3.fromResponse(k)}async requestRequired(k){if(!k.ok)throw await u.o3.fromResponse(k);return k.json()}async requestOptional(k){if(!k.ok){if(k.status===404)return;throw await u.o3.fromResponse(k)}return await k.json()}getFilterValue(k=[]){const H=[];for(const le of[k].flat()){const ve=[];for(const[ge,fe]of Object.entries(le))for(const at of[fe].flat())at===a.c?ve.push(ge):typeof at=="string"&&ve.push(`${ge}=${at}`);ve.length&&H.push(ve.join(","))}return H}}var D=e(30043),B=e(9974),M=e(91072),b=e(20987),i=e(88549),j=e(50809),U=e(45843),G=e(61617),F=e(95159),Z=e(83392),_=e(18050),N=e(39896);function V(pe){const{years:k=0,months:H=0,weeks:le=0,days:ve=0,hours:ge=0,minutes:fe=0,seconds:at=0,milliseconds:gt=0}=pe;return((((k*365+H*30+le*7+ve)*24+ge)*60+fe)*60+at)*1e3+gt}var L=e(25033),O=e.n(L),W=e(25295),I=e.n(W),w=e(96403),Q=e.n(w),J=e(96479),Y=e(14451),z=e(94389),q=e(17400),te=e(71865),se=e(52755),ne=e(89350),oe=e(33602),me=e(48108),Se=e(55700);const be={seconds:10},Be={milliseconds:50},Je={api:q.A,component:ne.A,system:z.A,resource:Se.A,domain:Y.A,location:se.A,user:me.A,group:oe.A,template:te.A};function Qe(pe){return{async:pe.async,render:({entityRef:k,entity:H,context:le})=>({snapshot:(0,J.T)(H||k,le),loadEntity:pe.async})}}const tt=class tt{constructor(k){mt(this,Ke);mt(this,Ce);mt(this,Pe);mt(this,Ge);mt(this,_e);mt(this,Xe);var fe,at,gt,Rt;const H=(fe=k.cacheTtl)!=null?fe:be,le=(at=k.batchDelay)!=null?at:Be,ve=(gt=k.renderer)!=null?gt:Qe({async:!0}),ge={};if(Object.entries(Je).forEach(([It,bt])=>{ge[It.toLocaleLowerCase("en-US")]=bt}),Object.entries((Rt=k.kindIcons)!=null?Rt:{}).forEach(([It,bt])=>{ge[It.toLocaleLowerCase("en-US")]=bt}),ve.async){if(!k.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");Ct(this,Ge,Gt(this,Ke,Ha).call(this,{cacheTtl:H,batchDelay:le,renderer:ve,catalogApi:k.catalogApi}))}Ct(this,Pe,V(H)),Ct(this,Ce,new Map),Ct(this,_e,ge),Ct(this,Xe,ve)}static createLocal(){return new tt({renderer:Qe({async:!1})})}static create(k){return new tt(k)}forEntity(k,H){const{entityRef:le,kind:ve,entity:ge,needsLoad:fe}=Gt(this,Ke,ka).call(this,k),at=X=>{const{snapshot:S}=he(this,Xe).render({entityRef:le,loading:X.loading,entity:X.entity,context:H||{}});return{...S,entityRef:le,Icon:Gt(this,Ke,Ga).call(this,S.Icon,ve)}};let gt;try{gt=at({loading:fe,entity:ge})}catch{gt={primaryTitle:le,entityRef:le}}if(!fe)return{snapshot:gt,promise:Promise.resolve(gt)};const Rt=Promise.resolve().then(()=>{var X;return(X=he(this,Ge))==null?void 0:X.load(le)}).then(X=>at({loading:!1,entity:X!=null?X:ge})).catch(()=>{}),It=new(Q())(X=>{let S=!1;return Rt.then($=>{$&&X.next($)}).finally(()=>{S||X.complete()}),()=>{S=!0}}),bt=Rt.then(X=>X!=null?X:gt);return{snapshot:gt,update$:It,promise:bt}}};Ce=new WeakMap,Pe=new WeakMap,Ge=new WeakMap,_e=new WeakMap,Xe=new WeakMap,Ke=new WeakSet,ka=function(k){if(typeof k!="string")return{entity:k,kind:k.kind,entityRef:(0,t.U2)(k),needsLoad:!1};const H=he(this,Ce).get(k),le=H==null?void 0:H.entity,ge=(!H||Date.now()-H.updatedAt>he(this,Pe))&&he(this,Xe).async!==!1&&he(this,Ge)!==void 0;return{entity:le,kind:(0,t.KU)(k).kind,entityRef:k,needsLoad:ge}},Ha=function(k){const H=V(k.cacheTtl),le=V(k.batchDelay);return new(O())(async ve=>{const{items:ge}=await k.catalogApi.getEntitiesByRefs({entityRefs:ve}),fe=Date.now();return ve.forEach((at,gt)=>{he(this,Ce).set(at,{updatedAt:fe,entity:ge[gt]})}),ge},{name:"DefaultEntityPresentationApi",cacheMap:new(I())(H),maxBatchSize:100,batchScheduleFn:le?ve=>setTimeout(ve,le):void 0})},Ga=function(k,H){return k||(k===!1?!1:he(this,_e)[H.toLocaleLowerCase("en-US")])};let Te=tt;var Ie=e(45250);async function Me({storageApi:pe}){var ge;const k=pe.forBucket("settings"),H=pe.forBucket("starredEntities"),le=k.snapshot("starredEntities").value;if(!(0,Ie.isArray)(le))return;const ve=new Set((ge=H.snapshot("entityRefs").value)!=null?ge:[]);le.filter(Ie.isString).map(fe=>fe.split(":")).filter(fe=>fe.length===4&&fe[0]==="entity").map(([fe,at,gt,Rt])=>(0,t.U2)({kind:at,namespace:gt,name:Rt})).forEach(fe=>ve.add(fe)),await H.set("entityRefs",Array.from(ve)),await k.remove("starredEntities")}class He{constructor(k){ue(this,"settingsStore");ue(this,"starredEntities");ue(this,"subscribers",new Set);ue(this,"observable",new(Q())(k=>(k.next(new Set(this.starredEntities)),this.subscribers.add(k),()=>{this.subscribers.delete(k)})));var H;Me(k).then(),this.settingsStore=k.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((H=this.settingsStore.snapshot("entityRefs").value)!=null?H:[]),this.settingsStore.observe$("entityRefs").subscribe({next:le=>{var ve;this.starredEntities=new Set((ve=le.value)!=null?ve:[]),this.notifyChanges()}})}async toggleStarred(k){this.starredEntities.has(k)?this.starredEntities.delete(k):this.starredEntities.add(k),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const k of this.subscribers)k.next(new Set(this.starredEntities))}}const Ye=(0,j.i)({id:"catalog",apis:[(0,U.b)({api:D.v,deps:{discoveryApi:G.I,fetchApi:F.a},factory:({discoveryApi:pe,fetchApi:k})=>new T({discoveryApi:pe,fetchApi:k})}),(0,U.b)({api:B.a,deps:{storageApi:Z.F},factory:({storageApi:pe})=>new He({storageApi:pe})}),(0,U.b)({api:M.n,deps:{catalogApi:D.v},factory:({catalogApi:pe})=>Te.create({catalogApi:pe})})],routes:{catalogIndex:i.rQ,catalogEntity:b.s},externalRoutes:{createComponent:i.qP,viewTechDoc:i.UJ,createFromTemplate:i.Zg,unregisterRedirect:i.pS}}),lt=Ye.provide((0,_.QJ)({name:"CatalogIndexPage",component:()=>Promise.all([e.e(441),e.e(9021),e.e(8158),e.e(9287),e.e(6320)]).then(e.bind(e,76320)).then(pe=>pe.CatalogPage),mountPoint:i.rQ})),Et=Ye.provide((0,_.QJ)({name:"CatalogEntityPage",component:()=>e.e(2086).then(e.bind(e,22086)).then(pe=>pe.CatalogEntityPage),mountPoint:b.s})),We=Ye.provide((0,_.NC)({name:"EntityAboutCard",component:{lazy:()=>Promise.all([e.e(1182),e.e(9537)]).then(e.bind(e,99537)).then(pe=>pe.AboutCard)}})),ze=Ye.provide((0,_.NC)({name:"EntityLinksCard",component:{lazy:()=>e.e(7054).then(e.bind(e,87054)).then(pe=>pe.EntityLinksCard)}})),we=Ye.provide((0,_.NC)({name:"EntityLabelsCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(4428)]).then(e.bind(e,24428)).then(pe=>pe.EntityLabelsCard)}})),ce=Ye.provide((0,_.NC)({name:"EntityHasSystemsCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(9661)]).then(e.bind(e,29661)).then(pe=>pe.HasSystemsCard)}})),Ae=Ye.provide((0,_.NC)({name:"EntityHasComponentsCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(6236)]).then(e.bind(e,16236)).then(pe=>pe.HasComponentsCard)}})),Re=Ye.provide((0,_.NC)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(638)]).then(e.bind(e,40638)).then(pe=>pe.HasSubcomponentsCard)}})),Ne=Ye.provide((0,_.NC)({name:"EntityHasResourcesCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(5061)]).then(e.bind(e,85061)).then(pe=>pe.HasResourcesCard)}})),ht=Ye.provide((0,_.NC)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(5380)]).then(e.bind(e,65380)).then(pe=>pe.DependsOnComponentsCard)}})),Ot=Ye.provide((0,_.NC)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(3057)]).then(e.bind(e,53057)).then(pe=>pe.DependencyOfComponentsCard)}})),ct=Ye.provide((0,_.NC)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(8341)]).then(e.bind(e,98341)).then(pe=>pe.DependsOnResourcesCard)}})),ut=Ye.provide((0,_.NC)({name:"RelatedEntitiesCard",component:{lazy:()=>Promise.all([e.e(441),e.e(9021),e.e(6169)]).then(e.bind(e,26169)).then(pe=>pe.RelatedEntitiesCard)}})),it=Ye.provide((0,N.ec)({name:"CatalogSearchResultListItem",component:()=>e.e(8146).then(e.bind(e,28146)).then(pe=>pe.CatalogSearchResultListItem),predicate:pe=>pe.type==="software-catalog"}))},88549:(K,y,e)=>{e.d(y,{UJ:()=>a,Zg:()=>A,pS:()=>c,qP:()=>u,rQ:()=>h});var t=e(2488),l=e(77555);const u=(0,t.I)({id:"create-component",optional:!0,defaultTarget:"scaffolder.createComponent"}),a=(0,t.I)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"],defaultTarget:"techdocs.docRoot"}),A=(0,t.I)({id:"create-from-template",optional:!0,params:["namespace","templateName"],defaultTarget:"scaffolder.selectedTemplate"}),c=(0,t.I)({id:"catalog:unregister-redirect",optional:!0}),h=(0,l.H)({id:"catalog"})},58954:(K,y,e)=>{e.d(y,{W:()=>l});var t=e(97963);const l=(0,t.h)({id:"catalog",messages:{indexPage:{title:"{{orgName}} Catalog",createButtonTitle:"Create",supportButtonContent:"All your software catalog entities"},aboutCard:{title:"About",refreshButtonTitle:"Schedule entity refresh",editButtonTitle:"Edit Metadata",createSimilarButtonTitle:"Create something similar",refreshScheduledMessage:"Refresh scheduled",launchTemplate:"Launch Template",viewTechdocs:"View TechDocs",viewSource:"View Source",descriptionField:{label:"Description",value:"No description"},ownerField:{label:"Owner",value:"No Owner"},domainField:{label:"Domain",value:"No Domain"},systemField:{label:"System",value:"No System"},parentComponentField:{label:"Parent Component",value:"No Parent Component"},typeField:{label:"Type"},lifecycleField:{label:"Lifecycle"},tagsField:{label:"Tags",value:"No Tags"},targetsField:{label:"Targets"}},searchResultItem:{lifecycle:"Lifecycle",Owner:"Owner"},catalogTable:{warningPanelTitle:"Could not fetch catalog entities.",viewActionTitle:"View",editActionTitle:"Edit",starActionTitle:"Add to favorites",unStarActionTitle:"Remove from favorites"},dependencyOfComponentsCard:{title:"Dependency of components",emptyMessage:"No component depends on this component"},dependsOnComponentsCard:{title:"Depends on components",emptyMessage:"No component is a dependency of this component"},dependsOnResourcesCard:{title:"Depends on resources",emptyMessage:"No resource is a dependency of this component"},entityContextMenu:{copiedMessage:"Copied!",moreButtonTitle:"More",inspectMenuTitle:"Inspect entity",copyURLMenuTitle:"Copy entity URL",unregisterMenuTitle:"Unregister entity"},entityLabelsCard:{title:"Labels",emptyDescription:"No labels defined for this entity. You can add labels to your entity YAML as shown in the highlighted example below:",readMoreButtonTitle:"Read more"},entityLabels:{warningPanelTitle:"Entity not found",ownerLabel:"Owner",lifecycleLabel:"Lifecycle"},entityLinksCard:{title:"Links",emptyDescription:"No links defined for this entity. You can add links to your entity YAML as shown in the highlighted example below:",readMoreButtonTitle:"Read more"},entityNotFound:{title:"Entity was not found",description:"Want to help us build this? Check out our Getting Started documentation.",docButtonTitle:"DOCS"},deleteEntity:{dialogTitle:"Are you sure you want to delete this entity?",deleteButtonTitle:"Delete",cancelButtonTitle:"Cancel",description:"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."},entityProcessingErrorsDescription:"The error below originates from",entityRelationWarningDescription:`This entity has relations to other entities, which can't be found in the catalog.
 Entities not found are: `,hasComponentsCard:{title:"Has components",emptyMessage:"No component is part of this system"},hasResourcesCard:{title:"Has resources",emptyMessage:"No resource is part of this system"},hasSubcomponentsCard:{title:"Has subcomponents",emptyMessage:"No subcomponent is part of this component"},hasSystemsCard:{title:"Has systems",emptyMessage:"No system is part of this domain"},relatedEntitiesCard:{emptyHelpLinkTitle:"Learn how to change this."},systemDiagramCard:{title:"System Diagram",description:"Use pinch & zoo to move around the diagram.",edgeLabels:{partOf:"part of",provides:"provides",dependsOn:"depends on"}}}})},75103:(K,y,e)=>{e.d(y,{k:()=>_});var t=e(14041),l=e(78560),u=e(55488),a=e(7370),A=e(76059),c=e(18690),h=e(21613),d=e(58837),r=e(71677),s=e(72501),m=e(75202),g=e(53373),p=e.n(g),v=e(79065),R=e(55704),P=e(31072),T=e(82775),D=e(77125),B=e(64947);const M=(0,d.A)(N=>{var V,L;return{item:{height:48,width:"100%","&:hover":{background:((V=N.palette.navigation.navItem)==null?void 0:V.hoverBackground)||"#6f6f6f",color:N.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:N.palette.navigation.color,padding:N.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:N.palette.common.white},label:{margin:N.spacing(1.75),marginLeft:N.spacing(1),fontSize:N.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((L=N.palette.navigation.navItem)==null?void 0:L.hoverBackground)||"#6f6f6f",color:N.palette.navigation.selectedColor}},textContent:{color:N.palette.navigation.color,paddingLeft:N.spacing(4),paddingRight:N.spacing(1),fontSize:N.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),b=N=>{var me;const{title:V,subtitle:L,to:O,icon:W,dropdownItems:I,exact:w}=N,Q=M(),{setIsHoveredOn:J}=(0,t.useContext)(P.U1),Y=()=>{J(!1)},z=(0,c.x$)(O!=null?O:""),q=(0,c.zy)();let te=(0,T.z)(q,z,w);const[se,ne]=(0,t.useState)((me=N.initialShowDropdown)!=null?me:!1),oe=()=>{ne(!se)};return I!==void 0?(I.some(Se=>{const be=(0,h.o1)(Se.to);return te=(0,T.z)(q,be,w),te}),t.createElement(D.A,{className:Q.itemContainer},t.createElement(r.Ay,{title:V,enterDelay:500,enterNextDelay:500},t.createElement(B.A,{role:"button",onClick:oe,onTouchStart:Se=>Se.stopPropagation(),className:p()(Q.item,te?Q.selected:void 0)},W&&t.createElement(W,{fontSize:"small"}),t.createElement(s.A,{variant:"subtitle1",component:"span",className:Q.label},V,t.createElement("br",null),L&&t.createElement(s.A,{variant:"caption",component:"span",className:Q.subtitle},L)),se?t.createElement(R.A,{className:Q.dropdownArrow}):t.createElement(v.A,{className:Q.dropdownArrow}))),I&&se&&t.createElement(D.A,{className:Q.dropdown},I.map((Se,be)=>t.createElement(r.Ay,{key:be,title:Se.title,enterDelay:500,enterNextDelay:500},t.createElement(m.N_,{to:Se.to,underline:"none",className:Q.dropdownItem,onClick:Y,onTouchStart:Be=>Be.stopPropagation()},t.createElement(s.A,{component:"span",className:Q.textContent},Se.title))))))):t.createElement(D.A,{className:Q.itemContainer},t.createElement(r.Ay,{title:V,enterDelay:500,enterNextDelay:500},t.createElement(m.N_,{to:O,underline:"none",className:p()(Q.item,te?Q.selected:void 0),onClick:Y,onTouchStart:Se=>Se.stopPropagation()},W&&t.createElement(W,{fontSize:"small"}),t.createElement(s.A,{variant:"subtitle1",component:"span",className:Q.label},V,t.createElement("br",null),L&&t.createElement(s.A,{variant:"caption",component:"span",className:Q.subtitle},L)))))};var i=e(18139),j=e(94223),U=e(72814),G=e(73466),F=e(30043),Z=e(20987);const _=N=>{const{singularTitle:V,pluralTitle:L,icon:O,filter:W}=N,I=(0,i.gf)(j.K),w=(0,i.gf)(F.v),Q=(0,U.S)(Z.s),{value:J}=(0,G.A)(async()=>{const Y=await I.getBackstageIdentity();return(await w.getEntities({filter:[{kind:"group","relations.hasMember":Y.userEntityRef,...W!=null?W:{}}],fields:["metadata","kind"]})).items},[]);if(!(J!=null&&J.length))return null;if(J.length===1){const Y=J[0];return t.createElement(a.uk,{text:V,to:Q((0,l.sM)(Y)),icon:O})}return t.createElement(a.uk,{icon:O,text:L},t.createElement(A.O,{title:L},J==null?void 0:J.map(function(z){return t.createElement(b,{title:z.metadata.title||z.metadata.name,subtitle:z.metadata.namespace!==u.oQ?z.metadata.namespace:void 0,to:Q((0,l.sM)(z)),icon:O,key:(0,l.U2)(z)})})))}},93709:(K,y,e)=>{e.d(y,{O2:()=>d,VA:()=>h,iU:()=>A,lD:()=>c,yJ:()=>a});var t=e(50809),l=e(18050),u=e(14920);const a=(0,t.i)({id:"org",externalRoutes:{catalogIndex:u.E}}),A=a.provide((0,l.NC)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(997).then(e.bind(e,80997)).then(r=>r.GroupProfileCard)}})),c=a.provide((0,l.NC)({name:"EntityMembersListCard",component:{lazy:()=>e.e(997).then(e.bind(e,80997)).then(r=>r.MembersListCard)}})),h=a.provide((0,l.NC)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(997).then(e.bind(e,80997)).then(r=>r.OwnershipCard)}})),d=a.provide((0,l.NC)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(997).then(e.bind(e,80997)).then(r=>r.UserProfileCard)}}))},14920:(K,y,e)=>{e.d(y,{E:()=>l});var t=e(2488);const l=(0,t.I)({id:"catalog-index",optional:!0,defaultTarget:"catalog.catalogIndex"})},79701:(K,y,e)=>{e.d(y,{i:()=>t});function t({name:l,attributes:u,resourceType:a}){return a?{type:"resource",name:l,attributes:u,resourceType:a}:{type:"basic",name:l,attributes:u}}},45614:(K,y,e)=>{e.d(y,{OL:()=>l});function t(d,r){return d.name===r.name}function l(d,r){return"resourceType"in d?!r||d.resourceType===r:!1}function u(d){return d.attributes.action==="create"}function a(d){return d.attributes.action==="read"}function A(d){return d.attributes.action==="update"}function c(d){return d.attributes.action==="delete"}function h(d){return{authorize:async(r,s)=>await d.authorize(r,s),authorizeConditional(r,s){const m=r;return d.authorize(m,s)}}}},3663:(K,y,e)=>{e.d(y,{b:()=>t});var t=(l=>(l.DENY="DENY",l.ALLOW="ALLOW",l.CONDITIONAL="CONDITIONAL",l))(t||{})},40058:(K,y,e)=>{e.d(y,{x:()=>l});var t=e(28967);const l=(0,t.y)({id:"plugin.permission.api"})},75014:(K,y,e)=>{e.d(y,{T:()=>A});var t=e(14041),l=e(95208),u=e(90712),a=e(45614);function A(c){const{permission:h,resourceRef:d}=c,r=(0,u.J)((0,a.OL)(h)?{permission:h,resourceRef:d}:{permission:h}),s=(0,l.n)();if(r.loading)return null;if(r.allowed)return t.createElement(t.Fragment,null,c.children);if(c.errorPage)return t.createElement(t.Fragment,null,c.errorPage);const{NotFoundErrorPage:m}=s.getComponents();return t.createElement(m,null)}},90712:(K,y,e)=>{e.d(y,{J:()=>c});var t=e(18139),l=e(40058),u=e(45614),a=e(3663),A=e(68721);function c(h){const d=(0,t.gf)(l.x),{data:r,error:s}=(0,A.Ay)(h,async m=>{if((0,u.OL)(m.permission)&&!m.resourceRef)return a.b.DENY;const{result:g}=await d.authorize(m);return g});return s?{error:s,loading:!1,allowed:!1}:r===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:r===a.b.ALLOW}}},63163:(K,y,e)=>{e.d(y,{z:()=>u});var t=e(28967),l=e(97388);const u=(0,l.Q6)("scaffolder:scaffolder-api-ref",()=>(0,t.y)({id:"plugin.scaffolder.service"}))},75706:(K,y,e)=>{e.d(y,{R:()=>t,b:()=>l});const t="scaffolder.extensions.wrapper.v1",l="scaffolder.extensions.field.v1"},97909:(K,y,e)=>{e.d(y,{Q:()=>a,Z:()=>A});var t=e(97388),l=e(14041);const u=(0,t.tK)("secrets-context"),a=c=>{const{initialSecrets:h={}}=c,[d,r]=(0,l.useState)({...h});return l.createElement(u.Provider,{value:(0,t.Bl)({1:{secrets:d,setSecrets:r}})},c.children)},A=()=>{var s;const c=(s=(0,l.useContext)(u))==null?void 0:s.atVersion(1);if(!c)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:h,secrets:d={}}=c;return{setSecrets:(0,l.useCallback)(m=>{h(g=>({...g,...m}))},[h]),secrets:d}}},79541:(K,y,e)=>{e.d(y,{R:()=>u});var t=e(14041),l=e(16249);const u=a=>{const{onChange:A,required:c,schema:{title:h="Name",description:d="Unique name of the component"},rawErrors:r,formData:s,uiSchema:{"ui:autofocus":m},idSchema:g,placeholder:p}=a;return t.createElement(l.A,{id:g==null?void 0:g.$id,label:h,placeholder:p,helperText:d,required:c,value:s!=null?s:"",onChange:({target:{value:v}})=>A(v),margin:"normal",error:(r==null?void 0:r.length)>0&&!s,inputProps:{autoFocus:m}})}},71004:(K,y,e)=>{e.d(y,{a:()=>a});var t=e(46195),l=e(19169);const a=(0,l.X)(t.z.string()).schema},62416:(K,y,e)=>{e.d(y,{_:()=>l});var t=e(29666);const l=(u,a)=>{t.y.isValidObjectName(u)||a.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")}},17875:(K,y,e)=>{e.d(y,{q:()=>v});var t=e(24259),l=e(78560),u=e(18139),a=e(30043),A=e(91072),c=e(45809),h=e(16249),d=e(95061),r=e(61783),s=e(59447),m=e(14041),g=e(73466),p=e(96290);const v=D=>{var Y,z,q,te,se;const{onChange:B,schema:{title:M="Entity",description:b="An entity from the catalog"},required:i,uiSchema:j,rawErrors:U,formData:G,idSchema:F}=D,Z=T(j),_=(Y=j["ui:options"])==null?void 0:Y.defaultKind,N=((z=j["ui:options"])==null?void 0:z.defaultNamespace)||void 0,V=(0,u.gf)(a.v),L=(0,u.gf)(A.n),{value:O,loading:W}=(0,g.A)(async()=>{const ne=["metadata.name","metadata.namespace","metadata.title","kind"],{items:oe}=await V.getEntities(Z?{filter:Z,fields:ne}:{filter:void 0,fields:ne}),me=new Map(await Promise.all(oe.map(async Se=>{const be=await L.forEntity(Se).promise;return[(0,l.U2)(Se),be]})));return{catalogEntities:oe,entityRefToPresentation:me}}),I=(te=(q=j["ui:options"])==null?void 0:q.allowArbitraryValues)!=null?te:!0,w=(0,m.useCallback)(ne=>{try{const oe=(0,l.KU)(ne,{defaultKind:_,defaultNamespace:N});return(0,l.U2)(oe)}catch{return ne}},[_,N]),Q=(0,m.useCallback)((ne,oe,me)=>{if(typeof oe!="string")B(oe?(0,l.U2)(oe):void 0);else if(me==="blur"||me==="create-option"){let Se=oe;try{Se=(0,l.U2)((0,l.KU)(oe,{defaultKind:_,defaultNamespace:N}))}catch{}(G!==oe||I)&&B(Se)}},[B,G,_,N,I]),J=(se=O==null?void 0:O.catalogEntities.find(ne=>(0,l.U2)(ne)===G))!=null?se:I&&G?w(G):"";return(0,m.useEffect)(()=>{(O==null?void 0:O.catalogEntities.length)===1&&J===""&&B((0,l.U2)(O.catalogEntities[0]))},[O,B,J]),m.createElement(d.A,{margin:"normal",required:i,error:(U==null?void 0:U.length)>0&&!G},m.createElement(r.Ay,{disabled:(O==null?void 0:O.catalogEntities.length)===1,id:F==null?void 0:F.$id,value:J,loading:W,onChange:Q,options:(O==null?void 0:O.catalogEntities)||[],getOptionLabel:ne=>{var oe;return typeof ne=="string"?ne:(oe=O==null?void 0:O.entityRefToPresentation.get((0,l.U2)(ne)))==null?void 0:oe.entityRef},autoSelect:!0,freeSolo:I,renderInput:ne=>m.createElement(h.A,{...ne,label:M,margin:"dense",helperText:b,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:i,InputProps:ne.InputProps}),renderOption:ne=>m.createElement(c.d,{entityRef:ne}),filterOptions:(0,s.Z)({stringify:ne=>{var oe;return(oe=O==null?void 0:O.entityRefToPresentation.get((0,l.U2)(ne)))==null?void 0:oe.primaryTitle}}),ListboxComponent:p.J}))};function R(D){return typeof D=="object"&&D.exists?t.c:D==null?void 0:D.toString()}function P(D){const B={};for(const[M,b]of Object.entries(D))Array.isArray(b)?B[M]=b:B[M]=R(b);return B}function T(D){var b,i;const B=(b=D["ui:options"])==null?void 0:b.allowedKinds,M=((i=D["ui:options"])==null?void 0:i.catalogFilter)||B&&{kind:B};if(M)return Array.isArray(M)?M.map(P):P(M)}},95201:(K,y,e)=>{e.d(y,{f2:()=>A,jD:()=>u});var t=e(46195),l=e(19169);const u=t.z.record(t.z.string().or(t.z.object({exists:t.z.boolean().optional()})).or(t.z.array(t.z.string()))),A=(0,l.X)(t.z.string(),t.z.object({allowedKinds:t.z.array(t.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:t.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:t.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:t.z.union([t.z.string(),t.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:t.z.array(u).or(u).optional().describe("List of key-value filter expression for entities")})).schema},7793:(K,y,e)=>{e.d(y,{t:()=>g});var t=e(14041),l=e(73466),u=e(8380),a=e(29666);const A={isValidApiVersion:a.y.isValidApiVersion,isValidKind:a.y.isValidKind,isValidEntityName:a.y.isValidObjectName,isValidNamespace:a.y.isValidNamespace,isValidLabelKey:a.y.isValidLabelKey,isValidLabelValue:a.y.isValidLabelValue,isValidAnnotationKey:a.y.isValidAnnotationKey,isValidAnnotationValue:a.y.isValidAnnotationValue,isValidTag:p=>typeof p=="string"&&p.length>=1&&p.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(p)};function c(p={}){return{...A,...p}}var h=e(18139),d=e(30043),r=e(95061),s=e(16249),m=e(61783);const g=p=>{var L,O,W;const{formData:v,onChange:R,uiSchema:P}=p,T=(0,h.gf)(d.v),[D,B]=(0,t.useState)([]),[M,b]=(0,t.useState)(""),[i,j]=(0,t.useState)(!1),U=c().isValidTag,G=(L=P["ui:options"])==null?void 0:L.kinds,F=(O=P["ui:options"])==null?void 0:O.showCounts,Z=(W=P["ui:options"])==null?void 0:W.helperText,{loading:_,value:N}=(0,l.A)(async()=>{const I="metadata.tags",w={facets:[I]};G&&(w.filter={kind:G});const{facets:Q}=await T.getEntityFacets(w),J=Object.fromEntries(Q[I].map(({value:Y,count:z})=>[Y,z]));return B(Object.keys(J).sort((Y,z)=>F?J[z]-J[Y]:Y.localeCompare(z))),J}),V=(I,w)=>{let Q=!1,J=!1;const Y=v||[];if(w!=null&&w.length&&Y.length<w.length){const z=w[w.length-1]=w[w.length-1].toLocaleLowerCase("en-US").trim();Q=!U(z),J=Y.indexOf(z)!==-1}j(Q),b(Q?M:""),!Q&&!J&&R(w||[])};return(0,u.A)(()=>R(v||[])),t.createElement(r.A,{margin:"normal"},t.createElement(m.Ay,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:V,value:v||[],inputValue:M,loading:_,options:D,ChipProps:{size:"small"},renderOption:I=>F?`${I} (${N==null?void 0:N[I]})`:I,renderInput:I=>t.createElement(s.A,{...I,label:"Tags",onChange:w=>b(w.target.value),error:i,helperText:Z!=null?Z:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))}},8886:(K,y,e)=>{e.d(y,{u:()=>a});var t=e(46195),l=e(19169);const a=(0,l.X)(t.z.array(t.z.string()),t.z.object({kinds:t.z.array(t.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:t.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:t.z.string().optional().describe("Helper text to display")})).schema},22139:(K,y,e)=>{e.d(y,{RT:()=>p,eR:()=>v});var t=e(24259),l=e(78560),u=e(18139),a=e(30043),A=e(91072),c=e(45809),h=e(16249),d=e(95061),r=e(61783),s=e(14041),m=e(73466),g=e(96290);const p=D=>{var Q,J,Y,z,q;const{onChange:B,schema:{title:M="Entity",description:b="An entity from the catalog"},required:i,uiSchema:j,rawErrors:U,formData:G,idSchema:F}=D,Z=T(j),_=(Q=j["ui:options"])==null?void 0:Q.defaultKind,N=((J=j["ui:options"])==null?void 0:J.defaultNamespace)||void 0,V=(0,u.gf)(a.v),L=(0,u.gf)(A.n),{value:O,loading:W}=(0,m.A)(async()=>{const{items:te}=await V.getEntities(Z?{filter:Z}:void 0),se=new Map(await Promise.all(te.map(async ne=>{const oe=await L.forEntity(ne).promise;return[(0,l.U2)(ne),oe]})));return{entities:te,entityRefToPresentation:se}}),I=(z=(Y=j["ui:options"])==null?void 0:Y.allowArbitraryValues)!=null?z:!0,w=(0,s.useCallback)((te,se,ne)=>{const oe=se.map(me=>{if(typeof me!="string")return me?(0,l.U2)(me):void 0;if(ne==="blur"||ne==="create-option"){let Se=me;try{Se=(0,l.U2)((0,l.KU)(me,{defaultKind:_,defaultNamespace:N}))}catch{}if(G!=null&&G.includes(me)||I)return Se}}).filter(me=>me!==void 0);B(oe)},[B,G,_,N,I]);return(0,s.useEffect)(()=>{var te;((te=O==null?void 0:O.entities)==null?void 0:te.length)===1&&B([(0,l.U2)(O==null?void 0:O.entities[0])])},[O,B]),s.createElement(d.A,{margin:"normal",required:i,error:(U==null?void 0:U.length)>0&&!G},s.createElement(r.Ay,{multiple:!0,filterSelectedOptions:!0,disabled:((q=O==null?void 0:O.entities)==null?void 0:q.length)===1,id:F==null?void 0:F.$id,loading:W,onChange:w,options:(O==null?void 0:O.entities)||[],renderOption:te=>s.createElement(c.d,{entityRef:te}),getOptionLabel:te=>{var se;return typeof te=="string"?te:(se=O==null?void 0:O.entityRefToPresentation.get((0,l.U2)(te)))==null?void 0:se.entityRef},autoSelect:!0,freeSolo:I,renderInput:te=>s.createElement(h.A,{...te,label:M,margin:"dense",helperText:b,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:i,InputProps:{...te.InputProps,required:(G==null?void 0:G.length)===0&&i}}),ListboxComponent:g.J}))},v=(D,B)=>{D.forEach(M=>{try{(0,l.KU)(M)}catch{B.addError(`${M} is not a valid entity ref`)}})};function R(D){return typeof D=="object"&&D.exists?t.c:D==null?void 0:D.toString()}function P(D){const B={};for(const[M,b]of Object.entries(D))Array.isArray(b)?B[M]=b:B[M]=R(b);return B}function T(D){var M;const B=(M=D["ui:options"])==null?void 0:M.catalogFilter;if(B)return Array.isArray(B)?B.map(P):P(B)}},23654:(K,y,e)=>{e.d(y,{mG:()=>A});var t=e(46195),l=e(19169);const u=t.z.record(t.z.string().or(t.z.object({exists:t.z.boolean().optional()})).or(t.z.array(t.z.string()))),A=(0,l.X)(t.z.array(t.z.string()),t.z.object({defaultKind:t.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:t.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:t.z.union([t.z.string(),t.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:t.z.array(u).or(u).optional().describe("List of key-value filter expression for entities")})).schema},34861:(K,y,e)=>{e.d(y,{T:()=>g});var t=e(14041),l=e(18139),u=e(94223),a=e(24453),A=e(16249),c=e(95061),h=e(61783),d=e(30043),r=e(3399),s=e(73466),m=e(78560);const g=p=>{const{schema:{title:v,description:R},required:P,rawErrors:T,onChange:D,formData:B}=p,M=(0,l.gf)(u.K),b=(0,l.gf)(d.v),i=(0,l.gf)(a.m),[j,U]=(0,t.useState)([]);(0,s.A)(async()=>{const{userEntityRef:Z}=await M.getBackstageIdentity();if(!Z){i.post(new r.m_("No user entity ref found"));return}const{items:_}=await b.getEntities({filter:{kind:"Group","relations.hasMember":[Z]}}),N=_.filter(V=>!!V).map(V=>{var L;return{label:(L=V.metadata.title)!=null?L:V.metadata.name,ref:(0,m.U2)(V)}});U(N)});const G=(Z,_)=>{var N;D((N=_==null?void 0:_.ref)!=null?N:"")},F=(j==null?void 0:j.find(Z=>Z.ref===B))||null;return t.createElement(c.A,{margin:"normal",required:P,error:(T==null?void 0:T.length)>0},t.createElement(h.Ay,{id:"OwnershipEntityRefPicker-dropdown",options:j||[],value:F,onChange:G,getOptionLabel:Z=>Z.label,renderInput:Z=>t.createElement(A.A,{...Z,label:v,margin:"dense",helperText:R,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:P})}))}},63374:(K,y,e)=>{e.d(y,{M:()=>a});var t=e(46195),l=e(19169);const a=(0,l.X)(t.z.string(),t.z.object({title:t.z.string().default("Group").describe("Group"),description:t.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema},9739:(K,y,e)=>{e.d(y,{F:()=>r});var t=e(97214),l=e(18139),u=e(94223),a=e(16249),A=e(61783),c=e(14041),h=e(73466),d=e(17875);const r=g=>{const{schema:{title:p="Entity",description:v="An entity from the catalog"},uiSchema:R,required:P}=g,T=(0,l.gf)(u.K),{loading:D,value:B}=(0,h.A)(async()=>(await T.getBackstageIdentity()).ownershipEntityRefs);if(D)return c.createElement(A.Ay,{loading:D,renderInput:b=>c.createElement(a.A,{...b,label:p,margin:"dense",helperText:v,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:P,InputProps:b.InputProps}),options:[]});const M=s(R,B);return c.createElement(d.q,{...g,uiSchema:M})};function s(g,p){const v=(g==null?void 0:g["ui:options"])||{},R=v.allowedKinds;return{"ui:options":{catalogFilter:m(v.catalogFilter).map(T=>({...T,...R?{kind:R}:{},[`relations.${t.vv}`]:p||[]}))}}}function m(g){return g?Array.isArray(g)?g:[g]:[{}]}},19742:(K,y,e)=>{e.d(y,{M:()=>A});var t=e(46195),l=e(19169),u=e(95201);const A=(0,l.X)(t.z.string(),t.z.object({allowedKinds:t.z.array(t.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:t.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:t.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:t.z.union([t.z.string(),t.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:t.z.array(u.jD).or(u.jD).optional().describe("List of key-value filter expression for entities")})).schema},6451:(K,y,e)=>{e.d(y,{u:()=>u});var t=e(14041),l=e(17875);const u=a=>{var p,v,R,P,T;const{schema:{title:A="Owner",description:c="The owner of the component"},uiSchema:h,...d}=a,r=(p=h["ui:options"])==null?void 0:p.defaultNamespace,s=(v=h["ui:options"])==null?void 0:v.allowedKinds,m=((R=h["ui:options"])==null?void 0:R.catalogFilter)||{kind:s||["Group","User"]},g={...h,"ui:options":{catalogFilter:m,defaultKind:"Group",allowArbitraryValues:(T=(P=h["ui:options"])==null?void 0:P.allowArbitraryValues)!=null?T:!0,...r!==void 0?{defaultNamespace:r}:{}}};return t.createElement(l.q,{...d,schema:{title:A,description:c},uiSchema:g})}},63653:(K,y,e)=>{e.d(y,{h:()=>A});var t=e(46195),l=e(19169),u=e(95201);const A=(0,l.X)(t.z.string(),t.z.object({allowedKinds:t.z.array(t.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:t.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:t.z.union([t.z.string(),t.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:t.z.array(u.jD).or(u.jD).optional().describe("List of key-value filter expression for entities")})).schema},36611:(K,y,e)=>{e.d(y,{e:()=>V});var t=e(18139),l=e(54934),u=e(14146),a=e(14041),A=e(95061),c=e(51253),h=e(63301),d=e(48543),r=e(81252);const s=L=>{const{allowedOwners:O=[],rawErrors:W,state:I,onChange:w}=L,Q=O?O.map(Y=>({label:Y,value:Y})):[{label:"Loading...",value:"loading"}],{owner:J}=I;return a.createElement(a.Fragment,null,a.createElement(A.A,{margin:"normal",required:!0,error:(W==null?void 0:W.length)>0&&!J},O!=null&&O.length?a.createElement(r.w,{native:!0,label:"Owner Available",onChange:Y=>w({owner:String(Array.isArray(Y)?Y[0]:Y)}),disabled:O.length===1,selected:J,items:Q}):a.createElement(a.Fragment,null,a.createElement(d.A,{htmlFor:"ownerInput"},"Owner"),a.createElement(h.A,{id:"ownerInput",onChange:Y=>w({owner:Y.target.value}),value:J})),a.createElement(c.A,null,"The organization, user or project that this repo will belong to")))},m=L=>{const{allowedOwners:O=[],state:W,onChange:I,rawErrors:w}=L,Q=O?O.map(Y=>({label:Y,value:Y})):[{label:"Loading...",value:"loading"}],{owner:J}=W;return a.createElement(a.Fragment,null,a.createElement(A.A,{margin:"normal",required:!0,error:(w==null?void 0:w.length)>0&&!J},O!=null&&O.length?a.createElement(r.w,{native:!0,label:"Owner Available",onChange:Y=>I({owner:String(Array.isArray(Y)?Y[0]:Y)}),disabled:O.length===1,selected:J,items:Q}):a.createElement(a.Fragment,null,a.createElement(d.A,{htmlFor:"ownerInput"},"Owner"),a.createElement(h.A,{id:"ownerInput",onChange:Y=>I({owner:Y.target.value}),value:J})),a.createElement(c.A,null,"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},g=L=>{const{allowedOwners:O=[],state:W,onChange:I,rawErrors:w}=L,Q=O?O.map(Y=>({label:Y,value:Y})):[{label:"Loading...",value:"loading"}],{owner:J}=W;return a.createElement(a.Fragment,null,a.createElement(A.A,{margin:"normal",required:!0,error:(w==null?void 0:w.length)>0&&!J},O!=null&&O.length?a.createElement(r.w,{native:!0,label:"Owner Available",onChange:Y=>I({owner:String(Array.isArray(Y)?Y[0]:Y)}),disabled:O.length===1,selected:J,items:Q}):a.createElement(a.Fragment,null,a.createElement(d.A,{htmlFor:"ownerInput"},"Owner"),a.createElement(h.A,{id:"ownerInput",onChange:Y=>I({owner:Y.target.value}),value:J})),a.createElement(c.A,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},p=L=>{const{allowedOrganizations:O=[],allowedProject:W=[],rawErrors:I,state:w,onChange:Q}=L,J=O?O.map(te=>({label:te,value:te})):[{label:"Loading...",value:"loading"}],Y=W?W.map(te=>({label:te,value:te})):[{label:"Loading...",value:"loading"}],{organization:z,project:q}=w;return a.createElement(a.Fragment,null,a.createElement(A.A,{margin:"normal",required:!0,error:(I==null?void 0:I.length)>0&&!z},O!=null&&O.length?a.createElement(r.w,{native:!0,label:"Organization",onChange:te=>Q({organization:String(Array.isArray(te)?te[0]:te)}),disabled:O.length===1,selected:z,items:J}):a.createElement(a.Fragment,null,a.createElement(d.A,{htmlFor:"orgInput"},"Organization"),a.createElement(h.A,{id:"orgInput",onChange:te=>Q({organization:te.target.value}),value:z})),a.createElement(c.A,null,"The Organization that this repo will belong to")),a.createElement(A.A,{margin:"normal",required:!0,error:(I==null?void 0:I.length)>0&&!q},W!=null&&W.length?a.createElement(r.w,{native:!0,label:"Project",onChange:te=>Q({project:String(Array.isArray(te)?te[0]:te)}),disabled:W.length===1,selected:q,items:Y}):a.createElement(a.Fragment,null,a.createElement(d.A,{htmlFor:"projectInput"},"Project"),a.createElement(h.A,{id:"projectInput",onChange:te=>Q({project:te.target.value}),value:q})),a.createElement(c.A,null,"The Project that this repo will belong to")))};var v=e(61783),R=e(16249),P=e(22771),T=e(63163);const D=L=>{const{allowedOwners:O=[],allowedProjects:W=[],onChange:I,rawErrors:w,state:Q,accessToken:J}=L,{host:Y,workspace:z,project:q}=Q,te=O?O==null?void 0:O.map(Be=>({label:Be,value:Be})):[],se=W?W==null?void 0:W.map(Be=>({label:Be,value:Be})):[];(0,a.useEffect)(()=>{Y==="bitbucket.org"&&O.length&&I({workspace:O[0]})},[O,Y,I]);const ne=(0,t.gf)(T.z),[oe,me]=(0,a.useState)([]),[Se,be]=(0,a.useState)([]);return(0,P.A)(()=>{(async()=>{if(Y==="bitbucket.org"&&J&&ne.autocomplete){const{results:Je}=await ne.autocomplete({token:J,resource:"workspaces",context:{},provider:"bitbucket-cloud"});me(Je.map(Qe=>Qe.title))}else me([])})().catch(()=>me([]))},500,[Y,J]),(0,P.A)(()=>{(async()=>{if(Y==="bitbucket.org"&&J&&z&&ne.autocomplete){const{results:Je}=await ne.autocomplete({token:J,resource:"projects",context:{workspace:z},provider:"bitbucket-cloud"});be(Je.map(Qe=>Qe.title))}else be([])})().catch(()=>be([]))},500,[Y,J,z]),(0,P.A)(()=>{(async()=>{if(Y==="bitbucket.org"&&J&&z&&q&&ne.autocomplete){const{results:Je}=await ne.autocomplete({token:J,resource:"repositories",context:{workspace:z,project:q},provider:"bitbucket-cloud"});I({availableRepos:Je.map(Qe=>Qe.title)})}else I({availableRepos:[]})})().catch(()=>I({availableRepos:[]}))},500,[Y,J,z,q]),a.createElement(a.Fragment,null,Y==="bitbucket.org"&&a.createElement(A.A,{margin:"normal",required:!0,error:(w==null?void 0:w.length)>0&&!z},O!=null&&O.length?a.createElement(r.w,{native:!0,label:"Allowed Workspaces",onChange:Be=>I({workspace:String(Array.isArray(Be)?Be[0]:Be)}),disabled:O.length===1,selected:z,items:te}):a.createElement(v.Ay,{value:z,onChange:(Be,Je)=>{I({workspace:Je||""})},options:oe,renderInput:Be=>a.createElement(R.A,{...Be,label:"Workspace",required:!0}),freeSolo:!0,autoSelect:!0}),a.createElement(c.A,null,"The Workspace that this repo will belong to")),a.createElement(A.A,{margin:"normal",required:!0,error:(w==null?void 0:w.length)>0&&!q},W!=null&&W.length?a.createElement(r.w,{native:!0,label:"Allowed Projects",onChange:Be=>I({project:String(Array.isArray(Be)?Be[0]:Be)}),disabled:W.length===1,selected:q,items:se}):a.createElement(v.Ay,{value:q,onChange:(Be,Je)=>{I({project:Je||""})},options:Se,renderInput:Be=>a.createElement(R.A,{...Be,label:"Project",required:!0}),freeSolo:!0,autoSelect:!0}),a.createElement(c.A,null,"The Project that this repo will belong to")))},B=L=>{const{onChange:O,rawErrors:W,state:I}=L,{workspace:w,owner:Q}=I;return a.createElement(a.Fragment,null,a.createElement(A.A,{margin:"normal",error:(W==null?void 0:W.length)>0&&!w},a.createElement(d.A,{htmlFor:"ownerInput"},"Owner"),a.createElement(h.A,{id:"ownerInput",onChange:J=>O({owner:J.target.value}),value:Q}),a.createElement(c.A,null,"The owner of the project (optional)")),a.createElement(A.A,{margin:"normal",required:!0,error:(W==null?void 0:W.length)>0&&!w},a.createElement(d.A,{htmlFor:"parentInput"},"Parent"),a.createElement(h.A,{id:"parentInput",onChange:J=>O({workspace:J.target.value}),value:w}),a.createElement(c.A,null,"The project parent that the repo will belong to")))};var M=e(96872),b=e(73466);const i=L=>{const{host:O,hosts:W,onChange:I,rawErrors:w}=L,Q=(0,t.gf)(T.z),{value:{integrations:J}={integrations:[]},loading:Y}=(0,b.A)(async()=>await Q.getIntegrationsList({allowedHosts:W!=null?W:[]}));(0,a.useEffect)(()=>{O||(W!=null&&W.length?I(W[0]):J!=null&&J.length&&I(J[0].host))},[W,O,I,J]);const z=J?J.filter(q=>W!=null&&W.length?W==null?void 0:W.includes(q.host):!0).map(q=>({label:q.title,value:q.host})):[{label:"Loading...",value:"loading"}];return Y?a.createElement(M.k,null):a.createElement(a.Fragment,null,a.createElement(A.A,{margin:"normal",required:!0,error:(w==null?void 0:w.length)>0&&!O},a.createElement(r.w,{native:!0,disabled:(W==null?void 0:W.length)===1,label:"Host",onChange:q=>I(String(Array.isArray(q)?q[0]:q)),selected:O,items:z,"data-testid":"host-select"}),a.createElement(c.A,null,"The host where the repository will be created")))},j=L=>{const{repoName:O,allowedRepos:W,onChange:I,rawErrors:w,availableRepos:Q}=L;(0,a.useEffect)(()=>{O||W!=null&&W.length&&I(W[0])},[W,O,I]);const J=W?W.map(Y=>({label:Y,value:Y})):[{label:"Loading...",value:"loading"}];return a.createElement(a.Fragment,null,a.createElement(A.A,{margin:"normal",required:!0,error:(w==null?void 0:w.length)>0&&!O},W!=null&&W.length?a.createElement(r.w,{native:!0,label:"Repositories Available",onChange:Y=>I(String(Array.isArray(Y)?Y[0]:Y)),disabled:W.length===1,selected:O,items:J}):a.createElement(v.Ay,{value:O,onChange:(Y,z)=>{I(z||"")},options:Q||[],renderInput:Y=>a.createElement(R.A,{...Y,label:"Repository",required:!0}),freeSolo:!0,autoSelect:!0}),a.createElement(c.A,null,"The name of the repository")))};function U(L){if(!L.host)return;const O=new URLSearchParams;return L.owner&&O.set("owner",L.owner),L.repoName&&O.set("repo",L.repoName),L.organization&&O.set("organization",L.organization),L.workspace&&O.set("workspace",L.workspace),L.project&&O.set("project",L.project),`${L.host}?${O.toString()}`}function G(L){let O="",W="",I="",w="",Q="",J="";try{if(L){const Y=new URL(`https://${L}`);O=Y.host,W=Y.searchParams.get("owner")||"",I=Y.searchParams.get("repo")||"",w=Y.searchParams.get("organization")||"",Q=Y.searchParams.get("workspace")||"",J=Y.searchParams.get("project")||""}}catch{}return{host:O,owner:W,repoName:I,organization:w,workspace:Q,project:J}}var F=e(97909),Z=e(77125),_=e(37197),N=e(72501);const V=L=>{var He,Ye,lt,Et;const{uiSchema:O,onChange:W,rawErrors:I,formData:w,schema:Q}=L,[J,Y]=(0,a.useState)(G(w)),z=(0,t.gf)(l.Y),q=(0,t.gf)(u.$),{secrets:te,setSecrets:se}=(0,F.Z)(),ne=(0,a.useMemo)(()=>{var We,ze;return(ze=(We=O==null?void 0:O["ui:options"])==null?void 0:We.allowedHosts)!=null?ze:[]},[O]),oe=(0,a.useMemo)(()=>{var We,ze;return(ze=(We=O==null?void 0:O["ui:options"])==null?void 0:We.allowedOrganizations)!=null?ze:[]},[O]),me=(0,a.useMemo)(()=>{var We,ze;return(ze=(We=O==null?void 0:O["ui:options"])==null?void 0:We.allowedOwners)!=null?ze:[]},[O]),Se=(0,a.useMemo)(()=>{var We,ze;return(ze=(We=O==null?void 0:O["ui:options"])==null?void 0:We.allowedProjects)!=null?ze:[]},[O]),be=(0,a.useMemo)(()=>{var We,ze;return(ze=(We=O==null?void 0:O["ui:options"])==null?void 0:We.allowedRepos)!=null?ze:[]},[O]),{owner:Be,organization:Je,project:Qe,repoName:Te}=J;(0,a.useEffect)(()=>{W(U(J))},[J,W]),(0,a.useEffect)(()=>{oe.length>0&&!Je&&Y(We=>({...We,organization:oe[0]}))},[Y,oe,Je]),(0,a.useEffect)(()=>{me.length>0&&!Be&&Y(We=>({...We,owner:me[0]}))},[Y,me,Be]),(0,a.useEffect)(()=>{Se.length>0&&!Qe&&Y(We=>({...We,project:Se[0]}))},[Y,Se,Qe]),(0,a.useEffect)(()=>{be.length>0&&!Te&&Y(We=>({...We,repoName:be[0]}))},[Y,be,Te]);const Ie=(0,a.useCallback)(We=>{Y(ze=>({...ze,...We}))},[Y]);(0,P.A)(async()=>{var we;const{requestUserCredentials:We}=(we=O==null?void 0:O["ui:options"])!=null?we:{};if(!We||!J.host||te[We.secretsKey])return;const{token:ze}=await q.getCredentials({url:`https://${J.host}`,additionalScope:{repoWrite:!0,customScopes:We.additionalScopes}});se({[We.secretsKey]:ze})},500,[J,O]);const Me=(Ye=J.host&&((He=z.byHost(J.host))==null?void 0:He.type))!=null?Ye:null;return a.createElement(a.Fragment,null,Q.title&&a.createElement(Z.A,{my:1},a.createElement(N.A,{variant:"h5"},Q.title),a.createElement(_.A,null)),Q.description&&a.createElement(N.A,{variant:"body1"},Q.description),a.createElement(i,{host:J.host,hosts:ne,onChange:We=>Y(ze=>({...ze,host:We})),rawErrors:I}),Me==="github"&&a.createElement(s,{allowedOwners:me,onChange:Ie,rawErrors:I,state:J}),Me==="gitea"&&a.createElement(m,{allowedOwners:me,allowedRepos:be,rawErrors:I,state:J,onChange:Ie}),Me==="gitlab"&&a.createElement(g,{allowedOwners:me,rawErrors:I,state:J,onChange:Ie}),Me==="bitbucket"&&a.createElement(D,{allowedOwners:me,allowedProjects:Se,rawErrors:I,state:J,onChange:Ie,accessToken:((Et=(lt=O==null?void 0:O["ui:options"])==null?void 0:lt.requestUserCredentials)==null?void 0:Et.secretsKey)&&te[O["ui:options"].requestUserCredentials.secretsKey]}),Me==="azure"&&a.createElement(p,{allowedOrganizations:oe,allowedProject:Se,rawErrors:I,state:J,onChange:Ie}),Me==="gerrit"&&a.createElement(B,{rawErrors:I,state:J,onChange:Ie}),a.createElement(j,{repoName:J.repoName,allowedRepos:be,onChange:We=>Y(ze=>({...ze,repoName:We})),rawErrors:I,availableRepos:J.availableRepos}))}},21775:(K,y,e)=>{e.d(y,{d:()=>a});var t=e(46195),l=e(19169);const a=(0,l.X)(t.z.string(),t.z.object({allowedHosts:t.z.array(t.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:t.z.array(t.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:t.z.array(t.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:t.z.array(t.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:t.z.array(t.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:t.z.object({secretsKey:t.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:t.z.object({gitea:t.z.array(t.z.string()).optional().describe("Additional Gitea scopes to request"),gerrit:t.z.array(t.z.string()).optional().describe("Additional Gerrit scopes to request"),github:t.z.array(t.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:t.z.array(t.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:t.z.array(t.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:t.z.array(t.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema},77795:(K,y,e)=>{e.d(y,{_:()=>l});var t=e(54934);const l=(u,a,A)=>{var c,h,d;try{const{host:r,searchParams:s}=new URL(`https://${u}`),m=A.apiHolder.get(t.Y);r?(((c=m==null?void 0:m.byHost(r))==null?void 0:c.type)==="bitbucket"?(r==="bitbucket.org"&&!s.get("workspace")&&a.addError("Incomplete repository location provided, workspace not provided"),s.get("project")||a.addError("Incomplete repository location provided, project not provided")):((h=m==null?void 0:m.byHost(r))==null?void 0:h.type)==="azure"?s.get("project")||a.addError("Incomplete repository location provided, project not provided"):((d=m==null?void 0:m.byHost(r))==null?void 0:d.type)!=="gerrit"&&(s.get("owner")||a.addError("Incomplete repository location provided, owner not provided")),s.get("repo")||a.addError("Incomplete repository location provided, repo not provided")):a.addError("Incomplete repository location provided, host not provided")}catch{a.addError("Unable to parse the Repository URL")}}},96290:(K,y,e)=>{e.d(y,{J:()=>a});var t=e(14041),l=e(84392);const u=A=>{const{data:c,index:h,style:d}=A;return t.cloneElement(c[h],{style:d})},a=t.forwardRef((A,c)=>{const h=t.Children.toArray(A.children),d=h.length,r=36,s=Math.min(10,d),m=Math.max(r,s*r-.5*r);return t.createElement("div",{ref:c},t.createElement(l.Y1,{height:m,itemData:h,itemCount:d,itemSize:r,width:"100%"},u))})},19169:(K,y,e)=>{e.d(y,{X:()=>l});var t=e(63177);function l(u,a){return{schema:{returnValue:(0,t.Ay)(u),uiOptions:a?(0,t.Ay)(a):void 0},type:null,uiOptionsType:null}}},45397:(K,y,e)=>{e.d(y,{r6:()=>be,Te:()=>q});var t=e(54934),l=e(63163),u=e(85408),a=e(75706);function A(Qe){return{expose(){const Te=()=>null;return(0,u.h)(Te,a.b,Qe),Te}}}const c=()=>null;(0,u.h)(c,a.R,!0);var h=e(78560),d=e(3399),r=e(45810),s=e.n(r),m=e(96403),g=e.n(m),p=e(92110);class v{constructor(Te){ue(this,"discoveryApi");ue(this,"scmIntegrationsApi");ue(this,"fetchApi");ue(this,"identityApi");ue(this,"useLongPollingLogs");var Ie,Me;this.discoveryApi=Te.discoveryApi,this.fetchApi=(Ie=Te.fetchApi)!=null?Ie:{fetch},this.scmIntegrationsApi=Te.scmIntegrationsApi,this.useLongPollingLogs=(Me=Te.useLongPollingLogs)!=null?Me:!1,this.identityApi=Te.identityApi}async listTasks(Te){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const Ie=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:Me}=await this.identityApi.getBackstageIdentity(),He=s().stringify(Te.filterByOwnership==="owned"?{createdBy:Me}:{}),Ye=await this.fetchApi.fetch(`${Ie}/v2/tasks?${He}`);if(!Ye.ok)throw await d.o3.fromResponse(Ye);return await Ye.json()}async getIntegrationsList(Te){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(Me=>!this.scmIntegrationsApi.bitbucketCloud.byHost(Me.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(Me.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(Me=>({type:Me.type,title:Me.title,host:Me.config.host})).filter(Me=>Te.allowedHosts.includes(Me.host))}}async getTemplateParameterSchema(Te){const{namespace:Ie,kind:Me,name:He}=(0,h.KU)(Te,{defaultKind:"template"}),Ye=await this.discoveryApi.getBaseUrl("scaffolder"),lt=[Ie,Me,He].map(we=>encodeURIComponent(we)).join("/"),Et=`${Ye}/v2/templates/${lt}/parameter-schema`,We=await this.fetchApi.fetch(Et);if(!We.ok)throw await d.o3.fromResponse(We);return await We.json()}async scaffold(Te){const{templateRef:Ie,values:Me,secrets:He={}}=Te,Ye=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,lt=await this.fetchApi.fetch(Ye,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:Ie,values:{...Me},secrets:He})});if(lt.status!==201){const We=`${lt.status} ${lt.statusText}`,ze=await lt.text();throw new Error(`Backend request failed, ${We} ${ze.trim()}`)}const{id:Et}=await lt.json();return{taskId:Et}}async getTask(Te){const Me=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(Te)}`,He=await this.fetchApi.fetch(Me);if(!He.ok)throw await d.o3.fromResponse(He);return await He.json()}streamLogs(Te){return this.useLongPollingLogs?this.streamLogsPolling(Te):this.streamLogsEventStream(Te)}async dryRun(Te){const Ie=await this.discoveryApi.getBaseUrl("scaffolder"),Me=await this.fetchApi.fetch(`${Ie}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:Te.template,values:Te.values,secrets:Te.secrets,directoryContents:Te.directoryContents})});if(!Me.ok)throw await d.o3.fromResponse(Me);return Me.json()}streamLogsEventStream({taskId:Te,after:Ie}){return new(g())(Me=>{const He=new URLSearchParams;Ie!==void 0&&He.set("after",String(Number(Ie))),this.discoveryApi.getBaseUrl("scaffolder").then(Ye=>{const lt=`${Ye}/v2/tasks/${encodeURIComponent(Te)}/eventstream`,Et=ze=>{if(ze.data)try{Me.next(JSON.parse(ze.data))}catch(we){Me.error(we)}},We=new AbortController;(0,p.y)(lt,{fetch:this.fetchApi.fetch,signal:We.signal,onmessage(ze){if(ze.event==="log"){Et(ze);return}else if(ze.event==="completion"){Et(ze),Me.complete(),We.abort();return}Et(ze)},onerror(ze){Me.error(ze)}})},Ye=>{Me.error(Ye)})})}streamLogsPolling({taskId:Te,after:Ie}){let Me=Ie;return new(g())(He=>{this.discoveryApi.getBaseUrl("scaffolder").then(async Ye=>{for(;!He.closed;){const lt=`${Ye}/v2/tasks/${encodeURIComponent(Te)}/events?${s().stringify({after:Me})}`,Et=await this.fetchApi.fetch(lt);if(!Et.ok){await new Promise(ze=>setTimeout(ze,1e3));continue}const We=await Et.json();for(const ze of We)if(Me=Number(ze.id),He.next(ze),ze.type==="completion"){He.complete();return}}})})}async listActions(){const Te=await this.discoveryApi.getBaseUrl("scaffolder"),Ie=await this.fetchApi.fetch(`${Te}/v2/actions`);if(!Ie.ok)throw await d.o3.fromResponse(Ie);return await Ie.json()}async cancelTask(Te){const Me=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(Te)}/cancel`,He=await this.fetchApi.fetch(Me,{method:"POST"});if(!He.ok)throw await d.o3.fromResponse(He);return await He.json()}async autocomplete({token:Te,resource:Ie,provider:Me,context:He}){const lt=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/autocomplete/${Me}/${Ie}`,Et=await this.fetchApi.fetch(lt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:Te,context:He!=null?He:{}})});if(!Et.ok)throw await d.o3.fromResponse(Et);const{results:We}=await Et.json();return{results:We}}}var R=e(17875),P=e(62416),T=e(79541),D=e(6451),B=e(22139),M=e(21775),b=e(77795),i=e(36611),j=e(50809),U=e(45843),G=e(61617),F=e(95159),Z=e(94223),_=e(18050),N=e(9739),V=e(7793),L=e(23986),O=e(34861),W=e(95201),I=e(71004),w=e(23654),Q=e(63653),J=e(63374),Y=e(19742),z=e(8886);const q=(0,j.i)({id:"scaffolder",apis:[(0,U.b)({api:l.z,deps:{discoveryApi:G.I,scmIntegrationsApi:t.Y,fetchApi:F.a,identityApi:Z.K},factory:({discoveryApi:Qe,scmIntegrationsApi:Te,fetchApi:Ie,identityApi:Me})=>new v({discoveryApi:Qe,scmIntegrationsApi:Te,fetchApi:Ie,identityApi:Me})})],routes:{root:L.rQ,selectedTemplate:L.sP,ongoingTask:L.bW,actions:L.GF,listTasks:L.JX,edit:L.Dg},externalRoutes:{registerComponent:L.J0,viewTechDoc:L.UJ}}),te=q.provide(A({component:R.q,name:"EntityPicker",schema:W.f2})),se=q.provide(A({component:T.R,name:"EntityNamePicker",validation:P._,schema:I.a})),ne=q.provide(A({component:B.RT,name:"MultiEntityPicker",schema:w.mG,validation:B.eR})),oe=q.provide(A({component:i.e,name:"RepoUrlPicker",validation:b._,schema:M.d})),me=q.provide(A({component:D.u,name:"OwnerPicker",schema:Q.h})),Se=q.provide(A({component:O.T,name:"MyGroupsPicker",schema:J.M})),be=q.provide((0,_.QJ)({name:"ScaffolderPage",component:()=>Promise.all([e.e(441),e.e(9021),e.e(8158),e.e(1182),e.e(1518),e.e(1742)]).then(e.bind(e,51742)).then(Qe=>Qe.Router),mountPoint:L.rQ})),Be=q.provide(A({component:N.F,name:"OwnedEntityPicker",schema:Y.M})),Je=q.provide(A({component:V.t,name:"EntityTagsPicker",schema:z.u}))},23986:(K,y,e)=>{var R;e.d(y,{GF:()=>p,Dg:()=>v,J0:()=>h,rQ:()=>r,JX:()=>g,bW:()=>m,sP:()=>s,UJ:()=>d});var t=e(2488),l=e(77555),u=e(13930);const a=/^\w+$/;R=u.b;class A{constructor(T,D,B,M){ue(this,R,"sub");this.id=T,this.path=D,this.parent=B,this.params=M}toString(){return`routeRef{type=sub,id=${this.id}}`}}function c(P){const{id:T,path:D,parent:B}=P,M=D.split("/").filter(j=>j.startsWith(":")).map(j=>j.substring(1)),b=[...B.params,...M];if(B.params.some(j=>M.includes(j)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!D.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${D}'`);if(D.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${D}'`);for(const j of M)if(!a.test(j))throw new Error(`SubRouteRef path has invalid param, got '${j}'`);return new A(T,D,B,b)}const h=(0,t.I)({id:"register-component",optional:!0,defaultTarget:"catalog-import.importPage"}),d=(0,t.I)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"],defaultTarget:"techdocs.docRoot"}),r=(0,l.H)({id:"scaffolder"});c({id:"scaffolder/legacy/selected-template",parent:r,path:"/templates/:templateName"});const s=c({id:"scaffolder/selected-template",parent:r,path:"/templates/:namespace/:templateName"}),m=c({id:"scaffolder/task",parent:r,path:"/tasks/:taskId"}),g=c({id:"scaffolder/list-tasks",parent:r,path:"/tasks"}),p=c({id:"scaffolder/actions",parent:r,path:"/actions"}),v=c({id:"scaffolder/edit",parent:r,path:"/edit"})},20570:(K,y,e)=>{e.d(y,{y:()=>l});var t=e(28967);const l=(0,t.y)({id:"plugin.search.queryservice"});class u{constructor(A){this.mockedResults=A}query(){return Promise.resolve(this.mockedResults||{results:[]})}}},51470:(K,y,e)=>{e.d(y,{e:()=>a});var t=e(14041),l=e(58837);const u=(0,l.A)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),a=A=>{const{text:c,preTag:h,postTag:d}=A,r=u(),s=(0,t.useMemo)(()=>c.split(new RegExp(`(${h}.+?${d})`)),[d,h,c]);return t.createElement(t.Fragment,null,s.map((m,g)=>m.includes(h)?t.createElement("mark",{className:r.highlight,key:g},m.replace(new RegExp(`${h}|${d}`,"g"),"")):m))}},33986:(K,y,e)=>{e.d(y,{I:()=>v,Z:()=>p});var t=e(18139),l=e(54195),u=e(19224),a=e(29365),A=e(34839),c=e(16249),h=e(64947),d=e(45917),r=e(14041),s=e(22771),m=e(87437);function g(R){return(0,r.forwardRef)((P,T)=>r.createElement(m.Lt,{inheritParentContextIfAvailable:!0},r.createElement(R,{...P,ref:T})))}const p=g((0,r.forwardRef)((R,P)=>{const{onChange:T,onKeyDown:D=()=>{},onClear:B=()=>{},onSubmit:M=()=>{},debounceTime:b=200,clearButton:i=!0,fullWidth:j=!0,value:U,label:G,placeholder:F,inputProps:Z={},InputProps:_={},endAdornment:N,...V}=R,L=(0,t.gf)(l.U),[O,W]=(0,r.useState)(""),I=(0,r.useRef)("");(0,r.useEffect)(()=>{W(se=>se===I.current?String(U):se)},[U,I]),(0,s.A)(()=>{I.current=O,T(O)},b,[O]);const w=(0,r.useCallback)(se=>{W(se.target.value)},[W]),Q=(0,r.useCallback)(se=>{D&&D(se),M&&se.key==="Enter"&&M()},[D,M]),J=(0,r.useCallback)(()=>{I.current="",T(""),W(""),B&&B()},[T,B]),Y=G?void 0:"Search",z=F!=null?F:`Search in ${L.getOptionalString("app.title")||"Backstage"}`,q=r.createElement(A.A,{position:"start"},r.createElement(a.A,{"aria-label":"Query",size:"small",disabled:!0},r.createElement(d.A,null))),te=r.createElement(A.A,{position:"end"},r.createElement(h.A,{"aria-label":"Clear",size:"small",onClick:J,onKeyDown:se=>{se.key==="Enter"&&se.stopPropagation()}},"Clear"));return r.createElement(c.A,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:P,value:O,label:G,placeholder:z,InputProps:{startAdornment:q,endAdornment:i?te:N,..._},inputProps:{"aria-label":Y,...Z},fullWidth:j,onChange:w,onKeyDown:Q,...V})})),v=g((0,r.forwardRef)((R,P)=>{const{value:T="",onChange:D,...B}=R,{term:M,setTerm:b}=(0,m.SQ)();(0,r.useEffect)(()=>{T&&b(String(T))},[T,b]);const i=(0,r.useCallback)(j=>{D?D(j):b(j)},[D,b]);return r.createElement(u.I,{attributes:{pluginId:"search",extension:"SearchBar"}},r.createElement(p,{...B,ref:P,value:M,onChange:i}))}))},90420:(K,y,e)=>{e.d(y,{$6:()=>j});var t=e(14041),l=e(95061),u=e(86901),a=e(48543),A=e(69076),c=e(81215),h=e(26343),d=e(91761),r=e(72501),s=e(58837),m=e(87437),g=e(67720),p=e(16249),v=e(61783),R=e(87290),P=e(22771);const T=(U,G,F=[],Z=250)=>{const _=(0,t.useRef)({}),N=U||(()=>Promise.resolve([])),[V,L]=(0,R.A)(N,[G],{loading:!0});if((0,P.A)(()=>{_.current[G]===void 0&&(_.current[G]=L(G).then(W=>(_.current[G]=W,W)))},Z,[L,G]),F.length)return{loading:!1,value:F};const O=_.current[G];return Array.isArray(O)?{loading:!1,value:O}:V},D=(U,G)=>{const{setFilters:F}=(0,m.SQ)();(0,t.useEffect)(()=>{G&&[G].flat().length>0&&F(Z=>({...Z,[U]:G}))},[])},B=U=>{const{className:G,defaultValue:F,name:Z,values:_,valuesDebounceMs:N,label:V,filterSelectedOptions:L,limitTags:O,multiple:W}=U,[I,w]=(0,t.useState)("");D(Z,F);const Q=typeof _=="function"?_:void 0,J=typeof _=="function"?void 0:_,{value:Y,loading:z}=T(Q,I,J,N),{filters:q,setFilters:te}=(0,m.SQ)(),se=q[Z]||(W?[]:null),ne=(Se,be)=>{te(Be=>{const{[Z]:Je,...Qe}=Be;return be?{...Qe,[Z]:be}:{...Qe}})},oe=Se=>t.createElement(p.A,{...Se,name:"search",variant:"outlined",label:V,fullWidth:!0}),me=(Se,be)=>Se.map((Be,Je)=>t.createElement(g.A,{label:Be,color:"primary",...be({index:Je})}));return t.createElement(v.Ay,{filterSelectedOptions:L,limitTags:O,multiple:W,className:G,id:`${W?"multi-":""}select-filter-${Z}--select`,options:Y||[],loading:z,value:se,onChange:ne,onInputChange:(Se,be)=>w(be),renderInput:oe,renderTags:me})},M=(0,s.A)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),b=U=>{const{className:G,defaultValue:F,label:Z,name:_,values:N=[],valuesDebounceMs:V}=U,L=M(),{filters:O,setFilters:W}=(0,m.SQ)();D(_,F);const I=typeof N=="function"?N:void 0,w=typeof N=="function"?void 0:N,{value:Q=[],loading:J}=T(I,"",w,V),Y=z=>{const{target:{value:q,checked:te}}=z;W(se=>{const{[_]:ne,...oe}=se,me=(ne||[]).filter(be=>be!==q),Se=te?[...me,q]:me;return Se.length?{...oe,[_]:Se}:oe})};return t.createElement(l.A,{className:G,disabled:J,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},Z?t.createElement(d.A,{className:L.label},Z):null,Q.map(z=>{var q;return t.createElement(u.A,{key:z,classes:{root:L.checkboxWrapper,label:L.textWrapper},label:z,control:t.createElement(A.A,{color:"primary",inputProps:{"aria-labelledby":z},value:z,name:z,onChange:Y,checked:((q=O[_])!=null?q:[]).includes(z)})})}))},i=U=>{const{className:G,defaultValue:F,label:Z,name:_,values:N,valuesDebounceMs:V}=U,L=M();D(_,F);const O=typeof N=="function"?N:void 0,W=typeof N=="function"?void 0:N,{value:I=[],loading:w}=T(O,"",W,V),{filters:Q,setFilters:J}=(0,m.SQ)(),Y=z=>{const{target:{value:q}}=z;J(te=>{const{[_]:se,...ne}=te;return q?{...ne,[_]:q}:ne})};return t.createElement(l.A,{disabled:w,className:G,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},Z?t.createElement(a.A,{className:L.label,margin:"dense"},Z):null,t.createElement(c.A,{variant:"outlined",value:Q[_]||"",onChange:Y},t.createElement(h.A,{value:""},t.createElement("em",null,"All")),I.map(z=>t.createElement(h.A,{key:z,value:z},t.createElement(r.A,{variant:"inherit",noWrap:!0},z)))))},j=U=>{const{component:G,...F}=U;return t.createElement(G,{...F})};j.Checkbox=U=>t.createElement(j,{...U,component:b}),j.Select=U=>t.createElement(j,{...U,component:i}),j.Autocomplete=U=>t.createElement(j,{...U,component:B})},9176:(K,y,e)=>{e.d(y,{n:()=>d});var t=e(14041),l=e(60083),u=e(87437),a=e(1048).Buffer;const A=r=>a.from(r.toString(),"utf-8").toString("base64"),c=r=>r?Number(a.from(r,"base64").toString("utf-8")):0,h=r=>{const{total:s=-1,cursor:m,hasNextPage:g,onCursorChange:p,limit:v=25,limitLabel:R="Results per page:",limitText:P=({from:j,to:U})=>s>0?`of ${s}`:`${j}-${U}`,limitOptions:T,onLimitChange:D,...B}=r,M=(0,t.useMemo)(()=>c(m),[m]),b=(0,t.useCallback)((j,U)=>{p==null||p(A(U))},[p]),i=(0,t.useCallback)(j=>{const U=j.target.value;D==null||D(parseInt(U,10))},[D]);return t.createElement(l.A,{...B,component:"div",count:s,page:M,nextIconButtonProps:{...g!==void 0&&{disabled:!g}},onPageChange:b,rowsPerPage:v,labelRowsPerPage:R,labelDisplayedRows:P,rowsPerPageOptions:T,onRowsPerPageChange:i})},d=r=>{const{pageLimit:s,setPageLimit:m,pageCursor:g,setPageCursor:p,fetchNextPage:v}=(0,u.SQ)(),R=(0,t.useCallback)(P=>{m(P),p(void 0)},[m,p]);return t.createElement(h,{...r,hasNextPage:!!v,limit:s,onLimitChange:R,cursor:g,onCursorChange:p})}},62958:(K,y,e)=>{e.d(y,{q0:()=>T});var t=e(14041),l=e(73466),u=e(45250),a=e.n(u),A=e(65995),c=e(96872),h=e(99424),d=e(18139),r=e(19224),s=e(20570),m=e(87437),g=e(39896);const p=D=>{const{children:B}=D,M=(0,m.SQ)(),{result:b,...i}=M;return B(b,i)},v=D=>{const{query:B,children:M}=D,b=(0,d.gf)(s.y),i=(0,l.A)(()=>{const{term:j="",types:U=[],filters:G={},...F}=B;return b.query({...F,term:j,types:U,filters:G})},[B]);return M(i,B)},R=D=>{const{query:B,children:M}=D;return B?t.createElement(v,{query:B},M):t.createElement(p,null,M)},P=D=>{const{query:B,children:M,noResultsComponent:b=t.createElement(A.p,{missing:"data",title:"Sorry, no results were found"}),...i}=D;return t.createElement(R,{query:B},({loading:j,error:U,value:G})=>j?t.createElement(c.k,null):U?t.createElement(h._,{title:"Error encountered while fetching search results",error:U}):G!=null&&G.results.length?(0,u.isFunction)(M)?M(G):t.createElement(g.z$,{...i,results:G.results},M):b)},T=D=>t.createElement(r.I,{attributes:{pluginId:"search",extension:"SearchResult"}},t.createElement(P,{...D}))},87437:(K,y,e)=>{e.d(y,{Lt:()=>D,SQ:()=>p});var t=e(45250),l=e.n(t),u=e(14041),a=e(73466),A=e(5877),c=e(97388),h=e(18139),d=e(52262),r=e(19224),s=e(54195),m=e(20570);const g=(0,c.tK)("search-context"),p=()=>{const B=(0,u.useContext)(g);if(!B)throw new Error("useSearch must be used within a SearchContextProvider");const M=B.atVersion(1);if(!M)throw new Error("No SearchContext v1 found");return M},v=()=>(0,u.useContext)(g)!==void 0,R={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},P=(B=R)=>{var q,te,se,ne;const M=(0,h.gf)(m.y),b=(0,d.s)(),[i,j]=(0,u.useState)(B.term),[U,G]=(0,u.useState)(B.types),[F,Z]=(0,u.useState)(B.filters),[_,N]=(0,u.useState)(B.pageLimit),[V,L]=(0,u.useState)(B.pageCursor),O=(0,A.A)(i),W=(0,A.A)(F),I=(0,a.A)(async()=>{var me,Se;const oe=await M.query({term:i,types:U,filters:F,pageLimit:_,pageCursor:V});return i&&b.captureEvent("search",i,{value:(Se=(me=I.value)==null?void 0:me.numberOfResults)!=null?Se:void 0}),oe},[i,U,F,_,V]),w=!I.loading&&!I.error&&((q=I.value)==null?void 0:q.nextPageCursor),Q=!I.loading&&!I.error&&((te=I.value)==null?void 0:te.previousPageCursor),J=(0,u.useCallback)(()=>{var oe;L((oe=I.value)==null?void 0:oe.nextPageCursor)},[(se=I.value)==null?void 0:se.nextPageCursor]),Y=(0,u.useCallback)(()=>{var oe;L((oe=I.value)==null?void 0:oe.previousPageCursor)},[(ne=I.value)==null?void 0:ne.previousPageCursor]);return(0,u.useEffect)(()=>{O!==void 0&&i!==O&&L(void 0)},[i,O,L]),(0,u.useEffect)(()=>{W!==void 0&&!(0,t.isEqual)(F,W)&&L(void 0)},[F,W,L]),{result:I,term:i,setTerm:j,types:U,setTypes:G,filters:F,setFilters:Z,pageLimit:_,setPageLimit:N,pageCursor:V,setPageCursor:L,fetchNextPage:w?J:void 0,fetchPreviousPage:Q?Y:void 0}},T=B=>{const{initialState:M,children:b}=B,i=P(M);return u.createElement(r.I,{attributes:{searchTypes:i.types.sort().join(",")}},u.createElement(g.Provider,{value:(0,c.Bl)({1:i})},b))},D=B=>{const{initialState:M,inheritParentContextIfAvailable:b,children:i}=B,j=v(),U=(0,h.gf)(s.U),G=M!=null?M:{},F=U.has("search.query.pageLimit")?{pageLimit:U.getNumber("search.query.pageLimit")}:{},Z={...R,...G,...F};return j&&b?u.createElement(u.Fragment,null,i):u.createElement(T,{initialState:Z},i)}},39896:(K,y,e)=>{e.d(y,{z$:()=>i,ec:()=>M});var t=e(14041),l=e(85408),u=e(52262),a=e(18050),A=e(77026),c=e(58007),h=e(8109),d=e(19224),r=e(51470),s=e(46423),m=e(5951),g=e(77125),p=e(72501),v=e(75202);const R=({result:j,highlight:U,icon:G,secondaryAction:F,lineClamp:Z=5})=>j?t.createElement(t.Fragment,null,G&&t.createElement(s.A,null,G),t.createElement(m.A,{primaryTypographyProps:{variant:"h6"},primary:t.createElement(v.N_,{noTrack:!0,to:j.location},U!=null&&U.fields.title?t.createElement(r.e,{text:(U==null?void 0:U.fields.title)||"",preTag:(U==null?void 0:U.preTag)||"",postTag:(U==null?void 0:U.postTag)||""}):j.title),secondary:t.createElement(p.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:Z,overflow:"hidden"},color:"textSecondary",variant:"body2"},U!=null&&U.fields.text?t.createElement(r.e,{text:U.fields.text,preTag:U.preTag,postTag:U.postTag}):j.text)}),F&&t.createElement(g.A,{alignItems:"flex-end"},F)):null,P=j=>t.createElement(d.I,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},t.createElement(R,{...j})),T="search.results.list.items.extensions.v1",D=(j,U)=>{for(const G of j){if(!(0,t.isValidElement)(G))continue;const F=(0,l.E)(G,T);if(F!=null&&F(U))return(0,t.cloneElement)(G,{rank:U.rank,highlight:U.highlight,result:U.document,...G.props})}return null},B=j=>{const{rank:U,result:G,noTrack:F,children:Z,alignItems:_="flex-start",...N}=j,V=(0,u.s)(),L=(0,t.useCallback)(()=>{F||G&&V.captureEvent("discover",G.title,{attributes:{to:G.location},value:U})},[U,G,F,V]);return t.createElement(h.A,{divider:!0,alignItems:_,onClickCapture:L,...N},Z)},M=j=>{const{name:U,component:G,predicate:F=()=>!0}=j;return(0,a.zZ)({name:U,component:{lazy:()=>G().then(Z=>_=>t.createElement(B,{rank:_.rank,result:_.result,noTrack:_.noTrack},(0,t.createElement)(Z,_)))},data:{[T]:F}})},b=j=>{const U=(0,A.O)(j,G=>G.selectByComponentData({key:T}).getElements(),[j]);return(0,t.useCallback)((G,F)=>{const Z=D(U,G);return t.createElement(t.Fragment,{key:F},Z!=null?Z:t.createElement(B,{rank:G.rank,result:G.document},t.createElement(P,{rank:G.rank,highlight:G.highlight,result:G.document})))},[U])},i=j=>{const{results:U,children:G,...F}=j,Z=b(G);return t.createElement(c.A,{...F},U.map(Z))}},83421:(K,y,e)=>{e.d(y,{n:()=>I});var t=e(69076),l=e(67720),u=e(95061),a=e(48543),A=e(5951),c=e(26343),h=e(81215),d=e(58837),r=e(14041),s=e(8380),m=e(18139),g=e(87437),p=e(20570),v=e(8973),R=e(29655),P=e(91567),T=e(40703),D=e(48653),B=e(45685),M=e(37197),b=e(58007),i=e(8109),j=e(46423),U=e(6924),G=e(53364),F=e(73466);const Z=(0,d.A)(w=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:w.spacing(1)},icon:{color:w.palette.text.primary},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:w.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:w.spacing(2,0),"&.Mui-expanded":{margin:w.spacing(2,0)}},accordionDetails:{padding:w.spacing(0,0,1)}})),_=w=>{const Q=Z(),{filters:J,setPageCursor:Y,setTypes:z,term:q,types:te}=(0,g.SQ)(),se=(0,m.gf)(p.y),[ne,oe]=(0,r.useState)(!0),{defaultValue:me,name:Se,showCounts:be,types:Be}=w,Je=()=>oe(He=>!He),Qe=He=>()=>{z(He!==""?[He]:[]),Y(void 0),oe(!1)};(0,r.useEffect)(()=>{me&&z([me])},[]);const Te=[{value:"",name:"All",icon:r.createElement(G.A,null)},...Be],Ie=te[0]||"",{value:Me}=(0,F.A)(async()=>{if(!be)return{};const He=await Promise.all(Te.map(Ye=>Ye.value).map(async Ye=>{const{numberOfResults:lt}=await se.query({term:q,types:Ye?[Ye]:[],filters:te.includes(Ye)||!te.length&&!Ye?J:{},pageLimit:0});return[Ye,lt!==void 0?`${lt>=1e4?">10000":lt} results`:" -- "]}));return Object.fromEntries(He)},[J,be,q,te]);return r.createElement(T.A,{className:Q.card},r.createElement(B.A,{title:Se,titleTypographyProps:{variant:"overline"}}),r.createElement(D.A,{className:Q.cardContent},r.createElement(v.A,{className:Q.accordion,expanded:ne,onChange:Je},r.createElement(R.A,{classes:{root:Q.accordionSummary,content:Q.accordionSummaryContent},expandIcon:r.createElement(U.A,{className:Q.icon}),IconButtonProps:{size:"small"}},ne?"Collapse":Te.filter(He=>He.value===Ie)[0].name),r.createElement(P.A,{classes:{root:Q.accordionDetails}},r.createElement(b.A,{className:Q.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},Te.map(He=>r.createElement(r.Fragment,{key:He.value},r.createElement(M.A,null),r.createElement(i.A,{selected:te[0]===He.value||te.length===0&&He.value==="",onClick:Qe(He.value),button:!0},r.createElement(j.A,null,(0,r.cloneElement)(He.icon,{className:Q.listItemIcon})),r.createElement(A.A,{primary:He.name,secondary:Me&&Me[He.value]})))))))))};var N=e(38605),V=e(31653);const L=(0,d.A)(w=>({tabs:{borderBottom:`1px solid ${w.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:w.typography.fontWeightBold,fontSize:w.typography.pxToRem(13),color:w.palette.text.primary,minWidth:"130px"}})),O=w=>{const Q=L(),{setPageCursor:J,setTypes:Y,types:z}=(0,g.SQ)(),{defaultValue:q,types:te}=w,se=(oe,me)=>{Y(me!==""?[me]:[]),J(void 0)};(0,r.useEffect)(()=>{q&&Y([q])},[]);const ne=[{value:"",name:"All"},...te];return r.createElement(V.A,{"aria-label":"List of search types tabs",className:Q.tabs,indicatorColor:"primary",value:z.length===0?"":z[0],onChange:se},ne.map((oe,me)=>r.createElement(N.A,{key:me,className:Q.tab,label:oe.name,value:oe.value})))},W=(0,d.A)(w=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:w.spacing(1)},chip:{margin:2}})),I=w=>{const{className:Q,defaultValue:J,name:Y,values:z=[]}=w,q=W(),{types:te,setTypes:se}=(0,g.SQ)();(0,s.A)(()=>{te.length||(J&&Array.isArray(J)?se(J):J&&se([J]))});const ne=oe=>{const me=oe.target.value;se(me)};return r.createElement(u.A,{className:Q,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},r.createElement(a.A,{className:q.label,margin:"dense"},Y),r.createElement(h.A,{multiple:!0,variant:"outlined",value:te,onChange:ne,placeholder:"All Results",renderValue:oe=>r.createElement("div",{className:q.chips},oe.map(me=>r.createElement(l.A,{key:me,label:me,className:q.chip,size:"small"})))},z.map(oe=>r.createElement(c.A,{key:oe,value:oe},r.createElement(t.A,{checked:te.indexOf(oe)>-1}),r.createElement(A.A,{primary:oe})))))};I.Accordion=w=>r.createElement(_,{...w}),I.Tabs=w=>r.createElement(O,{...w})},87162:(K,y,e)=>{e.d(y,{gC:()=>v,ai:()=>R,rQ:()=>g});var t=e(3399),l=e(45810),u=e.n(l);class a{constructor(D){ue(this,"discoveryApi");ue(this,"fetchApi");this.discoveryApi=D.discoveryApi,this.fetchApi=D.fetchApi}async query(D){const B=u().stringify(D),M=`${await this.discoveryApi.getBaseUrl("search")}/query?${B}`,b=await this.fetchApi.fetch(M);if(!b.ok)throw await t.o3.fromResponse(b);return b.json()}}var A=e(20570),c=e(77555),h=e(50809),d=e(45843),r=e(61617),s=e(95159),m=e(18050);const g=(0,c.H)({id:"search"}),p=(0,h.i)({id:"search",apis:[(0,d.b)({api:A.y,deps:{discoveryApi:r.I,fetchApi:s.a},factory:({discoveryApi:T,fetchApi:D})=>new a({discoveryApi:T,fetchApi:D})})],routes:{root:g}}),v=p.provide((0,m.QJ)({name:"SearchPage",component:()=>e.e(2477).then(e.bind(e,32477)).then(T=>T.SearchPage),mountPoint:g})),R=p.provide((0,m.NC)({name:"SidebarSearchModal",component:{lazy:()=>e.e(2238).then(e.bind(e,42238)).then(T=>T.SidebarSearchModal)}})),P=p.provide((0,m.NC)({name:"HomePageSearchBar",component:{lazy:()=>e.e(1107).then(e.bind(e,51107)).then(T=>T.HomePageSearchBar)}}))},29789:(K,y,e)=>{e.d(y,{Gr:()=>ct});var t=e(50809),l=e(11618),u=e(15246),a=e(14041),A=e(87881),c=e(7031),h=e(64947),d=e(63798),r=e(6924),s=e(85639);const m=".md-nav__item--nested .md-toggle",g="@backstage/techdocs-addons/nav-expanded",p=(0,c.A)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(h.A),v=(0,c.A)({root:{height:"20px",width:"20px"}})(d.A),R=(0,c.A)({root:{height:"20px",width:"20px"}})(r.A),P=()=>{const Ce={expandAllNestedNavs:!1},{value:Pe,set:Ge}=(0,A.t)(g,{defaultValue:Ce}),[_e,Xe]=(0,a.useState)(!1),[...Ke]=(0,s.$r)([m]),At=(0,a.useCallback)(et=>{const tt=et.checked,pe=Pe==null?void 0:Pe.expandAllNestedNavs;return!!(pe&&!tt||!pe&&tt)},[Pe]);(0,a.useEffect)(()=>{Ke!=null&&Ke.length&&(Xe(!0),Ke.forEach(et=>{At(et)&&et.click()}))},[Pe,At,Ke]);const Ue=()=>{Ge(et=>({expandAllNestedNavs:!(et!=null&&et.expandAllNestedNavs)}))};return a.createElement(a.Fragment,null,_e?a.createElement(p,{size:"small",onClick:Ue,"aria-label":Pe!=null&&Pe.expandAllNestedNavs?"collapse-nav":"expand-nav"},Pe!=null&&Pe.expandAllNestedNavs?a.createElement(R,null):a.createElement(v,null)):null)};var T=e(58837),D=e(41883),B=e(4321),M=e(52536),b=e.n(M),i=e(18139),j=e(54195),U=e(78264),G=e(85911),F=e(54934);const Z="techdocs-report-issue",_=`#${Z}`,N='[title^="Edit this page"]',V='[title^="Leave feedback for"]',L='[data-md-component="main"] .md-content',O=(Ce,Pe)=>Pe==="github"?(0,U.F)(Ce,"blob"):Pe==="gitlab"?(0,G.B)(Ce,"blob"):(console.error(`Invalid SCM type ${Pe} found in ReportIssue addon for URL ${Ce}!`),Ce),W=Ce=>{const Pe=Ce.toString().substring(0,70),Ge=Pe.length===70?"...":"";return`Documentation feedback: ${Pe}${Ge}`},I=(Ce,Pe,Ge)=>{const _e="## Documentation Feedback \u{1F4DD}",Xe="#### The highlighted text:",Ke="#### The comment on the text:",At="_>replace this line with your comment<_",Ue=Ce.toString().trim().split(`
`).map(tt=>`> ${tt.trim()}`).join(`
`),et=[`${Ge} URL: <${window.location.href}> 
Markdown URL: <${Pe}>`];return`${_e}

 ${Xe} 

 ${Ue}

 ${Ke} 
 ${At}

 ___
${et}`},w=Ce=>{var tt,pe;const Pe={title:"",body:""},Ge=(0,s.k0)(Ce),[_e]=(0,s.$r)([N]),Xe=(tt=_e==null?void 0:_e.href)!=null?tt:"",Ke=(0,i.gf)(F.Y),Ue=(0,i.gf)(j.U).getOptionalString("app.title")||"Backstage";if(!Ge||!Xe)return Pe;const et=(pe=Ke.byUrl(Xe))==null?void 0:pe.type;return et?{title:W(Ge),body:I(Ge,O(Xe,et),Ue)}:Pe},Q=()=>{var Xe,Ke;const Ce=(0,i.gf)(F.Y),[Pe]=(0,s.$r)([N]),Ge=(Xe=Pe==null?void 0:Pe.href)!=null?Xe:"";if(!Ge)return null;const _e=(Ke=Ce.byUrl(Ge))==null?void 0:Ke.type;return _e?{...b()(O(Ge,_e)),type:_e}:null};var J=e(85005),Y=e(92483),z=e(75202);const q=(0,T.A)(Ce=>({root:{display:"grid",gridGap:Ce.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Ce.palette.common.black,fontSize:Ce.typography.button.fontSize}})),te=({type:Ce})=>Ce==="github"?Y.Hk:J.A,se=({type:Ce})=>Ce==="github"?"Github":"Gitlab",ne=(Ce,Pe)=>{const{title:Ge,body:_e}=Pe,Xe=encodeURIComponent(Ge),Ke=encodeURIComponent(_e),{protocol:At,resource:Ue,owner:et,name:tt,type:pe}=Ce,k=`${At}://${Ue}/${et}/${tt}`,H=encodeURI(k);return pe==="github"?`${H}/issues/new?title=${Xe}&body=${Ke}`:`${H}/issues/new?issue[title]=${Xe}&issue[description]=${Ke}`},oe=({template:Ce,repository:Pe})=>{const Ge=q(),_e=te(Pe),Xe=ne(Pe,Ce);return a.createElement(z.N_,{className:Ge.root,to:Xe,target:"_blank"},a.createElement(_e,null)," Open new ",se(Pe)," issue")},me=(0,T.A)(Ce=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Ce.spacing(1),zIndex:Ce.zIndex.tooltip,background:Ce.palette.common.white}})),Se=({debounceTime:Ce=500,templateBuilder:Pe})=>{const Ge=me(),[_e,Xe]=(0,a.useState)(),Ke=Q(),At=w(Ce),Ue=(0,s.k0)(Ce),[et,tt]=(0,s.$r)([L,V]);let[pe]=(0,s.$r)([_]);return tt&&(tt.style.display="none"),(0,a.useEffect)(()=>{if(!Ke||!Ue||!Ue.containsNode(et,!0)||Ue!=null&&Ue.containsNode(pe,!0))return;const k=et.getBoundingClientRect(),H=Ue.getRangeAt(0).getBoundingClientRect(),le=H.top-k.top,ve=50;let ge=le<ve?101:le-16;if(k.top<0){const fe=Math.abs(k.top);le-fe<ve&&(ge+=89)}Xe({top:`${ge}px`,left:`${H.left+H.width/2}px`})},[Ue,et,pe]),!Ue||!Ke||!["github","gitlab"].includes(Ke.type)?null:(pe||(pe=document.createElement("div"),pe.setAttribute("id",Z),et.prepend(pe)),a.createElement(D.A,{container:pe},a.createElement(B.A,{"data-testid":"report-issue-addon",className:Ge.root,style:_e},a.createElement(oe,{repository:Ke,template:Pe?Pe({selection:Ue}):At}))))};var be=e(33466),Be=e(54917),Je=e(26343),Qe=e(5951),Te=e(72501),Ie=e(77125),Me=e(29365),He=e(18466),Ye=e(80113);const lt="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",Et=(0,c.A)(Ce=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Ce.palette.common.white,boxShadow:lt,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:lt}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Ce.palette.textSubtle,fontSize:Ce.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(be.A),We={key:"techdocs.addons.settings.textsize",defaultValue:100},ze=[{value:90},{value:100},{value:115},{value:130},{value:150}],we=(0,T.A)(Ce=>({container:{color:Ce.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Ce.spacing(1)},increaseButton:{marginLeft:Ce.spacing(1)}})),ce=()=>{const Ce=we(),Pe=(0,Be.A)(),[Ge]=(0,s.$r)(["body"]),[_e,Xe]=(0,a.useState)(()=>{const le=localStorage==null?void 0:localStorage.getItem(We.key);return le?parseInt(le,10):We.defaultValue}),Ke=(0,a.useMemo)(()=>ze.map(le=>le.value),[]),At=(0,a.useMemo)(()=>Ke.indexOf(_e),[Ke,_e]),Ue=(0,a.useMemo)(()=>Ke[0],[Ke]),et=(0,a.useMemo)(()=>Ke[Ke.length-1],[Ke]),tt=(0,a.useCallback)(()=>`${_e}%`,[_e]),pe=(0,a.useCallback)((le,ve)=>{Array.isArray(ve)||(Xe(ve),localStorage==null||localStorage.setItem(We.key,String(ve)))},[Xe]),k=(0,a.useCallback)(le=>{pe(le,Ke[At-1])},[At,Ke,pe]),H=(0,a.useCallback)(le=>{pe(le,Ke[At+1])},[At,Ke,pe]);return(0,a.useEffect)(()=>{var ve,ge;if(!Ge)return;const le=(ge=(ve=Pe.typography)==null?void 0:ve.htmlFontSize)!=null?ge:16;Ge.style.setProperty("--md-typeset-font-size",`${le*(_e/100)}px`)},[Ge,_e,Pe]),a.createElement(Je.A,{className:Ce.menuItem,button:!0,disableRipple:!0},a.createElement(Qe.A,{primary:a.createElement(Te.A,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:a.createElement(Ie.A,{className:Ce.container},a.createElement(Me.A,{className:Ce.decreaseButton,size:"small",edge:"start",disabled:_e===Ue,onClick:k,"aria-label":"Decrease text size"},a.createElement(Ye.A,null)),a.createElement(Et,{value:_e,"aria-labelledby":"text-size-slider",getAriaValueText:tt,valueLabelDisplay:"on",valueLabelFormat:tt,marks:ze,step:null,min:Ue,max:et,onChangeCommitted:pe}),a.createElement(Me.A,{className:Ce.increaseButton,size:"small",edge:"end",disabled:_e===et,onClick:H,"aria-label":"Increase text size"},a.createElement(He.A,null))),disableTypography:!0}))};var Ae=e(10527),Re=e(60367);const Ne=()=>{const Ce=(0,s.$r)(["img"]);return(0,a.useEffect)(()=>{let Pe=null,Ge=new Ae.A({pswpModule:Re.A,initialZoomLevel:1,secondaryZoomLevel:_e=>{const Xe=_e.elementSize.x,Ke=_e.elementSize.y,At=_e.panAreaSize.x,Ue=_e.panAreaSize.y,et=At/Xe,tt=Ue/Ke;return Math.min(et,tt)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return Ce.forEach((_e,Xe)=>{_e.onclick=()=>(Pe===null&&(Pe=Ce.map(Ke=>({element:Ke,src:Ke.src,msrc:Ke.src,alt:Ke.alt,width:Ke.clientWidth,height:Ke.clientHeight}))),Ge.loadAndOpen(Xe,Pe),!1)}),Ge.init(),()=>{Ge.destroy(),Ge=null}},[Ce]),null},ht=(0,t.i)({id:"techdocsModuleAddonsContrib"}),Ot=ht.provide((0,l.Hr)({name:"ExpandableNavigation",location:u.e.PrimarySidebar,component:P})),ct=ht.provide((0,l.Hr)({name:"ReportIssue",location:u.e.Content,component:Se})),ut=ht.provide((0,l.Hr)({name:"TextSize",location:u.e.Settings,component:ce})),it=ht.provide((0,l.Hr)({name:"LightBox",location:u.e.Content,component:Ne}))},11618:(K,y,e)=>{e.d(y,{AF:()=>h,Hr:()=>s,Wm:()=>c,YR:()=>v,po:()=>d});var t=e(14041),l=e(18690),u=e(85408),a=e(18050),A=e(77026);const c="techdocs.addons.addon.v1",h="techdocs.addons.wrapper.v1",d=()=>null;(0,u.h)(d,h,!0);const r=R=>`${c}.${R.toLocaleLowerCase("en-US")}`;function s(R){const{name:P,component:T}=R;return(0,a.zZ)({name:P,component:{sync:D=>t.createElement(T,{...D})},data:{[c]:R,[r(P)]:!0}})}const m=(R,P)=>R.selectByComponentData({key:P}).getElements()[0],g=R=>R.selectByComponentData({key:h}).selectByComponentData({key:c}),p=R=>R.selectByComponentData({key:h}).findComponentData({key:c}),v=()=>{const R=(0,l.P1)(),P=(0,A.O)(R,g),T=(0,A.O)(R,p),D=(0,t.useCallback)(b=>{var j;if(!P||!b)return null;const i=r(b.name);return(j=m(P,i))!=null?j:null},[P]),B=(0,t.useCallback)(b=>{const i=T.find(j=>j.name===b);return i?D(i):null},[T,D]),M=(0,t.useCallback)(b=>{const i=T.filter(j=>j.location===b);return i.length?i.map(D):null},[T,D]);return{renderComponentByName:B,renderComponentsByLocation:M}}},49707:(K,y,e)=>{e.d(y,{l:()=>l,s:()=>u});var t=e(28967);const l=(0,t.y)({id:"plugin.techdocs.service"}),u=(0,t.y)({id:"plugin.techdocs.storageservice"})},66839:(K,y,e)=>{e.d(y,{R:()=>v,V:()=>R});var t=e(14041),l=e(73466),u=e(28966),a=e(78560),A=e(97388),c=e(18139),h=e(54195),d=e(19224),r=e(49707);function s(P,T){return T.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(P.kind=P.kind.toLocaleLowerCase(),P.name=P.name.toLocaleLowerCase(),P.namespace=P.namespace.toLocaleLowerCase()),P}const m=(P,T)=>(0,a.U2)(P)===(0,a.U2)(T),g={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},p=(0,A.tK)("techdocs-reader-page-context"),v=(0,t.memo)(P=>{const{entityRef:T,children:D}=P,B=(0,c.gf)(r.l),M=(0,c.gf)(h.U),b=(0,l.A)(async()=>B.getEntityMetadata(T),[T]),i=(0,u.A)(async()=>B.getTechDocsMetadata(T),[T]),[j,U]=(0,t.useState)(g.title),[G,F]=(0,t.useState)(g.subtitle),[Z,_]=(0,t.useState)(g.shadowRoot);(0,t.useEffect)(()=>{Z&&!i.value&&!i.loading&&i.retry()},[i.value,i.loading,Z,i.retry,i]);const N={metadata:i,entityRef:s(T,M),entityMetadata:b,shadowRoot:Z,setShadowRoot:_,title:j,setTitle:U,subtitle:G,setSubtitle:F},V=(0,A.Bl)({1:N});return t.createElement(d.I,{attributes:{entityRef:(0,a.U2)(T)}},t.createElement(p.Provider,{value:V},D instanceof Function?D(N):D))},(P,T)=>m(P.entityRef,T.entityRef)),R=()=>{const P=(0,t.useContext)(p);if(P===void 0)return g;const T=P.atVersion(1);if(T===void 0)throw new Error("No context found for version 1.");return T}},85639:(K,y,e)=>{e.d(y,{$r:()=>c,k0:()=>d});var t=e(14041),l=e(12784),u=e.n(l),a=e(66839);const A=()=>{const{shadowRoot:r}=(0,a.V)();return r},c=r=>{const s=A(),[m,g]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let p;return s&&(p=new MutationObserver(()=>{g(!m)}),p.observe(s,{attributes:!0,characterData:!0,childList:!0,subtree:!0})),()=>p==null?void 0:p.disconnect()},[s,m,g]),s?r.map(p=>s.querySelectorAll(p)).filter(p=>p.length).map(p=>Array.from(p)).flat():[]},h=r=>r.toString()&&r.rangeCount&&r.getRangeAt(0).getBoundingClientRect().top,d=(r=0)=>{const s=A(),[m,g]=(0,t.useState)(null),p=(0,t.useMemo)(()=>u()(()=>{const v=s,R=v.getSelection?v.getSelection():document.getSelection();R&&h(R)?g(R):g(null)},r),[s,g,r]);return(0,t.useEffect)(()=>(window.document.addEventListener("selectionchange",p),()=>{p.cancel(),window.document.removeEventListener("selectionchange",p)}),[p]),m}},15246:(K,y,e)=>{e.d(y,{e:()=>t});const t=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"})},64392:(K,y,e)=>{e.d(y,{o_:()=>P,$j:()=>D,Wj:()=>B,IP:()=>M,Ju:()=>v});var t=e(49707),l=e(3399),u=e(92110);class a{constructor(i){ue(this,"configApi");ue(this,"discoveryApi");ue(this,"fetchApi");this.configApi=i.configApi,this.discoveryApi=i.discoveryApi,this.fetchApi=i.fetchApi}async getCookie(){const j=`${await this.getApiOrigin()}/cookie`,U=await this.fetchApi.fetch(`${j}`,{credentials:"include"});if(!U.ok)throw await l.o3.fromResponse(U);return await U.json()}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(i){const{kind:j,namespace:U,name:G}=i,Z=`${await this.getApiOrigin()}/metadata/techdocs/${U}/${j}/${G}`,_=await this.fetchApi.fetch(`${Z}`);if(!_.ok)throw await l.o3.fromResponse(_);return await _.json()}async getEntityMetadata(i){const{kind:j,namespace:U,name:G}=i,Z=`${await this.getApiOrigin()}/metadata/entity/${U}/${j}/${G}`,_=await this.fetchApi.fetch(`${Z}`);if(!_.ok)throw await l.o3.fromResponse(_);return await _.json()}}class A{constructor(i){ue(this,"configApi");ue(this,"discoveryApi");ue(this,"fetchApi");this.configApi=i.configApi,this.discoveryApi=i.discoveryApi,this.fetchApi=i.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var i;return(i=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?i:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getOptionalString("techdocs.builder")||"local"}async getEntityDocs(i,j){const{kind:U,namespace:G,name:F}=i,_=`${await this.getStorageUrl()}/${G}/${U}/${F}/${j}`,N=await this.fetchApi.fetch(`${_.endsWith("/")?_:`${_}/`}index.html`);let V="";switch(N.status){case 404:throw V="Page not found. ",j||(V+="This could be because there is no index.md file in the root of the docs directory of this repository."),new l.m_(V);case 500:throw V="Could not generate documentation or an error in the TechDocs backend. ",new Error(V)}return N.text()}async syncEntityDocs(i,j=()=>{}){const{kind:U,namespace:G,name:F}=i,_=`${await this.getApiOrigin()}/sync/${G}/${U}/${F}`;return new Promise((N,V)=>{const L=new AbortController;(0,u.y)(_,{fetch:this.fetchApi.fetch,signal:L.signal,onmessage(O){if(O.event==="log")O.data&&j(JSON.parse(O.data));else if(O.event==="finish"){let W=!1;O.data&&({updated:W}=JSON.parse(O.data)),N(W?"updated":"cached")}else O.event==="error"&&V(new Error(O.data))},onerror(O){L.abort(),V(O)}})})}async getBaseUrl(i,j,U){const{kind:G,namespace:F,name:Z}=j,N=`${await this.getApiOrigin()}/static/docs/${F}/${G}/${Z}/${U}`;return new URL(i,N.endsWith("/")?N:`${N}/`).toString()}}var c=e(17749),h=e(50809),d=e(45843),r=e(54195),s=e(61617),m=e(95159),g=e(18050),p=e(39896);const v=(0,h.i)({id:"techdocs",apis:[(0,d.b)({api:t.s,deps:{configApi:r.U,discoveryApi:s.I,fetchApi:m.a},factory:({configApi:b,discoveryApi:i,fetchApi:j})=>new A({configApi:b,discoveryApi:i,fetchApi:j})}),(0,d.b)({api:t.l,deps:{configApi:r.U,discoveryApi:s.I,fetchApi:m.a},factory:({configApi:b,discoveryApi:i,fetchApi:j})=>new a({configApi:b,discoveryApi:i,fetchApi:j})})],routes:{root:c.rQ,docRoot:c.Oc,entityContent:c.Ri}}),R=v.provide((0,g.QJ)({name:"TechdocsPage",component:()=>Promise.all([e.e(441),e.e(9021),e.e(8158),e.e(5403),e.e(7229)]).then(e.bind(e,97229)).then(b=>b.Router),mountPoint:c.rQ})),P=v.provide((0,g.QJ)({name:"EntityTechdocsContent",component:()=>Promise.all([e.e(441),e.e(9021),e.e(8158),e.e(5403),e.e(7229)]).then(e.bind(e,97229)).then(b=>b.EmbeddedDocsRouter),mountPoint:c.Ri})),T=v.provide((0,g.QJ)({name:"TechDocsCustomHome",component:()=>Promise.all([e.e(441),e.e(9021),e.e(9557)]).then(e.bind(e,59557)).then(b=>b.TechDocsCustomHome),mountPoint:c.rQ})),D=v.provide((0,g.QJ)({name:"TechDocsIndexPage",component:()=>Promise.all([e.e(441),e.e(9021),e.e(8158),e.e(4315)]).then(e.bind(e,4315)).then(b=>b.TechDocsIndexPage),mountPoint:c.rQ})),B=v.provide((0,g.QJ)({name:"TechDocsReaderPage",component:()=>Promise.all([e.e(5403),e.e(9832)]).then(e.bind(e,88942)).then(b=>b.TechDocsReaderPage),mountPoint:c.Oc})),M=v.provide((0,p.ec)({name:"TechDocsSearchResultListItem",component:()=>e.e(1472).then(e.bind(e,41472)).then(b=>b.TechDocsSearchResultListItem),predicate:b=>b.type==="techdocs"}))},17749:(K,y,e)=>{e.d(y,{Oc:()=>u,Ri:()=>a,rQ:()=>l});var t=e(77555);const l=(0,t.H)({id:"techdocs:index-page"}),u=(0,t.H)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),a=(0,t.H)({id:"techdocs:catalog-reader-view"})},87344:(K,y,e)=>{e.d(y,{c:()=>h});var t=e(14041),l=e(19087),u=e(58837),a=e(36521),A=e(31072);const c=(0,u.A)(d=>({avatar:{width:({size:r})=>r,height:({size:r})=>r,fontSize:({size:r})=>r*.7,border:`1px solid ${d.palette.textSubtle}`}})),h=d=>{const{size:r}=d,{iconSize:s}=A.hC,m=c(r?{size:r}:{size:s}),{profile:g}=(0,a.s)();return t.createElement(l.A,{src:g.picture,className:m.avatar,alt:"Profile picture"})}},58021:(K,y,e)=>{e.d(y,{w:()=>c});var t=e(14041),l=e(9684),u=e(74268),a=e(7370),A=e(72814);const c=h=>{const d=(0,A.S)(u.kQ),r=h.icon?h.icon:l.A;return t.createElement(a.uk,{text:"Settings",to:d(),icon:r})}},36521:(K,y,e)=>{e.d(y,{s:()=>c});var t=e(18139),l=e(94223),u=e(34477),a=e(14041),A=e(73466);const c=()=>{var g;const h=(0,t.gf)(l.K),d=(0,t.gf)(u.k),{value:r,loading:s,error:m}=(0,A.A)(async()=>({profile:await h.getProfileInfo(),identity:await h.getBackstageIdentity()}),[]);return(0,a.useEffect)(()=>{m&&d.post({message:`Failed to load user identity: ${m}`,severity:"error"})},[m,d]),s||m?{profile:{},displayName:"",loading:s}:{profile:r.profile,backstageIdentity:r.identity,displayName:(g=r.profile.displayName)!=null?g:r.identity.userEntityRef,loading:s}}},74268:(K,y,e)=>{e.d(y,{kQ:()=>a,mu:()=>c});var t=e(77555),l=e(50809),u=e(18050);const a=(0,t.H)({id:"user-settings"}),c=(0,l.i)({id:"user-settings",routes:{settingsPage:a}}).provide((0,u.QJ)({name:"UserSettingsPage",component:()=>e.e(9914).then(e.bind(e,37533)).then(h=>h.SettingsPage),mountPoint:a}))},97388:(K,y,e)=>{e.d(y,{Bl:()=>c,Q6:()=>A,qO:()=>d,tK:()=>h});var t=e(14041);function l(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const u=l(),a=s=>`__@backstage/${s}__`;function A(s,m){const g=a(s);let p=u[g];return p||(p=m(),u[g]=p,p)}function c(s){Object.freeze(s);const m={atVersion(g){return s[g]}};return Object.defineProperty(m,"$map",{configurable:!0,enumerable:!0,get(){return s}}),m}function h(s){return A(s,()=>(0,t.createContext)(void 0))}function d(s){return(0,t.useContext)(h(s))}function r(s){return{set(m){globalThis[`__@backstage/${s}__`]=createContext(c(m))},reset(){delete globalThis[`__@backstage/${s}__`]}}}}}]);})();

//# sourceMappingURL=module-backstage.7f51d447.js.map