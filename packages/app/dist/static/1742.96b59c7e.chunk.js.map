{"version":3,"file":"static/1742.96b59c7e.chunk.js","mappings":"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","sources":["webpack://app/../../node_modules/@backstage/core-components/dist/components/LogViewer/LogViewer.esm.js","webpack://app/../../node_modules/@backstage/core-components/dist/layout/ItemCard/ItemCardGrid.esm.js","webpack://app/../../node_modules/@backstage/core-components/dist/layout/ItemCard/ItemCardHeader.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/components/EntityKindPicker/kindFilterUtils.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/components/EntityKindPicker/EntityKindPicker.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/components/EntitySearchBar/EntitySearchBar.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/hooks/useEntityTypeFilter.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/hooks/useCustomFieldExtensions.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/layouts/keys.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/hooks/useCustomLayouts.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/ScaffolderField/ScaffolderField.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/SecretWidget/SecretWidget.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/fields/SecretInput/SecretInput.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/extensions/default.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/ScaffolderPageContextMenu/ScaffolderPageContextMenu.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/ActionsPage/ActionsPage.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/ListTasksPage/OwnerListPicker.esm.js","webpack://app/../../node_modules/luxon/src/errors.js","webpack://app/../../node_modules/luxon/src/impl/formats.js","webpack://app/../../node_modules/luxon/src/zone.js","webpack://app/../../node_modules/luxon/src/zones/systemZone.js","webpack://app/../../node_modules/luxon/src/zones/IANAZone.js","webpack://app/../../node_modules/luxon/src/impl/locale.js","webpack://app/../../node_modules/luxon/src/zones/fixedOffsetZone.js","webpack://app/../../node_modules/luxon/src/zones/invalidZone.js","webpack://app/../../node_modules/luxon/src/impl/zoneUtil.js","webpack://app/../../node_modules/luxon/src/settings.js","webpack://app/../../node_modules/luxon/src/impl/invalid.js","webpack://app/../../node_modules/luxon/src/impl/conversions.js","webpack://app/../../node_modules/luxon/src/impl/util.js","webpack://app/../../node_modules/luxon/src/impl/english.js","webpack://app/../../node_modules/luxon/src/impl/formatter.js","webpack://app/../../node_modules/luxon/src/impl/regexParser.js","webpack://app/../../node_modules/luxon/src/duration.js","webpack://app/../../node_modules/luxon/src/interval.js","webpack://app/../../node_modules/luxon/src/info.js","webpack://app/../../node_modules/luxon/src/impl/diff.js","webpack://app/../../node_modules/luxon/src/impl/digits.js","webpack://app/../../node_modules/luxon/src/impl/tokenParser.js","webpack://app/../../node_modules/luxon/src/datetime.js","webpack://app/../../node_modules/luxon/src/luxon.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/ListTasksPage/columns/CreatedAtColumn.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/ListTasksPage/columns/OwnerEntityColumn.esm.js","webpack://app/../../node_modules/@backstage/core-components/dist/components/Status/icons/PendingIcon.esm.js","webpack://app/../../node_modules/@backstage/core-components/dist/components/Status/Status.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/ListTasksPage/columns/TaskStatusColumn.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/ListTasksPage/columns/TemplateTitleColumn.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/ListTasksPage/ListTasksPage.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TemplateCategoryPicker/TemplateCategoryPicker.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TemplateCard/CardHeader.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TemplateCard/CardLink.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TemplateCard/TemplateCard.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TemplateGroup/TemplateGroup.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TemplateGroups/TemplateGroups.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateListPage/RegisterExistingButton.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateListPage/TemplateListPage.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/hooks/useTemplateParameterSchema.esm.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/config/strings.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/getTypeOf.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/render.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/__.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/createCustomError.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/flattenArray.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/config/settings.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/schema/createOneOfSchemaResult.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/types.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/filter.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/features/oneOf.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/merge.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/mergeSchema.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/omit.js","webpack://app/../../node_modules/fast-copy/dist/esm/index.mjs","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/copy.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/features/if.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/features/allOf.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/uniqueItems.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/isObject.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/features/dependencies.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/features/anyOf.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/resolveDynamicSchema.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/reduceSchema.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/draft/index.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/addRemoteSchema.js","webpack://app/../../node_modules/@sagold/json-query/dist/module/lib/parser/jsonQueryGrammar.js","webpack://app/../../node_modules/@sagold/json-query/dist/module/lib/parser/index.js","webpack://app/../../node_modules/@sagold/json-query/dist/module/lib/interpreter/keys.js","webpack://app/../../node_modules/@sagold/json-query/dist/module/lib/interpreter/nodes.js","webpack://app/../../node_modules/@sagold/json-query/dist/module/lib/interpreter/index.js","webpack://app/../../node_modules/@sagold/json-query/dist/module/lib/get.js","webpack://app/../../node_modules/@sagold/json-query/dist/module/lib/split.js","webpack://app/../../node_modules/@sagold/json-query/dist/module/lib/set.js","webpack://app/../../node_modules/@sagold/json-query/dist/module/lib/remove.js","webpack://app/../../node_modules/@sagold/json-query/dist/module/index.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/schema/types.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/schema/getTypeId.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/schema/getTypeDefs.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/eachSchema.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/compile/joinScope.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/compile/splitRef.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/compile/getRef.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/compile/index.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/compileSchema.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/each.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/validation/errors.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/validation/format.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/getSchema.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/isEmpty.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/getTemplate.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/isValid.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/punycode.ucs2decode.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/utils/getPrecision.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/validation/keyword.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/resolveRef.strict.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/createSchemaOf.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/step.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/getChildSchemaSelection.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/validation/type.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/validate.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/draft04/index.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/draft06/compile/index.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/draft06/validation/keyword.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/draft06/validation/type.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/draft06/index.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/draft07/index.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/resolveRef.merge.js","webpack://app/../../node_modules/json-schema-library/dist/module/lib/jsoneditor/index.js","webpack://app/../../node_modules/json-schema-library/dist/module/index.js","webpack://app/../../node_modules/flatted/esm/index.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/lib/schema.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/Stepper/utils.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/Stepper/createAsyncValidators.esm.js","webpack://app/../../node_modules/@backstage/core-components/dist/components/StructuredMetadataTable/MetadataTable.esm.js","webpack://app/../../node_modules/@backstage/core-components/dist/components/StructuredMetadataTable/StructuredMetadataTable.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/ReviewState/ReviewState.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/hooks/useFormDataFromQuery.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/hooks/useTemplateSchema.esm.js","webpack://app/../../node_modules/@rjsf/utils/lib/isObject.js","webpack://app/../../node_modules/@rjsf/utils/lib/allowAdditionalItems.js","webpack://app/../../node_modules/@rjsf/utils/lib/asNumber.js","webpack://app/../../node_modules/@rjsf/utils/lib/constants.js","webpack://app/../../node_modules/@rjsf/utils/lib/getUiOptions.js","webpack://app/../../node_modules/@rjsf/utils/lib/canExpand.js","webpack://app/../../node_modules/@rjsf/utils/lib/createErrorHandler.js","webpack://app/../../node_modules/@rjsf/utils/lib/deepEquals.js","webpack://app/../../node_modules/@rjsf/utils/lib/findSchemaDefinition.js","webpack://app/../../node_modules/@rjsf/utils/lib/getOptionMatchingSimpleDiscriminator.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/getMatchingOption.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/getFirstMatchingOption.js","webpack://app/../../node_modules/@rjsf/utils/lib/getDiscriminatorFieldFromSchema.js","webpack://app/../../node_modules/@rjsf/utils/lib/guessType.js","webpack://app/../../node_modules/@rjsf/utils/lib/getSchemaType.js","webpack://app/../../node_modules/@rjsf/utils/lib/mergeSchemas.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/retrieveSchema.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/getClosestMatchingOption.js","webpack://app/../../node_modules/@rjsf/utils/lib/isFixedItems.js","webpack://app/../../node_modules/@rjsf/utils/lib/mergeDefaultsWithFormData.js","webpack://app/../../node_modules/@rjsf/utils/lib/mergeObjects.js","webpack://app/../../node_modules/@rjsf/utils/lib/isConstant.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/isSelect.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/isMultiSelect.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/getDefaultFormState.js","webpack://app/../../node_modules/@rjsf/utils/lib/isCustomWidget.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/isFilesArray.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/getDisplayLabel.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/mergeValidationData.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/sanitizeDataForNewSchema.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/toIdSchema.js","webpack://app/../../node_modules/@rjsf/utils/lib/schema/toPathSchema.js","webpack://app/../../node_modules/@rjsf/utils/lib/createSchemaUtils.js","webpack://app/../../node_modules/@rjsf/utils/lib/dataURItoBlob.js","webpack://app/../../node_modules/@rjsf/utils/lib/replaceStringParameters.js","webpack://app/../../node_modules/@rjsf/utils/lib/englishStringTranslator.js","webpack://app/../../node_modules/@rjsf/utils/lib/enumOptionsValueForIndex.js","webpack://app/../../node_modules/@rjsf/utils/lib/enumOptionsDeselectValue.js","webpack://app/../../node_modules/@rjsf/utils/lib/enumOptionsIsSelected.js","webpack://app/../../node_modules/@rjsf/utils/lib/enumOptionsIndexForValue.js","webpack://app/../../node_modules/@rjsf/utils/lib/enumOptionsSelectValue.js","webpack://app/../../node_modules/@rjsf/utils/lib/ErrorSchemaBuilder.js","webpack://app/../../node_modules/@rjsf/utils/lib/getDateElementProps.js","webpack://app/../../node_modules/@rjsf/utils/lib/rangeSpec.js","webpack://app/../../node_modules/@rjsf/utils/lib/getInputProps.js","webpack://app/../../node_modules/@rjsf/utils/lib/getSubmitButtonOptions.js","webpack://app/../../node_modules/@rjsf/utils/lib/getTemplate.js","webpack://app/../../node_modules/@rjsf/utils/lib/getWidget.js","webpack://app/../../node_modules/@rjsf/utils/lib/hashForSchema.js","webpack://app/../../node_modules/@rjsf/utils/lib/hasWidget.js","webpack://app/../../node_modules/@rjsf/utils/lib/idGenerators.js","webpack://app/../../node_modules/@rjsf/utils/lib/labelValue.js","webpack://app/../../node_modules/@rjsf/utils/lib/localToUTC.js","webpack://app/../../node_modules/@rjsf/utils/lib/toConstant.js","webpack://app/../../node_modules/@rjsf/utils/lib/optionsList.js","webpack://app/../../node_modules/@rjsf/utils/lib/orderProperties.js","webpack://app/../../node_modules/@rjsf/utils/lib/pad.js","webpack://app/../../node_modules/@rjsf/utils/lib/parseDateString.js","webpack://app/../../node_modules/@rjsf/utils/lib/schemaRequiresTrueValue.js","webpack://app/../../node_modules/@rjsf/utils/lib/shouldRender.js","webpack://app/../../node_modules/@rjsf/utils/lib/toDateString.js","webpack://app/../../node_modules/@rjsf/utils/lib/toErrorList.js","webpack://app/../../node_modules/@rjsf/utils/lib/toErrorSchema.js","webpack://app/../../node_modules/@rjsf/utils/lib/unwrapErrorHandler.js","webpack://app/../../node_modules/@rjsf/utils/lib/utcToLocal.js","webpack://app/../../node_modules/@rjsf/utils/lib/validationDataMerge.js","webpack://app/../../node_modules/@rjsf/utils/lib/withIdRefPrefix.js","webpack://app/../../node_modules/@rjsf/utils/lib/enums.js","webpack://app/../../node_modules/@rjsf/utils/lib/parser/ParserValidator.js","webpack://app/../../node_modules/@rjsf/utils/lib/parser/schemaParser.js","webpack://app/../../node_modules/@rjsf/validator-ajv8/lib/createAjvInstance.js","webpack://app/../../node_modules/@rjsf/validator-ajv8/lib/processRawValidationErrors.js","webpack://app/../../node_modules/@rjsf/validator-ajv8/lib/validator.js","webpack://app/../../node_modules/@rjsf/validator-ajv8/lib/customizeValidator.js","webpack://app/../../node_modules/@rjsf/validator-ajv8/lib/precompiledValidator.js","webpack://app/../../node_modules/@rjsf/validator-ajv8/lib/createPrecompiledValidator.js","webpack://app/../../node_modules/@rjsf/validator-ajv8/lib/index.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/hooks/useTransformSchemaToProps.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/Stepper/FieldOverrides/DescriptionField.esm.js","webpack://app/../../node_modules/nanoid/index.browser.js","webpack://app/../../node_modules/@rjsf/core/lib/components/fields/ArrayField.js","webpack://app/../../node_modules/@rjsf/core/lib/components/fields/BooleanField.js","webpack://app/../../node_modules/@rjsf/core/lib/components/fields/MultiSchemaField.js","webpack://app/../../node_modules/@rjsf/core/lib/components/fields/NumberField.js","webpack://app/../../node_modules/markdown-to-jsx/dist/index.modern.js","webpack://app/../../node_modules/@rjsf/core/lib/components/fields/ObjectField.js","webpack://app/../../node_modules/@rjsf/core/lib/components/fields/SchemaField.js","webpack://app/../../node_modules/@rjsf/core/lib/components/fields/StringField.js","webpack://app/../../node_modules/@rjsf/core/lib/components/fields/NullField.js","webpack://app/../../node_modules/@rjsf/core/lib/components/fields/index.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/ArrayFieldDescriptionTemplate.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/ArrayFieldItemTemplate.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/ArrayFieldTemplate.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/ArrayFieldTitleTemplate.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/BaseInputTemplate.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/ButtonTemplates/SubmitButton.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/ButtonTemplates/IconButton.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/ButtonTemplates/AddButton.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/ButtonTemplates/index.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/DescriptionField.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/ErrorList.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/FieldTemplate/Label.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/FieldTemplate/FieldTemplate.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/FieldTemplate/index.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/FieldErrorTemplate.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/FieldHelpTemplate.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/ObjectFieldTemplate.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/TitleField.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/UnsupportedField.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/WrapIfAdditionalTemplate.js","webpack://app/../../node_modules/@rjsf/core/lib/components/templates/index.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/AltDateWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/AltDateTimeWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/CheckboxWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/CheckboxesWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/ColorWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/DateWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/DateTimeWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/EmailWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/FileWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/HiddenWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/PasswordWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/RadioWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/RangeWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/SelectWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/TextareaWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/TextWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/TimeWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/URLWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/UpDownWidget.js","webpack://app/../../node_modules/@rjsf/core/lib/components/widgets/index.js","webpack://app/../../node_modules/@rjsf/core/lib/getDefaultRegistry.js","webpack://app/../../node_modules/@rjsf/core/lib/components/Form.js","webpack://app/../../node_modules/@rjsf/core/lib/withTheme.js","webpack://app/../../node_modules/@rjsf/core/lib/index.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/Form/FieldTemplate.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/Form/DescriptionFieldTemplate.esm.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/AddButton/AddButton.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/ArrayFieldItemTemplate/ArrayFieldItemTemplate.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/ArrayFieldTemplate/ArrayFieldTemplate.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/BaseInputTemplate/BaseInputTemplate.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/DescriptionField/DescriptionField.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/ErrorList/ErrorList.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/IconButton/IconButton.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/FieldErrorTemplate/FieldErrorTemplate.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/FieldHelpTemplate/FieldHelpTemplate.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/FieldTemplate/FieldTemplate.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/ObjectFieldTemplate/ObjectFieldTemplate.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/SubmitButton/SubmitButton.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/TitleField/TitleField.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/WrapIfAdditionalTemplate/WrapIfAdditionalTemplate.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/Templates/Templates.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/CheckboxWidget/CheckboxWidget.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/CheckboxesWidget/CheckboxesWidget.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/RadioWidget/RadioWidget.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/RangeWidget/RangeWidget.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/SelectWidget/SelectWidget.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/TextareaWidget/TextareaWidget.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/Widgets/Widgets.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/Theme/Theme.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/MuiForm/MuiForm.js","webpack://app/../../node_modules/@rjsf/material-ui/lib/index.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/Form/Form.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/Stepper/ErrorListTemplate/errorListTemplate.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/PasswordWidget/PasswordWidget.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/Stepper/Stepper.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/hooks/useFilteredSchemaProperties.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/hooks/useTemplateTimeSaved.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/Workflow/Workflow.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateWizardPage/TemplateWizardPageContextMenu.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateWizardPage/TemplateWizardPage.esm.js","webpack://app/../../node_modules/immer/dist/immer.esm.mjs","webpack://app/../../node_modules/use-immer/dist/use-immer.module.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/hooks/useEventStream.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/OngoingTask/ContextMenu.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TemplateOutputs/LinkOutputs.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TemplateOutputs/TextOutputs.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TemplateOutputs/DefaultTemplateOutputs.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TaskSteps/StepIcon.esm.js","webpack://app/../../node_modules/react-use/esm/useInterval.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TaskSteps/StepTime.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TaskSteps/TaskBorder.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TaskSteps/TaskSteps.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/next/components/TaskLogStream/TaskLogStream.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/OngoingTask/OngoingTask.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/lib/filesystem/WebFileSystemAccess.esm.js","webpack://app/../../node_modules/@lezer/common/dist/index.js","webpack://app/../../node_modules/@codemirror/state/dist/index.js","webpack://app/../../node_modules/style-mod/src/style-mod.js","webpack://app/../../node_modules/w3c-keyname/index.js","webpack://app/../../node_modules/@codemirror/view/dist/index.js","webpack://app/../../node_modules/@lezer/highlight/dist/index.js","webpack://app/../../node_modules/@codemirror/language/dist/index.js","webpack://app/../../node_modules/@codemirror/legacy-modes/mode/yaml.js","webpack://app/../../node_modules/@codemirror/commands/dist/index.js","webpack://app/../../node_modules/crelt/index.js","webpack://app/../../node_modules/@codemirror/search/dist/index.js","webpack://app/../../node_modules/@codemirror/autocomplete/dist/index.js","webpack://app/../../node_modules/@codemirror/lint/dist/index.js","webpack://app/../../node_modules/@uiw/codemirror-extensions-basic-setup/esm/index.js","webpack://app/../../node_modules/@codemirror/theme-one-dark/dist/index.js","webpack://app/../../node_modules/@uiw/react-codemirror/esm/theme/light.js","webpack://app/../../node_modules/@uiw/react-codemirror/esm/getDefaultExtensions.js","webpack://app/../../node_modules/@uiw/react-codemirror/esm/utils.js","webpack://app/../../node_modules/@uiw/react-codemirror/esm/useCodeMirror.js","webpack://app/../../node_modules/@uiw/react-codemirror/esm/index.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/DryRunContext.esm.js","webpack://app/../../node_modules/@react-hookz/web/src/useRerender/index.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/DirectoryEditorContext.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/TemplateEditorForm.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/CustomFieldExplorer.esm.js","webpack://app/../../node_modules/@material-ui/lab/esm/TreeView/TreeViewContext.js","webpack://app/../../node_modules/@material-ui/lab/esm/TreeView/TreeView.js","webpack://app/../../node_modules/@material-ui/lab/esm/TreeItem/TreeItem.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/FileBrowser/FileBrowser.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/TemplateEditorBrowser.esm.js","webpack://app/../../node_modules/@react-hookz/web/src/useIsMounted/index.js","webpack://app/../../node_modules/@react-hookz/web/src/useEventListener/index.js","webpack://app/../../node_modules/@react-hookz/web/src/useKeyboardEvent/index.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/TemplateEditorTextArea.esm.js","webpack://app/../../node_modules/@react-hookz/web/src/usePrevious/index.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/lib/download/helpers.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/DryRunResults/DryRunResultsList.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/DryRunResults/DryRunResultsSplitView.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/DryRunResults/IconLink.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/DryRunResults/TaskPageLinks.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/DryRunResults/TaskStatusStepper.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/DryRunResults/DryRunResultsView.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/DryRunResults/DryRunResults.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/TemplateEditor.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/TemplateFormPreviewer.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/TemplateEditorIntro.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/next/TemplateEditorPage/TemplateEditorPage.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/components/Router/Router.esm.js","webpack://app/../../node_modules/@material-ui/icons/ArrowDownward.js","webpack://app/../../node_modules/@material-ui/icons/CheckCircleOutline.js","webpack://app/../../node_modules/@material-ui/icons/ControlPoint.js","webpack://app/../../node_modules/@material-ui/icons/Delete.js","webpack://app/../../node_modules/@material-ui/icons/Error.js","webpack://app/../../node_modules/@material-ui/icons/ExpandLess.js","webpack://app/../../node_modules/@material-ui/icons/FiberManualRecord.js","webpack://app/../../node_modules/@material-ui/icons/GetApp.js","webpack://app/../../node_modules/@material-ui/icons/InfoOutlined.js","webpack://app/../../node_modules/@material-ui/icons/List.js","webpack://app/../../node_modules/@material-ui/icons/PanoramaFishEye.js","webpack://app/../../node_modules/@material-ui/icons/Refresh.js","webpack://app/../../node_modules/@material-ui/icons/RemoveCircleOutline.js","webpack://app/../../node_modules/@material-ui/icons/Repeat.js","webpack://app/../../node_modules/@material-ui/icons/Save.js","webpack://app/../../node_modules/@material-ui/icons/Toc.js","webpack://app/../../node_modules/@sagold/json-pointer/dist/jsonPointer.js","webpack://app/../../node_modules/ajv-formats/dist/formats.js","webpack://app/../../node_modules/ajv-formats/dist/index.js","webpack://app/../../node_modules/ajv-formats/dist/limit.js","webpack://app/../../node_modules/compute-gcd/lib/index.js","webpack://app/../../node_modules/compute-lcm/lib/index.js","webpack://app/../../node_modules/ebnf/dist/Grammars/W3CEBNF.js","webpack://app/../../node_modules/ebnf/dist/Parser.js","webpack://app/../../node_modules/ebnf/dist/TokenError.js","webpack://app/../../node_modules/humanize-duration/humanize-duration.js","webpack://app/../../node_modules/json-schema-compare/src/index.js","webpack://app/../../node_modules/json-schema-merge-allof/src/common.js","webpack://app/../../node_modules/json-schema-merge-allof/src/complex-resolvers/items.js","webpack://app/../../node_modules/json-schema-merge-allof/src/complex-resolvers/properties.js","webpack://app/../../node_modules/json-schema-merge-allof/src/index.js","webpack://app/../../node_modules/jsonpointer/jsonpointer.js","webpack://app/../../node_modules/lodash/_baseDifference.js","webpack://app/../../node_modules/lodash/_baseIndexOfWith.js","webpack://app/../../node_modules/lodash/_baseIntersection.js","webpack://app/../../node_modules/lodash/_basePullAll.js","webpack://app/../../node_modules/lodash/_castArrayLikeObject.js","webpack://app/../../node_modules/lodash/_customDefaultsMerge.js","webpack://app/../../node_modules/lodash/defaultsDeep.js","webpack://app/../../node_modules/lodash/flattenDeep.js","webpack://app/../../node_modules/lodash/intersection.js","webpack://app/../../node_modules/lodash/intersectionWith.js","webpack://app/../../node_modules/lodash/isEqualWith.js","webpack://app/../../node_modules/lodash/isNil.js","webpack://app/../../node_modules/lodash/mergeWith.js","webpack://app/../../node_modules/lodash/pullAll.js","webpack://app/../../node_modules/lodash/set.js","webpack://app/../../node_modules/lodash/startCase.js","webpack://app/../../node_modules/lodash/times.js","webpack://app/../../node_modules/lodash/uniq.js","webpack://app/../../node_modules/lodash/uniqWith.js","webpack://app/../../node_modules/lodash/unset.js","webpack://app/../../node_modules/lodash/without.js","webpack://app/../../node_modules/nearley/lib/nearley.js","webpack://app/../../node_modules/react-draggable/build/cjs/Draggable.js","webpack://app/../../node_modules/react-draggable/build/cjs/DraggableCore.js","webpack://app/../../node_modules/react-draggable/build/cjs/cjs.js","webpack://app/../../node_modules/react-draggable/build/cjs/utils/domFns.js","webpack://app/../../node_modules/react-draggable/build/cjs/utils/getPrefix.js","webpack://app/../../node_modules/react-draggable/build/cjs/utils/log.js","webpack://app/../../node_modules/react-draggable/build/cjs/utils/positionFns.js","webpack://app/../../node_modules/react-draggable/build/cjs/utils/shims.js","webpack://app/../../node_modules/react-resizable/build/Resizable.js","webpack://app/../../node_modules/react-resizable/build/ResizableBox.js","webpack://app/../../node_modules/react-resizable/build/propTypes.js","webpack://app/../../node_modules/react-resizable/build/utils.js","webpack://app/../../node_modules/react-resizable/index.js","webpack://app/../../node_modules/react-use/lib/useDebounce.js","webpack://app/../../node_modules/react-use/lib/useTimeoutFn.js","webpack://app/../../node_modules/smtp-address-parser/dist/lib/grammar.js","webpack://app/../../node_modules/smtp-address-parser/dist/lib/index.js","webpack://app/../../node_modules/valid-url/index.js","webpack://app/../../node_modules/validate.io-array/lib/index.js","webpack://app/../../node_modules/validate.io-function/lib/index.js","webpack://app/../../node_modules/validate.io-integer-array/lib/index.js","webpack://app/../../node_modules/validate.io-integer/lib/index.js","webpack://app/../../node_modules/validate.io-number/lib/index.js","webpack://app/../../node_modules/@react-hookz/web/src/useAsync/index.js"],"sourcesContent":["import React__default, { lazy, Suspense } from 'react';\nimport { useApp } from '@backstage/core-plugin-api';\n\nconst RealLogViewer = lazy(\n  () => import('./RealLogViewer.esm.js').then((m) => ({ default: m.RealLogViewer }))\n);\nfunction LogViewer(props) {\n  const { Progress } = useApp().getComponents();\n  return /* @__PURE__ */ React__default.createElement(Suspense, { fallback: /* @__PURE__ */ React__default.createElement(Progress, null) }, /* @__PURE__ */ React__default.createElement(RealLogViewer, { ...props }));\n}\n\nexport { LogViewer };\n//# sourceMappingURL=LogViewer.esm.js.map\n","import Box from '@material-ui/core/Box';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport React__default from 'react';\n\nconst styles = (theme) => createStyles({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(22em, 1fr))\",\n    gridAutoRows: \"1fr\",\n    gridGap: theme.spacing(2)\n  }\n});\nconst useStyles = makeStyles(styles, { name: \"BackstageItemCardGrid\" });\nfunction ItemCardGrid(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(Box, { className: classes.root, ...otherProps }, children);\n}\n\nexport { ItemCardGrid };\n//# sourceMappingURL=ItemCardGrid.esm.js.map\n","import Box from '@material-ui/core/Box';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React__default from 'react';\n\nconst styles = (theme) => createStyles({\n  root: {\n    color: theme.palette.common.white,\n    padding: theme.spacing(2, 2, 3),\n    backgroundImage: theme.getPageTheme({ themeId: \"card\" }).backgroundImage,\n    backgroundPosition: 0,\n    backgroundSize: \"inherit\"\n  }\n});\nconst useStyles = makeStyles(styles, { name: \"BackstageItemCardHeader\" });\nfunction ItemCardHeader(props) {\n  const { title, subtitle, children } = props;\n  const classes = useStyles(props);\n  return /* @__PURE__ */ React__default.createElement(Box, { className: classes.root }, subtitle && /* @__PURE__ */ React__default.createElement(Typography, { variant: \"subtitle2\", component: \"h3\" }, subtitle), title && /* @__PURE__ */ React__default.createElement(Typography, { variant: \"h6\", component: \"h4\" }, title), children);\n}\n\nexport { ItemCardHeader };\n//# sourceMappingURL=ItemCardHeader.esm.js.map\n","import { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/esm/useAsync';\nimport { catalogApiRef } from '../../api.esm.js';\n\nfunction useAllKinds() {\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    error,\n    loading,\n    value: allKinds\n  } = useAsync(async () => {\n    const items = await catalogApi.getEntityFacets({ facets: [\"kind\"] }).then((response) => response.facets.kind?.map((f) => f.value).sort() || []);\n    return items;\n  }, [catalogApi]);\n  return { loading, error, allKinds: allKinds ?? [] };\n}\nfunction filterKinds(allKinds, allowedKinds, forcedKinds) {\n  let availableKinds = allKinds;\n  if (allowedKinds) {\n    availableKinds = availableKinds.filter(\n      (k) => allowedKinds.some(\n        (a) => a.toLocaleLowerCase(\"en-US\") === k.toLocaleLowerCase(\"en-US\")\n      )\n    );\n  }\n  if (forcedKinds && !allKinds.some(\n    (a) => a.toLocaleLowerCase(\"en-US\") === forcedKinds.toLocaleLowerCase(\"en-US\")\n  )) {\n    availableKinds = availableKinds.concat([forcedKinds]);\n  }\n  const kindsMap = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase(\"en-US\")] = kind;\n    return acc;\n  }, {});\n  return kindsMap;\n}\n\nexport { filterKinds, useAllKinds };\n//# sourceMappingURL=kindFilterUtils.esm.js.map\n","import { Select } from '@backstage/core-components';\nimport { useApi, alertApiRef } from '@backstage/core-plugin-api';\nimport Box from '@material-ui/core/Box';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { EntityKindFilter } from '../../filters.esm.js';\nimport '../../hooks/useEntity.esm.js';\nimport { useEntityList } from '../../hooks/useEntityListProvider.esm.js';\nimport 'react-use/esm/useAsync';\nimport 'lodash/isEqual';\nimport 'lodash/sortBy';\nimport '../../api.esm.js';\nimport '@backstage/catalog-model';\nimport 'react-use/esm/useObservable';\nimport '../../apis/EntityPresentationApi/EntityPresentationApi.esm.js';\nimport 'lodash/get';\nimport '../../apis/StarredEntitiesApi/StarredEntitiesApi.esm.js';\nimport 'zen-observable';\nimport { filterKinds, useAllKinds } from './kindFilterUtils.esm.js';\nimport { catalogReactTranslationRef } from '../../translation.esm.js';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nfunction useEntityKindFilter(opts) {\n  const {\n    filters,\n    queryParameters: { kind: kindParameter },\n    updateFilters\n  } = useEntityList();\n  const queryParamKind = useMemo(\n    () => [kindParameter].flat()[0],\n    [kindParameter]\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    queryParamKind ?? filters.kind?.value ?? opts.initialFilter\n  );\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n  useEffect(() => {\n    if (filters.kind?.value) {\n      setSelectedKind(filters.kind?.value);\n    }\n  }, [filters.kind]);\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  const { allKinds, loading, error } = useAllKinds();\n  return {\n    loading,\n    error,\n    allKinds: allKinds ?? [],\n    selectedKind,\n    setSelectedKind\n  };\n}\nconst EntityKindPicker = (props) => {\n  const { allowedKinds, hidden, initialFilter = \"component\" } = props;\n  const { t } = useTranslationRef(catalogReactTranslationRef);\n  const alertApi = useApi(alertApiRef);\n  const { error, allKinds, selectedKind, setSelectedKind } = useEntityKindFilter({\n    initialFilter\n  });\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: t(\"entityKindPicker.errorMessage\"),\n        severity: \"error\"\n      });\n    }\n  }, [error, alertApi, t]);\n  if (error) return null;\n  const options = filterKinds(allKinds, allowedKinds, selectedKind);\n  const items = Object.keys(options).map((key) => ({\n    value: key,\n    label: options[key]\n  }));\n  return hidden ? null : /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      label: t(\"entityKindPicker.title\"),\n      items,\n      selected: selectedKind.toLocaleLowerCase(\"en-US\"),\n      onChange: (value) => setSelectedKind(String(value))\n    }\n  ));\n};\n\nexport { EntityKindPicker };\n//# sourceMappingURL=EntityKindPicker.esm.js.map\n","import FormControl from '@material-ui/core/FormControl';\nimport IconButton from '@material-ui/core/IconButton';\nimport Input from '@material-ui/core/Input';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Clear from '@material-ui/icons/Clear';\nimport Search from '@material-ui/icons/Search';\nimport React, { useMemo, useState, useEffect } from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { useEntityList } from '../../hooks/useEntityListProvider.esm.js';\nimport { EntityTextFilter } from '../../filters.esm.js';\nimport { catalogReactTranslationRef } from '../../translation.esm.js';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nconst useStyles = makeStyles(\n  (_theme) => ({\n    searchToolbar: {\n      paddingLeft: 0,\n      paddingRight: 0\n    },\n    input: {}\n  }),\n  {\n    name: \"CatalogReactEntitySearchBar\"\n  }\n);\nconst EntitySearchBar = () => {\n  const classes = useStyles();\n  const { t } = useTranslationRef(catalogReactTranslationRef);\n  const {\n    updateFilters,\n    queryParameters: { text: textParameter }\n  } = useEntityList();\n  const queryParamTextFilter = useMemo(\n    () => [textParameter].flat()[0],\n    [textParameter]\n  );\n  const [search, setSearch] = useState(queryParamTextFilter ?? \"\");\n  useDebounce(\n    () => {\n      updateFilters({\n        text: search.length ? new EntityTextFilter(search) : void 0\n      });\n    },\n    250,\n    [search, updateFilters]\n  );\n  useEffect(() => {\n    if (queryParamTextFilter) {\n      setSearch(queryParamTextFilter);\n    }\n  }, [queryParamTextFilter]);\n  return /* @__PURE__ */ React.createElement(Toolbar, { className: classes.searchToolbar }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      \"aria-label\": \"search\",\n      id: \"input-with-icon-adornment\",\n      className: classes.input,\n      placeholder: t(\"entitySearchBar.placeholder\"),\n      autoComplete: \"off\",\n      onChange: (event) => setSearch(event.target.value),\n      value: search,\n      startAdornment: /* @__PURE__ */ React.createElement(InputAdornment, { position: \"start\" }, /* @__PURE__ */ React.createElement(Search, null)),\n      endAdornment: /* @__PURE__ */ React.createElement(InputAdornment, { position: \"end\" }, /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          \"aria-label\": \"clear search\",\n          onClick: () => setSearch(\"\"),\n          edge: \"end\",\n          disabled: search.length === 0\n        },\n        /* @__PURE__ */ React.createElement(Clear, null)\n      ))\n    }\n  )));\n};\n\nexport { EntitySearchBar };\n//# sourceMappingURL=EntitySearchBar.esm.js.map\n","import { useMemo, useState, useEffect, useRef } from 'react';\nimport useAsync from 'react-use/esm/useAsync';\nimport isEqual from 'lodash/isEqual';\nimport sortBy from 'lodash/sortBy';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { catalogApiRef } from '../api.esm.js';\nimport { useEntityList } from './useEntityListProvider.esm.js';\nimport { EntityTypeFilter } from '../filters.esm.js';\n\nfunction useEntityTypeFilter() {\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    filters: { kind: kindFilter, type: typeFilter },\n    queryParameters: { type: typeParameter },\n    updateFilters\n  } = useEntityList();\n  const flattenedQueryTypes = useMemo(\n    () => [typeParameter].flat().filter(Boolean),\n    [typeParameter]\n  );\n  const [selectedTypes, setSelectedTypes] = useState(\n    flattenedQueryTypes.length ? flattenedQueryTypes : typeFilter?.getTypes() ?? []\n  );\n  useEffect(() => {\n    if (flattenedQueryTypes.length) {\n      setSelectedTypes(flattenedQueryTypes);\n    }\n  }, [flattenedQueryTypes]);\n  const [availableTypes, setAvailableTypes] = useState([]);\n  const kind = useMemo(() => kindFilter?.value, [kindFilter]);\n  const {\n    error,\n    loading,\n    value: facets\n  } = useAsync(async () => {\n    if (kind) {\n      const items = await catalogApi.getEntityFacets({\n        filter: { kind },\n        facets: [\"spec.type\"]\n      }).then((response) => response.facets[\"spec.type\"] || []);\n      return items;\n    }\n    return [];\n  }, [kind, catalogApi]);\n  const facetsRef = useRef(facets);\n  useEffect(() => {\n    const oldFacets = facetsRef.current;\n    facetsRef.current = facets;\n    if (loading || !kind || oldFacets === facets || !facets) {\n      return;\n    }\n    const newTypes = [\n      ...new Set(\n        sortBy(facets, (f) => -f.count).map(\n          (f) => f.value.toLocaleLowerCase(\"en-US\")\n        )\n      )\n    ];\n    setAvailableTypes(newTypes);\n    const stillValidTypes = selectedTypes.filter(\n      (value) => newTypes.includes(value)\n    );\n    if (!isEqual(selectedTypes, stillValidTypes)) {\n      setSelectedTypes(stillValidTypes);\n    }\n  }, [loading, kind, selectedTypes, setSelectedTypes, facets]);\n  useEffect(() => {\n    updateFilters({\n      type: selectedTypes.length ? new EntityTypeFilter(selectedTypes) : void 0\n    });\n  }, [selectedTypes, updateFilters]);\n  return {\n    loading,\n    error,\n    availableTypes,\n    selectedTypes,\n    setSelectedTypes\n  };\n}\n\nexport { useEntityTypeFilter };\n//# sourceMappingURL=useEntityTypeFilter.esm.js.map\n","import { useElementFilter } from '@backstage/core-plugin-api';\nimport { FIELD_EXTENSION_WRAPPER_KEY, FIELD_EXTENSION_KEY } from '../extensions/keys.esm.js';\n\nconst useCustomFieldExtensions = (outlet) => {\n  return useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: FIELD_EXTENSION_WRAPPER_KEY\n    }).findComponentData({\n      key: FIELD_EXTENSION_KEY\n    })\n  );\n};\n\nexport { useCustomFieldExtensions };\n//# sourceMappingURL=useCustomFieldExtensions.esm.js.map\n","const LAYOUTS_KEY = \"scaffolder.layout.v1\";\nconst LAYOUTS_WRAPPER_KEY = \"scaffolder.layouts.wrapper.v1\";\n\nexport { LAYOUTS_KEY, LAYOUTS_WRAPPER_KEY };\n//# sourceMappingURL=keys.esm.js.map\n","import { useElementFilter } from '@backstage/core-plugin-api';\nimport { LAYOUTS_WRAPPER_KEY, LAYOUTS_KEY } from '../layouts/keys.esm.js';\n\nconst useCustomLayouts = (outlet) => {\n  return useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUTS_WRAPPER_KEY\n    }).findComponentData({\n      key: LAYOUTS_KEY\n    })\n  );\n};\n\nexport { useCustomLayouts };\n//# sourceMappingURL=useCustomLayouts.esm.js.map\n","import React from 'react';\nimport { MarkdownContent } from '@backstage/core-components';\nimport FormControl from '@material-ui/core/FormControl';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  markdownDescription: {\n    fontSize: theme.typography.caption.fontSize,\n    margin: 0,\n    color: theme.palette.text.secondary,\n    \"& :first-child\": {\n      margin: 0,\n      marginTop: \"3px\"\n      // to keep the standard browser padding\n    }\n  }\n}));\nconst ScaffolderField = (props) => {\n  const {\n    children,\n    displayLabel = true,\n    rawErrors = [],\n    errors,\n    help,\n    rawDescription,\n    required,\n    disabled\n  } = props;\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      fullWidth: true,\n      error: rawErrors.length ? true : false,\n      required,\n      disabled\n    },\n    children,\n    displayLabel && rawDescription ? /* @__PURE__ */ React.createElement(\n      MarkdownContent,\n      {\n        content: rawDescription,\n        linkTarget: \"_blank\",\n        className: classes.markdownDescription\n      }\n    ) : null,\n    errors,\n    help\n  );\n};\n\nexport { ScaffolderField };\n//# sourceMappingURL=ScaffolderField.esm.js.map\n","import { useTemplateSecrets } from '@backstage/plugin-scaffolder-react';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport React from 'react';\n\nconst SecretWidget = (props) => {\n  const { setSecrets, secrets } = useTemplateSecrets();\n  const {\n    name,\n    onChange,\n    schema: { title }\n  } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: title }, title), /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      id: title,\n      \"aria-describedby\": title,\n      onChange: (e) => {\n        onChange(Array(e.target?.value.length).fill(\"*\").join(\"\"));\n        setSecrets({ [name]: e.target?.value });\n      },\n      value: secrets[name] ?? \"\",\n      type: \"password\",\n      autoComplete: \"off\"\n    }\n  ));\n};\n\nexport { SecretWidget };\n//# sourceMappingURL=SecretWidget.esm.js.map\n","import React from 'react';\nimport { ScaffolderField, SecretWidget } from '@backstage/plugin-scaffolder-react/alpha';\n\nconst SecretInput = (props) => {\n  const {\n    schema: { description },\n    rawErrors,\n    disabled,\n    errors,\n    required\n  } = props;\n  return /* @__PURE__ */ React.createElement(\n    ScaffolderField,\n    {\n      rawErrors,\n      rawDescription: description,\n      disabled,\n      errors,\n      required\n    },\n    /* @__PURE__ */ React.createElement(SecretWidget, { ...props })\n  );\n};\n\nexport { SecretInput };\n//# sourceMappingURL=SecretInput.esm.js.map\n","import { EntityPicker } from '../components/fields/EntityPicker/EntityPicker.esm.js';\nimport { EntityNamePicker } from '../components/fields/EntityNamePicker/EntityNamePicker.esm.js';\nimport { entityNamePickerValidation } from '../components/fields/EntityNamePicker/validation.esm.js';\nimport { EntityTagsPicker } from '../components/fields/EntityTagsPicker/EntityTagsPicker.esm.js';\nimport { OwnerPicker } from '../components/fields/OwnerPicker/OwnerPicker.esm.js';\nimport { RepoUrlPicker } from '../components/fields/RepoUrlPicker/RepoUrlPicker.esm.js';\nimport { repoPickerValidation } from '../components/fields/RepoUrlPicker/validation.esm.js';\nimport { OwnedEntityPicker } from '../components/fields/OwnedEntityPicker/OwnedEntityPicker.esm.js';\nimport { MyGroupsPicker } from '../components/fields/MyGroupsPicker/MyGroupsPicker.esm.js';\nimport { SecretInput } from '../components/fields/SecretInput/SecretInput.esm.js';\nimport { MultiEntityPicker, validateMultiEntityPickerValidation } from '../components/fields/MultiEntityPicker/MultiEntityPicker.esm.js';\nimport { EntityPickerSchema } from '../components/fields/EntityPicker/schema.esm.js';\nimport { EntityNamePickerSchema } from '../components/fields/EntityNamePicker/schema.esm.js';\nimport { EntityTagsPickerSchema } from '../components/fields/EntityTagsPicker/schema.esm.js';\nimport { RepoUrlPickerSchema } from '../components/fields/RepoUrlPicker/schema.esm.js';\nimport { OwnerPickerSchema } from '../components/fields/OwnerPicker/schema.esm.js';\nimport { OwnedEntityPickerSchema } from '../components/fields/OwnedEntityPicker/schema.esm.js';\nimport { MyGroupsPickerSchema } from '../components/fields/MyGroupsPicker/schema.esm.js';\nimport { MultiEntityPickerSchema } from '../components/fields/MultiEntityPicker/schema.esm.js';\n\nconst DEFAULT_SCAFFOLDER_FIELD_EXTENSIONS = [\n  {\n    component: EntityPicker,\n    name: \"EntityPicker\",\n    schema: EntityPickerSchema\n  },\n  {\n    component: EntityNamePicker,\n    name: \"EntityNamePicker\",\n    validation: entityNamePickerValidation,\n    schema: EntityNamePickerSchema\n  },\n  {\n    component: EntityTagsPicker,\n    name: \"EntityTagsPicker\",\n    schema: EntityTagsPickerSchema\n  },\n  {\n    component: RepoUrlPicker,\n    name: \"RepoUrlPicker\",\n    validation: repoPickerValidation,\n    schema: RepoUrlPickerSchema\n  },\n  {\n    component: OwnerPicker,\n    name: \"OwnerPicker\",\n    schema: OwnerPickerSchema\n  },\n  {\n    component: OwnedEntityPicker,\n    name: \"OwnedEntityPicker\",\n    schema: OwnedEntityPickerSchema\n  },\n  {\n    component: MyGroupsPicker,\n    name: \"MyGroupsPicker\",\n    schema: MyGroupsPickerSchema\n  },\n  {\n    component: SecretInput,\n    name: \"Secret\"\n  },\n  {\n    component: MultiEntityPicker,\n    name: \"MultiEntityPicker\",\n    schema: MultiEntityPickerSchema,\n    validation: validateMultiEntityPickerValidation\n  }\n];\n\nexport { DEFAULT_SCAFFOLDER_FIELD_EXTENSIONS };\n//# sourceMappingURL=default.esm.js.map\n","import IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Popover from '@material-ui/core/Popover';\nimport CreateComponentIcon from '@material-ui/icons/AddCircleOutline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport Edit from '@material-ui/icons/Edit';\nimport List from '@material-ui/icons/List';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport React, { useState } from 'react';\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    color: theme.page.fontColor\n  }\n}));\nfunction ScaffolderPageContextMenu(props) {\n  const { onEditorClicked, onActionsClicked, onTasksClicked, onCreateClicked } = props;\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState();\n  if (!onEditorClicked && !onActionsClicked) {\n    return null;\n  }\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const onClose = () => {\n    setAnchorEl(void 0);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      id: \"long-menu\",\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-expanded\": !!anchorEl,\n      \"aria-haspopup\": \"true\",\n      role: \"button\",\n      onClick: onOpen,\n      \"data-testid\": \"menu-button\",\n      color: \"inherit\",\n      className: classes.button\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      \"aria-labelledby\": \"long-menu\",\n      open: Boolean(anchorEl),\n      onClose,\n      anchorEl,\n      anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n      transformOrigin: { vertical: \"top\", horizontal: \"right\" }\n    },\n    /* @__PURE__ */ React.createElement(MenuList, null, onCreateClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onCreateClicked }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(CreateComponentIcon, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Create\" })), onEditorClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onEditorClicked }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Edit, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Template Editor\" })), onActionsClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onActionsClicked }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(DescriptionIcon, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Installed Actions\" })), onTasksClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onTasksClicked }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(List, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Task List\" })))\n  ));\n}\n\nexport { ScaffolderPageContextMenu };\n//# sourceMappingURL=ScaffolderPageContextMenu.esm.js.map\n","import React, { useState, Fragment } from 'react';\nimport useAsync from 'react-use/esm/useAsync';\nimport { scaffolderApiRef } from '@backstage/plugin-scaffolder-react';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport Box from '@material-ui/core/Box';\nimport Collapse from '@material-ui/core/Collapse';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport { useRouteRef, useApi } from '@backstage/core-plugin-api';\nimport { Page, Header, Content, Progress, ErrorPanel, EmptyState, MarkdownContent, CodeSnippet } from '@backstage/core-components';\nimport Chip from '@material-ui/core/Chip';\nimport { ScaffolderPageContextMenu } from '@backstage/plugin-scaffolder-react/alpha';\nimport { useNavigate } from 'react-router-dom';\nimport { editRouteRef, scaffolderListTaskRouteRef, rootRouteRef } from '../../routes.esm.js';\n\nconst useStyles = makeStyles((theme) => ({\n  code: {\n    fontFamily: \"Menlo, monospace\",\n    padding: theme.spacing(1),\n    backgroundColor: theme.palette.type === \"dark\" ? theme.palette.grey[700] : theme.palette.grey[300],\n    display: \"inline-block\",\n    borderRadius: 5,\n    border: `1px solid ${theme.palette.grey[500]}`,\n    position: \"relative\"\n  },\n  codeRequired: {\n    \"&::after\": {\n      position: \"absolute\",\n      content: '\"*\"',\n      top: 0,\n      right: theme.spacing(0.5),\n      fontWeight: \"bolder\",\n      color: theme.palette.error.light\n    }\n  }\n}));\nconst ExamplesTable = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, { container: true }, props.examples.map((example, index) => {\n    return /* @__PURE__ */ React.createElement(Fragment, { key: `example-${index}` }, /* @__PURE__ */ React.createElement(Grid, { item: true, lg: 3 }, /* @__PURE__ */ React.createElement(Box, { padding: 4 }, /* @__PURE__ */ React.createElement(Typography, null, example.description))), /* @__PURE__ */ React.createElement(Grid, { item: true, lg: 9 }, /* @__PURE__ */ React.createElement(Box, { padding: 1 }, /* @__PURE__ */ React.createElement(\n      CodeSnippet,\n      {\n        text: example.example,\n        showLineNumbers: true,\n        showCopyCodeButton: true,\n        language: \"yaml\"\n      }\n    ))));\n  }));\n};\nconst ActionPageContent = () => {\n  const api = useApi(scaffolderApiRef);\n  const classes = useStyles();\n  const { loading, value, error } = useAsync(async () => {\n    return api.listActions();\n  });\n  const [isExpanded, setIsExpanded] = useState({});\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ErrorPanel, { error }), /* @__PURE__ */ React.createElement(\n      EmptyState,\n      {\n        missing: \"info\",\n        title: \"No information to display\",\n        description: \"There are no actions installed or there was an issue communicating with backend.\"\n      }\n    ));\n  }\n  const renderTable = (rows) => {\n    if (!rows || rows.length < 1) {\n      return /* @__PURE__ */ React.createElement(Typography, null, \"No schema defined\");\n    }\n    return /* @__PURE__ */ React.createElement(TableContainer, { component: Paper }, /* @__PURE__ */ React.createElement(Table, { size: \"small\" }, /* @__PURE__ */ React.createElement(TableHead, null, /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, \"Name\"), /* @__PURE__ */ React.createElement(TableCell, null, \"Title\"), /* @__PURE__ */ React.createElement(TableCell, null, \"Description\"), /* @__PURE__ */ React.createElement(TableCell, null, \"Type\"))), /* @__PURE__ */ React.createElement(TableBody, null, rows)));\n  };\n  const getTypes = (properties) => {\n    if (!properties.type) {\n      return [\"unknown\"];\n    }\n    if (properties.type !== \"array\") {\n      return [properties.type].flat();\n    }\n    return [\n      `${properties.type}(${properties.items?.type ?? \"unknown\"})`\n    ];\n  };\n  const formatRows = (parentId, input) => {\n    const properties = input?.properties;\n    if (!properties) {\n      return void 0;\n    }\n    return Object.entries(properties).map((entry) => {\n      const [key] = entry;\n      const id = `${parentId}.${key}`;\n      const props = entry[1];\n      const codeClassname = classNames(classes.code, {\n        [classes.codeRequired]: input.required?.includes(key)\n      });\n      const types = getTypes(props);\n      return /* @__PURE__ */ React.createElement(React.Fragment, { key: id }, /* @__PURE__ */ React.createElement(TableRow, { key: id }, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(\"div\", { className: codeClassname }, key)), /* @__PURE__ */ React.createElement(TableCell, null, props.title), /* @__PURE__ */ React.createElement(TableCell, null, props.description), /* @__PURE__ */ React.createElement(TableCell, null, types.map(\n        (type) => type.includes(\"object\") ? /* @__PURE__ */ React.createElement(\n          Chip,\n          {\n            label: type,\n            key: type,\n            icon: isExpanded[id] ? /* @__PURE__ */ React.createElement(ExpandLessIcon, null) : /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n            variant: \"outlined\",\n            onClick: () => setIsExpanded((prevState) => {\n              const state = { ...prevState };\n              state[id] = !prevState[id];\n              return state;\n            })\n          }\n        ) : /* @__PURE__ */ React.createElement(Chip, { label: type, key: type, variant: \"outlined\" })\n      ))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, { style: { paddingBottom: 0, paddingTop: 0 }, colSpan: 6 }, /* @__PURE__ */ React.createElement(Collapse, { in: isExpanded[id], timeout: \"auto\", unmountOnExit: true }, /* @__PURE__ */ React.createElement(Box, { sx: { margin: 1 } }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", component: \"div\" }, key), renderTable(\n        formatRows(\n          id,\n          props.type === \"array\" ? {\n            properties: props.items?.properties ?? {}\n          } : props\n        )\n      ))))));\n    });\n  };\n  const renderTables = (name, id, input) => {\n    if (!input) {\n      return void 0;\n    }\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", component: \"h4\" }, name), input.map((i, index) => /* @__PURE__ */ React.createElement(\"div\", { key: index }, renderTable(\n      formatRows(`${id}.${index}`, i)\n    ))));\n  };\n  return value?.map((action) => {\n    if (action.id.startsWith(\"legacy:\")) {\n      return void 0;\n    }\n    const oneOf = renderTables(\n      \"oneOf\",\n      `${action.id}.input`,\n      action.schema?.input?.oneOf\n    );\n    return /* @__PURE__ */ React.createElement(Box, { pb: 4, key: action.id }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h4\", component: \"h2\", className: classes.code }, action.id), action.description && /* @__PURE__ */ React.createElement(MarkdownContent, { content: action.description }), action.schema?.input && /* @__PURE__ */ React.createElement(Box, { pb: 2 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"h3\" }, \"Input\"), renderTable(\n      formatRows(`${action.id}.input`, action?.schema?.input)\n    ), oneOf), action.schema?.output && /* @__PURE__ */ React.createElement(Box, { pb: 2 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"h3\" }, \"Output\"), renderTable(\n      formatRows(`${action.id}.output`, action?.schema?.output)\n    )), action.examples && /* @__PURE__ */ React.createElement(Accordion, null, /* @__PURE__ */ React.createElement(AccordionSummary, { expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null) }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"h3\" }, \"Examples\")), /* @__PURE__ */ React.createElement(AccordionDetails, null, /* @__PURE__ */ React.createElement(Box, { pb: 2 }, /* @__PURE__ */ React.createElement(ExamplesTable, { examples: action.examples })))));\n  });\n};\nconst ActionsPage = () => {\n  const navigate = useNavigate();\n  const editorLink = useRouteRef(editRouteRef);\n  const tasksLink = useRouteRef(scaffolderListTaskRouteRef);\n  const createLink = useRouteRef(rootRouteRef);\n  const scaffolderPageContextMenuProps = {\n    onEditorClicked: () => navigate(editorLink()),\n    onActionsClicked: void 0,\n    onTasksClicked: () => navigate(tasksLink()),\n    onCreateClicked: () => navigate(createLink())\n  };\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      pageTitleOverride: \"Create a New Component\",\n      title: \"Installed actions\",\n      subtitle: \"This is the collection of all installed actions\"\n    },\n    /* @__PURE__ */ React.createElement(ScaffolderPageContextMenu, { ...scaffolderPageContextMenuProps })\n  ), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ActionPageContent, null)));\n};\n\nexport { ActionsPage };\n//# sourceMappingURL=ActionsPage.esm.js.map\n","import Card from '@material-ui/core/Card';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport React, { Fragment } from 'react';\nimport AllIcon from '@material-ui/icons/FontDownload';\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: \"rgba(0, 0, 0, .11)\",\n      boxShadow: \"none\",\n      margin: theme.spacing(1, 0, 1, 0)\n    },\n    title: {\n      margin: theme.spacing(1, 0, 0, 1),\n      textTransform: \"uppercase\",\n      fontSize: 12,\n      fontWeight: \"bold\"\n    },\n    listIcon: {\n      minWidth: 30,\n      color: theme.palette.text.primary\n    },\n    menuItem: {\n      minHeight: theme.spacing(6)\n    },\n    groupWrapper: {\n      margin: theme.spacing(1, 1, 2, 1)\n    }\n  }),\n  {\n    name: \"ScaffolderReactOwnerListPicker\"\n  }\n);\nfunction getFilterGroups() {\n  return [\n    {\n      name: \"Task Owner\",\n      items: [\n        {\n          id: \"owned\",\n          label: \"Owned\",\n          icon: SettingsIcon\n        },\n        {\n          id: \"all\",\n          label: \"All\",\n          icon: AllIcon\n        }\n      ]\n    }\n  ];\n}\nconst OwnerListPicker = (props) => {\n  const { filter, onSelectOwner } = props;\n  const classes = useStyles();\n  const filterGroups = getFilterGroups();\n  return /* @__PURE__ */ React.createElement(Card, { className: classes.root }, filterGroups.map((group) => /* @__PURE__ */ React.createElement(Fragment, { key: group.name }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"subtitle2\",\n      component: \"span\",\n      className: classes.title\n    },\n    group.name\n  ), /* @__PURE__ */ React.createElement(Card, { className: classes.groupWrapper }, /* @__PURE__ */ React.createElement(List, { disablePadding: true, dense: true, role: \"menu\" }, group.items.map((item) => /* @__PURE__ */ React.createElement(\n    MenuItem,\n    {\n      key: item.id,\n      divider: true,\n      ContainerProps: { role: \"menuitem\" },\n      onClick: () => onSelectOwner(item.id),\n      selected: item.id === filter,\n      className: classes.menuItem,\n      \"data-testid\": `owner-picker-${item.id}`\n    },\n    item.icon && /* @__PURE__ */ React.createElement(ListItemIcon, { className: classes.listIcon }, /* @__PURE__ */ React.createElement(item.icon, { fontSize: \"small\" })),\n    /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, item.label))\n  )))))));\n};\n\nexport { OwnerListPicker };\n//# sourceMappingURL=OwnerListPicker.esm.js.map\n","// these aren't really private, but nor are they really useful to document\n\n/**\n * @private\n */\nclass LuxonError extends Error {}\n\n/**\n * @private\n */\nexport class InvalidDateTimeError extends LuxonError {\n  constructor(reason) {\n    super(`Invalid DateTime: ${reason.toMessage()}`);\n  }\n}\n\n/**\n * @private\n */\nexport class InvalidIntervalError extends LuxonError {\n  constructor(reason) {\n    super(`Invalid Interval: ${reason.toMessage()}`);\n  }\n}\n\n/**\n * @private\n */\nexport class InvalidDurationError extends LuxonError {\n  constructor(reason) {\n    super(`Invalid Duration: ${reason.toMessage()}`);\n  }\n}\n\n/**\n * @private\n */\nexport class ConflictingSpecificationError extends LuxonError {}\n\n/**\n * @private\n */\nexport class InvalidUnitError extends LuxonError {\n  constructor(unit) {\n    super(`Invalid unit ${unit}`);\n  }\n}\n\n/**\n * @private\n */\nexport class InvalidArgumentError extends LuxonError {}\n\n/**\n * @private\n */\nexport class ZoneIsAbstractError extends LuxonError {\n  constructor() {\n    super(\"Zone is an abstract class\");\n  }\n}\n","/**\n * @private\n */\n\nconst n = \"numeric\",\n  s = \"short\",\n  l = \"long\";\n\nexport const DATE_SHORT = {\n  year: n,\n  month: n,\n  day: n,\n};\n\nexport const DATE_MED = {\n  year: n,\n  month: s,\n  day: n,\n};\n\nexport const DATE_MED_WITH_WEEKDAY = {\n  year: n,\n  month: s,\n  day: n,\n  weekday: s,\n};\n\nexport const DATE_FULL = {\n  year: n,\n  month: l,\n  day: n,\n};\n\nexport const DATE_HUGE = {\n  year: n,\n  month: l,\n  day: n,\n  weekday: l,\n};\n\nexport const TIME_SIMPLE = {\n  hour: n,\n  minute: n,\n};\n\nexport const TIME_WITH_SECONDS = {\n  hour: n,\n  minute: n,\n  second: n,\n};\n\nexport const TIME_WITH_SHORT_OFFSET = {\n  hour: n,\n  minute: n,\n  second: n,\n  timeZoneName: s,\n};\n\nexport const TIME_WITH_LONG_OFFSET = {\n  hour: n,\n  minute: n,\n  second: n,\n  timeZoneName: l,\n};\n\nexport const TIME_24_SIMPLE = {\n  hour: n,\n  minute: n,\n  hourCycle: \"h23\",\n};\n\nexport const TIME_24_WITH_SECONDS = {\n  hour: n,\n  minute: n,\n  second: n,\n  hourCycle: \"h23\",\n};\n\nexport const TIME_24_WITH_SHORT_OFFSET = {\n  hour: n,\n  minute: n,\n  second: n,\n  hourCycle: \"h23\",\n  timeZoneName: s,\n};\n\nexport const TIME_24_WITH_LONG_OFFSET = {\n  hour: n,\n  minute: n,\n  second: n,\n  hourCycle: \"h23\",\n  timeZoneName: l,\n};\n\nexport const DATETIME_SHORT = {\n  year: n,\n  month: n,\n  day: n,\n  hour: n,\n  minute: n,\n};\n\nexport const DATETIME_SHORT_WITH_SECONDS = {\n  year: n,\n  month: n,\n  day: n,\n  hour: n,\n  minute: n,\n  second: n,\n};\n\nexport const DATETIME_MED = {\n  year: n,\n  month: s,\n  day: n,\n  hour: n,\n  minute: n,\n};\n\nexport const DATETIME_MED_WITH_SECONDS = {\n  year: n,\n  month: s,\n  day: n,\n  hour: n,\n  minute: n,\n  second: n,\n};\n\nexport const DATETIME_MED_WITH_WEEKDAY = {\n  year: n,\n  month: s,\n  day: n,\n  weekday: s,\n  hour: n,\n  minute: n,\n};\n\nexport const DATETIME_FULL = {\n  year: n,\n  month: l,\n  day: n,\n  hour: n,\n  minute: n,\n  timeZoneName: s,\n};\n\nexport const DATETIME_FULL_WITH_SECONDS = {\n  year: n,\n  month: l,\n  day: n,\n  hour: n,\n  minute: n,\n  second: n,\n  timeZoneName: s,\n};\n\nexport const DATETIME_HUGE = {\n  year: n,\n  month: l,\n  day: n,\n  weekday: l,\n  hour: n,\n  minute: n,\n  timeZoneName: l,\n};\n\nexport const DATETIME_HUGE_WITH_SECONDS = {\n  year: n,\n  month: l,\n  day: n,\n  weekday: l,\n  hour: n,\n  minute: n,\n  second: n,\n  timeZoneName: l,\n};\n","import { ZoneIsAbstractError } from \"./errors.js\";\n\n/**\n * @interface\n */\nexport default class Zone {\n  /**\n   * The type of zone\n   * @abstract\n   * @type {string}\n   */\n  get type() {\n    throw new ZoneIsAbstractError();\n  }\n\n  /**\n   * The name of this zone.\n   * @abstract\n   * @type {string}\n   */\n  get name() {\n    throw new ZoneIsAbstractError();\n  }\n\n  get ianaName() {\n    return this.name;\n  }\n\n  /**\n   * Returns whether the offset is known to be fixed for the whole year.\n   * @abstract\n   * @type {boolean}\n   */\n  get isUniversal() {\n    throw new ZoneIsAbstractError();\n  }\n\n  /**\n   * Returns the offset's common name (such as EST) at the specified timestamp\n   * @abstract\n   * @param {number} ts - Epoch milliseconds for which to get the name\n   * @param {Object} opts - Options to affect the format\n   * @param {string} opts.format - What style of offset to return. Accepts 'long' or 'short'.\n   * @param {string} opts.locale - What locale to return the offset name in.\n   * @return {string}\n   */\n  offsetName(ts, opts) {\n    throw new ZoneIsAbstractError();\n  }\n\n  /**\n   * Returns the offset's value as a string\n   * @abstract\n   * @param {number} ts - Epoch milliseconds for which to get the offset\n   * @param {string} format - What style of offset to return.\n   *                          Accepts 'narrow', 'short', or 'techie'. Returning '+6', '+06:00', or '+0600' respectively\n   * @return {string}\n   */\n  formatOffset(ts, format) {\n    throw new ZoneIsAbstractError();\n  }\n\n  /**\n   * Return the offset in minutes for this zone at the specified timestamp.\n   * @abstract\n   * @param {number} ts - Epoch milliseconds for which to compute the offset\n   * @return {number}\n   */\n  offset(ts) {\n    throw new ZoneIsAbstractError();\n  }\n\n  /**\n   * Return whether this Zone is equal to another zone\n   * @abstract\n   * @param {Zone} otherZone - the zone to compare\n   * @return {boolean}\n   */\n  equals(otherZone) {\n    throw new ZoneIsAbstractError();\n  }\n\n  /**\n   * Return whether this Zone is valid.\n   * @abstract\n   * @type {boolean}\n   */\n  get isValid() {\n    throw new ZoneIsAbstractError();\n  }\n}\n","import { formatOffset, parseZoneInfo } from \"../impl/util.js\";\nimport Zone from \"../zone.js\";\n\nlet singleton = null;\n\n/**\n * Represents the local zone for this JavaScript environment.\n * @implements {Zone}\n */\nexport default class SystemZone extends Zone {\n  /**\n   * Get a singleton instance of the local zone\n   * @return {SystemZone}\n   */\n  static get instance() {\n    if (singleton === null) {\n      singleton = new SystemZone();\n    }\n    return singleton;\n  }\n\n  /** @override **/\n  get type() {\n    return \"system\";\n  }\n\n  /** @override **/\n  get name() {\n    return new Intl.DateTimeFormat().resolvedOptions().timeZone;\n  }\n\n  /** @override **/\n  get isUniversal() {\n    return false;\n  }\n\n  /** @override **/\n  offsetName(ts, { format, locale }) {\n    return parseZoneInfo(ts, format, locale);\n  }\n\n  /** @override **/\n  formatOffset(ts, format) {\n    return formatOffset(this.offset(ts), format);\n  }\n\n  /** @override **/\n  offset(ts) {\n    return -new Date(ts).getTimezoneOffset();\n  }\n\n  /** @override **/\n  equals(otherZone) {\n    return otherZone.type === \"system\";\n  }\n\n  /** @override **/\n  get isValid() {\n    return true;\n  }\n}\n","import { formatOffset, parseZoneInfo, isUndefined, objToLocalTS } from \"../impl/util.js\";\nimport Zone from \"../zone.js\";\n\nlet dtfCache = {};\nfunction makeDTF(zone) {\n  if (!dtfCache[zone]) {\n    dtfCache[zone] = new Intl.DateTimeFormat(\"en-US\", {\n      hour12: false,\n      timeZone: zone,\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n      era: \"short\",\n    });\n  }\n  return dtfCache[zone];\n}\n\nconst typeToPos = {\n  year: 0,\n  month: 1,\n  day: 2,\n  era: 3,\n  hour: 4,\n  minute: 5,\n  second: 6,\n};\n\nfunction hackyOffset(dtf, date) {\n  const formatted = dtf.format(date).replace(/\\u200E/g, \"\"),\n    parsed = /(\\d+)\\/(\\d+)\\/(\\d+) (AD|BC),? (\\d+):(\\d+):(\\d+)/.exec(formatted),\n    [, fMonth, fDay, fYear, fadOrBc, fHour, fMinute, fSecond] = parsed;\n  return [fYear, fMonth, fDay, fadOrBc, fHour, fMinute, fSecond];\n}\n\nfunction partsOffset(dtf, date) {\n  const formatted = dtf.formatToParts(date);\n  const filled = [];\n  for (let i = 0; i < formatted.length; i++) {\n    const { type, value } = formatted[i];\n    const pos = typeToPos[type];\n\n    if (type === \"era\") {\n      filled[pos] = value;\n    } else if (!isUndefined(pos)) {\n      filled[pos] = parseInt(value, 10);\n    }\n  }\n  return filled;\n}\n\nlet ianaZoneCache = {};\n/**\n * A zone identified by an IANA identifier, like America/New_York\n * @implements {Zone}\n */\nexport default class IANAZone extends Zone {\n  /**\n   * @param {string} name - Zone name\n   * @return {IANAZone}\n   */\n  static create(name) {\n    if (!ianaZoneCache[name]) {\n      ianaZoneCache[name] = new IANAZone(name);\n    }\n    return ianaZoneCache[name];\n  }\n\n  /**\n   * Reset local caches. Should only be necessary in testing scenarios.\n   * @return {void}\n   */\n  static resetCache() {\n    ianaZoneCache = {};\n    dtfCache = {};\n  }\n\n  /**\n   * Returns whether the provided string is a valid specifier. This only checks the string's format, not that the specifier identifies a known zone; see isValidZone for that.\n   * @param {string} s - The string to check validity on\n   * @example IANAZone.isValidSpecifier(\"America/New_York\") //=> true\n   * @example IANAZone.isValidSpecifier(\"Sport~~blorp\") //=> false\n   * @deprecated This method returns false for some valid IANA names. Use isValidZone instead.\n   * @return {boolean}\n   */\n  static isValidSpecifier(s) {\n    return this.isValidZone(s);\n  }\n\n  /**\n   * Returns whether the provided string identifies a real zone\n   * @param {string} zone - The string to check\n   * @example IANAZone.isValidZone(\"America/New_York\") //=> true\n   * @example IANAZone.isValidZone(\"Fantasia/Castle\") //=> false\n   * @example IANAZone.isValidZone(\"Sport~~blorp\") //=> false\n   * @return {boolean}\n   */\n  static isValidZone(zone) {\n    if (!zone) {\n      return false;\n    }\n    try {\n      new Intl.DateTimeFormat(\"en-US\", { timeZone: zone }).format();\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  constructor(name) {\n    super();\n    /** @private **/\n    this.zoneName = name;\n    /** @private **/\n    this.valid = IANAZone.isValidZone(name);\n  }\n\n  /** @override **/\n  get type() {\n    return \"iana\";\n  }\n\n  /** @override **/\n  get name() {\n    return this.zoneName;\n  }\n\n  /** @override **/\n  get isUniversal() {\n    return false;\n  }\n\n  /** @override **/\n  offsetName(ts, { format, locale }) {\n    return parseZoneInfo(ts, format, locale, this.name);\n  }\n\n  /** @override **/\n  formatOffset(ts, format) {\n    return formatOffset(this.offset(ts), format);\n  }\n\n  /** @override **/\n  offset(ts) {\n    const date = new Date(ts);\n\n    if (isNaN(date)) return NaN;\n\n    const dtf = makeDTF(this.name);\n    let [year, month, day, adOrBc, hour, minute, second] = dtf.formatToParts\n      ? partsOffset(dtf, date)\n      : hackyOffset(dtf, date);\n\n    if (adOrBc === \"BC\") {\n      year = -Math.abs(year) + 1;\n    }\n\n    // because we're using hour12 and https://bugs.chromium.org/p/chromium/issues/detail?id=1025564&can=2&q=%2224%3A00%22%20datetimeformat\n    const adjustedHour = hour === 24 ? 0 : hour;\n\n    const asUTC = objToLocalTS({\n      year,\n      month,\n      day,\n      hour: adjustedHour,\n      minute,\n      second,\n      millisecond: 0,\n    });\n\n    let asTS = +date;\n    const over = asTS % 1000;\n    asTS -= over >= 0 ? over : 1000 + over;\n    return (asUTC - asTS) / (60 * 1000);\n  }\n\n  /** @override **/\n  equals(otherZone) {\n    return otherZone.type === \"iana\" && otherZone.name === this.name;\n  }\n\n  /** @override **/\n  get isValid() {\n    return this.valid;\n  }\n}\n","import { hasLocaleWeekInfo, hasRelative, padStart, roundTo, validateWeekSettings } from \"./util.js\";\nimport * as English from \"./english.js\";\nimport Settings from \"../settings.js\";\nimport DateTime from \"../datetime.js\";\nimport IANAZone from \"../zones/IANAZone.js\";\n\n// todo - remap caching\n\nlet intlLFCache = {};\nfunction getCachedLF(locString, opts = {}) {\n  const key = JSON.stringify([locString, opts]);\n  let dtf = intlLFCache[key];\n  if (!dtf) {\n    dtf = new Intl.ListFormat(locString, opts);\n    intlLFCache[key] = dtf;\n  }\n  return dtf;\n}\n\nlet intlDTCache = {};\nfunction getCachedDTF(locString, opts = {}) {\n  const key = JSON.stringify([locString, opts]);\n  let dtf = intlDTCache[key];\n  if (!dtf) {\n    dtf = new Intl.DateTimeFormat(locString, opts);\n    intlDTCache[key] = dtf;\n  }\n  return dtf;\n}\n\nlet intlNumCache = {};\nfunction getCachedINF(locString, opts = {}) {\n  const key = JSON.stringify([locString, opts]);\n  let inf = intlNumCache[key];\n  if (!inf) {\n    inf = new Intl.NumberFormat(locString, opts);\n    intlNumCache[key] = inf;\n  }\n  return inf;\n}\n\nlet intlRelCache = {};\nfunction getCachedRTF(locString, opts = {}) {\n  const { base, ...cacheKeyOpts } = opts; // exclude `base` from the options\n  const key = JSON.stringify([locString, cacheKeyOpts]);\n  let inf = intlRelCache[key];\n  if (!inf) {\n    inf = new Intl.RelativeTimeFormat(locString, opts);\n    intlRelCache[key] = inf;\n  }\n  return inf;\n}\n\nlet sysLocaleCache = null;\nfunction systemLocale() {\n  if (sysLocaleCache) {\n    return sysLocaleCache;\n  } else {\n    sysLocaleCache = new Intl.DateTimeFormat().resolvedOptions().locale;\n    return sysLocaleCache;\n  }\n}\n\nlet weekInfoCache = {};\nfunction getCachedWeekInfo(locString) {\n  let data = weekInfoCache[locString];\n  if (!data) {\n    const locale = new Intl.Locale(locString);\n    // browsers currently implement this as a property, but spec says it should be a getter function\n    data = \"getWeekInfo\" in locale ? locale.getWeekInfo() : locale.weekInfo;\n    weekInfoCache[locString] = data;\n  }\n  return data;\n}\n\nfunction parseLocaleString(localeStr) {\n  // I really want to avoid writing a BCP 47 parser\n  // see, e.g. https://github.com/wooorm/bcp-47\n  // Instead, we'll do this:\n\n  // a) if the string has no -u extensions, just leave it alone\n  // b) if it does, use Intl to resolve everything\n  // c) if Intl fails, try again without the -u\n\n  // private subtags and unicode subtags have ordering requirements,\n  // and we're not properly parsing this, so just strip out the\n  // private ones if they exist.\n  const xIndex = localeStr.indexOf(\"-x-\");\n  if (xIndex !== -1) {\n    localeStr = localeStr.substring(0, xIndex);\n  }\n\n  const uIndex = localeStr.indexOf(\"-u-\");\n  if (uIndex === -1) {\n    return [localeStr];\n  } else {\n    let options;\n    let selectedStr;\n    try {\n      options = getCachedDTF(localeStr).resolvedOptions();\n      selectedStr = localeStr;\n    } catch (e) {\n      const smaller = localeStr.substring(0, uIndex);\n      options = getCachedDTF(smaller).resolvedOptions();\n      selectedStr = smaller;\n    }\n\n    const { numberingSystem, calendar } = options;\n    return [selectedStr, numberingSystem, calendar];\n  }\n}\n\nfunction intlConfigString(localeStr, numberingSystem, outputCalendar) {\n  if (outputCalendar || numberingSystem) {\n    if (!localeStr.includes(\"-u-\")) {\n      localeStr += \"-u\";\n    }\n\n    if (outputCalendar) {\n      localeStr += `-ca-${outputCalendar}`;\n    }\n\n    if (numberingSystem) {\n      localeStr += `-nu-${numberingSystem}`;\n    }\n    return localeStr;\n  } else {\n    return localeStr;\n  }\n}\n\nfunction mapMonths(f) {\n  const ms = [];\n  for (let i = 1; i <= 12; i++) {\n    const dt = DateTime.utc(2009, i, 1);\n    ms.push(f(dt));\n  }\n  return ms;\n}\n\nfunction mapWeekdays(f) {\n  const ms = [];\n  for (let i = 1; i <= 7; i++) {\n    const dt = DateTime.utc(2016, 11, 13 + i);\n    ms.push(f(dt));\n  }\n  return ms;\n}\n\nfunction listStuff(loc, length, englishFn, intlFn) {\n  const mode = loc.listingMode();\n\n  if (mode === \"error\") {\n    return null;\n  } else if (mode === \"en\") {\n    return englishFn(length);\n  } else {\n    return intlFn(length);\n  }\n}\n\nfunction supportsFastNumbers(loc) {\n  if (loc.numberingSystem && loc.numberingSystem !== \"latn\") {\n    return false;\n  } else {\n    return (\n      loc.numberingSystem === \"latn\" ||\n      !loc.locale ||\n      loc.locale.startsWith(\"en\") ||\n      new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem === \"latn\"\n    );\n  }\n}\n\n/**\n * @private\n */\n\nclass PolyNumberFormatter {\n  constructor(intl, forceSimple, opts) {\n    this.padTo = opts.padTo || 0;\n    this.floor = opts.floor || false;\n\n    const { padTo, floor, ...otherOpts } = opts;\n\n    if (!forceSimple || Object.keys(otherOpts).length > 0) {\n      const intlOpts = { useGrouping: false, ...opts };\n      if (opts.padTo > 0) intlOpts.minimumIntegerDigits = opts.padTo;\n      this.inf = getCachedINF(intl, intlOpts);\n    }\n  }\n\n  format(i) {\n    if (this.inf) {\n      const fixed = this.floor ? Math.floor(i) : i;\n      return this.inf.format(fixed);\n    } else {\n      // to match the browser's numberformatter defaults\n      const fixed = this.floor ? Math.floor(i) : roundTo(i, 3);\n      return padStart(fixed, this.padTo);\n    }\n  }\n}\n\n/**\n * @private\n */\n\nclass PolyDateFormatter {\n  constructor(dt, intl, opts) {\n    this.opts = opts;\n    this.originalZone = undefined;\n\n    let z = undefined;\n    if (this.opts.timeZone) {\n      // Don't apply any workarounds if a timeZone is explicitly provided in opts\n      this.dt = dt;\n    } else if (dt.zone.type === \"fixed\") {\n      // UTC-8 or Etc/UTC-8 are not part of tzdata, only Etc/GMT+8 and the like.\n      // That is why fixed-offset TZ is set to that unless it is:\n      // 1. Representing offset 0 when UTC is used to maintain previous behavior and does not become GMT.\n      // 2. Unsupported by the browser:\n      //    - some do not support Etc/\n      //    - < Etc/GMT-14, > Etc/GMT+12, and 30-minute or 45-minute offsets are not part of tzdata\n      const gmtOffset = -1 * (dt.offset / 60);\n      const offsetZ = gmtOffset >= 0 ? `Etc/GMT+${gmtOffset}` : `Etc/GMT${gmtOffset}`;\n      if (dt.offset !== 0 && IANAZone.create(offsetZ).valid) {\n        z = offsetZ;\n        this.dt = dt;\n      } else {\n        // Not all fixed-offset zones like Etc/+4:30 are present in tzdata so\n        // we manually apply the offset and substitute the zone as needed.\n        z = \"UTC\";\n        this.dt = dt.offset === 0 ? dt : dt.setZone(\"UTC\").plus({ minutes: dt.offset });\n        this.originalZone = dt.zone;\n      }\n    } else if (dt.zone.type === \"system\") {\n      this.dt = dt;\n    } else if (dt.zone.type === \"iana\") {\n      this.dt = dt;\n      z = dt.zone.name;\n    } else {\n      // Custom zones can have any offset / offsetName so we just manually\n      // apply the offset and substitute the zone as needed.\n      z = \"UTC\";\n      this.dt = dt.setZone(\"UTC\").plus({ minutes: dt.offset });\n      this.originalZone = dt.zone;\n    }\n\n    const intlOpts = { ...this.opts };\n    intlOpts.timeZone = intlOpts.timeZone || z;\n    this.dtf = getCachedDTF(intl, intlOpts);\n  }\n\n  format() {\n    if (this.originalZone) {\n      // If we have to substitute in the actual zone name, we have to use\n      // formatToParts so that the timezone can be replaced.\n      return this.formatToParts()\n        .map(({ value }) => value)\n        .join(\"\");\n    }\n    return this.dtf.format(this.dt.toJSDate());\n  }\n\n  formatToParts() {\n    const parts = this.dtf.formatToParts(this.dt.toJSDate());\n    if (this.originalZone) {\n      return parts.map((part) => {\n        if (part.type === \"timeZoneName\") {\n          const offsetName = this.originalZone.offsetName(this.dt.ts, {\n            locale: this.dt.locale,\n            format: this.opts.timeZoneName,\n          });\n          return {\n            ...part,\n            value: offsetName,\n          };\n        } else {\n          return part;\n        }\n      });\n    }\n    return parts;\n  }\n\n  resolvedOptions() {\n    return this.dtf.resolvedOptions();\n  }\n}\n\n/**\n * @private\n */\nclass PolyRelFormatter {\n  constructor(intl, isEnglish, opts) {\n    this.opts = { style: \"long\", ...opts };\n    if (!isEnglish && hasRelative()) {\n      this.rtf = getCachedRTF(intl, opts);\n    }\n  }\n\n  format(count, unit) {\n    if (this.rtf) {\n      return this.rtf.format(count, unit);\n    } else {\n      return English.formatRelativeTime(unit, count, this.opts.numeric, this.opts.style !== \"long\");\n    }\n  }\n\n  formatToParts(count, unit) {\n    if (this.rtf) {\n      return this.rtf.formatToParts(count, unit);\n    } else {\n      return [];\n    }\n  }\n}\n\nconst fallbackWeekSettings = {\n  firstDay: 1,\n  minimalDays: 4,\n  weekend: [6, 7],\n};\n\n/**\n * @private\n */\n\nexport default class Locale {\n  static fromOpts(opts) {\n    return Locale.create(\n      opts.locale,\n      opts.numberingSystem,\n      opts.outputCalendar,\n      opts.weekSettings,\n      opts.defaultToEN\n    );\n  }\n\n  static create(locale, numberingSystem, outputCalendar, weekSettings, defaultToEN = false) {\n    const specifiedLocale = locale || Settings.defaultLocale;\n    // the system locale is useful for human readable strings but annoying for parsing/formatting known formats\n    const localeR = specifiedLocale || (defaultToEN ? \"en-US\" : systemLocale());\n    const numberingSystemR = numberingSystem || Settings.defaultNumberingSystem;\n    const outputCalendarR = outputCalendar || Settings.defaultOutputCalendar;\n    const weekSettingsR = validateWeekSettings(weekSettings) || Settings.defaultWeekSettings;\n    return new Locale(localeR, numberingSystemR, outputCalendarR, weekSettingsR, specifiedLocale);\n  }\n\n  static resetCache() {\n    sysLocaleCache = null;\n    intlDTCache = {};\n    intlNumCache = {};\n    intlRelCache = {};\n  }\n\n  static fromObject({ locale, numberingSystem, outputCalendar, weekSettings } = {}) {\n    return Locale.create(locale, numberingSystem, outputCalendar, weekSettings);\n  }\n\n  constructor(locale, numbering, outputCalendar, weekSettings, specifiedLocale) {\n    const [parsedLocale, parsedNumberingSystem, parsedOutputCalendar] = parseLocaleString(locale);\n\n    this.locale = parsedLocale;\n    this.numberingSystem = numbering || parsedNumberingSystem || null;\n    this.outputCalendar = outputCalendar || parsedOutputCalendar || null;\n    this.weekSettings = weekSettings;\n    this.intl = intlConfigString(this.locale, this.numberingSystem, this.outputCalendar);\n\n    this.weekdaysCache = { format: {}, standalone: {} };\n    this.monthsCache = { format: {}, standalone: {} };\n    this.meridiemCache = null;\n    this.eraCache = {};\n\n    this.specifiedLocale = specifiedLocale;\n    this.fastNumbersCached = null;\n  }\n\n  get fastNumbers() {\n    if (this.fastNumbersCached == null) {\n      this.fastNumbersCached = supportsFastNumbers(this);\n    }\n\n    return this.fastNumbersCached;\n  }\n\n  listingMode() {\n    const isActuallyEn = this.isEnglish();\n    const hasNoWeirdness =\n      (this.numberingSystem === null || this.numberingSystem === \"latn\") &&\n      (this.outputCalendar === null || this.outputCalendar === \"gregory\");\n    return isActuallyEn && hasNoWeirdness ? \"en\" : \"intl\";\n  }\n\n  clone(alts) {\n    if (!alts || Object.getOwnPropertyNames(alts).length === 0) {\n      return this;\n    } else {\n      return Locale.create(\n        alts.locale || this.specifiedLocale,\n        alts.numberingSystem || this.numberingSystem,\n        alts.outputCalendar || this.outputCalendar,\n        validateWeekSettings(alts.weekSettings) || this.weekSettings,\n        alts.defaultToEN || false\n      );\n    }\n  }\n\n  redefaultToEN(alts = {}) {\n    return this.clone({ ...alts, defaultToEN: true });\n  }\n\n  redefaultToSystem(alts = {}) {\n    return this.clone({ ...alts, defaultToEN: false });\n  }\n\n  months(length, format = false) {\n    return listStuff(this, length, English.months, () => {\n      const intl = format ? { month: length, day: \"numeric\" } : { month: length },\n        formatStr = format ? \"format\" : \"standalone\";\n      if (!this.monthsCache[formatStr][length]) {\n        this.monthsCache[formatStr][length] = mapMonths((dt) => this.extract(dt, intl, \"month\"));\n      }\n      return this.monthsCache[formatStr][length];\n    });\n  }\n\n  weekdays(length, format = false) {\n    return listStuff(this, length, English.weekdays, () => {\n      const intl = format\n          ? { weekday: length, year: \"numeric\", month: \"long\", day: \"numeric\" }\n          : { weekday: length },\n        formatStr = format ? \"format\" : \"standalone\";\n      if (!this.weekdaysCache[formatStr][length]) {\n        this.weekdaysCache[formatStr][length] = mapWeekdays((dt) =>\n          this.extract(dt, intl, \"weekday\")\n        );\n      }\n      return this.weekdaysCache[formatStr][length];\n    });\n  }\n\n  meridiems() {\n    return listStuff(\n      this,\n      undefined,\n      () => English.meridiems,\n      () => {\n        // In theory there could be aribitrary day periods. We're gonna assume there are exactly two\n        // for AM and PM. This is probably wrong, but it's makes parsing way easier.\n        if (!this.meridiemCache) {\n          const intl = { hour: \"numeric\", hourCycle: \"h12\" };\n          this.meridiemCache = [DateTime.utc(2016, 11, 13, 9), DateTime.utc(2016, 11, 13, 19)].map(\n            (dt) => this.extract(dt, intl, \"dayperiod\")\n          );\n        }\n\n        return this.meridiemCache;\n      }\n    );\n  }\n\n  eras(length) {\n    return listStuff(this, length, English.eras, () => {\n      const intl = { era: length };\n\n      // This is problematic. Different calendars are going to define eras totally differently. What I need is the minimum set of dates\n      // to definitely enumerate them.\n      if (!this.eraCache[length]) {\n        this.eraCache[length] = [DateTime.utc(-40, 1, 1), DateTime.utc(2017, 1, 1)].map((dt) =>\n          this.extract(dt, intl, \"era\")\n        );\n      }\n\n      return this.eraCache[length];\n    });\n  }\n\n  extract(dt, intlOpts, field) {\n    const df = this.dtFormatter(dt, intlOpts),\n      results = df.formatToParts(),\n      matching = results.find((m) => m.type.toLowerCase() === field);\n    return matching ? matching.value : null;\n  }\n\n  numberFormatter(opts = {}) {\n    // this forcesimple option is never used (the only caller short-circuits on it, but it seems safer to leave)\n    // (in contrast, the rest of the condition is used heavily)\n    return new PolyNumberFormatter(this.intl, opts.forceSimple || this.fastNumbers, opts);\n  }\n\n  dtFormatter(dt, intlOpts = {}) {\n    return new PolyDateFormatter(dt, this.intl, intlOpts);\n  }\n\n  relFormatter(opts = {}) {\n    return new PolyRelFormatter(this.intl, this.isEnglish(), opts);\n  }\n\n  listFormatter(opts = {}) {\n    return getCachedLF(this.intl, opts);\n  }\n\n  isEnglish() {\n    return (\n      this.locale === \"en\" ||\n      this.locale.toLowerCase() === \"en-us\" ||\n      new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith(\"en-us\")\n    );\n  }\n\n  getWeekSettings() {\n    if (this.weekSettings) {\n      return this.weekSettings;\n    } else if (!hasLocaleWeekInfo()) {\n      return fallbackWeekSettings;\n    } else {\n      return getCachedWeekInfo(this.locale);\n    }\n  }\n\n  getStartOfWeek() {\n    return this.getWeekSettings().firstDay;\n  }\n\n  getMinDaysInFirstWeek() {\n    return this.getWeekSettings().minimalDays;\n  }\n\n  getWeekendDays() {\n    return this.getWeekSettings().weekend;\n  }\n\n  equals(other) {\n    return (\n      this.locale === other.locale &&\n      this.numberingSystem === other.numberingSystem &&\n      this.outputCalendar === other.outputCalendar\n    );\n  }\n}\n","import { formatOffset, signedOffset } from \"../impl/util.js\";\nimport Zone from \"../zone.js\";\n\nlet singleton = null;\n\n/**\n * A zone with a fixed offset (meaning no DST)\n * @implements {Zone}\n */\nexport default class FixedOffsetZone extends Zone {\n  /**\n   * Get a singleton instance of UTC\n   * @return {FixedOffsetZone}\n   */\n  static get utcInstance() {\n    if (singleton === null) {\n      singleton = new FixedOffsetZone(0);\n    }\n    return singleton;\n  }\n\n  /**\n   * Get an instance with a specified offset\n   * @param {number} offset - The offset in minutes\n   * @return {FixedOffsetZone}\n   */\n  static instance(offset) {\n    return offset === 0 ? FixedOffsetZone.utcInstance : new FixedOffsetZone(offset);\n  }\n\n  /**\n   * Get an instance of FixedOffsetZone from a UTC offset string, like \"UTC+6\"\n   * @param {string} s - The offset string to parse\n   * @example FixedOffsetZone.parseSpecifier(\"UTC+6\")\n   * @example FixedOffsetZone.parseSpecifier(\"UTC+06\")\n   * @example FixedOffsetZone.parseSpecifier(\"UTC-6:00\")\n   * @return {FixedOffsetZone}\n   */\n  static parseSpecifier(s) {\n    if (s) {\n      const r = s.match(/^utc(?:([+-]\\d{1,2})(?::(\\d{2}))?)?$/i);\n      if (r) {\n        return new FixedOffsetZone(signedOffset(r[1], r[2]));\n      }\n    }\n    return null;\n  }\n\n  constructor(offset) {\n    super();\n    /** @private **/\n    this.fixed = offset;\n  }\n\n  /** @override **/\n  get type() {\n    return \"fixed\";\n  }\n\n  /** @override **/\n  get name() {\n    return this.fixed === 0 ? \"UTC\" : `UTC${formatOffset(this.fixed, \"narrow\")}`;\n  }\n\n  get ianaName() {\n    if (this.fixed === 0) {\n      return \"Etc/UTC\";\n    } else {\n      return `Etc/GMT${formatOffset(-this.fixed, \"narrow\")}`;\n    }\n  }\n\n  /** @override **/\n  offsetName() {\n    return this.name;\n  }\n\n  /** @override **/\n  formatOffset(ts, format) {\n    return formatOffset(this.fixed, format);\n  }\n\n  /** @override **/\n  get isUniversal() {\n    return true;\n  }\n\n  /** @override **/\n  offset() {\n    return this.fixed;\n  }\n\n  /** @override **/\n  equals(otherZone) {\n    return otherZone.type === \"fixed\" && otherZone.fixed === this.fixed;\n  }\n\n  /** @override **/\n  get isValid() {\n    return true;\n  }\n}\n","import Zone from \"../zone.js\";\n\n/**\n * A zone that failed to parse. You should never need to instantiate this.\n * @implements {Zone}\n */\nexport default class InvalidZone extends Zone {\n  constructor(zoneName) {\n    super();\n    /**  @private */\n    this.zoneName = zoneName;\n  }\n\n  /** @override **/\n  get type() {\n    return \"invalid\";\n  }\n\n  /** @override **/\n  get name() {\n    return this.zoneName;\n  }\n\n  /** @override **/\n  get isUniversal() {\n    return false;\n  }\n\n  /** @override **/\n  offsetName() {\n    return null;\n  }\n\n  /** @override **/\n  formatOffset() {\n    return \"\";\n  }\n\n  /** @override **/\n  offset() {\n    return NaN;\n  }\n\n  /** @override **/\n  equals() {\n    return false;\n  }\n\n  /** @override **/\n  get isValid() {\n    return false;\n  }\n}\n","/**\n * @private\n */\n\nimport Zone from \"../zone.js\";\nimport IANAZone from \"../zones/IANAZone.js\";\nimport FixedOffsetZone from \"../zones/fixedOffsetZone.js\";\nimport InvalidZone from \"../zones/invalidZone.js\";\n\nimport { isUndefined, isString, isNumber } from \"./util.js\";\nimport SystemZone from \"../zones/systemZone.js\";\n\nexport function normalizeZone(input, defaultZone) {\n  let offset;\n  if (isUndefined(input) || input === null) {\n    return defaultZone;\n  } else if (input instanceof Zone) {\n    return input;\n  } else if (isString(input)) {\n    const lowered = input.toLowerCase();\n    if (lowered === \"default\") return defaultZone;\n    else if (lowered === \"local\" || lowered === \"system\") return SystemZone.instance;\n    else if (lowered === \"utc\" || lowered === \"gmt\") return FixedOffsetZone.utcInstance;\n    else return FixedOffsetZone.parseSpecifier(lowered) || IANAZone.create(input);\n  } else if (isNumber(input)) {\n    return FixedOffsetZone.instance(input);\n  } else if (typeof input === \"object\" && \"offset\" in input && typeof input.offset === \"function\") {\n    // This is dumb, but the instanceof check above doesn't seem to really work\n    // so we're duck checking it\n    return input;\n  } else {\n    return new InvalidZone(input);\n  }\n}\n","import SystemZone from \"./zones/systemZone.js\";\nimport IANAZone from \"./zones/IANAZone.js\";\nimport Locale from \"./impl/locale.js\";\n\nimport { normalizeZone } from \"./impl/zoneUtil.js\";\nimport { validateWeekSettings } from \"./impl/util.js\";\n\nlet now = () => Date.now(),\n  defaultZone = \"system\",\n  defaultLocale = null,\n  defaultNumberingSystem = null,\n  defaultOutputCalendar = null,\n  twoDigitCutoffYear = 60,\n  throwOnInvalid,\n  defaultWeekSettings = null;\n\n/**\n * Settings contains static getters and setters that control Luxon's overall behavior. Luxon is a simple library with few options, but the ones it does have live here.\n */\nexport default class Settings {\n  /**\n   * Get the callback for returning the current timestamp.\n   * @type {function}\n   */\n  static get now() {\n    return now;\n  }\n\n  /**\n   * Set the callback for returning the current timestamp.\n   * The function should return a number, which will be interpreted as an Epoch millisecond count\n   * @type {function}\n   * @example Settings.now = () => Date.now() + 3000 // pretend it is 3 seconds in the future\n   * @example Settings.now = () => 0 // always pretend it's Jan 1, 1970 at midnight in UTC time\n   */\n  static set now(n) {\n    now = n;\n  }\n\n  /**\n   * Set the default time zone to create DateTimes in. Does not affect existing instances.\n   * Use the value \"system\" to reset this value to the system's time zone.\n   * @type {string}\n   */\n  static set defaultZone(zone) {\n    defaultZone = zone;\n  }\n\n  /**\n   * Get the default time zone object currently used to create DateTimes. Does not affect existing instances.\n   * The default value is the system's time zone (the one set on the machine that runs this code).\n   * @type {Zone}\n   */\n  static get defaultZone() {\n    return normalizeZone(defaultZone, SystemZone.instance);\n  }\n\n  /**\n   * Get the default locale to create DateTimes with. Does not affect existing instances.\n   * @type {string}\n   */\n  static get defaultLocale() {\n    return defaultLocale;\n  }\n\n  /**\n   * Set the default locale to create DateTimes with. Does not affect existing instances.\n   * @type {string}\n   */\n  static set defaultLocale(locale) {\n    defaultLocale = locale;\n  }\n\n  /**\n   * Get the default numbering system to create DateTimes with. Does not affect existing instances.\n   * @type {string}\n   */\n  static get defaultNumberingSystem() {\n    return defaultNumberingSystem;\n  }\n\n  /**\n   * Set the default numbering system to create DateTimes with. Does not affect existing instances.\n   * @type {string}\n   */\n  static set defaultNumberingSystem(numberingSystem) {\n    defaultNumberingSystem = numberingSystem;\n  }\n\n  /**\n   * Get the default output calendar to create DateTimes with. Does not affect existing instances.\n   * @type {string}\n   */\n  static get defaultOutputCalendar() {\n    return defaultOutputCalendar;\n  }\n\n  /**\n   * Set the default output calendar to create DateTimes with. Does not affect existing instances.\n   * @type {string}\n   */\n  static set defaultOutputCalendar(outputCalendar) {\n    defaultOutputCalendar = outputCalendar;\n  }\n\n  /**\n   * @typedef {Object} WeekSettings\n   * @property {number} firstDay\n   * @property {number} minimalDays\n   * @property {number[]} weekend\n   */\n\n  /**\n   * @return {WeekSettings|null}\n   */\n  static get defaultWeekSettings() {\n    return defaultWeekSettings;\n  }\n\n  /**\n   * Allows overriding the default locale week settings, i.e. the start of the week, the weekend and\n   * how many days are required in the first week of a year.\n   * Does not affect existing instances.\n   *\n   * @param {WeekSettings|null} weekSettings\n   */\n  static set defaultWeekSettings(weekSettings) {\n    defaultWeekSettings = validateWeekSettings(weekSettings);\n  }\n\n  /**\n   * Get the cutoff year after which a string encoding a year as two digits is interpreted to occur in the current century.\n   * @type {number}\n   */\n  static get twoDigitCutoffYear() {\n    return twoDigitCutoffYear;\n  }\n\n  /**\n   * Set the cutoff year after which a string encoding a year as two digits is interpreted to occur in the current century.\n   * @type {number}\n   * @example Settings.twoDigitCutoffYear = 0 // cut-off year is 0, so all 'yy' are interpreted as current century\n   * @example Settings.twoDigitCutoffYear = 50 // '49' -> 1949; '50' -> 2050\n   * @example Settings.twoDigitCutoffYear = 1950 // interpreted as 50\n   * @example Settings.twoDigitCutoffYear = 2050 // ALSO interpreted as 50\n   */\n  static set twoDigitCutoffYear(cutoffYear) {\n    twoDigitCutoffYear = cutoffYear % 100;\n  }\n\n  /**\n   * Get whether Luxon will throw when it encounters invalid DateTimes, Durations, or Intervals\n   * @type {boolean}\n   */\n  static get throwOnInvalid() {\n    return throwOnInvalid;\n  }\n\n  /**\n   * Set whether Luxon will throw when it encounters invalid DateTimes, Durations, or Intervals\n   * @type {boolean}\n   */\n  static set throwOnInvalid(t) {\n    throwOnInvalid = t;\n  }\n\n  /**\n   * Reset Luxon's global caches. Should only be necessary in testing scenarios.\n   * @return {void}\n   */\n  static resetCaches() {\n    Locale.resetCache();\n    IANAZone.resetCache();\n  }\n}\n","export default class Invalid {\n  constructor(reason, explanation) {\n    this.reason = reason;\n    this.explanation = explanation;\n  }\n\n  toMessage() {\n    if (this.explanation) {\n      return `${this.reason}: ${this.explanation}`;\n    } else {\n      return this.reason;\n    }\n  }\n}\n","import {\n  integerBetween,\n  isLeapYear,\n  timeObject,\n  daysInYear,\n  daysInMonth,\n  weeksInWeekYear,\n  isInteger,\n  isUndefined,\n} from \"./util.js\";\nimport Invalid from \"./invalid.js\";\nimport { ConflictingSpecificationError } from \"../errors.js\";\n\nconst nonLeapLadder = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334],\n  leapLadder = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];\n\nfunction unitOutOfRange(unit, value) {\n  return new Invalid(\n    \"unit out of range\",\n    `you specified ${value} (of type ${typeof value}) as a ${unit}, which is invalid`\n  );\n}\n\nexport function dayOfWeek(year, month, day) {\n  const d = new Date(Date.UTC(year, month - 1, day));\n\n  if (year < 100 && year >= 0) {\n    d.setUTCFullYear(d.getUTCFullYear() - 1900);\n  }\n\n  const js = d.getUTCDay();\n\n  return js === 0 ? 7 : js;\n}\n\nfunction computeOrdinal(year, month, day) {\n  return day + (isLeapYear(year) ? leapLadder : nonLeapLadder)[month - 1];\n}\n\nfunction uncomputeOrdinal(year, ordinal) {\n  const table = isLeapYear(year) ? leapLadder : nonLeapLadder,\n    month0 = table.findIndex((i) => i < ordinal),\n    day = ordinal - table[month0];\n  return { month: month0 + 1, day };\n}\n\nexport function isoWeekdayToLocal(isoWeekday, startOfWeek) {\n  return ((isoWeekday - startOfWeek + 7) % 7) + 1;\n}\n\n/**\n * @private\n */\n\nexport function gregorianToWeek(gregObj, minDaysInFirstWeek = 4, startOfWeek = 1) {\n  const { year, month, day } = gregObj,\n    ordinal = computeOrdinal(year, month, day),\n    weekday = isoWeekdayToLocal(dayOfWeek(year, month, day), startOfWeek);\n\n  let weekNumber = Math.floor((ordinal - weekday + 14 - minDaysInFirstWeek) / 7),\n    weekYear;\n\n  if (weekNumber < 1) {\n    weekYear = year - 1;\n    weekNumber = weeksInWeekYear(weekYear, minDaysInFirstWeek, startOfWeek);\n  } else if (weekNumber > weeksInWeekYear(year, minDaysInFirstWeek, startOfWeek)) {\n    weekYear = year + 1;\n    weekNumber = 1;\n  } else {\n    weekYear = year;\n  }\n\n  return { weekYear, weekNumber, weekday, ...timeObject(gregObj) };\n}\n\nexport function weekToGregorian(weekData, minDaysInFirstWeek = 4, startOfWeek = 1) {\n  const { weekYear, weekNumber, weekday } = weekData,\n    weekdayOfJan4 = isoWeekdayToLocal(dayOfWeek(weekYear, 1, minDaysInFirstWeek), startOfWeek),\n    yearInDays = daysInYear(weekYear);\n\n  let ordinal = weekNumber * 7 + weekday - weekdayOfJan4 - 7 + minDaysInFirstWeek,\n    year;\n\n  if (ordinal < 1) {\n    year = weekYear - 1;\n    ordinal += daysInYear(year);\n  } else if (ordinal > yearInDays) {\n    year = weekYear + 1;\n    ordinal -= daysInYear(weekYear);\n  } else {\n    year = weekYear;\n  }\n\n  const { month, day } = uncomputeOrdinal(year, ordinal);\n  return { year, month, day, ...timeObject(weekData) };\n}\n\nexport function gregorianToOrdinal(gregData) {\n  const { year, month, day } = gregData;\n  const ordinal = computeOrdinal(year, month, day);\n  return { year, ordinal, ...timeObject(gregData) };\n}\n\nexport function ordinalToGregorian(ordinalData) {\n  const { year, ordinal } = ordinalData;\n  const { month, day } = uncomputeOrdinal(year, ordinal);\n  return { year, month, day, ...timeObject(ordinalData) };\n}\n\n/**\n * Check if local week units like localWeekday are used in obj.\n * If so, validates that they are not mixed with ISO week units and then copies them to the normal week unit properties.\n * Modifies obj in-place!\n * @param obj the object values\n */\nexport function usesLocalWeekValues(obj, loc) {\n  const hasLocaleWeekData =\n    !isUndefined(obj.localWeekday) ||\n    !isUndefined(obj.localWeekNumber) ||\n    !isUndefined(obj.localWeekYear);\n  if (hasLocaleWeekData) {\n    const hasIsoWeekData =\n      !isUndefined(obj.weekday) || !isUndefined(obj.weekNumber) || !isUndefined(obj.weekYear);\n\n    if (hasIsoWeekData) {\n      throw new ConflictingSpecificationError(\n        \"Cannot mix locale-based week fields with ISO-based week fields\"\n      );\n    }\n    if (!isUndefined(obj.localWeekday)) obj.weekday = obj.localWeekday;\n    if (!isUndefined(obj.localWeekNumber)) obj.weekNumber = obj.localWeekNumber;\n    if (!isUndefined(obj.localWeekYear)) obj.weekYear = obj.localWeekYear;\n    delete obj.localWeekday;\n    delete obj.localWeekNumber;\n    delete obj.localWeekYear;\n    return {\n      minDaysInFirstWeek: loc.getMinDaysInFirstWeek(),\n      startOfWeek: loc.getStartOfWeek(),\n    };\n  } else {\n    return { minDaysInFirstWeek: 4, startOfWeek: 1 };\n  }\n}\n\nexport function hasInvalidWeekData(obj, minDaysInFirstWeek = 4, startOfWeek = 1) {\n  const validYear = isInteger(obj.weekYear),\n    validWeek = integerBetween(\n      obj.weekNumber,\n      1,\n      weeksInWeekYear(obj.weekYear, minDaysInFirstWeek, startOfWeek)\n    ),\n    validWeekday = integerBetween(obj.weekday, 1, 7);\n\n  if (!validYear) {\n    return unitOutOfRange(\"weekYear\", obj.weekYear);\n  } else if (!validWeek) {\n    return unitOutOfRange(\"week\", obj.weekNumber);\n  } else if (!validWeekday) {\n    return unitOutOfRange(\"weekday\", obj.weekday);\n  } else return false;\n}\n\nexport function hasInvalidOrdinalData(obj) {\n  const validYear = isInteger(obj.year),\n    validOrdinal = integerBetween(obj.ordinal, 1, daysInYear(obj.year));\n\n  if (!validYear) {\n    return unitOutOfRange(\"year\", obj.year);\n  } else if (!validOrdinal) {\n    return unitOutOfRange(\"ordinal\", obj.ordinal);\n  } else return false;\n}\n\nexport function hasInvalidGregorianData(obj) {\n  const validYear = isInteger(obj.year),\n    validMonth = integerBetween(obj.month, 1, 12),\n    validDay = integerBetween(obj.day, 1, daysInMonth(obj.year, obj.month));\n\n  if (!validYear) {\n    return unitOutOfRange(\"year\", obj.year);\n  } else if (!validMonth) {\n    return unitOutOfRange(\"month\", obj.month);\n  } else if (!validDay) {\n    return unitOutOfRange(\"day\", obj.day);\n  } else return false;\n}\n\nexport function hasInvalidTimeData(obj) {\n  const { hour, minute, second, millisecond } = obj;\n  const validHour =\n      integerBetween(hour, 0, 23) ||\n      (hour === 24 && minute === 0 && second === 0 && millisecond === 0),\n    validMinute = integerBetween(minute, 0, 59),\n    validSecond = integerBetween(second, 0, 59),\n    validMillisecond = integerBetween(millisecond, 0, 999);\n\n  if (!validHour) {\n    return unitOutOfRange(\"hour\", hour);\n  } else if (!validMinute) {\n    return unitOutOfRange(\"minute\", minute);\n  } else if (!validSecond) {\n    return unitOutOfRange(\"second\", second);\n  } else if (!validMillisecond) {\n    return unitOutOfRange(\"millisecond\", millisecond);\n  } else return false;\n}\n","/*\n  This is just a junk drawer, containing anything used across multiple classes.\n  Because Luxon is small(ish), this should stay small and we won't worry about splitting\n  it up into, say, parsingUtil.js and basicUtil.js and so on. But they are divided up by feature area.\n*/\n\nimport { InvalidArgumentError } from \"../errors.js\";\nimport Settings from \"../settings.js\";\nimport { dayOfWeek, isoWeekdayToLocal } from \"./conversions.js\";\n\n/**\n * @private\n */\n\n// TYPES\n\nexport function isUndefined(o) {\n  return typeof o === \"undefined\";\n}\n\nexport function isNumber(o) {\n  return typeof o === \"number\";\n}\n\nexport function isInteger(o) {\n  return typeof o === \"number\" && o % 1 === 0;\n}\n\nexport function isString(o) {\n  return typeof o === \"string\";\n}\n\nexport function isDate(o) {\n  return Object.prototype.toString.call(o) === \"[object Date]\";\n}\n\n// CAPABILITIES\n\nexport function hasRelative() {\n  try {\n    return typeof Intl !== \"undefined\" && !!Intl.RelativeTimeFormat;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport function hasLocaleWeekInfo() {\n  try {\n    return (\n      typeof Intl !== \"undefined\" &&\n      !!Intl.Locale &&\n      (\"weekInfo\" in Intl.Locale.prototype || \"getWeekInfo\" in Intl.Locale.prototype)\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\n// OBJECTS AND ARRAYS\n\nexport function maybeArray(thing) {\n  return Array.isArray(thing) ? thing : [thing];\n}\n\nexport function bestBy(arr, by, compare) {\n  if (arr.length === 0) {\n    return undefined;\n  }\n  return arr.reduce((best, next) => {\n    const pair = [by(next), next];\n    if (!best) {\n      return pair;\n    } else if (compare(best[0], pair[0]) === best[0]) {\n      return best;\n    } else {\n      return pair;\n    }\n  }, null)[1];\n}\n\nexport function pick(obj, keys) {\n  return keys.reduce((a, k) => {\n    a[k] = obj[k];\n    return a;\n  }, {});\n}\n\nexport function hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function validateWeekSettings(settings) {\n  if (settings == null) {\n    return null;\n  } else if (typeof settings !== \"object\") {\n    throw new InvalidArgumentError(\"Week settings must be an object\");\n  } else {\n    if (\n      !integerBetween(settings.firstDay, 1, 7) ||\n      !integerBetween(settings.minimalDays, 1, 7) ||\n      !Array.isArray(settings.weekend) ||\n      settings.weekend.some((v) => !integerBetween(v, 1, 7))\n    ) {\n      throw new InvalidArgumentError(\"Invalid week settings\");\n    }\n    return {\n      firstDay: settings.firstDay,\n      minimalDays: settings.minimalDays,\n      weekend: Array.from(settings.weekend),\n    };\n  }\n}\n\n// NUMBERS AND STRINGS\n\nexport function integerBetween(thing, bottom, top) {\n  return isInteger(thing) && thing >= bottom && thing <= top;\n}\n\n// x % n but takes the sign of n instead of x\nexport function floorMod(x, n) {\n  return x - n * Math.floor(x / n);\n}\n\nexport function padStart(input, n = 2) {\n  const isNeg = input < 0;\n  let padded;\n  if (isNeg) {\n    padded = \"-\" + (\"\" + -input).padStart(n, \"0\");\n  } else {\n    padded = (\"\" + input).padStart(n, \"0\");\n  }\n  return padded;\n}\n\nexport function parseInteger(string) {\n  if (isUndefined(string) || string === null || string === \"\") {\n    return undefined;\n  } else {\n    return parseInt(string, 10);\n  }\n}\n\nexport function parseFloating(string) {\n  if (isUndefined(string) || string === null || string === \"\") {\n    return undefined;\n  } else {\n    return parseFloat(string);\n  }\n}\n\nexport function parseMillis(fraction) {\n  // Return undefined (instead of 0) in these cases, where fraction is not set\n  if (isUndefined(fraction) || fraction === null || fraction === \"\") {\n    return undefined;\n  } else {\n    const f = parseFloat(\"0.\" + fraction) * 1000;\n    return Math.floor(f);\n  }\n}\n\nexport function roundTo(number, digits, towardZero = false) {\n  const factor = 10 ** digits,\n    rounder = towardZero ? Math.trunc : Math.round;\n  return rounder(number * factor) / factor;\n}\n\n// DATE BASICS\n\nexport function isLeapYear(year) {\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\n\nexport function daysInYear(year) {\n  return isLeapYear(year) ? 366 : 365;\n}\n\nexport function daysInMonth(year, month) {\n  const modMonth = floorMod(month - 1, 12) + 1,\n    modYear = year + (month - modMonth) / 12;\n\n  if (modMonth === 2) {\n    return isLeapYear(modYear) ? 29 : 28;\n  } else {\n    return [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][modMonth - 1];\n  }\n}\n\n// convert a calendar object to a local timestamp (epoch, but with the offset baked in)\nexport function objToLocalTS(obj) {\n  let d = Date.UTC(\n    obj.year,\n    obj.month - 1,\n    obj.day,\n    obj.hour,\n    obj.minute,\n    obj.second,\n    obj.millisecond\n  );\n\n  // for legacy reasons, years between 0 and 99 are interpreted as 19XX; revert that\n  if (obj.year < 100 && obj.year >= 0) {\n    d = new Date(d);\n    // set the month and day again, this is necessary because year 2000 is a leap year, but year 100 is not\n    // so if obj.year is in 99, but obj.day makes it roll over into year 100,\n    // the calculations done by Date.UTC are using year 2000 - which is incorrect\n    d.setUTCFullYear(obj.year, obj.month - 1, obj.day);\n  }\n  return +d;\n}\n\n// adapted from moment.js: https://github.com/moment/moment/blob/000ac1800e620f770f4eb31b5ae908f6167b0ab2/src/lib/units/week-calendar-utils.js\nfunction firstWeekOffset(year, minDaysInFirstWeek, startOfWeek) {\n  const fwdlw = isoWeekdayToLocal(dayOfWeek(year, 1, minDaysInFirstWeek), startOfWeek);\n  return -fwdlw + minDaysInFirstWeek - 1;\n}\n\nexport function weeksInWeekYear(weekYear, minDaysInFirstWeek = 4, startOfWeek = 1) {\n  const weekOffset = firstWeekOffset(weekYear, minDaysInFirstWeek, startOfWeek);\n  const weekOffsetNext = firstWeekOffset(weekYear + 1, minDaysInFirstWeek, startOfWeek);\n  return (daysInYear(weekYear) - weekOffset + weekOffsetNext) / 7;\n}\n\nexport function untruncateYear(year) {\n  if (year > 99) {\n    return year;\n  } else return year > Settings.twoDigitCutoffYear ? 1900 + year : 2000 + year;\n}\n\n// PARSING\n\nexport function parseZoneInfo(ts, offsetFormat, locale, timeZone = null) {\n  const date = new Date(ts),\n    intlOpts = {\n      hourCycle: \"h23\",\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    };\n\n  if (timeZone) {\n    intlOpts.timeZone = timeZone;\n  }\n\n  const modified = { timeZoneName: offsetFormat, ...intlOpts };\n\n  const parsed = new Intl.DateTimeFormat(locale, modified)\n    .formatToParts(date)\n    .find((m) => m.type.toLowerCase() === \"timezonename\");\n  return parsed ? parsed.value : null;\n}\n\n// signedOffset('-5', '30') -> -330\nexport function signedOffset(offHourStr, offMinuteStr) {\n  let offHour = parseInt(offHourStr, 10);\n\n  // don't || this because we want to preserve -0\n  if (Number.isNaN(offHour)) {\n    offHour = 0;\n  }\n\n  const offMin = parseInt(offMinuteStr, 10) || 0,\n    offMinSigned = offHour < 0 || Object.is(offHour, -0) ? -offMin : offMin;\n  return offHour * 60 + offMinSigned;\n}\n\n// COERCION\n\nexport function asNumber(value) {\n  const numericValue = Number(value);\n  if (typeof value === \"boolean\" || value === \"\" || Number.isNaN(numericValue))\n    throw new InvalidArgumentError(`Invalid unit value ${value}`);\n  return numericValue;\n}\n\nexport function normalizeObject(obj, normalizer) {\n  const normalized = {};\n  for (const u in obj) {\n    if (hasOwnProperty(obj, u)) {\n      const v = obj[u];\n      if (v === undefined || v === null) continue;\n      normalized[normalizer(u)] = asNumber(v);\n    }\n  }\n  return normalized;\n}\n\nexport function formatOffset(offset, format) {\n  const hours = Math.trunc(Math.abs(offset / 60)),\n    minutes = Math.trunc(Math.abs(offset % 60)),\n    sign = offset >= 0 ? \"+\" : \"-\";\n\n  switch (format) {\n    case \"short\":\n      return `${sign}${padStart(hours, 2)}:${padStart(minutes, 2)}`;\n    case \"narrow\":\n      return `${sign}${hours}${minutes > 0 ? `:${minutes}` : \"\"}`;\n    case \"techie\":\n      return `${sign}${padStart(hours, 2)}${padStart(minutes, 2)}`;\n    default:\n      throw new RangeError(`Value format ${format} is out of range for property format`);\n  }\n}\n\nexport function timeObject(obj) {\n  return pick(obj, [\"hour\", \"minute\", \"second\", \"millisecond\"]);\n}\n","import * as Formats from \"./formats.js\";\nimport { pick } from \"./util.js\";\n\nfunction stringify(obj) {\n  return JSON.stringify(obj, Object.keys(obj).sort());\n}\n\n/**\n * @private\n */\n\nexport const monthsLong = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\",\n];\n\nexport const monthsShort = [\n  \"Jan\",\n  \"Feb\",\n  \"Mar\",\n  \"Apr\",\n  \"May\",\n  \"Jun\",\n  \"Jul\",\n  \"Aug\",\n  \"Sep\",\n  \"Oct\",\n  \"Nov\",\n  \"Dec\",\n];\n\nexport const monthsNarrow = [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"];\n\nexport function months(length) {\n  switch (length) {\n    case \"narrow\":\n      return [...monthsNarrow];\n    case \"short\":\n      return [...monthsShort];\n    case \"long\":\n      return [...monthsLong];\n    case \"numeric\":\n      return [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"];\n    case \"2-digit\":\n      return [\"01\", \"02\", \"03\", \"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\", \"11\", \"12\"];\n    default:\n      return null;\n  }\n}\n\nexport const weekdaysLong = [\n  \"Monday\",\n  \"Tuesday\",\n  \"Wednesday\",\n  \"Thursday\",\n  \"Friday\",\n  \"Saturday\",\n  \"Sunday\",\n];\n\nexport const weekdaysShort = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\nexport const weekdaysNarrow = [\"M\", \"T\", \"W\", \"T\", \"F\", \"S\", \"S\"];\n\nexport function weekdays(length) {\n  switch (length) {\n    case \"narrow\":\n      return [...weekdaysNarrow];\n    case \"short\":\n      return [...weekdaysShort];\n    case \"long\":\n      return [...weekdaysLong];\n    case \"numeric\":\n      return [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"];\n    default:\n      return null;\n  }\n}\n\nexport const meridiems = [\"AM\", \"PM\"];\n\nexport const erasLong = [\"Before Christ\", \"Anno Domini\"];\n\nexport const erasShort = [\"BC\", \"AD\"];\n\nexport const erasNarrow = [\"B\", \"A\"];\n\nexport function eras(length) {\n  switch (length) {\n    case \"narrow\":\n      return [...erasNarrow];\n    case \"short\":\n      return [...erasShort];\n    case \"long\":\n      return [...erasLong];\n    default:\n      return null;\n  }\n}\n\nexport function meridiemForDateTime(dt) {\n  return meridiems[dt.hour < 12 ? 0 : 1];\n}\n\nexport function weekdayForDateTime(dt, length) {\n  return weekdays(length)[dt.weekday - 1];\n}\n\nexport function monthForDateTime(dt, length) {\n  return months(length)[dt.month - 1];\n}\n\nexport function eraForDateTime(dt, length) {\n  return eras(length)[dt.year < 0 ? 0 : 1];\n}\n\nexport function formatRelativeTime(unit, count, numeric = \"always\", narrow = false) {\n  const units = {\n    years: [\"year\", \"yr.\"],\n    quarters: [\"quarter\", \"qtr.\"],\n    months: [\"month\", \"mo.\"],\n    weeks: [\"week\", \"wk.\"],\n    days: [\"day\", \"day\", \"days\"],\n    hours: [\"hour\", \"hr.\"],\n    minutes: [\"minute\", \"min.\"],\n    seconds: [\"second\", \"sec.\"],\n  };\n\n  const lastable = [\"hours\", \"minutes\", \"seconds\"].indexOf(unit) === -1;\n\n  if (numeric === \"auto\" && lastable) {\n    const isDay = unit === \"days\";\n    switch (count) {\n      case 1:\n        return isDay ? \"tomorrow\" : `next ${units[unit][0]}`;\n      case -1:\n        return isDay ? \"yesterday\" : `last ${units[unit][0]}`;\n      case 0:\n        return isDay ? \"today\" : `this ${units[unit][0]}`;\n      default: // fall through\n    }\n  }\n\n  const isInPast = Object.is(count, -0) || count < 0,\n    fmtValue = Math.abs(count),\n    singular = fmtValue === 1,\n    lilUnits = units[unit],\n    fmtUnit = narrow\n      ? singular\n        ? lilUnits[1]\n        : lilUnits[2] || lilUnits[1]\n      : singular\n      ? units[unit][0]\n      : unit;\n  return isInPast ? `${fmtValue} ${fmtUnit} ago` : `in ${fmtValue} ${fmtUnit}`;\n}\n\nexport function formatString(knownFormat) {\n  // these all have the offsets removed because we don't have access to them\n  // without all the intl stuff this is backfilling\n  const filtered = pick(knownFormat, [\n      \"weekday\",\n      \"era\",\n      \"year\",\n      \"month\",\n      \"day\",\n      \"hour\",\n      \"minute\",\n      \"second\",\n      \"timeZoneName\",\n      \"hourCycle\",\n    ]),\n    key = stringify(filtered),\n    dateTimeHuge = \"EEEE, LLLL d, yyyy, h:mm a\";\n  switch (key) {\n    case stringify(Formats.DATE_SHORT):\n      return \"M/d/yyyy\";\n    case stringify(Formats.DATE_MED):\n      return \"LLL d, yyyy\";\n    case stringify(Formats.DATE_MED_WITH_WEEKDAY):\n      return \"EEE, LLL d, yyyy\";\n    case stringify(Formats.DATE_FULL):\n      return \"LLLL d, yyyy\";\n    case stringify(Formats.DATE_HUGE):\n      return \"EEEE, LLLL d, yyyy\";\n    case stringify(Formats.TIME_SIMPLE):\n      return \"h:mm a\";\n    case stringify(Formats.TIME_WITH_SECONDS):\n      return \"h:mm:ss a\";\n    case stringify(Formats.TIME_WITH_SHORT_OFFSET):\n      return \"h:mm a\";\n    case stringify(Formats.TIME_WITH_LONG_OFFSET):\n      return \"h:mm a\";\n    case stringify(Formats.TIME_24_SIMPLE):\n      return \"HH:mm\";\n    case stringify(Formats.TIME_24_WITH_SECONDS):\n      return \"HH:mm:ss\";\n    case stringify(Formats.TIME_24_WITH_SHORT_OFFSET):\n      return \"HH:mm\";\n    case stringify(Formats.TIME_24_WITH_LONG_OFFSET):\n      return \"HH:mm\";\n    case stringify(Formats.DATETIME_SHORT):\n      return \"M/d/yyyy, h:mm a\";\n    case stringify(Formats.DATETIME_MED):\n      return \"LLL d, yyyy, h:mm a\";\n    case stringify(Formats.DATETIME_FULL):\n      return \"LLLL d, yyyy, h:mm a\";\n    case stringify(Formats.DATETIME_HUGE):\n      return dateTimeHuge;\n    case stringify(Formats.DATETIME_SHORT_WITH_SECONDS):\n      return \"M/d/yyyy, h:mm:ss a\";\n    case stringify(Formats.DATETIME_MED_WITH_SECONDS):\n      return \"LLL d, yyyy, h:mm:ss a\";\n    case stringify(Formats.DATETIME_MED_WITH_WEEKDAY):\n      return \"EEE, d LLL yyyy, h:mm a\";\n    case stringify(Formats.DATETIME_FULL_WITH_SECONDS):\n      return \"LLLL d, yyyy, h:mm:ss a\";\n    case stringify(Formats.DATETIME_HUGE_WITH_SECONDS):\n      return \"EEEE, LLLL d, yyyy, h:mm:ss a\";\n    default:\n      return dateTimeHuge;\n  }\n}\n","import * as English from \"./english.js\";\nimport * as Formats from \"./formats.js\";\nimport { padStart } from \"./util.js\";\n\nfunction stringifyTokens(splits, tokenToString) {\n  let s = \"\";\n  for (const token of splits) {\n    if (token.literal) {\n      s += token.val;\n    } else {\n      s += tokenToString(token.val);\n    }\n  }\n  return s;\n}\n\nconst macroTokenToFormatOpts = {\n  D: Formats.DATE_SHORT,\n  DD: Formats.DATE_MED,\n  DDD: Formats.DATE_FULL,\n  DDDD: Formats.DATE_HUGE,\n  t: Formats.TIME_SIMPLE,\n  tt: Formats.TIME_WITH_SECONDS,\n  ttt: Formats.TIME_WITH_SHORT_OFFSET,\n  tttt: Formats.TIME_WITH_LONG_OFFSET,\n  T: Formats.TIME_24_SIMPLE,\n  TT: Formats.TIME_24_WITH_SECONDS,\n  TTT: Formats.TIME_24_WITH_SHORT_OFFSET,\n  TTTT: Formats.TIME_24_WITH_LONG_OFFSET,\n  f: Formats.DATETIME_SHORT,\n  ff: Formats.DATETIME_MED,\n  fff: Formats.DATETIME_FULL,\n  ffff: Formats.DATETIME_HUGE,\n  F: Formats.DATETIME_SHORT_WITH_SECONDS,\n  FF: Formats.DATETIME_MED_WITH_SECONDS,\n  FFF: Formats.DATETIME_FULL_WITH_SECONDS,\n  FFFF: Formats.DATETIME_HUGE_WITH_SECONDS,\n};\n\n/**\n * @private\n */\n\nexport default class Formatter {\n  static create(locale, opts = {}) {\n    return new Formatter(locale, opts);\n  }\n\n  static parseFormat(fmt) {\n    // white-space is always considered a literal in user-provided formats\n    // the \" \" token has a special meaning (see unitForToken)\n\n    let current = null,\n      currentFull = \"\",\n      bracketed = false;\n    const splits = [];\n    for (let i = 0; i < fmt.length; i++) {\n      const c = fmt.charAt(i);\n      if (c === \"'\") {\n        if (currentFull.length > 0) {\n          splits.push({ literal: bracketed || /^\\s+$/.test(currentFull), val: currentFull });\n        }\n        current = null;\n        currentFull = \"\";\n        bracketed = !bracketed;\n      } else if (bracketed) {\n        currentFull += c;\n      } else if (c === current) {\n        currentFull += c;\n      } else {\n        if (currentFull.length > 0) {\n          splits.push({ literal: /^\\s+$/.test(currentFull), val: currentFull });\n        }\n        currentFull = c;\n        current = c;\n      }\n    }\n\n    if (currentFull.length > 0) {\n      splits.push({ literal: bracketed || /^\\s+$/.test(currentFull), val: currentFull });\n    }\n\n    return splits;\n  }\n\n  static macroTokenToFormatOpts(token) {\n    return macroTokenToFormatOpts[token];\n  }\n\n  constructor(locale, formatOpts) {\n    this.opts = formatOpts;\n    this.loc = locale;\n    this.systemLoc = null;\n  }\n\n  formatWithSystemDefault(dt, opts) {\n    if (this.systemLoc === null) {\n      this.systemLoc = this.loc.redefaultToSystem();\n    }\n    const df = this.systemLoc.dtFormatter(dt, { ...this.opts, ...opts });\n    return df.format();\n  }\n\n  dtFormatter(dt, opts = {}) {\n    return this.loc.dtFormatter(dt, { ...this.opts, ...opts });\n  }\n\n  formatDateTime(dt, opts) {\n    return this.dtFormatter(dt, opts).format();\n  }\n\n  formatDateTimeParts(dt, opts) {\n    return this.dtFormatter(dt, opts).formatToParts();\n  }\n\n  formatInterval(interval, opts) {\n    const df = this.dtFormatter(interval.start, opts);\n    return df.dtf.formatRange(interval.start.toJSDate(), interval.end.toJSDate());\n  }\n\n  resolvedOptions(dt, opts) {\n    return this.dtFormatter(dt, opts).resolvedOptions();\n  }\n\n  num(n, p = 0) {\n    // we get some perf out of doing this here, annoyingly\n    if (this.opts.forceSimple) {\n      return padStart(n, p);\n    }\n\n    const opts = { ...this.opts };\n\n    if (p > 0) {\n      opts.padTo = p;\n    }\n\n    return this.loc.numberFormatter(opts).format(n);\n  }\n\n  formatDateTimeFromString(dt, fmt) {\n    const knownEnglish = this.loc.listingMode() === \"en\",\n      useDateTimeFormatter = this.loc.outputCalendar && this.loc.outputCalendar !== \"gregory\",\n      string = (opts, extract) => this.loc.extract(dt, opts, extract),\n      formatOffset = (opts) => {\n        if (dt.isOffsetFixed && dt.offset === 0 && opts.allowZ) {\n          return \"Z\";\n        }\n\n        return dt.isValid ? dt.zone.formatOffset(dt.ts, opts.format) : \"\";\n      },\n      meridiem = () =>\n        knownEnglish\n          ? English.meridiemForDateTime(dt)\n          : string({ hour: \"numeric\", hourCycle: \"h12\" }, \"dayperiod\"),\n      month = (length, standalone) =>\n        knownEnglish\n          ? English.monthForDateTime(dt, length)\n          : string(standalone ? { month: length } : { month: length, day: \"numeric\" }, \"month\"),\n      weekday = (length, standalone) =>\n        knownEnglish\n          ? English.weekdayForDateTime(dt, length)\n          : string(\n              standalone ? { weekday: length } : { weekday: length, month: \"long\", day: \"numeric\" },\n              \"weekday\"\n            ),\n      maybeMacro = (token) => {\n        const formatOpts = Formatter.macroTokenToFormatOpts(token);\n        if (formatOpts) {\n          return this.formatWithSystemDefault(dt, formatOpts);\n        } else {\n          return token;\n        }\n      },\n      era = (length) =>\n        knownEnglish ? English.eraForDateTime(dt, length) : string({ era: length }, \"era\"),\n      tokenToString = (token) => {\n        // Where possible: https://cldr.unicode.org/translation/date-time/date-time-symbols\n        switch (token) {\n          // ms\n          case \"S\":\n            return this.num(dt.millisecond);\n          case \"u\":\n          // falls through\n          case \"SSS\":\n            return this.num(dt.millisecond, 3);\n          // seconds\n          case \"s\":\n            return this.num(dt.second);\n          case \"ss\":\n            return this.num(dt.second, 2);\n          // fractional seconds\n          case \"uu\":\n            return this.num(Math.floor(dt.millisecond / 10), 2);\n          case \"uuu\":\n            return this.num(Math.floor(dt.millisecond / 100));\n          // minutes\n          case \"m\":\n            return this.num(dt.minute);\n          case \"mm\":\n            return this.num(dt.minute, 2);\n          // hours\n          case \"h\":\n            return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12);\n          case \"hh\":\n            return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12, 2);\n          case \"H\":\n            return this.num(dt.hour);\n          case \"HH\":\n            return this.num(dt.hour, 2);\n          // offset\n          case \"Z\":\n            // like +6\n            return formatOffset({ format: \"narrow\", allowZ: this.opts.allowZ });\n          case \"ZZ\":\n            // like +06:00\n            return formatOffset({ format: \"short\", allowZ: this.opts.allowZ });\n          case \"ZZZ\":\n            // like +0600\n            return formatOffset({ format: \"techie\", allowZ: this.opts.allowZ });\n          case \"ZZZZ\":\n            // like EST\n            return dt.zone.offsetName(dt.ts, { format: \"short\", locale: this.loc.locale });\n          case \"ZZZZZ\":\n            // like Eastern Standard Time\n            return dt.zone.offsetName(dt.ts, { format: \"long\", locale: this.loc.locale });\n          // zone\n          case \"z\":\n            // like America/New_York\n            return dt.zoneName;\n          // meridiems\n          case \"a\":\n            return meridiem();\n          // dates\n          case \"d\":\n            return useDateTimeFormatter ? string({ day: \"numeric\" }, \"day\") : this.num(dt.day);\n          case \"dd\":\n            return useDateTimeFormatter ? string({ day: \"2-digit\" }, \"day\") : this.num(dt.day, 2);\n          // weekdays - standalone\n          case \"c\":\n            // like 1\n            return this.num(dt.weekday);\n          case \"ccc\":\n            // like 'Tues'\n            return weekday(\"short\", true);\n          case \"cccc\":\n            // like 'Tuesday'\n            return weekday(\"long\", true);\n          case \"ccccc\":\n            // like 'T'\n            return weekday(\"narrow\", true);\n          // weekdays - format\n          case \"E\":\n            // like 1\n            return this.num(dt.weekday);\n          case \"EEE\":\n            // like 'Tues'\n            return weekday(\"short\", false);\n          case \"EEEE\":\n            // like 'Tuesday'\n            return weekday(\"long\", false);\n          case \"EEEEE\":\n            // like 'T'\n            return weekday(\"narrow\", false);\n          // months - standalone\n          case \"L\":\n            // like 1\n            return useDateTimeFormatter\n              ? string({ month: \"numeric\", day: \"numeric\" }, \"month\")\n              : this.num(dt.month);\n          case \"LL\":\n            // like 01, doesn't seem to work\n            return useDateTimeFormatter\n              ? string({ month: \"2-digit\", day: \"numeric\" }, \"month\")\n              : this.num(dt.month, 2);\n          case \"LLL\":\n            // like Jan\n            return month(\"short\", true);\n          case \"LLLL\":\n            // like January\n            return month(\"long\", true);\n          case \"LLLLL\":\n            // like J\n            return month(\"narrow\", true);\n          // months - format\n          case \"M\":\n            // like 1\n            return useDateTimeFormatter\n              ? string({ month: \"numeric\" }, \"month\")\n              : this.num(dt.month);\n          case \"MM\":\n            // like 01\n            return useDateTimeFormatter\n              ? string({ month: \"2-digit\" }, \"month\")\n              : this.num(dt.month, 2);\n          case \"MMM\":\n            // like Jan\n            return month(\"short\", false);\n          case \"MMMM\":\n            // like January\n            return month(\"long\", false);\n          case \"MMMMM\":\n            // like J\n            return month(\"narrow\", false);\n          // years\n          case \"y\":\n            // like 2014\n            return useDateTimeFormatter ? string({ year: \"numeric\" }, \"year\") : this.num(dt.year);\n          case \"yy\":\n            // like 14\n            return useDateTimeFormatter\n              ? string({ year: \"2-digit\" }, \"year\")\n              : this.num(dt.year.toString().slice(-2), 2);\n          case \"yyyy\":\n            // like 0012\n            return useDateTimeFormatter\n              ? string({ year: \"numeric\" }, \"year\")\n              : this.num(dt.year, 4);\n          case \"yyyyyy\":\n            // like 000012\n            return useDateTimeFormatter\n              ? string({ year: \"numeric\" }, \"year\")\n              : this.num(dt.year, 6);\n          // eras\n          case \"G\":\n            // like AD\n            return era(\"short\");\n          case \"GG\":\n            // like Anno Domini\n            return era(\"long\");\n          case \"GGGGG\":\n            return era(\"narrow\");\n          case \"kk\":\n            return this.num(dt.weekYear.toString().slice(-2), 2);\n          case \"kkkk\":\n            return this.num(dt.weekYear, 4);\n          case \"W\":\n            return this.num(dt.weekNumber);\n          case \"WW\":\n            return this.num(dt.weekNumber, 2);\n          case \"n\":\n            return this.num(dt.localWeekNumber);\n          case \"nn\":\n            return this.num(dt.localWeekNumber, 2);\n          case \"ii\":\n            return this.num(dt.localWeekYear.toString().slice(-2), 2);\n          case \"iiii\":\n            return this.num(dt.localWeekYear, 4);\n          case \"o\":\n            return this.num(dt.ordinal);\n          case \"ooo\":\n            return this.num(dt.ordinal, 3);\n          case \"q\":\n            // like 1\n            return this.num(dt.quarter);\n          case \"qq\":\n            // like 01\n            return this.num(dt.quarter, 2);\n          case \"X\":\n            return this.num(Math.floor(dt.ts / 1000));\n          case \"x\":\n            return this.num(dt.ts);\n          default:\n            return maybeMacro(token);\n        }\n      };\n\n    return stringifyTokens(Formatter.parseFormat(fmt), tokenToString);\n  }\n\n  formatDurationFromString(dur, fmt) {\n    const tokenToField = (token) => {\n        switch (token[0]) {\n          case \"S\":\n            return \"millisecond\";\n          case \"s\":\n            return \"second\";\n          case \"m\":\n            return \"minute\";\n          case \"h\":\n            return \"hour\";\n          case \"d\":\n            return \"day\";\n          case \"w\":\n            return \"week\";\n          case \"M\":\n            return \"month\";\n          case \"y\":\n            return \"year\";\n          default:\n            return null;\n        }\n      },\n      tokenToString = (lildur) => (token) => {\n        const mapped = tokenToField(token);\n        if (mapped) {\n          return this.num(lildur.get(mapped), token.length);\n        } else {\n          return token;\n        }\n      },\n      tokens = Formatter.parseFormat(fmt),\n      realTokens = tokens.reduce(\n        (found, { literal, val }) => (literal ? found : found.concat(val)),\n        []\n      ),\n      collapsed = dur.shiftTo(...realTokens.map(tokenToField).filter((t) => t));\n    return stringifyTokens(tokens, tokenToString(collapsed));\n  }\n}\n","import {\n  untruncateYear,\n  signedOffset,\n  parseInteger,\n  parseMillis,\n  isUndefined,\n  parseFloating,\n} from \"./util.js\";\nimport * as English from \"./english.js\";\nimport FixedOffsetZone from \"../zones/fixedOffsetZone.js\";\nimport IANAZone from \"../zones/IANAZone.js\";\n\n/*\n * This file handles parsing for well-specified formats. Here's how it works:\n * Two things go into parsing: a regex to match with and an extractor to take apart the groups in the match.\n * An extractor is just a function that takes a regex match array and returns a { year: ..., month: ... } object\n * parse() does the work of executing the regex and applying the extractor. It takes multiple regex/extractor pairs to try in sequence.\n * Extractors can take a \"cursor\" representing the offset in the match to look at. This makes it easy to combine extractors.\n * combineExtractors() does the work of combining them, keeping track of the cursor through multiple extractions.\n * Some extractions are super dumb and simpleParse and fromStrings help DRY them.\n */\n\nconst ianaRegex = /[A-Za-z_+-]{1,256}(?::?\\/[A-Za-z0-9_+-]{1,256}(?:\\/[A-Za-z0-9_+-]{1,256})?)?/;\n\nfunction combineRegexes(...regexes) {\n  const full = regexes.reduce((f, r) => f + r.source, \"\");\n  return RegExp(`^${full}$`);\n}\n\nfunction combineExtractors(...extractors) {\n  return (m) =>\n    extractors\n      .reduce(\n        ([mergedVals, mergedZone, cursor], ex) => {\n          const [val, zone, next] = ex(m, cursor);\n          return [{ ...mergedVals, ...val }, zone || mergedZone, next];\n        },\n        [{}, null, 1]\n      )\n      .slice(0, 2);\n}\n\nfunction parse(s, ...patterns) {\n  if (s == null) {\n    return [null, null];\n  }\n\n  for (const [regex, extractor] of patterns) {\n    const m = regex.exec(s);\n    if (m) {\n      return extractor(m);\n    }\n  }\n  return [null, null];\n}\n\nfunction simpleParse(...keys) {\n  return (match, cursor) => {\n    const ret = {};\n    let i;\n\n    for (i = 0; i < keys.length; i++) {\n      ret[keys[i]] = parseInteger(match[cursor + i]);\n    }\n    return [ret, null, cursor + i];\n  };\n}\n\n// ISO and SQL parsing\nconst offsetRegex = /(?:(Z)|([+-]\\d\\d)(?::?(\\d\\d))?)/;\nconst isoExtendedZone = `(?:${offsetRegex.source}?(?:\\\\[(${ianaRegex.source})\\\\])?)?`;\nconst isoTimeBaseRegex = /(\\d\\d)(?::?(\\d\\d)(?::?(\\d\\d)(?:[.,](\\d{1,30}))?)?)?/;\nconst isoTimeRegex = RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`);\nconst isoTimeExtensionRegex = RegExp(`(?:T${isoTimeRegex.source})?`);\nconst isoYmdRegex = /([+-]\\d{6}|\\d{4})(?:-?(\\d\\d)(?:-?(\\d\\d))?)?/;\nconst isoWeekRegex = /(\\d{4})-?W(\\d\\d)(?:-?(\\d))?/;\nconst isoOrdinalRegex = /(\\d{4})-?(\\d{3})/;\nconst extractISOWeekData = simpleParse(\"weekYear\", \"weekNumber\", \"weekDay\");\nconst extractISOOrdinalData = simpleParse(\"year\", \"ordinal\");\nconst sqlYmdRegex = /(\\d{4})-(\\d\\d)-(\\d\\d)/; // dumbed-down version of the ISO one\nconst sqlTimeRegex = RegExp(\n  `${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`\n);\nconst sqlTimeExtensionRegex = RegExp(`(?: ${sqlTimeRegex.source})?`);\n\nfunction int(match, pos, fallback) {\n  const m = match[pos];\n  return isUndefined(m) ? fallback : parseInteger(m);\n}\n\nfunction extractISOYmd(match, cursor) {\n  const item = {\n    year: int(match, cursor),\n    month: int(match, cursor + 1, 1),\n    day: int(match, cursor + 2, 1),\n  };\n\n  return [item, null, cursor + 3];\n}\n\nfunction extractISOTime(match, cursor) {\n  const item = {\n    hours: int(match, cursor, 0),\n    minutes: int(match, cursor + 1, 0),\n    seconds: int(match, cursor + 2, 0),\n    milliseconds: parseMillis(match[cursor + 3]),\n  };\n\n  return [item, null, cursor + 4];\n}\n\nfunction extractISOOffset(match, cursor) {\n  const local = !match[cursor] && !match[cursor + 1],\n    fullOffset = signedOffset(match[cursor + 1], match[cursor + 2]),\n    zone = local ? null : FixedOffsetZone.instance(fullOffset);\n  return [{}, zone, cursor + 3];\n}\n\nfunction extractIANAZone(match, cursor) {\n  const zone = match[cursor] ? IANAZone.create(match[cursor]) : null;\n  return [{}, zone, cursor + 1];\n}\n\n// ISO time parsing\n\nconst isoTimeOnly = RegExp(`^T?${isoTimeBaseRegex.source}$`);\n\n// ISO duration parsing\n\nconst isoDuration =\n  /^-?P(?:(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)Y)?(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)M)?(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)W)?(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)D)?(?:T(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)H)?(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)M)?(?:(-?\\d{1,20})(?:[.,](-?\\d{1,20}))?S)?)?)$/;\n\nfunction extractISODuration(match) {\n  const [s, yearStr, monthStr, weekStr, dayStr, hourStr, minuteStr, secondStr, millisecondsStr] =\n    match;\n\n  const hasNegativePrefix = s[0] === \"-\";\n  const negativeSeconds = secondStr && secondStr[0] === \"-\";\n\n  const maybeNegate = (num, force = false) =>\n    num !== undefined && (force || (num && hasNegativePrefix)) ? -num : num;\n\n  return [\n    {\n      years: maybeNegate(parseFloating(yearStr)),\n      months: maybeNegate(parseFloating(monthStr)),\n      weeks: maybeNegate(parseFloating(weekStr)),\n      days: maybeNegate(parseFloating(dayStr)),\n      hours: maybeNegate(parseFloating(hourStr)),\n      minutes: maybeNegate(parseFloating(minuteStr)),\n      seconds: maybeNegate(parseFloating(secondStr), secondStr === \"-0\"),\n      milliseconds: maybeNegate(parseMillis(millisecondsStr), negativeSeconds),\n    },\n  ];\n}\n\n// These are a little braindead. EDT *should* tell us that we're in, say, America/New_York\n// and not just that we're in -240 *right now*. But since I don't think these are used that often\n// I'm just going to ignore that\nconst obsOffsets = {\n  GMT: 0,\n  EDT: -4 * 60,\n  EST: -5 * 60,\n  CDT: -5 * 60,\n  CST: -6 * 60,\n  MDT: -6 * 60,\n  MST: -7 * 60,\n  PDT: -7 * 60,\n  PST: -8 * 60,\n};\n\nfunction fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {\n  const result = {\n    year: yearStr.length === 2 ? untruncateYear(parseInteger(yearStr)) : parseInteger(yearStr),\n    month: English.monthsShort.indexOf(monthStr) + 1,\n    day: parseInteger(dayStr),\n    hour: parseInteger(hourStr),\n    minute: parseInteger(minuteStr),\n  };\n\n  if (secondStr) result.second = parseInteger(secondStr);\n  if (weekdayStr) {\n    result.weekday =\n      weekdayStr.length > 3\n        ? English.weekdaysLong.indexOf(weekdayStr) + 1\n        : English.weekdaysShort.indexOf(weekdayStr) + 1;\n  }\n\n  return result;\n}\n\n// RFC 2822/5322\nconst rfc2822 =\n  /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\\d\\d)(\\d\\d)))$/;\n\nfunction extractRFC2822(match) {\n  const [\n      ,\n      weekdayStr,\n      dayStr,\n      monthStr,\n      yearStr,\n      hourStr,\n      minuteStr,\n      secondStr,\n      obsOffset,\n      milOffset,\n      offHourStr,\n      offMinuteStr,\n    ] = match,\n    result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);\n\n  let offset;\n  if (obsOffset) {\n    offset = obsOffsets[obsOffset];\n  } else if (milOffset) {\n    offset = 0;\n  } else {\n    offset = signedOffset(offHourStr, offMinuteStr);\n  }\n\n  return [result, new FixedOffsetZone(offset)];\n}\n\nfunction preprocessRFC2822(s) {\n  // Remove comments and folding whitespace and replace multiple-spaces with a single space\n  return s\n    .replace(/\\([^()]*\\)|[\\n\\t]/g, \" \")\n    .replace(/(\\s\\s+)/g, \" \")\n    .trim();\n}\n\n// http date\n\nconst rfc1123 =\n    /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\\d\\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\\d{4}) (\\d\\d):(\\d\\d):(\\d\\d) GMT$/,\n  rfc850 =\n    /^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\\d\\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\\d\\d) (\\d\\d):(\\d\\d):(\\d\\d) GMT$/,\n  ascii =\n    /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \\d|\\d\\d) (\\d\\d):(\\d\\d):(\\d\\d) (\\d{4})$/;\n\nfunction extractRFC1123Or850(match) {\n  const [, weekdayStr, dayStr, monthStr, yearStr, hourStr, minuteStr, secondStr] = match,\n    result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);\n  return [result, FixedOffsetZone.utcInstance];\n}\n\nfunction extractASCII(match) {\n  const [, weekdayStr, monthStr, dayStr, hourStr, minuteStr, secondStr, yearStr] = match,\n    result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);\n  return [result, FixedOffsetZone.utcInstance];\n}\n\nconst isoYmdWithTimeExtensionRegex = combineRegexes(isoYmdRegex, isoTimeExtensionRegex);\nconst isoWeekWithTimeExtensionRegex = combineRegexes(isoWeekRegex, isoTimeExtensionRegex);\nconst isoOrdinalWithTimeExtensionRegex = combineRegexes(isoOrdinalRegex, isoTimeExtensionRegex);\nconst isoTimeCombinedRegex = combineRegexes(isoTimeRegex);\n\nconst extractISOYmdTimeAndOffset = combineExtractors(\n  extractISOYmd,\n  extractISOTime,\n  extractISOOffset,\n  extractIANAZone\n);\nconst extractISOWeekTimeAndOffset = combineExtractors(\n  extractISOWeekData,\n  extractISOTime,\n  extractISOOffset,\n  extractIANAZone\n);\nconst extractISOOrdinalDateAndTime = combineExtractors(\n  extractISOOrdinalData,\n  extractISOTime,\n  extractISOOffset,\n  extractIANAZone\n);\nconst extractISOTimeAndOffset = combineExtractors(\n  extractISOTime,\n  extractISOOffset,\n  extractIANAZone\n);\n\n/*\n * @private\n */\n\nexport function parseISODate(s) {\n  return parse(\n    s,\n    [isoYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],\n    [isoWeekWithTimeExtensionRegex, extractISOWeekTimeAndOffset],\n    [isoOrdinalWithTimeExtensionRegex, extractISOOrdinalDateAndTime],\n    [isoTimeCombinedRegex, extractISOTimeAndOffset]\n  );\n}\n\nexport function parseRFC2822Date(s) {\n  return parse(preprocessRFC2822(s), [rfc2822, extractRFC2822]);\n}\n\nexport function parseHTTPDate(s) {\n  return parse(\n    s,\n    [rfc1123, extractRFC1123Or850],\n    [rfc850, extractRFC1123Or850],\n    [ascii, extractASCII]\n  );\n}\n\nexport function parseISODuration(s) {\n  return parse(s, [isoDuration, extractISODuration]);\n}\n\nconst extractISOTimeOnly = combineExtractors(extractISOTime);\n\nexport function parseISOTimeOnly(s) {\n  return parse(s, [isoTimeOnly, extractISOTimeOnly]);\n}\n\nconst sqlYmdWithTimeExtensionRegex = combineRegexes(sqlYmdRegex, sqlTimeExtensionRegex);\nconst sqlTimeCombinedRegex = combineRegexes(sqlTimeRegex);\n\nconst extractISOTimeOffsetAndIANAZone = combineExtractors(\n  extractISOTime,\n  extractISOOffset,\n  extractIANAZone\n);\n\nexport function parseSQL(s) {\n  return parse(\n    s,\n    [sqlYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],\n    [sqlTimeCombinedRegex, extractISOTimeOffsetAndIANAZone]\n  );\n}\n","import { InvalidArgumentError, InvalidDurationError, InvalidUnitError } from \"./errors.js\";\nimport Formatter from \"./impl/formatter.js\";\nimport Invalid from \"./impl/invalid.js\";\nimport Locale from \"./impl/locale.js\";\nimport { parseISODuration, parseISOTimeOnly } from \"./impl/regexParser.js\";\nimport {\n  asNumber,\n  hasOwnProperty,\n  isNumber,\n  isUndefined,\n  normalizeObject,\n  roundTo,\n} from \"./impl/util.js\";\nimport Settings from \"./settings.js\";\nimport DateTime from \"./datetime.js\";\n\nconst INVALID = \"Invalid Duration\";\n\n// unit conversion constants\nexport const lowOrderMatrix = {\n    weeks: {\n      days: 7,\n      hours: 7 * 24,\n      minutes: 7 * 24 * 60,\n      seconds: 7 * 24 * 60 * 60,\n      milliseconds: 7 * 24 * 60 * 60 * 1000,\n    },\n    days: {\n      hours: 24,\n      minutes: 24 * 60,\n      seconds: 24 * 60 * 60,\n      milliseconds: 24 * 60 * 60 * 1000,\n    },\n    hours: { minutes: 60, seconds: 60 * 60, milliseconds: 60 * 60 * 1000 },\n    minutes: { seconds: 60, milliseconds: 60 * 1000 },\n    seconds: { milliseconds: 1000 },\n  },\n  casualMatrix = {\n    years: {\n      quarters: 4,\n      months: 12,\n      weeks: 52,\n      days: 365,\n      hours: 365 * 24,\n      minutes: 365 * 24 * 60,\n      seconds: 365 * 24 * 60 * 60,\n      milliseconds: 365 * 24 * 60 * 60 * 1000,\n    },\n    quarters: {\n      months: 3,\n      weeks: 13,\n      days: 91,\n      hours: 91 * 24,\n      minutes: 91 * 24 * 60,\n      seconds: 91 * 24 * 60 * 60,\n      milliseconds: 91 * 24 * 60 * 60 * 1000,\n    },\n    months: {\n      weeks: 4,\n      days: 30,\n      hours: 30 * 24,\n      minutes: 30 * 24 * 60,\n      seconds: 30 * 24 * 60 * 60,\n      milliseconds: 30 * 24 * 60 * 60 * 1000,\n    },\n\n    ...lowOrderMatrix,\n  },\n  daysInYearAccurate = 146097.0 / 400,\n  daysInMonthAccurate = 146097.0 / 4800,\n  accurateMatrix = {\n    years: {\n      quarters: 4,\n      months: 12,\n      weeks: daysInYearAccurate / 7,\n      days: daysInYearAccurate,\n      hours: daysInYearAccurate * 24,\n      minutes: daysInYearAccurate * 24 * 60,\n      seconds: daysInYearAccurate * 24 * 60 * 60,\n      milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1000,\n    },\n    quarters: {\n      months: 3,\n      weeks: daysInYearAccurate / 28,\n      days: daysInYearAccurate / 4,\n      hours: (daysInYearAccurate * 24) / 4,\n      minutes: (daysInYearAccurate * 24 * 60) / 4,\n      seconds: (daysInYearAccurate * 24 * 60 * 60) / 4,\n      milliseconds: (daysInYearAccurate * 24 * 60 * 60 * 1000) / 4,\n    },\n    months: {\n      weeks: daysInMonthAccurate / 7,\n      days: daysInMonthAccurate,\n      hours: daysInMonthAccurate * 24,\n      minutes: daysInMonthAccurate * 24 * 60,\n      seconds: daysInMonthAccurate * 24 * 60 * 60,\n      milliseconds: daysInMonthAccurate * 24 * 60 * 60 * 1000,\n    },\n    ...lowOrderMatrix,\n  };\n\n// units ordered by size\nconst orderedUnits = [\n  \"years\",\n  \"quarters\",\n  \"months\",\n  \"weeks\",\n  \"days\",\n  \"hours\",\n  \"minutes\",\n  \"seconds\",\n  \"milliseconds\",\n];\n\nconst reverseUnits = orderedUnits.slice(0).reverse();\n\n// clone really means \"create another instance just like this one, but with these changes\"\nfunction clone(dur, alts, clear = false) {\n  // deep merge for vals\n  const conf = {\n    values: clear ? alts.values : { ...dur.values, ...(alts.values || {}) },\n    loc: dur.loc.clone(alts.loc),\n    conversionAccuracy: alts.conversionAccuracy || dur.conversionAccuracy,\n    matrix: alts.matrix || dur.matrix,\n  };\n  return new Duration(conf);\n}\n\nfunction durationToMillis(matrix, vals) {\n  let sum = vals.milliseconds ?? 0;\n  for (const unit of reverseUnits.slice(1)) {\n    if (vals[unit]) {\n      sum += vals[unit] * matrix[unit][\"milliseconds\"];\n    }\n  }\n  return sum;\n}\n\n// NB: mutates parameters\nfunction normalizeValues(matrix, vals) {\n  // the logic below assumes the overall value of the duration is positive\n  // if this is not the case, factor is used to make it so\n  const factor = durationToMillis(matrix, vals) < 0 ? -1 : 1;\n\n  orderedUnits.reduceRight((previous, current) => {\n    if (!isUndefined(vals[current])) {\n      if (previous) {\n        const previousVal = vals[previous] * factor;\n        const conv = matrix[current][previous];\n\n        // if (previousVal < 0):\n        // lower order unit is negative (e.g. { years: 2, days: -2 })\n        // normalize this by reducing the higher order unit by the appropriate amount\n        // and increasing the lower order unit\n        // this can never make the higher order unit negative, because this function only operates\n        // on positive durations, so the amount of time represented by the lower order unit cannot\n        // be larger than the higher order unit\n        // else:\n        // lower order unit is positive (e.g. { years: 2, days: 450 } or { years: -2, days: 450 })\n        // in this case we attempt to convert as much as possible from the lower order unit into\n        // the higher order one\n        //\n        // Math.floor takes care of both of these cases, rounding away from 0\n        // if previousVal < 0 it makes the absolute value larger\n        // if previousVal >= it makes the absolute value smaller\n        const rollUp = Math.floor(previousVal / conv);\n        vals[current] += rollUp * factor;\n        vals[previous] -= rollUp * conv * factor;\n      }\n      return current;\n    } else {\n      return previous;\n    }\n  }, null);\n\n  // try to convert any decimals into smaller units if possible\n  // for example for { years: 2.5, days: 0, seconds: 0 } we want to get { years: 2, days: 182, hours: 12 }\n  orderedUnits.reduce((previous, current) => {\n    if (!isUndefined(vals[current])) {\n      if (previous) {\n        const fraction = vals[previous] % 1;\n        vals[previous] -= fraction;\n        vals[current] += fraction * matrix[previous][current];\n      }\n      return current;\n    } else {\n      return previous;\n    }\n  }, null);\n}\n\n// Remove all properties with a value of 0 from an object\nfunction removeZeroes(vals) {\n  const newVals = {};\n  for (const [key, value] of Object.entries(vals)) {\n    if (value !== 0) {\n      newVals[key] = value;\n    }\n  }\n  return newVals;\n}\n\n/**\n * A Duration object represents a period of time, like \"2 months\" or \"1 day, 1 hour\". Conceptually, it's just a map of units to their quantities, accompanied by some additional configuration and methods for creating, parsing, interrogating, transforming, and formatting them. They can be used on their own or in conjunction with other Luxon types; for example, you can use {@link DateTime#plus} to add a Duration object to a DateTime, producing another DateTime.\n *\n * Here is a brief overview of commonly used methods and getters in Duration:\n *\n * * **Creation** To create a Duration, use {@link Duration.fromMillis}, {@link Duration.fromObject}, or {@link Duration.fromISO}.\n * * **Unit values** See the {@link Duration#years}, {@link Duration#months}, {@link Duration#weeks}, {@link Duration#days}, {@link Duration#hours}, {@link Duration#minutes}, {@link Duration#seconds}, {@link Duration#milliseconds} accessors.\n * * **Configuration** See  {@link Duration#locale} and {@link Duration#numberingSystem} accessors.\n * * **Transformation** To create new Durations out of old ones use {@link Duration#plus}, {@link Duration#minus}, {@link Duration#normalize}, {@link Duration#set}, {@link Duration#reconfigure}, {@link Duration#shiftTo}, and {@link Duration#negate}.\n * * **Output** To convert the Duration into other representations, see {@link Duration#as}, {@link Duration#toISO}, {@link Duration#toFormat}, and {@link Duration#toJSON}\n *\n * There's are more methods documented below. In addition, for more information on subtler topics like internationalization and validity, see the external documentation.\n */\nexport default class Duration {\n  /**\n   * @private\n   */\n  constructor(config) {\n    const accurate = config.conversionAccuracy === \"longterm\" || false;\n    let matrix = accurate ? accurateMatrix : casualMatrix;\n\n    if (config.matrix) {\n      matrix = config.matrix;\n    }\n\n    /**\n     * @access private\n     */\n    this.values = config.values;\n    /**\n     * @access private\n     */\n    this.loc = config.loc || Locale.create();\n    /**\n     * @access private\n     */\n    this.conversionAccuracy = accurate ? \"longterm\" : \"casual\";\n    /**\n     * @access private\n     */\n    this.invalid = config.invalid || null;\n    /**\n     * @access private\n     */\n    this.matrix = matrix;\n    /**\n     * @access private\n     */\n    this.isLuxonDuration = true;\n  }\n\n  /**\n   * Create Duration from a number of milliseconds.\n   * @param {number} count of milliseconds\n   * @param {Object} opts - options for parsing\n   * @param {string} [opts.locale='en-US'] - the locale to use\n   * @param {string} opts.numberingSystem - the numbering system to use\n   * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use\n   * @return {Duration}\n   */\n  static fromMillis(count, opts) {\n    return Duration.fromObject({ milliseconds: count }, opts);\n  }\n\n  /**\n   * Create a Duration from a JavaScript object with keys like 'years' and 'hours'.\n   * If this object is empty then a zero milliseconds duration is returned.\n   * @param {Object} obj - the object to create the DateTime from\n   * @param {number} obj.years\n   * @param {number} obj.quarters\n   * @param {number} obj.months\n   * @param {number} obj.weeks\n   * @param {number} obj.days\n   * @param {number} obj.hours\n   * @param {number} obj.minutes\n   * @param {number} obj.seconds\n   * @param {number} obj.milliseconds\n   * @param {Object} [opts=[]] - options for creating this Duration\n   * @param {string} [opts.locale='en-US'] - the locale to use\n   * @param {string} opts.numberingSystem - the numbering system to use\n   * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use\n   * @param {string} [opts.matrix=Object] - the custom conversion system to use\n   * @return {Duration}\n   */\n  static fromObject(obj, opts = {}) {\n    if (obj == null || typeof obj !== \"object\") {\n      throw new InvalidArgumentError(\n        `Duration.fromObject: argument expected to be an object, got ${\n          obj === null ? \"null\" : typeof obj\n        }`\n      );\n    }\n\n    return new Duration({\n      values: normalizeObject(obj, Duration.normalizeUnit),\n      loc: Locale.fromObject(opts),\n      conversionAccuracy: opts.conversionAccuracy,\n      matrix: opts.matrix,\n    });\n  }\n\n  /**\n   * Create a Duration from DurationLike.\n   *\n   * @param {Object | number | Duration} durationLike\n   * One of:\n   * - object with keys like 'years' and 'hours'.\n   * - number representing milliseconds\n   * - Duration instance\n   * @return {Duration}\n   */\n  static fromDurationLike(durationLike) {\n    if (isNumber(durationLike)) {\n      return Duration.fromMillis(durationLike);\n    } else if (Duration.isDuration(durationLike)) {\n      return durationLike;\n    } else if (typeof durationLike === \"object\") {\n      return Duration.fromObject(durationLike);\n    } else {\n      throw new InvalidArgumentError(\n        `Unknown duration argument ${durationLike} of type ${typeof durationLike}`\n      );\n    }\n  }\n\n  /**\n   * Create a Duration from an ISO 8601 duration string.\n   * @param {string} text - text to parse\n   * @param {Object} opts - options for parsing\n   * @param {string} [opts.locale='en-US'] - the locale to use\n   * @param {string} opts.numberingSystem - the numbering system to use\n   * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use\n   * @param {string} [opts.matrix=Object] - the preset conversion system to use\n   * @see https://en.wikipedia.org/wiki/ISO_8601#Durations\n   * @example Duration.fromISO('P3Y6M1W4DT12H30M5S').toObject() //=> { years: 3, months: 6, weeks: 1, days: 4, hours: 12, minutes: 30, seconds: 5 }\n   * @example Duration.fromISO('PT23H').toObject() //=> { hours: 23 }\n   * @example Duration.fromISO('P5Y3M').toObject() //=> { years: 5, months: 3 }\n   * @return {Duration}\n   */\n  static fromISO(text, opts) {\n    const [parsed] = parseISODuration(text);\n    if (parsed) {\n      return Duration.fromObject(parsed, opts);\n    } else {\n      return Duration.invalid(\"unparsable\", `the input \"${text}\" can't be parsed as ISO 8601`);\n    }\n  }\n\n  /**\n   * Create a Duration from an ISO 8601 time string.\n   * @param {string} text - text to parse\n   * @param {Object} opts - options for parsing\n   * @param {string} [opts.locale='en-US'] - the locale to use\n   * @param {string} opts.numberingSystem - the numbering system to use\n   * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use\n   * @param {string} [opts.matrix=Object] - the conversion system to use\n   * @see https://en.wikipedia.org/wiki/ISO_8601#Times\n   * @example Duration.fromISOTime('11:22:33.444').toObject() //=> { hours: 11, minutes: 22, seconds: 33, milliseconds: 444 }\n   * @example Duration.fromISOTime('11:00').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }\n   * @example Duration.fromISOTime('T11:00').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }\n   * @example Duration.fromISOTime('1100').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }\n   * @example Duration.fromISOTime('T1100').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }\n   * @return {Duration}\n   */\n  static fromISOTime(text, opts) {\n    const [parsed] = parseISOTimeOnly(text);\n    if (parsed) {\n      return Duration.fromObject(parsed, opts);\n    } else {\n      return Duration.invalid(\"unparsable\", `the input \"${text}\" can't be parsed as ISO 8601`);\n    }\n  }\n\n  /**\n   * Create an invalid Duration.\n   * @param {string} reason - simple string of why this datetime is invalid. Should not contain parameters or anything else data-dependent\n   * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information\n   * @return {Duration}\n   */\n  static invalid(reason, explanation = null) {\n    if (!reason) {\n      throw new InvalidArgumentError(\"need to specify a reason the Duration is invalid\");\n    }\n\n    const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);\n\n    if (Settings.throwOnInvalid) {\n      throw new InvalidDurationError(invalid);\n    } else {\n      return new Duration({ invalid });\n    }\n  }\n\n  /**\n   * @private\n   */\n  static normalizeUnit(unit) {\n    const normalized = {\n      year: \"years\",\n      years: \"years\",\n      quarter: \"quarters\",\n      quarters: \"quarters\",\n      month: \"months\",\n      months: \"months\",\n      week: \"weeks\",\n      weeks: \"weeks\",\n      day: \"days\",\n      days: \"days\",\n      hour: \"hours\",\n      hours: \"hours\",\n      minute: \"minutes\",\n      minutes: \"minutes\",\n      second: \"seconds\",\n      seconds: \"seconds\",\n      millisecond: \"milliseconds\",\n      milliseconds: \"milliseconds\",\n    }[unit ? unit.toLowerCase() : unit];\n\n    if (!normalized) throw new InvalidUnitError(unit);\n\n    return normalized;\n  }\n\n  /**\n   * Check if an object is a Duration. Works across context boundaries\n   * @param {object} o\n   * @return {boolean}\n   */\n  static isDuration(o) {\n    return (o && o.isLuxonDuration) || false;\n  }\n\n  /**\n   * Get  the locale of a Duration, such 'en-GB'\n   * @type {string}\n   */\n  get locale() {\n    return this.isValid ? this.loc.locale : null;\n  }\n\n  /**\n   * Get the numbering system of a Duration, such 'beng'. The numbering system is used when formatting the Duration\n   *\n   * @type {string}\n   */\n  get numberingSystem() {\n    return this.isValid ? this.loc.numberingSystem : null;\n  }\n\n  /**\n   * Returns a string representation of this Duration formatted according to the specified format string. You may use these tokens:\n   * * `S` for milliseconds\n   * * `s` for seconds\n   * * `m` for minutes\n   * * `h` for hours\n   * * `d` for days\n   * * `w` for weeks\n   * * `M` for months\n   * * `y` for years\n   * Notes:\n   * * Add padding by repeating the token, e.g. \"yy\" pads the years to two digits, \"hhhh\" pads the hours out to four digits\n   * * Tokens can be escaped by wrapping with single quotes.\n   * * The duration will be converted to the set of units in the format string using {@link Duration#shiftTo} and the Durations's conversion accuracy setting.\n   * @param {string} fmt - the format string\n   * @param {Object} opts - options\n   * @param {boolean} [opts.floor=true] - floor numerical values\n   * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat(\"y d s\") //=> \"1 6 2\"\n   * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat(\"yy dd sss\") //=> \"01 06 002\"\n   * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat(\"M S\") //=> \"12 518402000\"\n   * @return {string}\n   */\n  toFormat(fmt, opts = {}) {\n    // reverse-compat since 1.2; we always round down now, never up, and we do it by default\n    const fmtOpts = {\n      ...opts,\n      floor: opts.round !== false && opts.floor !== false,\n    };\n    return this.isValid\n      ? Formatter.create(this.loc, fmtOpts).formatDurationFromString(this, fmt)\n      : INVALID;\n  }\n\n  /**\n   * Returns a string representation of a Duration with all units included.\n   * To modify its behavior, use `listStyle` and any Intl.NumberFormat option, though `unitDisplay` is especially relevant.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat#options\n   * @param {Object} opts - Formatting options. Accepts the same keys as the options parameter of the native `Intl.NumberFormat` constructor, as well as `listStyle`.\n   * @param {string} [opts.listStyle='narrow'] - How to format the merged list. Corresponds to the `style` property of the options parameter of the native `Intl.ListFormat` constructor.\n   * @example\n   * ```js\n   * var dur = Duration.fromObject({ days: 1, hours: 5, minutes: 6 })\n   * dur.toHuman() //=> '1 day, 5 hours, 6 minutes'\n   * dur.toHuman({ listStyle: \"long\" }) //=> '1 day, 5 hours, and 6 minutes'\n   * dur.toHuman({ unitDisplay: \"short\" }) //=> '1 day, 5 hr, 6 min'\n   * ```\n   */\n  toHuman(opts = {}) {\n    if (!this.isValid) return INVALID;\n\n    const l = orderedUnits\n      .map((unit) => {\n        const val = this.values[unit];\n        if (isUndefined(val)) {\n          return null;\n        }\n        return this.loc\n          .numberFormatter({ style: \"unit\", unitDisplay: \"long\", ...opts, unit: unit.slice(0, -1) })\n          .format(val);\n      })\n      .filter((n) => n);\n\n    return this.loc\n      .listFormatter({ type: \"conjunction\", style: opts.listStyle || \"narrow\", ...opts })\n      .format(l);\n  }\n\n  /**\n   * Returns a JavaScript object with this Duration's values.\n   * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toObject() //=> { years: 1, days: 6, seconds: 2 }\n   * @return {Object}\n   */\n  toObject() {\n    if (!this.isValid) return {};\n    return { ...this.values };\n  }\n\n  /**\n   * Returns an ISO 8601-compliant string representation of this Duration.\n   * @see https://en.wikipedia.org/wiki/ISO_8601#Durations\n   * @example Duration.fromObject({ years: 3, seconds: 45 }).toISO() //=> 'P3YT45S'\n   * @example Duration.fromObject({ months: 4, seconds: 45 }).toISO() //=> 'P4MT45S'\n   * @example Duration.fromObject({ months: 5 }).toISO() //=> 'P5M'\n   * @example Duration.fromObject({ minutes: 5 }).toISO() //=> 'PT5M'\n   * @example Duration.fromObject({ milliseconds: 6 }).toISO() //=> 'PT0.006S'\n   * @return {string}\n   */\n  toISO() {\n    // we could use the formatter, but this is an easier way to get the minimum string\n    if (!this.isValid) return null;\n\n    let s = \"P\";\n    if (this.years !== 0) s += this.years + \"Y\";\n    if (this.months !== 0 || this.quarters !== 0) s += this.months + this.quarters * 3 + \"M\";\n    if (this.weeks !== 0) s += this.weeks + \"W\";\n    if (this.days !== 0) s += this.days + \"D\";\n    if (this.hours !== 0 || this.minutes !== 0 || this.seconds !== 0 || this.milliseconds !== 0)\n      s += \"T\";\n    if (this.hours !== 0) s += this.hours + \"H\";\n    if (this.minutes !== 0) s += this.minutes + \"M\";\n    if (this.seconds !== 0 || this.milliseconds !== 0)\n      // this will handle \"floating point madness\" by removing extra decimal places\n      // https://stackoverflow.com/questions/588004/is-floating-point-math-broken\n      s += roundTo(this.seconds + this.milliseconds / 1000, 3) + \"S\";\n    if (s === \"P\") s += \"T0S\";\n    return s;\n  }\n\n  /**\n   * Returns an ISO 8601-compliant string representation of this Duration, formatted as a time of day.\n   * Note that this will return null if the duration is invalid, negative, or equal to or greater than 24 hours.\n   * @see https://en.wikipedia.org/wiki/ISO_8601#Times\n   * @param {Object} opts - options\n   * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0\n   * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0\n   * @param {boolean} [opts.includePrefix=false] - include the `T` prefix\n   * @param {string} [opts.format='extended'] - choose between the basic and extended format\n   * @example Duration.fromObject({ hours: 11 }).toISOTime() //=> '11:00:00.000'\n   * @example Duration.fromObject({ hours: 11 }).toISOTime({ suppressMilliseconds: true }) //=> '11:00:00'\n   * @example Duration.fromObject({ hours: 11 }).toISOTime({ suppressSeconds: true }) //=> '11:00'\n   * @example Duration.fromObject({ hours: 11 }).toISOTime({ includePrefix: true }) //=> 'T11:00:00.000'\n   * @example Duration.fromObject({ hours: 11 }).toISOTime({ format: 'basic' }) //=> '110000.000'\n   * @return {string}\n   */\n  toISOTime(opts = {}) {\n    if (!this.isValid) return null;\n\n    const millis = this.toMillis();\n    if (millis < 0 || millis >= 86400000) return null;\n\n    opts = {\n      suppressMilliseconds: false,\n      suppressSeconds: false,\n      includePrefix: false,\n      format: \"extended\",\n      ...opts,\n      includeOffset: false,\n    };\n\n    const dateTime = DateTime.fromMillis(millis, { zone: \"UTC\" });\n    return dateTime.toISOTime(opts);\n  }\n\n  /**\n   * Returns an ISO 8601 representation of this Duration appropriate for use in JSON.\n   * @return {string}\n   */\n  toJSON() {\n    return this.toISO();\n  }\n\n  /**\n   * Returns an ISO 8601 representation of this Duration appropriate for use in debugging.\n   * @return {string}\n   */\n  toString() {\n    return this.toISO();\n  }\n\n  /**\n   * Returns a string representation of this Duration appropriate for the REPL.\n   * @return {string}\n   */\n  [Symbol.for(\"nodejs.util.inspect.custom\")]() {\n    if (this.isValid) {\n      return `Duration { values: ${JSON.stringify(this.values)} }`;\n    } else {\n      return `Duration { Invalid, reason: ${this.invalidReason} }`;\n    }\n  }\n\n  /**\n   * Returns an milliseconds value of this Duration.\n   * @return {number}\n   */\n  toMillis() {\n    if (!this.isValid) return NaN;\n\n    return durationToMillis(this.matrix, this.values);\n  }\n\n  /**\n   * Returns an milliseconds value of this Duration. Alias of {@link toMillis}\n   * @return {number}\n   */\n  valueOf() {\n    return this.toMillis();\n  }\n\n  /**\n   * Make this Duration longer by the specified amount. Return a newly-constructed Duration.\n   * @param {Duration|Object|number} duration - The amount to add. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()\n   * @return {Duration}\n   */\n  plus(duration) {\n    if (!this.isValid) return this;\n\n    const dur = Duration.fromDurationLike(duration),\n      result = {};\n\n    for (const k of orderedUnits) {\n      if (hasOwnProperty(dur.values, k) || hasOwnProperty(this.values, k)) {\n        result[k] = dur.get(k) + this.get(k);\n      }\n    }\n\n    return clone(this, { values: result }, true);\n  }\n\n  /**\n   * Make this Duration shorter by the specified amount. Return a newly-constructed Duration.\n   * @param {Duration|Object|number} duration - The amount to subtract. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()\n   * @return {Duration}\n   */\n  minus(duration) {\n    if (!this.isValid) return this;\n\n    const dur = Duration.fromDurationLike(duration);\n    return this.plus(dur.negate());\n  }\n\n  /**\n   * Scale this Duration by the specified amount. Return a newly-constructed Duration.\n   * @param {function} fn - The function to apply to each unit. Arity is 1 or 2: the value of the unit and, optionally, the unit name. Must return a number.\n   * @example Duration.fromObject({ hours: 1, minutes: 30 }).mapUnits(x => x * 2) //=> { hours: 2, minutes: 60 }\n   * @example Duration.fromObject({ hours: 1, minutes: 30 }).mapUnits((x, u) => u === \"hours\" ? x * 2 : x) //=> { hours: 2, minutes: 30 }\n   * @return {Duration}\n   */\n  mapUnits(fn) {\n    if (!this.isValid) return this;\n    const result = {};\n    for (const k of Object.keys(this.values)) {\n      result[k] = asNumber(fn(this.values[k], k));\n    }\n    return clone(this, { values: result }, true);\n  }\n\n  /**\n   * Get the value of unit.\n   * @param {string} unit - a unit such as 'minute' or 'day'\n   * @example Duration.fromObject({years: 2, days: 3}).get('years') //=> 2\n   * @example Duration.fromObject({years: 2, days: 3}).get('months') //=> 0\n   * @example Duration.fromObject({years: 2, days: 3}).get('days') //=> 3\n   * @return {number}\n   */\n  get(unit) {\n    return this[Duration.normalizeUnit(unit)];\n  }\n\n  /**\n   * \"Set\" the values of specified units. Return a newly-constructed Duration.\n   * @param {Object} values - a mapping of units to numbers\n   * @example dur.set({ years: 2017 })\n   * @example dur.set({ hours: 8, minutes: 30 })\n   * @return {Duration}\n   */\n  set(values) {\n    if (!this.isValid) return this;\n\n    const mixed = { ...this.values, ...normalizeObject(values, Duration.normalizeUnit) };\n    return clone(this, { values: mixed });\n  }\n\n  /**\n   * \"Set\" the locale and/or numberingSystem.  Returns a newly-constructed Duration.\n   * @example dur.reconfigure({ locale: 'en-GB' })\n   * @return {Duration}\n   */\n  reconfigure({ locale, numberingSystem, conversionAccuracy, matrix } = {}) {\n    const loc = this.loc.clone({ locale, numberingSystem });\n    const opts = { loc, matrix, conversionAccuracy };\n    return clone(this, opts);\n  }\n\n  /**\n   * Return the length of the duration in the specified unit.\n   * @param {string} unit - a unit such as 'minutes' or 'days'\n   * @example Duration.fromObject({years: 1}).as('days') //=> 365\n   * @example Duration.fromObject({years: 1}).as('months') //=> 12\n   * @example Duration.fromObject({hours: 60}).as('days') //=> 2.5\n   * @return {number}\n   */\n  as(unit) {\n    return this.isValid ? this.shiftTo(unit).get(unit) : NaN;\n  }\n\n  /**\n   * Reduce this Duration to its canonical representation in its current units.\n   * Assuming the overall value of the Duration is positive, this means:\n   * - excessive values for lower-order units are converted to higher-order units (if possible, see first and second example)\n   * - negative lower-order units are converted to higher order units (there must be such a higher order unit, otherwise\n   *   the overall value would be negative, see third example)\n   * - fractional values for higher-order units are converted to lower-order units (if possible, see fourth example)\n   *\n   * If the overall value is negative, the result of this method is equivalent to `this.negate().normalize().negate()`.\n   * @example Duration.fromObject({ years: 2, days: 5000 }).normalize().toObject() //=> { years: 15, days: 255 }\n   * @example Duration.fromObject({ days: 5000 }).normalize().toObject() //=> { days: 5000 }\n   * @example Duration.fromObject({ hours: 12, minutes: -45 }).normalize().toObject() //=> { hours: 11, minutes: 15 }\n   * @example Duration.fromObject({ years: 2.5, days: 0, hours: 0 }).normalize().toObject() //=> { years: 2, days: 182, hours: 12 }\n   * @return {Duration}\n   */\n  normalize() {\n    if (!this.isValid) return this;\n    const vals = this.toObject();\n    normalizeValues(this.matrix, vals);\n    return clone(this, { values: vals }, true);\n  }\n\n  /**\n   * Rescale units to its largest representation\n   * @example Duration.fromObject({ milliseconds: 90000 }).rescale().toObject() //=> { minutes: 1, seconds: 30 }\n   * @return {Duration}\n   */\n  rescale() {\n    if (!this.isValid) return this;\n    const vals = removeZeroes(this.normalize().shiftToAll().toObject());\n    return clone(this, { values: vals }, true);\n  }\n\n  /**\n   * Convert this Duration into its representation in a different set of units.\n   * @example Duration.fromObject({ hours: 1, seconds: 30 }).shiftTo('minutes', 'milliseconds').toObject() //=> { minutes: 60, milliseconds: 30000 }\n   * @return {Duration}\n   */\n  shiftTo(...units) {\n    if (!this.isValid) return this;\n\n    if (units.length === 0) {\n      return this;\n    }\n\n    units = units.map((u) => Duration.normalizeUnit(u));\n\n    const built = {},\n      accumulated = {},\n      vals = this.toObject();\n    let lastUnit;\n\n    for (const k of orderedUnits) {\n      if (units.indexOf(k) >= 0) {\n        lastUnit = k;\n\n        let own = 0;\n\n        // anything we haven't boiled down yet should get boiled to this unit\n        for (const ak in accumulated) {\n          own += this.matrix[ak][k] * accumulated[ak];\n          accumulated[ak] = 0;\n        }\n\n        // plus anything that's already in this unit\n        if (isNumber(vals[k])) {\n          own += vals[k];\n        }\n\n        // only keep the integer part for now in the hopes of putting any decimal part\n        // into a smaller unit later\n        const i = Math.trunc(own);\n        built[k] = i;\n        accumulated[k] = (own * 1000 - i * 1000) / 1000;\n\n        // otherwise, keep it in the wings to boil it later\n      } else if (isNumber(vals[k])) {\n        accumulated[k] = vals[k];\n      }\n    }\n\n    // anything leftover becomes the decimal for the last unit\n    // lastUnit must be defined since units is not empty\n    for (const key in accumulated) {\n      if (accumulated[key] !== 0) {\n        built[lastUnit] +=\n          key === lastUnit ? accumulated[key] : accumulated[key] / this.matrix[lastUnit][key];\n      }\n    }\n\n    normalizeValues(this.matrix, built);\n    return clone(this, { values: built }, true);\n  }\n\n  /**\n   * Shift this Duration to all available units.\n   * Same as shiftTo(\"years\", \"months\", \"weeks\", \"days\", \"hours\", \"minutes\", \"seconds\", \"milliseconds\")\n   * @return {Duration}\n   */\n  shiftToAll() {\n    if (!this.isValid) return this;\n    return this.shiftTo(\n      \"years\",\n      \"months\",\n      \"weeks\",\n      \"days\",\n      \"hours\",\n      \"minutes\",\n      \"seconds\",\n      \"milliseconds\"\n    );\n  }\n\n  /**\n   * Return the negative of this Duration.\n   * @example Duration.fromObject({ hours: 1, seconds: 30 }).negate().toObject() //=> { hours: -1, seconds: -30 }\n   * @return {Duration}\n   */\n  negate() {\n    if (!this.isValid) return this;\n    const negated = {};\n    for (const k of Object.keys(this.values)) {\n      negated[k] = this.values[k] === 0 ? 0 : -this.values[k];\n    }\n    return clone(this, { values: negated }, true);\n  }\n\n  /**\n   * Get the years.\n   * @type {number}\n   */\n  get years() {\n    return this.isValid ? this.values.years || 0 : NaN;\n  }\n\n  /**\n   * Get the quarters.\n   * @type {number}\n   */\n  get quarters() {\n    return this.isValid ? this.values.quarters || 0 : NaN;\n  }\n\n  /**\n   * Get the months.\n   * @type {number}\n   */\n  get months() {\n    return this.isValid ? this.values.months || 0 : NaN;\n  }\n\n  /**\n   * Get the weeks\n   * @type {number}\n   */\n  get weeks() {\n    return this.isValid ? this.values.weeks || 0 : NaN;\n  }\n\n  /**\n   * Get the days.\n   * @type {number}\n   */\n  get days() {\n    return this.isValid ? this.values.days || 0 : NaN;\n  }\n\n  /**\n   * Get the hours.\n   * @type {number}\n   */\n  get hours() {\n    return this.isValid ? this.values.hours || 0 : NaN;\n  }\n\n  /**\n   * Get the minutes.\n   * @type {number}\n   */\n  get minutes() {\n    return this.isValid ? this.values.minutes || 0 : NaN;\n  }\n\n  /**\n   * Get the seconds.\n   * @return {number}\n   */\n  get seconds() {\n    return this.isValid ? this.values.seconds || 0 : NaN;\n  }\n\n  /**\n   * Get the milliseconds.\n   * @return {number}\n   */\n  get milliseconds() {\n    return this.isValid ? this.values.milliseconds || 0 : NaN;\n  }\n\n  /**\n   * Returns whether the Duration is invalid. Invalid durations are returned by diff operations\n   * on invalid DateTimes or Intervals.\n   * @return {boolean}\n   */\n  get isValid() {\n    return this.invalid === null;\n  }\n\n  /**\n   * Returns an error code if this Duration became invalid, or null if the Duration is valid\n   * @return {string}\n   */\n  get invalidReason() {\n    return this.invalid ? this.invalid.reason : null;\n  }\n\n  /**\n   * Returns an explanation of why this Duration became invalid, or null if the Duration is valid\n   * @type {string}\n   */\n  get invalidExplanation() {\n    return this.invalid ? this.invalid.explanation : null;\n  }\n\n  /**\n   * Equality check\n   * Two Durations are equal iff they have the same units and the same values for each unit.\n   * @param {Duration} other\n   * @return {boolean}\n   */\n  equals(other) {\n    if (!this.isValid || !other.isValid) {\n      return false;\n    }\n\n    if (!this.loc.equals(other.loc)) {\n      return false;\n    }\n\n    function eq(v1, v2) {\n      // Consider 0 and undefined as equal\n      if (v1 === undefined || v1 === 0) return v2 === undefined || v2 === 0;\n      return v1 === v2;\n    }\n\n    for (const u of orderedUnits) {\n      if (!eq(this.values[u], other.values[u])) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n","import DateTime, { friendlyDateTime } from \"./datetime.js\";\nimport Duration from \"./duration.js\";\nimport Settings from \"./settings.js\";\nimport { InvalidArgumentError, InvalidIntervalError } from \"./errors.js\";\nimport Invalid from \"./impl/invalid.js\";\nimport Formatter from \"./impl/formatter.js\";\nimport * as Formats from \"./impl/formats.js\";\n\nconst INVALID = \"Invalid Interval\";\n\n// checks if the start is equal to or before the end\nfunction validateStartEnd(start, end) {\n  if (!start || !start.isValid) {\n    return Interval.invalid(\"missing or invalid start\");\n  } else if (!end || !end.isValid) {\n    return Interval.invalid(\"missing or invalid end\");\n  } else if (end < start) {\n    return Interval.invalid(\n      \"end before start\",\n      `The end of an interval must be after its start, but you had start=${start.toISO()} and end=${end.toISO()}`\n    );\n  } else {\n    return null;\n  }\n}\n\n/**\n * An Interval object represents a half-open interval of time, where each endpoint is a {@link DateTime}. Conceptually, it's a container for those two endpoints, accompanied by methods for creating, parsing, interrogating, comparing, transforming, and formatting them.\n *\n * Here is a brief overview of the most commonly used methods and getters in Interval:\n *\n * * **Creation** To create an Interval, use {@link Interval.fromDateTimes}, {@link Interval.after}, {@link Interval.before}, or {@link Interval.fromISO}.\n * * **Accessors** Use {@link Interval#start} and {@link Interval#end} to get the start and end.\n * * **Interrogation** To analyze the Interval, use {@link Interval#count}, {@link Interval#length}, {@link Interval#hasSame}, {@link Interval#contains}, {@link Interval#isAfter}, or {@link Interval#isBefore}.\n * * **Transformation** To create other Intervals out of this one, use {@link Interval#set}, {@link Interval#splitAt}, {@link Interval#splitBy}, {@link Interval#divideEqually}, {@link Interval.merge}, {@link Interval.xor}, {@link Interval#union}, {@link Interval#intersection}, or {@link Interval#difference}.\n * * **Comparison** To compare this Interval to another one, use {@link Interval#equals}, {@link Interval#overlaps}, {@link Interval#abutsStart}, {@link Interval#abutsEnd}, {@link Interval#engulfs}\n * * **Output** To convert the Interval into other representations, see {@link Interval#toString}, {@link Interval#toLocaleString}, {@link Interval#toISO}, {@link Interval#toISODate}, {@link Interval#toISOTime}, {@link Interval#toFormat}, and {@link Interval#toDuration}.\n */\nexport default class Interval {\n  /**\n   * @private\n   */\n  constructor(config) {\n    /**\n     * @access private\n     */\n    this.s = config.start;\n    /**\n     * @access private\n     */\n    this.e = config.end;\n    /**\n     * @access private\n     */\n    this.invalid = config.invalid || null;\n    /**\n     * @access private\n     */\n    this.isLuxonInterval = true;\n  }\n\n  /**\n   * Create an invalid Interval.\n   * @param {string} reason - simple string of why this Interval is invalid. Should not contain parameters or anything else data-dependent\n   * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information\n   * @return {Interval}\n   */\n  static invalid(reason, explanation = null) {\n    if (!reason) {\n      throw new InvalidArgumentError(\"need to specify a reason the Interval is invalid\");\n    }\n\n    const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);\n\n    if (Settings.throwOnInvalid) {\n      throw new InvalidIntervalError(invalid);\n    } else {\n      return new Interval({ invalid });\n    }\n  }\n\n  /**\n   * Create an Interval from a start DateTime and an end DateTime. Inclusive of the start but not the end.\n   * @param {DateTime|Date|Object} start\n   * @param {DateTime|Date|Object} end\n   * @return {Interval}\n   */\n  static fromDateTimes(start, end) {\n    const builtStart = friendlyDateTime(start),\n      builtEnd = friendlyDateTime(end);\n\n    const validateError = validateStartEnd(builtStart, builtEnd);\n\n    if (validateError == null) {\n      return new Interval({\n        start: builtStart,\n        end: builtEnd,\n      });\n    } else {\n      return validateError;\n    }\n  }\n\n  /**\n   * Create an Interval from a start DateTime and a Duration to extend to.\n   * @param {DateTime|Date|Object} start\n   * @param {Duration|Object|number} duration - the length of the Interval.\n   * @return {Interval}\n   */\n  static after(start, duration) {\n    const dur = Duration.fromDurationLike(duration),\n      dt = friendlyDateTime(start);\n    return Interval.fromDateTimes(dt, dt.plus(dur));\n  }\n\n  /**\n   * Create an Interval from an end DateTime and a Duration to extend backwards to.\n   * @param {DateTime|Date|Object} end\n   * @param {Duration|Object|number} duration - the length of the Interval.\n   * @return {Interval}\n   */\n  static before(end, duration) {\n    const dur = Duration.fromDurationLike(duration),\n      dt = friendlyDateTime(end);\n    return Interval.fromDateTimes(dt.minus(dur), dt);\n  }\n\n  /**\n   * Create an Interval from an ISO 8601 string.\n   * Accepts `<start>/<end>`, `<start>/<duration>`, and `<duration>/<end>` formats.\n   * @param {string} text - the ISO string to parse\n   * @param {Object} [opts] - options to pass {@link DateTime#fromISO} and optionally {@link Duration#fromISO}\n   * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals\n   * @return {Interval}\n   */\n  static fromISO(text, opts) {\n    const [s, e] = (text || \"\").split(\"/\", 2);\n    if (s && e) {\n      let start, startIsValid;\n      try {\n        start = DateTime.fromISO(s, opts);\n        startIsValid = start.isValid;\n      } catch (e) {\n        startIsValid = false;\n      }\n\n      let end, endIsValid;\n      try {\n        end = DateTime.fromISO(e, opts);\n        endIsValid = end.isValid;\n      } catch (e) {\n        endIsValid = false;\n      }\n\n      if (startIsValid && endIsValid) {\n        return Interval.fromDateTimes(start, end);\n      }\n\n      if (startIsValid) {\n        const dur = Duration.fromISO(e, opts);\n        if (dur.isValid) {\n          return Interval.after(start, dur);\n        }\n      } else if (endIsValid) {\n        const dur = Duration.fromISO(s, opts);\n        if (dur.isValid) {\n          return Interval.before(end, dur);\n        }\n      }\n    }\n    return Interval.invalid(\"unparsable\", `the input \"${text}\" can't be parsed as ISO 8601`);\n  }\n\n  /**\n   * Check if an object is an Interval. Works across context boundaries\n   * @param {object} o\n   * @return {boolean}\n   */\n  static isInterval(o) {\n    return (o && o.isLuxonInterval) || false;\n  }\n\n  /**\n   * Returns the start of the Interval\n   * @type {DateTime}\n   */\n  get start() {\n    return this.isValid ? this.s : null;\n  }\n\n  /**\n   * Returns the end of the Interval\n   * @type {DateTime}\n   */\n  get end() {\n    return this.isValid ? this.e : null;\n  }\n\n  /**\n   * Returns whether this Interval's end is at least its start, meaning that the Interval isn't 'backwards'.\n   * @type {boolean}\n   */\n  get isValid() {\n    return this.invalidReason === null;\n  }\n\n  /**\n   * Returns an error code if this Interval is invalid, or null if the Interval is valid\n   * @type {string}\n   */\n  get invalidReason() {\n    return this.invalid ? this.invalid.reason : null;\n  }\n\n  /**\n   * Returns an explanation of why this Interval became invalid, or null if the Interval is valid\n   * @type {string}\n   */\n  get invalidExplanation() {\n    return this.invalid ? this.invalid.explanation : null;\n  }\n\n  /**\n   * Returns the length of the Interval in the specified unit.\n   * @param {string} unit - the unit (such as 'hours' or 'days') to return the length in.\n   * @return {number}\n   */\n  length(unit = \"milliseconds\") {\n    return this.isValid ? this.toDuration(...[unit]).get(unit) : NaN;\n  }\n\n  /**\n   * Returns the count of minutes, hours, days, months, or years included in the Interval, even in part.\n   * Unlike {@link Interval#length} this counts sections of the calendar, not periods of time, e.g. specifying 'day'\n   * asks 'what dates are included in this interval?', not 'how many days long is this interval?'\n   * @param {string} [unit='milliseconds'] - the unit of time to count.\n   * @param {Object} opts - options\n   * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week; this operation will always use the locale of the start DateTime\n   * @return {number}\n   */\n  count(unit = \"milliseconds\", opts) {\n    if (!this.isValid) return NaN;\n    const start = this.start.startOf(unit, opts);\n    let end;\n    if (opts?.useLocaleWeeks) {\n      end = this.end.reconfigure({ locale: start.locale });\n    } else {\n      end = this.end;\n    }\n    end = end.startOf(unit, opts);\n    return Math.floor(end.diff(start, unit).get(unit)) + (end.valueOf() !== this.end.valueOf());\n  }\n\n  /**\n   * Returns whether this Interval's start and end are both in the same unit of time\n   * @param {string} unit - the unit of time to check sameness on\n   * @return {boolean}\n   */\n  hasSame(unit) {\n    return this.isValid ? this.isEmpty() || this.e.minus(1).hasSame(this.s, unit) : false;\n  }\n\n  /**\n   * Return whether this Interval has the same start and end DateTimes.\n   * @return {boolean}\n   */\n  isEmpty() {\n    return this.s.valueOf() === this.e.valueOf();\n  }\n\n  /**\n   * Return whether this Interval's start is after the specified DateTime.\n   * @param {DateTime} dateTime\n   * @return {boolean}\n   */\n  isAfter(dateTime) {\n    if (!this.isValid) return false;\n    return this.s > dateTime;\n  }\n\n  /**\n   * Return whether this Interval's end is before the specified DateTime.\n   * @param {DateTime} dateTime\n   * @return {boolean}\n   */\n  isBefore(dateTime) {\n    if (!this.isValid) return false;\n    return this.e <= dateTime;\n  }\n\n  /**\n   * Return whether this Interval contains the specified DateTime.\n   * @param {DateTime} dateTime\n   * @return {boolean}\n   */\n  contains(dateTime) {\n    if (!this.isValid) return false;\n    return this.s <= dateTime && this.e > dateTime;\n  }\n\n  /**\n   * \"Sets\" the start and/or end dates. Returns a newly-constructed Interval.\n   * @param {Object} values - the values to set\n   * @param {DateTime} values.start - the starting DateTime\n   * @param {DateTime} values.end - the ending DateTime\n   * @return {Interval}\n   */\n  set({ start, end } = {}) {\n    if (!this.isValid) return this;\n    return Interval.fromDateTimes(start || this.s, end || this.e);\n  }\n\n  /**\n   * Split this Interval at each of the specified DateTimes\n   * @param {...DateTime} dateTimes - the unit of time to count.\n   * @return {Array}\n   */\n  splitAt(...dateTimes) {\n    if (!this.isValid) return [];\n    const sorted = dateTimes\n        .map(friendlyDateTime)\n        .filter((d) => this.contains(d))\n        .sort((a, b) => a.toMillis() - b.toMillis()),\n      results = [];\n    let { s } = this,\n      i = 0;\n\n    while (s < this.e) {\n      const added = sorted[i] || this.e,\n        next = +added > +this.e ? this.e : added;\n      results.push(Interval.fromDateTimes(s, next));\n      s = next;\n      i += 1;\n    }\n\n    return results;\n  }\n\n  /**\n   * Split this Interval into smaller Intervals, each of the specified length.\n   * Left over time is grouped into a smaller interval\n   * @param {Duration|Object|number} duration - The length of each resulting interval.\n   * @return {Array}\n   */\n  splitBy(duration) {\n    const dur = Duration.fromDurationLike(duration);\n\n    if (!this.isValid || !dur.isValid || dur.as(\"milliseconds\") === 0) {\n      return [];\n    }\n\n    let { s } = this,\n      idx = 1,\n      next;\n\n    const results = [];\n    while (s < this.e) {\n      const added = this.start.plus(dur.mapUnits((x) => x * idx));\n      next = +added > +this.e ? this.e : added;\n      results.push(Interval.fromDateTimes(s, next));\n      s = next;\n      idx += 1;\n    }\n\n    return results;\n  }\n\n  /**\n   * Split this Interval into the specified number of smaller intervals.\n   * @param {number} numberOfParts - The number of Intervals to divide the Interval into.\n   * @return {Array}\n   */\n  divideEqually(numberOfParts) {\n    if (!this.isValid) return [];\n    return this.splitBy(this.length() / numberOfParts).slice(0, numberOfParts);\n  }\n\n  /**\n   * Return whether this Interval overlaps with the specified Interval\n   * @param {Interval} other\n   * @return {boolean}\n   */\n  overlaps(other) {\n    return this.e > other.s && this.s < other.e;\n  }\n\n  /**\n   * Return whether this Interval's end is adjacent to the specified Interval's start.\n   * @param {Interval} other\n   * @return {boolean}\n   */\n  abutsStart(other) {\n    if (!this.isValid) return false;\n    return +this.e === +other.s;\n  }\n\n  /**\n   * Return whether this Interval's start is adjacent to the specified Interval's end.\n   * @param {Interval} other\n   * @return {boolean}\n   */\n  abutsEnd(other) {\n    if (!this.isValid) return false;\n    return +other.e === +this.s;\n  }\n\n  /**\n   * Return whether this Interval engulfs the start and end of the specified Interval.\n   * @param {Interval} other\n   * @return {boolean}\n   */\n  engulfs(other) {\n    if (!this.isValid) return false;\n    return this.s <= other.s && this.e >= other.e;\n  }\n\n  /**\n   * Return whether this Interval has the same start and end as the specified Interval.\n   * @param {Interval} other\n   * @return {boolean}\n   */\n  equals(other) {\n    if (!this.isValid || !other.isValid) {\n      return false;\n    }\n\n    return this.s.equals(other.s) && this.e.equals(other.e);\n  }\n\n  /**\n   * Return an Interval representing the intersection of this Interval and the specified Interval.\n   * Specifically, the resulting Interval has the maximum start time and the minimum end time of the two Intervals.\n   * Returns null if the intersection is empty, meaning, the intervals don't intersect.\n   * @param {Interval} other\n   * @return {Interval}\n   */\n  intersection(other) {\n    if (!this.isValid) return this;\n    const s = this.s > other.s ? this.s : other.s,\n      e = this.e < other.e ? this.e : other.e;\n\n    if (s >= e) {\n      return null;\n    } else {\n      return Interval.fromDateTimes(s, e);\n    }\n  }\n\n  /**\n   * Return an Interval representing the union of this Interval and the specified Interval.\n   * Specifically, the resulting Interval has the minimum start time and the maximum end time of the two Intervals.\n   * @param {Interval} other\n   * @return {Interval}\n   */\n  union(other) {\n    if (!this.isValid) return this;\n    const s = this.s < other.s ? this.s : other.s,\n      e = this.e > other.e ? this.e : other.e;\n    return Interval.fromDateTimes(s, e);\n  }\n\n  /**\n   * Merge an array of Intervals into a equivalent minimal set of Intervals.\n   * Combines overlapping and adjacent Intervals.\n   * @param {Array} intervals\n   * @return {Array}\n   */\n  static merge(intervals) {\n    const [found, final] = intervals\n      .sort((a, b) => a.s - b.s)\n      .reduce(\n        ([sofar, current], item) => {\n          if (!current) {\n            return [sofar, item];\n          } else if (current.overlaps(item) || current.abutsStart(item)) {\n            return [sofar, current.union(item)];\n          } else {\n            return [sofar.concat([current]), item];\n          }\n        },\n        [[], null]\n      );\n    if (final) {\n      found.push(final);\n    }\n    return found;\n  }\n\n  /**\n   * Return an array of Intervals representing the spans of time that only appear in one of the specified Intervals.\n   * @param {Array} intervals\n   * @return {Array}\n   */\n  static xor(intervals) {\n    let start = null,\n      currentCount = 0;\n    const results = [],\n      ends = intervals.map((i) => [\n        { time: i.s, type: \"s\" },\n        { time: i.e, type: \"e\" },\n      ]),\n      flattened = Array.prototype.concat(...ends),\n      arr = flattened.sort((a, b) => a.time - b.time);\n\n    for (const i of arr) {\n      currentCount += i.type === \"s\" ? 1 : -1;\n\n      if (currentCount === 1) {\n        start = i.time;\n      } else {\n        if (start && +start !== +i.time) {\n          results.push(Interval.fromDateTimes(start, i.time));\n        }\n\n        start = null;\n      }\n    }\n\n    return Interval.merge(results);\n  }\n\n  /**\n   * Return an Interval representing the span of time in this Interval that doesn't overlap with any of the specified Intervals.\n   * @param {...Interval} intervals\n   * @return {Array}\n   */\n  difference(...intervals) {\n    return Interval.xor([this].concat(intervals))\n      .map((i) => this.intersection(i))\n      .filter((i) => i && !i.isEmpty());\n  }\n\n  /**\n   * Returns a string representation of this Interval appropriate for debugging.\n   * @return {string}\n   */\n  toString() {\n    if (!this.isValid) return INVALID;\n    return `[${this.s.toISO()} – ${this.e.toISO()})`;\n  }\n\n  /**\n   * Returns a string representation of this Interval appropriate for the REPL.\n   * @return {string}\n   */\n  [Symbol.for(\"nodejs.util.inspect.custom\")]() {\n    if (this.isValid) {\n      return `Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`;\n    } else {\n      return `Interval { Invalid, reason: ${this.invalidReason} }`;\n    }\n  }\n\n  /**\n   * Returns a localized string representing this Interval. Accepts the same options as the\n   * Intl.DateTimeFormat constructor and any presets defined by Luxon, such as\n   * {@link DateTime.DATE_FULL} or {@link DateTime.TIME_SIMPLE}. The exact behavior of this method\n   * is browser-specific, but in general it will return an appropriate representation of the\n   * Interval in the assigned locale. Defaults to the system's locale if no locale has been\n   * specified.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat\n   * @param {Object} [formatOpts=DateTime.DATE_SHORT] - Either a DateTime preset or\n   * Intl.DateTimeFormat constructor options.\n   * @param {Object} opts - Options to override the configuration of the start DateTime.\n   * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(); //=> 11/7/2022 – 11/8/2022\n   * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(DateTime.DATE_FULL); //=> November 7 – 8, 2022\n   * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(DateTime.DATE_FULL, { locale: 'fr-FR' }); //=> 7–8 novembre 2022\n   * @example Interval.fromISO('2022-11-07T17:00Z/2022-11-07T19:00Z').toLocaleString(DateTime.TIME_SIMPLE); //=> 6:00 – 8:00 PM\n   * @example Interval.fromISO('2022-11-07T17:00Z/2022-11-07T19:00Z').toLocaleString({ weekday: 'short', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' }); //=> Mon, Nov 07, 6:00 – 8:00 p\n   * @return {string}\n   */\n  toLocaleString(formatOpts = Formats.DATE_SHORT, opts = {}) {\n    return this.isValid\n      ? Formatter.create(this.s.loc.clone(opts), formatOpts).formatInterval(this)\n      : INVALID;\n  }\n\n  /**\n   * Returns an ISO 8601-compliant string representation of this Interval.\n   * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals\n   * @param {Object} opts - The same options as {@link DateTime#toISO}\n   * @return {string}\n   */\n  toISO(opts) {\n    if (!this.isValid) return INVALID;\n    return `${this.s.toISO(opts)}/${this.e.toISO(opts)}`;\n  }\n\n  /**\n   * Returns an ISO 8601-compliant string representation of date of this Interval.\n   * The time components are ignored.\n   * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals\n   * @return {string}\n   */\n  toISODate() {\n    if (!this.isValid) return INVALID;\n    return `${this.s.toISODate()}/${this.e.toISODate()}`;\n  }\n\n  /**\n   * Returns an ISO 8601-compliant string representation of time of this Interval.\n   * The date components are ignored.\n   * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals\n   * @param {Object} opts - The same options as {@link DateTime#toISO}\n   * @return {string}\n   */\n  toISOTime(opts) {\n    if (!this.isValid) return INVALID;\n    return `${this.s.toISOTime(opts)}/${this.e.toISOTime(opts)}`;\n  }\n\n  /**\n   * Returns a string representation of this Interval formatted according to the specified format\n   * string. **You may not want this.** See {@link Interval#toLocaleString} for a more flexible\n   * formatting tool.\n   * @param {string} dateFormat - The format string. This string formats the start and end time.\n   * See {@link DateTime#toFormat} for details.\n   * @param {Object} opts - Options.\n   * @param {string} [opts.separator =  ' – '] - A separator to place between the start and end\n   * representations.\n   * @return {string}\n   */\n  toFormat(dateFormat, { separator = \" – \" } = {}) {\n    if (!this.isValid) return INVALID;\n    return `${this.s.toFormat(dateFormat)}${separator}${this.e.toFormat(dateFormat)}`;\n  }\n\n  /**\n   * Return a Duration representing the time spanned by this interval.\n   * @param {string|string[]} [unit=['milliseconds']] - the unit or units (such as 'hours' or 'days') to include in the duration.\n   * @param {Object} opts - options that affect the creation of the Duration\n   * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use\n   * @example Interval.fromDateTimes(dt1, dt2).toDuration().toObject() //=> { milliseconds: 88489257 }\n   * @example Interval.fromDateTimes(dt1, dt2).toDuration('days').toObject() //=> { days: 1.0241812152777778 }\n   * @example Interval.fromDateTimes(dt1, dt2).toDuration(['hours', 'minutes']).toObject() //=> { hours: 24, minutes: 34.82095 }\n   * @example Interval.fromDateTimes(dt1, dt2).toDuration(['hours', 'minutes', 'seconds']).toObject() //=> { hours: 24, minutes: 34, seconds: 49.257 }\n   * @example Interval.fromDateTimes(dt1, dt2).toDuration('seconds').toObject() //=> { seconds: 88489.257 }\n   * @return {Duration}\n   */\n  toDuration(unit, opts) {\n    if (!this.isValid) {\n      return Duration.invalid(this.invalidReason);\n    }\n    return this.e.diff(this.s, unit, opts);\n  }\n\n  /**\n   * Run mapFn on the interval start and end, returning a new Interval from the resulting DateTimes\n   * @param {function} mapFn\n   * @return {Interval}\n   * @example Interval.fromDateTimes(dt1, dt2).mapEndpoints(endpoint => endpoint.toUTC())\n   * @example Interval.fromDateTimes(dt1, dt2).mapEndpoints(endpoint => endpoint.plus({ hours: 2 }))\n   */\n  mapEndpoints(mapFn) {\n    return Interval.fromDateTimes(mapFn(this.s), mapFn(this.e));\n  }\n}\n","import DateTime from \"./datetime.js\";\nimport Settings from \"./settings.js\";\nimport Locale from \"./impl/locale.js\";\nimport IANAZone from \"./zones/IANAZone.js\";\nimport { normalizeZone } from \"./impl/zoneUtil.js\";\n\nimport { hasLocaleWeekInfo, hasRelative } from \"./impl/util.js\";\n\n/**\n * The Info class contains static methods for retrieving general time and date related data. For example, it has methods for finding out if a time zone has a DST, for listing the months in any supported locale, and for discovering which of Luxon features are available in the current environment.\n */\nexport default class Info {\n  /**\n   * Return whether the specified zone contains a DST.\n   * @param {string|Zone} [zone='local'] - Zone to check. Defaults to the environment's local zone.\n   * @return {boolean}\n   */\n  static hasDST(zone = Settings.defaultZone) {\n    const proto = DateTime.now().setZone(zone).set({ month: 12 });\n\n    return !zone.isUniversal && proto.offset !== proto.set({ month: 6 }).offset;\n  }\n\n  /**\n   * Return whether the specified zone is a valid IANA specifier.\n   * @param {string} zone - Zone to check\n   * @return {boolean}\n   */\n  static isValidIANAZone(zone) {\n    return IANAZone.isValidZone(zone);\n  }\n\n  /**\n   * Converts the input into a {@link Zone} instance.\n   *\n   * * If `input` is already a Zone instance, it is returned unchanged.\n   * * If `input` is a string containing a valid time zone name, a Zone instance\n   *   with that name is returned.\n   * * If `input` is a string that doesn't refer to a known time zone, a Zone\n   *   instance with {@link Zone#isValid} == false is returned.\n   * * If `input is a number, a Zone instance with the specified fixed offset\n   *   in minutes is returned.\n   * * If `input` is `null` or `undefined`, the default zone is returned.\n   * @param {string|Zone|number} [input] - the value to be converted\n   * @return {Zone}\n   */\n  static normalizeZone(input) {\n    return normalizeZone(input, Settings.defaultZone);\n  }\n\n  /**\n   * Get the weekday on which the week starts according to the given locale.\n   * @param {Object} opts - options\n   * @param {string} [opts.locale] - the locale code\n   * @param {string} [opts.locObj=null] - an existing locale object to use\n   * @returns {number} the start of the week, 1 for Monday through 7 for Sunday\n   */\n  static getStartOfWeek({ locale = null, locObj = null } = {}) {\n    return (locObj || Locale.create(locale)).getStartOfWeek();\n  }\n\n  /**\n   * Get the minimum number of days necessary in a week before it is considered part of the next year according\n   * to the given locale.\n   * @param {Object} opts - options\n   * @param {string} [opts.locale] - the locale code\n   * @param {string} [opts.locObj=null] - an existing locale object to use\n   * @returns {number}\n   */\n  static getMinimumDaysInFirstWeek({ locale = null, locObj = null } = {}) {\n    return (locObj || Locale.create(locale)).getMinDaysInFirstWeek();\n  }\n\n  /**\n   * Get the weekdays, which are considered the weekend according to the given locale\n   * @param {Object} opts - options\n   * @param {string} [opts.locale] - the locale code\n   * @param {string} [opts.locObj=null] - an existing locale object to use\n   * @returns {number[]} an array of weekdays, 1 for Monday through 7 for Sunday\n   */\n  static getWeekendWeekdays({ locale = null, locObj = null } = {}) {\n    // copy the array, because we cache it internally\n    return (locObj || Locale.create(locale)).getWeekendDays().slice();\n  }\n\n  /**\n   * Return an array of standalone month names.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat\n   * @param {string} [length='long'] - the length of the month representation, such as \"numeric\", \"2-digit\", \"narrow\", \"short\", \"long\"\n   * @param {Object} opts - options\n   * @param {string} [opts.locale] - the locale code\n   * @param {string} [opts.numberingSystem=null] - the numbering system\n   * @param {string} [opts.locObj=null] - an existing locale object to use\n   * @param {string} [opts.outputCalendar='gregory'] - the calendar\n   * @example Info.months()[0] //=> 'January'\n   * @example Info.months('short')[0] //=> 'Jan'\n   * @example Info.months('numeric')[0] //=> '1'\n   * @example Info.months('short', { locale: 'fr-CA' } )[0] //=> 'janv.'\n   * @example Info.months('numeric', { locale: 'ar' })[0] //=> '١'\n   * @example Info.months('long', { outputCalendar: 'islamic' })[0] //=> 'Rabiʻ I'\n   * @return {Array}\n   */\n  static months(\n    length = \"long\",\n    { locale = null, numberingSystem = null, locObj = null, outputCalendar = \"gregory\" } = {}\n  ) {\n    return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length);\n  }\n\n  /**\n   * Return an array of format month names.\n   * Format months differ from standalone months in that they're meant to appear next to the day of the month. In some languages, that\n   * changes the string.\n   * See {@link Info#months}\n   * @param {string} [length='long'] - the length of the month representation, such as \"numeric\", \"2-digit\", \"narrow\", \"short\", \"long\"\n   * @param {Object} opts - options\n   * @param {string} [opts.locale] - the locale code\n   * @param {string} [opts.numberingSystem=null] - the numbering system\n   * @param {string} [opts.locObj=null] - an existing locale object to use\n   * @param {string} [opts.outputCalendar='gregory'] - the calendar\n   * @return {Array}\n   */\n  static monthsFormat(\n    length = \"long\",\n    { locale = null, numberingSystem = null, locObj = null, outputCalendar = \"gregory\" } = {}\n  ) {\n    return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length, true);\n  }\n\n  /**\n   * Return an array of standalone week names.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat\n   * @param {string} [length='long'] - the length of the weekday representation, such as \"narrow\", \"short\", \"long\".\n   * @param {Object} opts - options\n   * @param {string} [opts.locale] - the locale code\n   * @param {string} [opts.numberingSystem=null] - the numbering system\n   * @param {string} [opts.locObj=null] - an existing locale object to use\n   * @example Info.weekdays()[0] //=> 'Monday'\n   * @example Info.weekdays('short')[0] //=> 'Mon'\n   * @example Info.weekdays('short', { locale: 'fr-CA' })[0] //=> 'lun.'\n   * @example Info.weekdays('short', { locale: 'ar' })[0] //=> 'الاثنين'\n   * @return {Array}\n   */\n  static weekdays(length = \"long\", { locale = null, numberingSystem = null, locObj = null } = {}) {\n    return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length);\n  }\n\n  /**\n   * Return an array of format week names.\n   * Format weekdays differ from standalone weekdays in that they're meant to appear next to more date information. In some languages, that\n   * changes the string.\n   * See {@link Info#weekdays}\n   * @param {string} [length='long'] - the length of the month representation, such as \"narrow\", \"short\", \"long\".\n   * @param {Object} opts - options\n   * @param {string} [opts.locale=null] - the locale code\n   * @param {string} [opts.numberingSystem=null] - the numbering system\n   * @param {string} [opts.locObj=null] - an existing locale object to use\n   * @return {Array}\n   */\n  static weekdaysFormat(\n    length = \"long\",\n    { locale = null, numberingSystem = null, locObj = null } = {}\n  ) {\n    return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length, true);\n  }\n\n  /**\n   * Return an array of meridiems.\n   * @param {Object} opts - options\n   * @param {string} [opts.locale] - the locale code\n   * @example Info.meridiems() //=> [ 'AM', 'PM' ]\n   * @example Info.meridiems({ locale: 'my' }) //=> [ 'နံနက်', 'ညနေ' ]\n   * @return {Array}\n   */\n  static meridiems({ locale = null } = {}) {\n    return Locale.create(locale).meridiems();\n  }\n\n  /**\n   * Return an array of eras, such as ['BC', 'AD']. The locale can be specified, but the calendar system is always Gregorian.\n   * @param {string} [length='short'] - the length of the era representation, such as \"short\" or \"long\".\n   * @param {Object} opts - options\n   * @param {string} [opts.locale] - the locale code\n   * @example Info.eras() //=> [ 'BC', 'AD' ]\n   * @example Info.eras('long') //=> [ 'Before Christ', 'Anno Domini' ]\n   * @example Info.eras('long', { locale: 'fr' }) //=> [ 'avant Jésus-Christ', 'après Jésus-Christ' ]\n   * @return {Array}\n   */\n  static eras(length = \"short\", { locale = null } = {}) {\n    return Locale.create(locale, null, \"gregory\").eras(length);\n  }\n\n  /**\n   * Return the set of available features in this environment.\n   * Some features of Luxon are not available in all environments. For example, on older browsers, relative time formatting support is not available. Use this function to figure out if that's the case.\n   * Keys:\n   * * `relative`: whether this environment supports relative time formatting\n   * * `localeWeek`: whether this environment supports different weekdays for the start of the week based on the locale\n   * @example Info.features() //=> { relative: false, localeWeek: true }\n   * @return {Object}\n   */\n  static features() {\n    return { relative: hasRelative(), localeWeek: hasLocaleWeekInfo() };\n  }\n}\n","import Duration from \"../duration.js\";\n\nfunction dayDiff(earlier, later) {\n  const utcDayStart = (dt) => dt.toUTC(0, { keepLocalTime: true }).startOf(\"day\").valueOf(),\n    ms = utcDayStart(later) - utcDayStart(earlier);\n  return Math.floor(Duration.fromMillis(ms).as(\"days\"));\n}\n\nfunction highOrderDiffs(cursor, later, units) {\n  const differs = [\n    [\"years\", (a, b) => b.year - a.year],\n    [\"quarters\", (a, b) => b.quarter - a.quarter + (b.year - a.year) * 4],\n    [\"months\", (a, b) => b.month - a.month + (b.year - a.year) * 12],\n    [\n      \"weeks\",\n      (a, b) => {\n        const days = dayDiff(a, b);\n        return (days - (days % 7)) / 7;\n      },\n    ],\n    [\"days\", dayDiff],\n  ];\n\n  const results = {};\n  const earlier = cursor;\n  let lowestOrder, highWater;\n\n  /* This loop tries to diff using larger units first.\n     If we overshoot, we backtrack and try the next smaller unit.\n     \"cursor\" starts out at the earlier timestamp and moves closer and closer to \"later\"\n     as we use smaller and smaller units.\n     highWater keeps track of where we would be if we added one more of the smallest unit,\n     this is used later to potentially convert any difference smaller than the smallest higher order unit\n     into a fraction of that smallest higher order unit\n  */\n  for (const [unit, differ] of differs) {\n    if (units.indexOf(unit) >= 0) {\n      lowestOrder = unit;\n\n      results[unit] = differ(cursor, later);\n      highWater = earlier.plus(results);\n\n      if (highWater > later) {\n        // we overshot the end point, backtrack cursor by 1\n        results[unit]--;\n        cursor = earlier.plus(results);\n\n        // if we are still overshooting now, we need to backtrack again\n        // this happens in certain situations when diffing times in different zones,\n        // because this calculation ignores time zones\n        if (cursor > later) {\n          // keep the \"overshot by 1\" around as highWater\n          highWater = cursor;\n          // backtrack cursor by 1\n          results[unit]--;\n          cursor = earlier.plus(results);\n        }\n      } else {\n        cursor = highWater;\n      }\n    }\n  }\n\n  return [cursor, results, highWater, lowestOrder];\n}\n\nexport default function (earlier, later, units, opts) {\n  let [cursor, results, highWater, lowestOrder] = highOrderDiffs(earlier, later, units);\n\n  const remainingMillis = later - cursor;\n\n  const lowerOrderUnits = units.filter(\n    (u) => [\"hours\", \"minutes\", \"seconds\", \"milliseconds\"].indexOf(u) >= 0\n  );\n\n  if (lowerOrderUnits.length === 0) {\n    if (highWater < later) {\n      highWater = cursor.plus({ [lowestOrder]: 1 });\n    }\n\n    if (highWater !== cursor) {\n      results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);\n    }\n  }\n\n  const duration = Duration.fromObject(results, opts);\n\n  if (lowerOrderUnits.length > 0) {\n    return Duration.fromMillis(remainingMillis, opts)\n      .shiftTo(...lowerOrderUnits)\n      .plus(duration);\n  } else {\n    return duration;\n  }\n}\n","const numberingSystems = {\n  arab: \"[\\u0660-\\u0669]\",\n  arabext: \"[\\u06F0-\\u06F9]\",\n  bali: \"[\\u1B50-\\u1B59]\",\n  beng: \"[\\u09E6-\\u09EF]\",\n  deva: \"[\\u0966-\\u096F]\",\n  fullwide: \"[\\uFF10-\\uFF19]\",\n  gujr: \"[\\u0AE6-\\u0AEF]\",\n  hanidec: \"[〇|一|二|三|四|五|六|七|八|九]\",\n  khmr: \"[\\u17E0-\\u17E9]\",\n  knda: \"[\\u0CE6-\\u0CEF]\",\n  laoo: \"[\\u0ED0-\\u0ED9]\",\n  limb: \"[\\u1946-\\u194F]\",\n  mlym: \"[\\u0D66-\\u0D6F]\",\n  mong: \"[\\u1810-\\u1819]\",\n  mymr: \"[\\u1040-\\u1049]\",\n  orya: \"[\\u0B66-\\u0B6F]\",\n  tamldec: \"[\\u0BE6-\\u0BEF]\",\n  telu: \"[\\u0C66-\\u0C6F]\",\n  thai: \"[\\u0E50-\\u0E59]\",\n  tibt: \"[\\u0F20-\\u0F29]\",\n  latn: \"\\\\d\",\n};\n\nconst numberingSystemsUTF16 = {\n  arab: [1632, 1641],\n  arabext: [1776, 1785],\n  bali: [6992, 7001],\n  beng: [2534, 2543],\n  deva: [2406, 2415],\n  fullwide: [65296, 65303],\n  gujr: [2790, 2799],\n  khmr: [6112, 6121],\n  knda: [3302, 3311],\n  laoo: [3792, 3801],\n  limb: [6470, 6479],\n  mlym: [3430, 3439],\n  mong: [6160, 6169],\n  mymr: [4160, 4169],\n  orya: [2918, 2927],\n  tamldec: [3046, 3055],\n  telu: [3174, 3183],\n  thai: [3664, 3673],\n  tibt: [3872, 3881],\n};\n\nconst hanidecChars = numberingSystems.hanidec.replace(/[\\[|\\]]/g, \"\").split(\"\");\n\nexport function parseDigits(str) {\n  let value = parseInt(str, 10);\n  if (isNaN(value)) {\n    value = \"\";\n    for (let i = 0; i < str.length; i++) {\n      const code = str.charCodeAt(i);\n\n      if (str[i].search(numberingSystems.hanidec) !== -1) {\n        value += hanidecChars.indexOf(str[i]);\n      } else {\n        for (const key in numberingSystemsUTF16) {\n          const [min, max] = numberingSystemsUTF16[key];\n          if (code >= min && code <= max) {\n            value += code - min;\n          }\n        }\n      }\n    }\n    return parseInt(value, 10);\n  } else {\n    return value;\n  }\n}\n\nexport function digitRegex({ numberingSystem }, append = \"\") {\n  return new RegExp(`${numberingSystems[numberingSystem || \"latn\"]}${append}`);\n}\n","import { parseMillis, isUndefined, untruncateYear, signedOffset, hasOwnProperty } from \"./util.js\";\nimport Formatter from \"./formatter.js\";\nimport FixedOffsetZone from \"../zones/fixedOffsetZone.js\";\nimport IANAZone from \"../zones/IANAZone.js\";\nimport DateTime from \"../datetime.js\";\nimport { digitRegex, parseDigits } from \"./digits.js\";\nimport { ConflictingSpecificationError } from \"../errors.js\";\n\nconst MISSING_FTP = \"missing Intl.DateTimeFormat.formatToParts support\";\n\nfunction intUnit(regex, post = (i) => i) {\n  return { regex, deser: ([s]) => post(parseDigits(s)) };\n}\n\nconst NBSP = String.fromCharCode(160);\nconst spaceOrNBSP = `[ ${NBSP}]`;\nconst spaceOrNBSPRegExp = new RegExp(spaceOrNBSP, \"g\");\n\nfunction fixListRegex(s) {\n  // make dots optional and also make them literal\n  // make space and non breakable space characters interchangeable\n  return s.replace(/\\./g, \"\\\\.?\").replace(spaceOrNBSPRegExp, spaceOrNBSP);\n}\n\nfunction stripInsensitivities(s) {\n  return s\n    .replace(/\\./g, \"\") // ignore dots that were made optional\n    .replace(spaceOrNBSPRegExp, \" \") // interchange space and nbsp\n    .toLowerCase();\n}\n\nfunction oneOf(strings, startIndex) {\n  if (strings === null) {\n    return null;\n  } else {\n    return {\n      regex: RegExp(strings.map(fixListRegex).join(\"|\")),\n      deser: ([s]) =>\n        strings.findIndex((i) => stripInsensitivities(s) === stripInsensitivities(i)) + startIndex,\n    };\n  }\n}\n\nfunction offset(regex, groups) {\n  return { regex, deser: ([, h, m]) => signedOffset(h, m), groups };\n}\n\nfunction simple(regex) {\n  return { regex, deser: ([s]) => s };\n}\n\nfunction escapeToken(value) {\n  return value.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\n}\n\n/**\n * @param token\n * @param {Locale} loc\n */\nfunction unitForToken(token, loc) {\n  const one = digitRegex(loc),\n    two = digitRegex(loc, \"{2}\"),\n    three = digitRegex(loc, \"{3}\"),\n    four = digitRegex(loc, \"{4}\"),\n    six = digitRegex(loc, \"{6}\"),\n    oneOrTwo = digitRegex(loc, \"{1,2}\"),\n    oneToThree = digitRegex(loc, \"{1,3}\"),\n    oneToSix = digitRegex(loc, \"{1,6}\"),\n    oneToNine = digitRegex(loc, \"{1,9}\"),\n    twoToFour = digitRegex(loc, \"{2,4}\"),\n    fourToSix = digitRegex(loc, \"{4,6}\"),\n    literal = (t) => ({ regex: RegExp(escapeToken(t.val)), deser: ([s]) => s, literal: true }),\n    unitate = (t) => {\n      if (token.literal) {\n        return literal(t);\n      }\n      switch (t.val) {\n        // era\n        case \"G\":\n          return oneOf(loc.eras(\"short\"), 0);\n        case \"GG\":\n          return oneOf(loc.eras(\"long\"), 0);\n        // years\n        case \"y\":\n          return intUnit(oneToSix);\n        case \"yy\":\n          return intUnit(twoToFour, untruncateYear);\n        case \"yyyy\":\n          return intUnit(four);\n        case \"yyyyy\":\n          return intUnit(fourToSix);\n        case \"yyyyyy\":\n          return intUnit(six);\n        // months\n        case \"M\":\n          return intUnit(oneOrTwo);\n        case \"MM\":\n          return intUnit(two);\n        case \"MMM\":\n          return oneOf(loc.months(\"short\", true), 1);\n        case \"MMMM\":\n          return oneOf(loc.months(\"long\", true), 1);\n        case \"L\":\n          return intUnit(oneOrTwo);\n        case \"LL\":\n          return intUnit(two);\n        case \"LLL\":\n          return oneOf(loc.months(\"short\", false), 1);\n        case \"LLLL\":\n          return oneOf(loc.months(\"long\", false), 1);\n        // dates\n        case \"d\":\n          return intUnit(oneOrTwo);\n        case \"dd\":\n          return intUnit(two);\n        // ordinals\n        case \"o\":\n          return intUnit(oneToThree);\n        case \"ooo\":\n          return intUnit(three);\n        // time\n        case \"HH\":\n          return intUnit(two);\n        case \"H\":\n          return intUnit(oneOrTwo);\n        case \"hh\":\n          return intUnit(two);\n        case \"h\":\n          return intUnit(oneOrTwo);\n        case \"mm\":\n          return intUnit(two);\n        case \"m\":\n          return intUnit(oneOrTwo);\n        case \"q\":\n          return intUnit(oneOrTwo);\n        case \"qq\":\n          return intUnit(two);\n        case \"s\":\n          return intUnit(oneOrTwo);\n        case \"ss\":\n          return intUnit(two);\n        case \"S\":\n          return intUnit(oneToThree);\n        case \"SSS\":\n          return intUnit(three);\n        case \"u\":\n          return simple(oneToNine);\n        case \"uu\":\n          return simple(oneOrTwo);\n        case \"uuu\":\n          return intUnit(one);\n        // meridiem\n        case \"a\":\n          return oneOf(loc.meridiems(), 0);\n        // weekYear (k)\n        case \"kkkk\":\n          return intUnit(four);\n        case \"kk\":\n          return intUnit(twoToFour, untruncateYear);\n        // weekNumber (W)\n        case \"W\":\n          return intUnit(oneOrTwo);\n        case \"WW\":\n          return intUnit(two);\n        // weekdays\n        case \"E\":\n        case \"c\":\n          return intUnit(one);\n        case \"EEE\":\n          return oneOf(loc.weekdays(\"short\", false), 1);\n        case \"EEEE\":\n          return oneOf(loc.weekdays(\"long\", false), 1);\n        case \"ccc\":\n          return oneOf(loc.weekdays(\"short\", true), 1);\n        case \"cccc\":\n          return oneOf(loc.weekdays(\"long\", true), 1);\n        // offset/zone\n        case \"Z\":\n        case \"ZZ\":\n          return offset(new RegExp(`([+-]${oneOrTwo.source})(?::(${two.source}))?`), 2);\n        case \"ZZZ\":\n          return offset(new RegExp(`([+-]${oneOrTwo.source})(${two.source})?`), 2);\n        // we don't support ZZZZ (PST) or ZZZZZ (Pacific Standard Time) in parsing\n        // because we don't have any way to figure out what they are\n        case \"z\":\n          return simple(/[a-z_+-/]{1,256}?/i);\n        // this special-case \"token\" represents a place where a macro-token expanded into a white-space literal\n        // in this case we accept any non-newline white-space\n        case \" \":\n          return simple(/[^\\S\\n\\r]/);\n        default:\n          return literal(t);\n      }\n    };\n\n  const unit = unitate(token) || {\n    invalidReason: MISSING_FTP,\n  };\n\n  unit.token = token;\n\n  return unit;\n}\n\nconst partTypeStyleToTokenVal = {\n  year: {\n    \"2-digit\": \"yy\",\n    numeric: \"yyyyy\",\n  },\n  month: {\n    numeric: \"M\",\n    \"2-digit\": \"MM\",\n    short: \"MMM\",\n    long: \"MMMM\",\n  },\n  day: {\n    numeric: \"d\",\n    \"2-digit\": \"dd\",\n  },\n  weekday: {\n    short: \"EEE\",\n    long: \"EEEE\",\n  },\n  dayperiod: \"a\",\n  dayPeriod: \"a\",\n  hour12: {\n    numeric: \"h\",\n    \"2-digit\": \"hh\",\n  },\n  hour24: {\n    numeric: \"H\",\n    \"2-digit\": \"HH\",\n  },\n  minute: {\n    numeric: \"m\",\n    \"2-digit\": \"mm\",\n  },\n  second: {\n    numeric: \"s\",\n    \"2-digit\": \"ss\",\n  },\n  timeZoneName: {\n    long: \"ZZZZZ\",\n    short: \"ZZZ\",\n  },\n};\n\nfunction tokenForPart(part, formatOpts, resolvedOpts) {\n  const { type, value } = part;\n\n  if (type === \"literal\") {\n    const isSpace = /^\\s+$/.test(value);\n    return {\n      literal: !isSpace,\n      val: isSpace ? \" \" : value,\n    };\n  }\n\n  const style = formatOpts[type];\n\n  // The user might have explicitly specified hour12 or hourCycle\n  // if so, respect their decision\n  // if not, refer back to the resolvedOpts, which are based on the locale\n  let actualType = type;\n  if (type === \"hour\") {\n    if (formatOpts.hour12 != null) {\n      actualType = formatOpts.hour12 ? \"hour12\" : \"hour24\";\n    } else if (formatOpts.hourCycle != null) {\n      if (formatOpts.hourCycle === \"h11\" || formatOpts.hourCycle === \"h12\") {\n        actualType = \"hour12\";\n      } else {\n        actualType = \"hour24\";\n      }\n    } else {\n      // tokens only differentiate between 24 hours or not,\n      // so we do not need to check hourCycle here, which is less supported anyways\n      actualType = resolvedOpts.hour12 ? \"hour12\" : \"hour24\";\n    }\n  }\n  let val = partTypeStyleToTokenVal[actualType];\n  if (typeof val === \"object\") {\n    val = val[style];\n  }\n\n  if (val) {\n    return {\n      literal: false,\n      val,\n    };\n  }\n\n  return undefined;\n}\n\nfunction buildRegex(units) {\n  const re = units.map((u) => u.regex).reduce((f, r) => `${f}(${r.source})`, \"\");\n  return [`^${re}$`, units];\n}\n\nfunction match(input, regex, handlers) {\n  const matches = input.match(regex);\n\n  if (matches) {\n    const all = {};\n    let matchIndex = 1;\n    for (const i in handlers) {\n      if (hasOwnProperty(handlers, i)) {\n        const h = handlers[i],\n          groups = h.groups ? h.groups + 1 : 1;\n        if (!h.literal && h.token) {\n          all[h.token.val[0]] = h.deser(matches.slice(matchIndex, matchIndex + groups));\n        }\n        matchIndex += groups;\n      }\n    }\n    return [matches, all];\n  } else {\n    return [matches, {}];\n  }\n}\n\nfunction dateTimeFromMatches(matches) {\n  const toField = (token) => {\n    switch (token) {\n      case \"S\":\n        return \"millisecond\";\n      case \"s\":\n        return \"second\";\n      case \"m\":\n        return \"minute\";\n      case \"h\":\n      case \"H\":\n        return \"hour\";\n      case \"d\":\n        return \"day\";\n      case \"o\":\n        return \"ordinal\";\n      case \"L\":\n      case \"M\":\n        return \"month\";\n      case \"y\":\n        return \"year\";\n      case \"E\":\n      case \"c\":\n        return \"weekday\";\n      case \"W\":\n        return \"weekNumber\";\n      case \"k\":\n        return \"weekYear\";\n      case \"q\":\n        return \"quarter\";\n      default:\n        return null;\n    }\n  };\n\n  let zone = null;\n  let specificOffset;\n  if (!isUndefined(matches.z)) {\n    zone = IANAZone.create(matches.z);\n  }\n\n  if (!isUndefined(matches.Z)) {\n    if (!zone) {\n      zone = new FixedOffsetZone(matches.Z);\n    }\n    specificOffset = matches.Z;\n  }\n\n  if (!isUndefined(matches.q)) {\n    matches.M = (matches.q - 1) * 3 + 1;\n  }\n\n  if (!isUndefined(matches.h)) {\n    if (matches.h < 12 && matches.a === 1) {\n      matches.h += 12;\n    } else if (matches.h === 12 && matches.a === 0) {\n      matches.h = 0;\n    }\n  }\n\n  if (matches.G === 0 && matches.y) {\n    matches.y = -matches.y;\n  }\n\n  if (!isUndefined(matches.u)) {\n    matches.S = parseMillis(matches.u);\n  }\n\n  const vals = Object.keys(matches).reduce((r, k) => {\n    const f = toField(k);\n    if (f) {\n      r[f] = matches[k];\n    }\n\n    return r;\n  }, {});\n\n  return [vals, zone, specificOffset];\n}\n\nlet dummyDateTimeCache = null;\n\nfunction getDummyDateTime() {\n  if (!dummyDateTimeCache) {\n    dummyDateTimeCache = DateTime.fromMillis(1555555555555);\n  }\n\n  return dummyDateTimeCache;\n}\n\nfunction maybeExpandMacroToken(token, locale) {\n  if (token.literal) {\n    return token;\n  }\n\n  const formatOpts = Formatter.macroTokenToFormatOpts(token.val);\n  const tokens = formatOptsToTokens(formatOpts, locale);\n\n  if (tokens == null || tokens.includes(undefined)) {\n    return token;\n  }\n\n  return tokens;\n}\n\nexport function expandMacroTokens(tokens, locale) {\n  return Array.prototype.concat(...tokens.map((t) => maybeExpandMacroToken(t, locale)));\n}\n\n/**\n * @private\n */\n\nexport function explainFromTokens(locale, input, format) {\n  const tokens = expandMacroTokens(Formatter.parseFormat(format), locale),\n    units = tokens.map((t) => unitForToken(t, locale)),\n    disqualifyingUnit = units.find((t) => t.invalidReason);\n\n  if (disqualifyingUnit) {\n    return { input, tokens, invalidReason: disqualifyingUnit.invalidReason };\n  } else {\n    const [regexString, handlers] = buildRegex(units),\n      regex = RegExp(regexString, \"i\"),\n      [rawMatches, matches] = match(input, regex, handlers),\n      [result, zone, specificOffset] = matches\n        ? dateTimeFromMatches(matches)\n        : [null, null, undefined];\n    if (hasOwnProperty(matches, \"a\") && hasOwnProperty(matches, \"H\")) {\n      throw new ConflictingSpecificationError(\n        \"Can't include meridiem when specifying 24-hour format\"\n      );\n    }\n    return { input, tokens, regex, rawMatches, matches, result, zone, specificOffset };\n  }\n}\n\nexport function parseFromTokens(locale, input, format) {\n  const { result, zone, specificOffset, invalidReason } = explainFromTokens(locale, input, format);\n  return [result, zone, specificOffset, invalidReason];\n}\n\nexport function formatOptsToTokens(formatOpts, locale) {\n  if (!formatOpts) {\n    return null;\n  }\n\n  const formatter = Formatter.create(locale, formatOpts);\n  const df = formatter.dtFormatter(getDummyDateTime());\n  const parts = df.formatToParts();\n  const resolvedOpts = df.resolvedOptions();\n  return parts.map((p) => tokenForPart(p, formatOpts, resolvedOpts));\n}\n","import Duration from \"./duration.js\";\nimport Interval from \"./interval.js\";\nimport Settings from \"./settings.js\";\nimport Info from \"./info.js\";\nimport Formatter from \"./impl/formatter.js\";\nimport FixedOffsetZone from \"./zones/fixedOffsetZone.js\";\nimport Locale from \"./impl/locale.js\";\nimport {\n  isUndefined,\n  maybeArray,\n  isDate,\n  isNumber,\n  bestBy,\n  daysInMonth,\n  daysInYear,\n  isLeapYear,\n  weeksInWeekYear,\n  normalizeObject,\n  roundTo,\n  objToLocalTS,\n  padStart,\n} from \"./impl/util.js\";\nimport { normalizeZone } from \"./impl/zoneUtil.js\";\nimport diff from \"./impl/diff.js\";\nimport { parseRFC2822Date, parseISODate, parseHTTPDate, parseSQL } from \"./impl/regexParser.js\";\nimport {\n  parseFromTokens,\n  explainFromTokens,\n  formatOptsToTokens,\n  expandMacroTokens,\n} from \"./impl/tokenParser.js\";\nimport {\n  gregorianToWeek,\n  weekToGregorian,\n  gregorianToOrdinal,\n  ordinalToGregorian,\n  hasInvalidGregorianData,\n  hasInvalidWeekData,\n  hasInvalidOrdinalData,\n  hasInvalidTimeData,\n  usesLocalWeekValues,\n  isoWeekdayToLocal,\n} from \"./impl/conversions.js\";\nimport * as Formats from \"./impl/formats.js\";\nimport {\n  InvalidArgumentError,\n  ConflictingSpecificationError,\n  InvalidUnitError,\n  InvalidDateTimeError,\n} from \"./errors.js\";\nimport Invalid from \"./impl/invalid.js\";\n\nconst INVALID = \"Invalid DateTime\";\nconst MAX_DATE = 8.64e15;\n\nfunction unsupportedZone(zone) {\n  return new Invalid(\"unsupported zone\", `the zone \"${zone.name}\" is not supported`);\n}\n\n// we cache week data on the DT object and this intermediates the cache\n/**\n * @param {DateTime} dt\n */\nfunction possiblyCachedWeekData(dt) {\n  if (dt.weekData === null) {\n    dt.weekData = gregorianToWeek(dt.c);\n  }\n  return dt.weekData;\n}\n\n/**\n * @param {DateTime} dt\n */\nfunction possiblyCachedLocalWeekData(dt) {\n  if (dt.localWeekData === null) {\n    dt.localWeekData = gregorianToWeek(\n      dt.c,\n      dt.loc.getMinDaysInFirstWeek(),\n      dt.loc.getStartOfWeek()\n    );\n  }\n  return dt.localWeekData;\n}\n\n// clone really means, \"make a new object with these modifications\". all \"setters\" really use this\n// to create a new object while only changing some of the properties\nfunction clone(inst, alts) {\n  const current = {\n    ts: inst.ts,\n    zone: inst.zone,\n    c: inst.c,\n    o: inst.o,\n    loc: inst.loc,\n    invalid: inst.invalid,\n  };\n  return new DateTime({ ...current, ...alts, old: current });\n}\n\n// find the right offset a given local time. The o input is our guess, which determines which\n// offset we'll pick in ambiguous cases (e.g. there are two 3 AMs b/c Fallback DST)\nfunction fixOffset(localTS, o, tz) {\n  // Our UTC time is just a guess because our offset is just a guess\n  let utcGuess = localTS - o * 60 * 1000;\n\n  // Test whether the zone matches the offset for this ts\n  const o2 = tz.offset(utcGuess);\n\n  // If so, offset didn't change and we're done\n  if (o === o2) {\n    return [utcGuess, o];\n  }\n\n  // If not, change the ts by the difference in the offset\n  utcGuess -= (o2 - o) * 60 * 1000;\n\n  // If that gives us the local time we want, we're done\n  const o3 = tz.offset(utcGuess);\n  if (o2 === o3) {\n    return [utcGuess, o2];\n  }\n\n  // If it's different, we're in a hole time. The offset has changed, but the we don't adjust the time\n  return [localTS - Math.min(o2, o3) * 60 * 1000, Math.max(o2, o3)];\n}\n\n// convert an epoch timestamp into a calendar object with the given offset\nfunction tsToObj(ts, offset) {\n  ts += offset * 60 * 1000;\n\n  const d = new Date(ts);\n\n  return {\n    year: d.getUTCFullYear(),\n    month: d.getUTCMonth() + 1,\n    day: d.getUTCDate(),\n    hour: d.getUTCHours(),\n    minute: d.getUTCMinutes(),\n    second: d.getUTCSeconds(),\n    millisecond: d.getUTCMilliseconds(),\n  };\n}\n\n// convert a calendar object to a epoch timestamp\nfunction objToTS(obj, offset, zone) {\n  return fixOffset(objToLocalTS(obj), offset, zone);\n}\n\n// create a new DT instance by adding a duration, adjusting for DSTs\nfunction adjustTime(inst, dur) {\n  const oPre = inst.o,\n    year = inst.c.year + Math.trunc(dur.years),\n    month = inst.c.month + Math.trunc(dur.months) + Math.trunc(dur.quarters) * 3,\n    c = {\n      ...inst.c,\n      year,\n      month,\n      day:\n        Math.min(inst.c.day, daysInMonth(year, month)) +\n        Math.trunc(dur.days) +\n        Math.trunc(dur.weeks) * 7,\n    },\n    millisToAdd = Duration.fromObject({\n      years: dur.years - Math.trunc(dur.years),\n      quarters: dur.quarters - Math.trunc(dur.quarters),\n      months: dur.months - Math.trunc(dur.months),\n      weeks: dur.weeks - Math.trunc(dur.weeks),\n      days: dur.days - Math.trunc(dur.days),\n      hours: dur.hours,\n      minutes: dur.minutes,\n      seconds: dur.seconds,\n      milliseconds: dur.milliseconds,\n    }).as(\"milliseconds\"),\n    localTS = objToLocalTS(c);\n\n  let [ts, o] = fixOffset(localTS, oPre, inst.zone);\n\n  if (millisToAdd !== 0) {\n    ts += millisToAdd;\n    // that could have changed the offset by going over a DST, but we want to keep the ts the same\n    o = inst.zone.offset(ts);\n  }\n\n  return { ts, o };\n}\n\n// helper useful in turning the results of parsing into real dates\n// by handling the zone options\nfunction parseDataToDateTime(parsed, parsedZone, opts, format, text, specificOffset) {\n  const { setZone, zone } = opts;\n  if ((parsed && Object.keys(parsed).length !== 0) || parsedZone) {\n    const interpretationZone = parsedZone || zone,\n      inst = DateTime.fromObject(parsed, {\n        ...opts,\n        zone: interpretationZone,\n        specificOffset,\n      });\n    return setZone ? inst : inst.setZone(zone);\n  } else {\n    return DateTime.invalid(\n      new Invalid(\"unparsable\", `the input \"${text}\" can't be parsed as ${format}`)\n    );\n  }\n}\n\n// if you want to output a technical format (e.g. RFC 2822), this helper\n// helps handle the details\nfunction toTechFormat(dt, format, allowZ = true) {\n  return dt.isValid\n    ? Formatter.create(Locale.create(\"en-US\"), {\n        allowZ,\n        forceSimple: true,\n      }).formatDateTimeFromString(dt, format)\n    : null;\n}\n\nfunction toISODate(o, extended) {\n  const longFormat = o.c.year > 9999 || o.c.year < 0;\n  let c = \"\";\n  if (longFormat && o.c.year >= 0) c += \"+\";\n  c += padStart(o.c.year, longFormat ? 6 : 4);\n\n  if (extended) {\n    c += \"-\";\n    c += padStart(o.c.month);\n    c += \"-\";\n    c += padStart(o.c.day);\n  } else {\n    c += padStart(o.c.month);\n    c += padStart(o.c.day);\n  }\n  return c;\n}\n\nfunction toISOTime(\n  o,\n  extended,\n  suppressSeconds,\n  suppressMilliseconds,\n  includeOffset,\n  extendedZone\n) {\n  let c = padStart(o.c.hour);\n  if (extended) {\n    c += \":\";\n    c += padStart(o.c.minute);\n    if (o.c.millisecond !== 0 || o.c.second !== 0 || !suppressSeconds) {\n      c += \":\";\n    }\n  } else {\n    c += padStart(o.c.minute);\n  }\n\n  if (o.c.millisecond !== 0 || o.c.second !== 0 || !suppressSeconds) {\n    c += padStart(o.c.second);\n\n    if (o.c.millisecond !== 0 || !suppressMilliseconds) {\n      c += \".\";\n      c += padStart(o.c.millisecond, 3);\n    }\n  }\n\n  if (includeOffset) {\n    if (o.isOffsetFixed && o.offset === 0 && !extendedZone) {\n      c += \"Z\";\n    } else if (o.o < 0) {\n      c += \"-\";\n      c += padStart(Math.trunc(-o.o / 60));\n      c += \":\";\n      c += padStart(Math.trunc(-o.o % 60));\n    } else {\n      c += \"+\";\n      c += padStart(Math.trunc(o.o / 60));\n      c += \":\";\n      c += padStart(Math.trunc(o.o % 60));\n    }\n  }\n\n  if (extendedZone) {\n    c += \"[\" + o.zone.ianaName + \"]\";\n  }\n  return c;\n}\n\n// defaults for unspecified units in the supported calendars\nconst defaultUnitValues = {\n    month: 1,\n    day: 1,\n    hour: 0,\n    minute: 0,\n    second: 0,\n    millisecond: 0,\n  },\n  defaultWeekUnitValues = {\n    weekNumber: 1,\n    weekday: 1,\n    hour: 0,\n    minute: 0,\n    second: 0,\n    millisecond: 0,\n  },\n  defaultOrdinalUnitValues = {\n    ordinal: 1,\n    hour: 0,\n    minute: 0,\n    second: 0,\n    millisecond: 0,\n  };\n\n// Units in the supported calendars, sorted by bigness\nconst orderedUnits = [\"year\", \"month\", \"day\", \"hour\", \"minute\", \"second\", \"millisecond\"],\n  orderedWeekUnits = [\n    \"weekYear\",\n    \"weekNumber\",\n    \"weekday\",\n    \"hour\",\n    \"minute\",\n    \"second\",\n    \"millisecond\",\n  ],\n  orderedOrdinalUnits = [\"year\", \"ordinal\", \"hour\", \"minute\", \"second\", \"millisecond\"];\n\n// standardize case and plurality in units\nfunction normalizeUnit(unit) {\n  const normalized = {\n    year: \"year\",\n    years: \"year\",\n    month: \"month\",\n    months: \"month\",\n    day: \"day\",\n    days: \"day\",\n    hour: \"hour\",\n    hours: \"hour\",\n    minute: \"minute\",\n    minutes: \"minute\",\n    quarter: \"quarter\",\n    quarters: \"quarter\",\n    second: \"second\",\n    seconds: \"second\",\n    millisecond: \"millisecond\",\n    milliseconds: \"millisecond\",\n    weekday: \"weekday\",\n    weekdays: \"weekday\",\n    weeknumber: \"weekNumber\",\n    weeksnumber: \"weekNumber\",\n    weeknumbers: \"weekNumber\",\n    weekyear: \"weekYear\",\n    weekyears: \"weekYear\",\n    ordinal: \"ordinal\",\n  }[unit.toLowerCase()];\n\n  if (!normalized) throw new InvalidUnitError(unit);\n\n  return normalized;\n}\n\nfunction normalizeUnitWithLocalWeeks(unit) {\n  switch (unit.toLowerCase()) {\n    case \"localweekday\":\n    case \"localweekdays\":\n      return \"localWeekday\";\n    case \"localweeknumber\":\n    case \"localweeknumbers\":\n      return \"localWeekNumber\";\n    case \"localweekyear\":\n    case \"localweekyears\":\n      return \"localWeekYear\";\n    default:\n      return normalizeUnit(unit);\n  }\n}\n\n// this is a dumbed down version of fromObject() that runs about 60% faster\n// but doesn't do any validation, makes a bunch of assumptions about what units\n// are present, and so on.\nfunction quickDT(obj, opts) {\n  const zone = normalizeZone(opts.zone, Settings.defaultZone),\n    loc = Locale.fromObject(opts),\n    tsNow = Settings.now();\n\n  let ts, o;\n\n  // assume we have the higher-order units\n  if (!isUndefined(obj.year)) {\n    for (const u of orderedUnits) {\n      if (isUndefined(obj[u])) {\n        obj[u] = defaultUnitValues[u];\n      }\n    }\n\n    const invalid = hasInvalidGregorianData(obj) || hasInvalidTimeData(obj);\n    if (invalid) {\n      return DateTime.invalid(invalid);\n    }\n\n    const offsetProvis = zone.offset(tsNow);\n    [ts, o] = objToTS(obj, offsetProvis, zone);\n  } else {\n    ts = tsNow;\n  }\n\n  return new DateTime({ ts, zone, loc, o });\n}\n\nfunction diffRelative(start, end, opts) {\n  const round = isUndefined(opts.round) ? true : opts.round,\n    format = (c, unit) => {\n      c = roundTo(c, round || opts.calendary ? 0 : 2, true);\n      const formatter = end.loc.clone(opts).relFormatter(opts);\n      return formatter.format(c, unit);\n    },\n    differ = (unit) => {\n      if (opts.calendary) {\n        if (!end.hasSame(start, unit)) {\n          return end.startOf(unit).diff(start.startOf(unit), unit).get(unit);\n        } else return 0;\n      } else {\n        return end.diff(start, unit).get(unit);\n      }\n    };\n\n  if (opts.unit) {\n    return format(differ(opts.unit), opts.unit);\n  }\n\n  for (const unit of opts.units) {\n    const count = differ(unit);\n    if (Math.abs(count) >= 1) {\n      return format(count, unit);\n    }\n  }\n  return format(start > end ? -0 : 0, opts.units[opts.units.length - 1]);\n}\n\nfunction lastOpts(argList) {\n  let opts = {},\n    args;\n  if (argList.length > 0 && typeof argList[argList.length - 1] === \"object\") {\n    opts = argList[argList.length - 1];\n    args = Array.from(argList).slice(0, argList.length - 1);\n  } else {\n    args = Array.from(argList);\n  }\n  return [opts, args];\n}\n\n/**\n * A DateTime is an immutable data structure representing a specific date and time and accompanying methods. It contains class and instance methods for creating, parsing, interrogating, transforming, and formatting them.\n *\n * A DateTime comprises of:\n * * A timestamp. Each DateTime instance refers to a specific millisecond of the Unix epoch.\n * * A time zone. Each instance is considered in the context of a specific zone (by default the local system's zone).\n * * Configuration properties that effect how output strings are formatted, such as `locale`, `numberingSystem`, and `outputCalendar`.\n *\n * Here is a brief overview of the most commonly used functionality it provides:\n *\n * * **Creation**: To create a DateTime from its components, use one of its factory class methods: {@link DateTime.local}, {@link DateTime.utc}, and (most flexibly) {@link DateTime.fromObject}. To create one from a standard string format, use {@link DateTime.fromISO}, {@link DateTime.fromHTTP}, and {@link DateTime.fromRFC2822}. To create one from a custom string format, use {@link DateTime.fromFormat}. To create one from a native JS date, use {@link DateTime.fromJSDate}.\n * * **Gregorian calendar and time**: To examine the Gregorian properties of a DateTime individually (i.e as opposed to collectively through {@link DateTime#toObject}), use the {@link DateTime#year}, {@link DateTime#month},\n * {@link DateTime#day}, {@link DateTime#hour}, {@link DateTime#minute}, {@link DateTime#second}, {@link DateTime#millisecond} accessors.\n * * **Week calendar**: For ISO week calendar attributes, see the {@link DateTime#weekYear}, {@link DateTime#weekNumber}, and {@link DateTime#weekday} accessors.\n * * **Configuration** See the {@link DateTime#locale} and {@link DateTime#numberingSystem} accessors.\n * * **Transformation**: To transform the DateTime into other DateTimes, use {@link DateTime#set}, {@link DateTime#reconfigure}, {@link DateTime#setZone}, {@link DateTime#setLocale}, {@link DateTime.plus}, {@link DateTime#minus}, {@link DateTime#endOf}, {@link DateTime#startOf}, {@link DateTime#toUTC}, and {@link DateTime#toLocal}.\n * * **Output**: To convert the DateTime to other representations, use the {@link DateTime#toRelative}, {@link DateTime#toRelativeCalendar}, {@link DateTime#toJSON}, {@link DateTime#toISO}, {@link DateTime#toHTTP}, {@link DateTime#toObject}, {@link DateTime#toRFC2822}, {@link DateTime#toString}, {@link DateTime#toLocaleString}, {@link DateTime#toFormat}, {@link DateTime#toMillis} and {@link DateTime#toJSDate}.\n *\n * There's plenty others documented below. In addition, for more information on subtler topics like internationalization, time zones, alternative calendars, validity, and so on, see the external documentation.\n */\nexport default class DateTime {\n  /**\n   * @access private\n   */\n  constructor(config) {\n    const zone = config.zone || Settings.defaultZone;\n\n    let invalid =\n      config.invalid ||\n      (Number.isNaN(config.ts) ? new Invalid(\"invalid input\") : null) ||\n      (!zone.isValid ? unsupportedZone(zone) : null);\n    /**\n     * @access private\n     */\n    this.ts = isUndefined(config.ts) ? Settings.now() : config.ts;\n\n    let c = null,\n      o = null;\n    if (!invalid) {\n      const unchanged = config.old && config.old.ts === this.ts && config.old.zone.equals(zone);\n\n      if (unchanged) {\n        [c, o] = [config.old.c, config.old.o];\n      } else {\n        const ot = zone.offset(this.ts);\n        c = tsToObj(this.ts, ot);\n        invalid = Number.isNaN(c.year) ? new Invalid(\"invalid input\") : null;\n        c = invalid ? null : c;\n        o = invalid ? null : ot;\n      }\n    }\n\n    /**\n     * @access private\n     */\n    this._zone = zone;\n    /**\n     * @access private\n     */\n    this.loc = config.loc || Locale.create();\n    /**\n     * @access private\n     */\n    this.invalid = invalid;\n    /**\n     * @access private\n     */\n    this.weekData = null;\n    /**\n     * @access private\n     */\n    this.localWeekData = null;\n    /**\n     * @access private\n     */\n    this.c = c;\n    /**\n     * @access private\n     */\n    this.o = o;\n    /**\n     * @access private\n     */\n    this.isLuxonDateTime = true;\n  }\n\n  // CONSTRUCT\n\n  /**\n   * Create a DateTime for the current instant, in the system's time zone.\n   *\n   * Use Settings to override these default values if needed.\n   * @example DateTime.now().toISO() //~> now in the ISO format\n   * @return {DateTime}\n   */\n  static now() {\n    return new DateTime({});\n  }\n\n  /**\n   * Create a local DateTime\n   * @param {number} [year] - The calendar year. If omitted (as in, call `local()` with no arguments), the current time will be used\n   * @param {number} [month=1] - The month, 1-indexed\n   * @param {number} [day=1] - The day of the month, 1-indexed\n   * @param {number} [hour=0] - The hour of the day, in 24-hour time\n   * @param {number} [minute=0] - The minute of the hour, meaning a number between 0 and 59\n   * @param {number} [second=0] - The second of the minute, meaning a number between 0 and 59\n   * @param {number} [millisecond=0] - The millisecond of the second, meaning a number between 0 and 999\n   * @example DateTime.local()                                  //~> now\n   * @example DateTime.local({ zone: \"America/New_York\" })      //~> now, in US east coast time\n   * @example DateTime.local(2017)                              //~> 2017-01-01T00:00:00\n   * @example DateTime.local(2017, 3)                           //~> 2017-03-01T00:00:00\n   * @example DateTime.local(2017, 3, 12, { locale: \"fr\" })     //~> 2017-03-12T00:00:00, with a French locale\n   * @example DateTime.local(2017, 3, 12, 5)                    //~> 2017-03-12T05:00:00\n   * @example DateTime.local(2017, 3, 12, 5, { zone: \"utc\" })   //~> 2017-03-12T05:00:00, in UTC\n   * @example DateTime.local(2017, 3, 12, 5, 45)                //~> 2017-03-12T05:45:00\n   * @example DateTime.local(2017, 3, 12, 5, 45, 10)            //~> 2017-03-12T05:45:10\n   * @example DateTime.local(2017, 3, 12, 5, 45, 10, 765)       //~> 2017-03-12T05:45:10.765\n   * @return {DateTime}\n   */\n  static local() {\n    const [opts, args] = lastOpts(arguments),\n      [year, month, day, hour, minute, second, millisecond] = args;\n    return quickDT({ year, month, day, hour, minute, second, millisecond }, opts);\n  }\n\n  /**\n   * Create a DateTime in UTC\n   * @param {number} [year] - The calendar year. If omitted (as in, call `utc()` with no arguments), the current time will be used\n   * @param {number} [month=1] - The month, 1-indexed\n   * @param {number} [day=1] - The day of the month\n   * @param {number} [hour=0] - The hour of the day, in 24-hour time\n   * @param {number} [minute=0] - The minute of the hour, meaning a number between 0 and 59\n   * @param {number} [second=0] - The second of the minute, meaning a number between 0 and 59\n   * @param {number} [millisecond=0] - The millisecond of the second, meaning a number between 0 and 999\n   * @param {Object} options - configuration options for the DateTime\n   * @param {string} [options.locale] - a locale to set on the resulting DateTime instance\n   * @param {string} [options.outputCalendar] - the output calendar to set on the resulting DateTime instance\n   * @param {string} [options.numberingSystem] - the numbering system to set on the resulting DateTime instance\n   * @example DateTime.utc()                                              //~> now\n   * @example DateTime.utc(2017)                                          //~> 2017-01-01T00:00:00Z\n   * @example DateTime.utc(2017, 3)                                       //~> 2017-03-01T00:00:00Z\n   * @example DateTime.utc(2017, 3, 12)                                   //~> 2017-03-12T00:00:00Z\n   * @example DateTime.utc(2017, 3, 12, 5)                                //~> 2017-03-12T05:00:00Z\n   * @example DateTime.utc(2017, 3, 12, 5, 45)                            //~> 2017-03-12T05:45:00Z\n   * @example DateTime.utc(2017, 3, 12, 5, 45, { locale: \"fr\" })          //~> 2017-03-12T05:45:00Z with a French locale\n   * @example DateTime.utc(2017, 3, 12, 5, 45, 10)                        //~> 2017-03-12T05:45:10Z\n   * @example DateTime.utc(2017, 3, 12, 5, 45, 10, 765, { locale: \"fr\" }) //~> 2017-03-12T05:45:10.765Z with a French locale\n   * @return {DateTime}\n   */\n  static utc() {\n    const [opts, args] = lastOpts(arguments),\n      [year, month, day, hour, minute, second, millisecond] = args;\n\n    opts.zone = FixedOffsetZone.utcInstance;\n    return quickDT({ year, month, day, hour, minute, second, millisecond }, opts);\n  }\n\n  /**\n   * Create a DateTime from a JavaScript Date object. Uses the default zone.\n   * @param {Date} date - a JavaScript Date object\n   * @param {Object} options - configuration options for the DateTime\n   * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into\n   * @return {DateTime}\n   */\n  static fromJSDate(date, options = {}) {\n    const ts = isDate(date) ? date.valueOf() : NaN;\n    if (Number.isNaN(ts)) {\n      return DateTime.invalid(\"invalid input\");\n    }\n\n    const zoneToUse = normalizeZone(options.zone, Settings.defaultZone);\n    if (!zoneToUse.isValid) {\n      return DateTime.invalid(unsupportedZone(zoneToUse));\n    }\n\n    return new DateTime({\n      ts: ts,\n      zone: zoneToUse,\n      loc: Locale.fromObject(options),\n    });\n  }\n\n  /**\n   * Create a DateTime from a number of milliseconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone.\n   * @param {number} milliseconds - a number of milliseconds since 1970 UTC\n   * @param {Object} options - configuration options for the DateTime\n   * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into\n   * @param {string} [options.locale] - a locale to set on the resulting DateTime instance\n   * @param {string} options.outputCalendar - the output calendar to set on the resulting DateTime instance\n   * @param {string} options.numberingSystem - the numbering system to set on the resulting DateTime instance\n   * @return {DateTime}\n   */\n  static fromMillis(milliseconds, options = {}) {\n    if (!isNumber(milliseconds)) {\n      throw new InvalidArgumentError(\n        `fromMillis requires a numerical input, but received a ${typeof milliseconds} with value ${milliseconds}`\n      );\n    } else if (milliseconds < -MAX_DATE || milliseconds > MAX_DATE) {\n      // this isn't perfect because because we can still end up out of range because of additional shifting, but it's a start\n      return DateTime.invalid(\"Timestamp out of range\");\n    } else {\n      return new DateTime({\n        ts: milliseconds,\n        zone: normalizeZone(options.zone, Settings.defaultZone),\n        loc: Locale.fromObject(options),\n      });\n    }\n  }\n\n  /**\n   * Create a DateTime from a number of seconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone.\n   * @param {number} seconds - a number of seconds since 1970 UTC\n   * @param {Object} options - configuration options for the DateTime\n   * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into\n   * @param {string} [options.locale] - a locale to set on the resulting DateTime instance\n   * @param {string} options.outputCalendar - the output calendar to set on the resulting DateTime instance\n   * @param {string} options.numberingSystem - the numbering system to set on the resulting DateTime instance\n   * @return {DateTime}\n   */\n  static fromSeconds(seconds, options = {}) {\n    if (!isNumber(seconds)) {\n      throw new InvalidArgumentError(\"fromSeconds requires a numerical input\");\n    } else {\n      return new DateTime({\n        ts: seconds * 1000,\n        zone: normalizeZone(options.zone, Settings.defaultZone),\n        loc: Locale.fromObject(options),\n      });\n    }\n  }\n\n  /**\n   * Create a DateTime from a JavaScript object with keys like 'year' and 'hour' with reasonable defaults.\n   * @param {Object} obj - the object to create the DateTime from\n   * @param {number} obj.year - a year, such as 1987\n   * @param {number} obj.month - a month, 1-12\n   * @param {number} obj.day - a day of the month, 1-31, depending on the month\n   * @param {number} obj.ordinal - day of the year, 1-365 or 366\n   * @param {number} obj.weekYear - an ISO week year\n   * @param {number} obj.weekNumber - an ISO week number, between 1 and 52 or 53, depending on the year\n   * @param {number} obj.weekday - an ISO weekday, 1-7, where 1 is Monday and 7 is Sunday\n   * @param {number} obj.localWeekYear - a week year, according to the locale\n   * @param {number} obj.localWeekNumber - a week number, between 1 and 52 or 53, depending on the year, according to the locale\n   * @param {number} obj.localWeekday - a weekday, 1-7, where 1 is the first and 7 is the last day of the week, according to the locale\n   * @param {number} obj.hour - hour of the day, 0-23\n   * @param {number} obj.minute - minute of the hour, 0-59\n   * @param {number} obj.second - second of the minute, 0-59\n   * @param {number} obj.millisecond - millisecond of the second, 0-999\n   * @param {Object} opts - options for creating this DateTime\n   * @param {string|Zone} [opts.zone='local'] - interpret the numbers in the context of a particular zone. Can take any value taken as the first argument to setZone()\n   * @param {string} [opts.locale='system\\'s locale'] - a locale to set on the resulting DateTime instance\n   * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance\n   * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance\n   * @example DateTime.fromObject({ year: 1982, month: 5, day: 25}).toISODate() //=> '1982-05-25'\n   * @example DateTime.fromObject({ year: 1982 }).toISODate() //=> '1982-01-01'\n   * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }) //~> today at 10:26:06\n   * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'utc' }),\n   * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'local' })\n   * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'America/New_York' })\n   * @example DateTime.fromObject({ weekYear: 2016, weekNumber: 2, weekday: 3 }).toISODate() //=> '2016-01-13'\n   * @example DateTime.fromObject({ localWeekYear: 2022, localWeekNumber: 1, localWeekday: 1 }, { locale: \"en-US\" }).toISODate() //=> '2021-12-26'\n   * @return {DateTime}\n   */\n  static fromObject(obj, opts = {}) {\n    obj = obj || {};\n    const zoneToUse = normalizeZone(opts.zone, Settings.defaultZone);\n    if (!zoneToUse.isValid) {\n      return DateTime.invalid(unsupportedZone(zoneToUse));\n    }\n\n    const loc = Locale.fromObject(opts);\n    const normalized = normalizeObject(obj, normalizeUnitWithLocalWeeks);\n    const { minDaysInFirstWeek, startOfWeek } = usesLocalWeekValues(normalized, loc);\n\n    const tsNow = Settings.now(),\n      offsetProvis = !isUndefined(opts.specificOffset)\n        ? opts.specificOffset\n        : zoneToUse.offset(tsNow),\n      containsOrdinal = !isUndefined(normalized.ordinal),\n      containsGregorYear = !isUndefined(normalized.year),\n      containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day),\n      containsGregor = containsGregorYear || containsGregorMD,\n      definiteWeekDef = normalized.weekYear || normalized.weekNumber;\n\n    // cases:\n    // just a weekday -> this week's instance of that weekday, no worries\n    // (gregorian data or ordinal) + (weekYear or weekNumber) -> error\n    // (gregorian month or day) + ordinal -> error\n    // otherwise just use weeks or ordinals or gregorian, depending on what's specified\n\n    if ((containsGregor || containsOrdinal) && definiteWeekDef) {\n      throw new ConflictingSpecificationError(\n        \"Can't mix weekYear/weekNumber units with year/month/day or ordinals\"\n      );\n    }\n\n    if (containsGregorMD && containsOrdinal) {\n      throw new ConflictingSpecificationError(\"Can't mix ordinal dates with month/day\");\n    }\n\n    const useWeekData = definiteWeekDef || (normalized.weekday && !containsGregor);\n\n    // configure ourselves to deal with gregorian dates or week stuff\n    let units,\n      defaultValues,\n      objNow = tsToObj(tsNow, offsetProvis);\n    if (useWeekData) {\n      units = orderedWeekUnits;\n      defaultValues = defaultWeekUnitValues;\n      objNow = gregorianToWeek(objNow, minDaysInFirstWeek, startOfWeek);\n    } else if (containsOrdinal) {\n      units = orderedOrdinalUnits;\n      defaultValues = defaultOrdinalUnitValues;\n      objNow = gregorianToOrdinal(objNow);\n    } else {\n      units = orderedUnits;\n      defaultValues = defaultUnitValues;\n    }\n\n    // set default values for missing stuff\n    let foundFirst = false;\n    for (const u of units) {\n      const v = normalized[u];\n      if (!isUndefined(v)) {\n        foundFirst = true;\n      } else if (foundFirst) {\n        normalized[u] = defaultValues[u];\n      } else {\n        normalized[u] = objNow[u];\n      }\n    }\n\n    // make sure the values we have are in range\n    const higherOrderInvalid = useWeekData\n        ? hasInvalidWeekData(normalized, minDaysInFirstWeek, startOfWeek)\n        : containsOrdinal\n        ? hasInvalidOrdinalData(normalized)\n        : hasInvalidGregorianData(normalized),\n      invalid = higherOrderInvalid || hasInvalidTimeData(normalized);\n\n    if (invalid) {\n      return DateTime.invalid(invalid);\n    }\n\n    // compute the actual time\n    const gregorian = useWeekData\n        ? weekToGregorian(normalized, minDaysInFirstWeek, startOfWeek)\n        : containsOrdinal\n        ? ordinalToGregorian(normalized)\n        : normalized,\n      [tsFinal, offsetFinal] = objToTS(gregorian, offsetProvis, zoneToUse),\n      inst = new DateTime({\n        ts: tsFinal,\n        zone: zoneToUse,\n        o: offsetFinal,\n        loc,\n      });\n\n    // gregorian data + weekday serves only to validate\n    if (normalized.weekday && containsGregor && obj.weekday !== inst.weekday) {\n      return DateTime.invalid(\n        \"mismatched weekday\",\n        `you can't specify both a weekday of ${normalized.weekday} and a date of ${inst.toISO()}`\n      );\n    }\n\n    return inst;\n  }\n\n  /**\n   * Create a DateTime from an ISO 8601 string\n   * @param {string} text - the ISO string\n   * @param {Object} opts - options to affect the creation\n   * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the time to this zone\n   * @param {boolean} [opts.setZone=false] - override the zone with a fixed-offset zone specified in the string itself, if it specifies one\n   * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance\n   * @param {string} [opts.outputCalendar] - the output calendar to set on the resulting DateTime instance\n   * @param {string} [opts.numberingSystem] - the numbering system to set on the resulting DateTime instance\n   * @example DateTime.fromISO('2016-05-25T09:08:34.123')\n   * @example DateTime.fromISO('2016-05-25T09:08:34.123+06:00')\n   * @example DateTime.fromISO('2016-05-25T09:08:34.123+06:00', {setZone: true})\n   * @example DateTime.fromISO('2016-05-25T09:08:34.123', {zone: 'utc'})\n   * @example DateTime.fromISO('2016-W05-4')\n   * @return {DateTime}\n   */\n  static fromISO(text, opts = {}) {\n    const [vals, parsedZone] = parseISODate(text);\n    return parseDataToDateTime(vals, parsedZone, opts, \"ISO 8601\", text);\n  }\n\n  /**\n   * Create a DateTime from an RFC 2822 string\n   * @param {string} text - the RFC 2822 string\n   * @param {Object} opts - options to affect the creation\n   * @param {string|Zone} [opts.zone='local'] - convert the time to this zone. Since the offset is always specified in the string itself, this has no effect on the interpretation of string, merely the zone the resulting DateTime is expressed in.\n   * @param {boolean} [opts.setZone=false] - override the zone with a fixed-offset zone specified in the string itself, if it specifies one\n   * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance\n   * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance\n   * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance\n   * @example DateTime.fromRFC2822('25 Nov 2016 13:23:12 GMT')\n   * @example DateTime.fromRFC2822('Fri, 25 Nov 2016 13:23:12 +0600')\n   * @example DateTime.fromRFC2822('25 Nov 2016 13:23 Z')\n   * @return {DateTime}\n   */\n  static fromRFC2822(text, opts = {}) {\n    const [vals, parsedZone] = parseRFC2822Date(text);\n    return parseDataToDateTime(vals, parsedZone, opts, \"RFC 2822\", text);\n  }\n\n  /**\n   * Create a DateTime from an HTTP header date\n   * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1\n   * @param {string} text - the HTTP header date\n   * @param {Object} opts - options to affect the creation\n   * @param {string|Zone} [opts.zone='local'] - convert the time to this zone. Since HTTP dates are always in UTC, this has no effect on the interpretation of string, merely the zone the resulting DateTime is expressed in.\n   * @param {boolean} [opts.setZone=false] - override the zone with the fixed-offset zone specified in the string. For HTTP dates, this is always UTC, so this option is equivalent to setting the `zone` option to 'utc', but this option is included for consistency with similar methods.\n   * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance\n   * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance\n   * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance\n   * @example DateTime.fromHTTP('Sun, 06 Nov 1994 08:49:37 GMT')\n   * @example DateTime.fromHTTP('Sunday, 06-Nov-94 08:49:37 GMT')\n   * @example DateTime.fromHTTP('Sun Nov  6 08:49:37 1994')\n   * @return {DateTime}\n   */\n  static fromHTTP(text, opts = {}) {\n    const [vals, parsedZone] = parseHTTPDate(text);\n    return parseDataToDateTime(vals, parsedZone, opts, \"HTTP\", opts);\n  }\n\n  /**\n   * Create a DateTime from an input string and format string.\n   * Defaults to en-US if no locale has been specified, regardless of the system's locale. For a table of tokens and their interpretations, see [here](https://moment.github.io/luxon/#/parsing?id=table-of-tokens).\n   * @param {string} text - the string to parse\n   * @param {string} fmt - the format the string is expected to be in (see the link below for the formats)\n   * @param {Object} opts - options to affect the creation\n   * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the DateTime to this zone\n   * @param {boolean} [opts.setZone=false] - override the zone with a zone specified in the string itself, if it specifies one\n   * @param {string} [opts.locale='en-US'] - a locale string to use when parsing. Will also set the DateTime to this locale\n   * @param {string} opts.numberingSystem - the numbering system to use when parsing. Will also set the resulting DateTime to this numbering system\n   * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance\n   * @return {DateTime}\n   */\n  static fromFormat(text, fmt, opts = {}) {\n    if (isUndefined(text) || isUndefined(fmt)) {\n      throw new InvalidArgumentError(\"fromFormat requires an input string and a format\");\n    }\n\n    const { locale = null, numberingSystem = null } = opts,\n      localeToUse = Locale.fromOpts({\n        locale,\n        numberingSystem,\n        defaultToEN: true,\n      }),\n      [vals, parsedZone, specificOffset, invalid] = parseFromTokens(localeToUse, text, fmt);\n    if (invalid) {\n      return DateTime.invalid(invalid);\n    } else {\n      return parseDataToDateTime(vals, parsedZone, opts, `format ${fmt}`, text, specificOffset);\n    }\n  }\n\n  /**\n   * @deprecated use fromFormat instead\n   */\n  static fromString(text, fmt, opts = {}) {\n    return DateTime.fromFormat(text, fmt, opts);\n  }\n\n  /**\n   * Create a DateTime from a SQL date, time, or datetime\n   * Defaults to en-US if no locale has been specified, regardless of the system's locale\n   * @param {string} text - the string to parse\n   * @param {Object} opts - options to affect the creation\n   * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the DateTime to this zone\n   * @param {boolean} [opts.setZone=false] - override the zone with a zone specified in the string itself, if it specifies one\n   * @param {string} [opts.locale='en-US'] - a locale string to use when parsing. Will also set the DateTime to this locale\n   * @param {string} opts.numberingSystem - the numbering system to use when parsing. Will also set the resulting DateTime to this numbering system\n   * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance\n   * @example DateTime.fromSQL('2017-05-15')\n   * @example DateTime.fromSQL('2017-05-15 09:12:34')\n   * @example DateTime.fromSQL('2017-05-15 09:12:34.342')\n   * @example DateTime.fromSQL('2017-05-15 09:12:34.342+06:00')\n   * @example DateTime.fromSQL('2017-05-15 09:12:34.342 America/Los_Angeles')\n   * @example DateTime.fromSQL('2017-05-15 09:12:34.342 America/Los_Angeles', { setZone: true })\n   * @example DateTime.fromSQL('2017-05-15 09:12:34.342', { zone: 'America/Los_Angeles' })\n   * @example DateTime.fromSQL('09:12:34.342')\n   * @return {DateTime}\n   */\n  static fromSQL(text, opts = {}) {\n    const [vals, parsedZone] = parseSQL(text);\n    return parseDataToDateTime(vals, parsedZone, opts, \"SQL\", text);\n  }\n\n  /**\n   * Create an invalid DateTime.\n   * @param {string} reason - simple string of why this DateTime is invalid. Should not contain parameters or anything else data-dependent.\n   * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information\n   * @return {DateTime}\n   */\n  static invalid(reason, explanation = null) {\n    if (!reason) {\n      throw new InvalidArgumentError(\"need to specify a reason the DateTime is invalid\");\n    }\n\n    const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);\n\n    if (Settings.throwOnInvalid) {\n      throw new InvalidDateTimeError(invalid);\n    } else {\n      return new DateTime({ invalid });\n    }\n  }\n\n  /**\n   * Check if an object is an instance of DateTime. Works across context boundaries\n   * @param {object} o\n   * @return {boolean}\n   */\n  static isDateTime(o) {\n    return (o && o.isLuxonDateTime) || false;\n  }\n\n  /**\n   * Produce the format string for a set of options\n   * @param formatOpts\n   * @param localeOpts\n   * @returns {string}\n   */\n  static parseFormatForOpts(formatOpts, localeOpts = {}) {\n    const tokenList = formatOptsToTokens(formatOpts, Locale.fromObject(localeOpts));\n    return !tokenList ? null : tokenList.map((t) => (t ? t.val : null)).join(\"\");\n  }\n\n  /**\n   * Produce the the fully expanded format token for the locale\n   * Does NOT quote characters, so quoted tokens will not round trip correctly\n   * @param fmt\n   * @param localeOpts\n   * @returns {string}\n   */\n  static expandFormat(fmt, localeOpts = {}) {\n    const expanded = expandMacroTokens(Formatter.parseFormat(fmt), Locale.fromObject(localeOpts));\n    return expanded.map((t) => t.val).join(\"\");\n  }\n\n  // INFO\n\n  /**\n   * Get the value of unit.\n   * @param {string} unit - a unit such as 'minute' or 'day'\n   * @example DateTime.local(2017, 7, 4).get('month'); //=> 7\n   * @example DateTime.local(2017, 7, 4).get('day'); //=> 4\n   * @return {number}\n   */\n  get(unit) {\n    return this[unit];\n  }\n\n  /**\n   * Returns whether the DateTime is valid. Invalid DateTimes occur when:\n   * * The DateTime was created from invalid calendar information, such as the 13th month or February 30\n   * * The DateTime was created by an operation on another invalid date\n   * @type {boolean}\n   */\n  get isValid() {\n    return this.invalid === null;\n  }\n\n  /**\n   * Returns an error code if this DateTime is invalid, or null if the DateTime is valid\n   * @type {string}\n   */\n  get invalidReason() {\n    return this.invalid ? this.invalid.reason : null;\n  }\n\n  /**\n   * Returns an explanation of why this DateTime became invalid, or null if the DateTime is valid\n   * @type {string}\n   */\n  get invalidExplanation() {\n    return this.invalid ? this.invalid.explanation : null;\n  }\n\n  /**\n   * Get the locale of a DateTime, such 'en-GB'. The locale is used when formatting the DateTime\n   *\n   * @type {string}\n   */\n  get locale() {\n    return this.isValid ? this.loc.locale : null;\n  }\n\n  /**\n   * Get the numbering system of a DateTime, such 'beng'. The numbering system is used when formatting the DateTime\n   *\n   * @type {string}\n   */\n  get numberingSystem() {\n    return this.isValid ? this.loc.numberingSystem : null;\n  }\n\n  /**\n   * Get the output calendar of a DateTime, such 'islamic'. The output calendar is used when formatting the DateTime\n   *\n   * @type {string}\n   */\n  get outputCalendar() {\n    return this.isValid ? this.loc.outputCalendar : null;\n  }\n\n  /**\n   * Get the time zone associated with this DateTime.\n   * @type {Zone}\n   */\n  get zone() {\n    return this._zone;\n  }\n\n  /**\n   * Get the name of the time zone.\n   * @type {string}\n   */\n  get zoneName() {\n    return this.isValid ? this.zone.name : null;\n  }\n\n  /**\n   * Get the year\n   * @example DateTime.local(2017, 5, 25).year //=> 2017\n   * @type {number}\n   */\n  get year() {\n    return this.isValid ? this.c.year : NaN;\n  }\n\n  /**\n   * Get the quarter\n   * @example DateTime.local(2017, 5, 25).quarter //=> 2\n   * @type {number}\n   */\n  get quarter() {\n    return this.isValid ? Math.ceil(this.c.month / 3) : NaN;\n  }\n\n  /**\n   * Get the month (1-12).\n   * @example DateTime.local(2017, 5, 25).month //=> 5\n   * @type {number}\n   */\n  get month() {\n    return this.isValid ? this.c.month : NaN;\n  }\n\n  /**\n   * Get the day of the month (1-30ish).\n   * @example DateTime.local(2017, 5, 25).day //=> 25\n   * @type {number}\n   */\n  get day() {\n    return this.isValid ? this.c.day : NaN;\n  }\n\n  /**\n   * Get the hour of the day (0-23).\n   * @example DateTime.local(2017, 5, 25, 9).hour //=> 9\n   * @type {number}\n   */\n  get hour() {\n    return this.isValid ? this.c.hour : NaN;\n  }\n\n  /**\n   * Get the minute of the hour (0-59).\n   * @example DateTime.local(2017, 5, 25, 9, 30).minute //=> 30\n   * @type {number}\n   */\n  get minute() {\n    return this.isValid ? this.c.minute : NaN;\n  }\n\n  /**\n   * Get the second of the minute (0-59).\n   * @example DateTime.local(2017, 5, 25, 9, 30, 52).second //=> 52\n   * @type {number}\n   */\n  get second() {\n    return this.isValid ? this.c.second : NaN;\n  }\n\n  /**\n   * Get the millisecond of the second (0-999).\n   * @example DateTime.local(2017, 5, 25, 9, 30, 52, 654).millisecond //=> 654\n   * @type {number}\n   */\n  get millisecond() {\n    return this.isValid ? this.c.millisecond : NaN;\n  }\n\n  /**\n   * Get the week year\n   * @see https://en.wikipedia.org/wiki/ISO_week_date\n   * @example DateTime.local(2014, 12, 31).weekYear //=> 2015\n   * @type {number}\n   */\n  get weekYear() {\n    return this.isValid ? possiblyCachedWeekData(this).weekYear : NaN;\n  }\n\n  /**\n   * Get the week number of the week year (1-52ish).\n   * @see https://en.wikipedia.org/wiki/ISO_week_date\n   * @example DateTime.local(2017, 5, 25).weekNumber //=> 21\n   * @type {number}\n   */\n  get weekNumber() {\n    return this.isValid ? possiblyCachedWeekData(this).weekNumber : NaN;\n  }\n\n  /**\n   * Get the day of the week.\n   * 1 is Monday and 7 is Sunday\n   * @see https://en.wikipedia.org/wiki/ISO_week_date\n   * @example DateTime.local(2014, 11, 31).weekday //=> 4\n   * @type {number}\n   */\n  get weekday() {\n    return this.isValid ? possiblyCachedWeekData(this).weekday : NaN;\n  }\n\n  /**\n   * Returns true if this date is on a weekend according to the locale, false otherwise\n   * @returns {boolean}\n   */\n  get isWeekend() {\n    return this.isValid && this.loc.getWeekendDays().includes(this.weekday);\n  }\n\n  /**\n   * Get the day of the week according to the locale.\n   * 1 is the first day of the week and 7 is the last day of the week.\n   * If the locale assigns Sunday as the first day of the week, then a date which is a Sunday will return 1,\n   * @returns {number}\n   */\n  get localWeekday() {\n    return this.isValid ? possiblyCachedLocalWeekData(this).weekday : NaN;\n  }\n\n  /**\n   * Get the week number of the week year according to the locale. Different locales assign week numbers differently,\n   * because the week can start on different days of the week (see localWeekday) and because a different number of days\n   * is required for a week to count as the first week of a year.\n   * @returns {number}\n   */\n  get localWeekNumber() {\n    return this.isValid ? possiblyCachedLocalWeekData(this).weekNumber : NaN;\n  }\n\n  /**\n   * Get the week year according to the locale. Different locales assign week numbers (and therefor week years)\n   * differently, see localWeekNumber.\n   * @returns {number}\n   */\n  get localWeekYear() {\n    return this.isValid ? possiblyCachedLocalWeekData(this).weekYear : NaN;\n  }\n\n  /**\n   * Get the ordinal (meaning the day of the year)\n   * @example DateTime.local(2017, 5, 25).ordinal //=> 145\n   * @type {number|DateTime}\n   */\n  get ordinal() {\n    return this.isValid ? gregorianToOrdinal(this.c).ordinal : NaN;\n  }\n\n  /**\n   * Get the human readable short month name, such as 'Oct'.\n   * Defaults to the system's locale if no locale has been specified\n   * @example DateTime.local(2017, 10, 30).monthShort //=> Oct\n   * @type {string}\n   */\n  get monthShort() {\n    return this.isValid ? Info.months(\"short\", { locObj: this.loc })[this.month - 1] : null;\n  }\n\n  /**\n   * Get the human readable long month name, such as 'October'.\n   * Defaults to the system's locale if no locale has been specified\n   * @example DateTime.local(2017, 10, 30).monthLong //=> October\n   * @type {string}\n   */\n  get monthLong() {\n    return this.isValid ? Info.months(\"long\", { locObj: this.loc })[this.month - 1] : null;\n  }\n\n  /**\n   * Get the human readable short weekday, such as 'Mon'.\n   * Defaults to the system's locale if no locale has been specified\n   * @example DateTime.local(2017, 10, 30).weekdayShort //=> Mon\n   * @type {string}\n   */\n  get weekdayShort() {\n    return this.isValid ? Info.weekdays(\"short\", { locObj: this.loc })[this.weekday - 1] : null;\n  }\n\n  /**\n   * Get the human readable long weekday, such as 'Monday'.\n   * Defaults to the system's locale if no locale has been specified\n   * @example DateTime.local(2017, 10, 30).weekdayLong //=> Monday\n   * @type {string}\n   */\n  get weekdayLong() {\n    return this.isValid ? Info.weekdays(\"long\", { locObj: this.loc })[this.weekday - 1] : null;\n  }\n\n  /**\n   * Get the UTC offset of this DateTime in minutes\n   * @example DateTime.now().offset //=> -240\n   * @example DateTime.utc().offset //=> 0\n   * @type {number}\n   */\n  get offset() {\n    return this.isValid ? +this.o : NaN;\n  }\n\n  /**\n   * Get the short human name for the zone's current offset, for example \"EST\" or \"EDT\".\n   * Defaults to the system's locale if no locale has been specified\n   * @type {string}\n   */\n  get offsetNameShort() {\n    if (this.isValid) {\n      return this.zone.offsetName(this.ts, {\n        format: \"short\",\n        locale: this.locale,\n      });\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Get the long human name for the zone's current offset, for example \"Eastern Standard Time\" or \"Eastern Daylight Time\".\n   * Defaults to the system's locale if no locale has been specified\n   * @type {string}\n   */\n  get offsetNameLong() {\n    if (this.isValid) {\n      return this.zone.offsetName(this.ts, {\n        format: \"long\",\n        locale: this.locale,\n      });\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Get whether this zone's offset ever changes, as in a DST.\n   * @type {boolean}\n   */\n  get isOffsetFixed() {\n    return this.isValid ? this.zone.isUniversal : null;\n  }\n\n  /**\n   * Get whether the DateTime is in a DST.\n   * @type {boolean}\n   */\n  get isInDST() {\n    if (this.isOffsetFixed) {\n      return false;\n    } else {\n      return (\n        this.offset > this.set({ month: 1, day: 1 }).offset ||\n        this.offset > this.set({ month: 5 }).offset\n      );\n    }\n  }\n\n  /**\n   * Get those DateTimes which have the same local time as this DateTime, but a different offset from UTC\n   * in this DateTime's zone. During DST changes local time can be ambiguous, for example\n   * `2023-10-29T02:30:00` in `Europe/Berlin` can have offset `+01:00` or `+02:00`.\n   * This method will return both possible DateTimes if this DateTime's local time is ambiguous.\n   * @returns {DateTime[]}\n   */\n  getPossibleOffsets() {\n    if (!this.isValid || this.isOffsetFixed) {\n      return [this];\n    }\n    const dayMs = 86400000;\n    const minuteMs = 60000;\n    const localTS = objToLocalTS(this.c);\n    const oEarlier = this.zone.offset(localTS - dayMs);\n    const oLater = this.zone.offset(localTS + dayMs);\n\n    const o1 = this.zone.offset(localTS - oEarlier * minuteMs);\n    const o2 = this.zone.offset(localTS - oLater * minuteMs);\n    if (o1 === o2) {\n      return [this];\n    }\n    const ts1 = localTS - o1 * minuteMs;\n    const ts2 = localTS - o2 * minuteMs;\n    const c1 = tsToObj(ts1, o1);\n    const c2 = tsToObj(ts2, o2);\n    if (\n      c1.hour === c2.hour &&\n      c1.minute === c2.minute &&\n      c1.second === c2.second &&\n      c1.millisecond === c2.millisecond\n    ) {\n      return [clone(this, { ts: ts1 }), clone(this, { ts: ts2 })];\n    }\n    return [this];\n  }\n\n  /**\n   * Returns true if this DateTime is in a leap year, false otherwise\n   * @example DateTime.local(2016).isInLeapYear //=> true\n   * @example DateTime.local(2013).isInLeapYear //=> false\n   * @type {boolean}\n   */\n  get isInLeapYear() {\n    return isLeapYear(this.year);\n  }\n\n  /**\n   * Returns the number of days in this DateTime's month\n   * @example DateTime.local(2016, 2).daysInMonth //=> 29\n   * @example DateTime.local(2016, 3).daysInMonth //=> 31\n   * @type {number}\n   */\n  get daysInMonth() {\n    return daysInMonth(this.year, this.month);\n  }\n\n  /**\n   * Returns the number of days in this DateTime's year\n   * @example DateTime.local(2016).daysInYear //=> 366\n   * @example DateTime.local(2013).daysInYear //=> 365\n   * @type {number}\n   */\n  get daysInYear() {\n    return this.isValid ? daysInYear(this.year) : NaN;\n  }\n\n  /**\n   * Returns the number of weeks in this DateTime's year\n   * @see https://en.wikipedia.org/wiki/ISO_week_date\n   * @example DateTime.local(2004).weeksInWeekYear //=> 53\n   * @example DateTime.local(2013).weeksInWeekYear //=> 52\n   * @type {number}\n   */\n  get weeksInWeekYear() {\n    return this.isValid ? weeksInWeekYear(this.weekYear) : NaN;\n  }\n\n  /**\n   * Returns the number of weeks in this DateTime's local week year\n   * @example DateTime.local(2020, 6, {locale: 'en-US'}).weeksInLocalWeekYear //=> 52\n   * @example DateTime.local(2020, 6, {locale: 'de-DE'}).weeksInLocalWeekYear //=> 53\n   * @type {number}\n   */\n  get weeksInLocalWeekYear() {\n    return this.isValid\n      ? weeksInWeekYear(\n          this.localWeekYear,\n          this.loc.getMinDaysInFirstWeek(),\n          this.loc.getStartOfWeek()\n        )\n      : NaN;\n  }\n\n  /**\n   * Returns the resolved Intl options for this DateTime.\n   * This is useful in understanding the behavior of formatting methods\n   * @param {Object} opts - the same options as toLocaleString\n   * @return {Object}\n   */\n  resolvedLocaleOptions(opts = {}) {\n    const { locale, numberingSystem, calendar } = Formatter.create(\n      this.loc.clone(opts),\n      opts\n    ).resolvedOptions(this);\n    return { locale, numberingSystem, outputCalendar: calendar };\n  }\n\n  // TRANSFORM\n\n  /**\n   * \"Set\" the DateTime's zone to UTC. Returns a newly-constructed DateTime.\n   *\n   * Equivalent to {@link DateTime#setZone}('utc')\n   * @param {number} [offset=0] - optionally, an offset from UTC in minutes\n   * @param {Object} [opts={}] - options to pass to `setZone()`\n   * @return {DateTime}\n   */\n  toUTC(offset = 0, opts = {}) {\n    return this.setZone(FixedOffsetZone.instance(offset), opts);\n  }\n\n  /**\n   * \"Set\" the DateTime's zone to the host's local zone. Returns a newly-constructed DateTime.\n   *\n   * Equivalent to `setZone('local')`\n   * @return {DateTime}\n   */\n  toLocal() {\n    return this.setZone(Settings.defaultZone);\n  }\n\n  /**\n   * \"Set\" the DateTime's zone to specified zone. Returns a newly-constructed DateTime.\n   *\n   * By default, the setter keeps the underlying time the same (as in, the same timestamp), but the new instance will report different local times and consider DSTs when making computations, as with {@link DateTime#plus}. You may wish to use {@link DateTime#toLocal} and {@link DateTime#toUTC} which provide simple convenience wrappers for commonly used zones.\n   * @param {string|Zone} [zone='local'] - a zone identifier. As a string, that can be any IANA zone supported by the host environment, or a fixed-offset name of the form 'UTC+3', or the strings 'local' or 'utc'. You may also supply an instance of a {@link DateTime#Zone} class.\n   * @param {Object} opts - options\n   * @param {boolean} [opts.keepLocalTime=false] - If true, adjust the underlying time so that the local time stays the same, but in the target zone. You should rarely need this.\n   * @return {DateTime}\n   */\n  setZone(zone, { keepLocalTime = false, keepCalendarTime = false } = {}) {\n    zone = normalizeZone(zone, Settings.defaultZone);\n    if (zone.equals(this.zone)) {\n      return this;\n    } else if (!zone.isValid) {\n      return DateTime.invalid(unsupportedZone(zone));\n    } else {\n      let newTS = this.ts;\n      if (keepLocalTime || keepCalendarTime) {\n        const offsetGuess = zone.offset(this.ts);\n        const asObj = this.toObject();\n        [newTS] = objToTS(asObj, offsetGuess, zone);\n      }\n      return clone(this, { ts: newTS, zone });\n    }\n  }\n\n  /**\n   * \"Set\" the locale, numberingSystem, or outputCalendar. Returns a newly-constructed DateTime.\n   * @param {Object} properties - the properties to set\n   * @example DateTime.local(2017, 5, 25).reconfigure({ locale: 'en-GB' })\n   * @return {DateTime}\n   */\n  reconfigure({ locale, numberingSystem, outputCalendar } = {}) {\n    const loc = this.loc.clone({ locale, numberingSystem, outputCalendar });\n    return clone(this, { loc });\n  }\n\n  /**\n   * \"Set\" the locale. Returns a newly-constructed DateTime.\n   * Just a convenient alias for reconfigure({ locale })\n   * @example DateTime.local(2017, 5, 25).setLocale('en-GB')\n   * @return {DateTime}\n   */\n  setLocale(locale) {\n    return this.reconfigure({ locale });\n  }\n\n  /**\n   * \"Set\" the values of specified units. Returns a newly-constructed DateTime.\n   * You can only set units with this method; for \"setting\" metadata, see {@link DateTime#reconfigure} and {@link DateTime#setZone}.\n   *\n   * This method also supports setting locale-based week units, i.e. `localWeekday`, `localWeekNumber` and `localWeekYear`.\n   * They cannot be mixed with ISO-week units like `weekday`.\n   * @param {Object} values - a mapping of units to numbers\n   * @example dt.set({ year: 2017 })\n   * @example dt.set({ hour: 8, minute: 30 })\n   * @example dt.set({ weekday: 5 })\n   * @example dt.set({ year: 2005, ordinal: 234 })\n   * @return {DateTime}\n   */\n  set(values) {\n    if (!this.isValid) return this;\n\n    const normalized = normalizeObject(values, normalizeUnitWithLocalWeeks);\n    const { minDaysInFirstWeek, startOfWeek } = usesLocalWeekValues(normalized, this.loc);\n\n    const settingWeekStuff =\n        !isUndefined(normalized.weekYear) ||\n        !isUndefined(normalized.weekNumber) ||\n        !isUndefined(normalized.weekday),\n      containsOrdinal = !isUndefined(normalized.ordinal),\n      containsGregorYear = !isUndefined(normalized.year),\n      containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day),\n      containsGregor = containsGregorYear || containsGregorMD,\n      definiteWeekDef = normalized.weekYear || normalized.weekNumber;\n\n    if ((containsGregor || containsOrdinal) && definiteWeekDef) {\n      throw new ConflictingSpecificationError(\n        \"Can't mix weekYear/weekNumber units with year/month/day or ordinals\"\n      );\n    }\n\n    if (containsGregorMD && containsOrdinal) {\n      throw new ConflictingSpecificationError(\"Can't mix ordinal dates with month/day\");\n    }\n\n    let mixed;\n    if (settingWeekStuff) {\n      mixed = weekToGregorian(\n        { ...gregorianToWeek(this.c, minDaysInFirstWeek, startOfWeek), ...normalized },\n        minDaysInFirstWeek,\n        startOfWeek\n      );\n    } else if (!isUndefined(normalized.ordinal)) {\n      mixed = ordinalToGregorian({ ...gregorianToOrdinal(this.c), ...normalized });\n    } else {\n      mixed = { ...this.toObject(), ...normalized };\n\n      // if we didn't set the day but we ended up on an overflow date,\n      // use the last day of the right month\n      if (isUndefined(normalized.day)) {\n        mixed.day = Math.min(daysInMonth(mixed.year, mixed.month), mixed.day);\n      }\n    }\n\n    const [ts, o] = objToTS(mixed, this.o, this.zone);\n    return clone(this, { ts, o });\n  }\n\n  /**\n   * Add a period of time to this DateTime and return the resulting DateTime\n   *\n   * Adding hours, minutes, seconds, or milliseconds increases the timestamp by the right number of milliseconds. Adding days, months, or years shifts the calendar, accounting for DSTs and leap years along the way. Thus, `dt.plus({ hours: 24 })` may result in a different time than `dt.plus({ days: 1 })` if there's a DST shift in between.\n   * @param {Duration|Object|number} duration - The amount to add. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()\n   * @example DateTime.now().plus(123) //~> in 123 milliseconds\n   * @example DateTime.now().plus({ minutes: 15 }) //~> in 15 minutes\n   * @example DateTime.now().plus({ days: 1 }) //~> this time tomorrow\n   * @example DateTime.now().plus({ days: -1 }) //~> this time yesterday\n   * @example DateTime.now().plus({ hours: 3, minutes: 13 }) //~> in 3 hr, 13 min\n   * @example DateTime.now().plus(Duration.fromObject({ hours: 3, minutes: 13 })) //~> in 3 hr, 13 min\n   * @return {DateTime}\n   */\n  plus(duration) {\n    if (!this.isValid) return this;\n    const dur = Duration.fromDurationLike(duration);\n    return clone(this, adjustTime(this, dur));\n  }\n\n  /**\n   * Subtract a period of time to this DateTime and return the resulting DateTime\n   * See {@link DateTime#plus}\n   * @param {Duration|Object|number} duration - The amount to subtract. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()\n   @return {DateTime}\n   */\n  minus(duration) {\n    if (!this.isValid) return this;\n    const dur = Duration.fromDurationLike(duration).negate();\n    return clone(this, adjustTime(this, dur));\n  }\n\n  /**\n   * \"Set\" this DateTime to the beginning of a unit of time.\n   * @param {string} unit - The unit to go to the beginning of. Can be 'year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', or 'millisecond'.\n   * @param {Object} opts - options\n   * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week\n   * @example DateTime.local(2014, 3, 3).startOf('month').toISODate(); //=> '2014-03-01'\n   * @example DateTime.local(2014, 3, 3).startOf('year').toISODate(); //=> '2014-01-01'\n   * @example DateTime.local(2014, 3, 3).startOf('week').toISODate(); //=> '2014-03-03', weeks always start on Mondays\n   * @example DateTime.local(2014, 3, 3, 5, 30).startOf('day').toISOTime(); //=> '00:00.000-05:00'\n   * @example DateTime.local(2014, 3, 3, 5, 30).startOf('hour').toISOTime(); //=> '05:00:00.000-05:00'\n   * @return {DateTime}\n   */\n  startOf(unit, { useLocaleWeeks = false } = {}) {\n    if (!this.isValid) return this;\n\n    const o = {},\n      normalizedUnit = Duration.normalizeUnit(unit);\n    switch (normalizedUnit) {\n      case \"years\":\n        o.month = 1;\n      // falls through\n      case \"quarters\":\n      case \"months\":\n        o.day = 1;\n      // falls through\n      case \"weeks\":\n      case \"days\":\n        o.hour = 0;\n      // falls through\n      case \"hours\":\n        o.minute = 0;\n      // falls through\n      case \"minutes\":\n        o.second = 0;\n      // falls through\n      case \"seconds\":\n        o.millisecond = 0;\n        break;\n      case \"milliseconds\":\n        break;\n      // no default, invalid units throw in normalizeUnit()\n    }\n\n    if (normalizedUnit === \"weeks\") {\n      if (useLocaleWeeks) {\n        const startOfWeek = this.loc.getStartOfWeek();\n        const { weekday } = this;\n        if (weekday < startOfWeek) {\n          o.weekNumber = this.weekNumber - 1;\n        }\n        o.weekday = startOfWeek;\n      } else {\n        o.weekday = 1;\n      }\n    }\n\n    if (normalizedUnit === \"quarters\") {\n      const q = Math.ceil(this.month / 3);\n      o.month = (q - 1) * 3 + 1;\n    }\n\n    return this.set(o);\n  }\n\n  /**\n   * \"Set\" this DateTime to the end (meaning the last millisecond) of a unit of time\n   * @param {string} unit - The unit to go to the end of. Can be 'year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', or 'millisecond'.\n   * @param {Object} opts - options\n   * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week\n   * @example DateTime.local(2014, 3, 3).endOf('month').toISO(); //=> '2014-03-31T23:59:59.999-05:00'\n   * @example DateTime.local(2014, 3, 3).endOf('year').toISO(); //=> '2014-12-31T23:59:59.999-05:00'\n   * @example DateTime.local(2014, 3, 3).endOf('week').toISO(); // => '2014-03-09T23:59:59.999-05:00', weeks start on Mondays\n   * @example DateTime.local(2014, 3, 3, 5, 30).endOf('day').toISO(); //=> '2014-03-03T23:59:59.999-05:00'\n   * @example DateTime.local(2014, 3, 3, 5, 30).endOf('hour').toISO(); //=> '2014-03-03T05:59:59.999-05:00'\n   * @return {DateTime}\n   */\n  endOf(unit, opts) {\n    return this.isValid\n      ? this.plus({ [unit]: 1 })\n          .startOf(unit, opts)\n          .minus(1)\n      : this;\n  }\n\n  // OUTPUT\n\n  /**\n   * Returns a string representation of this DateTime formatted according to the specified format string.\n   * **You may not want this.** See {@link DateTime#toLocaleString} for a more flexible formatting tool. For a table of tokens and their interpretations, see [here](https://moment.github.io/luxon/#/formatting?id=table-of-tokens).\n   * Defaults to en-US if no locale has been specified, regardless of the system's locale.\n   * @param {string} fmt - the format string\n   * @param {Object} opts - opts to override the configuration options on this DateTime\n   * @example DateTime.now().toFormat('yyyy LLL dd') //=> '2017 Apr 22'\n   * @example DateTime.now().setLocale('fr').toFormat('yyyy LLL dd') //=> '2017 avr. 22'\n   * @example DateTime.now().toFormat('yyyy LLL dd', { locale: \"fr\" }) //=> '2017 avr. 22'\n   * @example DateTime.now().toFormat(\"HH 'hours and' mm 'minutes'\") //=> '20 hours and 55 minutes'\n   * @return {string}\n   */\n  toFormat(fmt, opts = {}) {\n    return this.isValid\n      ? Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this, fmt)\n      : INVALID;\n  }\n\n  /**\n   * Returns a localized string representing this date. Accepts the same options as the Intl.DateTimeFormat constructor and any presets defined by Luxon, such as `DateTime.DATE_FULL` or `DateTime.TIME_SIMPLE`.\n   * The exact behavior of this method is browser-specific, but in general it will return an appropriate representation\n   * of the DateTime in the assigned locale.\n   * Defaults to the system's locale if no locale has been specified\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat\n   * @param formatOpts {Object} - Intl.DateTimeFormat constructor options and configuration options\n   * @param {Object} opts - opts to override the configuration options on this DateTime\n   * @example DateTime.now().toLocaleString(); //=> 4/20/2017\n   * @example DateTime.now().setLocale('en-gb').toLocaleString(); //=> '20/04/2017'\n   * @example DateTime.now().toLocaleString(DateTime.DATE_FULL); //=> 'April 20, 2017'\n   * @example DateTime.now().toLocaleString(DateTime.DATE_FULL, { locale: 'fr' }); //=> '28 août 2022'\n   * @example DateTime.now().toLocaleString(DateTime.TIME_SIMPLE); //=> '11:32 AM'\n   * @example DateTime.now().toLocaleString(DateTime.DATETIME_SHORT); //=> '4/20/2017, 11:32 AM'\n   * @example DateTime.now().toLocaleString({ weekday: 'long', month: 'long', day: '2-digit' }); //=> 'Thursday, April 20'\n   * @example DateTime.now().toLocaleString({ weekday: 'short', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' }); //=> 'Thu, Apr 20, 11:27 AM'\n   * @example DateTime.now().toLocaleString({ hour: '2-digit', minute: '2-digit', hourCycle: 'h23' }); //=> '11:32'\n   * @return {string}\n   */\n  toLocaleString(formatOpts = Formats.DATE_SHORT, opts = {}) {\n    return this.isValid\n      ? Formatter.create(this.loc.clone(opts), formatOpts).formatDateTime(this)\n      : INVALID;\n  }\n\n  /**\n   * Returns an array of format \"parts\", meaning individual tokens along with metadata. This is allows callers to post-process individual sections of the formatted output.\n   * Defaults to the system's locale if no locale has been specified\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/formatToParts\n   * @param opts {Object} - Intl.DateTimeFormat constructor options, same as `toLocaleString`.\n   * @example DateTime.now().toLocaleParts(); //=> [\n   *                                   //=>   { type: 'day', value: '25' },\n   *                                   //=>   { type: 'literal', value: '/' },\n   *                                   //=>   { type: 'month', value: '05' },\n   *                                   //=>   { type: 'literal', value: '/' },\n   *                                   //=>   { type: 'year', value: '1982' }\n   *                                   //=> ]\n   */\n  toLocaleParts(opts = {}) {\n    return this.isValid\n      ? Formatter.create(this.loc.clone(opts), opts).formatDateTimeParts(this)\n      : [];\n  }\n\n  /**\n   * Returns an ISO 8601-compliant string representation of this DateTime\n   * @param {Object} opts - options\n   * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0\n   * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0\n   * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'\n   * @param {boolean} [opts.extendedZone=false] - add the time zone format extension\n   * @param {string} [opts.format='extended'] - choose between the basic and extended format\n   * @example DateTime.utc(1983, 5, 25).toISO() //=> '1982-05-25T00:00:00.000Z'\n   * @example DateTime.now().toISO() //=> '2017-04-22T20:47:05.335-04:00'\n   * @example DateTime.now().toISO({ includeOffset: false }) //=> '2017-04-22T20:47:05.335'\n   * @example DateTime.now().toISO({ format: 'basic' }) //=> '20170422T204705.335-0400'\n   * @return {string}\n   */\n  toISO({\n    format = \"extended\",\n    suppressSeconds = false,\n    suppressMilliseconds = false,\n    includeOffset = true,\n    extendedZone = false,\n  } = {}) {\n    if (!this.isValid) {\n      return null;\n    }\n\n    const ext = format === \"extended\";\n\n    let c = toISODate(this, ext);\n    c += \"T\";\n    c += toISOTime(this, ext, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone);\n    return c;\n  }\n\n  /**\n   * Returns an ISO 8601-compliant string representation of this DateTime's date component\n   * @param {Object} opts - options\n   * @param {string} [opts.format='extended'] - choose between the basic and extended format\n   * @example DateTime.utc(1982, 5, 25).toISODate() //=> '1982-05-25'\n   * @example DateTime.utc(1982, 5, 25).toISODate({ format: 'basic' }) //=> '19820525'\n   * @return {string}\n   */\n  toISODate({ format = \"extended\" } = {}) {\n    if (!this.isValid) {\n      return null;\n    }\n\n    return toISODate(this, format === \"extended\");\n  }\n\n  /**\n   * Returns an ISO 8601-compliant string representation of this DateTime's week date\n   * @example DateTime.utc(1982, 5, 25).toISOWeekDate() //=> '1982-W21-2'\n   * @return {string}\n   */\n  toISOWeekDate() {\n    return toTechFormat(this, \"kkkk-'W'WW-c\");\n  }\n\n  /**\n   * Returns an ISO 8601-compliant string representation of this DateTime's time component\n   * @param {Object} opts - options\n   * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0\n   * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0\n   * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'\n   * @param {boolean} [opts.extendedZone=true] - add the time zone format extension\n   * @param {boolean} [opts.includePrefix=false] - include the `T` prefix\n   * @param {string} [opts.format='extended'] - choose between the basic and extended format\n   * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime() //=> '07:34:19.361Z'\n   * @example DateTime.utc().set({ hour: 7, minute: 34, seconds: 0, milliseconds: 0 }).toISOTime({ suppressSeconds: true }) //=> '07:34Z'\n   * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime({ format: 'basic' }) //=> '073419.361Z'\n   * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime({ includePrefix: true }) //=> 'T07:34:19.361Z'\n   * @return {string}\n   */\n  toISOTime({\n    suppressMilliseconds = false,\n    suppressSeconds = false,\n    includeOffset = true,\n    includePrefix = false,\n    extendedZone = false,\n    format = \"extended\",\n  } = {}) {\n    if (!this.isValid) {\n      return null;\n    }\n\n    let c = includePrefix ? \"T\" : \"\";\n    return (\n      c +\n      toISOTime(\n        this,\n        format === \"extended\",\n        suppressSeconds,\n        suppressMilliseconds,\n        includeOffset,\n        extendedZone\n      )\n    );\n  }\n\n  /**\n   * Returns an RFC 2822-compatible string representation of this DateTime\n   * @example DateTime.utc(2014, 7, 13).toRFC2822() //=> 'Sun, 13 Jul 2014 00:00:00 +0000'\n   * @example DateTime.local(2014, 7, 13).toRFC2822() //=> 'Sun, 13 Jul 2014 00:00:00 -0400'\n   * @return {string}\n   */\n  toRFC2822() {\n    return toTechFormat(this, \"EEE, dd LLL yyyy HH:mm:ss ZZZ\", false);\n  }\n\n  /**\n   * Returns a string representation of this DateTime appropriate for use in HTTP headers. The output is always expressed in GMT.\n   * Specifically, the string conforms to RFC 1123.\n   * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1\n   * @example DateTime.utc(2014, 7, 13).toHTTP() //=> 'Sun, 13 Jul 2014 00:00:00 GMT'\n   * @example DateTime.utc(2014, 7, 13, 19).toHTTP() //=> 'Sun, 13 Jul 2014 19:00:00 GMT'\n   * @return {string}\n   */\n  toHTTP() {\n    return toTechFormat(this.toUTC(), \"EEE, dd LLL yyyy HH:mm:ss 'GMT'\");\n  }\n\n  /**\n   * Returns a string representation of this DateTime appropriate for use in SQL Date\n   * @example DateTime.utc(2014, 7, 13).toSQLDate() //=> '2014-07-13'\n   * @return {string}\n   */\n  toSQLDate() {\n    if (!this.isValid) {\n      return null;\n    }\n    return toISODate(this, true);\n  }\n\n  /**\n   * Returns a string representation of this DateTime appropriate for use in SQL Time\n   * @param {Object} opts - options\n   * @param {boolean} [opts.includeZone=false] - include the zone, such as 'America/New_York'. Overrides includeOffset.\n   * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'\n   * @param {boolean} [opts.includeOffsetSpace=true] - include the space between the time and the offset, such as '05:15:16.345 -04:00'\n   * @example DateTime.utc().toSQL() //=> '05:15:16.345'\n   * @example DateTime.now().toSQL() //=> '05:15:16.345 -04:00'\n   * @example DateTime.now().toSQL({ includeOffset: false }) //=> '05:15:16.345'\n   * @example DateTime.now().toSQL({ includeZone: false }) //=> '05:15:16.345 America/New_York'\n   * @return {string}\n   */\n  toSQLTime({ includeOffset = true, includeZone = false, includeOffsetSpace = true } = {}) {\n    let fmt = \"HH:mm:ss.SSS\";\n\n    if (includeZone || includeOffset) {\n      if (includeOffsetSpace) {\n        fmt += \" \";\n      }\n      if (includeZone) {\n        fmt += \"z\";\n      } else if (includeOffset) {\n        fmt += \"ZZ\";\n      }\n    }\n\n    return toTechFormat(this, fmt, true);\n  }\n\n  /**\n   * Returns a string representation of this DateTime appropriate for use in SQL DateTime\n   * @param {Object} opts - options\n   * @param {boolean} [opts.includeZone=false] - include the zone, such as 'America/New_York'. Overrides includeOffset.\n   * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'\n   * @param {boolean} [opts.includeOffsetSpace=true] - include the space between the time and the offset, such as '05:15:16.345 -04:00'\n   * @example DateTime.utc(2014, 7, 13).toSQL() //=> '2014-07-13 00:00:00.000 Z'\n   * @example DateTime.local(2014, 7, 13).toSQL() //=> '2014-07-13 00:00:00.000 -04:00'\n   * @example DateTime.local(2014, 7, 13).toSQL({ includeOffset: false }) //=> '2014-07-13 00:00:00.000'\n   * @example DateTime.local(2014, 7, 13).toSQL({ includeZone: true }) //=> '2014-07-13 00:00:00.000 America/New_York'\n   * @return {string}\n   */\n  toSQL(opts = {}) {\n    if (!this.isValid) {\n      return null;\n    }\n\n    return `${this.toSQLDate()} ${this.toSQLTime(opts)}`;\n  }\n\n  /**\n   * Returns a string representation of this DateTime appropriate for debugging\n   * @return {string}\n   */\n  toString() {\n    return this.isValid ? this.toISO() : INVALID;\n  }\n\n  /**\n   * Returns a string representation of this DateTime appropriate for the REPL.\n   * @return {string}\n   */\n  [Symbol.for(\"nodejs.util.inspect.custom\")]() {\n    if (this.isValid) {\n      return `DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`;\n    } else {\n      return `DateTime { Invalid, reason: ${this.invalidReason} }`;\n    }\n  }\n\n  /**\n   * Returns the epoch milliseconds of this DateTime. Alias of {@link DateTime#toMillis}\n   * @return {number}\n   */\n  valueOf() {\n    return this.toMillis();\n  }\n\n  /**\n   * Returns the epoch milliseconds of this DateTime.\n   * @return {number}\n   */\n  toMillis() {\n    return this.isValid ? this.ts : NaN;\n  }\n\n  /**\n   * Returns the epoch seconds of this DateTime.\n   * @return {number}\n   */\n  toSeconds() {\n    return this.isValid ? this.ts / 1000 : NaN;\n  }\n\n  /**\n   * Returns the epoch seconds (as a whole number) of this DateTime.\n   * @return {number}\n   */\n  toUnixInteger() {\n    return this.isValid ? Math.floor(this.ts / 1000) : NaN;\n  }\n\n  /**\n   * Returns an ISO 8601 representation of this DateTime appropriate for use in JSON.\n   * @return {string}\n   */\n  toJSON() {\n    return this.toISO();\n  }\n\n  /**\n   * Returns a BSON serializable equivalent to this DateTime.\n   * @return {Date}\n   */\n  toBSON() {\n    return this.toJSDate();\n  }\n\n  /**\n   * Returns a JavaScript object with this DateTime's year, month, day, and so on.\n   * @param opts - options for generating the object\n   * @param {boolean} [opts.includeConfig=false] - include configuration attributes in the output\n   * @example DateTime.now().toObject() //=> { year: 2017, month: 4, day: 22, hour: 20, minute: 49, second: 42, millisecond: 268 }\n   * @return {Object}\n   */\n  toObject(opts = {}) {\n    if (!this.isValid) return {};\n\n    const base = { ...this.c };\n\n    if (opts.includeConfig) {\n      base.outputCalendar = this.outputCalendar;\n      base.numberingSystem = this.loc.numberingSystem;\n      base.locale = this.loc.locale;\n    }\n    return base;\n  }\n\n  /**\n   * Returns a JavaScript Date equivalent to this DateTime.\n   * @return {Date}\n   */\n  toJSDate() {\n    return new Date(this.isValid ? this.ts : NaN);\n  }\n\n  // COMPARE\n\n  /**\n   * Return the difference between two DateTimes as a Duration.\n   * @param {DateTime} otherDateTime - the DateTime to compare this one to\n   * @param {string|string[]} [unit=['milliseconds']] - the unit or array of units (such as 'hours' or 'days') to include in the duration.\n   * @param {Object} opts - options that affect the creation of the Duration\n   * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use\n   * @example\n   * var i1 = DateTime.fromISO('1982-05-25T09:45'),\n   *     i2 = DateTime.fromISO('1983-10-14T10:30');\n   * i2.diff(i1).toObject() //=> { milliseconds: 43807500000 }\n   * i2.diff(i1, 'hours').toObject() //=> { hours: 12168.75 }\n   * i2.diff(i1, ['months', 'days']).toObject() //=> { months: 16, days: 19.03125 }\n   * i2.diff(i1, ['months', 'days', 'hours']).toObject() //=> { months: 16, days: 19, hours: 0.75 }\n   * @return {Duration}\n   */\n  diff(otherDateTime, unit = \"milliseconds\", opts = {}) {\n    if (!this.isValid || !otherDateTime.isValid) {\n      return Duration.invalid(\"created by diffing an invalid DateTime\");\n    }\n\n    const durOpts = { locale: this.locale, numberingSystem: this.numberingSystem, ...opts };\n\n    const units = maybeArray(unit).map(Duration.normalizeUnit),\n      otherIsLater = otherDateTime.valueOf() > this.valueOf(),\n      earlier = otherIsLater ? this : otherDateTime,\n      later = otherIsLater ? otherDateTime : this,\n      diffed = diff(earlier, later, units, durOpts);\n\n    return otherIsLater ? diffed.negate() : diffed;\n  }\n\n  /**\n   * Return the difference between this DateTime and right now.\n   * See {@link DateTime#diff}\n   * @param {string|string[]} [unit=['milliseconds']] - the unit or units units (such as 'hours' or 'days') to include in the duration\n   * @param {Object} opts - options that affect the creation of the Duration\n   * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use\n   * @return {Duration}\n   */\n  diffNow(unit = \"milliseconds\", opts = {}) {\n    return this.diff(DateTime.now(), unit, opts);\n  }\n\n  /**\n   * Return an Interval spanning between this DateTime and another DateTime\n   * @param {DateTime} otherDateTime - the other end point of the Interval\n   * @return {Interval}\n   */\n  until(otherDateTime) {\n    return this.isValid ? Interval.fromDateTimes(this, otherDateTime) : this;\n  }\n\n  /**\n   * Return whether this DateTime is in the same unit of time as another DateTime.\n   * Higher-order units must also be identical for this function to return `true`.\n   * Note that time zones are **ignored** in this comparison, which compares the **local** calendar time. Use {@link DateTime#setZone} to convert one of the dates if needed.\n   * @param {DateTime} otherDateTime - the other DateTime\n   * @param {string} unit - the unit of time to check sameness on\n   * @param {Object} opts - options\n   * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week; only the locale of this DateTime is used\n   * @example DateTime.now().hasSame(otherDT, 'day'); //~> true if otherDT is in the same current calendar day\n   * @return {boolean}\n   */\n  hasSame(otherDateTime, unit, opts) {\n    if (!this.isValid) return false;\n\n    const inputMs = otherDateTime.valueOf();\n    const adjustedToZone = this.setZone(otherDateTime.zone, { keepLocalTime: true });\n    return (\n      adjustedToZone.startOf(unit, opts) <= inputMs && inputMs <= adjustedToZone.endOf(unit, opts)\n    );\n  }\n\n  /**\n   * Equality check\n   * Two DateTimes are equal if and only if they represent the same millisecond, have the same zone and location, and are both valid.\n   * To compare just the millisecond values, use `+dt1 === +dt2`.\n   * @param {DateTime} other - the other DateTime\n   * @return {boolean}\n   */\n  equals(other) {\n    return (\n      this.isValid &&\n      other.isValid &&\n      this.valueOf() === other.valueOf() &&\n      this.zone.equals(other.zone) &&\n      this.loc.equals(other.loc)\n    );\n  }\n\n  /**\n   * Returns a string representation of a this time relative to now, such as \"in two days\". Can only internationalize if your\n   * platform supports Intl.RelativeTimeFormat. Rounds down by default.\n   * @param {Object} options - options that affect the output\n   * @param {DateTime} [options.base=DateTime.now()] - the DateTime to use as the basis to which this time is compared. Defaults to now.\n   * @param {string} [options.style=\"long\"] - the style of units, must be \"long\", \"short\", or \"narrow\"\n   * @param {string|string[]} options.unit - use a specific unit or array of units; if omitted, or an array, the method will pick the best unit. Use an array or one of \"years\", \"quarters\", \"months\", \"weeks\", \"days\", \"hours\", \"minutes\", or \"seconds\"\n   * @param {boolean} [options.round=true] - whether to round the numbers in the output.\n   * @param {number} [options.padding=0] - padding in milliseconds. This allows you to round up the result if it fits inside the threshold. Don't use in combination with {round: false} because the decimal output will include the padding.\n   * @param {string} options.locale - override the locale of this DateTime\n   * @param {string} options.numberingSystem - override the numberingSystem of this DateTime. The Intl system may choose not to honor this\n   * @example DateTime.now().plus({ days: 1 }).toRelative() //=> \"in 1 day\"\n   * @example DateTime.now().setLocale(\"es\").toRelative({ days: 1 }) //=> \"dentro de 1 día\"\n   * @example DateTime.now().plus({ days: 1 }).toRelative({ locale: \"fr\" }) //=> \"dans 23 heures\"\n   * @example DateTime.now().minus({ days: 2 }).toRelative() //=> \"2 days ago\"\n   * @example DateTime.now().minus({ days: 2 }).toRelative({ unit: \"hours\" }) //=> \"48 hours ago\"\n   * @example DateTime.now().minus({ hours: 36 }).toRelative({ round: false }) //=> \"1.5 days ago\"\n   */\n  toRelative(options = {}) {\n    if (!this.isValid) return null;\n    const base = options.base || DateTime.fromObject({}, { zone: this.zone }),\n      padding = options.padding ? (this < base ? -options.padding : options.padding) : 0;\n    let units = [\"years\", \"months\", \"days\", \"hours\", \"minutes\", \"seconds\"];\n    let unit = options.unit;\n    if (Array.isArray(options.unit)) {\n      units = options.unit;\n      unit = undefined;\n    }\n    return diffRelative(base, this.plus(padding), {\n      ...options,\n      numeric: \"always\",\n      units,\n      unit,\n    });\n  }\n\n  /**\n   * Returns a string representation of this date relative to today, such as \"yesterday\" or \"next month\".\n   * Only internationalizes on platforms that supports Intl.RelativeTimeFormat.\n   * @param {Object} options - options that affect the output\n   * @param {DateTime} [options.base=DateTime.now()] - the DateTime to use as the basis to which this time is compared. Defaults to now.\n   * @param {string} options.locale - override the locale of this DateTime\n   * @param {string} options.unit - use a specific unit; if omitted, the method will pick the unit. Use one of \"years\", \"quarters\", \"months\", \"weeks\", or \"days\"\n   * @param {string} options.numberingSystem - override the numberingSystem of this DateTime. The Intl system may choose not to honor this\n   * @example DateTime.now().plus({ days: 1 }).toRelativeCalendar() //=> \"tomorrow\"\n   * @example DateTime.now().setLocale(\"es\").plus({ days: 1 }).toRelative() //=> \"\"mañana\"\n   * @example DateTime.now().plus({ days: 1 }).toRelativeCalendar({ locale: \"fr\" }) //=> \"demain\"\n   * @example DateTime.now().minus({ days: 2 }).toRelativeCalendar() //=> \"2 days ago\"\n   */\n  toRelativeCalendar(options = {}) {\n    if (!this.isValid) return null;\n\n    return diffRelative(options.base || DateTime.fromObject({}, { zone: this.zone }), this, {\n      ...options,\n      numeric: \"auto\",\n      units: [\"years\", \"months\", \"days\"],\n      calendary: true,\n    });\n  }\n\n  /**\n   * Return the min of several date times\n   * @param {...DateTime} dateTimes - the DateTimes from which to choose the minimum\n   * @return {DateTime} the min DateTime, or undefined if called with no argument\n   */\n  static min(...dateTimes) {\n    if (!dateTimes.every(DateTime.isDateTime)) {\n      throw new InvalidArgumentError(\"min requires all arguments be DateTimes\");\n    }\n    return bestBy(dateTimes, (i) => i.valueOf(), Math.min);\n  }\n\n  /**\n   * Return the max of several date times\n   * @param {...DateTime} dateTimes - the DateTimes from which to choose the maximum\n   * @return {DateTime} the max DateTime, or undefined if called with no argument\n   */\n  static max(...dateTimes) {\n    if (!dateTimes.every(DateTime.isDateTime)) {\n      throw new InvalidArgumentError(\"max requires all arguments be DateTimes\");\n    }\n    return bestBy(dateTimes, (i) => i.valueOf(), Math.max);\n  }\n\n  // MISC\n\n  /**\n   * Explain how a string would be parsed by fromFormat()\n   * @param {string} text - the string to parse\n   * @param {string} fmt - the format the string is expected to be in (see description)\n   * @param {Object} options - options taken by fromFormat()\n   * @return {Object}\n   */\n  static fromFormatExplain(text, fmt, options = {}) {\n    const { locale = null, numberingSystem = null } = options,\n      localeToUse = Locale.fromOpts({\n        locale,\n        numberingSystem,\n        defaultToEN: true,\n      });\n    return explainFromTokens(localeToUse, text, fmt);\n  }\n\n  /**\n   * @deprecated use fromFormatExplain instead\n   */\n  static fromStringExplain(text, fmt, options = {}) {\n    return DateTime.fromFormatExplain(text, fmt, options);\n  }\n\n  // FORMAT PRESETS\n\n  /**\n   * {@link DateTime#toLocaleString} format like 10/14/1983\n   * @type {Object}\n   */\n  static get DATE_SHORT() {\n    return Formats.DATE_SHORT;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'Oct 14, 1983'\n   * @type {Object}\n   */\n  static get DATE_MED() {\n    return Formats.DATE_MED;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'Fri, Oct 14, 1983'\n   * @type {Object}\n   */\n  static get DATE_MED_WITH_WEEKDAY() {\n    return Formats.DATE_MED_WITH_WEEKDAY;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'October 14, 1983'\n   * @type {Object}\n   */\n  static get DATE_FULL() {\n    return Formats.DATE_FULL;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'Tuesday, October 14, 1983'\n   * @type {Object}\n   */\n  static get DATE_HUGE() {\n    return Formats.DATE_HUGE;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like '09:30 AM'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get TIME_SIMPLE() {\n    return Formats.TIME_SIMPLE;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like '09:30:23 AM'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get TIME_WITH_SECONDS() {\n    return Formats.TIME_WITH_SECONDS;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like '09:30:23 AM EDT'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get TIME_WITH_SHORT_OFFSET() {\n    return Formats.TIME_WITH_SHORT_OFFSET;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like '09:30:23 AM Eastern Daylight Time'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get TIME_WITH_LONG_OFFSET() {\n    return Formats.TIME_WITH_LONG_OFFSET;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like '09:30', always 24-hour.\n   * @type {Object}\n   */\n  static get TIME_24_SIMPLE() {\n    return Formats.TIME_24_SIMPLE;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like '09:30:23', always 24-hour.\n   * @type {Object}\n   */\n  static get TIME_24_WITH_SECONDS() {\n    return Formats.TIME_24_WITH_SECONDS;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like '09:30:23 EDT', always 24-hour.\n   * @type {Object}\n   */\n  static get TIME_24_WITH_SHORT_OFFSET() {\n    return Formats.TIME_24_WITH_SHORT_OFFSET;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like '09:30:23 Eastern Daylight Time', always 24-hour.\n   * @type {Object}\n   */\n  static get TIME_24_WITH_LONG_OFFSET() {\n    return Formats.TIME_24_WITH_LONG_OFFSET;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like '10/14/1983, 9:30 AM'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get DATETIME_SHORT() {\n    return Formats.DATETIME_SHORT;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like '10/14/1983, 9:30:33 AM'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get DATETIME_SHORT_WITH_SECONDS() {\n    return Formats.DATETIME_SHORT_WITH_SECONDS;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'Oct 14, 1983, 9:30 AM'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get DATETIME_MED() {\n    return Formats.DATETIME_MED;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'Oct 14, 1983, 9:30:33 AM'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get DATETIME_MED_WITH_SECONDS() {\n    return Formats.DATETIME_MED_WITH_SECONDS;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'Fri, 14 Oct 1983, 9:30 AM'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get DATETIME_MED_WITH_WEEKDAY() {\n    return Formats.DATETIME_MED_WITH_WEEKDAY;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'October 14, 1983, 9:30 AM EDT'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get DATETIME_FULL() {\n    return Formats.DATETIME_FULL;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'October 14, 1983, 9:30:33 AM EDT'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get DATETIME_FULL_WITH_SECONDS() {\n    return Formats.DATETIME_FULL_WITH_SECONDS;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'Friday, October 14, 1983, 9:30 AM Eastern Daylight Time'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get DATETIME_HUGE() {\n    return Formats.DATETIME_HUGE;\n  }\n\n  /**\n   * {@link DateTime#toLocaleString} format like 'Friday, October 14, 1983, 9:30:33 AM Eastern Daylight Time'. Only 12-hour if the locale is.\n   * @type {Object}\n   */\n  static get DATETIME_HUGE_WITH_SECONDS() {\n    return Formats.DATETIME_HUGE_WITH_SECONDS;\n  }\n}\n\n/**\n * @private\n */\nexport function friendlyDateTime(dateTimeish) {\n  if (DateTime.isDateTime(dateTimeish)) {\n    return dateTimeish;\n  } else if (dateTimeish && dateTimeish.valueOf && isNumber(dateTimeish.valueOf())) {\n    return DateTime.fromJSDate(dateTimeish);\n  } else if (dateTimeish && typeof dateTimeish === \"object\") {\n    return DateTime.fromObject(dateTimeish);\n  } else {\n    throw new InvalidArgumentError(\n      `Unknown datetime argument: ${dateTimeish}, of type ${typeof dateTimeish}`\n    );\n  }\n}\n","import DateTime from \"./datetime.js\";\nimport Duration from \"./duration.js\";\nimport Interval from \"./interval.js\";\nimport Info from \"./info.js\";\nimport Zone from \"./zone.js\";\nimport FixedOffsetZone from \"./zones/fixedOffsetZone.js\";\nimport IANAZone from \"./zones/IANAZone.js\";\nimport InvalidZone from \"./zones/invalidZone.js\";\nimport SystemZone from \"./zones/systemZone.js\";\nimport Settings from \"./settings.js\";\n\nconst VERSION = \"3.4.4\";\n\nexport {\n  VERSION,\n  DateTime,\n  Duration,\n  Interval,\n  Info,\n  Zone,\n  FixedOffsetZone,\n  IANAZone,\n  InvalidZone,\n  SystemZone,\n  Settings,\n};\n","import { DateTime, Interval } from 'luxon';\nimport humanizeDuration from 'humanize-duration';\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\n\nconst CreatedAtColumn = ({ createdAt }) => {\n  const createdAtTime = DateTime.fromISO(createdAt);\n  const formatted = Interval.fromDateTimes(createdAtTime, DateTime.local()).toDuration().valueOf();\n  return /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, humanizeDuration(formatted, { round: true }), \" ago\");\n};\n\nexport { CreatedAtColumn };\n//# sourceMappingURL=CreatedAtColumn.esm.js.map\n","import { useApi } from '@backstage/core-plugin-api';\nimport React from 'react';\nimport useAsync from 'react-use/esm/useAsync';\nimport { catalogApiRef, EntityRefLink } from '@backstage/plugin-catalog-react';\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport Typography from '@material-ui/core/Typography';\n\nconst OwnerEntityColumn = ({ entityRef }) => {\n  const catalogApi = useApi(catalogApiRef);\n  const { value, loading, error } = useAsync(\n    () => catalogApi.getEntityByRef(entityRef || \"\"),\n    [catalogApi, entityRef]\n  );\n  if (!entityRef) {\n    return /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, \"Unknown\");\n  }\n  if (loading || error) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityRefLink,\n    {\n      entityRef: parseEntityRef(entityRef),\n      title: value?.spec?.profile?.displayName ?? value?.metadata.name\n    }\n  );\n};\n\nexport { OwnerEntityColumn };\n//# sourceMappingURL=OwnerEntityColumn.esm.js.map\n","import * as React from 'react';\n\nconst PendingIcon = ({\n  className,\n  dataTestId\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 -960 960 960\",\n      className,\n      \"data-testid\": dataTestId\n    },\n    /* @__PURE__ */ React.createElement(\"path\", { d: \"M280-420q25 0 42.5-17.5T340-480q0-25-17.5-42.5T280-540q-25 0-42.5 17.5T220-480q0 25 17.5 42.5T280-420Zm200 0q25 0 42.5-17.5T540-480q0-25-17.5-42.5T480-540q-25 0-42.5 17.5T420-480q0 25 17.5 42.5T480-420Zm200 0q25 0 42.5-17.5T740-480q0-25-17.5-42.5T680-540q-25 0-42.5 17.5T620-480q0 25 17.5 42.5T680-420ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z\" })\n  );\n};\n\nexport { PendingIcon };\n//# sourceMappingURL=PendingIcon.esm.js.map\n","import { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CheckCircleOutline from '@material-ui/icons/CheckCircleOutline';\nimport WarningOutline from '@material-ui/icons/ReportProblemOutlined';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport classNames from 'classnames';\nimport React__default from 'react';\nimport { PendingIcon } from './icons/PendingIcon.esm.js';\nimport { RunningIcon } from './icons/RunningIcon.esm.js';\nimport { AbortedIcon } from './icons/AbortedIcon.esm.js';\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    status: {\n      fontWeight: theme.typography.fontWeightMedium,\n      alignItems: \"baseline\",\n      display: \"flex\"\n    },\n    statusIcon: {\n      flexShrink: 0,\n      position: \"relative\",\n      top: \"0.125em\",\n      marginRight: theme.spacing(1)\n    },\n    statusIconSize: {\n      width: \"0.8em\",\n      height: \"0.8em\"\n    },\n    statusIconSizeForImg: {\n      width: \"1.2em\",\n      height: \"1.2em\"\n    },\n    ok: {\n      fill: theme.palette.status.ok || \"#3E8635\"\n    },\n    warning: {\n      fill: theme.palette.status.warning || \"#F0AB00\"\n    },\n    error: {\n      fill: theme.palette.status.error || \"#C9190B\"\n    },\n    pending: {\n      fill: theme.palette.status.aborted || \"#6A6E73\"\n    },\n    running: {\n      fill: theme.palette.status.aborted || \"#6A6E73\"\n    },\n    aborted: {\n      fill: theme.palette.status.aborted || \"#6A6E73\"\n    }\n  }),\n  { name: \"BackstageStatus\" }\n);\nfunction StatusOK(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status ok\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      CheckCircleOutline,\n      {\n        \"data-testid\": \"status-ok\",\n        className: classNames(\n          classes.ok,\n          classes.statusIconSize,\n          classes.statusIcon\n        )\n      }\n    ),\n    children\n  );\n}\nfunction StatusWarning(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status warning\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      WarningOutline,\n      {\n        \"data-testid\": \"status-warning\",\n        className: classNames(\n          classes.warning,\n          classes.statusIconSize,\n          classes.statusIcon\n        )\n      }\n    ),\n    children\n  );\n}\nfunction StatusError(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status error\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      ErrorOutline,\n      {\n        \"data-testid\": \"status-error\",\n        className: classNames(\n          classes.error,\n          classes.statusIconSize,\n          classes.statusIcon\n        )\n      }\n    ),\n    children\n  );\n}\nfunction StatusPending(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status pending\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      PendingIcon,\n      {\n        dataTestId: \"status-pending\",\n        className: classNames(\n          classes.pending,\n          classes.statusIconSizeForImg,\n          classes.statusIcon\n        )\n      }\n    ),\n    children\n  );\n}\nfunction StatusRunning(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status running\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      RunningIcon,\n      {\n        dataTestId: \"status-running\",\n        className: classNames(\n          classes.running,\n          classes.statusIcon,\n          classes.statusIconSizeForImg\n        )\n      }\n    ),\n    children\n  );\n}\nfunction StatusAborted(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status aborted\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      AbortedIcon,\n      {\n        dataTestId: \"status-aborted\",\n        className: classNames(\n          classes.aborted,\n          classes.statusIcon,\n          classes.statusIconSizeForImg\n        )\n      }\n    ),\n    children\n  );\n}\n\nexport { StatusAborted, StatusError, StatusOK, StatusPending, StatusRunning, StatusWarning };\n//# sourceMappingURL=Status.esm.js.map\n","import { StatusError, StatusOK, StatusPending } from '@backstage/core-components';\nimport React from 'react';\n\nconst TaskStatusColumn = ({ status }) => {\n  switch (status) {\n    case \"processing\":\n      return /* @__PURE__ */ React.createElement(StatusPending, null, status);\n    case \"completed\":\n      return /* @__PURE__ */ React.createElement(StatusOK, null, status);\n    case \"error\":\n    default:\n      return /* @__PURE__ */ React.createElement(StatusError, null, status);\n  }\n};\n\nexport { TaskStatusColumn };\n//# sourceMappingURL=TaskStatusColumn.esm.js.map\n","import { useApi } from '@backstage/core-plugin-api';\nimport React from 'react';\nimport { scaffolderApiRef } from '@backstage/plugin-scaffolder-react';\nimport useAsync from 'react-use/esm/useAsync';\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport { EntityRefLink } from '@backstage/plugin-catalog-react';\n\nconst TemplateTitleColumn = ({ entityRef }) => {\n  const scaffolder = useApi(scaffolderApiRef);\n  const { value, loading, error } = useAsync(\n    () => scaffolder.getTemplateParameterSchema(entityRef || \"\"),\n    [scaffolder, entityRef]\n  );\n  if (loading || error || !entityRef) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: parseEntityRef(entityRef), title: value?.title });\n};\n\nexport { TemplateTitleColumn };\n//# sourceMappingURL=TemplateTitleColumn.esm.js.map\n","import { Page, Header, Content, Progress, ErrorPanel, EmptyState, Table, Link } from '@backstage/core-components';\nimport { useRouteRef, useApi } from '@backstage/core-plugin-api';\nimport { CatalogFilterLayout } from '@backstage/plugin-catalog-react';\nimport useAsync from 'react-use/esm/useAsync';\nimport React, { useState } from 'react';\nimport { scaffolderApiRef } from '@backstage/plugin-scaffolder-react';\nimport { OwnerListPicker } from './OwnerListPicker.esm.js';\nimport { CreatedAtColumn } from './columns/CreatedAtColumn.esm.js';\nimport { OwnerEntityColumn } from './columns/OwnerEntityColumn.esm.js';\nimport { TaskStatusColumn } from './columns/TaskStatusColumn.esm.js';\nimport { TemplateTitleColumn } from './columns/TemplateTitleColumn.esm.js';\nimport { editRouteRef, actionsRouteRef, rootRouteRef } from '../../routes.esm.js';\nimport { ScaffolderPageContextMenu } from '@backstage/plugin-scaffolder-react/alpha';\nimport { useNavigate } from 'react-router-dom';\n\nconst ListTaskPageContent = (props) => {\n  const { initiallySelectedFilter = \"owned\" } = props;\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const rootLink = useRouteRef(rootRouteRef);\n  const [ownerFilter, setOwnerFilter] = useState(initiallySelectedFilter);\n  const { value, loading, error } = useAsync(() => {\n    if (scaffolderApi.listTasks) {\n      return scaffolderApi.listTasks?.({ filterByOwnership: ownerFilter });\n    }\n    console.warn(\n      \"listTasks is not implemented in the scaffolderApi, please make sure to implement this method.\"\n    );\n    return Promise.resolve({ tasks: [] });\n  }, [scaffolderApi, ownerFilter]);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ErrorPanel, { error }), /* @__PURE__ */ React.createElement(\n      EmptyState,\n      {\n        missing: \"info\",\n        title: \"No information to display\",\n        description: \"There are no tasks or there was an issue communicating with backend.\"\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(\n    OwnerListPicker,\n    {\n      filter: ownerFilter,\n      onSelectOwner: (id) => setOwnerFilter(id)\n    }\n  )), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      data: value?.tasks ?? [],\n      title: \"Tasks\",\n      columns: [\n        {\n          title: \"Task ID\",\n          field: \"id\",\n          render: (row) => /* @__PURE__ */ React.createElement(Link, { to: `${rootLink()}/tasks/${row.id}` }, row.id)\n        },\n        {\n          title: \"Template\",\n          field: \"spec.templateInfo.entity.metadata.title\",\n          render: (row) => /* @__PURE__ */ React.createElement(\n            TemplateTitleColumn,\n            {\n              entityRef: row.spec.templateInfo?.entityRef\n            }\n          )\n        },\n        {\n          title: \"Created\",\n          field: \"createdAt\",\n          render: (row) => /* @__PURE__ */ React.createElement(CreatedAtColumn, { createdAt: row.createdAt })\n        },\n        {\n          title: \"Owner\",\n          field: \"createdBy\",\n          render: (row) => /* @__PURE__ */ React.createElement(OwnerEntityColumn, { entityRef: row.spec?.user?.ref })\n        },\n        {\n          title: \"Status\",\n          field: \"status\",\n          render: (row) => /* @__PURE__ */ React.createElement(TaskStatusColumn, { status: row.status })\n        }\n      ]\n    }\n  )));\n};\nconst ListTasksPage = (props) => {\n  const navigate = useNavigate();\n  const editorLink = useRouteRef(editRouteRef);\n  const actionsLink = useRouteRef(actionsRouteRef);\n  const createLink = useRouteRef(rootRouteRef);\n  const scaffolderPageContextMenuProps = {\n    onEditorClicked: () => navigate(editorLink()),\n    onActionsClicked: () => navigate(actionsLink()),\n    onTasksClicked: void 0,\n    onCreateClicked: () => navigate(createLink())\n  };\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      pageTitleOverride: \"Templates Tasks\",\n      title: \"List template tasks\",\n      subtitle: \"All tasks that have been started\"\n    },\n    /* @__PURE__ */ React.createElement(ScaffolderPageContextMenu, { ...scaffolderPageContextMenuProps })\n  ), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ListTaskPageContent, { ...props })));\n};\n\nexport { ListTasksPage };\n//# sourceMappingURL=ListTasksPage.esm.js.map\n","import React from 'react';\nimport capitalize from 'lodash/capitalize';\nimport { Progress } from '@backstage/core-components';\nimport Box from '@material-ui/core/Box';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { useEntityTypeFilter } from '@backstage/plugin-catalog-react';\nimport { useApi, alertApiRef } from '@backstage/core-plugin-api';\n\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst useStyles = makeStyles(\n  {\n    root: {},\n    label: {}\n  },\n  { name: \"ScaffolderReactTemplateCategoryPicker\" }\n);\nconst TemplateCategoryPicker = () => {\n  const classes = useStyles();\n  const alertApi = useApi(alertApiRef);\n  const { error, loading, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  if (loading) return /* @__PURE__ */ React.createElement(Progress, null);\n  if (error) {\n    alertApi.post({\n      message: `Failed to load entity types with error: ${error}`,\n      severity: \"error\"\n    });\n    return null;\n  }\n  if (!availableTypes) return null;\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root, pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      className: classes.label,\n      variant: \"button\",\n      component: \"label\",\n      htmlFor: \"categories-picker\"\n    },\n    \"Categories\"\n  ), /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      PopperComponent: (popperProps) => /* @__PURE__ */ React.createElement(\"div\", { ...popperProps }, popperProps.children),\n      multiple: true,\n      id: \"categories-picker\",\n      options: availableTypes,\n      value: selectedTypes,\n      onChange: (_, value) => setSelectedTypes(value),\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              icon,\n              checkedIcon,\n              checked: selected\n            }\n          ),\n          label: capitalize(option)\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, { ...params, variant: \"outlined\" })\n    }\n  ));\n};\n\nexport { TemplateCategoryPicker };\n//# sourceMappingURL=TemplateCategoryPicker.esm.js.map\n","import React from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { ItemCardHeader } from '@backstage/core-components';\nimport { FavoriteEntity } from '@backstage/plugin-catalog-react';\n\nconst useStyles = makeStyles(() => ({\n  header: {\n    backgroundImage: ({ cardBackgroundImage }) => cardBackgroundImage,\n    color: ({ cardFontColor }) => cardFontColor\n  },\n  subtitleWrapper: {\n    display: \"flex\",\n    justifyContent: \"space-between\"\n  }\n}));\nconst CardHeader = (props) => {\n  const {\n    template: {\n      metadata: { title, name },\n      spec: { type }\n    }\n  } = props;\n  const { getPageTheme } = useTheme();\n  const themeForType = getPageTheme({ themeId: type });\n  const styles = useStyles({\n    cardFontColor: themeForType.fontColor,\n    cardBackgroundImage: themeForType.backgroundImage\n  });\n  const SubtitleComponent = /* @__PURE__ */ React.createElement(\"div\", { className: styles.subtitleWrapper }, /* @__PURE__ */ React.createElement(\"div\", null, type), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(FavoriteEntity, { entity: props.template, style: { padding: 0 } })));\n  return /* @__PURE__ */ React.createElement(\n    ItemCardHeader,\n    {\n      title: title ?? name,\n      subtitle: SubtitleComponent,\n      classes: { root: styles.header }\n    }\n  );\n};\n\nexport { CardHeader };\n//# sourceMappingURL=CardHeader.esm.js.map\n","import { Link } from '@backstage/core-components';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\n\nconst useStyles = makeStyles(() => ({\n  linkText: {\n    display: \"inline-flex\",\n    alignItems: \"center\"\n  }\n}));\nconst CardLink = ({ icon: Icon, text, url }) => {\n  const styles = useStyles();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.linkText }, /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }), /* @__PURE__ */ React.createElement(Link, { style: { marginLeft: \"8px\" }, to: url }, text || url));\n};\n\nexport { CardLink };\n//# sourceMappingURL=CardLink.esm.js.map\n","import { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { MarkdownContent, UserIcon } from '@backstage/core-components';\nimport { useAnalytics, useApp } from '@backstage/core-plugin-api';\nimport { getEntityRelations, EntityRefLinks } from '@backstage/plugin-catalog-react';\nimport Box from '@material-ui/core/Box';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Chip from '@material-ui/core/Chip';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport React, { useCallback } from 'react';\nimport { CardHeader } from './CardHeader.esm.js';\nimport { CardLink } from './CardLink.esm.js';\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport { taskCreatePermission } from '@backstage/plugin-scaffolder-common/alpha';\n\nconst useStyles = makeStyles((theme) => ({\n  box: {\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    display: \"-webkit-box\",\n    \"-webkit-line-clamp\": 10,\n    \"-webkit-box-orient\": \"vertical\"\n  },\n  markdown: {\n    /** to make the styles for React Markdown not leak into the description */\n    \"& :first-child\": {\n      margin: 0\n    }\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    textTransform: \"uppercase\",\n    fontWeight: \"bold\",\n    letterSpacing: 0.5,\n    lineHeight: 1,\n    fontSize: \"0.75rem\"\n  },\n  footer: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    flex: 1,\n    alignItems: \"center\"\n  },\n  ownedBy: {\n    display: \"flex\",\n    alignItems: \"center\",\n    flex: 1,\n    color: theme.palette.link\n  }\n}));\nconst TemplateCard = (props) => {\n  const { onSelected, template } = props;\n  const styles = useStyles();\n  const analytics = useAnalytics();\n  const ownedByRelations = getEntityRelations(template, RELATION_OWNED_BY);\n  const app = useApp();\n  const iconResolver = (key) => key ? app.getSystemIcon(key) ?? LanguageIcon : LanguageIcon;\n  const hasTags = !!template.metadata.tags?.length;\n  const hasLinks = !!props.additionalLinks?.length || !!template.metadata.links?.length;\n  const displayDefaultDivider = !hasTags && !hasLinks;\n  const { allowed: canCreateTask } = usePermission({\n    permission: taskCreatePermission\n  });\n  const handleChoose = useCallback(() => {\n    analytics.captureEvent(\"click\", `Template has been opened`);\n    onSelected?.(template);\n  }, [analytics, onSelected, template]);\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardHeader, { template }), /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 2 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Box, { className: styles.box }, /* @__PURE__ */ React.createElement(\n    MarkdownContent,\n    {\n      className: styles.markdown,\n      content: template.metadata.description ?? \"No description\"\n    }\n  ))), displayDefaultDivider && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Divider, { \"data-testid\": \"template-card-separator\" })), hasTags && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Divider, { \"data-testid\": \"template-card-separator--tags\" })), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 2 }, template.metadata.tags?.map((tag) => /* @__PURE__ */ React.createElement(Grid, { key: `grid-${tag}`, item: true }, /* @__PURE__ */ React.createElement(\n    Chip,\n    {\n      style: { margin: 0 },\n      size: \"small\",\n      label: tag,\n      key: tag\n    }\n  )))))), hasLinks && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Divider, { \"data-testid\": \"template-card-separator--links\" })), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 2 }, props.additionalLinks?.map(({ icon, text, url }, index) => /* @__PURE__ */ React.createElement(Grid, { className: styles.linkText, item: true, xs: 6, key: index }, /* @__PURE__ */ React.createElement(CardLink, { icon, text, url }))), template.metadata.links?.map(\n    ({ url, icon, title }, index) => /* @__PURE__ */ React.createElement(Grid, { className: styles.linkText, item: true, xs: 6, key: index }, /* @__PURE__ */ React.createElement(\n      CardLink,\n      {\n        icon: iconResolver(icon),\n        text: title || url,\n        url\n      }\n    ))\n  )))))), /* @__PURE__ */ React.createElement(CardActions, { style: { padding: \"16px\", flex: 1, alignItems: \"flex-end\" } }, /* @__PURE__ */ React.createElement(\"div\", { className: styles.footer }, /* @__PURE__ */ React.createElement(\"div\", { className: styles.ownedBy }, ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(UserIcon, { fontSize: \"small\" }), /* @__PURE__ */ React.createElement(\n    EntityRefLinks,\n    {\n      style: { marginLeft: \"8px\" },\n      entityRefs: ownedByRelations,\n      defaultKind: \"Group\",\n      hideIcons: true\n    }\n  ))), canCreateTask ? /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      size: \"small\",\n      variant: \"outlined\",\n      color: \"primary\",\n      onClick: handleChoose\n    },\n    \"Choose\"\n  ) : null)));\n};\n\nexport { TemplateCard };\n//# sourceMappingURL=TemplateCard.esm.js.map\n","import React from 'react';\nimport { Content, ItemCardGrid, ContentHeader } from '@backstage/core-components';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { TemplateCard } from '../TemplateCard/TemplateCard.esm.js';\n\nconst TemplateGroup = (props) => {\n  const {\n    templates,\n    title,\n    components: { CardComponent } = {},\n    onSelected\n  } = props;\n  const titleComponent = typeof title === \"string\" ? /* @__PURE__ */ React.createElement(ContentHeader, { title }) : title;\n  if (templates.length === 0) {\n    return null;\n  }\n  const Card = CardComponent || TemplateCard;\n  return /* @__PURE__ */ React.createElement(Content, null, titleComponent, /* @__PURE__ */ React.createElement(ItemCardGrid, null, templates.map(({ template, additionalLinks }) => /* @__PURE__ */ React.createElement(\n    Card,\n    {\n      key: stringifyEntityRef(template),\n      additionalLinks,\n      template,\n      onSelected\n    }\n  ))));\n};\n\nexport { TemplateGroup };\n//# sourceMappingURL=TemplateGroup.esm.js.map\n","import React, { useCallback } from 'react';\nimport { useEntityList } from '@backstage/plugin-catalog-react';\nimport { isTemplateEntityV1beta3 } from '@backstage/plugin-scaffolder-common';\nimport { Progress, Link } from '@backstage/core-components';\nimport Typography from '@material-ui/core/Typography';\nimport { useApi, errorApiRef } from '@backstage/core-plugin-api';\nimport { TemplateGroup } from '../TemplateGroup/TemplateGroup.esm.js';\n\nconst TemplateGroups = (props) => {\n  const { loading, error, entities } = useEntityList();\n  const { groups, templateFilter, TemplateCardComponent, onTemplateSelected } = props;\n  const errorApi = useApi(errorApiRef);\n  const onSelected = useCallback(\n    (template) => {\n      onTemplateSelected?.(template);\n    },\n    [onTemplateSelected]\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    errorApi.post(error);\n    return null;\n  }\n  if (!entities || !entities.length) {\n    return /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\" }, \"No templates found that match your filter. Learn more about\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-templates/adding-templates\" }, \"adding templates\"), \".\");\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, groups.map(({ title, filter }, index) => {\n    const templates = entities.filter(isTemplateEntityV1beta3).filter((e) => templateFilter ? templateFilter(e) : true).filter(filter).map((template) => {\n      const additionalLinks = props.additionalLinksForEntity?.(template) ?? [];\n      return {\n        template,\n        additionalLinks\n      };\n    });\n    return /* @__PURE__ */ React.createElement(\n      TemplateGroup,\n      {\n        key: index,\n        templates,\n        title,\n        components: { CardComponent: TemplateCardComponent },\n        onSelected\n      }\n    );\n  }));\n};\n\nexport { TemplateGroups };\n//# sourceMappingURL=TemplateGroups.esm.js.map\n","import Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport CreateComponentIcon from '@material-ui/icons/AddCircleOutline';\nimport { catalogEntityCreatePermission } from '@backstage/plugin-catalog-common/alpha';\nimport { usePermission } from '@backstage/plugin-permission-react';\n\nconst RegisterExistingButton = (props) => {\n  const { title, to } = props;\n  const { allowed } = usePermission({\n    permission: catalogEntityCreatePermission\n  });\n  const isXSScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"xs\")\n  );\n  if (!to || !allowed) {\n    return null;\n  }\n  return isXSScreen ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link,\n      color: \"primary\",\n      title,\n      size: \"small\",\n      to\n    },\n    /* @__PURE__ */ React.createElement(CreateComponentIcon, null)\n  ) : /* @__PURE__ */ React.createElement(Button, { component: Link, variant: \"contained\", color: \"primary\", to }, title);\n};\n\nexport { RegisterExistingButton };\n//# sourceMappingURL=RegisterExistingButton.esm.js.map\n","import React, { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useRouteRef, useApp } from '@backstage/core-plugin-api';\nimport { DocsIcon, Page, Header, Content, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { EntityListProvider, CatalogFilterLayout, EntitySearchBar, EntityKindPicker, UserListPicker, EntityTagPicker } from '@backstage/plugin-catalog-react';\nimport { ScaffolderPageContextMenu, TemplateCategoryPicker, TemplateGroups } from '@backstage/plugin-scaffolder-react/alpha';\nimport { RegisterExistingButton } from './RegisterExistingButton.esm.js';\nimport { registerComponentRouteRef, editRouteRef, actionsRouteRef, scaffolderListTaskRouteRef, viewTechDocRouteRef, selectedTemplateRouteRef } from '../../routes.esm.js';\nimport { parseEntityRef, stringifyEntityRef } from '@backstage/catalog-model';\n\nconst defaultGroup = {\n  title: \"Templates\",\n  filter: () => true\n};\nconst createGroupsWithOther = (groups) => [\n  ...groups,\n  {\n    title: \"Other Templates\",\n    filter: (e) => ![...groups].some(({ filter }) => filter(e))\n  }\n];\nconst TemplateListPage = (props) => {\n  const registerComponentLink = useRouteRef(registerComponentRouteRef);\n  const {\n    TemplateCardComponent,\n    groups: givenGroups = [],\n    templateFilter,\n    headerOptions\n  } = props;\n  const navigate = useNavigate();\n  const editorLink = useRouteRef(editRouteRef);\n  const actionsLink = useRouteRef(actionsRouteRef);\n  const tasksLink = useRouteRef(scaffolderListTaskRouteRef);\n  const viewTechDocsLink = useRouteRef(viewTechDocRouteRef);\n  const templateRoute = useRouteRef(selectedTemplateRouteRef);\n  const app = useApp();\n  const groups = givenGroups.length ? createGroupsWithOther(givenGroups) : [defaultGroup];\n  const scaffolderPageContextMenuProps = {\n    onEditorClicked: props?.contextMenu?.editor !== false ? () => navigate(editorLink()) : void 0,\n    onActionsClicked: props?.contextMenu?.actions !== false ? () => navigate(actionsLink()) : void 0,\n    onTasksClicked: props?.contextMenu?.tasks !== false ? () => navigate(tasksLink()) : void 0\n  };\n  const additionalLinksForEntity = useCallback(\n    (template) => {\n      const { kind, namespace, name } = parseEntityRef(\n        stringifyEntityRef(template)\n      );\n      return template.metadata.annotations?.[\"backstage.io/techdocs-ref\"] && viewTechDocsLink ? [\n        {\n          icon: app.getSystemIcon(\"docs\") ?? DocsIcon,\n          text: \"View TechDocs\",\n          url: viewTechDocsLink({ kind, namespace, name })\n        }\n      ] : [];\n    },\n    [app, viewTechDocsLink]\n  );\n  const onTemplateSelected = useCallback(\n    (template) => {\n      const { namespace, name } = parseEntityRef(stringifyEntityRef(template));\n      navigate(templateRoute({ namespace, templateName: name }));\n    },\n    [navigate, templateRoute]\n  );\n  return /* @__PURE__ */ React.createElement(EntityListProvider, null, /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      pageTitleOverride: \"Create a new component\",\n      title: \"Create a new component\",\n      subtitle: \"Create new software components using standard templates in your organization\",\n      ...headerOptions\n    },\n    /* @__PURE__ */ React.createElement(ScaffolderPageContextMenu, { ...scaffolderPageContextMenuProps })\n  ), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, { title: \"Available Templates\" }, /* @__PURE__ */ React.createElement(\n    RegisterExistingButton,\n    {\n      title: \"Register Existing Component\",\n      to: registerComponentLink && registerComponentLink()\n    }\n  ), /* @__PURE__ */ React.createElement(SupportButton, null, \"Create new software components using standard templates. Different templates create different kinds of components (services, websites, documentation, ...).\")), /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(EntitySearchBar, null), /* @__PURE__ */ React.createElement(EntityKindPicker, { initialFilter: \"template\", hidden: true }), /* @__PURE__ */ React.createElement(\n    UserListPicker,\n    {\n      initialFilter: \"all\",\n      availableFilters: [\"all\", \"starred\"]\n    }\n  ), /* @__PURE__ */ React.createElement(TemplateCategoryPicker, null), /* @__PURE__ */ React.createElement(EntityTagPicker, null)), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(\n    TemplateGroups,\n    {\n      groups,\n      templateFilter,\n      TemplateCardComponent,\n      onTemplateSelected,\n      additionalLinksForEntity\n    }\n  ))))));\n};\n\nexport { TemplateListPage };\n//# sourceMappingURL=TemplateListPage.esm.js.map\n","import useAsync from 'react-use/esm/useAsync';\nimport { scaffolderApiRef } from '../../api/ref.esm.js';\nimport { useApi } from '@backstage/core-plugin-api';\n\nconst useTemplateParameterSchema = (templateRef) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const { value, loading, error } = useAsync(\n    () => scaffolderApi.getTemplateParameterSchema(templateRef),\n    [scaffolderApi, templateRef]\n  );\n  return {\n    manifest: value,\n    loading,\n    error\n  };\n};\n\nexport { useTemplateParameterSchema };\n//# sourceMappingURL=useTemplateParameterSchema.esm.js.map\n","/* eslint max-len: 0 */\nexport default {\n    // validation errors\n    AdditionalItemsError: \"Array at `{{pointer}}` may not have an additional item `{{key}}`\",\n    AdditionalPropertiesError: \"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`\",\n    AllOfError: \"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`\",\n    AnyOfError: \"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`\",\n    ConstError: \"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`\",\n    containsAnyError: \"The array at `{{pointer}}` must contain at least one item\",\n    ContainsArrayError: \"The property at `{{pointer}}` must not be an array\",\n    ContainsError: \"The array at `{{pointer}}` must contain an element that matches `{{schema}}`\",\n    EnumError: \"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`\",\n    ForbiddenPropertyError: \"Property name `{{property}}` at `{{pointer}}` is not allowed\",\n    FormatDateError: \"Value `{{value}}` at `{{pointer}}` is not a valid date\",\n    FormatDateTimeError: \"Value `{{value}}` at `{{pointer}}` is not a valid date-time\",\n    FormatEmailError: \"Value `{{value}}` at `{{pointer}}` is not a valid email\",\n    FormatHostnameError: \"Value `{{value}}` at `{{pointer}}` is not a valid hostname\",\n    FormatIPV4Error: \"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address\",\n    FormatIPV4LeadingZeroError: \"IPv4 addresses starting with zero are invalid, since they are interpreted as octals\",\n    FormatIPV6Error: \"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address\",\n    FormatIPV6LeadingZeroError: \"IPv6 addresses starting with zero are invalid, since they are interpreted as octals\",\n    FormatJsonPointerError: \"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer\",\n    FormatRegExError: \"Value `{{value}}` at `{{pointer}}` is not a valid regular expression\",\n    FormatTimeError: \"Value `{{value}}` at `{{pointer}}` is not a valid time\",\n    FormatURIError: \"Value `{{value}}` at `{{pointer}}` is not a valid uri\",\n    FormatURIReferenceError: \"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference\",\n    FormatURITemplateError: \"Value `{{value}}` at `{{pointer}}` is not a valid uri-template\",\n    FormatURLError: \"Value `{{value}}` at `{{pointer}}` is not a valid url\",\n    InvalidDataError: \"No value may be specified in `{{pointer}}`\",\n    InvalidPropertyNameError: \"Invalid property name `{{property}}` at `{{pointer}}`\",\n    MaximumError: \"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum\",\n    MaxItemsError: \"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`\",\n    MaxLengthError: \"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.\",\n    MaxPropertiesError: \"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`\",\n    MinimumError: \"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum\",\n    MinItemsError: \"Too few items in `{{pointer}}`, should be at least `{{minItems}}`, but got `{{length}}`\",\n    MinItemsOneError: \"At least one item is required in `{{pointer}}`\",\n    MinLengthError: \"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.\",\n    MinLengthOneError: \"A value is required in `{{pointer}}`\",\n    MinPropertiesError: \"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`\",\n    MissingDependencyError: \"The required propery '{{missingProperty}}' in `{{pointer}}` is missing\",\n    MissingOneOfPropertyError: \"Value at `{{pointer}}` property: `{{property}}`\",\n    MultipleOfError: \"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`\",\n    MultipleOneOfError: \"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`\",\n    NoAdditionalPropertiesError: \"Additional property `{{property}}` in `{{pointer}}` is not allowed\",\n    NotError: \"Value `{{value}}` at pointer should not match schema `{{not}}`\",\n    OneOfError: \"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema\",\n    OneOfPropertyError: \"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`\",\n    PatternError: \"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`\",\n    PatternPropertiesError: \"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}\",\n    RequiredPropertyError: \"The required property `{{key}}` is missing at `{{pointer}}`\",\n    SchemaWarning: \"Failed retrieving a schema from '{{pointer}}' to key '{{key}}'\",\n    TypeError: \"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`\",\n    UndefinedValueError: \"Value must not be undefined in `{{pointer}}`\",\n    UniqueItemsError: \"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.\",\n    UnknownPropertyError: \"Could not find a valid schema for property `{{pointer}}` within object\",\n    ValueNotEmptyError: \"A value for `{{property}}` is required at `{{pointer}}`\"\n};\n","const toString = Object.prototype.toString;\nexport default function getTypeOf(value) {\n    const type = toString\n        .call(value)\n        .match(/\\s([^\\]]+)\\]/)\n        .pop()\n        .toLowerCase();\n    if (type === \"file\") {\n        return \"object\";\n    }\n    return type;\n}\n","import getTypeOf from \"../getTypeOf\";\nconst OBJECT_TYPE = \"object\";\nconst ARRAY_TYPE = \"array\";\n/**\n * Renders data into a string by {{variables}}.\n * Given a template string, removes all {{property}} substrings and replaces them with the property in the given data\n *\n * @param template - template string containing variables in handelbars/mustache style\n * @param data - flat object containing properties matching variables\n * @return rendered string\n */\nexport default function render(template, data = {}) {\n    return template.replace(/\\{\\{\\w+\\}\\}/g, (match) => {\n        const key = match.replace(/[{}]/g, \"\");\n        const variable = data[key];\n        const variableType = getTypeOf(variable);\n        if (variableType === OBJECT_TYPE || variableType === ARRAY_TYPE) {\n            return JSON.stringify(variable);\n        }\n        return variable;\n    });\n}\n","import strings from \"../config/strings\";\nimport render from \"./render\";\n/**\n * Renders the given string as defined in __@see config/strings.js__\n * @param keyword\n * @param data - template data\n * @param fallback - fallback template\n * @return resulting string\n */\nexport default function __(keyword, data, fallback = keyword) {\n    var _a;\n    const template = (_a = strings[keyword]) !== null && _a !== void 0 ? _a : fallback;\n    return render(template, data);\n}\n","import __ from \"./__\";\nfunction dashCase(text) {\n    return text.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n}\nexport function createError(name, data) {\n    return {\n        type: \"error\",\n        name,\n        code: dashCase(name),\n        message: __(name, data),\n        data\n    };\n}\n/**\n * Creates a custom Error Creator. Its messages are defined by strings-object @see config/strings.ts\n *\n * @param name - id of error (camelcased)\n * @return error constructor function\n */\nexport function createCustomError(name) {\n    return createError.bind(null, name);\n}\n","export default function flattenArray(list, result = []) {\n    for (let i = 0; i < list.length; i += 1) {\n        const item = list[i];\n        if (Array.isArray(item)) {\n            flattenArray(item, result);\n        }\n        else {\n            result.push(item);\n        }\n    }\n    return result;\n}\n","export default {\n    DECLARATOR_ONEOF: \"oneOfProperty\",\n    GET_TEMPLATE_RECURSION_LIMIT: 1,\n    propertyBlacklist: [\"_id\"],\n    templateDefaultOptions: {\n        addOptionalProps: false,\n        removeInvalidData: false,\n        extendDefaults: true\n    }\n};\n","export function createOneOfSchemaResult(schema, oneOfSchema, oneOfIndex) {\n    const childSchema = { ...oneOfSchema };\n    Object.defineProperty(childSchema, \"getOneOfOrigin\", {\n        enumerable: false,\n        value: () => ({\n            index: oneOfIndex,\n            schema\n        })\n    });\n    return childSchema;\n}\n","/**\n * ts type guard for json error\n * @returns true if passed type is a JsonError\n */\nexport function isJsonError(error) {\n    return (error === null || error === void 0 ? void 0 : error.type) === \"error\";\n}\n","import { isJsonError } from \"../types\";\nexport function isPromise(obj) {\n    return obj instanceof Promise;\n}\nexport function errorOrPromise(error) {\n    return isJsonError(error) || isPromise(error);\n}\nexport function errorsOnly(error) {\n    return isJsonError(error);\n}\n","/**\n * @draft-04\n */\nimport flattenArray from \"../utils/flattenArray\";\nimport getTypeOf from \"../getTypeOf\";\nimport settings from \"../config/settings\";\nimport { createOneOfSchemaResult } from \"../schema/createOneOfSchemaResult\";\nimport { errorOrPromise } from \"../utils/filter\";\nimport { isJsonError } from \"../types\";\nconst { DECLARATOR_ONEOF } = settings;\n/**\n * Selects and returns a oneOf schema for the given data\n *\n * @param draft - validator\n * @param data\n * @param schema - current json schema containing property oneOf\n * @param pointer - json pointer to data\n * @return oneOf schema or an error\n */\nexport function resolveOneOf(draft, data, schema = draft.rootSchema, pointer = \"#\") {\n    // !keyword: oneOfProperty\n    // an additional <DECLARATOR_ONEOF> (default `oneOfProperty`) on the schema will exactly determine the\n    // oneOf value (if set in data)\n    // @fixme\n    // abort if no data is given an DECLARATOR_ONEOF is set (used by getChildSchemaSelection)\n    // this case (data != null) should not be necessary\n    if (data != null && schema[DECLARATOR_ONEOF]) {\n        const errors = [];\n        const oneOfProperty = schema[DECLARATOR_ONEOF];\n        const oneOfValue = data[schema[DECLARATOR_ONEOF]];\n        if (oneOfValue === undefined) {\n            return draft.errors.missingOneOfPropertyError({\n                property: oneOfProperty,\n                pointer,\n                schema,\n                value: data\n            });\n        }\n        for (let i = 0; i < schema.oneOf.length; i += 1) {\n            const one = draft.resolveRef(schema.oneOf[i]);\n            const oneOfPropertySchema = draft.step(oneOfProperty, one, data, pointer);\n            if (isJsonError(oneOfPropertySchema)) {\n                return oneOfPropertySchema;\n            }\n            let result = flattenArray(draft.validate(oneOfValue, oneOfPropertySchema, pointer));\n            result = result.filter(errorOrPromise);\n            if (result.length > 0) {\n                errors.push(...result);\n            }\n            else {\n                return createOneOfSchemaResult(schema, one, i); // return resolved schema\n            }\n        }\n        return draft.errors.oneOfPropertyError({\n            property: oneOfProperty,\n            value: oneOfValue,\n            pointer,\n            schema,\n            errors\n        });\n    }\n    const matches = [];\n    const errors = [];\n    for (let i = 0; i < schema.oneOf.length; i += 1) {\n        const one = draft.resolveRef(schema.oneOf[i]);\n        let result = flattenArray(draft.validate(data, one, pointer));\n        result = result.filter(errorOrPromise);\n        if (result.length > 0) {\n            errors.push(...result);\n        }\n        else {\n            matches.push({ index: i, schema: one });\n        }\n    }\n    if (matches.length === 1) {\n        return createOneOfSchemaResult(schema, matches[0].schema, matches[0].index); // return resolved schema\n    }\n    if (matches.length > 1) {\n        return draft.errors.multipleOneOfError({\n            value: data,\n            pointer,\n            schema,\n            matches\n        });\n    }\n    return draft.errors.oneOfError({\n        value: JSON.stringify(data),\n        pointer,\n        schema,\n        oneOf: schema.oneOf,\n        errors\n    });\n}\n/**\n * Returns a ranking for the data and given schema\n *\n * @param draft\n * @param - json schema type: object\n * @param data\n * @param [pointer]\n * @return ranking value (higher is better)\n */\nfunction fuzzyObjectValue(draft, one, data, pointer) {\n    if (data == null || one.properties == null) {\n        return -1;\n    }\n    let value = 0;\n    const keys = Object.keys(one.properties);\n    for (let i = 0; i < keys.length; i += 1) {\n        const key = keys[i];\n        if (data[key] != null && draft.isValid(data[key], one.properties[key], pointer)) {\n            value += 1;\n        }\n    }\n    return value;\n}\n/**\n * Selects and returns a oneOf schema for the given data\n *\n * @param draft\n * @param data\n * @param [schema] - current json schema containing property oneOf\n * @param [pointer] - json pointer to data\n * @return oneOf schema or an error\n */\nexport function resolveOneOfFuzzy(draft, data, schema = draft.rootSchema, pointer = \"#\") {\n    // !keyword: oneOfProperty\n    // an additional <DECLARATOR_ONEOF> (default `oneOfProperty`) on the schema will exactly determine the\n    // oneOf value (if set in data)\n    // @fixme\n    // abort if no data is given an DECLARATOR_ONEOF is set (used by getChildSchemaSelection)\n    // this case (data != null) should not be necessary\n    if (data != null && schema[DECLARATOR_ONEOF]) {\n        const errors = [];\n        const oneOfProperty = schema[DECLARATOR_ONEOF];\n        const oneOfValue = data[schema[DECLARATOR_ONEOF]];\n        if (oneOfValue === undefined) {\n            return draft.errors.missingOneOfPropertyError({\n                property: oneOfProperty,\n                pointer,\n                schema,\n                value: data\n            });\n        }\n        for (let i = 0; i < schema.oneOf.length; i += 1) {\n            const one = draft.resolveRef(schema.oneOf[i]);\n            const oneOfPropertySchema = draft.step(oneOfProperty, one, data, pointer);\n            if (isJsonError(oneOfPropertySchema)) {\n                return oneOfPropertySchema;\n            }\n            let result = flattenArray(draft.validate(oneOfValue, oneOfPropertySchema, pointer));\n            result = result.filter(errorOrPromise);\n            if (result.length > 0) {\n                errors.push(...result);\n            }\n            else {\n                return createOneOfSchemaResult(schema, one, i);\n            }\n        }\n        return draft.errors.oneOfPropertyError({\n            property: oneOfProperty,\n            value: oneOfValue,\n            pointer,\n            schema,\n            errors\n        });\n    }\n    // keyword: oneOf\n    const matches = [];\n    for (let i = 0; i < schema.oneOf.length; i += 1) {\n        const one = draft.resolveRef(schema.oneOf[i]);\n        if (draft.isValid(data, one, pointer)) {\n            matches.push({ schema: one, index: i });\n        }\n    }\n    if (matches.length === 1) {\n        return createOneOfSchemaResult(schema, matches[0].schema, matches[0].index);\n    }\n    // fuzzy match oneOf\n    if (getTypeOf(data) === \"object\") {\n        let schemaOfItem;\n        let schemaOfIndex = -1;\n        let fuzzyGreatest = 0;\n        for (let i = 0; i < schema.oneOf.length; i += 1) {\n            const one = draft.resolveRef(schema.oneOf[i]);\n            const fuzzyValue = fuzzyObjectValue(draft, one, data);\n            if (fuzzyGreatest < fuzzyValue) {\n                fuzzyGreatest = fuzzyValue;\n                schemaOfItem = schema.oneOf[i];\n                schemaOfIndex = i;\n            }\n        }\n        if (schemaOfItem === undefined) {\n            return draft.errors.oneOfError({\n                value: JSON.stringify(data),\n                pointer,\n                schema,\n                oneOf: schema.oneOf\n            });\n        }\n        return createOneOfSchemaResult(schema, schemaOfItem, schemaOfIndex);\n    }\n    if (matches.length > 1) {\n        return draft.errors.multipleOneOfError({ matches, pointer, schema, value: data });\n    }\n    return draft.errors.oneOfError({\n        value: JSON.stringify(data),\n        pointer,\n        schema,\n        oneOf: schema.oneOf\n    });\n}\n/**\n * validates oneOf definition for given input data\n */\nconst validateOneOf = (draft, schema, value, pointer) => {\n    if (Array.isArray(schema.oneOf)) {\n        const schemaOrError = draft.resolveOneOf(value, schema, pointer);\n        if (isJsonError(schemaOrError)) {\n            return schemaOrError;\n        }\n    }\n};\nexport { validateOneOf };\n","import deepmerge from \"deepmerge\";\nconst overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n/**\n * returns a new json-schema, where properties are combined and arrays are replaced\n */\nexport default (a, b) => deepmerge(a, b, { arrayMerge: overwriteMerge });\n// var d = c.filter((item, pos) => c.indexOf(item) === pos)\nconst mergeUniqueItems = (destinationArray, sourceArray) => {\n    const all = destinationArray.concat(sourceArray);\n    return all.filter((item, pos) => all.indexOf(item) === pos);\n};\n/**\n * returns a new json-schema, where properties are combined and arrays are replaced\n */\nexport const mergeArraysUnique = (a, b) => deepmerge(a, b, { arrayMerge: mergeUniqueItems });\n","import { mergeArraysUnique } from \"./utils/merge\";\nimport getTypeOf from \"./getTypeOf\";\n/**\n * merges to two json schema. In case of conflicts, will use overwrite first\n * schema or directly return first json schema.\n */\nexport function mergeSchema(a, b) {\n    const aType = getTypeOf(a);\n    const bType = getTypeOf(b);\n    if (aType !== bType) {\n        return a;\n    }\n    const result = mergeArraysUnique(a, b);\n    if (a.getOneOfOrigin) {\n        Object.defineProperty(result, \"getOneOfOrigin\", {\n            enumerable: false,\n            value: a.getOneOfOrigin\n        });\n    }\n    else if (b.getOneOfOrigin) {\n        Object.defineProperty(result, \"getOneOfOrigin\", {\n            enumerable: false,\n            value: b.getOneOfOrigin\n        });\n    }\n    return result;\n}\n","/**\n * Omit properties from input object. Accepts any number of properties to\n * remove. Example:\n *\n * ```ts\n * omit(myObject, \"if\", \"dependencies\");\n * ```\n *\n * @returns shallow copy of input object without specified properties\n */\nexport function omit(object, ...keysToOmit) {\n    const result = {};\n    Object.keys(object).forEach((key) => {\n        if (!keysToOmit.includes(key)) {\n            result[key] = object[key];\n        }\n    });\n    if (object.getOneOfOrigin) {\n        Object.defineProperty(result, \"getOneOfOrigin\", {\n            enumerable: false,\n            value: object.getOneOfOrigin\n        });\n    }\n    return result;\n}\n","var toStringFunction = Function.prototype.toString;\nvar create = Object.create;\nvar toStringObject = Object.prototype.toString;\n/**\n * @classdesc Fallback cache for when WeakMap is not natively supported\n */\nvar LegacyCache = /** @class */ (function () {\n    function LegacyCache() {\n        this._keys = [];\n        this._values = [];\n    }\n    LegacyCache.prototype.has = function (key) {\n        return !!~this._keys.indexOf(key);\n    };\n    LegacyCache.prototype.get = function (key) {\n        return this._values[this._keys.indexOf(key)];\n    };\n    LegacyCache.prototype.set = function (key, value) {\n        this._keys.push(key);\n        this._values.push(value);\n    };\n    return LegacyCache;\n}());\nfunction createCacheLegacy() {\n    return new LegacyCache();\n}\nfunction createCacheModern() {\n    return new WeakMap();\n}\n/**\n * Get a new cache object to prevent circular references.\n */\nvar createCache = typeof WeakMap !== 'undefined' ? createCacheModern : createCacheLegacy;\n/**\n * Get an empty version of the object with the same prototype it has.\n */\nfunction getCleanClone(prototype) {\n    if (!prototype) {\n        return create(null);\n    }\n    var Constructor = prototype.constructor;\n    if (Constructor === Object) {\n        return prototype === Object.prototype ? {} : create(prototype);\n    }\n    if (Constructor &&\n        ~toStringFunction.call(Constructor).indexOf('[native code]')) {\n        try {\n            return new Constructor();\n        }\n        catch (_a) { }\n    }\n    return create(prototype);\n}\nfunction getRegExpFlagsLegacy(regExp) {\n    var flags = '';\n    if (regExp.global) {\n        flags += 'g';\n    }\n    if (regExp.ignoreCase) {\n        flags += 'i';\n    }\n    if (regExp.multiline) {\n        flags += 'm';\n    }\n    if (regExp.unicode) {\n        flags += 'u';\n    }\n    if (regExp.sticky) {\n        flags += 'y';\n    }\n    return flags;\n}\nfunction getRegExpFlagsModern(regExp) {\n    return regExp.flags;\n}\n/**\n * Get the flags to apply to the copied regexp.\n */\nvar getRegExpFlags = /test/g.flags === 'g' ? getRegExpFlagsModern : getRegExpFlagsLegacy;\nfunction getTagLegacy(value) {\n    var type = toStringObject.call(value);\n    return type.substring(8, type.length - 1);\n}\nfunction getTagModern(value) {\n    return value[Symbol.toStringTag] || getTagLegacy(value);\n}\n/**\n * Get the tag of the value passed, so that the correct copier can be used.\n */\nvar getTag = typeof Symbol !== 'undefined' ? getTagModern : getTagLegacy;\n\nvar defineProperty = Object.defineProperty, getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor, getOwnPropertyNames = Object.getOwnPropertyNames, getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar _a = Object.prototype, hasOwnProperty = _a.hasOwnProperty, propertyIsEnumerable = _a.propertyIsEnumerable;\nvar SUPPORTS_SYMBOL = typeof getOwnPropertySymbols === 'function';\nfunction getStrictPropertiesModern(object) {\n    return getOwnPropertyNames(object).concat(getOwnPropertySymbols(object));\n}\n/**\n * Get the properites used when copying objects strictly. This includes both keys and symbols.\n */\nvar getStrictProperties = SUPPORTS_SYMBOL\n    ? getStrictPropertiesModern\n    : getOwnPropertyNames;\n/**\n * Striclty copy all properties contained on the object.\n */\nfunction copyOwnPropertiesStrict(value, clone, state) {\n    var properties = getStrictProperties(value);\n    for (var index = 0, length_1 = properties.length, property = void 0, descriptor = void 0; index < length_1; ++index) {\n        property = properties[index];\n        if (property === 'callee' || property === 'caller') {\n            continue;\n        }\n        descriptor = getOwnPropertyDescriptor(value, property);\n        if (!descriptor) {\n            // In extra edge cases where the property descriptor cannot be retrived, fall back to\n            // the loose assignment.\n            clone[property] = state.copier(value[property], state);\n            continue;\n        }\n        // Only clone the value if actually a value, not a getter / setter.\n        if (!descriptor.get && !descriptor.set) {\n            descriptor.value = state.copier(descriptor.value, state);\n        }\n        try {\n            defineProperty(clone, property, descriptor);\n        }\n        catch (error) {\n            // Tee above can fail on node in edge cases, so fall back to the loose assignment.\n            clone[property] = descriptor.value;\n        }\n    }\n    return clone;\n}\n/**\n * Deeply copy the indexed values in the array.\n */\nfunction copyArrayLoose(array, state) {\n    var clone = new state.Constructor();\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(array, clone);\n    for (var index = 0, length_2 = array.length; index < length_2; ++index) {\n        clone[index] = state.copier(array[index], state);\n    }\n    return clone;\n}\n/**\n * Deeply copy the indexed values in the array, as well as any custom properties.\n */\nfunction copyArrayStrict(array, state) {\n    var clone = new state.Constructor();\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(array, clone);\n    return copyOwnPropertiesStrict(array, clone, state);\n}\n/**\n * Copy the contents of the ArrayBuffer.\n */\nfunction copyArrayBuffer(arrayBuffer, _state) {\n    return arrayBuffer.slice(0);\n}\n/**\n * Create a new Blob with the contents of the original.\n */\nfunction copyBlob(blob, _state) {\n    return blob.slice(0, blob.size, blob.type);\n}\n/**\n * Create a new DataView with the contents of the original.\n */\nfunction copyDataView(dataView, state) {\n    return new state.Constructor(copyArrayBuffer(dataView.buffer));\n}\n/**\n * Create a new Date based on the time of the original.\n */\nfunction copyDate(date, state) {\n    return new state.Constructor(date.getTime());\n}\n/**\n * Deeply copy the keys and values of the original.\n */\nfunction copyMapLoose(map, state) {\n    var clone = new state.Constructor();\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(map, clone);\n    map.forEach(function (value, key) {\n        clone.set(key, state.copier(value, state));\n    });\n    return clone;\n}\n/**\n * Deeply copy the keys and values of the original, as well as any custom properties.\n */\nfunction copyMapStrict(map, state) {\n    return copyOwnPropertiesStrict(map, copyMapLoose(map, state), state);\n}\nfunction copyObjectLooseLegacy(object, state) {\n    var clone = getCleanClone(state.prototype);\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(object, clone);\n    for (var key in object) {\n        if (hasOwnProperty.call(object, key)) {\n            clone[key] = state.copier(object[key], state);\n        }\n    }\n    return clone;\n}\nfunction copyObjectLooseModern(object, state) {\n    var clone = getCleanClone(state.prototype);\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(object, clone);\n    for (var key in object) {\n        if (hasOwnProperty.call(object, key)) {\n            clone[key] = state.copier(object[key], state);\n        }\n    }\n    var symbols = getOwnPropertySymbols(object);\n    for (var index = 0, length_3 = symbols.length, symbol = void 0; index < length_3; ++index) {\n        symbol = symbols[index];\n        if (propertyIsEnumerable.call(object, symbol)) {\n            clone[symbol] = state.copier(object[symbol], state);\n        }\n    }\n    return clone;\n}\n/**\n * Deeply copy the properties (keys and symbols) and values of the original.\n */\nvar copyObjectLoose = SUPPORTS_SYMBOL\n    ? copyObjectLooseModern\n    : copyObjectLooseLegacy;\n/**\n * Deeply copy the properties (keys and symbols) and values of the original, as well\n * as any hidden or non-enumerable properties.\n */\nfunction copyObjectStrict(object, state) {\n    var clone = getCleanClone(state.prototype);\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(object, clone);\n    return copyOwnPropertiesStrict(object, clone, state);\n}\n/**\n * Create a new primitive wrapper from the value of the original.\n */\nfunction copyPrimitiveWrapper(primitiveObject, state) {\n    return new state.Constructor(primitiveObject.valueOf());\n}\n/**\n * Create a new RegExp based on the value and flags of the original.\n */\nfunction copyRegExp(regExp, state) {\n    var clone = new state.Constructor(regExp.source, getRegExpFlags(regExp));\n    clone.lastIndex = regExp.lastIndex;\n    return clone;\n}\n/**\n * Return the original value (an identity function).\n *\n * @note\n * THis is used for objects that cannot be copied, such as WeakMap.\n */\nfunction copySelf(value, _state) {\n    return value;\n}\n/**\n * Deeply copy the values of the original.\n */\nfunction copySetLoose(set, state) {\n    var clone = new state.Constructor();\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(set, clone);\n    set.forEach(function (value) {\n        clone.add(state.copier(value, state));\n    });\n    return clone;\n}\n/**\n * Deeply copy the values of the original, as well as any custom properties.\n */\nfunction copySetStrict(set, state) {\n    return copyOwnPropertiesStrict(set, copySetLoose(set, state), state);\n}\n\nvar isArray = Array.isArray;\nvar assign = Object.assign;\nvar getPrototypeOf = Object.getPrototypeOf || (function (obj) { return obj.__proto__; });\nvar DEFAULT_LOOSE_OPTIONS = {\n    array: copyArrayLoose,\n    arrayBuffer: copyArrayBuffer,\n    blob: copyBlob,\n    dataView: copyDataView,\n    date: copyDate,\n    error: copySelf,\n    map: copyMapLoose,\n    object: copyObjectLoose,\n    regExp: copyRegExp,\n    set: copySetLoose,\n};\nvar DEFAULT_STRICT_OPTIONS = assign({}, DEFAULT_LOOSE_OPTIONS, {\n    array: copyArrayStrict,\n    map: copyMapStrict,\n    object: copyObjectStrict,\n    set: copySetStrict,\n});\n/**\n * Get the copiers used for each specific object tag.\n */\nfunction getTagSpecificCopiers(options) {\n    return {\n        Arguments: options.object,\n        Array: options.array,\n        ArrayBuffer: options.arrayBuffer,\n        Blob: options.blob,\n        Boolean: copyPrimitiveWrapper,\n        DataView: options.dataView,\n        Date: options.date,\n        Error: options.error,\n        Float32Array: options.arrayBuffer,\n        Float64Array: options.arrayBuffer,\n        Int8Array: options.arrayBuffer,\n        Int16Array: options.arrayBuffer,\n        Int32Array: options.arrayBuffer,\n        Map: options.map,\n        Number: copyPrimitiveWrapper,\n        Object: options.object,\n        Promise: copySelf,\n        RegExp: options.regExp,\n        Set: options.set,\n        String: copyPrimitiveWrapper,\n        WeakMap: copySelf,\n        WeakSet: copySelf,\n        Uint8Array: options.arrayBuffer,\n        Uint8ClampedArray: options.arrayBuffer,\n        Uint16Array: options.arrayBuffer,\n        Uint32Array: options.arrayBuffer,\n        Uint64Array: options.arrayBuffer,\n    };\n}\n/**\n * Create a custom copier based on the object-specific copy methods passed.\n */\nfunction createCopier(options) {\n    var normalizedOptions = assign({}, DEFAULT_LOOSE_OPTIONS, options);\n    var tagSpecificCopiers = getTagSpecificCopiers(normalizedOptions);\n    var array = tagSpecificCopiers.Array, object = tagSpecificCopiers.Object;\n    function copier(value, state) {\n        state.prototype = state.Constructor = undefined;\n        if (!value || typeof value !== 'object') {\n            return value;\n        }\n        if (state.cache.has(value)) {\n            return state.cache.get(value);\n        }\n        state.prototype = getPrototypeOf(value);\n        state.Constructor = state.prototype && state.prototype.constructor;\n        // plain objects\n        if (!state.Constructor || state.Constructor === Object) {\n            return object(value, state);\n        }\n        // arrays\n        if (isArray(value)) {\n            return array(value, state);\n        }\n        var tagSpecificCopier = tagSpecificCopiers[getTag(value)];\n        if (tagSpecificCopier) {\n            return tagSpecificCopier(value, state);\n        }\n        return typeof value.then === 'function' ? value : object(value, state);\n    }\n    return function copy(value) {\n        return copier(value, {\n            Constructor: undefined,\n            cache: createCache(),\n            copier: copier,\n            prototype: undefined,\n        });\n    };\n}\n/**\n * Create a custom copier based on the object-specific copy methods passed, defaulting to the\n * same internals as `copyStrict`.\n */\nfunction createStrictCopier(options) {\n    return createCopier(assign({}, DEFAULT_STRICT_OPTIONS, options));\n}\n/**\n * Copy an value deeply as much as possible, where strict recreation of object properties\n * are maintained. All properties (including non-enumerable ones) are copied with their\n * original property descriptors on both objects and arrays.\n */\nvar copyStrict = createStrictCopier({});\n/**\n * Copy an value deeply as much as possible.\n */\nvar index = createCopier({});\n\nexport { copyStrict, createCopier, createStrictCopier, index as default };\n//# sourceMappingURL=index.mjs.map\n","import copy from \"fast-copy\";\nexport default copy;\n","/**\n * returns if-then-else as a json schema. does not merge with input\n * json schema. you probably will need to do so to correctly resolve\n * references.\n *\n * @returns json schema defined by if-then-else or undefined\n */\nexport function resolveIfSchema(draft, schema, data) {\n    if (schema.if == null) {\n        return undefined;\n    }\n    if (schema.if === false) {\n        return schema.else;\n    }\n    if (schema.if && (schema.then || schema.else)) {\n        const ifErrors = draft.validate(data, draft.resolveRef(schema.if));\n        if (ifErrors.length === 0 && schema.then) {\n            return draft.resolveRef(schema.then);\n        }\n        if (ifErrors.length !== 0 && schema.else) {\n            return draft.resolveRef(schema.else);\n        }\n    }\n}\n/**\n * @returns validation result of it-then-else schema\n */\nconst validateIf = (draft, schema, value, pointer) => {\n    const resolvedSchema = resolveIfSchema(draft, schema, value);\n    if (resolvedSchema) {\n        return draft.validate(value, resolvedSchema, pointer);\n    }\n};\nexport { validateIf };\n","import { mergeSchema } from \"../mergeSchema\";\nimport { omit } from \"../utils/omit\";\nimport copy from \"../utils/copy\";\nimport { resolveIfSchema } from \"./if\";\n/**\n * resolves schema\n * when complete this will have much duplication to step.object etc\n */\nexport function resolveSchema(draft, schemaToResolve, data) {\n    var _a;\n    const schema = { ...((_a = draft.resolveRef(schemaToResolve)) !== null && _a !== void 0 ? _a : {}) };\n    const ifSchema = resolveIfSchema(draft, schema, data);\n    if (ifSchema) {\n        return ifSchema;\n    }\n    return omit(schema, \"if\", \"then\", \"else\");\n}\nexport function resolveAllOf(draft, data, schema = draft.rootSchema) {\n    let mergedSchema = copy(schema);\n    for (let i = 0; i < schema.allOf.length; i += 1) {\n        // @todo introduce draft.resolveSchema to iteratively resolve\n        const allOfSchema = resolveSchema(draft, schema.allOf[i], data);\n        mergedSchema = mergeSchema(mergedSchema, allOfSchema);\n    }\n    delete mergedSchema.allOf;\n    return mergedSchema;\n}\n/**\n * @attention: subschemas have to be resolved upfront (e.g. if-else that do not apply)\n * Merge all allOf sub schema into a single schema. Returns undefined for\n * missing allOf definition.\n *\n * @returns json schema defined by allOf or undefined\n */\nexport function mergeAllOfSchema(draft, schema) {\n    const { allOf } = schema;\n    if (!Array.isArray(allOf) || allOf.length === 0) {\n        return;\n    }\n    let resolvedSchema = {};\n    allOf.forEach((subschema) => {\n        resolvedSchema = mergeSchema(resolvedSchema, draft.resolveRef(subschema));\n    });\n    return resolvedSchema;\n}\n/**\n * validate allOf definition for given input data\n */\nconst validateAllOf = (draft, schema, value, pointer) => {\n    const { allOf } = schema;\n    if (!Array.isArray(allOf) || allOf.length === 0) {\n        return;\n    }\n    const errors = [];\n    schema.allOf.forEach((subSchema) => {\n        errors.push(...draft.validate(value, subSchema, pointer));\n    });\n    return errors;\n};\nexport { validateAllOf };\n","/**\n * @returns list with unique values only\n */\nexport function uniqueItems(list) {\n    return list.filter((item, index) => list.indexOf(item) === index);\n}\n","import getTypeOf from \"../getTypeOf\";\nexport function isObject(v) {\n    return getTypeOf(v) === \"object\";\n}\n","import getTypeOf from \"../getTypeOf\";\nimport { mergeSchema } from \"../mergeSchema\";\nimport { uniqueItems } from \"../utils/uniqueItems\";\nimport { isObject } from \"../utils/isObject\";\n/**\n * returns dependencies as an object json schema. does not merge with input\n * json schema. you probably will need to do so to correctly resolve\n * references.\n *\n * @returns merged json schema defined by dependencies or undefined\n */\nexport function resolveDependencies(draft, schema, data) {\n    const { dependencies } = schema;\n    if (!isObject(dependencies) || !isObject(data)) {\n        return;\n    }\n    let updated = false;\n    let resolvedSchema = { required: [] };\n    Object.keys(dependencies).forEach((prop) => {\n        var _a, _b;\n        if (data[prop] == null &&\n            !(((_a = schema.required) === null || _a === void 0 ? void 0 : _a.includes(prop)) || ((_b = resolvedSchema.required) === null || _b === void 0 ? void 0 : _b.includes(prop)))) {\n            return;\n        }\n        const dependency = dependencies[prop];\n        // dependency array\n        if (Array.isArray(dependency)) {\n            updated = true;\n            resolvedSchema.required.push(...dependency);\n            return;\n        }\n        // dependency schema\n        if (isObject(dependency)) {\n            updated = true;\n            resolvedSchema = mergeSchema(resolvedSchema, draft.resolveRef(dependency));\n            return;\n        }\n    });\n    if (updated) {\n        resolvedSchema.required = uniqueItems(resolvedSchema.required);\n        return resolvedSchema;\n    }\n}\n/**\n * validate dependencies definition for given input data\n */\nconst validateDependencies = (draft, schema, value, pointer) => {\n    if (getTypeOf(schema.dependencies) !== \"object\") {\n        return undefined;\n    }\n    const errors = [];\n    Object.keys(value).forEach((property) => {\n        if (schema.dependencies[property] === undefined) {\n            return;\n        }\n        // @draft >= 6 boolean schema\n        if (schema.dependencies[property] === true) {\n            return;\n        }\n        if (schema.dependencies[property] === false) {\n            errors.push(draft.errors.missingDependencyError({ pointer, schema, value }));\n            return;\n        }\n        let dependencyErrors;\n        const type = getTypeOf(schema.dependencies[property]);\n        if (type === \"array\") {\n            dependencyErrors = schema.dependencies[property]\n                .filter((dependency) => value[dependency] === undefined)\n                .map((missingProperty) => draft.errors.missingDependencyError({ missingProperty, pointer, schema, value }));\n        }\n        else if (type === \"object\") {\n            dependencyErrors = draft.validate(value, schema.dependencies[property], pointer);\n        }\n        else {\n            throw new Error(`Invalid dependency definition for ${pointer}/${property}. Must be string[] or schema`);\n        }\n        errors.push(...dependencyErrors);\n    });\n    return errors.length > 0 ? errors : undefined;\n};\nexport { validateDependencies };\n","/**\n * @draft-04\n */\nimport { mergeSchema } from \"../mergeSchema\";\nimport { omit } from \"../utils/omit\";\n/**\n * returns merged schema of all valid anyOf subschemas for the given input data.\n * Does not merge with rest input schema.\n *\n * @returns merged anyOf subschemas which are valid to the given input data.\n */\nexport function mergeValidAnyOfSchema(draft, schema, data) {\n    if (!Array.isArray(schema.anyOf) || schema.anyOf.length === 0) {\n        return;\n    }\n    let resolvedSchema;\n    schema.anyOf.forEach((anySchema) => {\n        anySchema = draft.resolveRef(anySchema);\n        if (draft.isValid(data, anySchema)) {\n            resolvedSchema = resolvedSchema ? mergeSchema(resolvedSchema, anySchema) : anySchema;\n        }\n    });\n    return resolvedSchema;\n}\n/**\n * @returns extended input schema with valid anyOf subschemas or JsonError if\n * no anyOf schema matches input data\n */\nexport function resolveAnyOf(draft, data, schema = draft.rootSchema, pointer = \"#\") {\n    const { anyOf } = schema;\n    if (!Array.isArray(anyOf) || anyOf.length === 0) {\n        return schema;\n    }\n    const resolvedSchema = mergeValidAnyOfSchema(draft, schema, data);\n    if (resolvedSchema == null) {\n        return draft.errors.anyOfError({ pointer, schema, value: data, anyOf: JSON.stringify(anyOf) });\n    }\n    const mergedSchema = mergeSchema(schema, resolvedSchema);\n    return omit(mergedSchema, \"anyOf\");\n}\n/**\n * validate anyOf definition for given input data\n */\nconst validateAnyOf = (draft, schema, value, pointer) => {\n    if (!Array.isArray(schema.anyOf) || schema.anyOf.length === 0) {\n        return undefined;\n    }\n    for (let i = 0; i < schema.anyOf.length; i += 1) {\n        if (draft.isValid(value, schema.anyOf[i])) {\n            return undefined;\n        }\n    }\n    return draft.errors.anyOfError({ pointer, schema, value, anyOf: schema.anyOf });\n};\nexport { validateAnyOf };\n","import { isJsonError } from \"./types\";\nimport { mergeSchema } from \"./mergeSchema\";\nimport { resolveIfSchema } from \"./features/if\";\nimport { resolveDependencies } from \"./features/dependencies\";\nimport { mergeAllOfSchema } from \"./features/allOf\";\nimport { mergeValidAnyOfSchema } from \"./features/anyOf\";\nimport { resolveOneOfFuzzy as resolveOneOf } from \"./features/oneOf\";\nimport { omit } from \"./utils/omit\";\nconst toOmit = [\"allOf\", \"anyOf\", \"oneOf\", \"dependencies\", \"if\", \"then\", \"else\"];\nconst dynamicProperties = [\"allOf\", \"anyOf\", \"oneOf\", \"dependencies\", \"if\"];\nexport function isDynamicSchema(schema) {\n    const givenProps = Object.keys(schema);\n    return dynamicProperties.findIndex((prop) => givenProps.includes(prop)) !== -1;\n}\n/**\n * @note this utility does not reference draft methods for resolution\n * @todo consider using draft methods\n *\n * Resolves all dynamic schema definitions for the given input data and returns\n * the resulting json-schema without any dynamic schema definitions. The result\n * is not merged with the original input schema, thus static definitions of the\n * input schema are untouched and missing. For a full schema definition of this\n * input data you have to merge the result with the original schema\n * (@see reduceSchema)\n *\n * dynamic schema definitions: dependencies, allOf, anyOf, oneOf, if\n *\n * @returns static schema from resolved dynamic schema definitions for this\n *  specific input data\n */\nexport function resolveDynamicSchema(draft, schema, data, pointer) {\n    let resolvedSchema;\n    let error;\n    schema = draft.resolveRef(schema);\n    // @feature oneOf\n    if (schema.oneOf) {\n        const oneOfSchema = resolveOneOf(draft, data, schema, pointer);\n        if (isJsonError(oneOfSchema)) {\n            error = oneOfSchema;\n        }\n        else if (oneOfSchema) {\n            resolvedSchema = mergeSchema(resolvedSchema !== null && resolvedSchema !== void 0 ? resolvedSchema : {}, oneOfSchema);\n        }\n    }\n    // @feature allOf\n    if (Array.isArray(schema.allOf)) {\n        const allOf = schema.allOf.map((s) => {\n            // before merging allOf schema we need to resolve all subschemas\n            // if not, we would wrongly merge oneOf, if-then statements, etc\n            if (isDynamicSchema(s)) {\n                // copy of reduceSchema\n                let result = resolveDynamicSchema(draft, s, data, pointer);\n                if (result) {\n                    result = mergeSchema(s, result);\n                    return omit(result, ...toOmit);\n                }\n                return undefined;\n            }\n            return s;\n        });\n        if (allOf.length > 0) {\n            const allOfSchema = mergeAllOfSchema(draft, { allOf });\n            resolvedSchema = mergeSchema(resolvedSchema !== null && resolvedSchema !== void 0 ? resolvedSchema : {}, allOfSchema);\n        }\n    }\n    // @feature anyOf\n    const anyOfSchema = mergeValidAnyOfSchema(draft, schema, data);\n    if (anyOfSchema) {\n        resolvedSchema = mergeSchema(resolvedSchema !== null && resolvedSchema !== void 0 ? resolvedSchema : {}, anyOfSchema);\n    }\n    // @feature dependencies\n    const dependenciesSchema = resolveDependencies(draft, schema, data);\n    if (dependenciesSchema) {\n        resolvedSchema = mergeSchema(resolvedSchema !== null && resolvedSchema !== void 0 ? resolvedSchema : {}, dependenciesSchema);\n    }\n    // @feature if-then-else\n    const ifSchema = resolveIfSchema(draft, schema, data);\n    if (ifSchema) {\n        resolvedSchema = mergeSchema(resolvedSchema !== null && resolvedSchema !== void 0 ? resolvedSchema : {}, ifSchema);\n    }\n    if (resolvedSchema == null) {\n        return error;\n    }\n    const nestedSchema = resolveDynamicSchema(draft, resolvedSchema, data, pointer);\n    if (nestedSchema) {\n        resolvedSchema = mergeSchema(resolvedSchema, nestedSchema);\n    }\n    return omit(resolvedSchema, ...toOmit);\n}\n","import { mergeSchema } from \"./mergeSchema\";\nimport { resolveDynamicSchema } from \"./resolveDynamicSchema\";\nimport { omit } from \"./utils/omit\";\nconst toOmit = [\"allOf\", \"anyOf\", \"oneOf\", \"dependencies\", \"if\", \"then\", \"else\"];\n/**\n * reduces json schema by merging dynamic constructs like if-then-else,\n * dependencies, allOf, anyOf, oneOf, etc into a static json schema\n * omitting those properties.\n *\n * @returns input schema reduced by dynamic schema definitions for the given\n * input data\n */\nexport function reduceSchema(draft, schema, data, pointer) {\n    let resolvedSchema = resolveDynamicSchema(draft, schema, data, pointer);\n    if (resolvedSchema) {\n        resolvedSchema = mergeSchema(schema, resolvedSchema);\n        return omit(resolvedSchema, ...toOmit);\n    }\n    return schema;\n}\n","import copy from \"../utils/copy\";\nexport class Draft {\n    constructor(config, schema) {\n        /** cache for remote schemas */\n        this.remotes = {};\n        /** error creators by id */\n        this.errors = {};\n        /** map for valid keywords of a type  */\n        this.typeKeywords = {};\n        /** keyword validators  */\n        this.validateKeyword = {};\n        /** type validators  */\n        this.validateType = {};\n        /** format validators  */\n        this.validateFormat = {};\n        this.config = config;\n        this.typeKeywords = copy(config.typeKeywords);\n        this.validateKeyword = Object.assign({}, config.validateKeyword);\n        this.validateType = Object.assign({}, config.validateType);\n        this.validateFormat = Object.assign({}, config.validateFormat);\n        this.errors = Object.assign({}, config.errors);\n        this.setSchema(schema);\n    }\n    get rootSchema() {\n        return this.__rootSchema;\n    }\n    set rootSchema(rootSchema) {\n        if (rootSchema == null) {\n            return;\n        }\n        this.__rootSchema = this.config.compileSchema(this, rootSchema);\n    }\n    /**\n     * register a json-schema to be referenced from another json-schema\n     * @param url - base-url of json-schema (aka id)\n     * @param schema - json-schema root\n     */\n    addRemoteSchema(url, schema) {\n        this.config.addRemoteSchema(this, url, schema);\n    }\n    compileSchema(schema) {\n        var _a;\n        return this.config.compileSchema(this, schema, (_a = this.rootSchema) !== null && _a !== void 0 ? _a : schema);\n    }\n    createSchemaOf(data) {\n        return this.config.createSchemaOf(data);\n    }\n    /**\n     * Iterates over data, retrieving its schema\n     *\n     * @param data - the data to iterate\n     * @param callback - will be called with (schema, data, pointer) on each item\n     * @param [schema] - the schema matching the data. Defaults to rootSchema\n     * @param [pointer] - pointer to current data. Default to rootPointer\n     */\n    each(data, callback, schema, pointer) {\n        return this.config.each(this, data, callback, schema, pointer);\n    }\n    eachSchema(callback, schema = this.rootSchema) {\n        return this.config.eachSchema(schema, callback);\n    }\n    getChildSchemaSelection(property, schema) {\n        return this.config.getChildSchemaSelection(this, property, schema);\n    }\n    /**\n     * Returns the json-schema of a data-json-pointer.\n     *\n     * To resolve dynamic schema where the type of json-schema is evaluated by\n     * its value, a data object has to be passed in options.\n     *\n     * Per default this function will return `undefined` for valid properties that\n     * do not have a defined schema. Use the option `withSchemaWarning: true` to\n     * receive an error with `code: schema-warning` containing the location of its\n     * last evaluated json-schema.\n     *\n     * Notes\n     *      - uses draft.step to walk through data and schema\n     *\n     * @param draft\n     * @param pointer - json pointer in data to get the json schema for\n     * @param [options.data] - the data object, which includes the json pointers value. This is optional, as\n     *    long as no oneOf, anyOf, etc statement is part of the pointers schema\n     * @param [options.schema] - the json schema to iterate. Defaults to draft.rootSchema\n     * @param [options.withSchemaWarning] - if true returns an error instead of `undefined` for valid properties missing a schema definition\n     * @return resolved json-schema object of requested json-pointer location\n     */\n    getSchema(options) {\n        return this.config.getSchema(this, options);\n    }\n    /**\n     * Create data object matching the given schema\n     *\n     * @param [data] - optional template data\n     * @param [schema] - json schema, defaults to rootSchema\n     * @return created template data\n     */\n    getTemplate(data, schema, opts = this.config.templateDefaultOptions) {\n        return this.config.getTemplate(this, data, schema, opts);\n    }\n    isValid(data, schema, pointer) {\n        return this.config.isValid(this, data, schema, pointer);\n    }\n    resolveAnyOf(data, schema, pointer) {\n        return this.config.resolveAnyOf(this, data, schema, pointer);\n    }\n    resolveAllOf(data, schema) {\n        return this.config.resolveAllOf(this, data, schema);\n    }\n    resolveRef(schema) {\n        return this.config.resolveRef(schema, this.rootSchema);\n    }\n    resolveOneOf(data, schema, pointer) {\n        return this.config.resolveOneOf(this, data, schema, pointer);\n    }\n    setSchema(schema) {\n        this.rootSchema = schema;\n    }\n    /**\n     * Returns the json-schema of the given object property or array item.\n     * e.g. it steps by one key into the data\n     *\n     *  This helper determines the location of the property within the schema (additional properties, oneOf, ...) and\n     *  returns the correct schema.\n     *\n     * @param  key       - property-name or array-index\n     * @param  schema    - json schema of current data\n     * @param  data      - parent of key\n     * @param  [pointer] - pointer to schema and data (parent of key)\n     * @return Schema or Error if failed resolving key\n     */\n    step(key, schema, data, pointer) {\n        return this.config.step(this, key, schema, data, pointer);\n    }\n    /**\n     * Validate data by a json schema\n     *\n     * @param value - value to validate\n     * @param [schema] - json schema, defaults to rootSchema\n     * @param [pointer] - json pointer pointing to value (used for error-messages only)\n     * @return list of errors or empty\n     */\n    validate(data, schema, pointer) {\n        return this.config.validate(this, data, schema, pointer);\n    }\n}\n","/**\n * register a json-schema to be referenced from another json-schema\n * @param url    base-url of json-schema (aka id)\n * @param schema\n */\nexport default function addRemoteSchema(draft, url, schema) {\n    schema.id = schema.id || url;\n    draft.remotes[url] = draft.compileSchema(schema);\n}\n","export const propertyRegex = \"[^?/{}*,()#]+\";\n// W3C ENBF grammar\n// https://github.com/lys-lang/node-ebnf/blob/master/test/W3CEBNF.spec.ts\n// https://www.w3.org/TR/xml/#sec-notation\nexport const jsonQueryGrammar = `\nroot ::= (\"#\" recursion | recursion | (query | pattern) recursion* | \"#\" SEP? | SEP)\nrecursion ::= (SEP query | pattern)*\n\nquery ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?\nproperty ::= ${propertyRegex}\nregex ::= \"{\" [^}]+ \"}\"\nSEP ::= \"/\"\nall ::= \"**\"\nany ::= \"*\"\n\ntypecheck ::= \"?:\" (\"value\" | \"boolean\" | \"string\" | \"number\" | \"object\" | \"array\")\nlookahead ::= \"?\" expression ((andExpr | orExpr) expression)*\nandExpr ::= S? \"&&\" S?\norExpr ::= S? \"||\" S?\n\nexpression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*\nexprProperty ::= [a-zA-Z0-9-_ $]+\nescaped ::= [^\"]+\nis ::= \":\"\nisnot ::= \":!\"\nESC ::= '\"'\n\npattern ::= S? \"(\" (SEP query | pattern (orPattern? pattern)*)* \")\" quantifier? S? lookahead?\nquantifier ::= \"+\" | \"*\" | [0-9]+\norPattern ::= S? \",\" S?\n\nS ::= [ ]*\n`;\n","import EBNF from \"ebnf/dist/Grammars/W3CEBNF\";\nimport { jsonQueryGrammar } from \"./jsonQueryGrammar\";\nconst valid = /(children|text|type|start|end|rest|errors|fullText|\\d+)/;\nconst subset = /(children|text|type|\\d+)/;\nconst toJSON = (ast) => JSON.stringify(ast, (key, value) => (key === \"\" || valid.test(key) ? value : undefined), 2);\nconst toSmallJSON = (ast) => JSON.stringify(ast, (key, value) => key === \"\" || (key === \"rest\" && value !== \"\") || subset.test(key)\n    ? value\n    : undefined, 2);\nconst parser = new EBNF.Parser(jsonQueryGrammar);\nexport const parse = (query) => parser.getAST(query);\nexport const reduce = (ast) => JSON.parse(toSmallJSON(ast));\nexport { toJSON };\n","export const VALUE_INDEX = 0;\nexport const KEY_INDEX = 1;\nexport const PARENT_INDEX = 2;\nexport const POINTER_INDEX = 3;\n","const join = (a, b) => `${a}/${b}`;\nimport { VALUE_INDEX, POINTER_INDEX } from \"./keys\";\nconst toString = Object.prototype.toString;\nconst rContainer = /Object|Array/;\nconst isContainer = (v) => rContainer.test(toString.call(v));\nconst getTypeOf = (v) => toString\n    .call(v)\n    .match(/\\s([^\\]]+)\\]/)\n    .pop()\n    .toLowerCase();\nfunction nodeAsRegex(node) {\n    return new RegExp(node.text.replace(/(^{|}$)/g, \"\"));\n}\n/**\n * Iterates over object or array, passing each key, value and parentObject to the callback\n * @param value - to iterate\n * @param callback - receiving key on given input value\n */\nfunction forEach(parent, callback) {\n    if (Array.isArray(parent)) {\n        parent.forEach(callback);\n    }\n    else if (Object.prototype.toString.call(parent) === \"[object Object]\") {\n        Object.keys(parent).forEach(function (key) {\n            callback(parent[key], key, parent);\n        });\n    }\n}\n/**\n * Returns all keys of the given input data\n * @param  value\n * @return {Array} containing keys of given value\n */\nfunction getKeys(value) {\n    if (Array.isArray(value)) {\n        return value.map(function (value, index) {\n            return `${index}`;\n        });\n    }\n    if (Object.prototype.toString.call(value) === \"[object Object]\") {\n        return Object.keys(value);\n    }\n    return [];\n}\nconst cache = {\n    mem: [],\n    get(entry, prop) {\n        const v = entry[VALUE_INDEX][prop];\n        if (cache.mem.includes(v)) {\n            return undefined;\n        }\n        if (isContainer(v)) {\n            cache.mem.push(v);\n        }\n        return [v, prop, entry[VALUE_INDEX], join(entry[POINTER_INDEX], prop)];\n    },\n    reset() {\n        cache.mem.length = 0;\n    },\n};\nconst expand = {\n    any(node, entry) {\n        const value = entry[VALUE_INDEX];\n        return (getKeys(value)\n            // .map(prop => cache.get(entry, prop));\n            .map((prop) => [\n            value[prop],\n            prop,\n            value,\n            join(entry[POINTER_INDEX], prop),\n        ]));\n    },\n    all(node, entry) {\n        const result = [entry];\n        forEach(entry[VALUE_INDEX], (value, prop) => {\n            const childEntry = cache.get(entry, prop);\n            // const childEntry = [value, prop, entry[VALUE_INDEX], join(entry[POINTER_INDEX], prop)];\n            childEntry && result.push(...expand.all(node, childEntry));\n        });\n        return result;\n    },\n    regex(node, entry) {\n        const regex = nodeAsRegex(node);\n        const value = entry[VALUE_INDEX];\n        return getKeys(value)\n            .filter((prop) => regex.test(prop))\n            .map((prop) => [\n            value[prop],\n            prop,\n            value,\n            join(entry[POINTER_INDEX], prop),\n        ]);\n    },\n};\nconst select = {\n    // alias to property (but escaped)\n    escaped: (node, entry) => select.property(node, entry),\n    property: (node, entry) => {\n        const prop = node.text;\n        if (entry[VALUE_INDEX] && entry[VALUE_INDEX][prop] !== undefined) {\n            return [\n                entry[VALUE_INDEX][prop],\n                prop,\n                entry[VALUE_INDEX],\n                join(entry[POINTER_INDEX], prop),\n            ];\n        }\n    },\n    typecheck: (node, entry) => {\n        const checkedTyped = node.text.replace(/^\\?:/, \"\");\n        if (checkedTyped === \"value\") {\n            return isContainer(entry[VALUE_INDEX]) ? undefined : entry;\n        }\n        const type = getTypeOf(entry[VALUE_INDEX]);\n        if (type === checkedTyped) {\n            return entry;\n        }\n    },\n    lookahead: (node, entry) => {\n        let valid = true;\n        let or = false;\n        node.children.forEach((expr) => {\n            if (expr.type === \"expression\") {\n                const isValid = select.expression(expr, entry) !== undefined;\n                valid = or === true ? valid || isValid : valid && isValid;\n            }\n            else {\n                or = expr.type === \"orExpr\";\n            }\n        });\n        return valid ? entry : undefined;\n    },\n    expression: (node, entry) => {\n        const prop = node.children[0].text;\n        const cmp = node.children[1];\n        const test = node.children[2];\n        const value = entry[VALUE_INDEX];\n        if (isContainer(value) === false) {\n            return undefined;\n        }\n        return expressionMatches(value[prop], cmp, test) ? entry : undefined;\n    },\n};\nfunction expressionMatches(value, cmp, test) {\n    if (cmp === undefined) {\n        return value !== undefined;\n    }\n    let valid;\n    const valueString = `${value}`;\n    if (test.type === \"regex\") {\n        const regex = nodeAsRegex(test);\n        valid = regex.test(valueString);\n    }\n    else {\n        valid = valueString === test.text;\n    }\n    if (cmp.type === \"isnot\") {\n        valid = valid === false && value !== undefined;\n    }\n    return valid;\n}\nexport { expand, select, cache };\n","import { expand, select, cache } from \"./nodes\";\nimport { VALUE_INDEX, KEY_INDEX, PARENT_INDEX, POINTER_INDEX } from \"./keys\";\nfunction collect(func, input, node, pointer) {\n    const result = [];\n    for (let i = 0, l = input.length; i < l; i += 1) {\n        result.push(...func(node, input[i], node, pointer));\n    }\n    return result;\n}\nfunction reduce(func, input, node, pointer) {\n    const result = [];\n    for (let i = 0, l = input.length; i < l; i += 1) {\n        const output = func(node, input[i], pointer);\n        if (output) {\n            result.push(output);\n        }\n    }\n    return result;\n}\nfunction query(data, ast, pointer) {\n    let result = data;\n    ast.children.forEach((node) => {\n        if (expand[node.type]) {\n            result = collect(expand[node.type], result, node, pointer);\n        }\n        else if (select[node.type]) {\n            result = reduce(select[node.type], result, node, pointer);\n        }\n        else {\n            throw new Error(`Unknown filter ${node.type}`);\n        }\n    });\n    return result;\n}\nfunction runPatternOnce(inputSet, ast, pointer) {\n    const resultingSet = [];\n    let workingSet = inputSet;\n    ast.children.forEach((node) => {\n        if (node.type === \"orPattern\") {\n            resultingSet.push(...workingSet);\n            workingSet = inputSet;\n            return;\n        }\n        workingSet = runNode(workingSet, node, pointer);\n    });\n    resultingSet.push(...workingSet);\n    return resultingSet;\n}\nfunction getIterationCount(quantifier) {\n    if (quantifier == null) {\n        return 1; // default, simple group\n    }\n    if (quantifier === \"*\" || quantifier === \"+\") {\n        return Infinity;\n    }\n    const count = parseInt(quantifier);\n    return isNaN(count) ? 1 : count;\n}\nfunction pattern(data, ast, pointer) {\n    const result = [];\n    const quantifier = ast.children.find((node) => node.type === \"quantifier\");\n    const iterationCount = getIterationCount(quantifier && quantifier.text);\n    let workingSet = data;\n    if (quantifier && quantifier.text === \"*\") {\n        result.push(...workingSet);\n    }\n    let count = 0;\n    while (workingSet.length > 0 && count < iterationCount) {\n        workingSet = runPatternOnce(workingSet, ast, pointer);\n        result.push(...workingSet);\n        count += 1;\n    }\n    return result;\n}\nfunction skip(data, ast, pointer) {\n    let result = data;\n    ast.children.forEach((n) => (result = runNode(result, n, pointer)));\n    return result;\n}\nfunction runNode(data, ast, pointer) {\n    let result;\n    if (ast.type === \"query\") {\n        result = query(data, ast, pointer);\n    }\n    else if (ast.type === \"pattern\") {\n        result = pattern(data, ast, pointer);\n    }\n    else {\n        result = skip(data, ast, pointer);\n    }\n    // after each query or pattern, reset the cache, to (re)enable nested queries\n    cache.reset();\n    cache.mem.push(data);\n    return result;\n}\nexport function run(data, ast) {\n    cache.reset();\n    cache.mem.push(data);\n    return runNode([[data, null, null, \"#\"]], ast);\n}\nexport { VALUE_INDEX, KEY_INDEX, PARENT_INDEX, POINTER_INDEX };\n","import { parse } from \"./parser\";\nimport { run, VALUE_INDEX, POINTER_INDEX } from \"./interpreter\";\nconst returnTypes = {\n    value: (r) => r.map((e) => e[VALUE_INDEX]),\n    pointer: (r) => r.map((e) => e[POINTER_INDEX]),\n    all: (r) => r,\n    map: (r) => {\n        const map = {};\n        r.forEach((e) => (map[e[POINTER_INDEX]] = e[VALUE_INDEX]));\n        return map;\n    },\n};\nexport var ReturnType;\n(function (ReturnType) {\n    ReturnType[\"POINTER\"] = \"pointer\";\n    ReturnType[\"VALUE\"] = \"value\";\n    ReturnType[\"ALL\"] = \"all\";\n    ReturnType[\"MAP\"] = \"map\";\n})(ReturnType || (ReturnType = {}));\n// export return types on function\nget.POINTER = ReturnType.POINTER;\nget.VALUE = ReturnType.VALUE;\nget.ALL = ReturnType.ALL;\nget.MAP = ReturnType.MAP;\n/**\n * Runs query on input data and returns the results\n * @param data - input data\n * @param queryString - json-query string\n * @param returnType - result format or a custom callback\n */\nexport function get(data, queryString, returnType = ReturnType.VALUE) {\n    if (queryString == null) {\n        return [];\n    }\n    queryString = queryString.replace(/(\\/$)/g, \"\");\n    if (queryString === \"\") {\n        queryString = \"#\";\n    }\n    const ast = parse(queryString);\n    if (ast == null) {\n        throw new Error(`empty ast for '${queryString}'`);\n    }\n    if (ast.rest !== \"\") {\n        throw new Error(`Failed parsing queryString from: '${ast.rest}'`);\n    }\n    const result = run(data, ast);\n    if (typeof returnType === \"function\") {\n        return result.map((r) => returnType(...r));\n    }\n    else if (returnTypes[returnType]) {\n        return returnTypes[returnType](result);\n    }\n    return result;\n}\n","import { parse } from \"./parser\";\nconst skip = [\"root\", \"recursion\"];\nfunction buildPath(node, path = []) {\n    if (skip.includes(node.type)) {\n        node.children.forEach((n) => buildPath(n, path));\n        return path;\n    }\n    // remove escaped property quotes?\n    path.push(node.text);\n    return path;\n}\n/**\n * Returns queryString as a list of property-queries\n */\nexport function split(queryString) {\n    if (queryString == null || queryString === \"\") {\n        return [];\n    }\n    const ast = parse(queryString);\n    // console.log(toJSON(ast, null, 2));\n    return buildPath(ast);\n}\n","import { get, ReturnType } from \"./get\";\nimport { propertyRegex } from \"./parser/jsonQueryGrammar\";\nimport { split } from \"./split\";\nconst cp = (v) => JSON.parse(JSON.stringify(v));\nconst toString = Object.prototype.toString;\nconst getType = (v) => toString\n    .call(v)\n    .match(/\\s([^\\]]+)\\]/)\n    .pop()\n    .toLowerCase();\nconst isProperty = new RegExp(`^(\"[^\"]+\"|${propertyRegex})$`);\nconst ignoreTypes = [\"string\", \"number\", \"boolean\", \"null\"];\nconst isArray = /^\\[\\d*\\]$/;\nconst arrayHasIndex = /^\\[(\\d+)\\]$/;\nconst isEscaped = /^\".+\"$/;\nconst isArrayProp = /(^\\[\\d*\\]$|^\\d+$)/;\nfunction convertToIndex(index) {\n    return parseInt(index.replace(/^(\\[|\\]$)/, \"\"));\n}\nfunction removeEscape(property) {\n    return isEscaped.test(property)\n        ? property.replace(/(^\"|\"$)/g, \"\")\n        : property;\n}\nfunction insert(array, index, value) {\n    if (array.length <= index) {\n        array[index] = value;\n    }\n    else {\n        array.splice(index, 0, value);\n    }\n}\nfunction select(workingSet, query) {\n    const nextSet = [];\n    workingSet.forEach((d) => nextSet.push(...get(d[0], query, ReturnType.ALL)));\n    return nextSet;\n}\nfunction addToArray(result, index, value, force) {\n    const target = result[0];\n    // append item?\n    if (/^\\[\\]$/.test(index)) {\n        target.push(value);\n        const i = target.length - 1;\n        return [target[i], i, target, `${result[3]}/${i}}`];\n    }\n    // merge array item?\n    if (force == null &&\n        getType(target[index]) === \"object\" &&\n        getType(value) === \"object\") {\n        Object.assign(target[index], value);\n        return [target[index], index, target, `${result[3]}/${index}}`];\n    }\n    if (force === set.INSERT_ITEMS ||\n        (force == null && arrayHasIndex.test(index))) {\n        const arrayIndex = convertToIndex(index);\n        insert(target, arrayIndex, value);\n        return [\n            target[arrayIndex],\n            arrayIndex,\n            target,\n            `${result[3]}/${arrayIndex}}`,\n        ];\n    }\n    if (force === set.REPLACE_ITEMS || force == null) {\n        const arrayIndex = convertToIndex(index);\n        target[arrayIndex] = value;\n        return [\n            target[arrayIndex],\n            arrayIndex,\n            target,\n            `${result[3]}/${arrayIndex}}`,\n        ];\n    }\n    throw new Error(`Unknown array index '${index}' with force-option '${force}'`);\n}\nfunction create(workingSet, query, keyIsArray, force) {\n    query = removeEscape(query);\n    return workingSet\n        .filter((o) => {\n        // replacing or inserting array\n        if (Array.isArray(o[0]) && isArrayProp.test(query)) {\n            return true;\n        }\n        return ignoreTypes.includes(getType(o[0][query])) === false;\n    })\n        .map((r) => {\n        const container = keyIsArray ? [] : {};\n        const o = r[0];\n        const containerType = getType(container);\n        const itemType = getType(o[query]);\n        if (Array.isArray(o) && itemType !== containerType) {\n            return addToArray(r, query, container, force);\n        }\n        o[query] = o[query] || container;\n        return [o[query], query, o, `${r[3]}/${query}`];\n    });\n}\nexport var InsertMode;\n(function (InsertMode) {\n    InsertMode[\"REPLACE_ITEMS\"] = \"replace\";\n    InsertMode[\"INSERT_ITEMS\"] = \"insert\";\n})(InsertMode || (InsertMode = {}));\n// for all array-indices within path, replace the values, ignoring insertion syntax /[1]/\nset.REPLACE_ITEMS = InsertMode.REPLACE_ITEMS;\n// for all array-indices within path, insert the values, ignoring replace syntax /1/\nset.INSERT_ITEMS = InsertMode.INSERT_ITEMS;\n// set.MERGE_ITEMS = \"merge\";\n/**\n * Runs query on input data and assigns a value to query-results.\n * @param data - input data\n * @param queryString - json-query string\n * @param value - value to assign\n * @param [force] - whether to replace or insert into arrays\n */\nexport function set(data, queryString, value, force) {\n    if (queryString == null) {\n        return cp(data);\n    }\n    queryString = queryString.replace(/(\\/$)/g, \"\");\n    if (queryString === \"\") {\n        return cp(value);\n    }\n    const result = cp(data);\n    let workingSet = [[result, null, null, \"#\"]];\n    const path = split(queryString);\n    const property = path.pop();\n    const arrayWithoutIndex = isArray.test(property) && arrayHasIndex.test(property) === false;\n    if (isProperty.test(property) === false || arrayWithoutIndex) {\n        throw new Error(`Unsupported query '${queryString}' ending with non-property`);\n    }\n    path.forEach((query, index) => {\n        if (\"__proto__\" === query ||\n            \"prototyped\" === query ||\n            \"constructor\" === query) {\n            return;\n        }\n        if (isProperty.test(query) === false) {\n            workingSet = select(workingSet, query);\n            return;\n        }\n        // process property & missing data-structure\n        const nextKey = index >= path.length - 1 ? property : path[index + 1];\n        const insertArray = isArrayProp.test(nextKey);\n        workingSet = create(workingSet, query, insertArray, force);\n    });\n    workingSet.forEach((r) => {\n        let targetValue = value;\n        if (getType(value) === \"function\") {\n            targetValue = value(r[3], property, r[0], `${r[3]}/${property}`);\n        }\n        const d = r[0];\n        if (Array.isArray(d)) {\n            addToArray(r, property, targetValue, force);\n        }\n        else {\n            const unescapedProp = removeEscape(property);\n            if (\"__proto__\" === unescapedProp ||\n                \"prototyped\" === unescapedProp ||\n                \"constructor\" === unescapedProp) {\n                return;\n            }\n            d[unescapedProp] = targetValue;\n        }\n    });\n    return result;\n}\n","import { remove as removePointer, removeUndefinedItems, } from \"@sagold/json-pointer\";\nimport { get, ReturnType } from \"./get\";\nimport { PARENT_INDEX, POINTER_INDEX } from \"./interpreter/keys\";\n/**\n * Runs query on input data and removes matching properties from results\n * @param data - input data\n * @param queryString - json-query string\n * @param [returnRemoved] - if true, will returned removed properties, else input-data is removed\n */\nexport function remove(data, queryString, returnRemoved = false) {\n    const removed = [];\n    const matches = get(data, queryString, ReturnType.ALL);\n    matches.forEach(function (match) {\n        removed.push(match[0]);\n        removePointer(data, match[POINTER_INDEX], true);\n    });\n    matches.forEach(function (match) {\n        if (Array.isArray(match[PARENT_INDEX])) {\n            removeUndefinedItems(match[PARENT_INDEX]);\n        }\n    });\n    return returnRemoved ? removed : data;\n}\n","import { get, ReturnType } from \"./lib/get\";\nimport { set } from \"./lib/set\";\nimport { split } from \"./lib/split\";\nimport { remove } from \"./lib/remove\";\nexport { get, set, split, remove, ReturnType };\nexport default { get, set, split, remove, ReturnType };\n","const Types = {\n    $ref: {\n        type: false\n    },\n    allOf: {\n        type: false,\n        definitions: [\"allOf/*\"]\n    },\n    anyOf: {\n        type: false,\n        definitions: [\"anyOf/*\"]\n    },\n    array: {\n        type: true,\n        // ignore additionalItems:TypeDef, when items:TypeDef\n        definitions: [\n            \"allOf/*\",\n            \"anyOf/*\",\n            \"oneOf/*\",\n            \"not\",\n            \"items\",\n            \"items/*\",\n            \"additionalItems\"\n        ],\n        validationKeywords: [\"minItems\", \"maxItems\", \"uniqueItems\"],\n        keywords: [\"items\", \"additionalItems\", \"minItems\", \"maxItems\", \"uniqueItems\"]\n    },\n    boolean: {\n        type: true\n    },\n    enum: {\n        type: false\n    },\n    integer: {\n        type: true,\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\"],\n        validationKeywords: [\"minimum\", \"maximum\", \"multipleOf\"]\n    },\n    not: {\n        type: false,\n        definitions: [\"not\"]\n    },\n    number: {\n        type: true,\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\"],\n        validationKeywords: [\"minimum\", \"maximum\", \"multipleOf\"]\n    },\n    null: {\n        type: true\n    },\n    object: {\n        type: true,\n        // patternProperties also validate properties\n        // dependencies:(string, TypeDef) extend current TypeDef\n        // additional Properties validate only remaining properties (after properties & pattern)\n        definitions: [\n            \"allOf/*\",\n            \"anyOf/*\",\n            \"oneOf/*\",\n            \"not\",\n            \"properties/*\",\n            \"additionalProperties\",\n            \"patternProperties/*\",\n            \"dependencies/*\"\n        ],\n        validationKeywords: [\"minProperties\", \"maxProperties\", \"required\"],\n        keywords: [\n            \"properties\",\n            \"additionalProperties\",\n            \"patternProperties\",\n            \"dependencies\",\n            \"minProperties\",\n            \"maxProperties\",\n            \"required\"\n        ]\n    },\n    oneOf: {\n        type: false,\n        definitions: [\"oneOf/*\"]\n    },\n    string: {\n        type: true,\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\"],\n        validationKeywords: [\"minLength\", \"maxLength\", \"pattern\"]\n    }\n};\nexport default Types;\n","import types from \"./types\";\nimport { isObject } from \"../utils/isObject\";\nconst typeKeywords = Object.keys(types).filter((id) => types[id].type === false);\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * @throws Error    on multiple matches (invalid schema)\n *\n * Returns the type id of a schema object\n * @param schema\n * @return type id, if found\n */\nexport default function getTypeId(schema) {\n    if (isObject(schema) === false) {\n        return undefined;\n    }\n    if (schema.enum) {\n        return \"enum\";\n    }\n    const type = schema.type;\n    if (Array.isArray(type) || types[type]) {\n        return type;\n    }\n    const ids = typeKeywords.filter((type) => schema[type]);\n    if (ids.length === 1) {\n        return ids[0];\n    }\n    if (ids.length === 0) {\n        // @expensive, guess type object\n        for (let i = 0, l = types.object.keywords.length; i < l; i += 1) {\n            const keyword = types.object.keywords[i];\n            if (hasOwnProperty.call(schema, keyword)) {\n                // eslint-disable-line\n                return \"object\";\n            }\n        }\n        // @expensive, guess type array\n        for (let i = 0, l = types.array.keywords.length; i < l; i += 1) {\n            const keyword = types.array.keywords[i];\n            if (hasOwnProperty.call(schema, keyword)) {\n                // eslint-disable-line\n                return \"array\";\n            }\n        }\n        return undefined;\n    }\n    throw new Error(`Mutiple typeIds [${ids.join(\", \")}] matched in ${JSON.stringify(schema)}`);\n}\n","import gp from \"@sagold/json-pointer\";\nimport { get } from \"@sagold/json-query\";\nimport getTypeId from \"./getTypeId\";\nimport types from \"./types\";\nimport { isObject } from \"../utils/isObject\";\n/**\n * Returns a list of all (direct) type definitions from the given schema\n * @param schema\n * @return list of type definition, given as { pointer, def }\n */\nexport default function getTypeDefs(schema) {\n    const defs = [];\n    const id = getTypeId(schema);\n    if (id == null) {\n        return defs;\n    }\n    let type;\n    if (Array.isArray(id)) {\n        // since types can also be declared as a set of types, merge the definitions\n        // maybe this will require a more sophisticated approach\n        type = {};\n        for (let i = 0, l = id.length; i < l; i += 1) {\n            Object.assign(type, types[id[i]]);\n        }\n    }\n    else {\n        type = types[id];\n    }\n    if (type.definitions == null) {\n        return defs;\n    }\n    type.definitions.forEach((query) => {\n        get(schema, query, (value, key, parent, pointer) => {\n            if (isObject(value) && getTypeId(value)) {\n                defs.push({ pointer: gp.join(gp.split(pointer), false), def: value });\n            }\n        });\n    });\n    return defs;\n}\n","import gp from \"@sagold/json-pointer\";\nimport getTypeDefs from \"./schema/getTypeDefs\";\nimport { isObject } from \"./utils/isObject\";\nfunction nextTypeDefs(schema, pointer) {\n    if (this.callback(schema, pointer) === true) {\n        // eslint-disable-line no-invalid-this\n        return; // stop iteration\n    }\n    const defs = getTypeDefs(schema);\n    // eslint-disable-next-line no-invalid-this\n    defs.forEach((next) => this.nextTypeDefs(next.def, gp.join(pointer, next.pointer, false)));\n}\nfunction eachDefinition(walk, schema, pointer, key = \"definitions\") {\n    const defs = schema[key];\n    Object.keys(defs).forEach((defId) => {\n        if (defs[defId] === false || isObject(defs[defId])) {\n            walk.nextTypeDefs(defs[defId], gp.join(pointer, key, defId, false));\n            return;\n        }\n        // console.log(`Invalid schema in ${pointer}/${key}/${defId}`);\n    });\n}\nexport function eachSchema(schema, callback, pointer = \"#\") {\n    const walk = { callback, nextTypeDefs };\n    walk.nextTypeDefs(schema, pointer);\n    if (schema.definitions != null) {\n        walk.callback = (defschema, schemaPointer) => {\n            callback(defschema, schemaPointer);\n            if (defschema.definitions != null) {\n                eachDefinition(walk, defschema, schemaPointer);\n            }\n        };\n        eachDefinition(walk, schema, pointer);\n    }\n    if (schema.$defs != null) {\n        walk.callback = (defschema, schemaPointer) => {\n            callback(defschema, schemaPointer);\n            if (defschema.definitions != null) {\n                eachDefinition(walk, defschema, schemaPointer);\n            }\n        };\n        eachDefinition(walk, schema, pointer, \"$defs\");\n    }\n}\n","/* eslint max-statements-per-line: [\"error\", { \"max\": 2 }] */\nconst suffixes = /(#|\\/)+$/;\nconst trailingHash = /#$/;\nconst isDomain = /^[^:]+:\\/\\/[^/]+\\//;\nconst trailingFragments = /\\/[^/]*$/;\nconst idAndPointer = /#.*$/;\nexport default function joinScope(previous, id) {\n    if (previous == null && id == null) {\n        return \"#\";\n    }\n    if (id == null) {\n        return previous.replace(trailingHash, \"\");\n    }\n    if (previous == null) {\n        return id.replace(trailingHash, \"\");\n    }\n    if (id[0] === \"#\") {\n        return `${previous.replace(idAndPointer, \"\")}${id.replace(suffixes, \"\")}`;\n    }\n    if (isDomain.test(id)) {\n        return id.replace(trailingHash, \"\");\n    }\n    return `${previous.replace(trailingFragments, \"\")}/${id.replace(trailingHash, \"\")}`;\n}\n","const suffixes = /(#|\\/)+$/g;\nconst emptyValues = [\"\", null, \"#\"];\nexport default function splitRef($ref) {\n    if (emptyValues.includes($ref)) {\n        return [];\n    }\n    $ref = $ref.replace(suffixes, \"\");\n    if ($ref.indexOf(\"#\") === -1) {\n        return [$ref.replace(suffixes, \"\")];\n    }\n    if ($ref.indexOf(\"#\") === 0) {\n        return [$ref.replace(suffixes, \"\")];\n    }\n    const result = $ref.split(\"#\");\n    result[0] = result[0].replace(suffixes, \"\");\n    result[1] = `#${result[1].replace(suffixes, \"\")}`;\n    return result;\n}\n","import { get } from \"@sagold/json-pointer\";\nimport splitRef from \"./splitRef\";\nimport getTypeOf from \"../getTypeOf\";\nconst suffixes = /(#|\\/)+$/g;\nconst isObject = (val) => getTypeOf(val) === \"object\";\n// 1. combined is known\n// 2. base or pointer is known\n// 3. base + pointer is known\nexport default function getRef(context, rootSchema, $ref) {\n    if (isObject($ref)) {\n        $ref = $ref.__ref || $ref.$ref;\n    }\n    if ($ref == null) {\n        return rootSchema;\n    }\n    let schema;\n    // is it a known $ref?\n    const $remote = $ref.replace(suffixes, \"\");\n    if (context.remotes[$remote]) {\n        schema = context.remotes[$remote];\n        if (schema && schema.$ref) {\n            return getRef(context, rootSchema, schema.$ref);\n        }\n        return schema;\n    }\n    if (context.ids[$ref]) {\n        schema = get(rootSchema, context.ids[$ref]);\n        if (schema && schema.$ref) {\n            return getRef(context, rootSchema, schema.$ref);\n        }\n        return schema;\n    }\n    // is it a ref with host/pointer?\n    const fragments = splitRef($ref);\n    if (fragments.length === 0) {\n        return rootSchema;\n    }\n    if (fragments.length === 1) {\n        $ref = fragments[0];\n        if (context.remotes[$ref]) {\n            schema = context.remotes[$ref];\n            return getRef(context, rootSchema, schema.$ref);\n        }\n        if (context.ids[$ref]) {\n            schema = get(rootSchema, context.ids[$ref]);\n            if (schema && schema.$ref) {\n                return getRef(context, rootSchema, schema.$ref);\n            }\n            return schema;\n        }\n    }\n    if (fragments.length === 2) {\n        const base = fragments[0];\n        $ref = fragments[1];\n        if (context.remotes[base]) {\n            if (context.remotes[base].getRef) {\n                return context.remotes[base].getRef($ref);\n            }\n            // console.log(\"warning: uncompiled remote - context may be wrong\", base);\n            return getRef(context, context.remotes[base], $ref);\n        }\n        if (context.ids[base]) {\n            return getRef(context, get(rootSchema, context.ids[base]), $ref);\n        }\n    }\n    schema = get(rootSchema, context.ids[$ref] || $ref);\n    if (schema && schema.$ref) {\n        return getRef(context, rootSchema, schema.$ref);\n    }\n    return schema;\n}\n","/* eslint max-statements-per-line: [\"error\", { \"max\": 2 }] */\nimport { eachSchema } from \"../eachSchema\";\nimport joinScope from \"./joinScope\";\nimport getRef from \"./getRef\";\nimport { get } from \"@sagold/json-pointer\";\nconst COMPILED = \"__compiled\";\nconst COMPILED_REF = \"__ref\";\nconst GET_REF = \"getRef\";\nconst GET_ROOT = \"getRoot\";\nconst suffixes = /(#|\\/)+$/g;\n/**\n * compiles the input root schema for `$ref` resolution and returns it again\n * @attention this modifies input schema but maintains data-structure and thus returns\n * the same object with JSON.stringify\n *\n * for a compiled json-schema you can call getRef on any contained schema (location of type).\n * this resolves a $ref target to a valid schema (for a valid $ref)\n *\n * @param draft\n * @param schemaToCompile - json-schema to compile\n * @param [rootSchema] - compiled root json-schema to use for definitions resolution\n * @param [force] = false - force compile json-schema\n * @return compiled input json-schema\n */\nexport default function compileSchema(draft, schemaToCompile, rootSchema = schemaToCompile, force = false) {\n    if (!schemaToCompile || schemaToCompile[COMPILED] !== undefined) {\n        return schemaToCompile;\n    }\n    const context = { ids: {}, remotes: draft.remotes };\n    const rootSchemaAsString = JSON.stringify(schemaToCompile);\n    const compiledSchema = JSON.parse(rootSchemaAsString);\n    // flag this schema as compiled\n    Object.defineProperty(compiledSchema, COMPILED, { enumerable: false, value: true });\n    // add getRef-helper to this object\n    Object.defineProperty(compiledSchema, GET_REF, {\n        enumerable: false,\n        value: getRef.bind(null, context, compiledSchema)\n    });\n    // bail early, when no $refs are defined\n    if (force === false && rootSchemaAsString.includes(\"$ref\") === false) {\n        return compiledSchema;\n    }\n    // compile this schema under rootSchema, making definitions available to $ref-resolution\n    if (schemaToCompile !== rootSchema) {\n        Object.defineProperty(compiledSchema, \"definitions\", {\n            enumerable: false,\n            value: Object.assign({}, rootSchema.definitions, rootSchema.$defs, schemaToCompile.definitions, schemaToCompile.$defs)\n        });\n    }\n    const scopes = {};\n    const getRoot = () => compiledSchema;\n    eachSchema(compiledSchema, (schema, pointer) => {\n        var _a;\n        if (schema.id) {\n            // if this is a schema being merged on root object, we cannot override\n            // parents locations, but must reuse it\n            if (schema.id.startsWith(\"http\") && /(allOf|anyOf|oneOf)\\/\\d+$/.test(pointer)) {\n                const parentPointer = pointer.replace(/\\/(allOf|anyOf|oneOf)\\/\\d+$/, \"\");\n                const parentSchema = get(compiledSchema, parentPointer);\n                schema.id = (_a = parentSchema.id) !== null && _a !== void 0 ? _a : schema.id;\n            }\n            context.ids[schema.id.replace(suffixes, \"\")] = pointer;\n        }\n        // build up scopes and add them to $ref-resolution map\n        pointer = `#${pointer}`.replace(/##+/, \"#\");\n        const previousPointer = pointer.replace(/\\/[^/]+$/, \"\");\n        const parentPointer = pointer.replace(/\\/[^/]+\\/[^/]+$/, \"\");\n        const previousScope = scopes[previousPointer] || scopes[parentPointer];\n        const scope = joinScope(previousScope, schema.id);\n        scopes[pointer] = scope;\n        if (context.ids[scope] == null) {\n            context.ids[scope] = pointer;\n        }\n        if (schema.$ref && !schema[COMPILED_REF]) {\n            Object.defineProperty(schema, COMPILED_REF, {\n                enumerable: false,\n                value: joinScope(scope, schema.$ref)\n            });\n            // @todo currently not used:\n            Object.defineProperty(schema, GET_ROOT, { enumerable: false, value: getRoot });\n            // console.log(\"compiled ref\", scope, schema.$ref, \"=>\", joinScope(scope, schema.$ref));\n        }\n    });\n    // console.log(JSON.stringify(context.ids, null, 2));\n    return compiledSchema;\n}\n","import compile from \"./compile\";\nexport default compile;\n","import getTypeOf from \"./getTypeOf\";\n/**\n * Iterates over data, retrieving its schema\n *\n * @param draft - validator\n * @param data - the data to iterate\n * @param callback - will be called with (schema, data, pointer) on each item\n * @param [schema] - the schema matching the data. Defaults to rootSchema\n * @param [pointer] - pointer to current data. Default to rootPointer\n */\nexport function each(draft, data, callback, schema = draft.rootSchema, pointer = \"#\") {\n    schema = draft.resolveRef(schema);\n    callback(schema, data, pointer);\n    const dataType = getTypeOf(data);\n    if (dataType === \"object\") {\n        Object.keys(data).forEach((key) => {\n            const nextSchema = draft.step(key, schema, data, pointer); // not save\n            const next = data[key]; // save\n            draft.each(next, callback, nextSchema, `${pointer}/${key}`);\n        });\n    }\n    else if (dataType === \"array\") {\n        data.forEach((next, key) => {\n            const nextSchema = draft.step(key, schema, data, pointer);\n            draft.each(next, callback, nextSchema, `${pointer}/${key}`);\n        });\n    }\n}\n","/* eslint no-invalid-this: 0 */\nimport { createCustomError } from \"../utils/createCustomError\";\nconst errors = {\n    additionalItemsError: createCustomError(\"AdditionalItemsError\"),\n    additionalPropertiesError: createCustomError(\"AdditionalPropertiesError\"),\n    anyOfError: createCustomError(\"AnyOfError\"),\n    allOfError: createCustomError(\"AllOfError\"),\n    constError: createCustomError(\"ConstError\"),\n    containsError: createCustomError(\"ContainsError\"),\n    containsArrayError: createCustomError(\"ContainsArrayError\"),\n    containsAnyError: createCustomError(\"ContainsAnyError\"),\n    enumError: createCustomError(\"EnumError\"),\n    forbiddenPropertyError: createCustomError(\"ForbiddenPropertyError\"),\n    formatURLError: createCustomError(\"FormatURLError\"),\n    formatURIError: createCustomError(\"FormatURIError\"),\n    formatURIReferenceError: createCustomError(\"FormatURIReferenceError\"),\n    formatURITemplateError: createCustomError(\"FormatURITemplateError\"),\n    formatDateError: createCustomError(\"FormatDateError\"),\n    formatDateTimeError: createCustomError(\"FormatDateTimeError\"),\n    formatEmailError: createCustomError(\"FormatEmailError\"),\n    formatHostnameError: createCustomError(\"FormatHostnameError\"),\n    formatIPV4Error: createCustomError(\"FormatIPV4Error\"),\n    formatIPV4LeadingZeroError: createCustomError(\"FormatIPV4LeadingZeroError\"),\n    formatIPV6Error: createCustomError(\"FormatIPV6Error\"),\n    formatIPV6LeadingZeroError: createCustomError(\"FormatIPV6LeadingZeroError\"),\n    formatJsonPointerError: createCustomError(\"FormatJsonPointerError\"),\n    formatRegExError: createCustomError(\"FormatRegExError\"),\n    formatTimeError: createCustomError(\"FormatTimeError\"),\n    invalidSchemaError: createCustomError(\"InvalidSchemaError\"),\n    invalidDataError: createCustomError(\"InvalidDataError\"),\n    invalidTypeError: createCustomError(\"InvalidTypeError\"),\n    invalidPropertyNameError: createCustomError(\"InvalidPropertyNameError\"),\n    maximumError: createCustomError(\"MaximumError\"),\n    maxItemsError: createCustomError(\"MaxItemsError\"),\n    maxLengthError: createCustomError(\"MaxLengthError\"),\n    maxPropertiesError: createCustomError(\"MaxPropertiesError\"),\n    minimumError: createCustomError(\"MinimumError\"),\n    minItemsError: createCustomError(\"MinItemsError\"),\n    minItemsOneError: createCustomError(\"MinItemsOneError\"),\n    minLengthError: createCustomError(\"MinLengthError\"),\n    minLengthOneError: createCustomError(\"MinLengthOneError\"),\n    minPropertiesError: createCustomError(\"MinPropertiesError\"),\n    missingDependencyError: createCustomError(\"MissingDependencyError\"),\n    missingOneOfPropertyError: createCustomError(\"MissingOneOfPropertyError\"),\n    multipleOfError: createCustomError(\"MultipleOfError\"),\n    multipleOneOfError: createCustomError(\"MultipleOneOfError\"),\n    noAdditionalPropertiesError: createCustomError(\"NoAdditionalPropertiesError\"),\n    notError: createCustomError(\"NotError\"),\n    oneOfError: createCustomError(\"OneOfError\"),\n    oneOfPropertyError: createCustomError(\"OneOfPropertyError\"),\n    patternError: createCustomError(\"PatternError\"),\n    patternPropertiesError: createCustomError(\"PatternPropertiesError\"),\n    requiredPropertyError: createCustomError(\"RequiredPropertyError\"),\n    schemaWarning: createCustomError(\"SchemaWarning\"),\n    typeError: createCustomError(\"TypeError\"),\n    undefinedValueError: createCustomError(\"UndefinedValueError\"),\n    uniqueItemsError: createCustomError(\"UniqueItemsError\"),\n    unknownPropertyError: createCustomError(\"UnknownPropertyError\"),\n    valueNotEmptyError: createCustomError(\"ValueNotEmptyError\")\n};\nexport default errors;\n","import validUrl from \"valid-url\";\nimport { parse as parseIdnEmail } from \"smtp-address-parser\";\n// referenced\n// https://github.com/cfworker/cfworker/blob/main/packages/json-schema/src/format.ts\n// https://gist.github.com/marcelotmelo/b67f58a08bee6c2468f8\nconst isValidDateTime = new RegExp(\"^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\\\.[0-9]+)?(([Zz])|([\\\\+|\\\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$\");\nconst isValidIPV4 = /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/;\nconst isValidIPV6 = /^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))$/i;\nconst isValidHostname = /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/;\nconst matchDate = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\n// const matchTime = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nconst matchTime = /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nconst DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nconst isValidJsonPointer = /^(?:\\/(?:[^~/]|~0|~1)*)*$/;\nconst isValidRelativeJsonPointer = /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;\nconst isValidURIRef = /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\n// uri-template: https://tools.ietf.org/html/rfc6570\nconst isValidURITemplate = /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i;\n// Default Json-Schema formats: date-time, email, hostname, ipv4, ipv6, uri, uriref\nconst formatValidators = {\n    date: (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        // https://github.com/cfworker/cfworker/blob/main/packages/json-schema/src/format.ts\n        // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n        const matches = value.match(matchDate);\n        if (!matches) {\n            return draft.errors.formatDateTimeError({ value, pointer, schema });\n        }\n        const year = +matches[1];\n        const month = +matches[2];\n        const day = +matches[3];\n        // https://tools.ietf.org/html/rfc3339#appendix-C\n        const isLeapYear = year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n        if (month >= 1 &&\n            month <= 12 &&\n            day >= 1 &&\n            day <= (month == 2 && isLeapYear ? 29 : DAYS[month])) {\n            return undefined;\n        }\n        return draft.errors.formatDateError({ value, pointer, schema });\n    },\n    \"date-time\": (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        if (value === \"\" || isValidDateTime.test(value)) {\n            if (new Date(value).toString() === \"Invalid Date\") {\n                return draft.errors.formatDateTimeError({ value, pointer, schema });\n            }\n            return undefined;\n        }\n        return draft.errors.formatDateTimeError({ value, pointer, schema });\n    },\n    email: (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        // taken from https://github.com/ExodusMovement/schemasafe/blob/master/src/formats.js\n        if (value[0] === '\"') {\n            return draft.errors.formatEmailError({ value, pointer, schema });\n        }\n        const [name, host, ...rest] = value.split(\"@\");\n        if (!name || !host || rest.length !== 0 || name.length > 64 || host.length > 253) {\n            return draft.errors.formatEmailError({ value, pointer, schema });\n        }\n        if (name[0] === \".\" || name.endsWith(\".\") || name.includes(\"..\")) {\n            return draft.errors.formatEmailError({ value, pointer, schema });\n        }\n        if (!/^[a-z0-9.-]+$/i.test(host) || !/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(name)) {\n            return draft.errors.formatEmailError({ value, pointer, schema });\n        }\n        if (!host.split(\".\").every((part) => /^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(part))) {\n            return draft.errors.formatEmailError({ value, pointer, schema });\n        }\n        return undefined;\n    },\n    /**\n     * @draft 7\n     * [RFC6531] https://json-schema.org/draft-07/json-schema-validation.html#RFC6531\n     */\n    \"idn-email\": (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        try {\n            parseIdnEmail(value);\n            return undefined;\n        }\n        catch (e) {\n            return draft.errors.formatEmailError({ value, pointer, schema });\n        }\n    },\n    hostname: (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\") {\n            return undefined;\n        }\n        if (value === \"\" || isValidHostname.test(value)) {\n            return undefined;\n        }\n        return draft.errors.formatHostnameError({ value, pointer, schema });\n    },\n    ipv4: (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        if (value && value[0] === \"0\") {\n            // leading zeroes should be rejected, as they are treated as octals\n            return draft.errors.formatIPV4LeadingZeroError({ value, pointer, schema });\n        }\n        if (value.length <= 15 && isValidIPV4.test(value)) {\n            return undefined;\n        }\n        return draft.errors.formatIPV4Error({ value, pointer, schema });\n    },\n    ipv6: (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        if (value && value[0] === \"0\") {\n            // leading zeroes should be rejected, as they are treated as octals\n            return draft.errors.formatIPV6LeadingZeroError({ value, pointer, schema });\n        }\n        if (value.length <= 45 && isValidIPV6.test(value)) {\n            return undefined;\n        }\n        return draft.errors.formatIPV6Error({ value, pointer, schema });\n    },\n    \"json-pointer\": (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        if (isValidJsonPointer.test(value)) {\n            return undefined;\n        }\n        return draft.errors.formatJsonPointerError({ value, pointer, schema });\n    },\n    \"relative-json-pointer\": (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        if (isValidRelativeJsonPointer.test(value)) {\n            return undefined;\n        }\n        return draft.errors.formatJsonPointerError({ value, pointer, schema });\n    },\n    regex: (draft, schema, value, pointer) => {\n        if (typeof value === \"string\" && /\\\\Z$/.test(value) === false) {\n            try {\n                new RegExp(value);\n                return undefined;\n            }\n            catch (e) { } // eslint-disable-line no-empty\n            return draft.errors.formatRegExError({ value, pointer, schema });\n        }\n        // v7 tests, ignore non-regex values\n        if (typeof value === \"object\" || typeof value === \"number\" || Array.isArray(value)) {\n            return undefined;\n        }\n        return draft.errors.formatRegExError({ value, pointer, schema });\n    },\n    // hh:mm:ss.sTZD\n    // https://opis.io/json-schema/2.x/formats.html\n    // regex https://www.oreilly.com/library/view/regular-expressions-cookbook/9781449327453/ch04s07.html\n    time: (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        // https://github.com/cfworker/cfworker/blob/main/packages/json-schema/src/format.ts\n        const matches = value.match(matchTime);\n        return matches ? undefined : draft.errors.formatDateTimeError({ value, pointer, schema });\n        // if (!matches) {\n        //     return errors.formatDateTimeError({ value, pointer, schema });\n        // }\n        // const hour = +matches[1];\n        // const minute = +matches[2];\n        // const second = +matches[3];\n        // const timeZone = !!matches[5];\n        // if (\n        //     ((hour <= 23 && minute <= 59 && second <= 59) ||\n        //         (hour == 23 && minute == 59 && second == 60)) &&\n        //     timeZone\n        // ) {\n        //     return undefined;\n        // }\n        // return errors.formatTimeError({ value, pointer, schema });\n    },\n    uri: (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        if (validUrl.isUri(value)) {\n            return undefined;\n        }\n        return draft.errors.formatURIError({ value, pointer, schema });\n    },\n    \"uri-reference\": (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        if (isValidURIRef.test(value)) {\n            return undefined;\n        }\n        return draft.errors.formatURIReferenceError({ value, pointer, schema });\n    },\n    \"uri-template\": (draft, schema, value, pointer) => {\n        if (typeof value !== \"string\" || value === \"\") {\n            return undefined;\n        }\n        if (isValidURITemplate.test(value)) {\n            return undefined;\n        }\n        return draft.errors.formatURITemplateError({ value, pointer, schema });\n    },\n    url: (draft, schema, value, pointer) => {\n        if (value === \"\" || validUrl.isWebUri(value)) {\n            return undefined;\n        }\n        return draft.errors.formatURLError({ value, pointer, schema });\n    }\n};\nexport default formatValidators;\n","import gp from \"@sagold/json-pointer\";\nimport { isJsonError } from \"./types\";\nconst emptyObject = {};\n/**\n * Returns the json-schema of a data-json-pointer.\n *\n * To resolve dynamic schema where the type of json-schema is evaluated by\n * its value, a data object has to be passed in options.\n *\n * Per default this function will return `undefined` for valid properties that\n * do not have a defined schema. Use the option `withSchemaWarning: true` to\n * receive an error with `code: schema-warning` containing the location of its\n * last evaluated json-schema.\n *\n * Notes\n *      - uses draft.step to walk through data and schema\n *\n * @param draft\n * @param pointer - json pointer in data to get the json schema for\n * @param [options.data] - the data object, which includes the json pointers value. This is optional, as\n *    long as no oneOf, anyOf, etc statement is part of the pointers schema\n * @param [options.schema] - the json schema to iterate. Defaults to draft.rootSchema\n * @param [options.withSchemaWarning] - if true returns an error instead of `undefined` for valid properties missing a schema definition\n * @return resolved json-schema object of requested json-pointer location or json-error\n */\nexport default function getSchema(draft, options = emptyObject) {\n    const { pointer = \"#\", data, schema = draft.rootSchema, withSchemaWarning = false } = options;\n    const path = gp.split(pointer);\n    const result = _getSchema(draft, draft.resolveRef(schema), path, \"#\", data);\n    if (!withSchemaWarning && (result === null || result === void 0 ? void 0 : result.code) === \"schema-warning\") {\n        return undefined;\n    }\n    return result;\n}\nfunction _getSchema(draft, schema, path, pointer, data = emptyObject) {\n    if (path.length === 0) {\n        return draft.resolveRef(schema);\n    }\n    const key = path.shift(); // step key\n    schema = draft.step(key, schema, data, pointer); // step schema\n    if (isJsonError(schema)) {\n        return schema;\n    }\n    // @ts-expect-error data\n    data = data[key]; // step data\n    return _getSchema(draft, schema, path, `${pointer}/${key}`, data);\n}\n","import getTypeOf from \"../getTypeOf\";\nexport function isEmpty(v) {\n    const type = getTypeOf(v);\n    switch (type) {\n        case \"string\":\n        case \"array\":\n            // @ts-expect-error tested as array - could use ts type guard\n            return (v === null || v === void 0 ? void 0 : v.length) === 0;\n        case \"null\":\n        case \"undefined\":\n            return true;\n        case \"object\":\n            return Object.keys(v).length === 0;\n        default:\n            return false;\n    }\n}\n","/* eslint quote-props: 0, max-statements-per-line: [\"error\", { \"max\": 2 }] */\nimport { resolveOneOfFuzzy } from \"./features/oneOf\";\nimport getTypeOf from \"./getTypeOf\";\nimport merge from \"./utils/merge\";\nimport copy from \"./utils/copy\";\nimport settings from \"./config/settings\";\nimport { isJsonError } from \"./types\";\nimport { isEmpty } from \"./utils/isEmpty\";\nimport { resolveIfSchema } from \"./features/if\";\nimport { mergeAllOfSchema, resolveSchema } from \"./features/allOf\";\nimport { resolveDependencies } from \"./features/dependencies\";\nimport { mergeSchema } from \"./mergeSchema\";\nconst defaultOptions = settings.templateDefaultOptions;\nlet cache;\nfunction shouldResolveRef(schema, pointer) {\n    const { $ref } = schema;\n    if ($ref == null) {\n        return true;\n    }\n    const value = cache[pointer] == null || cache[pointer][$ref] == null ? 0 : cache[pointer][$ref];\n    return value < settings.GET_TEMPLATE_RECURSION_LIMIT;\n}\nfunction resolveRef(draft, schema, pointer) {\n    const { $ref } = schema;\n    if ($ref == null) {\n        return schema;\n    }\n    // @todo pointer + ref is redundant?\n    cache[pointer] = cache[pointer] || {};\n    cache[pointer][$ref] = cache[pointer][$ref] || 0;\n    cache[pointer][$ref] += 1;\n    return draft.resolveRef(schema);\n}\nfunction convertValue(type, value) {\n    if (type === \"string\") {\n        return JSON.stringify(value);\n    }\n    else if (typeof value !== \"string\") {\n        return null;\n    }\n    try {\n        value = JSON.parse(value);\n        if (typeof value === type) {\n            return value;\n        }\n    }\n    catch (e) { } // eslint-disable-line no-empty\n    return null;\n}\n/**\n * Resolves $ref, allOf and anyOf schema-options, returning a combined json-schema.\n * Also returns a pointer-property on schema, that must be used as current pointer.\n *\n * @param draft\n * @param schema\n * @param data\n * @param pointer\n * @return resolved json-schema or input-schema\n */\nfunction createTemplateSchema(draft, schema, data, pointer, opts) {\n    // invalid schema\n    if (getTypeOf(schema) !== \"object\") {\n        return Object.assign({ pointer }, schema);\n    }\n    // return if reached recursion limit\n    if (shouldResolveRef(schema, pointer) === false && data == null) {\n        return false;\n    }\n    // resolve $ref and copy schema\n    let templateSchema = copy(resolveRef(draft, schema, pointer));\n    // @feature anyOf\n    if (Array.isArray(schema.anyOf) && schema.anyOf.length > 0) {\n        // test if we may resolve\n        if (shouldResolveRef(schema.anyOf[0], `${pointer}/anyOf/0`)) {\n            const resolvedAnyOf = resolveRef(draft, schema.anyOf[0], `${pointer}/anyOf/0`);\n            templateSchema = merge(templateSchema, resolvedAnyOf);\n            // add pointer return-value, if any\n            templateSchema.pointer = schema.anyOf[0].$ref || templateSchema.pointer;\n        }\n        delete templateSchema.anyOf;\n    }\n    // @feature allOf\n    if (Array.isArray(schema.allOf)) {\n        const mayResolve = schema.allOf\n            .map((allOf, index) => shouldResolveRef(allOf, `${pointer}/allOf/${index}`))\n            .reduceRight((next, before) => next && before, true);\n        if (mayResolve) {\n            // before merging all-of, we need to resolve all if-then-else statesments\n            // we need to udpate data on the way to trigger if-then-else schemas sequentially.\n            // Note that this will make if-then-else order-dependent\n            const allOf = [];\n            let extendedData = copy(data);\n            for (let i = 0; i < schema.allOf.length; i += 1) {\n                allOf.push(resolveSchema(draft, schema.allOf[i], extendedData));\n                extendedData = getTemplate(draft, extendedData, { type: schema.type, ...allOf[i] }, `${pointer}/allOf/${i}`, opts);\n            }\n            const resolvedSchema = mergeAllOfSchema(draft, { allOf });\n            if (resolvedSchema) {\n                templateSchema = mergeSchema(templateSchema, resolvedSchema);\n            }\n        }\n    }\n    templateSchema.pointer = templateSchema.pointer || schema.$ref || pointer;\n    return templateSchema;\n}\nconst isJsonSchema = (template) => template && typeof template === \"object\";\n/**\n * Create data object matching the given schema\n *\n * @param draft - json schema draft\n * @param [data] - optional template data\n * @param [schema] - json schema, defaults to rootSchema\n * @return created template data\n */\nfunction getTemplate(draft, data, _schema, pointer, opts) {\n    var _a;\n    if (_schema == null) {\n        throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(data)}`);\n    }\n    if (pointer == null) {\n        throw new Error(\"Missing pointer\");\n    }\n    // resolve $ref references, allOf and first anyOf definitions\n    let schema = createTemplateSchema(draft, _schema, data, pointer, opts);\n    if (!isJsonSchema(schema)) {\n        return undefined;\n    }\n    pointer = schema.pointer;\n    if (schema === null || schema === void 0 ? void 0 : schema.const) {\n        return schema.const;\n    }\n    // @feature oneOf\n    if (Array.isArray(schema.oneOf)) {\n        if (isEmpty(data)) {\n            const type = schema.oneOf[0].type ||\n                schema.type ||\n                (schema.const && typeof schema.const) ||\n                getTypeOf(data);\n            schema = { ...schema.oneOf[0], type };\n        }\n        else {\n            // find correct schema for data\n            const resolvedSchema = resolveOneOfFuzzy(draft, data, schema);\n            if (isJsonError(resolvedSchema)) {\n                if (data != null && opts.removeInvalidData !== true) {\n                    return data;\n                }\n                // override\n                schema = schema.oneOf[0];\n                data = undefined;\n            }\n            else {\n                resolvedSchema.type = (_a = resolvedSchema.type) !== null && _a !== void 0 ? _a : schema.type;\n                schema = resolvedSchema;\n            }\n        }\n    }\n    // @todo Array.isArray(schema.type)\n    // -> hasDefault? return\n    // if not -> pick first types\n    if (!isJsonSchema(schema) || schema.type == null) {\n        return undefined;\n    }\n    // @attention - very special case to support file instances\n    if (data instanceof File) {\n        return data;\n    }\n    const type = Array.isArray(schema.type)\n        ? selectType(schema.type, data, schema.default)\n        : schema.type;\n    // reset invalid type\n    const javascriptTypeOfData = getTypeOf(data);\n    if (data != null &&\n        javascriptTypeOfData !== type &&\n        !(javascriptTypeOfData === \"number\" && type === \"integer\")) {\n        data = convertValue(type, data);\n    }\n    if (TYPE[type] == null) {\n        // in case we could not resolve the type\n        // (schema-type could not be resolved and returned an error)\n        if (opts.removeInvalidData) {\n            return undefined;\n        }\n        return data;\n    }\n    const templateData = TYPE[type](draft, schema, data, pointer, opts);\n    return templateData;\n}\nfunction selectType(types, data, defaultValue) {\n    if (data == undefined) {\n        if (defaultValue != null) {\n            const defaultType = getTypeOf(defaultValue);\n            if (types.includes(defaultType)) {\n                return defaultType;\n            }\n        }\n        return types[0];\n    }\n    const dataType = getTypeOf(data);\n    if (types.includes(dataType)) {\n        return dataType;\n    }\n    return types[0];\n}\nconst TYPE = {\n    null: (draft, schema, data) => getDefault(schema, data, null),\n    string: (draft, schema, data) => getDefault(schema, data, \"\"),\n    number: (draft, schema, data) => getDefault(schema, data, 0),\n    integer: (draft, schema, data) => getDefault(schema, data, 0),\n    boolean: (draft, schema, data) => getDefault(schema, data, false),\n    object: (draft, schema, data, pointer, opts) => {\n        var _a;\n        const template = schema.default === undefined ? {} : schema.default;\n        const d = {}; // do not assign data here, to keep ordering from json-schema\n        const required = (opts.extendDefaults === false && schema.default !== undefined) ? [] : ((_a = schema.required) !== null && _a !== void 0 ? _a : []);\n        if (schema.properties) {\n            Object.keys(schema.properties).forEach((key) => {\n                const value = data == null || data[key] == null ? template[key] : data[key];\n                const isRequired = required.includes(key);\n                // Omit adding a property if it is not required or optional props should be added\n                if (value != null || isRequired || opts.addOptionalProps) {\n                    d[key] = getTemplate(draft, value, schema.properties[key], `${pointer}/properties/${key}`, opts);\n                }\n            });\n        }\n        // @feature dependencies\n        // has to be done after resolving properties so dependency may trigger\n        let dependenciesSchema = resolveDependencies(draft, schema, d);\n        if (dependenciesSchema) {\n            dependenciesSchema = mergeSchema(schema, dependenciesSchema);\n            delete dependenciesSchema.dependencies;\n            const dependencyData = getTemplate(draft, data, dependenciesSchema, `${pointer}/dependencies`, opts);\n            Object.assign(d, dependencyData);\n        }\n        if (data) {\n            if (opts.removeInvalidData === true &&\n                (schema.additionalProperties === false ||\n                    getTypeOf(schema.additionalProperties) === \"object\")) {\n                if (getTypeOf(schema.additionalProperties) === \"object\") {\n                    Object.keys(data).forEach((key) => {\n                        if (d[key] == null) {\n                            // merge valid missing data (additionals) to resulting object\n                            if (draft.isValid(data[key], schema.additionalProperties)) {\n                                d[key] = data[key];\n                            }\n                        }\n                    });\n                }\n            }\n            else {\n                // merge any missing data (additionals) to resulting object\n                Object.keys(data).forEach((key) => d[key] == null && (d[key] = data[key]));\n            }\n        }\n        // @feature if-then-else\n        const ifSchema = resolveIfSchema(draft, schema, d);\n        if (ifSchema) {\n            const additionalData = getTemplate(draft, d, { type: \"object\", ...ifSchema }, pointer, opts);\n            Object.assign(d, additionalData);\n        }\n        // returns object, which is ordered by json-schema\n        return d;\n    },\n    // build array type of items, ignores additionalItems\n    array: (draft, schema, data, pointer, opts) => {\n        var _a, _b;\n        if (schema.items == null) {\n            return data || []; // items are undefined\n        }\n        const template = schema.default === undefined ? [] : schema.default;\n        const d = data || template;\n        const minItems = (opts.extendDefaults === false && schema.default !== undefined) ? 0 : (schema.minItems || 0);\n        // build defined set of items\n        if (Array.isArray(schema.items)) {\n            for (let i = 0, l = Math.max(minItems !== null && minItems !== void 0 ? minItems : 0, (_b = (_a = schema.items) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0); i < l; i += 1) {\n                d[i] = getTemplate(draft, d[i] == null ? template[i] : d[i], schema.items[i], `${pointer}/items/${i}`, opts);\n            }\n            return d;\n        }\n        // abort if the schema is invalid\n        if (getTypeOf(schema.items) !== \"object\") {\n            return d;\n        }\n        // resolve allOf and first anyOf definition\n        const templateSchema = createTemplateSchema(draft, schema.items, data, pointer, opts);\n        if (templateSchema === false) {\n            return d;\n        }\n        pointer = templateSchema.pointer || pointer;\n        // build data for first oneOf-schema\n        if (templateSchema.oneOf && d.length === 0) {\n            const oneOfSchema = templateSchema.oneOf[0];\n            for (let i = 0; i < minItems; i += 1) {\n                d[i] = getTemplate(draft, d[i] == null ? template[i] : d[i], oneOfSchema, `${pointer}/oneOf/0`, opts);\n            }\n            return d;\n        }\n        // complete data selecting correct oneOf-schema\n        if (templateSchema.oneOf && d.length > 0) {\n            const itemCount = Math.max(minItems, d.length);\n            for (let i = 0; i < itemCount; i += 1) {\n                let value = d[i] == null ? template[i] : d[i];\n                let one = resolveOneOfFuzzy(draft, value, templateSchema);\n                if (one == null || isJsonError(one)) {\n                    // schema could not be resolved or data is invalid\n                    if (value != null && opts.removeInvalidData !== true) {\n                        // keep invalid value\n                        d[i] = value;\n                    }\n                    else {\n                        // replace invalid value\n                        value = undefined;\n                        one = templateSchema.oneOf[0];\n                        d[i] = getTemplate(draft, value, one, `${pointer}/oneOf/${i}`, opts);\n                    }\n                }\n                else {\n                    // schema is valid\n                    d[i] = getTemplate(draft, value, one, `${pointer}/oneOf/${i}`, opts);\n                }\n            }\n            return d;\n        }\n        // build data from items-definition\n        if (templateSchema.type) {\n            for (let i = 0, l = Math.max(minItems, d.length); i < l; i += 1) {\n                d[i] = getTemplate(draft, d[i] == null ? template[i] : d[i], templateSchema, `${pointer}/items`, opts);\n            }\n            return d;\n        }\n        return d;\n    }\n};\nfunction getDefault(schema, templateValue, initValue) {\n    if (templateValue != null) {\n        return templateValue;\n    }\n    else if (schema.const) {\n        return schema.const;\n    }\n    else if (schema.default === undefined && Array.isArray(schema.enum)) {\n        return schema.enum[0];\n    }\n    else if (schema.default === undefined) {\n        return initValue;\n    }\n    return schema.default;\n}\nexport default (draft, data, schema = draft.rootSchema, opts) => {\n    cache = {};\n    if (opts) {\n        return getTemplate(draft, data, schema, \"#\", { ...defaultOptions, ...opts });\n    }\n    return getTemplate(draft, data, schema, \"#\", defaultOptions);\n};\n","/**\n * Test if the data is valid according to the given schema\n *\n * @param draft - validator\n * @param value - value to validate\n * @param [schema] - json schema\n * @param [pointer] - json pointer pointing to value\n * @return if schema does match given value\n */\nexport default function isValid(draft, value, schema = draft.rootSchema, pointer = \"#\") {\n    return draft.validate(value, schema, pointer).length === 0;\n}\n","/* eslint no-bitwise: 0 */\n/**\n * taken from punycode@2.1.0\n *\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param string The Unicode input string (UCS-2).\n * @returns The new array of code points.\n */\nexport default function ucs2decode(string) {\n    const output = [];\n    let counter = 0;\n    const length = string.length;\n    while (counter < length) {\n        const value = string.charCodeAt(counter++);\n        if (value >= 0xd800 && value <= 0xdbff && counter < length) {\n            // It's a high surrogate, and there is a next character.\n            const extra = string.charCodeAt(counter++);\n            // eslint-disable-next-line eqeqeq\n            if ((extra & 0xfc00) == 0xdc00) {\n                // Low surrogate.\n                output.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n            }\n            else {\n                // It's an unmatched surrogate; only append this code unit, in case the\n                // next code unit is the high surrogate of a surrogate pair.\n                output.push(value);\n                counter--;\n            }\n        }\n        else {\n            output.push(value);\n        }\n    }\n    return output;\n}\n","/**\n * returns the floating point precision of a decimal number or 0\n */\nexport function getPrecision(value) {\n    const string = `${value}`;\n    const index = string.indexOf(\".\");\n    return index === -1 ? 0 : string.length - (index + 1);\n}\n","import getTypeOf from \"../getTypeOf\";\nimport settings from \"../config/settings\";\nimport ucs2decode from \"../utils/punycode.ucs2decode\";\nimport { isObject } from \"../utils/isObject\";\nimport { isJsonError } from \"../types\";\nimport { validateAllOf } from \"../features/allOf\";\nimport { validateAnyOf } from \"../features/anyOf\";\nimport { validateDependencies } from \"../features/dependencies\";\nimport { validateOneOf } from \"../features/oneOf\";\nimport { getPrecision } from \"../utils/getPrecision\";\nimport deepEqual from \"fast-deep-equal\";\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasProperty = (value, property) => !(value[property] === undefined || !hasOwnProperty.call(value, property));\n// list of validation keywords: http://json-schema.org/latest/json-schema-validation.html#rfc.section.5\nconst KeywordValidation = {\n    additionalProperties: (draft, schema, value, pointer) => {\n        if (schema.additionalProperties === true || schema.additionalProperties == null) {\n            return undefined;\n        }\n        if (getTypeOf(schema.patternProperties) === \"object\" &&\n            schema.additionalProperties === false) {\n            // this is an arrangement with patternProperties. patternProperties validate before additionalProperties:\n            // https://spacetelescope.github.io/understanding-json-schema/reference/object.html#index-5\n            return undefined;\n        }\n        const errors = [];\n        let receivedProperties = Object.keys(value).filter((prop) => settings.propertyBlacklist.includes(prop) === false);\n        const expectedProperties = Object.keys(schema.properties || {});\n        if (getTypeOf(schema.patternProperties) === \"object\") {\n            // filter received properties by matching patternProperties\n            const patterns = Object.keys(schema.patternProperties).map((pattern) => new RegExp(pattern));\n            receivedProperties = receivedProperties.filter((prop) => {\n                for (let i = 0; i < patterns.length; i += 1) {\n                    if (patterns[i].test(prop)) {\n                        return false; // remove\n                    }\n                }\n                return true;\n            });\n        }\n        // adds an error for each an unexpected property\n        for (let i = 0, l = receivedProperties.length; i < l; i += 1) {\n            const property = receivedProperties[i];\n            if (expectedProperties.indexOf(property) === -1) {\n                const additionalIsObject = isObject(schema.additionalProperties);\n                // additionalProperties { oneOf: [] }\n                if (additionalIsObject && Array.isArray(schema.additionalProperties.oneOf)) {\n                    const result = draft.resolveOneOf(value[property], schema.additionalProperties, `${pointer}/${property}`);\n                    if (isJsonError(result)) {\n                        errors.push(draft.errors.additionalPropertiesError({\n                            pointer,\n                            schema: schema.additionalProperties,\n                            value,\n                            property: receivedProperties[i],\n                            properties: expectedProperties,\n                            // pass all validation errors\n                            errors: result.data.errors\n                        }));\n                    }\n                    else {\n                        errors.push(...draft.validate(value[property], result, pointer));\n                    }\n                    // additionalProperties {}\n                }\n                else if (additionalIsObject) {\n                    errors.push(...draft.validate(value[property], schema.additionalProperties, `${pointer}/${property}`));\n                }\n                else {\n                    errors.push(draft.errors.noAdditionalPropertiesError({\n                        pointer,\n                        schema,\n                        value,\n                        property: receivedProperties[i],\n                        properties: expectedProperties\n                    }));\n                }\n            }\n        }\n        return errors;\n    },\n    allOf: validateAllOf,\n    anyOf: validateAnyOf,\n    dependencies: validateDependencies,\n    enum: (draft, schema, value, pointer) => {\n        const type = getTypeOf(value);\n        if (type === \"object\" || type === \"array\") {\n            const valueStr = JSON.stringify(value);\n            for (let i = 0; i < schema.enum.length; i += 1) {\n                if (JSON.stringify(schema.enum[i]) === valueStr) {\n                    return undefined;\n                }\n            }\n        }\n        else if (schema.enum.includes(value)) {\n            return undefined;\n        }\n        return draft.errors.enumError({ pointer, schema, value, values: schema.enum });\n    },\n    format: (draft, schema, value, pointer) => {\n        if (draft.validateFormat[schema.format]) {\n            const errors = draft.validateFormat[schema.format](draft, schema, value, pointer);\n            return errors;\n        }\n        // fail silently if given format is not defined\n        return undefined;\n    },\n    items: (draft, schema, value, pointer) => {\n        // @draft >= 7 bool schema\n        if (schema.items === false) {\n            if (Array.isArray(value) && value.length === 0) {\n                return undefined;\n            }\n            return draft.errors.invalidDataError({ pointer, value, schema });\n        }\n        const errors = [];\n        for (let i = 0; i < value.length; i += 1) {\n            const itemData = value[i];\n            // @todo reevaluate: incomplete schema is created here\n            const itemSchema = draft.step(i, schema, value, pointer);\n            if (isJsonError(itemSchema)) {\n                return [itemSchema];\n            }\n            const itemErrors = draft.validate(itemData, itemSchema, `${pointer}/${i}`);\n            errors.push(...itemErrors);\n        }\n        return errors;\n    },\n    maximum: (draft, schema, value, pointer) => {\n        if (isNaN(schema.maximum)) {\n            return undefined;\n        }\n        if (schema.maximum && schema.maximum < value) {\n            return draft.errors.maximumError({\n                maximum: schema.maximum,\n                length: value,\n                value,\n                pointer,\n                schema\n            });\n        }\n        if (schema.maximum && schema.exclusiveMaximum === true && schema.maximum === value) {\n            return draft.errors.maximumError({\n                maximum: schema.maximum,\n                length: value,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    maxItems: (draft, schema, value, pointer) => {\n        if (isNaN(schema.maxItems)) {\n            return undefined;\n        }\n        if (schema.maxItems < value.length) {\n            return draft.errors.maxItemsError({\n                maximum: schema.maxItems,\n                length: value.length,\n                schema,\n                value,\n                pointer\n            });\n        }\n        return undefined;\n    },\n    maxLength: (draft, schema, value, pointer) => {\n        if (isNaN(schema.maxLength)) {\n            return undefined;\n        }\n        const lengthOfString = ucs2decode(value).length;\n        if (schema.maxLength < lengthOfString) {\n            return draft.errors.maxLengthError({\n                maxLength: schema.maxLength,\n                length: lengthOfString,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    maxProperties: (draft, schema, value, pointer) => {\n        const propertyCount = Object.keys(value).length;\n        if (isNaN(schema.maxProperties) === false && schema.maxProperties < propertyCount) {\n            return draft.errors.maxPropertiesError({\n                maxProperties: schema.maxProperties,\n                length: propertyCount,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    minLength: (draft, schema, value, pointer) => {\n        if (isNaN(schema.minLength)) {\n            return undefined;\n        }\n        const lengthOfString = ucs2decode(value).length;\n        if (schema.minLength > lengthOfString) {\n            if (schema.minLength === 1) {\n                return draft.errors.minLengthOneError({\n                    minLength: schema.minLength,\n                    length: lengthOfString,\n                    pointer,\n                    schema,\n                    value\n                });\n            }\n            return draft.errors.minLengthError({\n                minLength: schema.minLength,\n                length: lengthOfString,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    minimum: (draft, schema, value, pointer) => {\n        if (isNaN(schema.minimum)) {\n            return undefined;\n        }\n        if (schema.minimum > value) {\n            return draft.errors.minimumError({\n                minimum: schema.minimum,\n                length: value,\n                pointer,\n                schema,\n                value\n            });\n        }\n        if (schema.exclusiveMinimum === true && schema.minimum === value) {\n            return draft.errors.minimumError({\n                minimum: schema.minimum,\n                length: value,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    minItems: (draft, schema, value, pointer) => {\n        if (isNaN(schema.minItems)) {\n            return undefined;\n        }\n        if (schema.minItems > value.length) {\n            if (schema.minItems === 1) {\n                return draft.errors.minItemsOneError({\n                    minItems: schema.minItems,\n                    length: value.length,\n                    pointer,\n                    schema,\n                    value\n                });\n            }\n            return draft.errors.minItemsError({\n                minItems: schema.minItems,\n                length: value.length,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    minProperties: (draft, schema, value, pointer) => {\n        if (isNaN(schema.minProperties)) {\n            return undefined;\n        }\n        const propertyCount = Object.keys(value).length;\n        if (schema.minProperties > propertyCount) {\n            return draft.errors.minPropertiesError({\n                minProperties: schema.minProperties,\n                length: propertyCount,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    multipleOf: (draft, schema, value, pointer) => {\n        if (isNaN(schema.multipleOf) || typeof value !== \"number\") {\n            return undefined;\n        }\n        const valuePrecision = getPrecision(value);\n        const multiplePrecision = getPrecision(schema.multipleOf);\n        if (valuePrecision > multiplePrecision) {\n            // value with higher precision then multipleOf-precision can never be multiple\n            return draft.errors.multipleOfError({\n                multipleOf: schema.multipleOf,\n                value,\n                pointer,\n                schema\n            });\n        }\n        const precision = Math.pow(10, multiplePrecision);\n        const val = Math.round(value * precision);\n        const multiple = Math.round(schema.multipleOf * precision);\n        if ((val % multiple) / precision !== 0) {\n            return draft.errors.multipleOfError({\n                multipleOf: schema.multipleOf,\n                value,\n                pointer,\n                schema\n            });\n        }\n        // maybe also check overflow\n        // https://stackoverflow.com/questions/1815367/catch-and-compute-overflow-during-multiplication-of-two-large-integers\n        return undefined;\n    },\n    not: (draft, schema, value, pointer) => {\n        const errors = [];\n        if (draft.validate(value, schema.not, pointer).length === 0) {\n            errors.push(draft.errors.notError({ value, not: schema.not, pointer, schema }));\n        }\n        return errors;\n    },\n    oneOf: validateOneOf,\n    pattern: (draft, schema, value, pointer) => {\n        const pattern = new RegExp(schema.pattern, \"u\");\n        if (pattern.test(value) === false) {\n            return draft.errors.patternError({\n                pattern: schema.pattern,\n                description: schema.patternExample || schema.pattern,\n                received: value,\n                schema,\n                value,\n                pointer\n            });\n        }\n        return undefined;\n    },\n    patternProperties: (draft, schema, value, pointer) => {\n        const properties = schema.properties || {};\n        const pp = schema.patternProperties;\n        if (getTypeOf(pp) !== \"object\") {\n            return undefined;\n        }\n        const errors = [];\n        const keys = Object.keys(value);\n        const patterns = Object.keys(pp).map((expr) => ({\n            regex: new RegExp(expr),\n            patternSchema: pp[expr]\n        }));\n        keys.forEach((key) => {\n            let patternFound = false;\n            for (let i = 0, l = patterns.length; i < l; i += 1) {\n                if (patterns[i].regex.test(key)) {\n                    patternFound = true;\n                    const valErrors = draft.validate(value[key], patterns[i].patternSchema, `${pointer}/${key}`);\n                    if (valErrors && valErrors.length > 0) {\n                        errors.push(...valErrors);\n                    }\n                }\n            }\n            if (properties[key]) {\n                return;\n            }\n            if (patternFound === false && schema.additionalProperties === false) {\n                // this is an arrangement with additionalProperties\n                errors.push(draft.errors.patternPropertiesError({\n                    key,\n                    pointer,\n                    schema,\n                    value,\n                    patterns: Object.keys(pp).join(\",\")\n                }));\n            }\n        });\n        return errors;\n    },\n    properties: (draft, schema, value, pointer) => {\n        const errors = [];\n        const keys = Object.keys(schema.properties || {});\n        for (let i = 0; i < keys.length; i += 1) {\n            const key = keys[i];\n            if (hasProperty(value, key)) {\n                const itemSchema = draft.step(key, schema, value, pointer);\n                const keyErrors = draft.validate(value[key], itemSchema, `${pointer}/${key}`);\n                errors.push(...keyErrors);\n            }\n        }\n        return errors;\n    },\n    // @todo move to separate file: this is custom keyword validation for JsonEditor.properties keyword\n    propertiesRequired: (draft, schema, value, pointer) => {\n        const errors = [];\n        const keys = Object.keys(schema.properties || {});\n        for (let i = 0; i < keys.length; i += 1) {\n            const key = keys[i];\n            if (value[key] === undefined) {\n                errors.push(draft.errors.requiredPropertyError({ key, pointer, schema, value }));\n            }\n            else {\n                const itemSchema = draft.step(key, schema, value, pointer);\n                const keyErrors = draft.validate(value[key], itemSchema, `${pointer}/${key}`);\n                errors.push(...keyErrors);\n            }\n        }\n        return errors;\n    },\n    required: (draft, schema, value, pointer) => {\n        if (Array.isArray(schema.required) === false) {\n            return undefined;\n        }\n        return schema.required.map((property) => {\n            if (!hasProperty(value, property)) {\n                return draft.errors.requiredPropertyError({\n                    key: property,\n                    pointer,\n                    schema,\n                    value\n                });\n            }\n            return undefined;\n        });\n    },\n    // @todo move to separate file: this is custom keyword validation for JsonEditor.required keyword\n    requiredNotEmpty: (draft, schema, value, pointer) => {\n        if (Array.isArray(schema.required) === false) {\n            return undefined;\n        }\n        return schema.required.map((property) => {\n            if (value[property] == null || value[property] === \"\") {\n                return draft.errors.valueNotEmptyError({\n                    property,\n                    pointer: `${pointer}/${property}`,\n                    schema,\n                    value\n                });\n            }\n            return undefined;\n        });\n    },\n    uniqueItems: (draft, schema, value, pointer) => {\n        if ((Array.isArray(value) && schema.uniqueItems) === false) {\n            return undefined;\n        }\n        const duplicates = [];\n        const errors = [];\n        value.forEach((item, index) => {\n            for (let i = index + 1; i < value.length; i += 1) {\n                if (deepEqual(item, value[i]) && !duplicates.includes(i)) {\n                    errors.push(draft.errors.uniqueItemsError({\n                        pointer: `${pointer}/${i}`,\n                        duplicatePointer: `${pointer}/${index}`,\n                        arrayPointer: pointer,\n                        value: JSON.stringify(item),\n                        schema\n                    }));\n                    duplicates.push(i);\n                }\n            }\n        });\n        return errors;\n    }\n};\nexport default KeywordValidation;\n","export default function resolveRef(schema, rootSchema) {\n    if (schema == null || schema.$ref == null) {\n        return schema;\n    }\n    if (schema.getRoot) {\n        // we actually always need to resolve the schema like this, since returned subschemas\n        // must resolve relative from their schema\n        const resolvedSchema = schema.getRoot().getRef(schema);\n        // console.log(schema.$ref, \"=>\", resolvedSchema);\n        return resolvedSchema;\n    }\n    // tryout - this should never be called, except we missed something\n    const resolvedSchema = rootSchema.getRef(schema);\n    return resolvedSchema;\n}\n","import getTypeOf from \"./getTypeOf\";\nimport { isObject } from \"./utils/isObject\";\n/**\n * Create a simple json schema for the given input data\n * @param  data - data to get json schema for\n */\nexport default function createSchemaOf(data) {\n    if (data === undefined) {\n        return undefined;\n    }\n    const schema = {\n        type: getTypeOf(data)\n    };\n    if (schema.type === \"object\" && isObject(data)) {\n        schema.properties = {};\n        Object.keys(data).forEach((key) => (schema.properties[key] = createSchemaOf(data[key])));\n    }\n    if (schema.type === \"array\" && Array.isArray(data)) {\n        if (data.length === 1) {\n            schema.items = createSchemaOf(data[0]);\n        }\n        else {\n            schema.items = data.map(createSchemaOf);\n        }\n    }\n    return schema;\n}\n","import getTypeOf from \"./getTypeOf\";\nimport createSchemaOf from \"./createSchemaOf\";\nimport { isJsonError } from \"./types\";\nimport { reduceSchema } from \"./reduceSchema\";\nconst stepType = {\n    array: (draft, key, schema, data, pointer) => {\n        const itemValue = data === null || data === void 0 ? void 0 : data[key];\n        const itemsType = getTypeOf(schema.items);\n        if (itemsType === \"object\") {\n            // @spec: ignore additionalItems, when items is schema-object\n            return (reduceSchema(draft, schema.items, itemValue, `${pointer}/${key}`) ||\n                draft.resolveRef(schema.items));\n        }\n        if (itemsType === \"array\") {\n            // @draft >= 7 bool schema, items:[true, false]\n            if (schema.items[key] === true) {\n                return createSchemaOf(itemValue);\n            }\n            // @draft >= 7 bool schema, items:[true, false]\n            if (schema.items[key] === false) {\n                return draft.errors.invalidDataError({\n                    key,\n                    value: itemValue,\n                    pointer,\n                    schema\n                });\n            }\n            if (schema.items[key]) {\n                return draft.resolveRef(schema.items[key]);\n            }\n            if (schema.additionalItems === false) {\n                return draft.errors.additionalItemsError({\n                    key,\n                    value: itemValue,\n                    pointer,\n                    schema\n                });\n            }\n            if (schema.additionalItems === true || schema.additionalItems === undefined) {\n                return createSchemaOf(itemValue);\n            }\n            if (getTypeOf(schema.additionalItems) === \"object\") {\n                return schema.additionalItems;\n            }\n            throw new Error(`Invalid schema ${JSON.stringify(schema, null, 2)} for ${JSON.stringify(data, null, 2)}`);\n        }\n        if (schema.additionalItems !== false && itemValue) {\n            // @todo reevaluate: incomplete schema is created here\n            // @todo support additionalItems: {schema}\n            return createSchemaOf(itemValue);\n        }\n        return new Error(`Invalid array schema for ${key} at ${pointer}`);\n    },\n    object: (draft, key, schema, data, pointer) => {\n        var _a;\n        schema = reduceSchema(draft, schema, data, pointer);\n        // @feature properties\n        const property = (_a = schema === null || schema === void 0 ? void 0 : schema.properties) === null || _a === void 0 ? void 0 : _a[key];\n        if (property !== undefined) {\n            // @todo patternProperties also validate properties\n            // @feature boolean schema\n            if (property === false) {\n                return draft.errors.forbiddenPropertyError({\n                    property: key,\n                    value: data,\n                    pointer,\n                    schema\n                });\n            }\n            else if (property === true) {\n                return createSchemaOf(data === null || data === void 0 ? void 0 : data[key]);\n            }\n            const targetSchema = draft.resolveRef(property);\n            if (isJsonError(targetSchema)) {\n                return targetSchema;\n            }\n            // check if there is a oneOf selection, which must be resolved\n            if (targetSchema && Array.isArray(targetSchema.oneOf)) {\n                // @special case: this is a mix of a schema and optional definitions\n                // we resolve the schema here and add the original schema to `oneOfSchema`\n                const resolvedSchema = draft.resolveOneOf(data[key], targetSchema, `${pointer}/${key}`);\n                for (const p in targetSchema) {\n                    if (p !== \"oneOf\" && resolvedSchema[p] === undefined) {\n                        resolvedSchema[p] = targetSchema[p];\n                    }\n                }\n                return resolvedSchema;\n            }\n            // resolved schema or error\n            if (targetSchema) {\n                return targetSchema;\n            }\n        }\n        // @feature patternProperties\n        const { patternProperties } = schema;\n        if (getTypeOf(patternProperties) === \"object\") {\n            // find matching property key\n            let regex;\n            const patterns = Object.keys(patternProperties);\n            for (let i = 0, l = patterns.length; i < l; i += 1) {\n                regex = new RegExp(patterns[i]);\n                if (regex.test(key)) {\n                    return patternProperties[patterns[i]];\n                }\n            }\n        }\n        // @feature additionalProperties\n        const { additionalProperties } = schema;\n        if (getTypeOf(additionalProperties) === \"object\") {\n            return schema.additionalProperties;\n        }\n        if (data && (additionalProperties === undefined || additionalProperties === true)) {\n            return createSchemaOf(data[key]);\n        }\n        return draft.errors.unknownPropertyError({\n            property: key,\n            value: data,\n            pointer: `${pointer}`,\n            schema\n        });\n    }\n};\n/**\n * Returns the json-schema of the given object property or array item.\n * e.g. it steps by one key into the data\n *\n *  This helper determines the location of the property within the schema (additional properties, oneOf, ...) and\n *  returns the correct schema.\n *\n * @param  draft      - validator\n * @param  key       - property-name or array-index\n * @param  schema    - json schema of current data\n * @param  data      - parent of key\n * @param  [pointer] - pointer to schema and data (parent of key)\n * @return Schema or Error if failed resolving key\n */\nexport default function step(draft, key, schema, data, pointer = \"#\") {\n    var _a;\n    const typeOfData = getTypeOf(data);\n    let schemaType = (_a = schema.type) !== null && _a !== void 0 ? _a : typeOfData;\n    // @draft >= 4 ?\n    if (Array.isArray(schemaType)) {\n        if (!schemaType.includes(typeOfData)) {\n            return draft.errors.typeError({\n                value: data,\n                pointer,\n                expected: schema.type,\n                received: typeOfData,\n                schema\n            });\n        }\n        schemaType = typeOfData;\n    }\n    const stepFunction = stepType[schemaType];\n    if (stepFunction) {\n        const schemaResult = stepFunction(draft, `${key}`, schema, data, pointer);\n        if (schemaResult === undefined) {\n            return draft.errors.schemaWarning({\n                pointer,\n                value: data,\n                schema,\n                key\n            });\n        }\n        return schemaResult;\n    }\n    return new Error(`Unsupported schema type ${schema.type} for key ${key}`);\n}\n","import { isJsonError } from \"./types\";\n/**\n * Returns a list of possible child-schemas for the given property key. In case of a oneOf selection, multiple schemas\n * could be added at the given property (e.g. item-index), thus an array of options is returned. In all other cases\n * a list with a single item will be returned\n *\n * @param draft        - draft to use\n * @param property    - parent schema of following property\n * @param [schema]    - parent schema of following property\n * @return\n */\nexport default function getChildSchemaSelection(draft, property, schema = draft.rootSchema) {\n    var _a;\n    if (schema.oneOf) {\n        return schema.oneOf.map((item) => draft.resolveRef(item));\n    }\n    if ((_a = schema.items) === null || _a === void 0 ? void 0 : _a.oneOf) {\n        return schema.items.oneOf.map((item) => draft.resolveRef(item));\n    }\n    const result = draft.step(property, schema, {}, \"#\");\n    if (isJsonError(result)) {\n        return result;\n    }\n    return [result];\n}\n","/**\n * @todo: type is also a keyword, as is properties, items, etc\n *\n * An instance has one of six primitive types (http://json-schema.org/latest/json-schema-draft.html#rfc.section.4.2)\n * or seven in case of ajv https://github.com/epoberezkin/ajv/blob/master/KEYWORDS.md#type\n * 1 null, 2 boolean, 3 object, 4 array, 5 number, 6 string (7 integer)\n */\nconst typeValidators = {\n    array: (draft, schema, value, pointer) => draft.typeKeywords.array\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    object: (draft, schema, value, pointer) => draft.typeKeywords.object\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    string: (draft, schema, value, pointer) => draft.typeKeywords.string\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    integer: (draft, schema, value, pointer) => draft.typeKeywords.number\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    number: (draft, schema, value, pointer) => draft.typeKeywords.number\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    boolean: (draft, schema, value, pointer) => draft.typeKeywords.boolean\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    null: (draft, schema, value, pointer) => draft.typeKeywords.null\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer))\n};\nexport default typeValidators;\n","import getTypeOf from \"./getTypeOf\";\nimport { errorOrPromise } from \"./utils/filter\";\nimport flattenArray from \"./utils/flattenArray\";\nimport { isJsonError } from \"./types\";\nimport equal from \"fast-deep-equal\";\nfunction getJsonSchemaType(value, expectedType) {\n    const jsType = getTypeOf(value);\n    if (jsType === \"number\" &&\n        (expectedType === \"integer\" ||\n            (Array.isArray(expectedType) && expectedType.includes(\"integer\")))) {\n        return Number.isInteger(value) || isNaN(value) ? \"integer\" : \"number\";\n    }\n    return jsType;\n}\n/**\n * Validates data with json schema\n *\n * @param draft - validator\n * @param value - value to validate\n * @param [schema] - json schema, defaults to rootSchema\n * @param [pointer] - json pointer pointing to value (used for error-messages only)\n * @return list of errors or empty\n */\nexport default function validate(draft, value, schema = draft.rootSchema, pointer = \"#\") {\n    schema = draft.resolveRef(schema);\n    // @draft >= 07\n    if (getTypeOf(schema) === \"boolean\") {\n        if (schema) {\n            return [];\n        }\n        return [draft.errors.invalidDataError({ pointer, schema, value })];\n    }\n    if (isJsonError(schema)) {\n        return [schema];\n    }\n    // @draft >= 6 const\n    if (schema.const !== undefined) {\n        if (equal(schema.const, value)) {\n            return [];\n        }\n        return [draft.errors.constError({ pointer, schema, value, expected: schema.const })];\n    }\n    const receivedType = getJsonSchemaType(value, schema.type);\n    const expectedType = schema.type || receivedType;\n    if (receivedType !== expectedType &&\n        (!Array.isArray(expectedType) || !expectedType.includes(receivedType))) {\n        return [\n            draft.errors.typeError({\n                pointer,\n                schema,\n                value,\n                received: receivedType,\n                expected: expectedType\n            })\n        ];\n    }\n    if (draft.validateType[receivedType] == null) {\n        return [draft.errors.invalidTypeError({ pointer, schema, value, receivedType })];\n    }\n    // get type validation results\n    const errors = flattenArray(draft.validateType[receivedType](draft, schema, value, pointer));\n    return errors.filter(errorOrPromise); // ignore promises here\n}\n","import addRemoteSchema from \"../addRemoteSchema\";\nimport compileSchema from \"../compileSchema\";\nimport { each } from \"../each\";\nimport { eachSchema } from \"../eachSchema\";\nimport ERRORS from \"../validation/errors\";\nimport FORMATS from \"../validation/format\";\nimport getSchema from \"../getSchema\";\nimport getTemplate from \"../getTemplate\";\nimport isValid from \"../isValid\";\nimport KEYWORDS from \"../validation/keyword\";\nimport merge from \"../utils/merge\";\nimport { resolveAllOf } from \"../features/allOf\";\nimport { resolveAnyOf } from \"../features/anyOf\";\nimport { resolveOneOf } from \"../features/oneOf\";\nimport resolveRef from \"../resolveRef.strict\";\nimport step from \"../step\";\nimport createSchemaOf from \"../createSchemaOf\";\nimport getChildSchemaSelection from \"../getChildSchemaSelection\";\nimport TYPES from \"../validation/type\";\nimport validate from \"../validate\";\nimport { Draft } from \"../draft\";\nimport settings from \"../config/settings\";\nconst draft04Config = {\n    typeKeywords: {\n        array: [\n            \"allOf\",\n            \"anyOf\",\n            \"enum\",\n            \"items\",\n            \"maxItems\",\n            \"minItems\",\n            \"not\",\n            \"oneOf\",\n            \"uniqueItems\"\n        ],\n        boolean: [\"enum\", \"not\", \"allOf\", \"anyOf\", \"oneOf\"],\n        object: [\n            \"additionalProperties\",\n            \"dependencies\",\n            \"enum\",\n            \"format\",\n            \"minProperties\",\n            \"maxProperties\",\n            \"patternProperties\",\n            \"properties\",\n            \"required\",\n            \"not\",\n            \"oneOf\",\n            \"allOf\",\n            \"anyOf\"\n        ],\n        string: [\n            \"allOf\",\n            \"anyOf\",\n            \"enum\",\n            \"format\",\n            \"maxLength\",\n            \"minLength\",\n            \"not\",\n            \"oneOf\",\n            \"pattern\"\n        ],\n        number: [\n            \"allOf\",\n            \"anyOf\",\n            \"enum\",\n            \"format\",\n            \"maximum\",\n            \"minimum\",\n            \"multipleOf\",\n            \"not\",\n            \"oneOf\"\n        ],\n        null: [\"allOf\", \"anyOf\", \"enum\", \"format\", \"not\", \"oneOf\"]\n    },\n    validateKeyword: KEYWORDS,\n    validateType: TYPES,\n    validateFormat: FORMATS,\n    errors: ERRORS,\n    addRemoteSchema,\n    compileSchema,\n    createSchemaOf,\n    each,\n    eachSchema,\n    getChildSchemaSelection,\n    getSchema,\n    getTemplate,\n    isValid,\n    resolveAllOf,\n    resolveAnyOf,\n    resolveOneOf,\n    resolveRef,\n    step,\n    validate,\n    templateDefaultOptions: settings.templateDefaultOptions\n};\nclass Draft04 extends Draft {\n    constructor(schema, config = {}) {\n        super(merge(draft04Config, config), schema);\n    }\n}\nexport { Draft04, draft04Config };\n","import { eachSchema } from \"../../eachSchema\";\n// import remotes from \"../../../remotes\";\nimport joinScope from \"../../compile/joinScope\";\nimport getRef from \"../../compile/getRef\";\nimport { get } from \"@sagold/json-pointer\";\nconst COMPILED = \"__compiled\";\nconst COMPILED_REF = \"__ref\";\nconst GET_REF = \"getRef\";\nconst GET_ROOT = \"getRoot\";\nconst suffixes = /(#|\\/)+$/g;\n/**\n * @draft starting with _draft 06_ keyword `id` has been renamed to `$id`\n *\n * compiles the input root schema for $ref resolution and returns it again\n * @attention this modifies input schema but maintains object-structure\n *\n * for a compiled json-schema you can call getRef on any contained schema (location of type).\n * this resolves a $ref target to a valid schema (for a valid $ref)\n *\n * @param rootSchema root json-schema ($id, defs, ... ) to compile\n * @param [force] = false force compile json-schema\n * @return compiled json-schema\n */\nexport default function compileSchema(draft, schemaToCompile, rootSchema = schemaToCompile, force = false) {\n    // @ts-expect-error incomplete JsonSchema type\n    if (schemaToCompile === true || schemaToCompile === false || schemaToCompile === undefined) {\n        return schemaToCompile;\n    }\n    if (schemaToCompile[COMPILED] !== undefined) {\n        return schemaToCompile;\n    } // eslint-disable-line\n    const context = { ids: {}, remotes: draft.remotes };\n    const rootSchemaAsString = JSON.stringify(schemaToCompile);\n    const compiledSchema = JSON.parse(rootSchemaAsString);\n    Object.defineProperty(compiledSchema, COMPILED, { enumerable: false, value: true });\n    Object.defineProperty(compiledSchema, GET_REF, {\n        enumerable: false,\n        value: getRef.bind(null, context, compiledSchema)\n    });\n    // bail early, when no $refs are defined\n    if (force === false && rootSchemaAsString.includes(\"$ref\") === false) {\n        return compiledSchema;\n    }\n    // compile this schema under rootSchema, making definitions available to $ref-resolution\n    if (compiledSchema !== rootSchema) {\n        Object.defineProperty(compiledSchema, \"$defs\", {\n            enumerable: true,\n            value: Object.assign({}, rootSchema.definitions, rootSchema.$defs, compiledSchema.definitions, compiledSchema.$defs)\n        });\n    }\n    const scopes = {};\n    const getRoot = () => compiledSchema;\n    eachSchema(compiledSchema, (schema, pointer) => {\n        var _a;\n        if (schema.$id) {\n            // if this is a schema being merged on root object, we cannot override\n            // parents locations, but must reuse it\n            if (schema.$id.startsWith(\"http\") && /(allOf|anyOf|oneOf)\\/\\d+$/.test(pointer)) {\n                const parentPointer = pointer.replace(/\\/(allOf|anyOf|oneOf)\\/\\d+$/, \"\");\n                const parentSchema = get(compiledSchema, parentPointer);\n                schema.$id = (_a = parentSchema.$id) !== null && _a !== void 0 ? _a : schema.$id;\n            }\n            context.ids[schema.$id.replace(suffixes, \"\")] = pointer;\n        }\n        // build up scopes and add them to $ref-resolution map\n        pointer = `#${pointer}`.replace(/##+/, \"#\");\n        const previousPointer = pointer.replace(/\\/[^/]+$/, \"\");\n        const parentPointer = pointer.replace(/\\/[^/]+\\/[^/]+$/, \"\");\n        const previousScope = scopes[previousPointer] || scopes[parentPointer];\n        const scope = joinScope(previousScope, schema.$id);\n        scopes[pointer] = scope;\n        if (context.ids[scope] == null) {\n            context.ids[scope] = pointer;\n        }\n        if (schema.$ref && !schema[COMPILED_REF]) {\n            Object.defineProperty(schema, COMPILED_REF, {\n                enumerable: false,\n                value: joinScope(scope, schema.$ref)\n            });\n            // @todo currently not used:\n            Object.defineProperty(schema, GET_ROOT, { enumerable: false, value: getRoot });\n            // console.log(\"compiled ref\", scope, schema.$ref, \"=>\", joinScope(scope, schema.$ref));\n        }\n    });\n    return compiledSchema;\n}\n","import Keywords from \"../../validation/keyword\";\nimport getTypeOf from \"../../getTypeOf\";\nimport { validateIf } from \"../../features/if\";\nconst KeywordValidation = {\n    ...Keywords,\n    // @draft >= 6\n    contains: (draft, schema, value, pointer) => {\n        if (schema.contains === false) {\n            return draft.errors.containsArrayError({ pointer, value, schema });\n        }\n        if (schema.contains === true) {\n            if (Array.isArray(value) && value.length === 0) {\n                return draft.errors.containsAnyError({ pointer, value, schema });\n            }\n            return undefined;\n        }\n        if (getTypeOf(schema.contains) !== \"object\") {\n            // ignore invalid schema\n            return undefined;\n        }\n        for (let i = 0; i < value.length; i += 1) {\n            if (draft.isValid(value[i], schema.contains)) {\n                return undefined;\n            }\n        }\n        return draft.errors.containsError({ pointer, schema, value });\n    },\n    exclusiveMaximum: (draft, schema, value, pointer) => {\n        if (isNaN(schema.exclusiveMaximum)) {\n            return undefined;\n        }\n        if (schema.exclusiveMaximum <= value) {\n            return draft.errors.maximumError({\n                maximum: schema.exclusiveMaximum,\n                length: value,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    exclusiveMinimum: (draft, schema, value, pointer) => {\n        if (isNaN(schema.exclusiveMinimum)) {\n            return undefined;\n        }\n        if (schema.exclusiveMinimum >= value) {\n            return draft.errors.minimumError({\n                minimum: schema.exclusiveMinimum,\n                length: value,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    // @feature if-then-else\n    if: validateIf,\n    maximum: (draft, schema, value, pointer) => {\n        if (isNaN(schema.maximum)) {\n            return undefined;\n        }\n        if (schema.maximum && schema.maximum < value) {\n            return draft.errors.maximumError({\n                maximum: schema.maximum,\n                length: value,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    minimum: (draft, schema, value, pointer) => {\n        if (isNaN(schema.minimum)) {\n            return undefined;\n        }\n        if (schema.minimum > value) {\n            return draft.errors.minimumError({\n                minimum: schema.minimum,\n                length: value,\n                pointer,\n                schema,\n                value\n            });\n        }\n        return undefined;\n    },\n    patternProperties: (draft, schema, value, pointer) => {\n        const properties = schema.properties || {};\n        const pp = schema.patternProperties;\n        if (getTypeOf(pp) !== \"object\") {\n            return undefined;\n        }\n        const errors = [];\n        const keys = Object.keys(value);\n        const patterns = Object.keys(pp).map((expr) => ({\n            regex: new RegExp(expr),\n            patternSchema: pp[expr]\n        }));\n        keys.forEach((key) => {\n            let patternFound = false;\n            for (let i = 0, l = patterns.length; i < l; i += 1) {\n                if (patterns[i].regex.test(key)) {\n                    patternFound = true;\n                    // for a boolean schema `false`, always invalidate\n                    if (patterns[i].patternSchema === false) {\n                        errors.push(draft.errors.patternPropertiesError({\n                            key,\n                            pointer,\n                            patterns: Object.keys(pp).join(\",\"),\n                            schema,\n                            value\n                        }));\n                        return;\n                    }\n                    const valErrors = draft.validate(value[key], patterns[i].patternSchema, `${pointer}/${key}`);\n                    if (valErrors && valErrors.length > 0) {\n                        errors.push(...valErrors);\n                    }\n                }\n            }\n            if (properties[key]) {\n                return;\n            }\n            if (patternFound === false && schema.additionalProperties === false) {\n                // this is an arrangement with additionalProperties\n                errors.push(draft.errors.patternPropertiesError({\n                    key,\n                    pointer,\n                    patterns: Object.keys(pp).join(\",\"),\n                    schema,\n                    value\n                }));\n            }\n        });\n        return errors;\n    },\n    // @draft >= 6\n    propertyNames: (draft, schema, value, pointer) => {\n        // bool schema\n        if (schema.propertyNames === false) {\n            // empty objects are valid\n            if (Object.keys(value).length === 0) {\n                return undefined;\n            }\n            return draft.errors.invalidPropertyNameError({\n                property: Object.keys(value),\n                pointer,\n                value,\n                schema\n            });\n        }\n        if (schema.propertyNames === true) {\n            return undefined;\n        }\n        if (getTypeOf(schema.propertyNames) !== \"object\") {\n            // ignore invalid schema\n            return undefined;\n        }\n        const errors = [];\n        const properties = Object.keys(value);\n        const propertySchema = { ...schema.propertyNames, type: \"string\" };\n        properties.forEach((prop) => {\n            const validationResult = draft.validate(prop, propertySchema, `${pointer}/${prop}`);\n            if (validationResult.length > 0) {\n                errors.push(draft.errors.invalidPropertyNameError({\n                    property: prop,\n                    pointer,\n                    validationError: validationResult[0],\n                    value: value[prop],\n                    schema\n                }));\n            }\n        });\n        return errors;\n    }\n};\nexport default KeywordValidation;\n","/**\n * @todo: type is also a keyword, as is properties, items, etc\n *\n * An instance has one of six primitive types (http://json-schema.org/latest/json-schema-draft.html#rfc.section.4.2)\n * or seven in case of ajv https://github.com/epoberezkin/ajv/blob/master/KEYWORDS.md#type\n * 1 null, 2 boolean, 3 object, 4 array, 5 number, 6 string (7 integer)\n */\nconst validationType = {\n    array: (draft, schema, value, pointer) => draft.typeKeywords.array\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    object: (draft, schema, value, pointer) => draft.typeKeywords.object\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    string: (draft, schema, value, pointer) => draft.typeKeywords.string\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    integer: (draft, schema, value, pointer) => draft.typeKeywords.number\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    number: (draft, schema, value, pointer) => draft.typeKeywords.number\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    boolean: (draft, schema, value, pointer) => draft.typeKeywords.boolean\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer)),\n    null: (draft, schema, value, pointer) => draft.typeKeywords.null\n        .filter((key) => schema && schema[key] != null)\n        .map((key) => draft.validateKeyword[key](draft, schema, value, pointer))\n};\nexport default validationType;\n","import addRemoteSchema from \"../addRemoteSchema\";\nimport compileSchema from \"../draft06/compile\";\nimport { each } from \"../each\";\nimport { eachSchema } from \"../eachSchema\";\nimport ERRORS from \"../validation/errors\";\nimport FORMATS from \"../validation/format\";\nimport getSchema from \"../getSchema\";\nimport getTemplate from \"../getTemplate\";\nimport isValid from \"../isValid\";\nimport KEYWORDS from \"../draft06/validation/keyword\";\nimport merge from \"../utils/merge\";\nimport { resolveAllOf } from \"../features/allOf\";\nimport { resolveAnyOf } from \"../features/anyOf\";\nimport { resolveOneOf } from \"../features/oneOf\";\nimport resolveRef from \"../resolveRef.strict\";\nimport createSchemaOf from \"../createSchemaOf\";\nimport getChildSchemaSelection from \"../getChildSchemaSelection\";\nimport step from \"../step\";\nimport TYPES from \"../draft06/validation/type\";\nimport validate from \"../validate\";\nimport { Draft } from \"../draft\";\nimport settings from \"../config/settings\";\nconst draft06Config = {\n    typeKeywords: {\n        array: [\n            \"allOf\",\n            \"anyOf\",\n            \"contains\",\n            \"enum\",\n            \"if\",\n            \"items\",\n            \"maxItems\",\n            \"minItems\",\n            \"not\",\n            \"oneOf\",\n            \"uniqueItems\"\n        ],\n        boolean: [\"allOf\", \"anyOf\", \"enum\", \"not\", \"oneOf\"],\n        object: [\n            \"additionalProperties\",\n            \"allOf\",\n            \"anyOf\",\n            \"dependencies\",\n            \"enum\",\n            \"format\",\n            \"if\",\n            \"maxProperties\",\n            \"minProperties\",\n            \"not\",\n            \"oneOf\",\n            \"patternProperties\",\n            \"properties\",\n            \"propertyNames\",\n            \"required\"\n        ],\n        string: [\n            \"allOf\",\n            \"anyOf\",\n            \"enum\",\n            \"format\",\n            \"if\",\n            \"maxLength\",\n            \"minLength\",\n            \"not\",\n            \"oneOf\",\n            \"pattern\"\n        ],\n        number: [\n            \"enum\",\n            \"exclusiveMaximum\",\n            \"exclusiveMinimum\",\n            \"format\",\n            \"maximum\",\n            \"minimum\",\n            \"multipleOf\",\n            \"not\",\n            \"oneOf\",\n            \"allOf\",\n            \"anyOf\",\n            \"if\"\n        ],\n        null: [\"allOf\", \"anyOf\", \"enum\", \"format\", \"not\", \"oneOf\"]\n    },\n    validateKeyword: KEYWORDS,\n    validateType: TYPES,\n    validateFormat: FORMATS,\n    errors: ERRORS,\n    addRemoteSchema,\n    compileSchema,\n    createSchemaOf,\n    each,\n    eachSchema,\n    getChildSchemaSelection,\n    getSchema,\n    getTemplate,\n    isValid,\n    resolveAllOf,\n    resolveAnyOf,\n    resolveOneOf,\n    resolveRef,\n    step,\n    validate,\n    templateDefaultOptions: settings.templateDefaultOptions\n};\nclass Draft06 extends Draft {\n    constructor(schema, config = {}) {\n        super(merge(draft06Config, config), schema);\n    }\n}\nexport { Draft06, draft06Config };\n","import addRemoteSchema from \"../addRemoteSchema\";\nimport compileSchema from \"../draft06/compile\";\nimport { each } from \"../each\";\nimport { eachSchema } from \"../eachSchema\";\nimport ERRORS from \"../validation/errors\";\nimport FORMATS from \"../validation/format\";\nimport getSchema from \"../getSchema\";\nimport getTemplate from \"../getTemplate\";\nimport isValid from \"../isValid\";\nimport KEYWORDS from \"../draft06/validation/keyword\";\nimport merge from \"../utils/merge\";\nimport { resolveAllOf } from \"../features/allOf\";\nimport { resolveAnyOf } from \"../features/anyOf\";\nimport { resolveOneOf } from \"../features/oneOf\";\nimport resolveRef from \"../resolveRef.strict\";\nimport createSchemaOf from \"../createSchemaOf\";\nimport getChildSchemaSelection from \"../getChildSchemaSelection\";\nimport step from \"../step\";\nimport TYPES from \"../draft06/validation/type\";\nimport validate from \"../validate\";\nimport { Draft } from \"../draft\";\nimport settings from \"../config/settings\";\nconst draft07Config = {\n    typeKeywords: {\n        array: [\n            \"allOf\",\n            \"anyOf\",\n            \"contains\",\n            \"enum\",\n            \"if\",\n            \"items\",\n            \"maxItems\",\n            \"minItems\",\n            \"not\",\n            \"oneOf\",\n            \"uniqueItems\"\n        ],\n        boolean: [\"allOf\", \"anyOf\", \"enum\", \"not\", \"oneOf\"],\n        object: [\n            \"additionalProperties\",\n            \"allOf\",\n            \"anyOf\",\n            \"dependencies\",\n            \"enum\",\n            \"format\",\n            \"if\",\n            \"maxProperties\",\n            \"minProperties\",\n            \"not\",\n            \"oneOf\",\n            \"patternProperties\",\n            \"properties\",\n            \"propertyNames\",\n            \"required\"\n        ],\n        string: [\n            \"allOf\",\n            \"anyOf\",\n            \"enum\",\n            \"format\",\n            \"if\",\n            \"maxLength\",\n            \"minLength\",\n            \"not\",\n            \"oneOf\",\n            \"pattern\"\n        ],\n        number: [\n            \"allOf\",\n            \"anyOf\",\n            \"enum\",\n            \"exclusiveMaximum\",\n            \"exclusiveMinimum\",\n            \"format\",\n            \"if\",\n            \"maximum\",\n            \"minimum\",\n            \"multipleOf\",\n            \"not\",\n            \"oneOf\"\n        ],\n        null: [\"allOf\", \"anyOf\", \"enum\", \"format\", \"not\", \"oneOf\"]\n    },\n    validateKeyword: KEYWORDS,\n    validateType: TYPES,\n    validateFormat: FORMATS,\n    errors: ERRORS,\n    addRemoteSchema,\n    compileSchema,\n    createSchemaOf,\n    each,\n    eachSchema,\n    getChildSchemaSelection,\n    getSchema,\n    getTemplate,\n    isValid,\n    resolveAllOf,\n    resolveAnyOf,\n    resolveOneOf,\n    resolveRef,\n    step,\n    validate,\n    templateDefaultOptions: settings.templateDefaultOptions\n};\nclass Draft07 extends Draft {\n    constructor(schema, config = {}) {\n        super(merge(draft07Config, config), schema);\n    }\n}\nexport { Draft07, draft07Config };\n","export default function resolveRefMerge(schema, rootSchema) {\n    if (schema == null || schema.$ref == null) {\n        return schema;\n    }\n    const resolvedSchema = rootSchema.getRef(schema);\n    const mergedSchema = Object.assign({}, resolvedSchema, schema);\n    delete mergedSchema.$ref;\n    // @todo the following might not be safe nor incomplete\n    Object.defineProperty(mergedSchema, \"__ref\", { enumerable: false, value: schema.__ref });\n    Object.defineProperty(mergedSchema, \"getRoot\", { enumerable: false, value: schema.getRoot });\n    return mergedSchema;\n}\n","import merge from \"../utils/merge\";\nimport { resolveOneOfFuzzy } from \"../features/oneOf\";\nimport resolveRef from \"../resolveRef.merge\";\nimport { Draft } from \"../draft\";\nimport { draft07Config } from \"../draft07\";\nconst draftJsonEditorConfig = {\n    ...draft07Config,\n    resolveOneOf: resolveOneOfFuzzy,\n    resolveRef\n};\nclass JsonEditor extends Draft {\n    constructor(schema, config = {}) {\n        super(merge(draftJsonEditorConfig, config), schema);\n    }\n}\nexport { JsonEditor, draftJsonEditorConfig };\n","import { createError, createCustomError } from \"./lib/utils/createCustomError\";\nimport getTypeOf from \"./lib/getTypeOf\";\nimport { resolveOneOf, resolveOneOfFuzzy } from \"./lib/features/oneOf\";\nimport { resolveAllOf } from \"./lib/features/allOf\";\nimport resolveRef from \"./lib/resolveRef.strict\";\nimport resolveRefMerge from \"./lib/resolveRef.merge\";\nimport settings from \"./lib/config/settings\";\nimport strings from \"./lib/config/strings\";\nimport validateAsync from \"./lib/validateAsync\";\nimport { reduceSchema } from \"./lib/reduceSchema\";\nimport { resolveDynamicSchema, isDynamicSchema } from \"./lib/resolveDynamicSchema\";\nimport { mergeSchema } from \"./lib/mergeSchema\";\nimport render from \"./lib/utils/render\";\nimport { Draft } from \"./lib/draft\";\nimport { Draft04, draft04Config } from \"./lib/draft04\";\nimport { Draft06, draft06Config } from \"./lib/draft06\";\nimport { Draft07, draft07Config } from \"./lib/draft07\";\nimport { JsonEditor, draftJsonEditorConfig } from \"./lib/jsoneditor\";\nimport { isJsonError } from \"./lib/types\";\nconst config = { strings };\nexport { config, createCustomError, createError, Draft, Draft04, // core implementing draft04 specs\ndraft04Config, // config implementing draft04 specs\nDraft06, // core implementing draft06 specs\ndraft06Config, // config implementing draft06 specs\nDraft07, // core implementing draft07 specs\ndraft07Config, // config implementing draft07 specs\ndraftJsonEditorConfig, // adjusted config of draft04 to better support the json-editor\ngetTypeOf, // returns the javascript datatype\nisDynamicSchema, // NEW\nisJsonError, JsonEditor, // adjusted core of draft07 to better support the json-editor\nmergeSchema, // NEW\nreduceSchema, // NEW\nrender, resolveAllOf, resolveDynamicSchema, // NEW\nresolveOneOf, resolveOneOfFuzzy, resolveRef, resolveRefMerge, settings, validateAsync // async validation of data by a schema\n };\n","/// <reference types=\"../types/index.d.ts\" />\n\n// (c) 2020-present Andrea Giammarchi\n\nconst {parse: $parse, stringify: $stringify} = JSON;\nconst {keys} = Object;\n\nconst Primitive = String;   // it could be Number\nconst primitive = 'string'; // it could be 'number'\n\nconst ignore = {};\nconst object = 'object';\n\nconst noop = (_, value) => value;\n\nconst primitives = value => (\n  value instanceof Primitive ? Primitive(value) : value\n);\n\nconst Primitives = (_, value) => (\n  typeof value === primitive ? new Primitive(value) : value\n);\n\nconst revive = (input, parsed, output, $) => {\n  const lazy = [];\n  for (let ke = keys(output), {length} = ke, y = 0; y < length; y++) {\n    const k = ke[y];\n    const value = output[k];\n    if (value instanceof Primitive) {\n      const tmp = input[value];\n      if (typeof tmp === object && !parsed.has(tmp)) {\n        parsed.add(tmp);\n        output[k] = ignore;\n        lazy.push({k, a: [input, parsed, tmp, $]});\n      }\n      else\n        output[k] = $.call(output, k, tmp);\n    }\n    else if (output[k] !== ignore)\n      output[k] = $.call(output, k, value);\n  }\n  for (let {length} = lazy, i = 0; i < length; i++) {\n    const {k, a} = lazy[i];\n    output[k] = $.call(output, k, revive.apply(null, a));\n  }\n  return output;\n};\n\nconst set = (known, input, value) => {\n  const index = Primitive(input.push(value) - 1);\n  known.set(value, index);\n  return index;\n};\n\n/**\n * Converts a specialized flatted string into a JS value.\n * @param {string} text\n * @param {(this: any, key: string, value: any) => any} [reviver]\n * @returns {any}\n */\nexport const parse = (text, reviver) => {\n  const input = $parse(text, Primitives).map(primitives);\n  const value = input[0];\n  const $ = reviver || noop;\n  const tmp = typeof value === object && value ?\n              revive(input, new Set, value, $) :\n              value;\n  return $.call({'': tmp}, '', tmp);\n};\n\n/**\n * Converts a JS value into a specialized flatted string.\n * @param {any} value\n * @param {((this: any, key: string, value: any) => any) | (string | number)[] | null | undefined} [replacer]\n * @param {string | number | undefined} [space]\n * @returns {string}\n */\nexport const stringify = (value, replacer, space) => {\n  const $ = replacer && typeof replacer === object ?\n            (k, v) => (k === '' || -1 < replacer.indexOf(k) ? v : void 0) :\n            (replacer || noop);\n  const known = new Map;\n  const input = [];\n  const output = [];\n  let i = +set(known, input, $.call({'': value}, '', value));\n  let firstRun = !i;\n  while (i < input.length) {\n    firstRun = true;\n    output[i] = $stringify(input[i++], replace, space);\n  }\n  return '[' + output.join(',') + ']';\n  function replace(key, value) {\n    if (firstRun) {\n      firstRun = !firstRun;\n      return value;\n    }\n    const after = $.call(this, key, value);\n    switch (typeof after) {\n      case object:\n        if (after === null) return after;\n      case primitive:\n        return known.get(after) || set(known, input, after);\n    }\n    return after;\n  }\n};\n\n/**\n * Converts a generic value into a JSON serializable object without losing recursion.\n * @param {any} value\n * @returns {any}\n */\nexport const toJSON = value => $parse(stringify(value));\n\n/**\n * Converts a previously serialized object with recursion into a recursive one.\n * @param {any} value\n * @returns {any}\n */\nexport const fromJSON = value => parse($stringify(value));\n","import { parse, stringify } from 'flatted';\n\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction extractUiSchema(schema, uiSchema) {\n  if (!isObject(schema)) {\n    return;\n  }\n  const {\n    properties,\n    items,\n    anyOf,\n    oneOf,\n    allOf,\n    dependencies,\n    then,\n    else: _else\n  } = schema;\n  for (const propName in schema) {\n    if (!schema.hasOwnProperty(propName)) {\n      continue;\n    }\n    if (propName.startsWith(\"ui:\")) {\n      uiSchema[propName] = schema[propName];\n      delete schema[propName];\n    }\n  }\n  if (isObject(properties)) {\n    for (const propName in properties) {\n      if (!properties.hasOwnProperty(propName)) {\n        continue;\n      }\n      const schemaNode = properties[propName];\n      if (!isObject(schemaNode)) {\n        continue;\n      }\n      if (!isObject(uiSchema[propName])) {\n        const innerUiSchema = {};\n        uiSchema[propName] = innerUiSchema;\n      }\n      extractUiSchema(schemaNode, uiSchema[propName]);\n    }\n  }\n  if (isObject(items)) {\n    const innerUiSchema = {};\n    uiSchema.items = innerUiSchema;\n    extractUiSchema(items, innerUiSchema);\n  }\n  if (Array.isArray(anyOf)) {\n    for (const schemaNode of anyOf) {\n      if (!isObject(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (Array.isArray(oneOf)) {\n    for (const schemaNode of oneOf) {\n      if (!isObject(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (Array.isArray(allOf)) {\n    for (const schemaNode of allOf) {\n      if (!isObject(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (isObject(dependencies)) {\n    for (const depName of Object.keys(dependencies)) {\n      const schemaNode = dependencies[depName];\n      if (!isObject(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (isObject(then)) {\n    extractUiSchema(then, uiSchema);\n  }\n  if (isObject(_else)) {\n    extractUiSchema(_else, uiSchema);\n  }\n}\nconst extractSchemaFromStep = (inputStep) => {\n  const uiSchema = {};\n  const returnSchema = parse(stringify(inputStep));\n  extractUiSchema(returnSchema, uiSchema);\n  return { uiSchema, schema: returnSchema };\n};\nconst createFieldValidation = () => {\n  const fieldValidation = {\n    __errors: [],\n    addError: (message) => {\n      fieldValidation.__errors?.push(message);\n    }\n  };\n  return fieldValidation;\n};\n\nexport { createFieldValidation, extractSchemaFromStep };\n//# sourceMappingURL=schema.esm.js.map\n","function isFieldValidation(error) {\n  return !!error && \"__errors\" in error;\n}\nfunction hasErrors(errors) {\n  if (!errors) {\n    return false;\n  }\n  for (const error of Object.values(errors)) {\n    if (isFieldValidation(error)) {\n      if ((error.__errors ?? []).length > 0) {\n        return true;\n      }\n      continue;\n    }\n    if (hasErrors(error)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\n\nexport { hasErrors, isObject };\n//# sourceMappingURL=utils.esm.js.map\n","import { Draft07 } from 'json-schema-library';\nimport { extractSchemaFromStep, createFieldValidation } from '../../lib/schema.esm.js';\nimport { isObject } from './utils.esm.js';\n\nconst isJsonError = (value) => \"type\" in value && value.type === \"error\";\nconst createAsyncValidators = (rootSchema, validators, context) => {\n  async function validate(formData, pathPrefix = \"#\", current = formData) {\n    const parsedSchema = new Draft07(rootSchema);\n    const formValidation = {};\n    const validateForm = async (validatorName, key, value, schema, uiSchema) => {\n      const validator = validators[validatorName];\n      if (validator) {\n        const fieldValidation = createFieldValidation();\n        try {\n          await validator(value, fieldValidation, {\n            ...context,\n            formData,\n            schema,\n            uiSchema\n          });\n        } catch (ex) {\n          fieldValidation.addError(ex.message);\n        }\n        formValidation[key] = fieldValidation;\n      }\n    };\n    for (const [key, value] of Object.entries(current)) {\n      const pointer = `${pathPrefix}/${key}`;\n      const definitionInSchema = parsedSchema.getSchema({\n        pointer,\n        data: formData\n      });\n      if (!definitionInSchema) {\n        continue;\n      }\n      if (isJsonError(definitionInSchema)) {\n        throw new Error(definitionInSchema.message);\n      }\n      const { schema, uiSchema } = extractSchemaFromStep(\n        definitionInSchema\n      );\n      const hasItems = definitionInSchema && definitionInSchema.items;\n      const doValidateItem = async (propValue, itemSchema, itemUiSchema) => {\n        await validateForm(\n          propValue[\"ui:field\"],\n          key,\n          value,\n          itemSchema,\n          itemUiSchema\n        );\n      };\n      const doValidate = async (propValue) => {\n        if (\"ui:field\" in propValue) {\n          const { schema: itemsSchema, uiSchema: itemsUiSchema } = extractSchemaFromStep(definitionInSchema.items);\n          await doValidateItem(propValue, itemsSchema, itemsUiSchema);\n        }\n      };\n      if (\"ui:field\" in definitionInSchema) {\n        await doValidateItem(definitionInSchema, schema, uiSchema);\n      } else if (hasItems && \"ui:field\" in definitionInSchema.items) {\n        await doValidate(definitionInSchema.items);\n      } else if (hasItems && definitionInSchema.items.type === \"object\") {\n        const properties = definitionInSchema.items?.properties ?? [];\n        for (const [, propValue] of Object.entries(properties)) {\n          await doValidate(propValue);\n        }\n      } else if (isObject(value)) {\n        formValidation[key] = await validate(formData, pointer, value);\n      }\n    }\n    return formValidation;\n  }\n  return async (formData) => {\n    return await validate(formData);\n  };\n};\n\nexport { createAsyncValidators };\n//# sourceMappingURL=createAsyncValidators.esm.js.map\n","import List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport React__default from 'react';\n\nconst tableTitleCellStyles = (theme) => createStyles({\n  root: {\n    fontWeight: theme.typography.fontWeightBold,\n    whiteSpace: \"nowrap\",\n    paddingRight: theme.spacing(4),\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n});\nconst tableContentCellStyles = {\n  root: {\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n};\nconst listStyles = (theme) => createStyles({\n  root: {\n    margin: theme.spacing(0, 0, -1, 0)\n  }\n});\nconst listItemStyles = (theme) => createStyles({\n  root: {\n    padding: theme.spacing(0, 0, 1, 0)\n  },\n  random: {}\n});\nconst TitleCell = withStyles(tableTitleCellStyles, {\n  name: \"BackstageMetadataTableTitleCell\"\n})(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles, {\n  name: \"BackstageMetadataTableCell\"\n})(TableCell);\nconst MetadataTable = ({\n  dense,\n  children\n}) => /* @__PURE__ */ React__default.createElement(Table, { size: dense ? \"small\" : \"medium\" }, /* @__PURE__ */ React__default.createElement(TableBody, null, children));\nconst MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}) => /* @__PURE__ */ React__default.createElement(TableRow, null, title && /* @__PURE__ */ React__default.createElement(TitleCell, null, title), /* @__PURE__ */ React__default.createElement(ContentCell, { colSpan: title ? 1 : 2, ...rest }, children));\nconst MetadataList = withStyles(listStyles, {\n  name: \"BackstageMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React__default.createElement(List, { disablePadding: true, className: classes.root }, children));\nconst MetadataListItem = withStyles(listItemStyles, {\n  name: \"BackstageMetadataTableListItem\"\n})(({ classes, children }) => /* @__PURE__ */ React__default.createElement(ListItem, { className: classes.root }, children));\n\nexport { MetadataList, MetadataListItem, MetadataTable, MetadataTableItem };\n//# sourceMappingURL=MetadataTable.esm.js.map\n","import React__default, { Fragment } from 'react';\nimport { createStyles, withStyles } from '@material-ui/core/styles';\nimport startCase from 'lodash/startCase';\nimport Typography from '@material-ui/core/Typography';\nimport { MetadataList, MetadataTable, MetadataTableItem, MetadataListItem } from './MetadataTable.esm.js';\n\nconst listStyle = createStyles({\n  root: {\n    margin: \"0 0\",\n    listStyleType: \"none\"\n  }\n});\nconst nestedListStyle = (theme) => createStyles({\n  root: {\n    ...listStyle.root,\n    paddingLeft: theme.spacing(1)\n  }\n});\nconst StyledList = withStyles(listStyle, {\n  name: \"BackstageStructuredMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React__default.createElement(MetadataList, { classes }, children));\nconst StyledNestedList = withStyles(nestedListStyle, {\n  name: \"BackstageStructuredMetadataTableNestedList\"\n})(({ classes, children }) => /* @__PURE__ */ React__default.createElement(MetadataList, { classes }, children));\nfunction renderList(list, options, nested) {\n  const values = list.map((item, index) => /* @__PURE__ */ React__default.createElement(MetadataListItem, { key: index }, toValue(item, options, nested)));\n  return nested ? /* @__PURE__ */ React__default.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React__default.createElement(StyledList, null, values);\n}\nfunction renderMap(map, options, nested) {\n  const values = Object.keys(map).map((key) => {\n    const value = toValue(map[key], options, true);\n    return /* @__PURE__ */ React__default.createElement(MetadataListItem, { key }, /* @__PURE__ */ React__default.createElement(Typography, { variant: \"body2\", component: \"span\" }, `${options.titleFormat(key)}: `), value);\n  });\n  return nested ? /* @__PURE__ */ React__default.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React__default.createElement(StyledList, null, values);\n}\nfunction toValue(value, options, nested) {\n  if (React__default.isValidElement(value)) {\n    return /* @__PURE__ */ React__default.createElement(Fragment, null, value);\n  }\n  if (value !== null && typeof value === \"object\" && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n  if (Array.isArray(value)) {\n    return renderList(value, options, nested);\n  }\n  if (typeof value === \"boolean\") {\n    return /* @__PURE__ */ React__default.createElement(Fragment, null, value ? \"\\u2705\" : \"\\u274C\");\n  }\n  return /* @__PURE__ */ React__default.createElement(Typography, { variant: \"body2\", component: \"span\" }, value);\n}\nconst ItemValue = ({ value, options }) => /* @__PURE__ */ React__default.createElement(Fragment, null, toValue(value, options, false));\nconst TableItem = ({\n  title,\n  value,\n  options\n}) => {\n  return /* @__PURE__ */ React__default.createElement(MetadataTableItem, { title: options.titleFormat(title) }, /* @__PURE__ */ React__default.createElement(ItemValue, { value, options }));\n};\nfunction mapToItems(info, options) {\n  return Object.keys(info).map((key) => /* @__PURE__ */ React__default.createElement(TableItem, { key, title: key, value: info[key], options }));\n}\nfunction StructuredMetadataTable(props) {\n  const { metadata, dense = true, options = {} } = props;\n  const metadataItems = mapToItems(metadata, {\n    titleFormat: startCase,\n    ...options\n  });\n  return /* @__PURE__ */ React__default.createElement(MetadataTable, { dense }, metadataItems);\n}\n\nexport { StructuredMetadataTable };\n//# sourceMappingURL=StructuredMetadataTable.esm.js.map\n","import React from 'react';\nimport { StructuredMetadataTable } from '@backstage/core-components';\nimport { Draft07 } from 'json-schema-library';\n\nconst ReviewState = (props) => {\n  const reviewData = Object.fromEntries(\n    Object.entries(props.formState).map(([key, value]) => {\n      for (const step of props.schemas) {\n        const parsedSchema = new Draft07(step.mergedSchema);\n        const definitionInSchema = parsedSchema.getSchema({\n          pointer: `#/${key}`,\n          data: props.formState\n        });\n        if (definitionInSchema) {\n          const backstageReviewOptions = definitionInSchema[\"ui:backstage\"]?.review;\n          if (backstageReviewOptions) {\n            if (backstageReviewOptions.mask) {\n              return [key, backstageReviewOptions.mask];\n            }\n            if (backstageReviewOptions.show === false) {\n              return [];\n            }\n          }\n          if (definitionInSchema[\"ui:widget\"] === \"password\") {\n            return [key, \"******\"];\n          }\n          if (definitionInSchema.enum && definitionInSchema.enumNames) {\n            return [\n              key,\n              definitionInSchema.enumNames[definitionInSchema.enum.indexOf(value)] || value\n            ];\n          }\n        }\n      }\n      return [key, value];\n    }).filter((prop) => prop.length > 0)\n  );\n  return /* @__PURE__ */ React.createElement(StructuredMetadataTable, { metadata: reviewData });\n};\n\nexport { ReviewState };\n//# sourceMappingURL=ReviewState.esm.js.map\n","import qs from 'qs';\nimport { useState } from 'react';\n\nconst useFormDataFromQuery = (initialState) => {\n  return useState(() => {\n    if (initialState) {\n      return initialState;\n    }\n    const query = qs.parse(window.location.search, {\n      ignoreQueryPrefix: true\n    });\n    try {\n      return JSON.parse(query.formData);\n    } catch (e) {\n      return {};\n    }\n  });\n};\n\nexport { useFormDataFromQuery };\n//# sourceMappingURL=useFormDataFromQuery.esm.js.map\n","import { useApi, featureFlagsApiRef } from '@backstage/core-plugin-api';\nimport { extractSchemaFromStep } from '../lib/schema.esm.js';\n\nconst useTemplateSchema = (manifest) => {\n  const featureFlags = useApi(featureFlagsApiRef);\n  const steps = manifest.steps.map(({ title, description, schema }) => ({\n    title,\n    description,\n    mergedSchema: schema,\n    ...extractSchemaFromStep(schema)\n  }));\n  const returningSteps = steps.filter((step) => {\n    const stepFeatureFlag = step.uiSchema[\"ui:backstage\"]?.featureFlag;\n    return stepFeatureFlag ? featureFlags.isActive(stepFeatureFlag) : true;\n  }).map((step) => {\n    const strippedSchema = {\n      ...step,\n      schema: {\n        ...step.schema,\n        // Title is rendered at the top of the page, so let's ignore this from jsonschemaform\n        title: void 0\n      }\n    };\n    if (step.schema?.properties || !step.schema?.dependencies) {\n      strippedSchema.schema.properties = Object.fromEntries(\n        Object.entries(step.schema?.properties ?? {}).filter(\n          ([key]) => {\n            const stepFeatureFlag = step.uiSchema[key]?.[\"ui:backstage\"]?.featureFlag;\n            return stepFeatureFlag ? featureFlags.isActive(stepFeatureFlag) : true;\n          }\n        )\n      );\n    }\n    return strippedSchema;\n  });\n  return {\n    presentation: manifest.presentation,\n    steps: returningSteps\n  };\n};\n\nexport { useTemplateSchema };\n//# sourceMappingURL=useTemplateSchema.esm.js.map\n","/** Determines whether a `thing` is an object for the purposes of RSJF. In this case, `thing` is an object if it has\n * the type `object` but is NOT null, an array or a File.\n *\n * @param thing - The thing to check to see whether it is an object\n * @returns - True if it is a non-null, non-array, non-File object\n */\nexport default function isObject(thing) {\n    if (typeof File !== 'undefined' && thing instanceof File) {\n        return false;\n    }\n    if (typeof Date !== 'undefined' && thing instanceof Date) {\n        return false;\n    }\n    return typeof thing === 'object' && thing !== null && !Array.isArray(thing);\n}\n//# sourceMappingURL=isObject.js.map","import isObject from './isObject';\n/** Checks the schema to see if it is allowing additional items, by verifying that `schema.additionalItems` is an\n * object. The user is warned in the console if `schema.additionalItems` has the value `true`.\n *\n * @param schema - The schema object to check\n * @returns - True if additional items is allowed, otherwise false\n */\nexport default function allowAdditionalItems(schema) {\n    if (schema.additionalItems === true) {\n        console.warn('additionalItems=true is currently not supported');\n    }\n    return isObject(schema.additionalItems);\n}\n//# sourceMappingURL=allowAdditionalItems.js.map","/** Attempts to convert the string into a number. If an empty string is provided, then `undefined` is returned. If a\n * `null` is provided, it is returned. If the string ends in a `.` then the string is returned because the user may be\n * in the middle of typing a float number. If a number ends in a pattern like `.0`, `.20`, `.030`, string is returned\n * because the user may be typing number that will end in a non-zero digit. Otherwise, the string is wrapped by\n * `Number()` and if that result is not `NaN`, that number will be returned, otherwise the string `value` will be.\n *\n * @param value - The string or null value to convert to a number\n * @returns - The `value` converted to a number when appropriate, otherwise the `value`\n */\nexport default function asNumber(value) {\n    if (value === '') {\n        return undefined;\n    }\n    if (value === null) {\n        return null;\n    }\n    if (/\\.$/.test(value)) {\n        // '3.' can't really be considered a number even if it parses in js. The\n        // user is most likely entering a float.\n        return value;\n    }\n    if (/\\.0$/.test(value)) {\n        // we need to return this as a string here, to allow for input like 3.07\n        return value;\n    }\n    if (/\\.\\d*0$/.test(value)) {\n        // It's a number, that's cool - but we need it as a string so it doesn't screw\n        // with the user when entering dollar amounts or other values (such as those with\n        // specific precision or number of significant digits)\n        return value;\n    }\n    const n = Number(value);\n    const valid = typeof n === 'number' && !Number.isNaN(n);\n    return valid ? n : value;\n}\n//# sourceMappingURL=asNumber.js.map","/** Below are the list of all the keys into various elements of a RJSFSchema or UiSchema that are used by the various\n * utility functions. In addition to those keys, there are the special `ADDITIONAL_PROPERTY_FLAG` and\n * `RJSF_ADDITIONAL_PROPERTIES_FLAG` flags that is added to a schema under certain conditions by the `retrieveSchema()`\n * utility.\n */\nexport const ADDITIONAL_PROPERTY_FLAG = '__additional_property';\nexport const ADDITIONAL_PROPERTIES_KEY = 'additionalProperties';\nexport const ALL_OF_KEY = 'allOf';\nexport const ANY_OF_KEY = 'anyOf';\nexport const CONST_KEY = 'const';\nexport const DEFAULT_KEY = 'default';\nexport const DEFINITIONS_KEY = 'definitions';\nexport const DEPENDENCIES_KEY = 'dependencies';\nexport const ENUM_KEY = 'enum';\nexport const ERRORS_KEY = '__errors';\nexport const ID_KEY = '$id';\nexport const IF_KEY = 'if';\nexport const ITEMS_KEY = 'items';\nexport const JUNK_OPTION_ID = '_$junk_option_schema_id$_';\nexport const NAME_KEY = '$name';\nexport const ONE_OF_KEY = 'oneOf';\nexport const PROPERTIES_KEY = 'properties';\nexport const REQUIRED_KEY = 'required';\nexport const SUBMIT_BTN_OPTIONS_KEY = 'submitButtonOptions';\nexport const REF_KEY = '$ref';\n/**\n * @deprecated Replace with correctly spelled constant `RJSF_ADDITIONAL_PROPERTIES_FLAG`\n */\nexport const RJSF_ADDITONAL_PROPERTIES_FLAG = '__rjsf_additionalProperties';\nexport const RJSF_ADDITIONAL_PROPERTIES_FLAG = '__rjsf_additionalProperties';\nexport const ROOT_SCHEMA_PREFIX = '__rjsf_rootSchema';\nexport const UI_FIELD_KEY = 'ui:field';\nexport const UI_WIDGET_KEY = 'ui:widget';\nexport const UI_OPTIONS_KEY = 'ui:options';\nexport const UI_GLOBAL_OPTIONS_KEY = 'ui:globalOptions';\n//# sourceMappingURL=constants.js.map","import { UI_OPTIONS_KEY, UI_WIDGET_KEY } from './constants';\nimport isObject from './isObject';\n/** Get all passed options from ui:options, and ui:<optionName>, returning them in an object with the `ui:`\n * stripped off. Any `globalOptions` will always be returned, unless they are overridden by options in the `uiSchema`.\n *\n * @param [uiSchema={}] - The UI Schema from which to get any `ui:xxx` options\n * @param [globalOptions={}] - The optional Global UI Schema from which to get any fallback `xxx` options\n * @returns - An object containing all the `ui:xxx` options with the `ui:` stripped off along with all `globalOptions`\n */\nexport default function getUiOptions(uiSchema = {}, globalOptions = {}) {\n    return Object.keys(uiSchema)\n        .filter((key) => key.indexOf('ui:') === 0)\n        .reduce((options, key) => {\n        const value = uiSchema[key];\n        if (key === UI_WIDGET_KEY && isObject(value)) {\n            console.error('Setting options via ui:widget object is no longer supported, use ui:options instead');\n            return options;\n        }\n        if (key === UI_OPTIONS_KEY && isObject(value)) {\n            return { ...options, ...value };\n        }\n        return { ...options, [key.substring(3)]: value };\n    }, { ...globalOptions });\n}\n//# sourceMappingURL=getUiOptions.js.map","import getUiOptions from './getUiOptions';\n/** Checks whether the field described by `schema`, having the `uiSchema` and `formData` supports expanding. The UI for\n * the field can expand if it has additional properties, is not forced as non-expandable by the `uiSchema` and the\n * `formData` object doesn't already have `schema.maxProperties` elements.\n *\n * @param schema - The schema for the field that is being checked\n * @param [uiSchema={}] - The uiSchema for the field\n * @param [formData] - The formData for the field\n * @returns - True if the schema element has additionalProperties, is expandable, and not at the maxProperties limit\n */\nexport default function canExpand(schema, uiSchema = {}, formData) {\n    if (!schema.additionalProperties) {\n        return false;\n    }\n    const { expandable = true } = getUiOptions(uiSchema);\n    if (expandable === false) {\n        return expandable;\n    }\n    // if ui:options.expandable was not explicitly set to false, we can add\n    // another property if we have not exceeded maxProperties yet\n    if (schema.maxProperties !== undefined && formData) {\n        return Object.keys(formData).length < schema.maxProperties;\n    }\n    return true;\n}\n//# sourceMappingURL=canExpand.js.map","import isPlainObject from 'lodash/isPlainObject';\nimport { ERRORS_KEY } from './constants';\n/** Given a `formData` object, recursively creates a `FormValidation` error handling structure around it\n *\n * @param formData - The form data around which the error handler is created\n * @returns - A `FormValidation` object based on the `formData` structure\n */\nexport default function createErrorHandler(formData) {\n    const handler = {\n        // We store the list of errors for this node in a property named __errors\n        // to avoid name collision with a possible sub schema field named\n        // 'errors' (see `utils.toErrorSchema`).\n        [ERRORS_KEY]: [],\n        addError(message) {\n            this[ERRORS_KEY].push(message);\n        },\n    };\n    if (Array.isArray(formData)) {\n        return formData.reduce((acc, value, key) => {\n            return { ...acc, [key]: createErrorHandler(value) };\n        }, handler);\n    }\n    if (isPlainObject(formData)) {\n        const formObject = formData;\n        return Object.keys(formObject).reduce((acc, key) => {\n            return { ...acc, [key]: createErrorHandler(formObject[key]) };\n        }, handler);\n    }\n    return handler;\n}\n//# sourceMappingURL=createErrorHandler.js.map","import isEqualWith from 'lodash/isEqualWith';\n/** Implements a deep equals using the `lodash.isEqualWith` function, that provides a customized comparator that\n * assumes all functions are equivalent.\n *\n * @param a - The first element to compare\n * @param b - The second element to compare\n * @returns - True if the `a` and `b` are deeply equal, false otherwise\n */\nexport default function deepEquals(a, b) {\n    return isEqualWith(a, b, (obj, other) => {\n        if (typeof obj === 'function' && typeof other === 'function') {\n            // Assume all functions are equivalent\n            // see https://github.com/rjsf-team/react-jsonschema-form/issues/255\n            return true;\n        }\n        return undefined; // fallback to default isEquals behavior\n    });\n}\n//# sourceMappingURL=deepEquals.js.map","import jsonpointer from 'jsonpointer';\nimport omit from 'lodash/omit';\nimport { REF_KEY } from './constants';\n/** Splits out the value at the `key` in `object` from the `object`, returning an array that contains in the first\n * location, the `object` minus the `key: value` and in the second location the `value`.\n *\n * @param key - The key from the object to extract\n * @param object - The object from which to extract the element\n * @returns - An array with the first value being the object minus the `key` element and the second element being the\n *      value from `object[key]`\n */\nexport function splitKeyElementFromObject(key, object) {\n    const value = object[key];\n    const remaining = omit(object, [key]);\n    return [remaining, value];\n}\n/** Given the name of a `$ref` from within a schema, using the `rootSchema`, recursively look up and return the\n * sub-schema using the path provided by that reference. If `#` is not the first character of the reference, the path\n * does not exist in the schema, or the reference resolves circularly back to itself, then throw an Error.\n * Otherwise return the sub-schema. Also deals with nested `$ref`s in the sub-schema.\n *\n * @param $ref - The ref string for which the schema definition is desired\n * @param [rootSchema={}] - The root schema in which to search for the definition\n * @param recurseList - List of $refs already resolved to prevent recursion\n * @returns - The sub-schema within the `rootSchema` which matches the `$ref` if it exists\n * @throws - Error indicating that no schema for that reference could be resolved\n */\nexport function findSchemaDefinitionRecursive($ref, rootSchema = {}, recurseList = []) {\n    const ref = $ref || '';\n    let decodedRef;\n    if (ref.startsWith('#')) {\n        // Decode URI fragment representation.\n        decodedRef = decodeURIComponent(ref.substring(1));\n    }\n    else {\n        throw new Error(`Could not find a definition for ${$ref}.`);\n    }\n    const current = jsonpointer.get(rootSchema, decodedRef);\n    if (current === undefined) {\n        throw new Error(`Could not find a definition for ${$ref}.`);\n    }\n    const nextRef = current[REF_KEY];\n    if (nextRef) {\n        // Check for circular references.\n        if (recurseList.includes(nextRef)) {\n            if (recurseList.length === 1) {\n                throw new Error(`Definition for ${$ref} is a circular reference`);\n            }\n            const [firstRef, ...restRefs] = recurseList;\n            const circularPath = [...restRefs, ref, firstRef].join(' -> ');\n            throw new Error(`Definition for ${firstRef} contains a circular reference through ${circularPath}`);\n        }\n        const [remaining, theRef] = splitKeyElementFromObject(REF_KEY, current);\n        const subSchema = findSchemaDefinitionRecursive(theRef, rootSchema, [...recurseList, ref]);\n        if (Object.keys(remaining).length > 0) {\n            return { ...remaining, ...subSchema };\n        }\n        return subSchema;\n    }\n    return current;\n}\n/** Given the name of a `$ref` from within a schema, using the `rootSchema`, look up and return the sub-schema using the\n * path provided by that reference. If `#` is not the first character of the reference, the path does not exist in\n * the schema, or the reference resolves circularly back to itself, then throw an Error. Otherwise return the\n * sub-schema. Also deals with nested `$ref`s in the sub-schema.\n *\n * @param $ref - The ref string for which the schema definition is desired\n * @param [rootSchema={}] - The root schema in which to search for the definition\n * @returns - The sub-schema within the `rootSchema` which matches the `$ref` if it exists\n * @throws - Error indicating that no schema for that reference could be resolved\n */\nexport default function findSchemaDefinition($ref, rootSchema = {}) {\n    const recurseList = [];\n    return findSchemaDefinitionRecursive($ref, rootSchema, recurseList);\n}\n//# sourceMappingURL=findSchemaDefinition.js.map","import get from 'lodash/get';\nimport { PROPERTIES_KEY } from './constants';\n/** Compares the value of `discriminatorField` within `formData` against the value of `discriminatorField` within schema for each `option`.\n * Returns index of first `option` whose discriminator matches formData. Returns `undefined` if there is no match.\n * This function does not work with discriminators of `\"type\": \"object\"` and `\"type\": \"array\"`\n *\n * @param formData - The current formData, if any, used to figure out a match\n * @param options - The list of options to find a matching options from\n * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n *          determine which option is selected\n * @returns - The index of the matched option or undefined if there is no match\n */\nexport default function getOptionMatchingSimpleDiscriminator(formData, options, discriminatorField) {\n    var _a;\n    if (formData && discriminatorField) {\n        const value = get(formData, discriminatorField);\n        if (value === undefined) {\n            return;\n        }\n        for (let i = 0; i < options.length; i++) {\n            const option = options[i];\n            const discriminator = get(option, [PROPERTIES_KEY, discriminatorField], {});\n            if (discriminator.type === 'object' || discriminator.type === 'array') {\n                continue;\n            }\n            if (discriminator.const === value) {\n                return i;\n            }\n            if ((_a = discriminator.enum) === null || _a === void 0 ? void 0 : _a.includes(value)) {\n                return i;\n            }\n        }\n    }\n    return;\n}\n//# sourceMappingURL=getOptionMatchingSimpleDiscriminator.js.map","import get from 'lodash/get';\nimport has from 'lodash/has';\nimport isNumber from 'lodash/isNumber';\nimport { PROPERTIES_KEY } from '../constants';\nimport getOptionMatchingSimpleDiscriminator from '../getOptionMatchingSimpleDiscriminator';\n/** Given the `formData` and list of `options`, attempts to find the index of the option that best matches the data.\n * Deprecated, use `getFirstMatchingOption()` instead.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param formData - The current formData, if any, used to figure out a match\n * @param options - The list of options to find a matching options from\n * @param rootSchema - The root schema, used to primarily to look up `$ref`s\n * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n *          determine which option is selected\n * @returns - The index of the matched option or 0 if none is available\n * @deprecated\n */\nexport default function getMatchingOption(validator, formData, options, rootSchema, discriminatorField) {\n    // For performance, skip validating subschemas if formData is undefined. We just\n    // want to get the first option in that case.\n    if (formData === undefined) {\n        return 0;\n    }\n    const simpleDiscriminatorMatch = getOptionMatchingSimpleDiscriminator(formData, options, discriminatorField);\n    if (isNumber(simpleDiscriminatorMatch)) {\n        return simpleDiscriminatorMatch;\n    }\n    for (let i = 0; i < options.length; i++) {\n        const option = options[i];\n        // If we have a discriminator field, then we will use this to make the determination\n        if (discriminatorField && has(option, [PROPERTIES_KEY, discriminatorField])) {\n            const value = get(formData, discriminatorField);\n            const discriminator = get(option, [PROPERTIES_KEY, discriminatorField], {});\n            if (validator.isValid(discriminator, value, rootSchema)) {\n                return i;\n            }\n        }\n        else if (option[PROPERTIES_KEY]) {\n            // If the schema describes an object then we need to add slightly more\n            // strict matching to the schema, because unless the schema uses the\n            // \"requires\" keyword, an object will match the schema as long as it\n            // doesn't have matching keys with a conflicting type. To do this we use an\n            // \"anyOf\" with an array of requires. This augmentation expresses that the\n            // schema should match if any of the keys in the schema are present on the\n            // object and pass validation.\n            //\n            // Create an \"anyOf\" schema that requires at least one of the keys in the\n            // \"properties\" object\n            const requiresAnyOf = {\n                anyOf: Object.keys(option[PROPERTIES_KEY]).map((key) => ({\n                    required: [key],\n                })),\n            };\n            let augmentedSchema;\n            // If the \"anyOf\" keyword already exists, wrap the augmentation in an \"allOf\"\n            if (option.anyOf) {\n                // Create a shallow clone of the option\n                const { ...shallowClone } = option;\n                if (!shallowClone.allOf) {\n                    shallowClone.allOf = [];\n                }\n                else {\n                    // If \"allOf\" already exists, shallow clone the array\n                    shallowClone.allOf = shallowClone.allOf.slice();\n                }\n                shallowClone.allOf.push(requiresAnyOf);\n                augmentedSchema = shallowClone;\n            }\n            else {\n                augmentedSchema = Object.assign({}, option, requiresAnyOf);\n            }\n            // Remove the \"required\" field as it's likely that not all fields have\n            // been filled in yet, which will mean that the schema is not valid\n            delete augmentedSchema.required;\n            if (validator.isValid(augmentedSchema, formData, rootSchema)) {\n                return i;\n            }\n        }\n        else if (validator.isValid(option, formData, rootSchema)) {\n            return i;\n        }\n    }\n    return 0;\n}\n//# sourceMappingURL=getMatchingOption.js.map","import getMatchingOption from './getMatchingOption';\n/** Given the `formData` and list of `options`, attempts to find the index of the first option that matches the data.\n * Always returns the first option if there is nothing that matches.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param formData - The current formData, if any, used to figure out a match\n * @param options - The list of options to find a matching options from\n * @param rootSchema - The root schema, used to primarily to look up `$ref`s\n * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n *          determine which option is selected\n * @returns - The index of the first matched option or 0 if none is available\n */\nexport default function getFirstMatchingOption(validator, formData, options, rootSchema, discriminatorField) {\n    return getMatchingOption(validator, formData, options, rootSchema, discriminatorField);\n}\n//# sourceMappingURL=getFirstMatchingOption.js.map","import get from 'lodash/get';\nimport isString from 'lodash/isString';\n/** Returns the `discriminator.propertyName` when defined in the `schema` if it is a string. A warning is generated when\n * it is not a string. Returns `undefined` when a valid discriminator is not present.\n *\n * @param schema - The schema from which the discriminator is potentially obtained\n * @returns - The `discriminator.propertyName` if it exists in the schema, otherwise `undefined`\n */\nexport default function getDiscriminatorFieldFromSchema(schema) {\n    let discriminator;\n    const maybeString = get(schema, 'discriminator.propertyName', undefined);\n    if (isString(maybeString)) {\n        discriminator = maybeString;\n    }\n    else if (maybeString !== undefined) {\n        console.warn(`Expecting discriminator to be a string, got \"${typeof maybeString}\" instead`);\n    }\n    return discriminator;\n}\n//# sourceMappingURL=getDiscriminatorFieldFromSchema.js.map","/** Given a specific `value` attempts to guess the type of a schema element. In the case where we have to implicitly\n *  create a schema, it is useful to know what type to use based on the data we are defining.\n *\n * @param value - The value from which to guess the type\n * @returns - The best guess for the object type\n */\nexport default function guessType(value) {\n    if (Array.isArray(value)) {\n        return 'array';\n    }\n    if (typeof value === 'string') {\n        return 'string';\n    }\n    if (value == null) {\n        return 'null';\n    }\n    if (typeof value === 'boolean') {\n        return 'boolean';\n    }\n    if (!isNaN(value)) {\n        return 'number';\n    }\n    if (typeof value === 'object') {\n        return 'object';\n    }\n    // Default to string if we can't figure it out\n    return 'string';\n}\n//# sourceMappingURL=guessType.js.map","import guessType from './guessType';\n/** Gets the type of a given `schema`. If the type is not explicitly defined, then an attempt is made to infer it from\n * other elements of the schema as follows:\n * - schema.const: Returns the `guessType()` of that value\n * - schema.enum: Returns `string`\n * - schema.properties: Returns `object`\n * - schema.additionalProperties: Returns `object`\n * - type is an array with a length of 2 and one type is 'null': Returns the other type\n *\n * @param schema - The schema for which to get the type\n * @returns - The type of the schema\n */\nexport default function getSchemaType(schema) {\n    let { type } = schema;\n    if (!type && schema.const) {\n        return guessType(schema.const);\n    }\n    if (!type && schema.enum) {\n        return 'string';\n    }\n    if (!type && (schema.properties || schema.additionalProperties)) {\n        return 'object';\n    }\n    if (Array.isArray(type)) {\n        if (type.length === 2 && type.includes('null')) {\n            type = type.find((type) => type !== 'null');\n        }\n        else {\n            type = type[0];\n        }\n    }\n    return type;\n}\n//# sourceMappingURL=getSchemaType.js.map","import union from 'lodash/union';\nimport { REQUIRED_KEY } from './constants';\nimport getSchemaType from './getSchemaType';\nimport isObject from './isObject';\n/** Recursively merge deeply nested schemas. The difference between `mergeSchemas` and `mergeObjects` is that\n * `mergeSchemas` only concats arrays for values under the 'required' keyword, and when it does, it doesn't include\n * duplicate values.\n *\n * @param obj1 - The first schema object to merge\n * @param obj2 - The second schema object to merge\n * @returns - The merged schema object\n */\nexport default function mergeSchemas(obj1, obj2) {\n    const acc = Object.assign({}, obj1); // Prevent mutation of source object.\n    return Object.keys(obj2).reduce((acc, key) => {\n        const left = obj1 ? obj1[key] : {}, right = obj2[key];\n        if (obj1 && key in obj1 && isObject(right)) {\n            acc[key] = mergeSchemas(left, right);\n        }\n        else if (obj1 &&\n            obj2 &&\n            (getSchemaType(obj1) === 'object' || getSchemaType(obj2) === 'object') &&\n            key === REQUIRED_KEY &&\n            Array.isArray(left) &&\n            Array.isArray(right)) {\n            // Don't include duplicate values when merging 'required' fields.\n            acc[key] = union(left, right);\n        }\n        else {\n            acc[key] = right;\n        }\n        return acc;\n    }, acc);\n}\n//# sourceMappingURL=mergeSchemas.js.map","import get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport set from 'lodash/set';\nimport times from 'lodash/times';\nimport transform from 'lodash/transform';\nimport merge from 'lodash/merge';\nimport flattenDeep from 'lodash/flattenDeep';\nimport uniq from 'lodash/uniq';\nimport mergeAllOf from 'json-schema-merge-allof';\nimport { ADDITIONAL_PROPERTIES_KEY, ADDITIONAL_PROPERTY_FLAG, ALL_OF_KEY, ANY_OF_KEY, DEPENDENCIES_KEY, IF_KEY, ONE_OF_KEY, REF_KEY, PROPERTIES_KEY, ITEMS_KEY, } from '../constants';\nimport findSchemaDefinition, { splitKeyElementFromObject } from '../findSchemaDefinition';\nimport getDiscriminatorFieldFromSchema from '../getDiscriminatorFieldFromSchema';\nimport guessType from '../guessType';\nimport isObject from '../isObject';\nimport mergeSchemas from '../mergeSchemas';\nimport getFirstMatchingOption from './getFirstMatchingOption';\n/** Retrieves an expanded schema that has had all of its conditions, additional properties, references and dependencies\n * resolved and merged into the `schema` given a `validator`, `rootSchema` and `rawFormData` that is used to do the\n * potentially recursive resolution.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which retrieving a schema is desired\n * @param [rootSchema={}] - The root schema that will be forwarded to all the APIs\n * @param [rawFormData] - The current formData, if any, to assist retrieving a schema\n * @returns - The schema having its conditions, additional properties, references and dependencies resolved\n */\nexport default function retrieveSchema(validator, schema, rootSchema = {}, rawFormData) {\n    return retrieveSchemaInternal(validator, schema, rootSchema, rawFormData)[0];\n}\n/** Resolves a conditional block (if/else/then) by removing the condition and merging the appropriate conditional branch\n * with the rest of the schema. If `expandAllBranches` is true, then the `retrieveSchemaInteral()` results for both\n * conditions will be returned.\n *\n * @param validator - An implementation of the `ValidatorType` interface that is used to detect valid schema conditions\n * @param schema - The schema for which resolving a condition is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and\n *          dependencies as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData to assist retrieving a schema\n * @returns - A list of schemas with the appropriate conditions resolved, possibly with all branches expanded\n */\nexport function resolveCondition(validator, schema, rootSchema, expandAllBranches, recurseList, formData) {\n    const { if: expression, then, else: otherwise, ...resolvedSchemaLessConditional } = schema;\n    const conditionValue = validator.isValid(expression, formData || {}, rootSchema);\n    let resolvedSchemas = [resolvedSchemaLessConditional];\n    let schemas = [];\n    if (expandAllBranches) {\n        if (then && typeof then !== 'boolean') {\n            schemas = schemas.concat(retrieveSchemaInternal(validator, then, rootSchema, formData, expandAllBranches, recurseList));\n        }\n        if (otherwise && typeof otherwise !== 'boolean') {\n            schemas = schemas.concat(retrieveSchemaInternal(validator, otherwise, rootSchema, formData, expandAllBranches, recurseList));\n        }\n    }\n    else {\n        const conditionalSchema = conditionValue ? then : otherwise;\n        if (conditionalSchema && typeof conditionalSchema !== 'boolean') {\n            schemas = schemas.concat(retrieveSchemaInternal(validator, conditionalSchema, rootSchema, formData, expandAllBranches, recurseList));\n        }\n    }\n    if (schemas.length) {\n        resolvedSchemas = schemas.map((s) => mergeSchemas(resolvedSchemaLessConditional, s));\n    }\n    return resolvedSchemas.flatMap((s) => retrieveSchemaInternal(validator, s, rootSchema, formData, expandAllBranches, recurseList));\n}\n/** Given a list of lists of allOf, anyOf or oneOf values, create a list of lists of all permutations of the values. The\n * `listOfLists` is expected to be all resolved values of the 1st...nth schemas within an `allOf`, `anyOf` or `oneOf`.\n * From those lists, build a matrix for each `xxxOf` where there is more than one schema for a row in the list of lists.\n *\n * For example:\n * - If there are three xxxOf rows (A, B, C) and they have been resolved such that there is only one A, two B and three\n *   C schemas then:\n *   - The permutation for the first row is `[[A]]`\n *   - The permutations for the second row are `[[A,B1], [A,B2]]`\n *   - The permutations for the third row are `[[A,B1,C1], [A,B1,C2], [A,B1,C3], [A,B2,C1], [A,B2,C2], [A,B2,C3]]`\n *\n * @param listOfLists - The list of lists of elements that represent the allOf, anyOf or oneOf resolved values in order\n * @returns - The list of all permutations of schemas for a set of `xxxOf`s\n */\nexport function getAllPermutationsOfXxxOf(listOfLists) {\n    const allPermutations = listOfLists.reduce((permutations, list) => {\n        // When there are more than one set of schemas for a row, duplicate the set of permutations and add in the values\n        if (list.length > 1) {\n            return list.flatMap((element) => times(permutations.length, (i) => [...permutations[i]].concat(element)));\n        }\n        // Otherwise just push in the single value into the current set of permutations\n        permutations.forEach((permutation) => permutation.push(list[0]));\n        return permutations;\n    }, [[]] // Start with an empty list\n    );\n    return allPermutations;\n}\n/** Resolves references and dependencies within a schema and its 'allOf' children. Passes the `expandAllBranches` flag\n * down to the `retrieveSchemaInternal()`, `resolveReference()` and `resolveDependencies()` helper calls. If\n * `expandAllBranches` is true, then all possible dependencies and/or allOf branches are returned.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which resolving a schema is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @returns - The list of schemas having its references, dependencies and allOf schemas resolved\n */\nexport function resolveSchema(validator, schema, rootSchema, expandAllBranches, recurseList, formData) {\n    const updatedSchemas = resolveReference(validator, schema, rootSchema, expandAllBranches, recurseList, formData);\n    if (updatedSchemas.length > 1 || updatedSchemas[0] !== schema) {\n        // return the updatedSchemas array if it has either multiple schemas within it\n        // OR the first schema is not the same as the original schema\n        return updatedSchemas;\n    }\n    if (DEPENDENCIES_KEY in schema) {\n        const resolvedSchemas = resolveDependencies(validator, schema, rootSchema, expandAllBranches, recurseList, formData);\n        return resolvedSchemas.flatMap((s) => {\n            return retrieveSchemaInternal(validator, s, rootSchema, formData, expandAllBranches, recurseList);\n        });\n    }\n    if (ALL_OF_KEY in schema && Array.isArray(schema.allOf)) {\n        const allOfSchemaElements = schema.allOf.map((allOfSubschema) => retrieveSchemaInternal(validator, allOfSubschema, rootSchema, formData, expandAllBranches, recurseList));\n        const allPermutations = getAllPermutationsOfXxxOf(allOfSchemaElements);\n        return allPermutations.map((permutation) => ({ ...schema, allOf: permutation }));\n    }\n    // No $ref or dependencies or allOf attribute was found, returning the original schema.\n    return [schema];\n}\n/** Resolves all references within a schema and then returns the `retrieveSchemaInternal()` if the resolved schema is\n * actually different than the original. Passes the `expandAllBranches` flag down to the `retrieveSchemaInternal()`\n * helper call.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which resolving a reference is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @returns - The list schemas retrieved after having all references resolved\n */\nexport function resolveReference(validator, schema, rootSchema, expandAllBranches, recurseList, formData) {\n    const updatedSchema = resolveAllReferences(schema, rootSchema, recurseList);\n    if (updatedSchema !== schema) {\n        // Only call this if the schema was actually changed by the `resolveAllReferences()` function\n        return retrieveSchemaInternal(validator, updatedSchema, rootSchema, formData, expandAllBranches, recurseList);\n    }\n    return [schema];\n}\n/** Resolves all references within the schema itself as well as any of its properties and array items.\n *\n * @param schema - The schema for which resolving all references is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param recurseList - List of $refs already resolved to prevent recursion\n * @returns - given schema will all references resolved or the original schema if no internal `$refs` were resolved\n */\nexport function resolveAllReferences(schema, rootSchema, recurseList) {\n    if (!isObject(schema)) {\n        return schema;\n    }\n    let resolvedSchema = schema;\n    // resolve top level ref\n    if (REF_KEY in resolvedSchema) {\n        const { $ref, ...localSchema } = resolvedSchema;\n        // Check for a recursive reference and stop the loop\n        if (recurseList.includes($ref)) {\n            return resolvedSchema;\n        }\n        recurseList.push($ref);\n        // Retrieve the referenced schema definition.\n        const refSchema = findSchemaDefinition($ref, rootSchema);\n        resolvedSchema = { ...refSchema, ...localSchema };\n    }\n    if (PROPERTIES_KEY in resolvedSchema) {\n        const childrenLists = [];\n        const updatedProps = transform(resolvedSchema[PROPERTIES_KEY], (result, value, key) => {\n            const childList = [...recurseList];\n            result[key] = resolveAllReferences(value, rootSchema, childList);\n            childrenLists.push(childList);\n        }, {});\n        merge(recurseList, uniq(flattenDeep(childrenLists)));\n        resolvedSchema = { ...resolvedSchema, [PROPERTIES_KEY]: updatedProps };\n    }\n    if (ITEMS_KEY in resolvedSchema &&\n        !Array.isArray(resolvedSchema.items) &&\n        typeof resolvedSchema.items !== 'boolean') {\n        resolvedSchema = {\n            ...resolvedSchema,\n            items: resolveAllReferences(resolvedSchema.items, rootSchema, recurseList),\n        };\n    }\n    return isEqual(schema, resolvedSchema) ? schema : resolvedSchema;\n}\n/** Creates new 'properties' items for each key in the `formData`\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param theSchema - The schema for which the existing additional properties is desired\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s * @param validator\n * @param [aFormData] - The current formData, if any, to assist retrieving a schema\n * @returns - The updated schema with additional properties stubbed\n */\nexport function stubExistingAdditionalProperties(validator, theSchema, rootSchema, aFormData) {\n    // Clone the schema so that we don't ruin the consumer's original\n    const schema = {\n        ...theSchema,\n        properties: { ...theSchema.properties },\n    };\n    // make sure formData is an object\n    const formData = aFormData && isObject(aFormData) ? aFormData : {};\n    Object.keys(formData).forEach((key) => {\n        if (key in schema.properties) {\n            // No need to stub, our schema already has the property\n            return;\n        }\n        let additionalProperties = {};\n        if (typeof schema.additionalProperties !== 'boolean') {\n            if (REF_KEY in schema.additionalProperties) {\n                additionalProperties = retrieveSchema(validator, { $ref: get(schema.additionalProperties, [REF_KEY]) }, rootSchema, formData);\n            }\n            else if ('type' in schema.additionalProperties) {\n                additionalProperties = { ...schema.additionalProperties };\n            }\n            else if (ANY_OF_KEY in schema.additionalProperties || ONE_OF_KEY in schema.additionalProperties) {\n                additionalProperties = {\n                    type: 'object',\n                    ...schema.additionalProperties,\n                };\n            }\n            else {\n                additionalProperties = { type: guessType(get(formData, [key])) };\n            }\n        }\n        else {\n            additionalProperties = { type: guessType(get(formData, [key])) };\n        }\n        // The type of our new key should match the additionalProperties value;\n        schema.properties[key] = additionalProperties;\n        // Set our additional property flag so we know it was dynamically added\n        set(schema.properties, [key, ADDITIONAL_PROPERTY_FLAG], true);\n    });\n    return schema;\n}\n/** Internal handler that retrieves an expanded schema that has had all of its conditions, additional properties,\n * references and dependencies resolved and merged into the `schema` given a `validator`, `rootSchema` and `rawFormData`\n * that is used to do the potentially recursive resolution. If `expandAllBranches` is true, then all possible branches\n * of the schema and its references, conditions and dependencies are returned.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which retrieving a schema is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param [rawFormData] - The current formData, if any, to assist retrieving a schema\n * @param [expandAllBranches=false] - Flag, if true, will return all possible branches of conditions, any/oneOf and\n *          dependencies as a list of schemas\n * @param [recurseList=[]] - The optional, list of recursive references already processed\n * @returns - The schema(s) resulting from having its conditions, additional properties, references and dependencies\n *          resolved. Multiple schemas may be returned if `expandAllBranches` is true.\n */\nexport function retrieveSchemaInternal(validator, schema, rootSchema, rawFormData, expandAllBranches = false, recurseList = []) {\n    if (!isObject(schema)) {\n        return [{}];\n    }\n    const resolvedSchemas = resolveSchema(validator, schema, rootSchema, expandAllBranches, recurseList, rawFormData);\n    return resolvedSchemas.flatMap((s) => {\n        let resolvedSchema = s;\n        if (IF_KEY in resolvedSchema) {\n            return resolveCondition(validator, resolvedSchema, rootSchema, expandAllBranches, recurseList, rawFormData);\n        }\n        if (ALL_OF_KEY in resolvedSchema) {\n            // resolve allOf schemas\n            if (expandAllBranches) {\n                const { allOf, ...restOfSchema } = resolvedSchema;\n                return [...allOf, restOfSchema];\n            }\n            try {\n                resolvedSchema = mergeAllOf(resolvedSchema, {\n                    deep: false,\n                });\n            }\n            catch (e) {\n                console.warn('could not merge subschemas in allOf:\\n', e);\n                const { allOf, ...resolvedSchemaWithoutAllOf } = resolvedSchema;\n                return resolvedSchemaWithoutAllOf;\n            }\n        }\n        const hasAdditionalProperties = ADDITIONAL_PROPERTIES_KEY in resolvedSchema && resolvedSchema.additionalProperties !== false;\n        if (hasAdditionalProperties) {\n            return stubExistingAdditionalProperties(validator, resolvedSchema, rootSchema, rawFormData);\n        }\n        return resolvedSchema;\n    });\n}\n/** Resolves an `anyOf` or `oneOf` within a schema (if present) to the list of schemas returned from\n * `retrieveSchemaInternal()` for the best matching option. If `expandAllBranches` is true, then a list of schemas for ALL\n * options are retrieved and returned.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which retrieving a schema is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param [rawFormData] - The current formData, if any, to assist retrieving a schema, defaults to an empty object\n * @returns - Either an array containing the best matching option or all options if `expandAllBranches` is true\n */\nexport function resolveAnyOrOneOfSchemas(validator, schema, rootSchema, expandAllBranches, rawFormData) {\n    let anyOrOneOf;\n    const { oneOf, anyOf, ...remaining } = schema;\n    if (Array.isArray(oneOf)) {\n        anyOrOneOf = oneOf;\n    }\n    else if (Array.isArray(anyOf)) {\n        anyOrOneOf = anyOf;\n    }\n    if (anyOrOneOf) {\n        // Ensure that during expand all branches we pass an object rather than undefined so that all options are interrogated\n        const formData = rawFormData === undefined && expandAllBranches ? {} : rawFormData;\n        const discriminator = getDiscriminatorFieldFromSchema(schema);\n        anyOrOneOf = anyOrOneOf.map((s) => {\n            // Due to anyOf/oneOf possibly using the same $ref we always pass a fresh recurse list array so that each option\n            // can resolve recursive references independently\n            return resolveAllReferences(s, rootSchema, []);\n        });\n        // Call this to trigger the set of isValid() calls that the schema parser will need\n        const option = getFirstMatchingOption(validator, formData, anyOrOneOf, rootSchema, discriminator);\n        if (expandAllBranches) {\n            return anyOrOneOf.map((item) => mergeSchemas(remaining, item));\n        }\n        schema = mergeSchemas(remaining, anyOrOneOf[option]);\n    }\n    return [schema];\n}\n/** Resolves dependencies within a schema and its 'anyOf/oneOf' children. Passes the `expandAllBranches` flag down to\n * the `resolveAnyOrOneOfSchema()` and `processDependencies()` helper calls.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which resolving a dependency is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @returns - The list of schemas with their dependencies resolved\n */\nexport function resolveDependencies(validator, schema, rootSchema, expandAllBranches, recurseList, formData) {\n    // Drop the dependencies from the source schema.\n    const { dependencies, ...remainingSchema } = schema;\n    const resolvedSchemas = resolveAnyOrOneOfSchemas(validator, remainingSchema, rootSchema, expandAllBranches, formData);\n    return resolvedSchemas.flatMap((resolvedSchema) => processDependencies(validator, dependencies, resolvedSchema, rootSchema, expandAllBranches, recurseList, formData));\n}\n/** Processes all the `dependencies` recursively into the list of `resolvedSchema`s as needed. Passes the\n * `expandAllBranches` flag down to the `withDependentSchema()` and the recursive `processDependencies()` helper calls.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param dependencies - The set of dependencies that needs to be processed\n * @param resolvedSchema - The schema for which processing dependencies is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @returns - The schema with the `dependencies` resolved into it\n */\nexport function processDependencies(validator, dependencies, resolvedSchema, rootSchema, expandAllBranches, recurseList, formData) {\n    let schemas = [resolvedSchema];\n    // Process dependencies updating the local schema properties as appropriate.\n    for (const dependencyKey in dependencies) {\n        // Skip this dependency if its trigger property is not present.\n        if (!expandAllBranches && get(formData, [dependencyKey]) === undefined) {\n            continue;\n        }\n        // Skip this dependency if it is not included in the schema (such as when dependencyKey is itself a hidden dependency.)\n        if (resolvedSchema.properties && !(dependencyKey in resolvedSchema.properties)) {\n            continue;\n        }\n        const [remainingDependencies, dependencyValue] = splitKeyElementFromObject(dependencyKey, dependencies);\n        if (Array.isArray(dependencyValue)) {\n            schemas[0] = withDependentProperties(resolvedSchema, dependencyValue);\n        }\n        else if (isObject(dependencyValue)) {\n            schemas = withDependentSchema(validator, resolvedSchema, rootSchema, dependencyKey, dependencyValue, expandAllBranches, recurseList, formData);\n        }\n        return schemas.flatMap((schema) => processDependencies(validator, remainingDependencies, schema, rootSchema, expandAllBranches, recurseList, formData));\n    }\n    return schemas;\n}\n/** Updates a schema with additionally required properties added\n *\n * @param schema - The schema for which resolving a dependent properties is desired\n * @param [additionallyRequired] - An optional array of additionally required names\n * @returns - The schema with the additional required values merged in\n */\nexport function withDependentProperties(schema, additionallyRequired) {\n    if (!additionallyRequired) {\n        return schema;\n    }\n    const required = Array.isArray(schema.required)\n        ? Array.from(new Set([...schema.required, ...additionallyRequired]))\n        : additionallyRequired;\n    return { ...schema, required: required };\n}\n/** Merges a dependent schema into the `schema` dealing with oneOfs and references. Passes the `expandAllBranches` flag\n * down to the `retrieveSchemaInternal()`, `resolveReference()` and `withExactlyOneSubschema()` helper calls.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which resolving a dependent schema is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param dependencyKey - The key name of the dependency\n * @param dependencyValue - The potentially dependent schema\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData]- The current formData to assist retrieving a schema\n * @returns - The list of schemas with the dependent schema resolved into them\n */\nexport function withDependentSchema(validator, schema, rootSchema, dependencyKey, dependencyValue, expandAllBranches, recurseList, formData) {\n    const dependentSchemas = retrieveSchemaInternal(validator, dependencyValue, rootSchema, formData, expandAllBranches, recurseList);\n    return dependentSchemas.flatMap((dependent) => {\n        const { oneOf, ...dependentSchema } = dependent;\n        schema = mergeSchemas(schema, dependentSchema);\n        // Since it does not contain oneOf, we return the original schema.\n        if (oneOf === undefined) {\n            return schema;\n        }\n        // Resolve $refs inside oneOf.\n        const resolvedOneOfs = oneOf.map((subschema) => {\n            if (typeof subschema === 'boolean' || !(REF_KEY in subschema)) {\n                return [subschema];\n            }\n            return resolveReference(validator, subschema, rootSchema, expandAllBranches, recurseList, formData);\n        });\n        const allPermutations = getAllPermutationsOfXxxOf(resolvedOneOfs);\n        return allPermutations.flatMap((resolvedOneOf) => withExactlyOneSubschema(validator, schema, rootSchema, dependencyKey, resolvedOneOf, expandAllBranches, recurseList, formData));\n    });\n}\n/** Returns a list of `schema`s with the best choice from the `oneOf` options merged into it. If `expandAllBranches` is\n * true, then a list of schemas for ALL options are retrieved and returned. Passes the `expandAllBranches` flag down to\n * the `retrieveSchemaInternal()` helper call.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used to validate oneOf options\n * @param schema - The schema for which resolving a oneOf subschema is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param dependencyKey - The key name of the oneOf dependency\n * @param oneOf - The list of schemas representing the oneOf options\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData to assist retrieving a schema\n * @returns - Either an array containing the best matching option or all options if `expandAllBranches` is true\n */\nexport function withExactlyOneSubschema(validator, schema, rootSchema, dependencyKey, oneOf, expandAllBranches, recurseList, formData) {\n    const validSubschemas = oneOf.filter((subschema) => {\n        if (typeof subschema === 'boolean' || !subschema || !subschema.properties) {\n            return false;\n        }\n        const { [dependencyKey]: conditionPropertySchema } = subschema.properties;\n        if (conditionPropertySchema) {\n            const conditionSchema = {\n                type: 'object',\n                properties: {\n                    [dependencyKey]: conditionPropertySchema,\n                },\n            };\n            return validator.isValid(conditionSchema, formData, rootSchema) || expandAllBranches;\n        }\n        return false;\n    });\n    if (!expandAllBranches && validSubschemas.length !== 1) {\n        console.warn(\"ignoring oneOf in dependencies because there isn't exactly one subschema that is valid\");\n        return [schema];\n    }\n    return validSubschemas.flatMap((s) => {\n        const subschema = s;\n        const [dependentSubschema] = splitKeyElementFromObject(dependencyKey, subschema.properties);\n        const dependentSchema = { ...subschema, properties: dependentSubschema };\n        const schemas = retrieveSchemaInternal(validator, dependentSchema, rootSchema, formData, expandAllBranches, recurseList);\n        return schemas.map((s) => mergeSchemas(schema, s));\n    });\n}\n//# sourceMappingURL=retrieveSchema.js.map","import get from 'lodash/get';\nimport has from 'lodash/has';\nimport isNumber from 'lodash/isNumber';\nimport isObject from 'lodash/isObject';\nimport isString from 'lodash/isString';\nimport reduce from 'lodash/reduce';\nimport times from 'lodash/times';\nimport getFirstMatchingOption from './getFirstMatchingOption';\nimport retrieveSchema, { resolveAllReferences } from './retrieveSchema';\nimport { ONE_OF_KEY, REF_KEY, JUNK_OPTION_ID, ANY_OF_KEY } from '../constants';\nimport guessType from '../guessType';\nimport getDiscriminatorFieldFromSchema from '../getDiscriminatorFieldFromSchema';\nimport getOptionMatchingSimpleDiscriminator from '../getOptionMatchingSimpleDiscriminator';\n/** A junk option used to determine when the getFirstMatchingOption call really matches an option rather than returning\n * the first item\n */\nexport const JUNK_OPTION = {\n    type: 'object',\n    $id: JUNK_OPTION_ID,\n    properties: {\n        __not_really_there__: {\n            type: 'number',\n        },\n    },\n};\n/** Recursive function that calculates the score of a `formData` against the given `schema`. The computation is fairly\n * simple. Initially the total score is 0. When `schema.properties` object exists, then all the `key/value` pairs within\n * the object are processed as follows after obtaining the formValue from `formData` using the `key`:\n * - If the `value` contains a `$ref`, `calculateIndexScore()` is called recursively with the formValue and the new\n *   schema that is the result of the ref in the schema being resolved and that sub-schema's resulting score is added to\n *   the total.\n * - If the `value` contains a `oneOf` and there is a formValue, then score based on the index returned from calling\n *   `getClosestMatchingOption()` of that oneOf.\n * - If the type of the `value` is 'object', `calculateIndexScore()` is called recursively with the formValue and the\n *   `value` itself as the sub-schema, and the score is added to the total.\n * - If the type of the `value` matches the guessed-type of the `formValue`, the score is incremented by 1, UNLESS the\n *   value has a `default` or `const`. In those case, if the `default` or `const` and the `formValue` match, the score\n *   is incremented by another 1 otherwise it is decremented by 1.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param rootSchema - The root JSON schema of the entire form\n * @param schema - The schema for which the score is being calculated\n * @param formData - The form data associated with the schema, used to calculate the score\n * @returns - The score a schema against the formData\n */\nexport function calculateIndexScore(validator, rootSchema, schema, formData = {}) {\n    let totalScore = 0;\n    if (schema) {\n        if (isObject(schema.properties)) {\n            totalScore += reduce(schema.properties, (score, value, key) => {\n                const formValue = get(formData, key);\n                if (typeof value === 'boolean') {\n                    return score;\n                }\n                if (has(value, REF_KEY)) {\n                    const newSchema = retrieveSchema(validator, value, rootSchema, formValue);\n                    return score + calculateIndexScore(validator, rootSchema, newSchema, formValue || {});\n                }\n                if ((has(value, ONE_OF_KEY) || has(value, ANY_OF_KEY)) && formValue) {\n                    const key = has(value, ONE_OF_KEY) ? ONE_OF_KEY : ANY_OF_KEY;\n                    const discriminator = getDiscriminatorFieldFromSchema(value);\n                    return (score +\n                        getClosestMatchingOption(validator, rootSchema, formValue, get(value, key), -1, discriminator));\n                }\n                if (value.type === 'object') {\n                    return score + calculateIndexScore(validator, rootSchema, value, formValue || {});\n                }\n                if (value.type === guessType(formValue)) {\n                    // If the types match, then we bump the score by one\n                    let newScore = score + 1;\n                    if (value.default) {\n                        // If the schema contains a readonly default value score the value that matches the default higher and\n                        // any non-matching value lower\n                        newScore += formValue === value.default ? 1 : -1;\n                    }\n                    else if (value.const) {\n                        // If the schema contains a const value score the value that matches the default higher and\n                        // any non-matching value lower\n                        newScore += formValue === value.const ? 1 : -1;\n                    }\n                    // TODO eventually, deal with enums/arrays\n                    return newScore;\n                }\n                return score;\n            }, 0);\n        }\n        else if (isString(schema.type) && schema.type === guessType(formData)) {\n            totalScore += 1;\n        }\n    }\n    return totalScore;\n}\n/** Determines which of the given `options` provided most closely matches the `formData`. Using\n * `getFirstMatchingOption()` to match two schemas that differ only by the readOnly, default or const value of a field\n * based on the `formData` and returns 0 when there is no match. Rather than passing in all the `options` at once to\n * this utility, instead an array of valid option indexes is created by iterating over the list of options, call\n * `getFirstMatchingOptions` with a list of one junk option and one good option, seeing if the good option is considered\n * matched.\n *\n * Once the list of valid indexes is created, if there is only one valid index, just return it. Otherwise, if there are\n * no valid indexes, then fill the valid indexes array with the indexes of all the options. Next, the index of the\n * option with the highest score is determined by iterating over the list of valid options, calling\n * `calculateIndexScore()` on each, comparing it against the current best score, and returning the index of the one that\n * eventually has the best score.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param rootSchema - The root JSON schema of the entire form\n * @param formData - The form data associated with the schema\n * @param options - The list of options that can be selected from\n * @param [selectedOption=-1] - The index of the currently selected option, defaulted to -1 if not specified\n * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n *          determine which option is selected\n * @returns - The index of the option that is the closest match to the `formData` or the `selectedOption` if no match\n */\nexport default function getClosestMatchingOption(validator, rootSchema, formData, options, selectedOption = -1, discriminatorField) {\n    // First resolve any refs in the options\n    const resolvedOptions = options.map((option) => {\n        return resolveAllReferences(option, rootSchema, []);\n    });\n    const simpleDiscriminatorMatch = getOptionMatchingSimpleDiscriminator(formData, options, discriminatorField);\n    if (isNumber(simpleDiscriminatorMatch)) {\n        return simpleDiscriminatorMatch;\n    }\n    // Reduce the array of options down to a list of the indexes that are considered matching options\n    const allValidIndexes = resolvedOptions.reduce((validList, option, index) => {\n        const testOptions = [JUNK_OPTION, option];\n        const match = getFirstMatchingOption(validator, formData, testOptions, rootSchema, discriminatorField);\n        // The match is the real option, so add its index to list of valid indexes\n        if (match === 1) {\n            validList.push(index);\n        }\n        return validList;\n    }, []);\n    // There is only one valid index, so return it!\n    if (allValidIndexes.length === 1) {\n        return allValidIndexes[0];\n    }\n    if (!allValidIndexes.length) {\n        // No indexes were valid, so we'll score all the options, add all the indexes\n        times(resolvedOptions.length, (i) => allValidIndexes.push(i));\n    }\n    const scoreCount = new Set();\n    // Score all the options in the list of valid indexes and return the index with the best score\n    const { bestIndex } = allValidIndexes.reduce((scoreData, index) => {\n        const { bestScore } = scoreData;\n        const option = resolvedOptions[index];\n        const score = calculateIndexScore(validator, rootSchema, option, formData);\n        scoreCount.add(score);\n        if (score > bestScore) {\n            return { bestIndex: index, bestScore: score };\n        }\n        return scoreData;\n    }, { bestIndex: selectedOption, bestScore: 0 });\n    // if all scores are the same go with selectedOption\n    if (scoreCount.size === 1 && selectedOption >= 0) {\n        return selectedOption;\n    }\n    return bestIndex;\n}\n//# sourceMappingURL=getClosestMatchingOption.js.map","import isObject from './isObject';\n/** Detects whether the given `schema` contains fixed items. This is the case when `schema.items` is a non-empty array\n * that only contains objects.\n *\n * @param schema - The schema in which to check for fixed items\n * @returns - True if there are fixed items in the schema, false otherwise\n */\nexport default function isFixedItems(schema) {\n    return Array.isArray(schema.items) && schema.items.length > 0 && schema.items.every((item) => isObject(item));\n}\n//# sourceMappingURL=isFixedItems.js.map","import get from 'lodash/get';\nimport isObject from './isObject';\n/** Merges the `defaults` object of type `T` into the `formData` of type `T`\n *\n * When merging defaults and form data, we want to merge in this specific way:\n * - objects are deeply merged\n * - arrays are merged in such a way that:\n *   - when the array is set in form data, only array entries set in form data\n *     are deeply merged; additional entries from the defaults are ignored unless `mergeExtraArrayDefaults` is true, in\n *     which case the extras are appended onto the end of the form data\n *   - when the array is not set in form data, the default is copied over\n * - scalars are overwritten/set by form data\n *\n * @param [defaults] - The defaults to merge\n * @param [formData] - The form data into which the defaults will be merged\n * @param [mergeExtraArrayDefaults=false] - If true, any additional default array entries are appended onto the formData\n * @returns - The resulting merged form data with defaults\n */\nexport default function mergeDefaultsWithFormData(defaults, formData, mergeExtraArrayDefaults = false) {\n    if (Array.isArray(formData)) {\n        const defaultsArray = Array.isArray(defaults) ? defaults : [];\n        const mapped = formData.map((value, idx) => {\n            if (defaultsArray[idx]) {\n                return mergeDefaultsWithFormData(defaultsArray[idx], value, mergeExtraArrayDefaults);\n            }\n            return value;\n        });\n        // Merge any extra defaults when mergeExtraArrayDefaults is true\n        if (mergeExtraArrayDefaults && mapped.length < defaultsArray.length) {\n            mapped.push(...defaultsArray.slice(mapped.length));\n        }\n        return mapped;\n    }\n    if (isObject(formData)) {\n        const acc = Object.assign({}, defaults); // Prevent mutation of source object.\n        return Object.keys(formData).reduce((acc, key) => {\n            acc[key] = mergeDefaultsWithFormData(defaults ? get(defaults, key) : {}, get(formData, key), mergeExtraArrayDefaults);\n            return acc;\n        }, acc);\n    }\n    return formData;\n}\n//# sourceMappingURL=mergeDefaultsWithFormData.js.map","import isObject from './isObject';\n/** Recursively merge deeply nested objects.\n *\n * @param obj1 - The first object to merge\n * @param obj2 - The second object to merge\n * @param [concatArrays=false] - Optional flag that, when true, will cause arrays to be concatenated. Use\n *          \"preventDuplicates\" to merge arrays in a manner that prevents any duplicate entries from being merged.\n *          NOTE: Uses shallow comparison for the duplicate checking.\n * @returns - A new object that is the merge of the two given objects\n */\nexport default function mergeObjects(obj1, obj2, concatArrays = false) {\n    return Object.keys(obj2).reduce((acc, key) => {\n        const left = obj1 ? obj1[key] : {}, right = obj2[key];\n        if (obj1 && key in obj1 && isObject(right)) {\n            acc[key] = mergeObjects(left, right, concatArrays);\n        }\n        else if (concatArrays && Array.isArray(left) && Array.isArray(right)) {\n            let toMerge = right;\n            if (concatArrays === 'preventDuplicates') {\n                toMerge = right.reduce((result, value) => {\n                    if (!left.includes(value)) {\n                        result.push(value);\n                    }\n                    return result;\n                }, []);\n            }\n            acc[key] = left.concat(toMerge);\n        }\n        else {\n            acc[key] = right;\n        }\n        return acc;\n    }, Object.assign({}, obj1)); // Prevent mutation of source object.\n}\n//# sourceMappingURL=mergeObjects.js.map","import { CONST_KEY } from './constants';\n/** This function checks if the given `schema` matches a single constant value. This happens when either the schema has\n * an `enum` array with a single value or there is a `const` defined.\n *\n * @param schema - The schema for a field\n * @returns - True if the `schema` has a single constant value, false otherwise\n */\nexport default function isConstant(schema) {\n    return (Array.isArray(schema.enum) && schema.enum.length === 1) || CONST_KEY in schema;\n}\n//# sourceMappingURL=isConstant.js.map","import isConstant from '../isConstant';\nimport retrieveSchema from './retrieveSchema';\n/** Checks to see if the `schema` combination represents a select\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param theSchema - The schema for which check for a select flag is desired\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @returns - True if schema contains a select, otherwise false\n */\nexport default function isSelect(validator, theSchema, rootSchema = {}) {\n    const schema = retrieveSchema(validator, theSchema, rootSchema, undefined);\n    const altSchemas = schema.oneOf || schema.anyOf;\n    if (Array.isArray(schema.enum)) {\n        return true;\n    }\n    if (Array.isArray(altSchemas)) {\n        return altSchemas.every((altSchemas) => typeof altSchemas !== 'boolean' && isConstant(altSchemas));\n    }\n    return false;\n}\n//# sourceMappingURL=isSelect.js.map","import isSelect from './isSelect';\n/** Checks to see if the `schema` combination represents a multi-select\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which check for a multi-select flag is desired\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @returns - True if schema contains a multi-select, otherwise false\n */\nexport default function isMultiSelect(validator, schema, rootSchema) {\n    if (!schema.uniqueItems || !schema.items || typeof schema.items === 'boolean') {\n        return false;\n    }\n    return isSelect(validator, schema.items, rootSchema);\n}\n//# sourceMappingURL=isMultiSelect.js.map","import get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport { ANY_OF_KEY, DEFAULT_KEY, DEPENDENCIES_KEY, PROPERTIES_KEY, ONE_OF_KEY, REF_KEY, ALL_OF_KEY, } from '../constants';\nimport findSchemaDefinition from '../findSchemaDefinition';\nimport getClosestMatchingOption from './getClosestMatchingOption';\nimport getDiscriminatorFieldFromSchema from '../getDiscriminatorFieldFromSchema';\nimport getSchemaType from '../getSchemaType';\nimport isObject from '../isObject';\nimport isFixedItems from '../isFixedItems';\nimport mergeDefaultsWithFormData from '../mergeDefaultsWithFormData';\nimport mergeObjects from '../mergeObjects';\nimport mergeSchemas from '../mergeSchemas';\nimport isMultiSelect from './isMultiSelect';\nimport retrieveSchema, { resolveDependencies } from './retrieveSchema';\n/** Enum that indicates how `schema.additionalItems` should be handled by the `getInnerSchemaForArrayItem()` function.\n */\nexport var AdditionalItemsHandling;\n(function (AdditionalItemsHandling) {\n    AdditionalItemsHandling[AdditionalItemsHandling[\"Ignore\"] = 0] = \"Ignore\";\n    AdditionalItemsHandling[AdditionalItemsHandling[\"Invert\"] = 1] = \"Invert\";\n    AdditionalItemsHandling[AdditionalItemsHandling[\"Fallback\"] = 2] = \"Fallback\";\n})(AdditionalItemsHandling || (AdditionalItemsHandling = {}));\n/** Given a `schema` will return an inner schema that for an array item. This is computed differently based on the\n * `additionalItems` enum and the value of `idx`. There are four possible returns:\n * 1. If `idx` is >= 0, then if `schema.items` is an array the `idx`th element of the array is returned if it is a valid\n *    index and not a boolean, otherwise it falls through to 3.\n * 2. If `schema.items` is not an array AND truthy and not a boolean, then `schema.items` is returned since it actually\n *    is a schema, otherwise it falls through to 3.\n * 3. If `additionalItems` is not `AdditionalItemsHandling.Ignore` and `schema.additionalItems` is an object, then\n *    `schema.additionalItems` is returned since it actually is a schema, otherwise it falls through to 4.\n * 4. {} is returned representing an empty schema\n *\n * @param schema - The schema from which to get the particular item\n * @param [additionalItems=AdditionalItemsHandling.Ignore] - How do we want to handle additional items?\n * @param [idx=-1] - Index, if non-negative, will be used to return the idx-th element in a `schema.items` array\n * @returns - The best fit schema object from the `schema` given the `additionalItems` and `idx` modifiers\n */\nexport function getInnerSchemaForArrayItem(schema, additionalItems = AdditionalItemsHandling.Ignore, idx = -1) {\n    if (idx >= 0) {\n        if (Array.isArray(schema.items) && idx < schema.items.length) {\n            const item = schema.items[idx];\n            if (typeof item !== 'boolean') {\n                return item;\n            }\n        }\n    }\n    else if (schema.items && !Array.isArray(schema.items) && typeof schema.items !== 'boolean') {\n        return schema.items;\n    }\n    if (additionalItems !== AdditionalItemsHandling.Ignore && isObject(schema.additionalItems)) {\n        return schema.additionalItems;\n    }\n    return {};\n}\n/** Either add `computedDefault` at `key` into `obj` or not add it based on its value, the value of\n * `includeUndefinedValues`, the value of `emptyObjectFields` and if its parent field is required. Generally undefined\n * `computedDefault` values are added only when `includeUndefinedValues` is either true/\"excludeObjectChildren\". If `\n * includeUndefinedValues` is false and `emptyObjectFields` is not \"skipDefaults\", then non-undefined and non-empty-object\n * values will be added based on certain conditions.\n *\n * @param obj - The object into which the computed default may be added\n * @param key - The key into the object at which the computed default may be added\n * @param computedDefault - The computed default value that maybe should be added to the obj\n * @param includeUndefinedValues - Optional flag, if true, cause undefined values to be added as defaults.\n *          If \"excludeObjectChildren\", cause undefined values for this object and pass `includeUndefinedValues` as\n *          false when computing defaults for any nested object properties. If \"allowEmptyObject\", prevents undefined\n *          values in this object while allow the object itself to be empty and passing `includeUndefinedValues` as\n *          false when computing defaults for any nested object properties.\n * @param isParentRequired - The optional boolean that indicates whether the parent field is required\n * @param requiredFields - The list of fields that are required\n * @param experimental_defaultFormStateBehavior - Optional configuration object, if provided, allows users to override\n *        default form state behavior\n */\nfunction maybeAddDefaultToObject(obj, key, computedDefault, includeUndefinedValues, isParentRequired, requiredFields = [], experimental_defaultFormStateBehavior = {}) {\n    const { emptyObjectFields = 'populateAllDefaults' } = experimental_defaultFormStateBehavior;\n    if (includeUndefinedValues) {\n        obj[key] = computedDefault;\n    }\n    else if (emptyObjectFields !== 'skipDefaults') {\n        if (isObject(computedDefault)) {\n            // If isParentRequired is undefined, then we are at the root level of the schema so defer to the requiredness of\n            // the field key itself in the `requiredField` list\n            const isSelfOrParentRequired = isParentRequired === undefined ? requiredFields.includes(key) : isParentRequired;\n            // If emptyObjectFields 'skipEmptyDefaults' store computedDefault if it's a non-empty object(e.g. not {})\n            if (emptyObjectFields === 'skipEmptyDefaults') {\n                if (!isEmpty(computedDefault)) {\n                    obj[key] = computedDefault;\n                }\n            }\n            // Else store computedDefault if it's a non-empty object(e.g. not {}) and satisfies certain conditions\n            // Condition 1: If computedDefault is not empty or if the key is a required field\n            // Condition 2: If the parent object is required or emptyObjectFields is not 'populateRequiredDefaults'\n            else if ((!isEmpty(computedDefault) || requiredFields.includes(key)) &&\n                (isSelfOrParentRequired || emptyObjectFields !== 'populateRequiredDefaults')) {\n                obj[key] = computedDefault;\n            }\n        }\n        else if (\n        // Store computedDefault if it's a defined primitive (e.g., true) and satisfies certain conditions\n        // Condition 1: computedDefault is not undefined\n        // Condition 2: If emptyObjectFields is 'populateAllDefaults' or 'skipEmptyDefaults) or if the key is a required field\n        computedDefault !== undefined &&\n            (emptyObjectFields === 'populateAllDefaults' ||\n                emptyObjectFields === 'skipEmptyDefaults' ||\n                requiredFields.includes(key))) {\n            obj[key] = computedDefault;\n        }\n    }\n}\n/** Computes the defaults for the current `schema` given the `rawFormData` and `parentDefaults` if any. This drills into\n * each level of the schema, recursively, to fill out every level of defaults provided by the schema.\n *\n * @param validator - an implementation of the `ValidatorType` interface that will be used when necessary\n * @param rawSchema - The schema for which the default state is desired\n * @param [props] - Optional props for this function\n * @param [props.parentDefaults] - Any defaults provided by the parent field in the schema\n * @param [props.rootSchema] - The options root schema, used to primarily to look up `$ref`s\n * @param [props.rawFormData] - The current formData, if any, onto which to provide any missing defaults\n * @param [props.includeUndefinedValues=false] - Optional flag, if true, cause undefined values to be added as defaults.\n *          If \"excludeObjectChildren\", cause undefined values for this object and pass `includeUndefinedValues` as\n *          false when computing defaults for any nested object properties.\n * @param [props._recurseList=[]] - The list of ref names currently being recursed, used to prevent infinite recursion\n * @param [props.experimental_defaultFormStateBehavior] Optional configuration object, if provided, allows users to override default form state behavior\n * @param [props.required] - Optional flag, if true, indicates this schema was required in the parent schema.\n * @returns - The resulting `formData` with all the defaults provided\n */\nexport function computeDefaults(validator, rawSchema, { parentDefaults, rawFormData, rootSchema = {}, includeUndefinedValues = false, _recurseList = [], experimental_defaultFormStateBehavior = undefined, required, } = {}) {\n    var _a, _b, _c, _d;\n    const formData = (isObject(rawFormData) ? rawFormData : {});\n    const schema = isObject(rawSchema) ? rawSchema : {};\n    // Compute the defaults recursively: give highest priority to deepest nodes.\n    let defaults = parentDefaults;\n    // If we get a new schema, then we need to recompute defaults again for the new schema found.\n    let schemaToCompute = null;\n    let updatedRecurseList = _recurseList;\n    if (isObject(defaults) && isObject(schema.default)) {\n        // For object defaults, only override parent defaults that are defined in\n        // schema.default.\n        defaults = mergeObjects(defaults, schema.default);\n    }\n    else if (DEFAULT_KEY in schema) {\n        defaults = schema.default;\n    }\n    else if (REF_KEY in schema) {\n        const refName = schema[REF_KEY];\n        // Use referenced schema defaults for this node.\n        if (!_recurseList.includes(refName)) {\n            updatedRecurseList = _recurseList.concat(refName);\n            schemaToCompute = findSchemaDefinition(refName, rootSchema);\n        }\n    }\n    else if (DEPENDENCIES_KEY in schema) {\n        const resolvedSchema = resolveDependencies(validator, schema, rootSchema, false, [], formData);\n        schemaToCompute = resolvedSchema[0]; // pick the first element from resolve dependencies\n    }\n    else if (isFixedItems(schema)) {\n        defaults = schema.items.map((itemSchema, idx) => computeDefaults(validator, itemSchema, {\n            rootSchema,\n            includeUndefinedValues,\n            _recurseList,\n            experimental_defaultFormStateBehavior,\n            parentDefaults: Array.isArray(parentDefaults) ? parentDefaults[idx] : undefined,\n            rawFormData: formData,\n            required,\n        }));\n    }\n    else if (ONE_OF_KEY in schema) {\n        const { oneOf, ...remaining } = schema;\n        if (oneOf.length === 0) {\n            return undefined;\n        }\n        const discriminator = getDiscriminatorFieldFromSchema(schema);\n        schemaToCompute = oneOf[getClosestMatchingOption(validator, rootSchema, isEmpty(formData) ? undefined : formData, oneOf, 0, discriminator)];\n        schemaToCompute = mergeSchemas(remaining, schemaToCompute);\n    }\n    else if (ANY_OF_KEY in schema) {\n        const { anyOf, ...remaining } = schema;\n        if (anyOf.length === 0) {\n            return undefined;\n        }\n        const discriminator = getDiscriminatorFieldFromSchema(schema);\n        schemaToCompute = anyOf[getClosestMatchingOption(validator, rootSchema, isEmpty(formData) ? undefined : formData, anyOf, 0, discriminator)];\n        schemaToCompute = mergeSchemas(remaining, schemaToCompute);\n    }\n    if (schemaToCompute) {\n        return computeDefaults(validator, schemaToCompute, {\n            rootSchema,\n            includeUndefinedValues,\n            _recurseList: updatedRecurseList,\n            experimental_defaultFormStateBehavior,\n            parentDefaults: defaults,\n            rawFormData: formData,\n            required,\n        });\n    }\n    // No defaults defined for this node, fallback to generic typed ones.\n    if (defaults === undefined) {\n        defaults = schema.default;\n    }\n    switch (getSchemaType(schema)) {\n        // We need to recurse for object schema inner default values.\n        case 'object': {\n            // This is a custom addition that fixes this issue:\n            // https://github.com/rjsf-team/react-jsonschema-form/issues/3832\n            const retrievedSchema = (experimental_defaultFormStateBehavior === null || experimental_defaultFormStateBehavior === void 0 ? void 0 : experimental_defaultFormStateBehavior.allOf) === 'populateDefaults' && ALL_OF_KEY in schema\n                ? retrieveSchema(validator, schema, rootSchema, formData)\n                : schema;\n            const objectDefaults = Object.keys(retrievedSchema.properties || {}).reduce((acc, key) => {\n                var _a;\n                // Compute the defaults for this node, with the parent defaults we might\n                // have from a previous run: defaults[key].\n                const computedDefault = computeDefaults(validator, get(retrievedSchema, [PROPERTIES_KEY, key]), {\n                    rootSchema,\n                    _recurseList,\n                    experimental_defaultFormStateBehavior,\n                    includeUndefinedValues: includeUndefinedValues === true,\n                    parentDefaults: get(defaults, [key]),\n                    rawFormData: get(formData, [key]),\n                    required: (_a = retrievedSchema.required) === null || _a === void 0 ? void 0 : _a.includes(key),\n                });\n                maybeAddDefaultToObject(acc, key, computedDefault, includeUndefinedValues, required, retrievedSchema.required, experimental_defaultFormStateBehavior);\n                return acc;\n            }, {});\n            if (retrievedSchema.additionalProperties) {\n                // as per spec additionalProperties may be either schema or boolean\n                const additionalPropertiesSchema = isObject(retrievedSchema.additionalProperties)\n                    ? retrievedSchema.additionalProperties\n                    : {};\n                const keys = new Set();\n                if (isObject(defaults)) {\n                    Object.keys(defaults)\n                        .filter((key) => !retrievedSchema.properties || !retrievedSchema.properties[key])\n                        .forEach((key) => keys.add(key));\n                }\n                const formDataRequired = [];\n                Object.keys(formData)\n                    .filter((key) => !retrievedSchema.properties || !retrievedSchema.properties[key])\n                    .forEach((key) => {\n                    keys.add(key);\n                    formDataRequired.push(key);\n                });\n                keys.forEach((key) => {\n                    var _a;\n                    const computedDefault = computeDefaults(validator, additionalPropertiesSchema, {\n                        rootSchema,\n                        _recurseList,\n                        experimental_defaultFormStateBehavior,\n                        includeUndefinedValues: includeUndefinedValues === true,\n                        parentDefaults: get(defaults, [key]),\n                        rawFormData: get(formData, [key]),\n                        required: (_a = retrievedSchema.required) === null || _a === void 0 ? void 0 : _a.includes(key),\n                    });\n                    // Since these are additional properties we don't need to add the `experimental_defaultFormStateBehavior` prop\n                    maybeAddDefaultToObject(objectDefaults, key, computedDefault, includeUndefinedValues, required, formDataRequired);\n                });\n            }\n            return objectDefaults;\n        }\n        case 'array': {\n            const neverPopulate = ((_a = experimental_defaultFormStateBehavior === null || experimental_defaultFormStateBehavior === void 0 ? void 0 : experimental_defaultFormStateBehavior.arrayMinItems) === null || _a === void 0 ? void 0 : _a.populate) === 'never';\n            const ignoreMinItemsFlagSet = ((_b = experimental_defaultFormStateBehavior === null || experimental_defaultFormStateBehavior === void 0 ? void 0 : experimental_defaultFormStateBehavior.arrayMinItems) === null || _b === void 0 ? void 0 : _b.populate) === 'requiredOnly';\n            const isSkipEmptyDefaults = (experimental_defaultFormStateBehavior === null || experimental_defaultFormStateBehavior === void 0 ? void 0 : experimental_defaultFormStateBehavior.emptyObjectFields) === 'skipEmptyDefaults';\n            const computeSkipPopulate = (_d = (_c = experimental_defaultFormStateBehavior === null || experimental_defaultFormStateBehavior === void 0 ? void 0 : experimental_defaultFormStateBehavior.arrayMinItems) === null || _c === void 0 ? void 0 : _c.computeSkipPopulate) !== null && _d !== void 0 ? _d : (() => false);\n            const emptyDefault = isSkipEmptyDefaults ? undefined : [];\n            // Inject defaults into existing array defaults\n            if (Array.isArray(defaults)) {\n                defaults = defaults.map((item, idx) => {\n                    const schemaItem = getInnerSchemaForArrayItem(schema, AdditionalItemsHandling.Fallback, idx);\n                    return computeDefaults(validator, schemaItem, {\n                        rootSchema,\n                        _recurseList,\n                        experimental_defaultFormStateBehavior,\n                        parentDefaults: item,\n                        required,\n                    });\n                });\n            }\n            // Deeply inject defaults into already existing form data\n            if (Array.isArray(rawFormData)) {\n                const schemaItem = getInnerSchemaForArrayItem(schema);\n                if (neverPopulate) {\n                    defaults = rawFormData;\n                }\n                else {\n                    defaults = rawFormData.map((item, idx) => {\n                        return computeDefaults(validator, schemaItem, {\n                            rootSchema,\n                            _recurseList,\n                            experimental_defaultFormStateBehavior,\n                            rawFormData: item,\n                            parentDefaults: get(defaults, [idx]),\n                            required,\n                        });\n                    });\n                }\n            }\n            if (neverPopulate) {\n                return defaults !== null && defaults !== void 0 ? defaults : emptyDefault;\n            }\n            if (ignoreMinItemsFlagSet && !required) {\n                // If no form data exists or defaults are set leave the field empty/non-existent, otherwise\n                // return form data/defaults\n                return defaults ? defaults : undefined;\n            }\n            const defaultsLength = Array.isArray(defaults) ? defaults.length : 0;\n            if (!schema.minItems ||\n                isMultiSelect(validator, schema, rootSchema) ||\n                computeSkipPopulate(validator, schema, rootSchema) ||\n                schema.minItems <= defaultsLength) {\n                return defaults ? defaults : emptyDefault;\n            }\n            const defaultEntries = (defaults || []);\n            const fillerSchema = getInnerSchemaForArrayItem(schema, AdditionalItemsHandling.Invert);\n            const fillerDefault = fillerSchema.default;\n            // Calculate filler entries for remaining items (minItems - existing raw data/defaults)\n            const fillerEntries = new Array(schema.minItems - defaultsLength).fill(computeDefaults(validator, fillerSchema, {\n                parentDefaults: fillerDefault,\n                rootSchema,\n                _recurseList,\n                experimental_defaultFormStateBehavior,\n                required,\n            }));\n            // then fill up the rest with either the item default or empty, up to minItems\n            return defaultEntries.concat(fillerEntries);\n        }\n    }\n    return defaults;\n}\n/** Returns the superset of `formData` that includes the given set updated to include any missing fields that have\n * computed to have defaults provided in the `schema`.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param theSchema - The schema for which the default state is desired\n * @param [formData] - The current formData, if any, onto which to provide any missing defaults\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [includeUndefinedValues=false] - Optional flag, if true, cause undefined values to be added as defaults.\n *          If \"excludeObjectChildren\", cause undefined values for this object and pass `includeUndefinedValues` as\n *          false when computing defaults for any nested object properties.\n * @param [experimental_defaultFormStateBehavior] Optional configuration object, if provided, allows users to override default form state behavior\n * @returns - The resulting `formData` with all the defaults provided\n */\nexport default function getDefaultFormState(validator, theSchema, formData, rootSchema, includeUndefinedValues = false, experimental_defaultFormStateBehavior) {\n    if (!isObject(theSchema)) {\n        throw new Error('Invalid schema: ' + theSchema);\n    }\n    const schema = retrieveSchema(validator, theSchema, rootSchema, formData);\n    const defaults = computeDefaults(validator, schema, {\n        rootSchema,\n        includeUndefinedValues,\n        experimental_defaultFormStateBehavior,\n        rawFormData: formData,\n    });\n    if (formData === undefined || formData === null || (typeof formData === 'number' && isNaN(formData))) {\n        // No form data? Use schema defaults.\n        return defaults;\n    }\n    const { mergeExtraDefaults } = (experimental_defaultFormStateBehavior === null || experimental_defaultFormStateBehavior === void 0 ? void 0 : experimental_defaultFormStateBehavior.arrayMinItems) || {};\n    if (isObject(formData)) {\n        return mergeDefaultsWithFormData(defaults, formData, mergeExtraDefaults);\n    }\n    if (Array.isArray(formData)) {\n        return mergeDefaultsWithFormData(defaults, formData, mergeExtraDefaults);\n    }\n    return formData;\n}\n//# sourceMappingURL=getDefaultFormState.js.map","import getUiOptions from './getUiOptions';\n/** Checks to see if the `uiSchema` contains the `widget` field and that the widget is not `hidden`\n *\n * @param uiSchema - The UI Schema from which to detect if it is customized\n * @returns - True if the `uiSchema` describes a custom widget, false otherwise\n */\nexport default function isCustomWidget(uiSchema = {}) {\n    return (\n    // TODO: Remove the `&& uiSchema['ui:widget'] !== 'hidden'` once we support hidden widgets for arrays.\n    // https://rjsf-team.github.io/react-jsonschema-form/docs/usage/widgets/#hidden-widgets\n    'widget' in getUiOptions(uiSchema) && getUiOptions(uiSchema)['widget'] !== 'hidden');\n}\n//# sourceMappingURL=isCustomWidget.js.map","import { UI_WIDGET_KEY } from '../constants';\nimport retrieveSchema from './retrieveSchema';\n/** Checks to see if the `schema` and `uiSchema` combination represents an array of files\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which check for array of files flag is desired\n * @param [uiSchema={}] - The UI schema from which to check the widget\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @returns - True if schema/uiSchema contains an array of files, otherwise false\n */\nexport default function isFilesArray(validator, schema, uiSchema = {}, rootSchema) {\n    if (uiSchema[UI_WIDGET_KEY] === 'files') {\n        return true;\n    }\n    if (schema.items) {\n        const itemsSchema = retrieveSchema(validator, schema.items, rootSchema);\n        return itemsSchema.type === 'string' && itemsSchema.format === 'data-url';\n    }\n    return false;\n}\n//# sourceMappingURL=isFilesArray.js.map","import { UI_FIELD_KEY, UI_WIDGET_KEY } from '../constants';\nimport getSchemaType from '../getSchemaType';\nimport getUiOptions from '../getUiOptions';\nimport isCustomWidget from '../isCustomWidget';\nimport isFilesArray from './isFilesArray';\nimport isMultiSelect from './isMultiSelect';\n/** Determines whether the combination of `schema` and `uiSchema` properties indicates that the label for the `schema`\n * should be displayed in a UI.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which the display label flag is desired\n * @param [uiSchema={}] - The UI schema from which to derive potentially displayable information\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [globalOptions={}] - The optional Global UI Schema from which to get any fallback `xxx` options\n * @returns - True if the label should be displayed or false if it should not\n */\nexport default function getDisplayLabel(validator, schema, uiSchema = {}, rootSchema, globalOptions) {\n    const uiOptions = getUiOptions(uiSchema, globalOptions);\n    const { label = true } = uiOptions;\n    let displayLabel = !!label;\n    const schemaType = getSchemaType(schema);\n    if (schemaType === 'array') {\n        displayLabel =\n            isMultiSelect(validator, schema, rootSchema) ||\n                isFilesArray(validator, schema, uiSchema, rootSchema) ||\n                isCustomWidget(uiSchema);\n    }\n    if (schemaType === 'object') {\n        displayLabel = false;\n    }\n    if (schemaType === 'boolean' && !uiSchema[UI_WIDGET_KEY]) {\n        displayLabel = false;\n    }\n    if (uiSchema[UI_FIELD_KEY]) {\n        displayLabel = false;\n    }\n    return displayLabel;\n}\n//# sourceMappingURL=getDisplayLabel.js.map","import isEmpty from 'lodash/isEmpty';\nimport mergeObjects from '../mergeObjects';\n/** Merges the errors in `additionalErrorSchema` into the existing `validationData` by combining the hierarchies in the\n * two `ErrorSchema`s and then appending the error list from the `additionalErrorSchema` obtained by calling\n * `validator.toErrorList()` onto the `errors` in the `validationData`. If no `additionalErrorSchema` is passed, then\n * `validationData` is returned.\n *\n * @param validator - The validator used to convert an ErrorSchema to a list of errors\n * @param validationData - The current `ValidationData` into which to merge the additional errors\n * @param [additionalErrorSchema] - The additional set of errors in an `ErrorSchema`\n * @returns - The `validationData` with the additional errors from `additionalErrorSchema` merged into it, if provided.\n * @deprecated - Use the `validationDataMerge()` function exported from `@rjsf/utils` instead. This function will be\n *        removed in the next major release.\n */\nexport default function mergeValidationData(validator, validationData, additionalErrorSchema) {\n    if (!additionalErrorSchema) {\n        return validationData;\n    }\n    const { errors: oldErrors, errorSchema: oldErrorSchema } = validationData;\n    let errors = validator.toErrorList(additionalErrorSchema);\n    let errorSchema = additionalErrorSchema;\n    if (!isEmpty(oldErrorSchema)) {\n        errorSchema = mergeObjects(oldErrorSchema, additionalErrorSchema, true);\n        errors = [...oldErrors].concat(errors);\n    }\n    return { errorSchema, errors };\n}\n//# sourceMappingURL=mergeValidationData.js.map","import get from 'lodash/get';\nimport has from 'lodash/has';\nimport { PROPERTIES_KEY, REF_KEY } from '../constants';\nimport retrieveSchema from './retrieveSchema';\nconst NO_VALUE = Symbol('no Value');\n/** Sanitize the `data` associated with the `oldSchema` so it is considered appropriate for the `newSchema`. If the new\n * schema does not contain any properties, then `undefined` is returned to clear all the form data. Due to the nature\n * of schemas, this sanitization happens recursively for nested objects of data. Also, any properties in the old schema\n * that are non-existent in the new schema are set to `undefined`. The data sanitization process has the following flow:\n *\n * - If the new schema is an object that contains a `properties` object then:\n *   - Create a `removeOldSchemaData` object, setting each key in the `oldSchema.properties` having `data` to undefined\n *   - Create an empty `nestedData` object for use in the key filtering below:\n *   - Iterate over each key in the `newSchema.properties` as follows:\n *     - Get the `formValue` of the key from the `data`\n *     - Get the `oldKeySchema` and `newKeyedSchema` for the key, defaulting to `{}` when it doesn't exist\n *     - Retrieve the schema for any refs within each `oldKeySchema` and/or `newKeySchema`\n *     - Get the types of the old and new keyed schemas and if the old doesn't exist or the old & new are the same then:\n *       - If `removeOldSchemaData` has an entry for the key, delete it since the new schema has the same property\n *       - If type of the key in the new schema is `object`:\n *         - Store the value from the recursive `sanitizeDataForNewSchema` call in `nestedData[key]`\n *       - Otherwise, check for default or const values:\n *         - Get the old and new `default` values from the schema and check:\n *           - If the new `default` value does not match the form value:\n *             - If the old `default` value DOES match the form value, then:\n *               - Replace `removeOldSchemaData[key]` with the new `default`\n *               - Otherwise, if the new schema is `readOnly` then replace `removeOldSchemaData[key]` with undefined\n *         - Get the old and new `const` values from the schema and check:\n *           - If the new `const` value does not match the form value:\n *           - If the old `const` value DOES match the form value, then:\n *             - Replace `removeOldSchemaData[key]` with the new `const`\n *             - Otherwise, replace `removeOldSchemaData[key]` with undefined\n *   - Once all keys have been processed, return an object built as follows:\n *     - `{ ...removeOldSchemaData, ...nestedData, ...pick(data, keysToKeep) }`\n * - If the new and old schema types are array and the `data` is an array then:\n *   - If the type of the old and new schema `items` are a non-array objects:\n *     - Retrieve the schema for any refs within each `oldKeySchema.items` and/or `newKeySchema.items`\n *     - If the `type`s of both items are the same (or the old does not have a type):\n *       - If the type is \"object\", then:\n *         - For each element in the `data` recursively sanitize the data, stopping at `maxItems` if specified\n *       - Otherwise, just return the `data` removing any values after `maxItems` if it is set\n *   - If the type of the old and new schema `items` are booleans of the same value, return `data` as is\n * - Otherwise return `undefined`\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param rootSchema - The root JSON schema of the entire form\n * @param [newSchema] - The new schema for which the data is being sanitized\n * @param [oldSchema] - The old schema from which the data originated\n * @param [data={}] - The form data associated with the schema, defaulting to an empty object when undefined\n * @returns - The new form data, with all the fields uniquely associated with the old schema set\n *      to `undefined`. Will return `undefined` if the new schema is not an object containing properties.\n */\nexport default function sanitizeDataForNewSchema(validator, rootSchema, newSchema, oldSchema, data = {}) {\n    // By default, we will clear the form data\n    let newFormData;\n    // If the new schema is of type object and that object contains a list of properties\n    if (has(newSchema, PROPERTIES_KEY)) {\n        // Create an object containing root-level keys in the old schema, setting each key to undefined to remove the data\n        const removeOldSchemaData = {};\n        if (has(oldSchema, PROPERTIES_KEY)) {\n            const properties = get(oldSchema, PROPERTIES_KEY, {});\n            Object.keys(properties).forEach((key) => {\n                if (has(data, key)) {\n                    removeOldSchemaData[key] = undefined;\n                }\n            });\n        }\n        const keys = Object.keys(get(newSchema, PROPERTIES_KEY, {}));\n        // Create a place to store nested data that will be a side-effect of the filter\n        const nestedData = {};\n        keys.forEach((key) => {\n            const formValue = get(data, key);\n            let oldKeyedSchema = get(oldSchema, [PROPERTIES_KEY, key], {});\n            let newKeyedSchema = get(newSchema, [PROPERTIES_KEY, key], {});\n            // Resolve the refs if they exist\n            if (has(oldKeyedSchema, REF_KEY)) {\n                oldKeyedSchema = retrieveSchema(validator, oldKeyedSchema, rootSchema, formValue);\n            }\n            if (has(newKeyedSchema, REF_KEY)) {\n                newKeyedSchema = retrieveSchema(validator, newKeyedSchema, rootSchema, formValue);\n            }\n            // Now get types and see if they are the same\n            const oldSchemaTypeForKey = get(oldKeyedSchema, 'type');\n            const newSchemaTypeForKey = get(newKeyedSchema, 'type');\n            // Check if the old option has the same key with the same type\n            if (!oldSchemaTypeForKey || oldSchemaTypeForKey === newSchemaTypeForKey) {\n                if (has(removeOldSchemaData, key)) {\n                    // SIDE-EFFECT: remove the undefined value for a key that has the same type between the old and new schemas\n                    delete removeOldSchemaData[key];\n                }\n                // If it is an object, we'll recurse and store the resulting sanitized data for the key\n                if (newSchemaTypeForKey === 'object' || (newSchemaTypeForKey === 'array' && Array.isArray(formValue))) {\n                    // SIDE-EFFECT: process the new schema type of object recursively to save iterations\n                    const itemData = sanitizeDataForNewSchema(validator, rootSchema, newKeyedSchema, oldKeyedSchema, formValue);\n                    if (itemData !== undefined || newSchemaTypeForKey === 'array') {\n                        // only put undefined values for the array type and not the object type\n                        nestedData[key] = itemData;\n                    }\n                }\n                else {\n                    // Ok, the non-object types match, let's make sure that a default or a const of a different value is replaced\n                    // with the new default or const. This allows the case where two schemas differ that only by the default/const\n                    // value to be properly selected\n                    const newOptionDefault = get(newKeyedSchema, 'default', NO_VALUE);\n                    const oldOptionDefault = get(oldKeyedSchema, 'default', NO_VALUE);\n                    if (newOptionDefault !== NO_VALUE && newOptionDefault !== formValue) {\n                        if (oldOptionDefault === formValue) {\n                            // If the old default matches the formValue, we'll update the new value to match the new default\n                            removeOldSchemaData[key] = newOptionDefault;\n                        }\n                        else if (get(newKeyedSchema, 'readOnly') === true) {\n                            // If the new schema has the default set to read-only, treat it like a const and remove the value\n                            removeOldSchemaData[key] = undefined;\n                        }\n                    }\n                    const newOptionConst = get(newKeyedSchema, 'const', NO_VALUE);\n                    const oldOptionConst = get(oldKeyedSchema, 'const', NO_VALUE);\n                    if (newOptionConst !== NO_VALUE && newOptionConst !== formValue) {\n                        // Since this is a const, if the old value matches, replace the value with the new const otherwise clear it\n                        removeOldSchemaData[key] = oldOptionConst === formValue ? newOptionConst : undefined;\n                    }\n                }\n            }\n        });\n        newFormData = {\n            ...(typeof data == 'string' || Array.isArray(data) ? undefined : data),\n            ...removeOldSchemaData,\n            ...nestedData,\n        };\n        // First apply removing the old schema data, then apply the nested data, then apply the old data keys to keep\n    }\n    else if (get(oldSchema, 'type') === 'array' && get(newSchema, 'type') === 'array' && Array.isArray(data)) {\n        let oldSchemaItems = get(oldSchema, 'items');\n        let newSchemaItems = get(newSchema, 'items');\n        // If any of the array types `items` are arrays (remember arrays are objects) then we'll just drop the data\n        // Eventually, we may want to deal with when either of the `items` are arrays since those tuple validations\n        if (typeof oldSchemaItems === 'object' &&\n            typeof newSchemaItems === 'object' &&\n            !Array.isArray(oldSchemaItems) &&\n            !Array.isArray(newSchemaItems)) {\n            if (has(oldSchemaItems, REF_KEY)) {\n                oldSchemaItems = retrieveSchema(validator, oldSchemaItems, rootSchema, data);\n            }\n            if (has(newSchemaItems, REF_KEY)) {\n                newSchemaItems = retrieveSchema(validator, newSchemaItems, rootSchema, data);\n            }\n            // Now get types and see if they are the same\n            const oldSchemaType = get(oldSchemaItems, 'type');\n            const newSchemaType = get(newSchemaItems, 'type');\n            // Check if the old option has the same key with the same type\n            if (!oldSchemaType || oldSchemaType === newSchemaType) {\n                const maxItems = get(newSchema, 'maxItems', -1);\n                if (newSchemaType === 'object') {\n                    newFormData = data.reduce((newValue, aValue) => {\n                        const itemValue = sanitizeDataForNewSchema(validator, rootSchema, newSchemaItems, oldSchemaItems, aValue);\n                        if (itemValue !== undefined && (maxItems < 0 || newValue.length < maxItems)) {\n                            newValue.push(itemValue);\n                        }\n                        return newValue;\n                    }, []);\n                }\n                else {\n                    newFormData = maxItems > 0 && data.length > maxItems ? data.slice(0, maxItems) : data;\n                }\n            }\n        }\n        else if (typeof oldSchemaItems === 'boolean' &&\n            typeof newSchemaItems === 'boolean' &&\n            oldSchemaItems === newSchemaItems) {\n            // If they are both booleans and have the same value just return the data as is otherwise fall-thru to undefined\n            newFormData = data;\n        }\n        // Also probably want to deal with `prefixItems` as tuples with the latest 2020 draft\n    }\n    return newFormData;\n}\n//# sourceMappingURL=sanitizeDataForNewSchema.js.map","import get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport { ALL_OF_KEY, DEPENDENCIES_KEY, ID_KEY, ITEMS_KEY, PROPERTIES_KEY, REF_KEY } from '../constants';\nimport isObject from '../isObject';\nimport retrieveSchema from './retrieveSchema';\nimport getSchemaType from '../getSchemaType';\n/** An internal helper that generates an `IdSchema` object for the `schema`, recursively with protection against\n * infinite recursion\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which the `IdSchema` is desired\n * @param idPrefix - The prefix to use for the id\n * @param idSeparator - The separator to use for the path segments in the id\n * @param [id] - The base id for the schema\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @param [_recurseList=[]] - The list of retrieved schemas currently being recursed, used to prevent infinite recursion\n * @returns - The `IdSchema` object for the `schema`\n */\nfunction toIdSchemaInternal(validator, schema, idPrefix, idSeparator, id, rootSchema, formData, _recurseList = []) {\n    if (REF_KEY in schema || DEPENDENCIES_KEY in schema || ALL_OF_KEY in schema) {\n        const _schema = retrieveSchema(validator, schema, rootSchema, formData);\n        const sameSchemaIndex = _recurseList.findIndex((item) => isEqual(item, _schema));\n        if (sameSchemaIndex === -1) {\n            return toIdSchemaInternal(validator, _schema, idPrefix, idSeparator, id, rootSchema, formData, _recurseList.concat(_schema));\n        }\n    }\n    if (ITEMS_KEY in schema && !get(schema, [ITEMS_KEY, REF_KEY])) {\n        return toIdSchemaInternal(validator, get(schema, ITEMS_KEY), idPrefix, idSeparator, id, rootSchema, formData, _recurseList);\n    }\n    const $id = id || idPrefix;\n    const idSchema = { $id };\n    if (getSchemaType(schema) === 'object' && PROPERTIES_KEY in schema) {\n        for (const name in schema.properties) {\n            const field = get(schema, [PROPERTIES_KEY, name]);\n            const fieldId = idSchema[ID_KEY] + idSeparator + name;\n            idSchema[name] = toIdSchemaInternal(validator, isObject(field) ? field : {}, idPrefix, idSeparator, fieldId, rootSchema, \n            // It's possible that formData is not an object -- this can happen if an\n            // array item has just been added, but not populated with data yet\n            get(formData, [name]), _recurseList);\n        }\n    }\n    return idSchema;\n}\n/** Generates an `IdSchema` object for the `schema`, recursively\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which the `IdSchema` is desired\n * @param [id] - The base id for the schema\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @param [idPrefix='root'] - The prefix to use for the id\n * @param [idSeparator='_'] - The separator to use for the path segments in the id\n * @returns - The `IdSchema` object for the `schema`\n */\nexport default function toIdSchema(validator, schema, id, rootSchema, formData, idPrefix = 'root', idSeparator = '_') {\n    return toIdSchemaInternal(validator, schema, idPrefix, idSeparator, id, rootSchema, formData);\n}\n//# sourceMappingURL=toIdSchema.js.map","import get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport set from 'lodash/set';\nimport { ALL_OF_KEY, ANY_OF_KEY, ADDITIONAL_PROPERTIES_KEY, DEPENDENCIES_KEY, ITEMS_KEY, NAME_KEY, ONE_OF_KEY, PROPERTIES_KEY, REF_KEY, RJSF_ADDITIONAL_PROPERTIES_FLAG, } from '../constants';\nimport getDiscriminatorFieldFromSchema from '../getDiscriminatorFieldFromSchema';\nimport getClosestMatchingOption from './getClosestMatchingOption';\nimport retrieveSchema from './retrieveSchema';\n/** An internal helper that generates an `PathSchema` object for the `schema`, recursively with protection against\n * infinite recursion\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which the `PathSchema` is desired\n * @param [name=''] - The base name for the schema\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @param [_recurseList=[]] - The list of retrieved schemas currently being recursed, used to prevent infinite recursion\n * @returns - The `PathSchema` object for the `schema`\n */\nfunction toPathSchemaInternal(validator, schema, name, rootSchema, formData, _recurseList = []) {\n    if (REF_KEY in schema || DEPENDENCIES_KEY in schema || ALL_OF_KEY in schema) {\n        const _schema = retrieveSchema(validator, schema, rootSchema, formData);\n        const sameSchemaIndex = _recurseList.findIndex((item) => isEqual(item, _schema));\n        if (sameSchemaIndex === -1) {\n            return toPathSchemaInternal(validator, _schema, name, rootSchema, formData, _recurseList.concat(_schema));\n        }\n    }\n    let pathSchema = {\n        [NAME_KEY]: name.replace(/^\\./, ''),\n    };\n    if (ONE_OF_KEY in schema || ANY_OF_KEY in schema) {\n        const xxxOf = ONE_OF_KEY in schema ? schema.oneOf : schema.anyOf;\n        const discriminator = getDiscriminatorFieldFromSchema(schema);\n        const index = getClosestMatchingOption(validator, rootSchema, formData, xxxOf, 0, discriminator);\n        const _schema = xxxOf[index];\n        pathSchema = {\n            ...pathSchema,\n            ...toPathSchemaInternal(validator, _schema, name, rootSchema, formData, _recurseList),\n        };\n    }\n    if (ADDITIONAL_PROPERTIES_KEY in schema && schema[ADDITIONAL_PROPERTIES_KEY] !== false) {\n        set(pathSchema, RJSF_ADDITIONAL_PROPERTIES_FLAG, true);\n    }\n    if (ITEMS_KEY in schema && Array.isArray(formData)) {\n        const { items: schemaItems, additionalItems: schemaAdditionalItems } = schema;\n        if (Array.isArray(schemaItems)) {\n            formData.forEach((element, i) => {\n                if (schemaItems[i]) {\n                    pathSchema[i] = toPathSchemaInternal(validator, schemaItems[i], `${name}.${i}`, rootSchema, element, _recurseList);\n                }\n                else if (schemaAdditionalItems) {\n                    pathSchema[i] = toPathSchemaInternal(validator, schemaAdditionalItems, `${name}.${i}`, rootSchema, element, _recurseList);\n                }\n                else {\n                    console.warn(`Unable to generate path schema for \"${name}.${i}\". No schema defined for it`);\n                }\n            });\n        }\n        else {\n            formData.forEach((element, i) => {\n                pathSchema[i] = toPathSchemaInternal(validator, schemaItems, `${name}.${i}`, rootSchema, element, _recurseList);\n            });\n        }\n    }\n    else if (PROPERTIES_KEY in schema) {\n        for (const property in schema.properties) {\n            const field = get(schema, [PROPERTIES_KEY, property]);\n            pathSchema[property] = toPathSchemaInternal(validator, field, `${name}.${property}`, rootSchema, \n            // It's possible that formData is not an object -- this can happen if an\n            // array item has just been added, but not populated with data yet\n            get(formData, [property]), _recurseList);\n        }\n    }\n    return pathSchema;\n}\n/** Generates an `PathSchema` object for the `schema`, recursively\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which the `PathSchema` is desired\n * @param [name=''] - The base name for the schema\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @returns - The `PathSchema` object for the `schema`\n */\nexport default function toPathSchema(validator, schema, name = '', rootSchema, formData) {\n    return toPathSchemaInternal(validator, schema, name, rootSchema, formData);\n}\n//# sourceMappingURL=toPathSchema.js.map","import deepEquals from './deepEquals';\nimport { getDefaultFormState, getDisplayLabel, getClosestMatchingOption, getFirstMatchingOption, getMatchingOption, isFilesArray, isMultiSelect, isSelect, mergeValidationData, retrieveSchema, sanitizeDataForNewSchema, toIdSchema, toPathSchema, } from './schema';\n/** The `SchemaUtils` class provides a wrapper around the publicly exported APIs in the `utils/schema` directory such\n * that one does not have to explicitly pass the `validator`, `rootSchema`, or `experimental_defaultFormStateBehavior` to each method.\n * Since these generally do not change across a `Form`, this allows for providing a simplified set of APIs to the\n * `@rjsf/core` components and the various themes as well. This class implements the `SchemaUtilsType` interface.\n */\nclass SchemaUtils {\n    /** Constructs the `SchemaUtils` instance with the given `validator` and `rootSchema` stored as instance variables\n     *\n     * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n     * @param rootSchema - The root schema that will be forwarded to all the APIs\n     * @param experimental_defaultFormStateBehavior - Configuration flags to allow users to override default form state behavior\n     */\n    constructor(validator, rootSchema, experimental_defaultFormStateBehavior) {\n        this.rootSchema = rootSchema;\n        this.validator = validator;\n        this.experimental_defaultFormStateBehavior = experimental_defaultFormStateBehavior;\n    }\n    /** Returns the `ValidatorType` in the `SchemaUtilsType`\n     *\n     * @returns - The `ValidatorType`\n     */\n    getValidator() {\n        return this.validator;\n    }\n    /** Determines whether either the `validator` and `rootSchema` differ from the ones associated with this instance of\n     * the `SchemaUtilsType`. If either `validator` or `rootSchema` are falsy, then return false to prevent the creation\n     * of a new `SchemaUtilsType` with incomplete properties.\n     *\n     * @param validator - An implementation of the `ValidatorType` interface that will be compared against the current one\n     * @param rootSchema - The root schema that will be compared against the current one\n     * @param [experimental_defaultFormStateBehavior] Optional configuration object, if provided, allows users to override default form state behavior\n     * @returns - True if the `SchemaUtilsType` differs from the given `validator` or `rootSchema`\n     */\n    doesSchemaUtilsDiffer(validator, rootSchema, experimental_defaultFormStateBehavior = {}) {\n        if (!validator || !rootSchema) {\n            return false;\n        }\n        return (this.validator !== validator ||\n            !deepEquals(this.rootSchema, rootSchema) ||\n            !deepEquals(this.experimental_defaultFormStateBehavior, experimental_defaultFormStateBehavior));\n    }\n    /** Returns the superset of `formData` that includes the given set updated to include any missing fields that have\n     * computed to have defaults provided in the `schema`.\n     *\n     * @param schema - The schema for which the default state is desired\n     * @param [formData] - The current formData, if any, onto which to provide any missing defaults\n     * @param [includeUndefinedValues=false] - Optional flag, if true, cause undefined values to be added as defaults.\n     *          If \"excludeObjectChildren\", pass `includeUndefinedValues` as false when computing defaults for any nested\n     *          object properties.\n     * @returns - The resulting `formData` with all the defaults provided\n     */\n    getDefaultFormState(schema, formData, includeUndefinedValues = false) {\n        return getDefaultFormState(this.validator, schema, formData, this.rootSchema, includeUndefinedValues, this.experimental_defaultFormStateBehavior);\n    }\n    /** Determines whether the combination of `schema` and `uiSchema` properties indicates that the label for the `schema`\n     * should be displayed in a UI.\n     *\n     * @param schema - The schema for which the display label flag is desired\n     * @param [uiSchema] - The UI schema from which to derive potentially displayable information\n     * @param [globalOptions={}] - The optional Global UI Schema from which to get any fallback `xxx` options\n     * @returns - True if the label should be displayed or false if it should not\n     */\n    getDisplayLabel(schema, uiSchema, globalOptions) {\n        return getDisplayLabel(this.validator, schema, uiSchema, this.rootSchema, globalOptions);\n    }\n    /** Determines which of the given `options` provided most closely matches the `formData`.\n     * Returns the index of the option that is valid and is the closest match, or 0 if there is no match.\n     *\n     * The closest match is determined using the number of matching properties, and more heavily favors options with\n     * matching readOnly, default, or const values.\n     *\n     * @param formData - The form data associated with the schema\n     * @param options - The list of options that can be selected from\n     * @param [selectedOption] - The index of the currently selected option, defaulted to -1 if not specified\n     * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n     *          determine which option is selected\n     * @returns - The index of the option that is the closest match to the `formData` or the `selectedOption` if no match\n     */\n    getClosestMatchingOption(formData, options, selectedOption, discriminatorField) {\n        return getClosestMatchingOption(this.validator, this.rootSchema, formData, options, selectedOption, discriminatorField);\n    }\n    /** Given the `formData` and list of `options`, attempts to find the index of the first option that matches the data.\n     * Always returns the first option if there is nothing that matches.\n     *\n     * @param formData - The current formData, if any, used to figure out a match\n     * @param options - The list of options to find a matching options from\n     * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n     *          determine which option is selected\n     * @returns - The firstindex of the matched option or 0 if none is available\n     */\n    getFirstMatchingOption(formData, options, discriminatorField) {\n        return getFirstMatchingOption(this.validator, formData, options, this.rootSchema, discriminatorField);\n    }\n    /** Given the `formData` and list of `options`, attempts to find the index of the option that best matches the data.\n     * Deprecated, use `getFirstMatchingOption()` instead.\n     *\n     * @param formData - The current formData, if any, onto which to provide any missing defaults\n     * @param options - The list of options to find a matching options from\n     * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n     *          determine which option is selected\n     * @returns - The index of the matched option or 0 if none is available\n     * @deprecated\n     */\n    getMatchingOption(formData, options, discriminatorField) {\n        return getMatchingOption(this.validator, formData, options, this.rootSchema, discriminatorField);\n    }\n    /** Checks to see if the `schema` and `uiSchema` combination represents an array of files\n     *\n     * @param schema - The schema for which check for array of files flag is desired\n     * @param [uiSchema] - The UI schema from which to check the widget\n     * @returns - True if schema/uiSchema contains an array of files, otherwise false\n     */\n    isFilesArray(schema, uiSchema) {\n        return isFilesArray(this.validator, schema, uiSchema, this.rootSchema);\n    }\n    /** Checks to see if the `schema` combination represents a multi-select\n     *\n     * @param schema - The schema for which check for a multi-select flag is desired\n     * @returns - True if schema contains a multi-select, otherwise false\n     */\n    isMultiSelect(schema) {\n        return isMultiSelect(this.validator, schema, this.rootSchema);\n    }\n    /** Checks to see if the `schema` combination represents a select\n     *\n     * @param schema - The schema for which check for a select flag is desired\n     * @returns - True if schema contains a select, otherwise false\n     */\n    isSelect(schema) {\n        return isSelect(this.validator, schema, this.rootSchema);\n    }\n    /** Merges the errors in `additionalErrorSchema` into the existing `validationData` by combining the hierarchies in\n     * the two `ErrorSchema`s and then appending the error list from the `additionalErrorSchema` obtained by calling\n     * `getValidator().toErrorList()` onto the `errors` in the `validationData`. If no `additionalErrorSchema` is passed,\n     * then `validationData` is returned.\n     *\n     * @param validationData - The current `ValidationData` into which to merge the additional errors\n     * @param [additionalErrorSchema] - The additional set of errors\n     * @returns - The `validationData` with the additional errors from `additionalErrorSchema` merged into it, if provided.\n     * @deprecated - Use the `validationDataMerge()` function exported from `@rjsf/utils` instead. This function will be\n     *        removed in the next major release.\n     */\n    mergeValidationData(validationData, additionalErrorSchema) {\n        return mergeValidationData(this.validator, validationData, additionalErrorSchema);\n    }\n    /** Retrieves an expanded schema that has had all of its conditions, additional properties, references and\n     * dependencies resolved and merged into the `schema` given a `rawFormData` that is used to do the potentially\n     * recursive resolution.\n     *\n     * @param schema - The schema for which retrieving a schema is desired\n     * @param [rawFormData] - The current formData, if any, to assist retrieving a schema\n     * @returns - The schema having its conditions, additional properties, references and dependencies resolved\n     */\n    retrieveSchema(schema, rawFormData) {\n        return retrieveSchema(this.validator, schema, this.rootSchema, rawFormData);\n    }\n    /** Sanitize the `data` associated with the `oldSchema` so it is considered appropriate for the `newSchema`. If the\n     * new schema does not contain any properties, then `undefined` is returned to clear all the form data. Due to the\n     * nature of schemas, this sanitization happens recursively for nested objects of data. Also, any properties in the\n     * old schemas that are non-existent in the new schema are set to `undefined`.\n     *\n     * @param [newSchema] - The new schema for which the data is being sanitized\n     * @param [oldSchema] - The old schema from which the data originated\n     * @param [data={}] - The form data associated with the schema, defaulting to an empty object when undefined\n     * @returns - The new form data, with all the fields uniquely associated with the old schema set\n     *      to `undefined`. Will return `undefined` if the new schema is not an object containing properties.\n     */\n    sanitizeDataForNewSchema(newSchema, oldSchema, data) {\n        return sanitizeDataForNewSchema(this.validator, this.rootSchema, newSchema, oldSchema, data);\n    }\n    /** Generates an `IdSchema` object for the `schema`, recursively\n     *\n     * @param schema - The schema for which the display label flag is desired\n     * @param [id] - The base id for the schema\n     * @param [formData] - The current formData, if any, onto which to provide any missing defaults\n     * @param [idPrefix='root'] - The prefix to use for the id\n     * @param [idSeparator='_'] - The separator to use for the path segments in the id\n     * @returns - The `IdSchema` object for the `schema`\n     */\n    toIdSchema(schema, id, formData, idPrefix = 'root', idSeparator = '_') {\n        return toIdSchema(this.validator, schema, id, this.rootSchema, formData, idPrefix, idSeparator);\n    }\n    /** Generates an `PathSchema` object for the `schema`, recursively\n     *\n     * @param schema - The schema for which the display label flag is desired\n     * @param [name] - The base name for the schema\n     * @param [formData] - The current formData, if any, onto which to provide any missing defaults\n     * @returns - The `PathSchema` object for the `schema`\n     */\n    toPathSchema(schema, name, formData) {\n        return toPathSchema(this.validator, schema, name, this.rootSchema, formData);\n    }\n}\n/** Creates a `SchemaUtilsType` interface that is based around the given `validator` and `rootSchema` parameters. The\n * resulting interface implementation will forward the `validator` and `rootSchema` to all the wrapped APIs.\n *\n * @param validator - an implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param [experimental_defaultFormStateBehavior] Optional configuration object, if provided, allows users to override default form state behavior\n * @returns - An implementation of a `SchemaUtilsType` interface\n */\nexport default function createSchemaUtils(validator, rootSchema, experimental_defaultFormStateBehavior = {}) {\n    return new SchemaUtils(validator, rootSchema, experimental_defaultFormStateBehavior);\n}\n//# sourceMappingURL=createSchemaUtils.js.map","/** Given the `FileReader.readAsDataURL()` based `dataURI` extracts that data into an actual Blob along with the name\n * of that Blob if provided in the URL. If no name is provided, then the name falls back to `unknown`.\n *\n * @param dataURI - The `DataUrl` potentially containing name and raw data to be converted to a Blob\n * @returns - an object containing a Blob and its name, extracted from the URI\n */\nexport default function dataURItoBlob(dataURILike) {\n    var _a;\n    // check if is dataURI\n    if (dataURILike.indexOf('data:') === -1) {\n        throw new Error('File is invalid: URI must be a dataURI');\n    }\n    const dataURI = dataURILike.slice(5);\n    // split the dataURI into media and base64, with the base64 signature\n    const splitted = dataURI.split(';base64,');\n    // if the base64 signature is not present, the latter part will become empty\n    if (splitted.length !== 2) {\n        throw new Error('File is invalid: dataURI must be base64');\n    }\n    // extract the mime type, media parameters including the name, and the base64 string\n    const [media, base64] = splitted;\n    const [mime, ...mediaparams] = media.split(';');\n    const type = mime || '';\n    // extract the name from the parameters\n    const name = decodeURI(\n    // parse the parameters into key-value pairs, find a key, and extract a value\n    // if no key is found, then the name is unknown\n    ((_a = mediaparams.map((param) => param.split('=')).find(([key]) => key === 'name')) === null || _a === void 0 ? void 0 : _a[1]) || 'unknown');\n    // Built the Uint8Array Blob parameter from the base64 string.\n    try {\n        const binary = atob(base64);\n        const array = new Array(binary.length);\n        for (let i = 0; i < binary.length; i++) {\n            array[i] = binary.charCodeAt(i);\n        }\n        // Create the blob object\n        const blob = new window.Blob([new Uint8Array(array)], { type });\n        return { blob, name };\n    }\n    catch (error) {\n        throw new Error('File is invalid: ' + error.message);\n    }\n}\n//# sourceMappingURL=dataURItoBlob.js.map","/** Potentially substitutes all replaceable parameters with the associated value(s) from the `params` if available. When\n * a `params` array is provided, each value in the array is used to replace any of the replaceable parameters in the\n * `inputString` using the `%1`, `%2`, etc. replacement specifiers.\n *\n * @param inputString - The string which will be potentially updated with replacement parameters\n * @param params - The optional list of replaceable parameter values to substitute into the english string\n * @returns - The updated string with any replacement specifiers replaced\n */\nexport default function replaceStringParameters(inputString, params) {\n    let output = inputString;\n    if (Array.isArray(params)) {\n        const parts = output.split(/(%\\d)/);\n        params.forEach((param, index) => {\n            const partIndex = parts.findIndex((part) => part === `%${index + 1}`);\n            if (partIndex >= 0) {\n                parts[partIndex] = param;\n            }\n        });\n        output = parts.join('');\n    }\n    return output;\n}\n//# sourceMappingURL=replaceStringParameters.js.map","import replaceStringParameters from './replaceStringParameters';\n/** Translates a `TranslatableString` value `stringToTranslate` into english. When a `params` array is provided, each\n * value in the array is used to replace any of the replaceable parameters in the `stringToTranslate` using the `%1`,\n * `%2`, etc. replacement specifiers.\n *\n * @param stringToTranslate - The `TranslatableString` value to convert to english\n * @param params - The optional list of replaceable parameter values to substitute into the english string\n * @returns - The `stringToTranslate` itself with any replaceable parameter values substituted\n */\nexport default function englishStringTranslator(stringToTranslate, params) {\n    return replaceStringParameters(stringToTranslate, params);\n}\n//# sourceMappingURL=englishStringTranslator.js.map","/** Returns the value(s) from `allEnumOptions` at the index(es) provided by `valueIndex`. If `valueIndex` is not an\n * array AND the index is not valid for `allEnumOptions`, `emptyValue` is returned. If `valueIndex` is an array, AND it\n * contains an invalid index, the returned array will have the resulting undefined values filtered out, leaving only\n * valid values or in the worst case, an empty array.\n *\n * @param valueIndex - The index(es) of the value(s) that should be returned\n * @param [allEnumOptions=[]] - The list of all the known enumOptions\n * @param [emptyValue] - The value to return when the non-array `valueIndex` does not refer to a real option\n * @returns - The single or list of values specified by the single or list of indexes if they are valid. Otherwise,\n *        `emptyValue` or an empty list.\n */\nexport default function enumOptionsValueForIndex(valueIndex, allEnumOptions = [], emptyValue) {\n    if (Array.isArray(valueIndex)) {\n        return (valueIndex\n            .map((index) => enumOptionsValueForIndex(index, allEnumOptions))\n            // Since the recursive call returns `emptyValue` when we get a bad option, only filter those out\n            .filter((val) => val !== emptyValue));\n    }\n    // So Number(null) and Number('') both return 0, so use emptyValue for those two values\n    const index = valueIndex === '' || valueIndex === null ? -1 : Number(valueIndex);\n    const option = allEnumOptions[index];\n    return option ? option.value : emptyValue;\n}\n//# sourceMappingURL=enumOptionsValueForIndex.js.map","import isEqual from 'lodash/isEqual';\nimport enumOptionsValueForIndex from './enumOptionsValueForIndex';\n/** Removes the enum option value at the `valueIndex` from the currently `selected` (list of) value(s). If `selected` is\n * a list, then that list is updated to remove the enum option value with the `valueIndex` in `allEnumOptions`. If it is\n * a single value, then if the enum option value with the `valueIndex` in `allEnumOptions` matches `selected`, undefined\n * is returned, otherwise the `selected` value is returned.\n *\n * @param valueIndex - The index of the value to be removed from the selected list or single value\n * @param selected - The current (list of) selected value(s)\n * @param [allEnumOptions=[]] - The list of all the known enumOptions\n * @returns - The updated `selected` with the enum option value at `valueIndex` in `allEnumOptions` removed from it,\n *        unless `selected` is a single value. In that case, if the `valueIndex` value matches `selected`, returns\n *        undefined, otherwise `selected`.\n */\nexport default function enumOptionsDeselectValue(valueIndex, selected, allEnumOptions = []) {\n    const value = enumOptionsValueForIndex(valueIndex, allEnumOptions);\n    if (Array.isArray(selected)) {\n        return selected.filter((v) => !isEqual(v, value));\n    }\n    return isEqual(value, selected) ? undefined : selected;\n}\n//# sourceMappingURL=enumOptionsDeselectValue.js.map","import isEqual from 'lodash/isEqual';\n/** Determines whether the given `value` is (one of) the `selected` value(s).\n *\n * @param value - The value being checked to see if it is selected\n * @param selected - The current selected value or list of values\n * @returns - true if the `value` is one of the `selected` ones, false otherwise\n */\nexport default function enumOptionsIsSelected(value, selected) {\n    if (Array.isArray(selected)) {\n        return selected.some((sel) => isEqual(sel, value));\n    }\n    return isEqual(selected, value);\n}\n//# sourceMappingURL=enumOptionsIsSelected.js.map","import enumOptionsIsSelected from './enumOptionsIsSelected';\n/** Returns the index(es) of the options in `allEnumOptions` whose value(s) match the ones in `value`. All the\n * `enumOptions` are filtered based on whether they are a \"selected\" `value` and the index of each selected one is then\n * stored in an array. If `multiple` is true, that array is returned, otherwise the first element in the array is\n * returned.\n *\n * @param value - The single value or list of values for which indexes are desired\n * @param [allEnumOptions=[]] - The list of all the known enumOptions\n * @param [multiple=false] - Optional flag, if true will return a list of index, otherwise a single one\n * @returns - A single string index for the first `value` in `allEnumOptions`, if not `multiple`. Otherwise, the list\n *        of indexes for (each of) the value(s) in `value`.\n */\nexport default function enumOptionsIndexForValue(value, allEnumOptions = [], multiple = false) {\n    const selectedIndexes = allEnumOptions\n        .map((opt, index) => (enumOptionsIsSelected(opt.value, value) ? String(index) : undefined))\n        .filter((opt) => typeof opt !== 'undefined');\n    if (!multiple) {\n        return selectedIndexes[0];\n    }\n    return selectedIndexes;\n}\n//# sourceMappingURL=enumOptionsIndexForValue.js.map","import enumOptionsValueForIndex from './enumOptionsValueForIndex';\nimport isNil from 'lodash/isNil';\n/** Add the enum option value at the `valueIndex` to the list of `selected` values in the proper order as defined by\n * `allEnumOptions`\n *\n * @param valueIndex - The index of the value that should be selected\n * @param selected - The current list of selected values\n * @param [allEnumOptions=[]] - The list of all the known enumOptions\n * @returns - The updated list of selected enum values with enum value at the `valueIndex` added to it\n */\nexport default function enumOptionsSelectValue(valueIndex, selected, allEnumOptions = []) {\n    const value = enumOptionsValueForIndex(valueIndex, allEnumOptions);\n    if (!isNil(value)) {\n        const index = allEnumOptions.findIndex((opt) => value === opt.value);\n        const all = allEnumOptions.map(({ value: val }) => val);\n        const updated = selected.slice(0, index).concat(value, selected.slice(index));\n        // As inserting values at predefined index positions doesn't work with empty\n        // arrays, we need to reorder the updated selection to match the initial order\n        return updated.sort((a, b) => Number(all.indexOf(a) > all.indexOf(b)));\n    }\n    return selected;\n}\n//# sourceMappingURL=enumOptionsSelectValue.js.map","import cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\nimport { ERRORS_KEY } from './constants';\n/** The `ErrorSchemaBuilder<T>` is used to build an `ErrorSchema<T>` since the definition of the `ErrorSchema` type is\n * designed for reading information rather than writing it. Use this class to add, replace or clear errors in an error\n * schema by using either dotted path or an array of path names. Once you are done building the `ErrorSchema`, you can\n * get the result and/or reset all the errors back to an initial set and start again.\n */\nexport default class ErrorSchemaBuilder {\n    /** Construct an `ErrorSchemaBuilder` with an optional initial set of errors in an `ErrorSchema`.\n     *\n     * @param [initialSchema] - The optional set of initial errors, that will be cloned into the class\n     */\n    constructor(initialSchema) {\n        /** The error schema being built\n         *\n         * @private\n         */\n        this.errorSchema = {};\n        this.resetAllErrors(initialSchema);\n    }\n    /** Returns the `ErrorSchema` that has been updated by the methods of the `ErrorSchemaBuilder`\n     */\n    get ErrorSchema() {\n        return this.errorSchema;\n    }\n    /** Will get an existing `ErrorSchema` at the specified `pathOfError` or create and return one.\n     *\n     * @param [pathOfError] - The optional path into the `ErrorSchema` at which to add the error(s)\n     * @returns - The error block for the given `pathOfError` or the root if not provided\n     * @private\n     */\n    getOrCreateErrorBlock(pathOfError) {\n        const hasPath = (Array.isArray(pathOfError) && pathOfError.length > 0) || typeof pathOfError === 'string';\n        let errorBlock = hasPath ? get(this.errorSchema, pathOfError) : this.errorSchema;\n        if (!errorBlock && pathOfError) {\n            errorBlock = {};\n            set(this.errorSchema, pathOfError, errorBlock);\n        }\n        return errorBlock;\n    }\n    /** Resets all errors in the `ErrorSchemaBuilder` back to the `initialSchema` if provided, otherwise an empty set.\n     *\n     * @param [initialSchema] - The optional set of initial errors, that will be cloned into the class\n     * @returns - The `ErrorSchemaBuilder` object for chaining purposes\n     */\n    resetAllErrors(initialSchema) {\n        this.errorSchema = initialSchema ? cloneDeep(initialSchema) : {};\n        return this;\n    }\n    /** Adds the `errorOrList` to the list of errors in the `ErrorSchema` at either the root level or the location within\n     * the schema described by the `pathOfError`. For more information about how to specify the path see the\n     * [eslint lodash plugin docs](https://github.com/wix/eslint-plugin-lodash/blob/master/docs/rules/path-style.md).\n     *\n     * @param errorOrList - The error or list of errors to add into the `ErrorSchema`\n     * @param [pathOfError] - The optional path into the `ErrorSchema` at which to add the error(s)\n     * @returns - The `ErrorSchemaBuilder` object for chaining purposes\n     */\n    addErrors(errorOrList, pathOfError) {\n        const errorBlock = this.getOrCreateErrorBlock(pathOfError);\n        let errorsList = get(errorBlock, ERRORS_KEY);\n        if (!Array.isArray(errorsList)) {\n            errorsList = [];\n            errorBlock[ERRORS_KEY] = errorsList;\n        }\n        if (Array.isArray(errorOrList)) {\n            errorsList.push(...errorOrList);\n        }\n        else {\n            errorsList.push(errorOrList);\n        }\n        return this;\n    }\n    /** Sets/replaces the `errorOrList` as the error(s) in the `ErrorSchema` at either the root level or the location\n     * within the schema described by the `pathOfError`. For more information about how to specify the path see the\n     * [eslint lodash plugin docs](https://github.com/wix/eslint-plugin-lodash/blob/master/docs/rules/path-style.md).\n     *\n     * @param errorOrList - The error or list of errors to set into the `ErrorSchema`\n     * @param [pathOfError] - The optional path into the `ErrorSchema` at which to set the error(s)\n     * @returns - The `ErrorSchemaBuilder` object for chaining purposes\n     */\n    setErrors(errorOrList, pathOfError) {\n        const errorBlock = this.getOrCreateErrorBlock(pathOfError);\n        // Effectively clone the array being given to prevent accidental outside manipulation of the given list\n        const listToAdd = Array.isArray(errorOrList) ? [...errorOrList] : [errorOrList];\n        set(errorBlock, ERRORS_KEY, listToAdd);\n        return this;\n    }\n    /** Clears the error(s) in the `ErrorSchema` at either the root level or the location within the schema described by\n     * the `pathOfError`. For more information about how to specify the path see the\n     * [eslint lodash plugin docs](https://github.com/wix/eslint-plugin-lodash/blob/master/docs/rules/path-style.md).\n     *\n     * @param [pathOfError] - The optional path into the `ErrorSchema` at which to clear the error(s)\n     * @returns - The `ErrorSchemaBuilder` object for chaining purposes\n     */\n    clearErrors(pathOfError) {\n        const errorBlock = this.getOrCreateErrorBlock(pathOfError);\n        set(errorBlock, ERRORS_KEY, []);\n        return this;\n    }\n}\n//# sourceMappingURL=ErrorSchemaBuilder.js.map","/** Given date & time information with optional yearRange & format, returns props for DateElement\n *\n * @param date - Object containing date with optional time information\n * @param time - Determines whether to include time or not\n * @param [yearRange=[1900, new Date().getFullYear() + 2]] - Controls the list of years to be displayed\n * @param [format='YMD'] - Controls the order in which day, month and year input element will be displayed\n * @returns Array of props for DateElement\n */\nexport default function getDateElementProps(date, time, yearRange = [1900, new Date().getFullYear() + 2], format = 'YMD') {\n    const { day, month, year, hour, minute, second } = date;\n    const dayObj = { type: 'day', range: [1, 31], value: day };\n    const monthObj = { type: 'month', range: [1, 12], value: month };\n    const yearObj = { type: 'year', range: yearRange, value: year };\n    const dateElementProp = [];\n    switch (format) {\n        case 'MDY':\n            dateElementProp.push(monthObj, dayObj, yearObj);\n            break;\n        case 'DMY':\n            dateElementProp.push(dayObj, monthObj, yearObj);\n            break;\n        case 'YMD':\n        default:\n            dateElementProp.push(yearObj, monthObj, dayObj);\n    }\n    if (time) {\n        dateElementProp.push({ type: 'hour', range: [0, 23], value: hour }, { type: 'minute', range: [0, 59], value: minute }, { type: 'second', range: [0, 59], value: second });\n    }\n    return dateElementProp;\n}\n//# sourceMappingURL=getDateElementProps.js.map","/** Extracts the range spec information `{ step?: number, min?: number, max?: number }` that can be spread onto an HTML\n * input from the range analog in the schema `{ multipleOf?: number, minimum?: number, maximum?: number }`.\n *\n * @param schema - The schema from which to extract the range spec\n * @returns - A range specification from the schema\n */\nexport default function rangeSpec(schema) {\n    const spec = {};\n    if (schema.multipleOf) {\n        spec.step = schema.multipleOf;\n    }\n    if (schema.minimum || schema.minimum === 0) {\n        spec.min = schema.minimum;\n    }\n    if (schema.maximum || schema.maximum === 0) {\n        spec.max = schema.maximum;\n    }\n    return spec;\n}\n//# sourceMappingURL=rangeSpec.js.map","import rangeSpec from './rangeSpec';\n/** Using the `schema`, `defaultType` and `options`, extract out the props for the <input> element that make sense.\n *\n * @param schema - The schema for the field provided by the widget\n * @param [defaultType] - The default type, if any, for the field provided by the widget\n * @param [options={}] - The UI Options for the field provided by the widget\n * @param [autoDefaultStepAny=true] - Determines whether to auto-default step=any when the type is number and no step\n * @returns - The extracted `InputPropsType` object\n */\nexport default function getInputProps(schema, defaultType, options = {}, autoDefaultStepAny = true) {\n    const inputProps = {\n        type: defaultType || 'text',\n        ...rangeSpec(schema),\n    };\n    // If options.inputType is set use that as the input type\n    if (options.inputType) {\n        inputProps.type = options.inputType;\n    }\n    else if (!defaultType) {\n        // If the schema is of type number or integer, set the input type to number\n        if (schema.type === 'number') {\n            inputProps.type = 'number';\n            // Only add step if one isn't already defined and we are auto-defaulting the \"any\" step\n            if (autoDefaultStepAny && inputProps.step === undefined) {\n                // Setting step to 'any' fixes a bug in Safari where decimals are not\n                // allowed in number inputs\n                inputProps.step = 'any';\n            }\n        }\n        else if (schema.type === 'integer') {\n            inputProps.type = 'number';\n            // Only add step if one isn't already defined\n            if (inputProps.step === undefined) {\n                // Since this is integer, you always want to step up or down in multiples of 1\n                inputProps.step = 1;\n            }\n        }\n    }\n    if (options.autocomplete) {\n        inputProps.autoComplete = options.autocomplete;\n    }\n    return inputProps;\n}\n//# sourceMappingURL=getInputProps.js.map","import { SUBMIT_BTN_OPTIONS_KEY } from './constants';\nimport getUiOptions from './getUiOptions';\n/** The default submit button options, exported for testing purposes\n */\nexport const DEFAULT_OPTIONS = {\n    props: {\n        disabled: false,\n    },\n    submitText: 'Submit',\n    norender: false,\n};\n/** Extracts any `ui:submitButtonOptions` from the `uiSchema` and merges them onto the `DEFAULT_OPTIONS`\n *\n * @param [uiSchema={}] - the UI Schema from which to extract submit button props\n * @returns - The merging of the `DEFAULT_OPTIONS` with any custom ones\n */\nexport default function getSubmitButtonOptions(uiSchema = {}) {\n    const uiOptions = getUiOptions(uiSchema);\n    if (uiOptions && uiOptions[SUBMIT_BTN_OPTIONS_KEY]) {\n        const options = uiOptions[SUBMIT_BTN_OPTIONS_KEY];\n        return { ...DEFAULT_OPTIONS, ...options };\n    }\n    return DEFAULT_OPTIONS;\n}\n//# sourceMappingURL=getSubmitButtonOptions.js.map","/** Returns the template with the given `name` from either the `uiSchema` if it is defined or from the `registry`\n * otherwise. NOTE, since `ButtonTemplates` are not overridden in `uiSchema` only those in the `registry` are returned.\n *\n * @param name - The name of the template to fetch, restricted to the keys of `TemplatesType`\n * @param registry - The `Registry` from which to read the template\n * @param [uiOptions={}] - The `UIOptionsType` from which to read an alternate template\n * @returns - The template from either the `uiSchema` or `registry` for the `name`\n */\nexport default function getTemplate(name, registry, uiOptions = {}) {\n    const { templates } = registry;\n    if (name === 'ButtonTemplates') {\n        return templates[name];\n    }\n    return (\n    // Evaluating uiOptions[name] results in TS2590: Expression produces a union type that is too complex to represent\n    // To avoid that, we cast uiOptions to `any` before accessing the name field\n    uiOptions[name] || templates[name]);\n}\n//# sourceMappingURL=getTemplate.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createElement } from 'react';\nimport ReactIs from 'react-is';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\nimport getSchemaType from './getSchemaType';\n/** The map of schema types to widget type to widget name\n */\nconst widgetMap = {\n    boolean: {\n        checkbox: 'CheckboxWidget',\n        radio: 'RadioWidget',\n        select: 'SelectWidget',\n        hidden: 'HiddenWidget',\n    },\n    string: {\n        text: 'TextWidget',\n        password: 'PasswordWidget',\n        email: 'EmailWidget',\n        hostname: 'TextWidget',\n        ipv4: 'TextWidget',\n        ipv6: 'TextWidget',\n        uri: 'URLWidget',\n        'data-url': 'FileWidget',\n        radio: 'RadioWidget',\n        select: 'SelectWidget',\n        textarea: 'TextareaWidget',\n        hidden: 'HiddenWidget',\n        date: 'DateWidget',\n        datetime: 'DateTimeWidget',\n        'date-time': 'DateTimeWidget',\n        'alt-date': 'AltDateWidget',\n        'alt-datetime': 'AltDateTimeWidget',\n        time: 'TimeWidget',\n        color: 'ColorWidget',\n        file: 'FileWidget',\n    },\n    number: {\n        text: 'TextWidget',\n        select: 'SelectWidget',\n        updown: 'UpDownWidget',\n        range: 'RangeWidget',\n        radio: 'RadioWidget',\n        hidden: 'HiddenWidget',\n    },\n    integer: {\n        text: 'TextWidget',\n        select: 'SelectWidget',\n        updown: 'UpDownWidget',\n        range: 'RangeWidget',\n        radio: 'RadioWidget',\n        hidden: 'HiddenWidget',\n    },\n    array: {\n        select: 'SelectWidget',\n        checkboxes: 'CheckboxesWidget',\n        files: 'FileWidget',\n        hidden: 'HiddenWidget',\n    },\n};\n/** Wraps the given widget with stateless functional component that will merge any `defaultProps.options` with the\n * `options` that are provided in the props. It will add the wrapper component as a `MergedWidget` property onto the\n * `Widget` so that future attempts to wrap `AWidget` will return the already existing wrapper.\n *\n * @param AWidget - A widget that will be wrapped or one that is already wrapped\n * @returns - The wrapper widget\n */\nfunction mergeWidgetOptions(AWidget) {\n    let MergedWidget = get(AWidget, 'MergedWidget');\n    // cache return value as property of widget for proper react reconciliation\n    if (!MergedWidget) {\n        const defaultOptions = (AWidget.defaultProps && AWidget.defaultProps.options) || {};\n        MergedWidget = ({ options, ...props }) => {\n            return _jsx(AWidget, { options: { ...defaultOptions, ...options }, ...props });\n        };\n        set(AWidget, 'MergedWidget', MergedWidget);\n    }\n    return MergedWidget;\n}\n/** Given a schema representing a field to render and either the name or actual `Widget` implementation, returns the\n * React component that is used to render the widget. If the `widget` is already a React component, then it is wrapped\n * with a `MergedWidget`. Otherwise an attempt is made to look up the widget inside of the `registeredWidgets` map based\n * on the schema type and `widget` name. If no widget component can be found an `Error` is thrown.\n *\n * @param schema - The schema for the field\n * @param [widget] - Either the name of the widget OR a `Widget` implementation to use\n * @param [registeredWidgets={}] - A registry of widget name to `Widget` implementation\n * @returns - The `Widget` component to use\n * @throws - An error if there is no `Widget` component that can be returned\n */\nexport default function getWidget(schema, widget, registeredWidgets = {}) {\n    const type = getSchemaType(schema);\n    if (typeof widget === 'function' ||\n        (widget && ReactIs.isForwardRef(createElement(widget))) ||\n        ReactIs.isMemo(widget)) {\n        return mergeWidgetOptions(widget);\n    }\n    if (typeof widget !== 'string') {\n        throw new Error(`Unsupported widget definition: ${typeof widget}`);\n    }\n    if (widget in registeredWidgets) {\n        const registeredWidget = registeredWidgets[widget];\n        return getWidget(schema, registeredWidget, registeredWidgets);\n    }\n    if (typeof type === 'string') {\n        if (!(type in widgetMap)) {\n            throw new Error(`No widget for type '${type}'`);\n        }\n        if (widget in widgetMap[type]) {\n            const registeredWidget = registeredWidgets[widgetMap[type][widget]];\n            return getWidget(schema, registeredWidget, registeredWidgets);\n        }\n    }\n    throw new Error(`No widget '${widget}' for type '${type}'`);\n}\n//# sourceMappingURL=getWidget.js.map","/** JS has no built-in hashing function, so rolling our own\n *  based on Java's hashing fn:\n *  http://www.java2s.com/example/nodejs-utility-method/string-hash/hashcode-4dc2b.html\n *\n * @param string - The string for which to get the hash\n * @returns - The resulting hash of the string in hex format\n */\nfunction hashString(string) {\n    let hash = 0;\n    for (let i = 0; i < string.length; i += 1) {\n        const chr = string.charCodeAt(i);\n        hash = (hash << 5) - hash + chr;\n        hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash.toString(16);\n}\n/** Stringifies the schema and returns the hash of the resulting string. Sorts schema fields\n * in consistent order before stringify to prevent different hash ids for the same schema.\n *\n * @param schema - The schema for which the hash is desired\n * @returns - The string obtained from the hash of the stringified schema\n */\nexport default function hashForSchema(schema) {\n    const allKeys = new Set();\n    // solution source: https://stackoverflow.com/questions/16167581/sort-object-properties-and-json-stringify/53593328#53593328\n    JSON.stringify(schema, (key, value) => (allKeys.add(key), value));\n    return hashString(JSON.stringify(schema, Array.from(allKeys).sort()));\n}\n//# sourceMappingURL=hashForSchema.js.map","import getWidget from './getWidget';\n/** Detects whether the `widget` exists for the `schema` with the associated `registryWidgets` and returns true if it\n * does, or false if it doesn't.\n *\n * @param schema - The schema for the field\n * @param widget - Either the name of the widget OR a `Widget` implementation to use\n * @param [registeredWidgets={}] - A registry of widget name to `Widget` implementation\n * @returns - True if the widget exists, false otherwise\n */\nexport default function hasWidget(schema, widget, registeredWidgets = {}) {\n    try {\n        getWidget(schema, widget, registeredWidgets);\n        return true;\n    }\n    catch (e) {\n        const err = e;\n        if (err.message && (err.message.startsWith('No widget') || err.message.startsWith('Unsupported widget'))) {\n            return false;\n        }\n        throw e;\n    }\n}\n//# sourceMappingURL=hasWidget.js.map","import isString from 'lodash/isString';\nimport { ID_KEY } from './constants';\n/** Generates a consistent `id` pattern for a given `id` and a `suffix`\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @param suffix - The suffix to append to the id\n */\nfunction idGenerator(id, suffix) {\n    const theId = isString(id) ? id : id[ID_KEY];\n    return `${theId}__${suffix}`;\n}\n/** Return a consistent `id` for the field description element\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @returns - The consistent id for the field description element from the given `id`\n */\nexport function descriptionId(id) {\n    return idGenerator(id, 'description');\n}\n/** Return a consistent `id` for the field error element\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @returns - The consistent id for the field error element from the given `id`\n */\nexport function errorId(id) {\n    return idGenerator(id, 'error');\n}\n/** Return a consistent `id` for the field examples element\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @returns - The consistent id for the field examples element from the given `id`\n */\nexport function examplesId(id) {\n    return idGenerator(id, 'examples');\n}\n/** Return a consistent `id` for the field help element\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @returns - The consistent id for the field help element from the given `id`\n */\nexport function helpId(id) {\n    return idGenerator(id, 'help');\n}\n/** Return a consistent `id` for the field title element\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @returns - The consistent id for the field title element from the given `id`\n */\nexport function titleId(id) {\n    return idGenerator(id, 'title');\n}\n/** Return a list of element ids that contain additional information about the field that can be used to as the aria\n * description of the field. This is correctly omitting `titleId` which would be \"labeling\" rather than \"describing\" the\n * element.\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @param [includeExamples=false] - Optional flag, if true, will add the `examplesId` into the list\n * @returns - The string containing the list of ids for use in an `aria-describedBy` attribute\n */\nexport function ariaDescribedByIds(id, includeExamples = false) {\n    const examples = includeExamples ? ` ${examplesId(id)}` : '';\n    return `${errorId(id)} ${descriptionId(id)} ${helpId(id)}${examples}`;\n}\n/** Return a consistent `id` for the `optionIndex`s of a `Radio` or `Checkboxes` widget\n *\n * @param id - The id of the parent component for the option\n * @param optionIndex - The index of the option for which the id is desired\n * @returns - An id for the option index based on the parent `id`\n */\nexport function optionId(id, optionIndex) {\n    return `${id}-${optionIndex}`;\n}\n//# sourceMappingURL=idGenerators.js.map","export default function labelValue(label, hideLabel, fallback) {\n    return hideLabel ? fallback : label;\n}\n//# sourceMappingURL=labelValue.js.map","/** Converts a local Date string into a UTC date string\n *\n * @param dateString - The string representation of a date as accepted by the `Date()` constructor\n * @returns - A UTC date string if `dateString` is truthy, otherwise undefined\n */\nexport default function localToUTC(dateString) {\n    return dateString ? new Date(dateString).toJSON() : undefined;\n}\n//# sourceMappingURL=localToUTC.js.map","import { CONST_KEY, ENUM_KEY } from './constants';\n/** Returns the constant value from the schema when it is either a single value enum or has a const key. Otherwise\n * throws an error.\n *\n * @param schema - The schema from which to obtain the constant value\n * @returns - The constant value for the schema\n * @throws - Error when the schema does not have a constant value\n */\nexport default function toConstant(schema) {\n    if (ENUM_KEY in schema && Array.isArray(schema.enum) && schema.enum.length === 1) {\n        return schema.enum[0];\n    }\n    if (CONST_KEY in schema) {\n        return schema.const;\n    }\n    throw new Error('schema cannot be inferred as a constant');\n}\n//# sourceMappingURL=toConstant.js.map","import toConstant from './toConstant';\n/** Gets the list of options from the schema. If the schema has an enum list, then those enum values are returned. The\n * labels for the options will be extracted from the non-standard, RJSF-deprecated `enumNames` if it exists, otherwise\n * the label will be the same as the `value`. If the schema has a `oneOf` or `anyOf`, then the value is the list of\n * `const` values from the schema and the label is either the `schema.title` or the value.\n *\n * @param schema - The schema from which to extract the options list\n * @returns - The list of options from the schema\n */\nexport default function optionsList(schema) {\n    // enumNames was deprecated in v5 and is intentionally omitted from the RJSFSchema type.\n    // Cast the type to include enumNames so the feature still works.\n    const schemaWithEnumNames = schema;\n    if (schemaWithEnumNames.enumNames && process.env.NODE_ENV !== 'production') {\n        console.warn('The enumNames property is deprecated and may be removed in a future major release.');\n    }\n    if (schema.enum) {\n        return schema.enum.map((value, i) => {\n            const label = (schemaWithEnumNames.enumNames && schemaWithEnumNames.enumNames[i]) || String(value);\n            return { label, value };\n        });\n    }\n    const altSchemas = schema.oneOf || schema.anyOf;\n    return (altSchemas &&\n        altSchemas.map((aSchemaDef) => {\n            const aSchema = aSchemaDef;\n            const value = toConstant(aSchema);\n            const label = aSchema.title || String(value);\n            return {\n                schema: aSchema,\n                label,\n                value,\n            };\n        }));\n}\n//# sourceMappingURL=optionsList.js.map","/** Given a list of `properties` and an `order` list, returns a list that contains the `properties` ordered correctly.\n * If `order` is not an array, then the untouched `properties` list is returned. Otherwise `properties` is ordered per\n * the `order` list. If `order` contains a '*' then any `properties` that are not mentioned explicity in `order` will be\n * places in the location of the `*`.\n *\n * @param properties - The list of property keys to be ordered\n * @param order - An array of property keys to be ordered first, with an optional '*' property\n * @returns - A list with the `properties` ordered\n * @throws - Error when the properties cannot be ordered correctly\n */\nexport default function orderProperties(properties, order) {\n    if (!Array.isArray(order)) {\n        return properties;\n    }\n    const arrayToHash = (arr) => arr.reduce((prev, curr) => {\n        prev[curr] = true;\n        return prev;\n    }, {});\n    const errorPropList = (arr) => arr.length > 1 ? `properties '${arr.join(\"', '\")}'` : `property '${arr[0]}'`;\n    const propertyHash = arrayToHash(properties);\n    const orderFiltered = order.filter((prop) => prop === '*' || propertyHash[prop]);\n    const orderHash = arrayToHash(orderFiltered);\n    const rest = properties.filter((prop) => !orderHash[prop]);\n    const restIndex = orderFiltered.indexOf('*');\n    if (restIndex === -1) {\n        if (rest.length) {\n            throw new Error(`uiSchema order list does not contain ${errorPropList(rest)}`);\n        }\n        return orderFiltered;\n    }\n    if (restIndex !== orderFiltered.lastIndexOf('*')) {\n        throw new Error('uiSchema order list contains more than one wildcard item');\n    }\n    const complete = [...orderFiltered];\n    complete.splice(restIndex, 1, ...rest);\n    return complete;\n}\n//# sourceMappingURL=orderProperties.js.map","/** Returns a string representation of the `num` that is padded with leading \"0\"s if necessary\n *\n * @param num - The number to pad\n * @param width - The width of the string at which no lead padding is necessary\n * @returns - The number converted to a string with leading zero padding if the number of digits is less than `width`\n */\nexport default function pad(num, width) {\n    let s = String(num);\n    while (s.length < width) {\n        s = '0' + s;\n    }\n    return s;\n}\n//# sourceMappingURL=pad.js.map","/** Parses the `dateString` into a `DateObject`, including the time information when `includeTime` is true\n *\n * @param dateString - The date string to parse into a DateObject\n * @param [includeTime=true] - Optional flag, if false, will not include the time data into the object\n * @returns - The date string converted to a `DateObject`\n * @throws - Error when the date cannot be parsed from the string\n */\nexport default function parseDateString(dateString, includeTime = true) {\n    if (!dateString) {\n        return {\n            year: -1,\n            month: -1,\n            day: -1,\n            hour: includeTime ? -1 : 0,\n            minute: includeTime ? -1 : 0,\n            second: includeTime ? -1 : 0,\n        };\n    }\n    const date = new Date(dateString);\n    if (Number.isNaN(date.getTime())) {\n        throw new Error('Unable to parse date ' + dateString);\n    }\n    return {\n        year: date.getUTCFullYear(),\n        month: date.getUTCMonth() + 1,\n        day: date.getUTCDate(),\n        hour: includeTime ? date.getUTCHours() : 0,\n        minute: includeTime ? date.getUTCMinutes() : 0,\n        second: includeTime ? date.getUTCSeconds() : 0,\n    };\n}\n//# sourceMappingURL=parseDateString.js.map","/** Check to see if a `schema` specifies that a value must be true. This happens when:\n * - `schema.const` is truthy\n * - `schema.enum` == `[true]`\n * - `schema.anyOf` or `schema.oneOf` has a single value which recursively returns true\n * - `schema.allOf` has at least one value which recursively returns true\n *\n * @param schema - The schema to check\n * @returns - True if the schema specifies a value that must be true, false otherwise\n */\nexport default function schemaRequiresTrueValue(schema) {\n    // Check if const is a truthy value\n    if (schema.const) {\n        return true;\n    }\n    // Check if an enum has a single value of true\n    if (schema.enum && schema.enum.length === 1 && schema.enum[0] === true) {\n        return true;\n    }\n    // If anyOf has a single value, evaluate the subschema\n    if (schema.anyOf && schema.anyOf.length === 1) {\n        return schemaRequiresTrueValue(schema.anyOf[0]);\n    }\n    // If oneOf has a single value, evaluate the subschema\n    if (schema.oneOf && schema.oneOf.length === 1) {\n        return schemaRequiresTrueValue(schema.oneOf[0]);\n    }\n    // Evaluate each subschema in allOf, to see if one of them requires a true value\n    if (schema.allOf) {\n        const schemaSome = (subSchema) => schemaRequiresTrueValue(subSchema);\n        return schema.allOf.some(schemaSome);\n    }\n    return false;\n}\n//# sourceMappingURL=schemaRequiresTrueValue.js.map","import deepEquals from './deepEquals';\n/** Determines whether the given `component` should be rerendered by comparing its current set of props and state\n * against the next set. If either of those two sets are not the same, then the component should be rerendered.\n *\n * @param component - A React component being checked\n * @param nextProps - The next set of props against which to check\n * @param nextState - The next set of state against which to check\n * @returns - True if the component should be re-rendered, false otherwise\n */\nexport default function shouldRender(component, nextProps, nextState) {\n    const { props, state } = component;\n    return !deepEquals(props, nextProps) || !deepEquals(state, nextState);\n}\n//# sourceMappingURL=shouldRender.js.map","/** Returns a UTC date string for the given `dateObject`. If `time` is false, then the time portion of the string is\n * removed.\n *\n * @param dateObject - The `DateObject` to convert to a date string\n * @param [time=true] - Optional flag used to remove the time portion of the date string if false\n * @returns - The UTC date string\n */\nexport default function toDateString(dateObject, time = true) {\n    const { year, month, day, hour = 0, minute = 0, second = 0 } = dateObject;\n    const utcTime = Date.UTC(year, month - 1, day, hour, minute, second);\n    const datetime = new Date(utcTime).toJSON();\n    return time ? datetime : datetime.slice(0, 10);\n}\n//# sourceMappingURL=toDateString.js.map","import isPlainObject from 'lodash/isPlainObject';\nimport { ERRORS_KEY } from './constants';\n/** Converts an `errorSchema` into a list of `RJSFValidationErrors`\n *\n * @param errorSchema - The `ErrorSchema` instance to convert\n * @param [fieldPath=[]] - The current field path, defaults to [] if not specified\n * @returns - The list of `RJSFValidationErrors` extracted from the `errorSchema`\n */\nexport default function toErrorList(errorSchema, fieldPath = []) {\n    if (!errorSchema) {\n        return [];\n    }\n    let errorList = [];\n    if (ERRORS_KEY in errorSchema) {\n        errorList = errorList.concat(errorSchema[ERRORS_KEY].map((message) => {\n            const property = `.${fieldPath.join('.')}`;\n            return {\n                property,\n                message,\n                stack: `${property} ${message}`,\n            };\n        }));\n    }\n    return Object.keys(errorSchema).reduce((acc, key) => {\n        if (key !== ERRORS_KEY) {\n            const childSchema = errorSchema[key];\n            if (isPlainObject(childSchema)) {\n                acc = acc.concat(toErrorList(childSchema, [...fieldPath, key]));\n            }\n        }\n        return acc;\n    }, errorList);\n}\n//# sourceMappingURL=toErrorList.js.map","import toPath from 'lodash/toPath';\nimport ErrorSchemaBuilder from './ErrorSchemaBuilder';\n/** Transforms a rjsf validation errors list:\n * [\n *   {property: '.level1.level2[2].level3', message: 'err a'},\n *   {property: '.level1.level2[2].level3', message: 'err b'},\n *   {property: '.level1.level2[4].level3', message: 'err b'},\n * ]\n * Into an error tree:\n * {\n *   level1: {\n *     level2: {\n *       2: {level3: {errors: ['err a', 'err b']}},\n *       4: {level3: {errors: ['err b']}},\n *     }\n *   }\n * };\n *\n * @param errors - The list of RJSFValidationError objects\n * @returns - The `ErrorSchema` built from the list of `RJSFValidationErrors`\n */\nexport default function toErrorSchema(errors) {\n    const builder = new ErrorSchemaBuilder();\n    if (errors.length) {\n        errors.forEach((error) => {\n            const { property, message } = error;\n            // When the property is the root element, just use an empty array for the path\n            const path = property === '.' ? [] : toPath(property);\n            // If the property is at the root (.level1) then toPath creates\n            // an empty array element at the first index. Remove it.\n            if (path.length > 0 && path[0] === '') {\n                path.splice(0, 1);\n            }\n            if (message) {\n                builder.addErrors(message, path);\n            }\n        });\n    }\n    return builder.ErrorSchema;\n}\n//# sourceMappingURL=toErrorSchema.js.map","import isPlainObject from 'lodash/isPlainObject';\n/** Unwraps the `errorHandler` structure into the associated `ErrorSchema`, stripping the `addError()` functions from it\n *\n * @param errorHandler - The `FormValidation` error handling structure\n * @returns - The `ErrorSchema` resulting from the stripping of the `addError()` function\n */\nexport default function unwrapErrorHandler(errorHandler) {\n    return Object.keys(errorHandler).reduce((acc, key) => {\n        if (key === 'addError') {\n            return acc;\n        }\n        else {\n            const childSchema = errorHandler[key];\n            if (isPlainObject(childSchema)) {\n                return {\n                    ...acc,\n                    [key]: unwrapErrorHandler(childSchema),\n                };\n            }\n            return { ...acc, [key]: childSchema };\n        }\n    }, {});\n}\n//# sourceMappingURL=unwrapErrorHandler.js.map","import pad from './pad';\n/** Converts a UTC date string into a local Date format\n *\n * @param jsonDate - A UTC date string\n * @returns - An empty string when `jsonDate` is falsey, otherwise a date string in local format\n */\nexport default function utcToLocal(jsonDate) {\n    if (!jsonDate) {\n        return '';\n    }\n    // required format of `'yyyy-MM-ddThh:mm' followed by optional ':ss' or ':ss.SSS'\n    // https://html.spec.whatwg.org/multipage/input.html#local-date-and-time-state-(type%3Ddatetime-local)\n    // > should be a _valid local date and time string_ (not GMT)\n    // Note - date constructor passed local ISO-8601 does not correctly\n    // change time to UTC in node pre-8\n    const date = new Date(jsonDate);\n    const yyyy = pad(date.getFullYear(), 4);\n    const MM = pad(date.getMonth() + 1, 2);\n    const dd = pad(date.getDate(), 2);\n    const hh = pad(date.getHours(), 2);\n    const mm = pad(date.getMinutes(), 2);\n    const ss = pad(date.getSeconds(), 2);\n    const SSS = pad(date.getMilliseconds(), 3);\n    return `${yyyy}-${MM}-${dd}T${hh}:${mm}:${ss}.${SSS}`;\n}\n//# sourceMappingURL=utcToLocal.js.map","import isEmpty from 'lodash/isEmpty';\nimport mergeObjects from './mergeObjects';\nimport toErrorList from './toErrorList';\n/** Merges the errors in `additionalErrorSchema` into the existing `validationData` by combining the hierarchies in the\n * two `ErrorSchema`s and then appending the error list from the `additionalErrorSchema` obtained by calling\n * `toErrorList()` on the `errors` in the `validationData`. If no `additionalErrorSchema` is passed, then\n * `validationData` is returned.\n *\n * @param validationData - The current `ValidationData` into which to merge the additional errors\n * @param [additionalErrorSchema] - The optional additional set of errors in an `ErrorSchema`\n * @returns - The `validationData` with the additional errors from `additionalErrorSchema` merged into it, if provided.\n */\nexport default function validationDataMerge(validationData, additionalErrorSchema) {\n    if (!additionalErrorSchema) {\n        return validationData;\n    }\n    const { errors: oldErrors, errorSchema: oldErrorSchema } = validationData;\n    let errors = toErrorList(additionalErrorSchema);\n    let errorSchema = additionalErrorSchema;\n    if (!isEmpty(oldErrorSchema)) {\n        errorSchema = mergeObjects(oldErrorSchema, additionalErrorSchema, true);\n        errors = [...oldErrors].concat(errors);\n    }\n    return { errorSchema, errors };\n}\n//# sourceMappingURL=validationDataMerge.js.map","import { REF_KEY, ROOT_SCHEMA_PREFIX } from './constants';\nimport isObject from 'lodash/isObject';\n/** Takes a `node` object and transforms any contained `$ref` node variables with a prefix, recursively calling\n * `withIdRefPrefix` for any other elements.\n *\n * @param node - The object node to which a ROOT_SCHEMA_PREFIX is added when a REF_KEY is part of it\n */\nfunction withIdRefPrefixObject(node) {\n    for (const key in node) {\n        const realObj = node;\n        const value = realObj[key];\n        if (key === REF_KEY && typeof value === 'string' && value.startsWith('#')) {\n            realObj[key] = ROOT_SCHEMA_PREFIX + value;\n        }\n        else {\n            realObj[key] = withIdRefPrefix(value);\n        }\n    }\n    return node;\n}\n/** Takes a `node` object list and transforms any contained `$ref` node variables with a prefix, recursively calling\n * `withIdRefPrefix` for any other elements.\n *\n * @param node - The list of object nodes to which a ROOT_SCHEMA_PREFIX is added when a REF_KEY is part of it\n */\nfunction withIdRefPrefixArray(node) {\n    for (let i = 0; i < node.length; i++) {\n        node[i] = withIdRefPrefix(node[i]);\n    }\n    return node;\n}\n/** Recursively prefixes all `$ref`s in a schema with the value of the `ROOT_SCHEMA_PREFIX` constant.\n * This is used in isValid to make references to the rootSchema\n *\n * @param schemaNode - The object node to which a ROOT_SCHEMA_PREFIX is added when a REF_KEY is part of it\n * @returns - A copy of the `schemaNode` with updated `$ref`s\n */\nexport default function withIdRefPrefix(schemaNode) {\n    if (Array.isArray(schemaNode)) {\n        return withIdRefPrefixArray([...schemaNode]);\n    }\n    if (isObject(schemaNode)) {\n        return withIdRefPrefixObject({ ...schemaNode });\n    }\n    return schemaNode;\n}\n//# sourceMappingURL=withIdRefPrefix.js.map","/** An enumeration of all the translatable strings used by `@rjsf/core` and its themes. The value of each of the\n * enumeration keys is expected to be the actual english string. Some strings contain replaceable parameter values\n * as indicated by `%1`, `%2`, etc. The number after the `%` indicates the order of the parameter. The ordering of\n * parameters is important because some languages may choose to put the second parameter before the first in its\n * translation. Also, some strings are rendered using `markdown-to-jsx` and thus support markdown and inline html.\n */\nexport var TranslatableString;\n(function (TranslatableString) {\n    /** Fallback title of an array item, used by ArrayField */\n    TranslatableString[\"ArrayItemTitle\"] = \"Item\";\n    /** Missing items reason, used by ArrayField */\n    TranslatableString[\"MissingItems\"] = \"Missing items definition\";\n    /** Yes label, used by BooleanField */\n    TranslatableString[\"YesLabel\"] = \"Yes\";\n    /** No label, used by BooleanField */\n    TranslatableString[\"NoLabel\"] = \"No\";\n    /** Close label, used by ErrorList */\n    TranslatableString[\"CloseLabel\"] = \"Close\";\n    /** Errors label, used by ErrorList */\n    TranslatableString[\"ErrorsLabel\"] = \"Errors\";\n    /** New additionalProperties string default value, used by ObjectField */\n    TranslatableString[\"NewStringDefault\"] = \"New Value\";\n    /** Add button title, used by AddButton */\n    TranslatableString[\"AddButton\"] = \"Add\";\n    /** Add button title, used by AddButton */\n    TranslatableString[\"AddItemButton\"] = \"Add Item\";\n    /** Copy button title, used by IconButton */\n    TranslatableString[\"CopyButton\"] = \"Copy\";\n    /** Move down button title, used by IconButton */\n    TranslatableString[\"MoveDownButton\"] = \"Move down\";\n    /** Move up button title, used by IconButton */\n    TranslatableString[\"MoveUpButton\"] = \"Move up\";\n    /** Remove button title, used by IconButton */\n    TranslatableString[\"RemoveButton\"] = \"Remove\";\n    /** Now label, used by AltDateWidget */\n    TranslatableString[\"NowLabel\"] = \"Now\";\n    /** Clear label, used by AltDateWidget */\n    TranslatableString[\"ClearLabel\"] = \"Clear\";\n    /** Aria date label, used by DateWidget */\n    TranslatableString[\"AriaDateLabel\"] = \"Select a date\";\n    /** File preview label, used by FileWidget */\n    TranslatableString[\"PreviewLabel\"] = \"Preview\";\n    /** Decrement button aria label, used by UpDownWidget */\n    TranslatableString[\"DecrementAriaLabel\"] = \"Decrease value by 1\";\n    /** Increment button aria label, used by UpDownWidget */\n    TranslatableString[\"IncrementAriaLabel\"] = \"Increase value by 1\";\n    // Strings with replaceable parameters\n    /** Unknown field type reason, where %1 will be replaced with the type as provided by SchemaField */\n    TranslatableString[\"UnknownFieldType\"] = \"Unknown field type %1\";\n    /** Option prefix, where %1 will be replaced with the option index as provided by MultiSchemaField */\n    TranslatableString[\"OptionPrefix\"] = \"Option %1\";\n    /** Option prefix, where %1 and %2 will be replaced by the schema title and option index, respectively as provided by\n     * MultiSchemaField\n     */\n    TranslatableString[\"TitleOptionPrefix\"] = \"%1 option %2\";\n    /** Key label, where %1 will be replaced by the label as provided by WrapIfAdditionalTemplate */\n    TranslatableString[\"KeyLabel\"] = \"%1 Key\";\n    // Strings with replaceable parameters AND/OR that support markdown and html\n    /** Invalid object field configuration as provided by the ObjectField */\n    TranslatableString[\"InvalidObjectField\"] = \"Invalid \\\"%1\\\" object field configuration: <em>%2</em>.\";\n    /** Unsupported field schema, used by UnsupportedField */\n    TranslatableString[\"UnsupportedField\"] = \"Unsupported field schema.\";\n    /** Unsupported field schema, where %1 will be replaced by the idSchema.$id as provided by UnsupportedField */\n    TranslatableString[\"UnsupportedFieldWithId\"] = \"Unsupported field schema for field <code>%1</code>.\";\n    /** Unsupported field schema, where %1 will be replaced by the reason string as provided by UnsupportedField */\n    TranslatableString[\"UnsupportedFieldWithReason\"] = \"Unsupported field schema: <em>%1</em>.\";\n    /** Unsupported field schema, where %1 and %2 will be replaced by the idSchema.$id and reason strings, respectively,\n     * as provided by UnsupportedField\n     */\n    TranslatableString[\"UnsupportedFieldWithIdAndReason\"] = \"Unsupported field schema for field <code>%1</code>: <em>%2</em>.\";\n    /** File name, type and size info, where %1, %2 and %3 will be replaced by the file name, file type and file size as\n     * provided by FileWidget\n     */\n    TranslatableString[\"FilesInfo\"] = \"**%1** (%2, %3 bytes)\";\n})(TranslatableString || (TranslatableString = {}));\n//# sourceMappingURL=enums.js.map","import get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport { ID_KEY } from '../constants';\nimport hashForSchema from '../hashForSchema';\n/** An implementation of the `ValidatorType` interface that is designed for use in capturing schemas used by the\n * `isValid()` function. The rest of the implementation of the interface throws errors when it is attempted to be used.\n * An instance of the object allows the caller to capture the schemas used in calls to the `isValid()` function. These\n * captured schema, along with the root schema used to construct the object are stored in the map of schemas keyed by\n * the hashed value of the schema. NOTE: After hashing the schema, an $id with the hash value is added to the\n * schema IF that schema doesn't already have an $id, prior to putting the schema into the map.\n */\nexport default class ParserValidator {\n    /** Construct the ParserValidator for the given `rootSchema`. This `rootSchema` will be stashed in the `schemaMap`\n     * first.\n     *\n     * @param rootSchema - The root schema against which this validator will be executed\n     */\n    constructor(rootSchema) {\n        /** The map of schemas encountered by the ParserValidator */\n        this.schemaMap = {};\n        this.rootSchema = rootSchema;\n        this.addSchema(rootSchema, hashForSchema(rootSchema));\n    }\n    /** Adds the given `schema` to the `schemaMap` keyed by the `hash` or `ID_KEY` if present on the `schema`. If the\n     * schema does not have an `ID_KEY`, then the `hash` will be added as the `ID_KEY` to allow the schema to be\n     * associated with it's `hash` for future use (by a schema compiler).\n     *\n     * @param schema - The schema which is to be added to the map\n     * @param hash - The hash value at which to map the schema\n     */\n    addSchema(schema, hash) {\n        const key = get(schema, ID_KEY, hash);\n        const identifiedSchema = { ...schema, [ID_KEY]: key };\n        const existing = this.schemaMap[key];\n        if (!existing) {\n            this.schemaMap[key] = identifiedSchema;\n        }\n        else if (!isEqual(existing, identifiedSchema)) {\n            console.error('existing schema:', JSON.stringify(existing, null, 2));\n            console.error('new schema:', JSON.stringify(identifiedSchema, null, 2));\n            throw new Error(`Two different schemas exist with the same key ${key}! What a bad coincidence. If possible, try adding an $id to one of the schemas`);\n        }\n    }\n    /** Returns the current `schemaMap` to the caller\n     */\n    getSchemaMap() {\n        return this.schemaMap;\n    }\n    /** Implements the `ValidatorType` `isValid()` method to capture the `schema` in the `schemaMap`. Throws an error when\n     * the `rootSchema` is not the same as the root schema provided during construction.\n     *\n     * @param schema - The schema to record in the `schemaMap`\n     * @param _formData - The formData parameter that is ignored\n     * @param rootSchema - The root schema associated with the schema\n     * @throws - Error when the given `rootSchema` differs from the root schema provided during construction\n     */\n    isValid(schema, _formData, rootSchema) {\n        if (!isEqual(rootSchema, this.rootSchema)) {\n            throw new Error('Unexpectedly calling isValid() with a rootSchema that differs from the construction rootSchema');\n        }\n        this.addSchema(schema, hashForSchema(schema));\n        return false;\n    }\n    /** Implements the `ValidatorType` `rawValidation()` method to throw an error since it is never supposed to be called\n     *\n     * @param _schema - The schema parameter that is ignored\n     * @param _formData - The formData parameter that is ignored\n     */\n    rawValidation(_schema, _formData) {\n        throw new Error('Unexpectedly calling the `rawValidation()` method during schema parsing');\n    }\n    /** Implements the `ValidatorType` `toErrorList()` method to throw an error since it is never supposed to be called\n     *\n     * @param _errorSchema - The error schema parameter that is ignored\n     * @param _fieldPath - The field path parameter that is ignored\n     */\n    toErrorList(_errorSchema, _fieldPath) {\n        throw new Error('Unexpectedly calling the `toErrorList()` method during schema parsing');\n    }\n    /** Implements the `ValidatorType` `validateFormData()` method to throw an error since it is never supposed to be\n     * called\n     *\n     * @param _formData - The formData parameter that is ignored\n     * @param _schema - The schema parameter that is ignored\n     * @param _customValidate - The customValidate parameter that is ignored\n     * @param _transformErrors - The transformErrors parameter that is ignored\n     * @param _uiSchema - The uiSchema parameter that is ignored\n     */\n    validateFormData(_formData, _schema, _customValidate, _transformErrors, _uiSchema) {\n        throw new Error('Unexpectedly calling the `validateFormData()` method during schema parsing');\n    }\n}\n//# sourceMappingURL=ParserValidator.js.map","import forEach from 'lodash/forEach';\nimport isEqual from 'lodash/isEqual';\nimport { PROPERTIES_KEY, ITEMS_KEY } from '../constants';\nimport ParserValidator from './ParserValidator';\nimport { retrieveSchemaInternal, resolveAnyOrOneOfSchemas } from '../schema/retrieveSchema';\n/** Recursive function used to parse the given `schema` belonging to the `rootSchema`. The `validator` is used to\n * capture the sub-schemas that the `isValid()` function is called with. For each schema returned by the\n * `retrieveSchemaInternal()`, the `resolveAnyOrOneOfSchemas()` function is called. For each of the schemas returned\n * from THAT call have `properties`, then each of the sub-schema property objects are then recursively parsed.\n *\n * @param validator - The `ParserValidator` implementation used to capture `isValid()` calls during parsing\n * @param recurseList - The list of schemas returned from the `retrieveSchemaInternal`, preventing infinite recursion\n * @param rootSchema - The root schema from which the schema parsing began\n * @param schema - The current schema element being parsed\n */\nfunction parseSchema(validator, recurseList, rootSchema, schema) {\n    const schemas = retrieveSchemaInternal(validator, schema, rootSchema, undefined, true);\n    schemas.forEach((schema) => {\n        const sameSchemaIndex = recurseList.findIndex((item) => isEqual(item, schema));\n        if (sameSchemaIndex === -1) {\n            recurseList.push(schema);\n            const allOptions = resolveAnyOrOneOfSchemas(validator, schema, rootSchema, true);\n            allOptions.forEach((s) => {\n                if (PROPERTIES_KEY in s && s[PROPERTIES_KEY]) {\n                    forEach(schema[PROPERTIES_KEY], (value) => {\n                        parseSchema(validator, recurseList, rootSchema, value);\n                    });\n                }\n            });\n            if (ITEMS_KEY in schema && !Array.isArray(schema.items) && typeof schema.items !== 'boolean') {\n                parseSchema(validator, recurseList, rootSchema, schema.items);\n            }\n        }\n    });\n}\n/** Parses the given `rootSchema` to extract out all the sub-schemas that maybe contained within it. Returns a map of\n * the hash of the schema to schema/sub-schema.\n *\n * @param rootSchema - The root schema to parse for sub-schemas used by `isValid()` calls\n * @returns - The `SchemaMap` of all schemas that were parsed\n */\nexport default function schemaParser(rootSchema) {\n    const validator = new ParserValidator(rootSchema);\n    const recurseList = [];\n    parseSchema(validator, recurseList, rootSchema, rootSchema);\n    return validator.getSchemaMap();\n}\n//# sourceMappingURL=schemaParser.js.map","import Ajv from 'ajv';\nimport addFormats from 'ajv-formats';\nimport isObject from 'lodash/isObject';\nimport { ADDITIONAL_PROPERTY_FLAG, RJSF_ADDITIONAL_PROPERTIES_FLAG } from '@rjsf/utils';\nexport const AJV_CONFIG = {\n    allErrors: true,\n    multipleOfPrecision: 8,\n    strict: false,\n    verbose: true,\n};\nexport const COLOR_FORMAT_REGEX = /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/;\nexport const DATA_URL_FORMAT_REGEX = /^data:([a-z]+\\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;\n/** Creates an Ajv version 8 implementation object with standard support for the 'color` and `data-url` custom formats.\n * If `additionalMetaSchemas` are provided then the Ajv instance is modified to add each of the meta schemas in the\n * list. If `customFormats` are provided then those additional formats are added to the list of supported formats. If\n * `ajvOptionsOverrides` are provided then they are spread on top of the default `AJV_CONFIG` options when constructing\n * the `Ajv` instance. With Ajv v8, the JSON Schema formats are not provided by default, but can be plugged in. By\n * default, all formats from the `ajv-formats` library are added. To disable this capability, set the `ajvFormatOptions`\n * parameter to `false`. Additionally, you can configure the `ajv-formats` by providing a custom set of\n * [format options](https://github.com/ajv-validator/ajv-formats) to the `ajvFormatOptions` parameter.\n *\n * @param [additionalMetaSchemas] - The list of additional meta schemas that the validator can access\n * @param [customFormats] - The set of additional custom formats that the validator will support\n * @param [ajvOptionsOverrides={}] - The set of validator config override options\n * @param [ajvFormatOptions] - The `ajv-format` options to use when adding formats to `ajv`; pass `false` to disable it\n * @param [AjvClass] - The `Ajv` class to use when creating the validator instance\n */\nexport default function createAjvInstance(additionalMetaSchemas, customFormats, ajvOptionsOverrides = {}, ajvFormatOptions, AjvClass = Ajv) {\n    const ajv = new AjvClass({ ...AJV_CONFIG, ...ajvOptionsOverrides });\n    if (ajvFormatOptions) {\n        addFormats(ajv, ajvFormatOptions);\n    }\n    else if (ajvFormatOptions !== false) {\n        addFormats(ajv);\n    }\n    // add custom formats\n    ajv.addFormat('data-url', DATA_URL_FORMAT_REGEX);\n    ajv.addFormat('color', COLOR_FORMAT_REGEX);\n    // Add RJSF-specific additional properties keywords so Ajv doesn't report errors if strict is enabled.\n    ajv.addKeyword(ADDITIONAL_PROPERTY_FLAG);\n    ajv.addKeyword(RJSF_ADDITIONAL_PROPERTIES_FLAG);\n    // add more schemas to validate against\n    if (Array.isArray(additionalMetaSchemas)) {\n        ajv.addMetaSchema(additionalMetaSchemas);\n    }\n    // add more custom formats to validate against\n    if (isObject(customFormats)) {\n        Object.keys(customFormats).forEach((formatName) => {\n            ajv.addFormat(formatName, customFormats[formatName]);\n        });\n    }\n    return ajv;\n}\n//# sourceMappingURL=createAjvInstance.js.map","import get from 'lodash/get';\nimport { createErrorHandler, getDefaultFormState, getUiOptions, PROPERTIES_KEY, toErrorSchema, unwrapErrorHandler, validationDataMerge, } from '@rjsf/utils';\n/** Transforming the error output from ajv to format used by @rjsf/utils.\n * At some point, components should be updated to support ajv.\n *\n * @param errors - The list of AJV errors to convert to `RJSFValidationErrors`\n * @param [uiSchema] - An optional uiSchema that is passed to `transformErrors` and `customValidate`\n */\nexport function transformRJSFValidationErrors(errors = [], uiSchema) {\n    return errors.map((e) => {\n        const { instancePath, keyword, params, schemaPath, parentSchema, ...rest } = e;\n        let { message = '' } = rest;\n        let property = instancePath.replace(/\\//g, '.');\n        let stack = `${property} ${message}`.trim();\n        if ('missingProperty' in params) {\n            property = property ? `${property}.${params.missingProperty}` : params.missingProperty;\n            const currentProperty = params.missingProperty;\n            const uiSchemaTitle = getUiOptions(get(uiSchema, `${property.replace(/^\\./, '')}`)).title;\n            if (uiSchemaTitle) {\n                message = message.replace(currentProperty, uiSchemaTitle);\n            }\n            else {\n                const parentSchemaTitle = get(parentSchema, [PROPERTIES_KEY, currentProperty, 'title']);\n                if (parentSchemaTitle) {\n                    message = message.replace(currentProperty, parentSchemaTitle);\n                }\n            }\n            stack = message;\n        }\n        else {\n            const uiSchemaTitle = getUiOptions(get(uiSchema, `${property.replace(/^\\./, '')}`)).title;\n            if (uiSchemaTitle) {\n                stack = `'${uiSchemaTitle}' ${message}`.trim();\n            }\n            else {\n                const parentSchemaTitle = parentSchema === null || parentSchema === void 0 ? void 0 : parentSchema.title;\n                if (parentSchemaTitle) {\n                    stack = `'${parentSchemaTitle}' ${message}`.trim();\n                }\n            }\n        }\n        // put data in expected format\n        return {\n            name: keyword,\n            property,\n            message,\n            params,\n            stack,\n            schemaPath,\n        };\n    });\n}\n/** This function processes the `formData` with an optional user contributed `customValidate` function, which receives\n * the form data and a `errorHandler` function that will be used to add custom validation errors for each field. Also\n * supports a `transformErrors` function that will take the raw AJV validation errors, prior to custom validation and\n * transform them in what ever way it chooses.\n *\n * @param validator - The `ValidatorType` implementation used for the `getDefaultFormState()` call\n * @param rawErrors - The list of raw `ErrorObject`s to process\n * @param formData - The form data to validate\n * @param schema - The schema against which to validate the form data\n * @param [customValidate] - An optional function that is used to perform custom validation\n * @param [transformErrors] - An optional function that is used to transform errors after AJV validation\n * @param [uiSchema] - An optional uiSchema that is passed to `transformErrors` and `customValidate`\n */\nexport default function processRawValidationErrors(validator, rawErrors, formData, schema, customValidate, transformErrors, uiSchema) {\n    const { validationError: invalidSchemaError } = rawErrors;\n    let errors = transformRJSFValidationErrors(rawErrors.errors, uiSchema);\n    if (invalidSchemaError) {\n        errors = [...errors, { stack: invalidSchemaError.message }];\n    }\n    if (typeof transformErrors === 'function') {\n        errors = transformErrors(errors, uiSchema);\n    }\n    let errorSchema = toErrorSchema(errors);\n    if (invalidSchemaError) {\n        errorSchema = {\n            ...errorSchema,\n            $schema: {\n                __errors: [invalidSchemaError.message],\n            },\n        };\n    }\n    if (typeof customValidate !== 'function') {\n        return { errors, errorSchema };\n    }\n    // Include form data with undefined values, which is required for custom validation.\n    const newFormData = getDefaultFormState(validator, schema, formData, schema, true);\n    const errorHandler = customValidate(newFormData, createErrorHandler(newFormData), uiSchema);\n    const userErrorSchema = unwrapErrorHandler(errorHandler);\n    return validationDataMerge({ errors, errorSchema }, userErrorSchema);\n}\n//# sourceMappingURL=processRawValidationErrors.js.map","import { deepEquals, ID_KEY, ROOT_SCHEMA_PREFIX, toErrorList, withIdRefPrefix, hashForSchema, } from '@rjsf/utils';\nimport createAjvInstance from './createAjvInstance';\nimport processRawValidationErrors from './processRawValidationErrors';\n/** `ValidatorType` implementation that uses the AJV 8 validation mechanism.\n */\nexport default class AJV8Validator {\n    /** Constructs an `AJV8Validator` instance using the `options`\n     *\n     * @param options - The `CustomValidatorOptionsType` options that are used to create the AJV instance\n     * @param [localizer] - If provided, is used to localize a list of Ajv `ErrorObject`s\n     */\n    constructor(options, localizer) {\n        const { additionalMetaSchemas, customFormats, ajvOptionsOverrides, ajvFormatOptions, AjvClass } = options;\n        this.ajv = createAjvInstance(additionalMetaSchemas, customFormats, ajvOptionsOverrides, ajvFormatOptions, AjvClass);\n        this.localizer = localizer;\n    }\n    /** Converts an `errorSchema` into a list of `RJSFValidationErrors`\n     *\n     * @param errorSchema - The `ErrorSchema` instance to convert\n     * @param [fieldPath=[]] - The current field path, defaults to [] if not specified\n     * @deprecated - Use the `toErrorList()` function provided by `@rjsf/utils` instead. This function will be removed in\n     *        the next major release.\n     */\n    toErrorList(errorSchema, fieldPath = []) {\n        return toErrorList(errorSchema, fieldPath);\n    }\n    /** Runs the pure validation of the `schema` and `formData` without any of the RJSF functionality. Provided for use\n     * by the playground. Returns the `errors` from the validation\n     *\n     * @param schema - The schema against which to validate the form data   * @param schema\n     * @param formData - The form data to validate\n     */\n    rawValidation(schema, formData) {\n        let compilationError = undefined;\n        let compiledValidator;\n        if (schema[ID_KEY]) {\n            compiledValidator = this.ajv.getSchema(schema[ID_KEY]);\n        }\n        try {\n            if (compiledValidator === undefined) {\n                compiledValidator = this.ajv.compile(schema);\n            }\n            compiledValidator(formData);\n        }\n        catch (err) {\n            compilationError = err;\n        }\n        let errors;\n        if (compiledValidator) {\n            if (typeof this.localizer === 'function') {\n                this.localizer(compiledValidator.errors);\n            }\n            errors = compiledValidator.errors || undefined;\n            // Clear errors to prevent persistent errors, see #1104\n            compiledValidator.errors = null;\n        }\n        return {\n            errors: errors,\n            validationError: compilationError,\n        };\n    }\n    /** This function processes the `formData` with an optional user contributed `customValidate` function, which receives\n     * the form data and a `errorHandler` function that will be used to add custom validation errors for each field. Also\n     * supports a `transformErrors` function that will take the raw AJV validation errors, prior to custom validation and\n     * transform them in what ever way it chooses.\n     *\n     * @param formData - The form data to validate\n     * @param schema - The schema against which to validate the form data\n     * @param [customValidate] - An optional function that is used to perform custom validation\n     * @param [transformErrors] - An optional function that is used to transform errors after AJV validation\n     * @param [uiSchema] - An optional uiSchema that is passed to `transformErrors` and `customValidate`\n     */\n    validateFormData(formData, schema, customValidate, transformErrors, uiSchema) {\n        const rawErrors = this.rawValidation(schema, formData);\n        return processRawValidationErrors(this, rawErrors, formData, schema, customValidate, transformErrors, uiSchema);\n    }\n    /**\n     * This function checks if a schema needs to be added and if the root schemas don't match it removes the old root schema from the ajv instance and adds the new one.\n     * @param rootSchema - The root schema used to provide $ref resolutions\n     */\n    handleSchemaUpdate(rootSchema) {\n        var _a, _b;\n        const rootSchemaId = (_a = rootSchema[ID_KEY]) !== null && _a !== void 0 ? _a : ROOT_SCHEMA_PREFIX;\n        // add the rootSchema ROOT_SCHEMA_PREFIX as id.\n        // if schema validator instance doesn't exist, add it.\n        // else if the root schemas don't match, we should remove and add the root schema so we don't have to remove and recompile the schema every run.\n        if (this.ajv.getSchema(rootSchemaId) === undefined) {\n            this.ajv.addSchema(rootSchema, rootSchemaId);\n        }\n        else if (!deepEquals(rootSchema, (_b = this.ajv.getSchema(rootSchemaId)) === null || _b === void 0 ? void 0 : _b.schema)) {\n            this.ajv.removeSchema(rootSchemaId);\n            this.ajv.addSchema(rootSchema, rootSchemaId);\n        }\n    }\n    /** Validates data against a schema, returning true if the data is valid, or\n     * false otherwise. If the schema is invalid, then this function will return\n     * false.\n     *\n     * @param schema - The schema against which to validate the form data\n     * @param formData - The form data to validate\n     * @param rootSchema - The root schema used to provide $ref resolutions\n     */\n    isValid(schema, formData, rootSchema) {\n        var _a;\n        try {\n            this.handleSchemaUpdate(rootSchema);\n            // then rewrite the schema ref's to point to the rootSchema\n            // this accounts for the case where schema have references to models\n            // that lives in the rootSchema but not in the schema in question.\n            const schemaWithIdRefPrefix = withIdRefPrefix(schema);\n            const schemaId = (_a = schemaWithIdRefPrefix[ID_KEY]) !== null && _a !== void 0 ? _a : hashForSchema(schemaWithIdRefPrefix);\n            let compiledValidator;\n            compiledValidator = this.ajv.getSchema(schemaId);\n            if (compiledValidator === undefined) {\n                // Add schema by an explicit ID so it can be fetched later\n                // Fall back to using compile if necessary\n                // https://ajv.js.org/guide/managing-schemas.html#pre-adding-all-schemas-vs-adding-on-demand\n                compiledValidator =\n                    this.ajv.addSchema(schemaWithIdRefPrefix, schemaId).getSchema(schemaId) ||\n                        this.ajv.compile(schemaWithIdRefPrefix);\n            }\n            const result = compiledValidator(formData);\n            return result;\n        }\n        catch (e) {\n            console.warn('Error encountered compiling schema:', e);\n            return false;\n        }\n    }\n}\n//# sourceMappingURL=validator.js.map","import AJV8Validator from './validator';\n/** Creates and returns a customized implementation of the `ValidatorType` with the given customization `options` if\n * provided. If a `localizer` is provided, it is used to translate the messages generated by the underlying AJV\n * validation.\n *\n * @param [options={}] - The `CustomValidatorOptionsType` options that are used to create the `ValidatorType` instance\n * @param [localizer] - If provided, is used to localize a list of Ajv `ErrorObject`s\n * @returns - The custom validator implementation resulting from the set of parameters provided\n */\nexport default function customizeValidator(options = {}, localizer) {\n    return new AJV8Validator(options, localizer);\n}\n//# sourceMappingURL=customizeValidator.js.map","import get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport { hashForSchema, ID_KEY, JUNK_OPTION_ID, toErrorList, retrieveSchema, } from '@rjsf/utils';\nimport processRawValidationErrors from './processRawValidationErrors';\n/** `ValidatorType` implementation that uses an AJV 8 precompiled validator as created by the\n * `compileSchemaValidators()` function provided by the `@rjsf/validator-ajv8` library.\n */\nexport default class AJV8PrecompiledValidator {\n    /** Constructs an `AJV8PrecompiledValidator` instance using the `validateFns` and `rootSchema`\n     *\n     * @param validateFns - The map of the validation functions that are generated by the `schemaCompile()` function\n     * @param rootSchema - The root schema that was used with the `compileSchema()` function\n     * @param [localizer] - If provided, is used to localize a list of Ajv `ErrorObject`s\n     * @throws - Error when the base schema of the precompiled validator does not have a matching validator function\n     */\n    constructor(validateFns, rootSchema, localizer) {\n        this.rootSchema = rootSchema;\n        this.validateFns = validateFns;\n        this.localizer = localizer;\n        this.mainValidator = this.getValidator(rootSchema);\n    }\n    /** Returns the precompiled validator associated with the given `schema` from the map of precompiled validator\n     * functions.\n     *\n     * @param schema - The schema for which a precompiled validator function is desired\n     * @returns - The precompiled validator function associated with this schema\n     */\n    getValidator(schema) {\n        const key = get(schema, ID_KEY) || hashForSchema(schema);\n        const validator = this.validateFns[key];\n        if (!validator) {\n            throw new Error(`No precompiled validator function was found for the given schema for \"${key}\"`);\n        }\n        return validator;\n    }\n    /** Ensures that the validator is using the same schema as the root schema used to construct the precompiled\n     * validator. It first compares the given `schema` against the root schema and if they aren't the same, then it\n     * checks against the resolved root schema, on the chance that a resolved version of the root schema was passed in\n     * instead of the raw root schema.\n     *\n     * @param schema - The schema against which to validate the form data\n     * @param [formData] - The form data to validate if any\n     */\n    ensureSameRootSchema(schema, formData) {\n        if (!isEqual(schema, this.rootSchema)) {\n            // Resolve the root schema with the passed in form data since that may affect the resolution\n            const resolvedRootSchema = retrieveSchema(this, this.rootSchema, this.rootSchema, formData);\n            if (!isEqual(schema, resolvedRootSchema)) {\n                throw new Error('The schema associated with the precompiled validator differs from the rootSchema provided for validation');\n            }\n        }\n        return true;\n    }\n    /** Converts an `errorSchema` into a list of `RJSFValidationErrors`\n     *\n     * @param errorSchema - The `ErrorSchema` instance to convert\n     * @param [fieldPath=[]] - The current field path, defaults to [] if not specified\n     * @deprecated - Use the `toErrorList()` function provided by `@rjsf/utils` instead. This function will be removed in\n     *        the next major release.\n     */\n    toErrorList(errorSchema, fieldPath = []) {\n        return toErrorList(errorSchema, fieldPath);\n    }\n    /** Runs the pure validation of the `schema` and `formData` without any of the RJSF functionality. Provided for use\n     * by the playground. Returns the `errors` from the validation\n     *\n     * @param schema - The schema against which to validate the form data\n     * @param [formData] - The form data to validate, if any\n     * @throws - Error when the schema provided does not match the base schema of the precompiled validator\n     */\n    rawValidation(schema, formData) {\n        this.ensureSameRootSchema(schema, formData);\n        this.mainValidator(formData);\n        if (typeof this.localizer === 'function') {\n            this.localizer(this.mainValidator.errors);\n        }\n        const errors = this.mainValidator.errors || undefined;\n        // Clear errors to prevent persistent errors, see #1104\n        this.mainValidator.errors = null;\n        return { errors: errors };\n    }\n    /** This function processes the `formData` with an optional user contributed `customValidate` function, which receives\n     * the form data and a `errorHandler` function that will be used to add custom validation errors for each field. Also\n     * supports a `transformErrors` function that will take the raw AJV validation errors, prior to custom validation and\n     * transform them in what ever way it chooses.\n     *\n     * @param formData - The form data to validate\n     * @param schema - The schema against which to validate the form data\n     * @param [customValidate] - An optional function that is used to perform custom validation\n     * @param [transformErrors] - An optional function that is used to transform errors after AJV validation\n     * @param [uiSchema] - An optional uiSchema that is passed to `transformErrors` and `customValidate`\n     */\n    validateFormData(formData, schema, customValidate, transformErrors, uiSchema) {\n        const rawErrors = this.rawValidation(schema, formData);\n        return processRawValidationErrors(this, rawErrors, formData, schema, customValidate, transformErrors, uiSchema);\n    }\n    /** Validates data against a schema, returning true if the data is valid, or false otherwise. If the schema is\n     * invalid, then this function will return false.\n     *\n     * @param schema - The schema against which to validate the form data\n     * @param formData - The form data to validate\n     * @param rootSchema - The root schema used to provide $ref resolutions\n     * @returns - true if the formData validates against the schema, false otherwise\n     * @throws - Error when the schema provided does not match the base schema of the precompiled validator OR if there\n     *        isn't a precompiled validator function associated with the schema\n     */\n    isValid(schema, formData, rootSchema) {\n        this.ensureSameRootSchema(rootSchema, formData);\n        if (get(schema, ID_KEY) === JUNK_OPTION_ID) {\n            return false;\n        }\n        const validator = this.getValidator(schema);\n        return validator(formData);\n    }\n}\n//# sourceMappingURL=precompiledValidator.js.map","import AJV8PrecompiledValidator from './precompiledValidator';\n/** Creates and returns a `ValidatorType` interface that is implemented with a precompiled validator. If a `localizer`\n * is provided, it is used to translate the messages generated by the underlying AJV validation.\n *\n * NOTE: The `validateFns` parameter is an object obtained by importing from a precompiled validation file created via\n * the `compileSchemaValidators()` function.\n *\n * @param validateFns - The map of the validation functions that are created by the `compileSchemaValidators()` function\n * @param rootSchema - The root schema that was used with the `compileSchemaValidators()` function\n * @param [localizer] - If provided, is used to localize a list of Ajv `ErrorObject`s\n * @returns - The precompiled validator implementation resulting from the set of parameters provided\n */\nexport default function createPrecompiledValidator(validateFns, rootSchema, localizer) {\n    return new AJV8PrecompiledValidator(validateFns, rootSchema, localizer);\n}\n//# sourceMappingURL=createPrecompiledValidator.js.map","import customizeValidator from './customizeValidator';\nimport createPrecompiledValidator from './createPrecompiledValidator';\nexport { customizeValidator, createPrecompiledValidator };\nexport * from './types';\nexport default customizeValidator();\n//# sourceMappingURL=index.js.map","const useTransformSchemaToProps = (step, options = {}) => {\n  const { layouts = [] } = options;\n  const objectFieldTemplate = step?.uiSchema[\"ui:ObjectFieldTemplate\"];\n  if (typeof objectFieldTemplate !== \"string\") {\n    return step;\n  }\n  const Layout = layouts.find(\n    (layout) => layout.name === objectFieldTemplate\n  )?.component;\n  if (!Layout) {\n    return step;\n  }\n  return {\n    ...step,\n    uiSchema: {\n      ...step.uiSchema,\n      [\"ui:ObjectFieldTemplate\"]: Layout\n    }\n  };\n};\n\nexport { useTransformSchemaToProps };\n//# sourceMappingURL=useTransformSchemaToProps.esm.js.map\n","import React from 'react';\nimport { MarkdownContent } from '@backstage/core-components';\n\nconst DescriptionField = ({ description }) => description && /* @__PURE__ */ React.createElement(MarkdownContent, { content: description, linkTarget: \"_blank\" });\n\nexport { DescriptionField };\n//# sourceMappingURL=DescriptionField.esm.js.map\n","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Component } from 'react';\nimport { getTemplate, getWidget, getUiOptions, isFixedItems, allowAdditionalItems, isCustomWidget, optionsList, TranslatableString, ITEMS_KEY, } from '@rjsf/utils';\nimport cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\nimport isObject from 'lodash/isObject';\nimport set from 'lodash/set';\nimport { nanoid } from 'nanoid';\n/** Used to generate a unique ID for an element in a row */\nfunction generateRowId() {\n    return nanoid();\n}\n/** Converts the `formData` into `KeyedFormDataType` data, using the `generateRowId()` function to create the key\n *\n * @param formData - The data for the form\n * @returns - The `formData` converted into a `KeyedFormDataType` element\n */\nfunction generateKeyedFormData(formData) {\n    return !Array.isArray(formData)\n        ? []\n        : formData.map((item) => {\n            return {\n                key: generateRowId(),\n                item,\n            };\n        });\n}\n/** Converts `KeyedFormDataType` data into the inner `formData`\n *\n * @param keyedFormData - The `KeyedFormDataType` to be converted\n * @returns - The inner `formData` item(s) in the `keyedFormData`\n */\nfunction keyedToPlainFormData(keyedFormData) {\n    if (Array.isArray(keyedFormData)) {\n        return keyedFormData.map((keyedItem) => keyedItem.item);\n    }\n    return [];\n}\n/** The `ArrayField` component is used to render a field in the schema that is of type `array`. It supports both normal\n * and fixed array, allowing user to add and remove elements from the array data.\n */\nclass ArrayField extends Component {\n    /** Constructs an `ArrayField` from the `props`, generating the initial keyed data from the `formData`\n     *\n     * @param props - The `FieldProps` for this template\n     */\n    constructor(props) {\n        super(props);\n        /** Returns the default form information for an item based on the schema for that item. Deals with the possibility\n         * that the schema is fixed and allows additional items.\n         */\n        this._getNewFormDataRow = () => {\n            const { schema, registry } = this.props;\n            const { schemaUtils } = registry;\n            let itemSchema = schema.items;\n            if (isFixedItems(schema) && allowAdditionalItems(schema)) {\n                itemSchema = schema.additionalItems;\n            }\n            // Cast this as a T to work around schema utils being for T[] caused by the FieldProps<T[], S, F> call on the class\n            return schemaUtils.getDefaultFormState(itemSchema);\n        };\n        /** Callback handler for when the user clicks on the add button. Creates a new row of keyed form data at the end of\n         * the list, adding it into the state, and then returning `onChange()` with the plain form data converted from the\n         * keyed data\n         *\n         * @param event - The event for the click\n         */\n        this.onAddClick = (event) => {\n            this._handleAddClick(event);\n        };\n        /** Callback handler for when the user clicks on the add button on an existing array element. Creates a new row of\n         * keyed form data inserted at the `index`, adding it into the state, and then returning `onChange()` with the plain\n         * form data converted from the keyed data\n         *\n         * @param index - The index at which the add button is clicked\n         */\n        this.onAddIndexClick = (index) => {\n            return (event) => {\n                this._handleAddClick(event, index);\n            };\n        };\n        /** Callback handler for when the user clicks on the copy button on an existing array element. Clones the row of\n         * keyed form data at the `index` into the next position in the state, and then returning `onChange()` with the plain\n         * form data converted from the keyed data\n         *\n         * @param index - The index at which the copy button is clicked\n         */\n        this.onCopyIndexClick = (index) => {\n            return (event) => {\n                if (event) {\n                    event.preventDefault();\n                }\n                const { onChange, errorSchema } = this.props;\n                const { keyedFormData } = this.state;\n                // refs #195: revalidate to ensure properly reindexing errors\n                let newErrorSchema;\n                if (errorSchema) {\n                    newErrorSchema = {};\n                    for (const idx in errorSchema) {\n                        const i = parseInt(idx);\n                        if (i <= index) {\n                            set(newErrorSchema, [i], errorSchema[idx]);\n                        }\n                        else if (i > index) {\n                            set(newErrorSchema, [i + 1], errorSchema[idx]);\n                        }\n                    }\n                }\n                const newKeyedFormDataRow = {\n                    key: generateRowId(),\n                    item: cloneDeep(keyedFormData[index].item),\n                };\n                const newKeyedFormData = [...keyedFormData];\n                if (index !== undefined) {\n                    newKeyedFormData.splice(index + 1, 0, newKeyedFormDataRow);\n                }\n                else {\n                    newKeyedFormData.push(newKeyedFormDataRow);\n                }\n                this.setState({\n                    keyedFormData: newKeyedFormData,\n                    updatedKeyedFormData: true,\n                }, () => onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema));\n            };\n        };\n        /** Callback handler for when the user clicks on the remove button on an existing array element. Removes the row of\n         * keyed form data at the `index` in the state, and then returning `onChange()` with the plain form data converted\n         * from the keyed data\n         *\n         * @param index - The index at which the remove button is clicked\n         */\n        this.onDropIndexClick = (index) => {\n            return (event) => {\n                if (event) {\n                    event.preventDefault();\n                }\n                const { onChange, errorSchema } = this.props;\n                const { keyedFormData } = this.state;\n                // refs #195: revalidate to ensure properly reindexing errors\n                let newErrorSchema;\n                if (errorSchema) {\n                    newErrorSchema = {};\n                    for (const idx in errorSchema) {\n                        const i = parseInt(idx);\n                        if (i < index) {\n                            set(newErrorSchema, [i], errorSchema[idx]);\n                        }\n                        else if (i > index) {\n                            set(newErrorSchema, [i - 1], errorSchema[idx]);\n                        }\n                    }\n                }\n                const newKeyedFormData = keyedFormData.filter((_, i) => i !== index);\n                this.setState({\n                    keyedFormData: newKeyedFormData,\n                    updatedKeyedFormData: true,\n                }, () => onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema));\n            };\n        };\n        /** Callback handler for when the user clicks on one of the move item buttons on an existing array element. Moves the\n         * row of keyed form data at the `index` to the `newIndex` in the state, and then returning `onChange()` with the\n         * plain form data converted from the keyed data\n         *\n         * @param index - The index of the item to move\n         * @param newIndex - The index to where the item is to be moved\n         */\n        this.onReorderClick = (index, newIndex) => {\n            return (event) => {\n                if (event) {\n                    event.preventDefault();\n                    event.currentTarget.blur();\n                }\n                const { onChange, errorSchema } = this.props;\n                let newErrorSchema;\n                if (errorSchema) {\n                    newErrorSchema = {};\n                    for (const idx in errorSchema) {\n                        const i = parseInt(idx);\n                        if (i == index) {\n                            set(newErrorSchema, [newIndex], errorSchema[index]);\n                        }\n                        else if (i == newIndex) {\n                            set(newErrorSchema, [index], errorSchema[newIndex]);\n                        }\n                        else {\n                            set(newErrorSchema, [idx], errorSchema[i]);\n                        }\n                    }\n                }\n                const { keyedFormData } = this.state;\n                function reOrderArray() {\n                    // Copy item\n                    const _newKeyedFormData = keyedFormData.slice();\n                    // Moves item from index to newIndex\n                    _newKeyedFormData.splice(index, 1);\n                    _newKeyedFormData.splice(newIndex, 0, keyedFormData[index]);\n                    return _newKeyedFormData;\n                }\n                const newKeyedFormData = reOrderArray();\n                this.setState({\n                    keyedFormData: newKeyedFormData,\n                }, () => onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema));\n            };\n        };\n        /** Callback handler used to deal with changing the value of the data in the array at the `index`. Calls the\n         * `onChange` callback with the updated form data\n         *\n         * @param index - The index of the item being changed\n         */\n        this.onChangeForIndex = (index) => {\n            return (value, newErrorSchema, id) => {\n                const { formData, onChange, errorSchema } = this.props;\n                const arrayData = Array.isArray(formData) ? formData : [];\n                const newFormData = arrayData.map((item, i) => {\n                    // We need to treat undefined items as nulls to have validation.\n                    // See https://github.com/tdegrunt/jsonschema/issues/206\n                    const jsonValue = typeof value === 'undefined' ? null : value;\n                    return index === i ? jsonValue : item;\n                });\n                onChange(newFormData, errorSchema &&\n                    errorSchema && {\n                    ...errorSchema,\n                    [index]: newErrorSchema,\n                }, id);\n            };\n        };\n        /** Callback handler used to change the value for a checkbox */\n        this.onSelectChange = (value) => {\n            const { onChange, idSchema } = this.props;\n            onChange(value, undefined, idSchema && idSchema.$id);\n        };\n        const { formData = [] } = props;\n        const keyedFormData = generateKeyedFormData(formData);\n        this.state = {\n            keyedFormData,\n            updatedKeyedFormData: false,\n        };\n    }\n    /** React lifecycle method that is called when the props are about to change allowing the state to be updated. It\n     * regenerates the keyed form data and returns it\n     *\n     * @param nextProps - The next set of props data\n     * @param prevState - The previous set of state data\n     */\n    static getDerivedStateFromProps(nextProps, prevState) {\n        // Don't call getDerivedStateFromProps if keyed formdata was just updated.\n        if (prevState.updatedKeyedFormData) {\n            return {\n                updatedKeyedFormData: false,\n            };\n        }\n        const nextFormData = Array.isArray(nextProps.formData) ? nextProps.formData : [];\n        const previousKeyedFormData = prevState.keyedFormData || [];\n        const newKeyedFormData = nextFormData.length === previousKeyedFormData.length\n            ? previousKeyedFormData.map((previousKeyedFormDatum, index) => {\n                return {\n                    key: previousKeyedFormDatum.key,\n                    item: nextFormData[index],\n                };\n            })\n            : generateKeyedFormData(nextFormData);\n        return {\n            keyedFormData: newKeyedFormData,\n        };\n    }\n    /** Returns the appropriate title for an item by getting first the title from the schema.items, then falling back to\n     * the description from the schema.items, and finally the string \"Item\"\n     */\n    get itemTitle() {\n        const { schema, registry } = this.props;\n        const { translateString } = registry;\n        return get(schema, [ITEMS_KEY, 'title'], get(schema, [ITEMS_KEY, 'description'], translateString(TranslatableString.ArrayItemTitle)));\n    }\n    /** Determines whether the item described in the schema is always required, which is determined by whether any item\n     * may be null.\n     *\n     * @param itemSchema - The schema for the item\n     * @return - True if the item schema type does not contain the \"null\" type\n     */\n    isItemRequired(itemSchema) {\n        if (Array.isArray(itemSchema.type)) {\n            // While we don't yet support composite/nullable jsonschema types, it's\n            // future-proof to check for requirement against these.\n            return !itemSchema.type.includes('null');\n        }\n        // All non-null array item types are inherently required by design\n        return itemSchema.type !== 'null';\n    }\n    /** Determines whether more items can be added to the array. If the uiSchema indicates the array doesn't allow adding\n     * then false is returned. Otherwise, if the schema indicates that there are a maximum number of items and the\n     * `formData` matches that value, then false is returned, otherwise true is returned.\n     *\n     * @param formItems - The list of items in the form\n     * @returns - True if the item is addable otherwise false\n     */\n    canAddItem(formItems) {\n        const { schema, uiSchema, registry } = this.props;\n        let { addable } = getUiOptions(uiSchema, registry.globalUiOptions);\n        if (addable !== false) {\n            // if ui:options.addable was not explicitly set to false, we can add\n            // another item if we have not exceeded maxItems yet\n            if (schema.maxItems !== undefined) {\n                addable = formItems.length < schema.maxItems;\n            }\n            else {\n                addable = true;\n            }\n        }\n        return addable;\n    }\n    /** Callback handler for when the user clicks on the add or add at index buttons. Creates a new row of keyed form data\n     * either at the end of the list (when index is not specified) or inserted at the `index` when it is, adding it into\n     * the state, and then returning `onChange()` with the plain form data converted from the keyed data\n     *\n     * @param event - The event for the click\n     * @param [index] - The optional index at which to add the new data\n     */\n    _handleAddClick(event, index) {\n        if (event) {\n            event.preventDefault();\n        }\n        const { onChange, errorSchema } = this.props;\n        const { keyedFormData } = this.state;\n        // refs #195: revalidate to ensure properly reindexing errors\n        let newErrorSchema;\n        if (errorSchema) {\n            newErrorSchema = {};\n            for (const idx in errorSchema) {\n                const i = parseInt(idx);\n                if (index === undefined || i < index) {\n                    set(newErrorSchema, [i], errorSchema[idx]);\n                }\n                else if (i >= index) {\n                    set(newErrorSchema, [i + 1], errorSchema[idx]);\n                }\n            }\n        }\n        const newKeyedFormDataRow = {\n            key: generateRowId(),\n            item: this._getNewFormDataRow(),\n        };\n        const newKeyedFormData = [...keyedFormData];\n        if (index !== undefined) {\n            newKeyedFormData.splice(index, 0, newKeyedFormDataRow);\n        }\n        else {\n            newKeyedFormData.push(newKeyedFormDataRow);\n        }\n        this.setState({\n            keyedFormData: newKeyedFormData,\n            updatedKeyedFormData: true,\n        }, () => onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema));\n    }\n    /** Renders the `ArrayField` depending on the specific needs of the schema and uischema elements\n     */\n    render() {\n        const { schema, uiSchema, idSchema, registry } = this.props;\n        const { schemaUtils, translateString } = registry;\n        if (!(ITEMS_KEY in schema)) {\n            const uiOptions = getUiOptions(uiSchema);\n            const UnsupportedFieldTemplate = getTemplate('UnsupportedFieldTemplate', registry, uiOptions);\n            return (_jsx(UnsupportedFieldTemplate, { schema: schema, idSchema: idSchema, reason: translateString(TranslatableString.MissingItems), registry: registry }));\n        }\n        if (schemaUtils.isMultiSelect(schema)) {\n            // If array has enum or uniqueItems set to true, call renderMultiSelect() to render the default multiselect widget or a custom widget, if specified.\n            return this.renderMultiSelect();\n        }\n        if (isCustomWidget(uiSchema)) {\n            return this.renderCustomWidget();\n        }\n        if (isFixedItems(schema)) {\n            return this.renderFixedArray();\n        }\n        if (schemaUtils.isFilesArray(schema, uiSchema)) {\n            return this.renderFiles();\n        }\n        return this.renderNormalArray();\n    }\n    /** Renders a normal array without any limitations of length\n     */\n    renderNormalArray() {\n        const { schema, uiSchema = {}, errorSchema, idSchema, name, title, disabled = false, readonly = false, autofocus = false, required = false, registry, onBlur, onFocus, idPrefix, idSeparator = '_', rawErrors, } = this.props;\n        const { keyedFormData } = this.state;\n        const fieldTitle = schema.title || title || name;\n        const { schemaUtils, formContext } = registry;\n        const uiOptions = getUiOptions(uiSchema);\n        const _schemaItems = isObject(schema.items) ? schema.items : {};\n        const itemsSchema = schemaUtils.retrieveSchema(_schemaItems);\n        const formData = keyedToPlainFormData(this.state.keyedFormData);\n        const canAdd = this.canAddItem(formData);\n        const arrayProps = {\n            canAdd,\n            items: keyedFormData.map((keyedItem, index) => {\n                const { key, item } = keyedItem;\n                // While we are actually dealing with a single item of type T, the types require a T[], so cast\n                const itemCast = item;\n                const itemSchema = schemaUtils.retrieveSchema(_schemaItems, itemCast);\n                const itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n                const itemIdPrefix = idSchema.$id + idSeparator + index;\n                const itemIdSchema = schemaUtils.toIdSchema(itemSchema, itemIdPrefix, itemCast, idPrefix, idSeparator);\n                return this.renderArrayFieldItem({\n                    key,\n                    index,\n                    name: name && `${name}-${index}`,\n                    title: fieldTitle ? `${fieldTitle}-${index + 1}` : undefined,\n                    canAdd,\n                    canMoveUp: index > 0,\n                    canMoveDown: index < formData.length - 1,\n                    itemSchema,\n                    itemIdSchema,\n                    itemErrorSchema,\n                    itemData: itemCast,\n                    itemUiSchema: uiSchema.items,\n                    autofocus: autofocus && index === 0,\n                    onBlur,\n                    onFocus,\n                    rawErrors,\n                    totalItems: keyedFormData.length,\n                });\n            }),\n            className: `field field-array field-array-of-${itemsSchema.type}`,\n            disabled,\n            idSchema,\n            uiSchema,\n            onAddClick: this.onAddClick,\n            readonly,\n            required,\n            schema,\n            title: fieldTitle,\n            formContext,\n            formData,\n            rawErrors,\n            registry,\n        };\n        const Template = getTemplate('ArrayFieldTemplate', registry, uiOptions);\n        return _jsx(Template, { ...arrayProps });\n    }\n    /** Renders an array using the custom widget provided by the user in the `uiSchema`\n     */\n    renderCustomWidget() {\n        var _a;\n        const { schema, idSchema, uiSchema, disabled = false, readonly = false, autofocus = false, required = false, hideError, placeholder, onBlur, onFocus, formData: items = [], registry, rawErrors, name, } = this.props;\n        const { widgets, formContext, globalUiOptions, schemaUtils } = registry;\n        const { widget, title: uiTitle, ...options } = getUiOptions(uiSchema, globalUiOptions);\n        const Widget = getWidget(schema, widget, widgets);\n        const label = (_a = uiTitle !== null && uiTitle !== void 0 ? uiTitle : schema.title) !== null && _a !== void 0 ? _a : name;\n        const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n        return (_jsx(Widget, { id: idSchema.$id, name: name, multiple: true, onChange: this.onSelectChange, onBlur: onBlur, onFocus: onFocus, options: options, schema: schema, uiSchema: uiSchema, registry: registry, value: items, disabled: disabled, readonly: readonly, hideError: hideError, required: required, label: label, hideLabel: !displayLabel, placeholder: placeholder, formContext: formContext, autofocus: autofocus, rawErrors: rawErrors }));\n    }\n    /** Renders an array as a set of checkboxes\n     */\n    renderMultiSelect() {\n        var _a;\n        const { schema, idSchema, uiSchema, formData: items = [], disabled = false, readonly = false, autofocus = false, required = false, placeholder, onBlur, onFocus, registry, rawErrors, name, } = this.props;\n        const { widgets, schemaUtils, formContext, globalUiOptions } = registry;\n        const itemsSchema = schemaUtils.retrieveSchema(schema.items, items);\n        const enumOptions = optionsList(itemsSchema);\n        const { widget = 'select', title: uiTitle, ...options } = getUiOptions(uiSchema, globalUiOptions);\n        const Widget = getWidget(schema, widget, widgets);\n        const label = (_a = uiTitle !== null && uiTitle !== void 0 ? uiTitle : schema.title) !== null && _a !== void 0 ? _a : name;\n        const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n        return (_jsx(Widget, { id: idSchema.$id, name: name, multiple: true, onChange: this.onSelectChange, onBlur: onBlur, onFocus: onFocus, options: { ...options, enumOptions }, schema: schema, uiSchema: uiSchema, registry: registry, value: items, disabled: disabled, readonly: readonly, required: required, label: label, hideLabel: !displayLabel, placeholder: placeholder, formContext: formContext, autofocus: autofocus, rawErrors: rawErrors }));\n    }\n    /** Renders an array of files using the `FileWidget`\n     */\n    renderFiles() {\n        var _a;\n        const { schema, uiSchema, idSchema, name, disabled = false, readonly = false, autofocus = false, required = false, onBlur, onFocus, registry, formData: items = [], rawErrors, } = this.props;\n        const { widgets, formContext, globalUiOptions, schemaUtils } = registry;\n        const { widget = 'files', title: uiTitle, ...options } = getUiOptions(uiSchema, globalUiOptions);\n        const Widget = getWidget(schema, widget, widgets);\n        const label = (_a = uiTitle !== null && uiTitle !== void 0 ? uiTitle : schema.title) !== null && _a !== void 0 ? _a : name;\n        const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n        return (_jsx(Widget, { options: options, id: idSchema.$id, name: name, multiple: true, onChange: this.onSelectChange, onBlur: onBlur, onFocus: onFocus, schema: schema, uiSchema: uiSchema, value: items, disabled: disabled, readonly: readonly, required: required, registry: registry, formContext: formContext, autofocus: autofocus, rawErrors: rawErrors, label: label, hideLabel: !displayLabel }));\n    }\n    /** Renders an array that has a maximum limit of items\n     */\n    renderFixedArray() {\n        const { schema, uiSchema = {}, formData = [], errorSchema, idPrefix, idSeparator = '_', idSchema, name, title, disabled = false, readonly = false, autofocus = false, required = false, registry, onBlur, onFocus, rawErrors, } = this.props;\n        const { keyedFormData } = this.state;\n        let { formData: items = [] } = this.props;\n        const fieldTitle = schema.title || title || name;\n        const uiOptions = getUiOptions(uiSchema);\n        const { schemaUtils, formContext } = registry;\n        const _schemaItems = isObject(schema.items) ? schema.items : [];\n        const itemSchemas = _schemaItems.map((item, index) => schemaUtils.retrieveSchema(item, formData[index]));\n        const additionalSchema = isObject(schema.additionalItems)\n            ? schemaUtils.retrieveSchema(schema.additionalItems, formData)\n            : null;\n        if (!items || items.length < itemSchemas.length) {\n            // to make sure at least all fixed items are generated\n            items = items || [];\n            items = items.concat(new Array(itemSchemas.length - items.length));\n        }\n        // These are the props passed into the render function\n        const canAdd = this.canAddItem(items) && !!additionalSchema;\n        const arrayProps = {\n            canAdd,\n            className: 'field field-array field-array-fixed-items',\n            disabled,\n            idSchema,\n            formData,\n            items: keyedFormData.map((keyedItem, index) => {\n                const { key, item } = keyedItem;\n                // While we are actually dealing with a single item of type T, the types require a T[], so cast\n                const itemCast = item;\n                const additional = index >= itemSchemas.length;\n                const itemSchema = (additional && isObject(schema.additionalItems)\n                    ? schemaUtils.retrieveSchema(schema.additionalItems, itemCast)\n                    : itemSchemas[index]) || {};\n                const itemIdPrefix = idSchema.$id + idSeparator + index;\n                const itemIdSchema = schemaUtils.toIdSchema(itemSchema, itemIdPrefix, itemCast, idPrefix, idSeparator);\n                const itemUiSchema = additional\n                    ? uiSchema.additionalItems || {}\n                    : Array.isArray(uiSchema.items)\n                        ? uiSchema.items[index]\n                        : uiSchema.items || {};\n                const itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n                return this.renderArrayFieldItem({\n                    key,\n                    index,\n                    name: name && `${name}-${index}`,\n                    title: fieldTitle ? `${fieldTitle}-${index + 1}` : undefined,\n                    canAdd,\n                    canRemove: additional,\n                    canMoveUp: index >= itemSchemas.length + 1,\n                    canMoveDown: additional && index < items.length - 1,\n                    itemSchema,\n                    itemData: itemCast,\n                    itemUiSchema,\n                    itemIdSchema,\n                    itemErrorSchema,\n                    autofocus: autofocus && index === 0,\n                    onBlur,\n                    onFocus,\n                    rawErrors,\n                    totalItems: keyedFormData.length,\n                });\n            }),\n            onAddClick: this.onAddClick,\n            readonly,\n            required,\n            registry,\n            schema,\n            uiSchema,\n            title: fieldTitle,\n            formContext,\n            errorSchema,\n            rawErrors,\n        };\n        const Template = getTemplate('ArrayFieldTemplate', registry, uiOptions);\n        return _jsx(Template, { ...arrayProps });\n    }\n    /** Renders the individual array item using a `SchemaField` along with the additional properties required to be send\n     * back to the `ArrayFieldItemTemplate`.\n     *\n     * @param props - The props for the individual array item to be rendered\n     */\n    renderArrayFieldItem(props) {\n        const { key, index, name, canAdd, canRemove = true, canMoveUp, canMoveDown, itemSchema, itemData, itemUiSchema, itemIdSchema, itemErrorSchema, autofocus, onBlur, onFocus, rawErrors, totalItems, title, } = props;\n        const { disabled, hideError, idPrefix, idSeparator, readonly, uiSchema, registry, formContext } = this.props;\n        const { fields: { ArraySchemaField, SchemaField }, globalUiOptions, } = registry;\n        const ItemSchemaField = ArraySchemaField || SchemaField;\n        const { orderable = true, removable = true, copyable = false } = getUiOptions(uiSchema, globalUiOptions);\n        const has = {\n            moveUp: orderable && canMoveUp,\n            moveDown: orderable && canMoveDown,\n            copy: copyable && canAdd,\n            remove: removable && canRemove,\n            toolbar: false,\n        };\n        has.toolbar = Object.keys(has).some((key) => has[key]);\n        return {\n            children: (_jsx(ItemSchemaField, { name: name, title: title, index: index, schema: itemSchema, uiSchema: itemUiSchema, formData: itemData, formContext: formContext, errorSchema: itemErrorSchema, idPrefix: idPrefix, idSeparator: idSeparator, idSchema: itemIdSchema, required: this.isItemRequired(itemSchema), onChange: this.onChangeForIndex(index), onBlur: onBlur, onFocus: onFocus, registry: registry, disabled: disabled, readonly: readonly, hideError: hideError, autofocus: autofocus, rawErrors: rawErrors })),\n            className: 'array-item',\n            disabled,\n            canAdd,\n            hasCopy: has.copy,\n            hasToolbar: has.toolbar,\n            hasMoveUp: has.moveUp,\n            hasMoveDown: has.moveDown,\n            hasRemove: has.remove,\n            index,\n            totalItems,\n            key,\n            onAddIndexClick: this.onAddIndexClick,\n            onCopyIndexClick: this.onCopyIndexClick,\n            onDropIndexClick: this.onDropIndexClick,\n            onReorderClick: this.onReorderClick,\n            readonly,\n            registry,\n            schema: itemSchema,\n            uiSchema: itemUiSchema,\n        };\n    }\n}\n/** `ArrayField` is `React.ComponentType<FieldProps<T[], S, F>>` (necessarily) but the `registry` requires things to be a\n * `Field` which is defined as `React.ComponentType<FieldProps<T, S, F>>`, so cast it to make `registry` happy.\n */\nexport default ArrayField;\n//# sourceMappingURL=ArrayField.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getWidget, getUiOptions, optionsList, TranslatableString, } from '@rjsf/utils';\nimport isObject from 'lodash/isObject';\n/** The `BooleanField` component is used to render a field in the schema is boolean. It constructs `enumOptions` for the\n * two boolean values based on the various alternatives in the schema.\n *\n * @param props - The `FieldProps` for this template\n */\nfunction BooleanField(props) {\n    var _a, _b, _c;\n    const { schema, name, uiSchema, idSchema, formData, registry, required, disabled, readonly, hideError, autofocus, title, onChange, onFocus, onBlur, rawErrors, } = props;\n    const { title: schemaTitle } = schema;\n    const { widgets, formContext, translateString, globalUiOptions } = registry;\n    const { widget = 'checkbox', title: uiTitle, \n    // Unlike the other fields, don't use `getDisplayLabel()` since it always returns false for the boolean type\n    label: displayLabel = true, ...options } = getUiOptions(uiSchema, globalUiOptions);\n    const Widget = getWidget(schema, widget, widgets);\n    const yes = translateString(TranslatableString.YesLabel);\n    const no = translateString(TranslatableString.NoLabel);\n    let enumOptions;\n    const label = (_b = (_a = uiTitle !== null && uiTitle !== void 0 ? uiTitle : schemaTitle) !== null && _a !== void 0 ? _a : title) !== null && _b !== void 0 ? _b : name;\n    if (Array.isArray(schema.oneOf)) {\n        enumOptions = optionsList({\n            oneOf: schema.oneOf\n                .map((option) => {\n                if (isObject(option)) {\n                    return {\n                        ...option,\n                        title: option.title || (option.const === true ? yes : no),\n                    };\n                }\n                return undefined;\n            })\n                .filter((o) => o), // cast away the error that typescript can't grok is fixed\n        });\n    }\n    else {\n        // We deprecated enumNames in v5. It's intentionally omitted from RSJFSchema type, so we need to cast here.\n        const schemaWithEnumNames = schema;\n        const enums = (_c = schema.enum) !== null && _c !== void 0 ? _c : [true, false];\n        if (!schemaWithEnumNames.enumNames && enums.length === 2 && enums.every((v) => typeof v === 'boolean')) {\n            enumOptions = [\n                {\n                    value: enums[0],\n                    label: enums[0] ? yes : no,\n                },\n                {\n                    value: enums[1],\n                    label: enums[1] ? yes : no,\n                },\n            ];\n        }\n        else {\n            enumOptions = optionsList({\n                enum: enums,\n                // NOTE: enumNames is deprecated, but still supported for now.\n                enumNames: schemaWithEnumNames.enumNames,\n            });\n        }\n    }\n    return (_jsx(Widget, { options: { ...options, enumOptions }, schema: schema, uiSchema: uiSchema, id: idSchema.$id, name: name, onChange: onChange, onFocus: onFocus, onBlur: onBlur, label: label, hideLabel: !displayLabel, value: formData, required: required, disabled: disabled, readonly: readonly, hideError: hideError, registry: registry, formContext: formContext, autofocus: autofocus, rawErrors: rawErrors }));\n}\nexport default BooleanField;\n//# sourceMappingURL=BooleanField.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Component } from 'react';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport omit from 'lodash/omit';\nimport { ANY_OF_KEY, deepEquals, ERRORS_KEY, getDiscriminatorFieldFromSchema, getUiOptions, getWidget, mergeSchemas, ONE_OF_KEY, TranslatableString, } from '@rjsf/utils';\n/** The `AnyOfField` component is used to render a field in the schema that is an `anyOf`, `allOf` or `oneOf`. It tracks\n * the currently selected option and cleans up any irrelevant data in `formData`.\n *\n * @param props - The `FieldProps` for this template\n */\nclass AnyOfField extends Component {\n    /** Constructs an `AnyOfField` with the given `props` to initialize the initially selected option in state\n     *\n     * @param props - The `FieldProps` for this template\n     */\n    constructor(props) {\n        super(props);\n        /** Callback handler to remember what the currently selected option is. In addition to that the `formData` is updated\n         * to remove properties that are not part of the newly selected option schema, and then the updated data is passed to\n         * the `onChange` handler.\n         *\n         * @param option - The new option value being selected\n         */\n        this.onOptionChange = (option) => {\n            const { selectedOption, retrievedOptions } = this.state;\n            const { formData, onChange, registry } = this.props;\n            const { schemaUtils } = registry;\n            const intOption = option !== undefined ? parseInt(option, 10) : -1;\n            if (intOption === selectedOption) {\n                return;\n            }\n            const newOption = intOption >= 0 ? retrievedOptions[intOption] : undefined;\n            const oldOption = selectedOption >= 0 ? retrievedOptions[selectedOption] : undefined;\n            let newFormData = schemaUtils.sanitizeDataForNewSchema(newOption, oldOption, formData);\n            if (newFormData && newOption) {\n                // Call getDefaultFormState to make sure defaults are populated on change. Pass \"excludeObjectChildren\"\n                // so that only the root objects themselves are created without adding undefined children properties\n                newFormData = schemaUtils.getDefaultFormState(newOption, newFormData, 'excludeObjectChildren');\n            }\n            onChange(newFormData, undefined, this.getFieldId());\n            this.setState({ selectedOption: intOption });\n        };\n        const { formData, options, registry: { schemaUtils }, } = this.props;\n        // cache the retrieved options in state in case they have $refs to save doing it later\n        const retrievedOptions = options.map((opt) => schemaUtils.retrieveSchema(opt, formData));\n        this.state = {\n            retrievedOptions,\n            selectedOption: this.getMatchingOption(0, formData, retrievedOptions),\n        };\n    }\n    /** React lifecycle method that is called when the props and/or state for this component is updated. It recomputes the\n     * currently selected option based on the overall `formData`\n     *\n     * @param prevProps - The previous `FieldProps` for this template\n     * @param prevState - The previous `AnyOfFieldState` for this template\n     */\n    componentDidUpdate(prevProps, prevState) {\n        const { formData, options, idSchema } = this.props;\n        const { selectedOption } = this.state;\n        let newState = this.state;\n        if (!deepEquals(prevProps.options, options)) {\n            const { registry: { schemaUtils }, } = this.props;\n            // re-cache the retrieved options in state in case they have $refs to save doing it later\n            const retrievedOptions = options.map((opt) => schemaUtils.retrieveSchema(opt, formData));\n            newState = { selectedOption, retrievedOptions };\n        }\n        if (!deepEquals(formData, prevProps.formData) && idSchema.$id === prevProps.idSchema.$id) {\n            const { retrievedOptions } = newState;\n            const matchingOption = this.getMatchingOption(selectedOption, formData, retrievedOptions);\n            if (prevState && matchingOption !== selectedOption) {\n                newState = { selectedOption: matchingOption, retrievedOptions };\n            }\n        }\n        if (newState !== this.state) {\n            this.setState(newState);\n        }\n    }\n    /** Determines the best matching option for the given `formData` and `options`.\n     *\n     * @param formData - The new formData\n     * @param options - The list of options to choose from\n     * @return - The index of the `option` that best matches the `formData`\n     */\n    getMatchingOption(selectedOption, formData, options) {\n        const { schema, registry: { schemaUtils }, } = this.props;\n        const discriminator = getDiscriminatorFieldFromSchema(schema);\n        const option = schemaUtils.getClosestMatchingOption(formData, options, selectedOption, discriminator);\n        return option;\n    }\n    getFieldId() {\n        const { idSchema, schema } = this.props;\n        return `${idSchema.$id}${schema.oneOf ? '__oneof_select' : '__anyof_select'}`;\n    }\n    /** Renders the `AnyOfField` selector along with a `SchemaField` for the value of the `formData`\n     */\n    render() {\n        const { name, disabled = false, errorSchema = {}, formContext, onBlur, onFocus, registry, schema, uiSchema, } = this.props;\n        const { widgets, fields, translateString, globalUiOptions, schemaUtils } = registry;\n        const { SchemaField: _SchemaField } = fields;\n        const { selectedOption, retrievedOptions } = this.state;\n        const { widget = 'select', placeholder, autofocus, autocomplete, title = schema.title, ...uiOptions } = getUiOptions(uiSchema, globalUiOptions);\n        const Widget = getWidget({ type: 'number' }, widget, widgets);\n        const rawErrors = get(errorSchema, ERRORS_KEY, []);\n        const fieldErrorSchema = omit(errorSchema, [ERRORS_KEY]);\n        const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n        const option = selectedOption >= 0 ? retrievedOptions[selectedOption] || null : null;\n        let optionSchema;\n        if (option) {\n            // merge top level required field\n            const { required } = schema;\n            // Merge in all the non-oneOf/anyOf properties and also skip the special ADDITIONAL_PROPERTY_FLAG property\n            optionSchema = required ? mergeSchemas({ required }, option) : option;\n        }\n        // First we will check to see if there is an anyOf/oneOf override for the UI schema\n        let optionsUiSchema = [];\n        if (ONE_OF_KEY in schema && uiSchema && ONE_OF_KEY in uiSchema) {\n            if (Array.isArray(uiSchema[ONE_OF_KEY])) {\n                optionsUiSchema = uiSchema[ONE_OF_KEY];\n            }\n            else {\n                console.warn(`uiSchema.oneOf is not an array for \"${title || name}\"`);\n            }\n        }\n        else if (ANY_OF_KEY in schema && uiSchema && ANY_OF_KEY in uiSchema) {\n            if (Array.isArray(uiSchema[ANY_OF_KEY])) {\n                optionsUiSchema = uiSchema[ANY_OF_KEY];\n            }\n            else {\n                console.warn(`uiSchema.anyOf is not an array for \"${title || name}\"`);\n            }\n        }\n        // Then we pick the one that matches the selected option index, if one exists otherwise default to the main uiSchema\n        let optionUiSchema = uiSchema;\n        if (selectedOption >= 0 && optionsUiSchema.length > selectedOption) {\n            optionUiSchema = optionsUiSchema[selectedOption];\n        }\n        const translateEnum = title\n            ? TranslatableString.TitleOptionPrefix\n            : TranslatableString.OptionPrefix;\n        const translateParams = title ? [title] : [];\n        const enumOptions = retrievedOptions.map((opt, index) => {\n            // Also see if there is an override title in the uiSchema for each option, otherwise use the title from the option\n            const { title: uiTitle = opt.title } = getUiOptions(optionsUiSchema[index]);\n            return {\n                label: uiTitle || translateString(translateEnum, translateParams.concat(String(index + 1))),\n                value: index,\n            };\n        });\n        return (_jsxs(\"div\", { className: 'panel panel-default panel-body', children: [_jsx(\"div\", { className: 'form-group', children: _jsx(Widget, { id: this.getFieldId(), name: `${name}${schema.oneOf ? '__oneof_select' : '__anyof_select'}`, schema: { type: 'number', default: 0 }, onChange: this.onOptionChange, onBlur: onBlur, onFocus: onFocus, disabled: disabled || isEmpty(enumOptions), multiple: false, rawErrors: rawErrors, errorSchema: fieldErrorSchema, value: selectedOption >= 0 ? selectedOption : undefined, options: { enumOptions, ...uiOptions }, registry: registry, formContext: formContext, placeholder: placeholder, autocomplete: autocomplete, autofocus: autofocus, label: title !== null && title !== void 0 ? title : name, hideLabel: !displayLabel }) }), optionSchema && _jsx(_SchemaField, { ...this.props, schema: optionSchema, uiSchema: optionUiSchema })] }));\n    }\n}\nexport default AnyOfField;\n//# sourceMappingURL=MultiSchemaField.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState, useCallback } from 'react';\nimport { asNumber } from '@rjsf/utils';\n// Matches a string that ends in a . character, optionally followed by a sequence of\n// digits followed by any number of 0 characters up until the end of the line.\n// Ensuring that there is at least one prefixed character is important so that\n// you don't incorrectly match against \"0\".\nconst trailingCharMatcherWithPrefix = /\\.([0-9]*0)*$/;\n// This is used for trimming the trailing 0 and . characters without affecting\n// the rest of the string. Its possible to use one RegEx with groups for this\n// functionality, but it is fairly complex compared to simply defining two\n// different matchers.\nconst trailingCharMatcher = /[0.]0*$/;\n/**\n * The NumberField class has some special handling for dealing with trailing\n * decimal points and/or zeroes. This logic is designed to allow trailing values\n * to be visible in the input element, but not be represented in the\n * corresponding form data.\n *\n * The algorithm is as follows:\n *\n * 1. When the input value changes the value is cached in the component state\n *\n * 2. The value is then normalized, removing trailing decimal points and zeros,\n *    then passed to the \"onChange\" callback\n *\n * 3. When the component is rendered, the formData value is checked against the\n *    value cached in the state. If it matches the cached value, the cached\n *    value is passed to the input instead of the formData value\n */\nfunction NumberField(props) {\n    const { registry, onChange, formData, value: initialValue } = props;\n    const [lastValue, setLastValue] = useState(initialValue);\n    const { StringField } = registry.fields;\n    let value = formData;\n    /** Handle the change from the `StringField` to properly convert to a number\n     *\n     * @param value - The current value for the change occurring\n     */\n    const handleChange = useCallback((value) => {\n        // Cache the original value in component state\n        setLastValue(value);\n        // Normalize decimals that don't start with a zero character in advance so\n        // that the rest of the normalization logic is simpler\n        if (`${value}`.charAt(0) === '.') {\n            value = `0${value}`;\n        }\n        // Check that the value is a string (this can happen if the widget used is a\n        // <select>, due to an enum declaration etc) then, if the value ends in a\n        // trailing decimal point or multiple zeroes, strip the trailing values\n        const processed = typeof value === 'string' && value.match(trailingCharMatcherWithPrefix)\n            ? asNumber(value.replace(trailingCharMatcher, ''))\n            : asNumber(value);\n        onChange(processed);\n    }, [onChange]);\n    if (typeof lastValue === 'string' && typeof value === 'number') {\n        // Construct a regular expression that checks for a string that consists\n        // of the formData value suffixed with zero or one '.' characters and zero\n        // or more '0' characters\n        const re = new RegExp(`^(${String(value).replace('.', '\\\\.')})?\\\\.?0*$`);\n        // If the cached \"lastValue\" is a match, use that instead of the formData\n        // value to prevent the input value from changing in the UI\n        if (lastValue.match(re)) {\n            value = lastValue;\n        }\n    }\n    return _jsx(StringField, { ...props, formData: value, onChange: handleChange });\n}\nexport default NumberField;\n//# sourceMappingURL=NumberField.js.map","import*as e from\"react\";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},n.apply(this,arguments)}const t=[\"children\",\"options\"];var r,i;!function(e){e.blockQuote=\"0\",e.breakLine=\"1\",e.breakThematic=\"2\",e.codeBlock=\"3\",e.codeFenced=\"4\",e.codeInline=\"5\",e.footnote=\"6\",e.footnoteReference=\"7\",e.gfmTask=\"8\",e.heading=\"9\",e.headingSetext=\"10\",e.htmlBlock=\"11\",e.htmlComment=\"12\",e.htmlSelfClosing=\"13\",e.image=\"14\",e.link=\"15\",e.linkAngleBraceStyleDetector=\"16\",e.linkBareUrlDetector=\"17\",e.linkMailtoDetector=\"18\",e.newlineCoalescer=\"19\",e.orderedList=\"20\",e.paragraph=\"21\",e.ref=\"22\",e.refImage=\"23\",e.refLink=\"24\",e.table=\"25\",e.tableSeparator=\"26\",e.text=\"27\",e.textBolded=\"28\",e.textEmphasized=\"29\",e.textEscaped=\"30\",e.textMarked=\"31\",e.textStrikethroughed=\"32\",e.unorderedList=\"33\"}(r||(r={})),function(e){e[e.MAX=0]=\"MAX\",e[e.HIGH=1]=\"HIGH\",e[e.MED=2]=\"MED\",e[e.LOW=3]=\"LOW\",e[e.MIN=4]=\"MIN\"}(i||(i={}));const l=[\"allowFullScreen\",\"allowTransparency\",\"autoComplete\",\"autoFocus\",\"autoPlay\",\"cellPadding\",\"cellSpacing\",\"charSet\",\"className\",\"classId\",\"colSpan\",\"contentEditable\",\"contextMenu\",\"crossOrigin\",\"encType\",\"formAction\",\"formEncType\",\"formMethod\",\"formNoValidate\",\"formTarget\",\"frameBorder\",\"hrefLang\",\"inputMode\",\"keyParams\",\"keyType\",\"marginHeight\",\"marginWidth\",\"maxLength\",\"mediaGroup\",\"minLength\",\"noValidate\",\"radioGroup\",\"readOnly\",\"rowSpan\",\"spellCheck\",\"srcDoc\",\"srcLang\",\"srcSet\",\"tabIndex\",\"useMap\"].reduce((e,n)=>(e[n.toLowerCase()]=n,e),{for:\"htmlFor\"}),o={amp:\"&\",apos:\"'\",gt:\">\",lt:\"<\",nbsp:\" \",quot:\"“\"},c=[\"style\",\"script\"],a=/([-A-Z0-9_:]+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|(?:\\{((?:\\\\.|{[^}]*?}|[^}])*)\\})))?/gi,s=/mailto:/i,d=/\\n{2,}$/,u=/^(\\s*>[\\s\\S]*?)(?=\\n{2,})/,p=/^ *> ?/gm,f=/^ {2,}\\n/,h=/^(?:( *[-*_])){3,} *(?:\\n *)+\\n/,m=/^\\s*(`{3,}|~{3,}) *(\\S+)?([^\\n]*?)?\\n([\\s\\S]+?)\\s*\\1 *(?:\\n *)*\\n?/,g=/^(?: {4}[^\\n]+\\n*)+(?:\\n *)+\\n?/,y=/^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,k=/^(?:\\n *)*\\n/,x=/\\r\\n?/g,v=/^\\[\\^([^\\]]+)](:(.*)((\\n+ {4,}.*)|(\\n(?!\\[\\^).+))*)/,b=/^\\[\\^([^\\]]+)]/,$=/\\f/g,E=/^---[ \\t]*\\n(.|\\n)*\\n---[ \\t]*\\n/,w=/^\\s*?\\[(x|\\s)\\]/,S=/^ *(#{1,6}) *([^\\n]+?)(?: +#*)?(?:\\n *)*(?:\\n|$)/,C=/^ *(#{1,6}) +([^\\n]+?)(?: +#*)?(?:\\n *)*(?:\\n|$)/,A=/^([^\\n]+)\\n *(=|-){3,} *(?:\\n *)+\\n/,O=/^ *(?!<[a-z][^ >/]* ?\\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\\n?(\\s*(?:<\\1[^>]*?>[\\s\\S]*?<\\/\\1>|(?!<\\1\\b)[\\s\\S])*?)<\\/\\1>(?!<\\/\\1>)\\n*/i,T=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,L=/^<!--[\\s\\S]*?(?:-->)/,R=/^(data|aria|x)-[a-z_][a-z\\d_.-]*$/,z=/^ *<([a-z][a-z0-9:]*)(?:\\s+((?:<.*?>|[^>])*))?\\/?>(?!<\\/\\1>)(\\s*\\n)?/i,M=/^\\{.*\\}$/,I=/^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,U=/^<([^ >]+@[^ >]+)>/,j=/^<([^ >]+:\\/[^ >]+)>/,B=/-([a-z])?/gi,N=/^(.*\\|.*)\\n(?: *(\\|? *[-:]+ *\\|[-| :]*)\\n((?:.*\\|.*\\n)*))?\\n?/,H=/^\\[([^\\]]*)\\]:\\s+<?([^\\s>]+)>?\\s*(\"([^\"]*)\")?/,D=/^!\\[([^\\]]*)\\] ?\\[([^\\]]*)\\]/,P=/^\\[([^\\]]*)\\] ?\\[([^\\]]*)\\]/,_=/(\\[|\\])/g,F=/(\\n|^[-*]\\s|^#|^ {2,}|^-{2,}|^>\\s)/,W=/\\t/g,G=/(^ *\\||\\| *$)/g,Z=/^ *:-+: *$/,q=/^ *:-+ *$/,V=/^ *-+: *$/,X=\"((?:\\\\[.*?\\\\][([].*?[)\\\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\\\n)*?)\",Q=new RegExp(`^([*_])\\\\1${X}\\\\1\\\\1(?!\\\\1)`),J=new RegExp(`^([*_])${X}\\\\1(?!\\\\1|\\\\w)`),K=new RegExp(`^==${X}==`),Y=new RegExp(`^~~${X}~~`),ee=/^\\\\([^0-9A-Za-z\\s])/,ne=/^[\\s\\S]+?(?=[^0-9A-Z\\s\\u00c0-\\uffff&#;.()'\"]|\\d+\\.|\\n\\n| {2,}\\n|\\w+:\\S|$)/i,te=/^\\n+/,re=/^([ \\t]*)/,ie=/\\\\([^\\\\])/g,le=/ *\\n+$/,oe=/(?:^|\\n)( *)$/,ce=\"(?:\\\\d+\\\\.)\",ae=\"(?:[*+-])\";function se(e){return\"( *)(\"+(1===e?ce:ae)+\") +\"}const de=se(1),ue=se(2);function pe(e){return new RegExp(\"^\"+(1===e?de:ue))}const fe=pe(1),he=pe(2);function me(e){return new RegExp(\"^\"+(1===e?de:ue)+\"[^\\\\n]*(?:\\\\n(?!\\\\1\"+(1===e?ce:ae)+\" )[^\\\\n]*)*(\\\\n|$)\",\"gm\")}const ge=me(1),ye=me(2);function ke(e){const n=1===e?ce:ae;return new RegExp(\"^( *)(\"+n+\") [\\\\s\\\\S]+?(?:\\\\n{2,}(?! )(?!\\\\1\"+n+\" (?!\"+n+\" ))\\\\n*|\\\\s*\\\\n*$)\")}const xe=ke(1),ve=ke(2);function be(e,n){const t=1===n,r=t?xe:ve,i=t?ge:ye,l=t?fe:he;return{match(e,n,t){const i=oe.exec(t);return i&&(n.list||!n.inline&&!n.simple)?r.exec(e=i[1]+e):null},order:1,parse(e,n,r){const o=t?+e[2]:void 0,c=e[0].replace(d,\"\\n\").match(i);let a=!1;return{items:c.map(function(e,t){const i=l.exec(e)[0].length,o=new RegExp(\"^ {1,\"+i+\"}\",\"gm\"),s=e.replace(o,\"\").replace(l,\"\"),d=t===c.length-1,u=-1!==s.indexOf(\"\\n\\n\")||d&&a;a=u;const p=r.inline,f=r.list;let h;r.list=!0,u?(r.inline=!1,h=s.replace(le,\"\\n\\n\")):(r.inline=!0,h=s.replace(le,\"\"));const m=n(h,r);return r.inline=p,r.list=f,m}),ordered:t,start:o}},render:(n,t,r)=>e(n.ordered?\"ol\":\"ul\",{key:r.key,start:\"20\"===n.type?n.start:void 0},n.items.map(function(n,i){return e(\"li\",{key:i},t(n,r))}))}}const $e=new RegExp(\"^\\\\[((?:\\\\[[^\\\\]]*\\\\]|[^\\\\[\\\\]]|\\\\](?=[^\\\\[]*\\\\]))*)\\\\]\\\\(\\\\s*<?((?:\\\\([^)]*\\\\)|[^\\\\s\\\\\\\\]|\\\\\\\\.)*?)>?(?:\\\\s+['\\\"]([\\\\s\\\\S]*?)['\\\"])?\\\\s*\\\\)\"),Ee=/^!\\[(.*?)\\]\\( *((?:\\([^)]*\\)|[^() ])*) *\"?([^)\"]*)?\"?\\)/,we=[u,m,g,S,A,C,L,N,ge,xe,ye,ve],Se=[...we,/^[^\\n]+(?:  \\n|\\n{2,})/,O,z];function Ce(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,\"a\").replace(/[çÇ]/g,\"c\").replace(/[ðÐ]/g,\"d\").replace(/[ÈÉÊËéèêë]/g,\"e\").replace(/[ÏïÎîÍíÌì]/g,\"i\").replace(/[Ññ]/g,\"n\").replace(/[øØœŒÕõÔôÓóÒò]/g,\"o\").replace(/[ÜüÛûÚúÙù]/g,\"u\").replace(/[ŸÿÝý]/g,\"y\").replace(/[^a-z0-9- ]/gi,\"\").replace(/ /gi,\"-\").toLowerCase()}function Ae(e){return V.test(e)?\"right\":Z.test(e)?\"center\":q.test(e)?\"left\":null}function Oe(e,n,t,r){const i=t.inTable;t.inTable=!0;let l=e.trim().split(/( *(?:`[^`]*`|<.*?>.*?<\\/.*?>(?!<\\/.*?>)|\\\\\\||\\|) *)/).reduce((e,i)=>(\"|\"===i.trim()?e.push(r?{type:\"26\"}:{type:\"27\",text:i}):\"\"!==i&&e.push.apply(e,n(i,t)),e),[]);t.inTable=i;let o=[[]];return l.forEach(function(e,n){\"26\"===e.type?0!==n&&n!==l.length-1&&o.push([]):(\"27\"!==e.type||null!=l[n+1]&&\"26\"!==l[n+1].type||(e.text=e.text.trimEnd()),o[o.length-1].push(e))}),o}function Te(e,n,t){t.inline=!0;const r=e[2]?e[2].replace(G,\"\").split(\"|\").map(Ae):[],i=e[3]?function(e,n,t){return e.trim().split(\"\\n\").map(function(e){return Oe(e,n,t,!0)})}(e[3],n,t):[],l=Oe(e[1],n,t,!!i.length);return t.inline=!1,i.length?{align:r,cells:i,header:l,type:\"25\"}:{children:l,type:\"21\"}}function Le(e,n){return null==e.align[n]?{}:{textAlign:e.align[n]}}function Re(e){return function(n,t){return t.inline?e.exec(n):null}}function ze(e){return function(n,t){return t.inline||t.simple?e.exec(n):null}}function Me(e){return function(n,t){return t.inline||t.simple?null:e.exec(n)}}function Ie(e){return function(n){return e.exec(n)}}function Ue(e,n,t){if(n.inline||n.simple)return null;if(t&&!t.endsWith(\"\\n\"))return null;let r=\"\";e.split(\"\\n\").every(e=>!we.some(n=>n.test(e))&&(r+=e+\"\\n\",e.trim()));const i=r.trimEnd();return\"\"==i?null:[r,i]}function je(e){try{if(decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,\"\").match(/^\\s*(javascript|vbscript|data(?!:image)):/i))return}catch(e){return null}return e}function Be(e){return e.replace(ie,\"$1\")}function Ne(e,n,t){const r=t.inline||!1,i=t.simple||!1;t.inline=!0,t.simple=!0;const l=e(n,t);return t.inline=r,t.simple=i,l}function He(e,n,t){const r=t.inline||!1,i=t.simple||!1;t.inline=!1,t.simple=!0;const l=e(n,t);return t.inline=r,t.simple=i,l}function De(e,n,t){const r=t.inline||!1;t.inline=!1;const i=e(n,t);return t.inline=r,i}const Pe=(e,n,t)=>({children:Ne(n,e[1],t)});function _e(){return{}}function Fe(){return null}function We(...e){return e.filter(Boolean).join(\" \")}function Ge(e,n,t){let r=e;const i=n.split(\".\");for(;i.length&&(r=r[i[0]],void 0!==r);)i.shift();return r||t}function Ze(t=\"\",r={}){r.overrides=r.overrides||{},r.slugify=r.slugify||Ce,r.namedCodesToUnicode=r.namedCodesToUnicode?n({},o,r.namedCodesToUnicode):o;const i=r.createElement||e.createElement;function d(e,t,...l){const o=Ge(r.overrides,`${e}.props`,{});return i(function(e,n){const t=Ge(n,e);return t?\"function\"==typeof t||\"object\"==typeof t&&\"render\"in t?t:Ge(n,`${e}.component`,e):e}(e,r.overrides),n({},t,o,{className:We(null==t?void 0:t.className,o.className)||void 0}),...l)}function G(n){n=n.replace(E,\"\");let t=!1;r.forceInline?t=!0:r.forceBlock||(t=!1===F.test(n));const i=le(ie(t?n:`${n.trimEnd().replace(te,\"\")}\\n\\n`,{inline:t}));for(;\"string\"==typeof i[i.length-1]&&!i[i.length-1].trim();)i.pop();if(null===r.wrapper)return i;const l=r.wrapper||(t?\"span\":\"div\");let o;if(i.length>1||r.forceWrapper)o=i;else{if(1===i.length)return o=i[0],\"string\"==typeof o?d(\"span\",{key:\"outer\"},o):o;o=null}return e.createElement(l,{key:\"outer\"},o)}function Z(n){const t=n.match(a);return t?t.reduce(function(n,t,r){const i=t.indexOf(\"=\");if(-1!==i){const o=function(e){return-1!==e.indexOf(\"-\")&&null===e.match(R)&&(e=e.replace(B,function(e,n){return n.toUpperCase()})),e}(t.slice(0,i)).trim(),c=function(e){const n=e[0];return('\"'===n||\"'\"===n)&&e.length>=2&&e[e.length-1]===n?e.slice(1,-1):e}(t.slice(i+1).trim()),a=l[o]||o,s=n[a]=function(e,n){return\"style\"===e?n.split(/;\\s?/).reduce(function(e,n){const t=n.slice(0,n.indexOf(\":\"));return e[t.trim().replace(/(-[a-z])/g,e=>e[1].toUpperCase())]=n.slice(t.length+1).trim(),e},{}):\"href\"===e||\"src\"===e?je(n):(n.match(M)&&(n=n.slice(1,n.length-1)),\"true\"===n||\"false\"!==n&&n)}(o,c);\"string\"==typeof s&&(O.test(s)||z.test(s))&&(n[a]=e.cloneElement(G(s.trim()),{key:r}))}else\"style\"!==t&&(n[l[t]||t]=!0);return n},{}):null}const q=[],V={},X={0:{match:Me(u),order:1,parse:(e,n,t)=>({children:n(e[0].replace(p,\"\"),t)}),render:(e,n,t)=>d(\"blockquote\",{key:t.key},n(e.children,t))},1:{match:Ie(f),order:1,parse:_e,render:(e,n,t)=>d(\"br\",{key:t.key})},2:{match:Me(h),order:1,parse:_e,render:(e,n,t)=>d(\"hr\",{key:t.key})},3:{match:Me(g),order:0,parse:e=>({lang:void 0,text:e[0].replace(/^ {4}/gm,\"\").replace(/\\n+$/,\"\")}),render:(e,t,r)=>d(\"pre\",{key:r.key},d(\"code\",n({},e.attrs,{className:e.lang?`lang-${e.lang}`:\"\"}),e.text))},4:{match:Me(m),order:0,parse:e=>({attrs:Z(e[3]||\"\"),lang:e[2]||void 0,text:e[4],type:\"3\"})},5:{match:ze(y),order:3,parse:e=>({text:e[2]}),render:(e,n,t)=>d(\"code\",{key:t.key},e.text)},6:{match:Me(v),order:0,parse:e=>(q.push({footnote:e[2],identifier:e[1]}),{}),render:Fe},7:{match:Re(b),order:1,parse:e=>({target:`#${r.slugify(e[1])}`,text:e[1]}),render:(e,n,t)=>d(\"a\",{key:t.key,href:je(e.target)},d(\"sup\",{key:t.key},e.text))},8:{match:Re(w),order:1,parse:e=>({completed:\"x\"===e[1].toLowerCase()}),render:(e,n,t)=>d(\"input\",{checked:e.completed,key:t.key,readOnly:!0,type:\"checkbox\"})},9:{match:Me(r.enforceAtxHeadings?C:S),order:1,parse:(e,n,t)=>({children:Ne(n,e[2],t),id:r.slugify(e[2]),level:e[1].length}),render:(e,n,t)=>d(`h${e.level}`,{id:e.id,key:t.key},n(e.children,t))},10:{match:Me(A),order:0,parse:(e,n,t)=>({children:Ne(n,e[1],t),level:\"=\"===e[2]?1:2,type:\"9\"})},11:{match:Ie(O),order:1,parse(e,n,t){const[,r]=e[3].match(re),i=new RegExp(`^${r}`,\"gm\"),l=e[3].replace(i,\"\"),o=(a=l,Se.some(e=>e.test(a))?De:Ne);var a;const s=e[1].toLowerCase(),d=-1!==c.indexOf(s),u={attrs:Z(e[2]),noInnerParse:d,tag:(d?s:e[1]).trim()};return t.inAnchor=t.inAnchor||\"a\"===s,d?u.text=e[3]:u.children=o(n,l,t),t.inAnchor=!1,u},render:(e,t,r)=>d(e.tag,n({key:r.key},e.attrs),e.text||t(e.children,r))},13:{match:Ie(z),order:1,parse:e=>({attrs:Z(e[2]||\"\"),tag:e[1].trim()}),render:(e,t,r)=>d(e.tag,n({},e.attrs,{key:r.key}))},12:{match:Ie(L),order:1,parse:()=>({}),render:Fe},14:{match:ze(Ee),order:1,parse:e=>({alt:e[1],target:Be(e[2]),title:e[3]}),render:(e,n,t)=>d(\"img\",{key:t.key,alt:e.alt||void 0,title:e.title||void 0,src:je(e.target)})},15:{match:Re($e),order:3,parse:(e,n,t)=>({children:He(n,e[1],t),target:Be(e[2]),title:e[3]}),render:(e,n,t)=>d(\"a\",{key:t.key,href:je(e.target),title:e.title},n(e.children,t))},16:{match:Re(j),order:0,parse:e=>({children:[{text:e[1],type:\"27\"}],target:e[1],type:\"15\"})},17:{match:(e,n)=>n.inAnchor?null:Re(I)(e,n),order:0,parse:e=>({children:[{text:e[1],type:\"27\"}],target:e[1],title:void 0,type:\"15\"})},18:{match:Re(U),order:0,parse(e){let n=e[1],t=e[1];return s.test(t)||(t=\"mailto:\"+t),{children:[{text:n.replace(\"mailto:\",\"\"),type:\"27\"}],target:t,type:\"15\"}}},20:be(d,1),33:be(d,2),19:{match:Me(k),order:3,parse:_e,render:()=>\"\\n\"},21:{match:Ue,order:3,parse:Pe,render:(e,n,t)=>d(\"p\",{key:t.key},n(e.children,t))},22:{match:Re(H),order:0,parse:e=>(V[e[1]]={target:e[2],title:e[4]},{}),render:Fe},23:{match:ze(D),order:0,parse:e=>({alt:e[1]||void 0,ref:e[2]}),render:(e,n,t)=>V[e.ref]?d(\"img\",{key:t.key,alt:e.alt,src:je(V[e.ref].target),title:V[e.ref].title}):null},24:{match:Re(P),order:0,parse:(e,n,t)=>({children:n(e[1],t),fallbackChildren:n(e[0].replace(_,\"\\\\$1\"),t),ref:e[2]}),render:(e,n,t)=>V[e.ref]?d(\"a\",{key:t.key,href:je(V[e.ref].target),title:V[e.ref].title},n(e.children,t)):d(\"span\",{key:t.key},n(e.fallbackChildren,t))},25:{match:Me(N),order:1,parse:Te,render(e,n,t){const r=e;return d(\"table\",{key:t.key},d(\"thead\",null,d(\"tr\",null,r.header.map(function(e,i){return d(\"th\",{key:i,style:Le(r,i)},n(e,t))}))),d(\"tbody\",null,r.cells.map(function(e,i){return d(\"tr\",{key:i},e.map(function(e,i){return d(\"td\",{key:i,style:Le(r,i)},n(e,t))}))})))}},27:{match:Ie(ne),order:4,parse:e=>({text:e[0].replace(T,(e,n)=>r.namedCodesToUnicode[n]?r.namedCodesToUnicode[n]:e)}),render:e=>e.text},28:{match:ze(Q),order:2,parse:(e,n,t)=>({children:n(e[2],t)}),render:(e,n,t)=>d(\"strong\",{key:t.key},n(e.children,t))},29:{match:ze(J),order:3,parse:(e,n,t)=>({children:n(e[2],t)}),render:(e,n,t)=>d(\"em\",{key:t.key},n(e.children,t))},30:{match:ze(ee),order:1,parse:e=>({text:e[1],type:\"27\"})},31:{match:ze(K),order:3,parse:Pe,render:(e,n,t)=>d(\"mark\",{key:t.key},n(e.children,t))},32:{match:ze(Y),order:3,parse:Pe,render:(e,n,t)=>d(\"del\",{key:t.key},n(e.children,t))}};!0===r.disableParsingRawHTML&&(delete X[11],delete X[13]);const ie=function(e){let n=Object.keys(e);function t(r,i){let l=[],o=\"\";for(;r;){let c=0;for(;c<n.length;){const a=n[c],s=e[a],d=s.match(r,i,o);if(d){const e=d[0];r=r.substring(e.length);const n=s.parse(d,t,i);null==n.type&&(n.type=a),l.push(n),o=e;break}c++}}return l}return n.sort(function(n,t){let r=e[n].order,i=e[t].order;return r!==i?r-i:n<t?-1:1}),function(e,n){return t(function(e){return e.replace(x,\"\\n\").replace($,\"\").replace(W,\"    \")}(e),n)}}(X),le=(oe=function(e,n){return function(t,r,i){const l=e[t.type].render;return n?n(()=>l(t,r,i),t,r,i):l(t,r,i)}}(X,r.renderRule),function e(n,t={}){if(Array.isArray(n)){const r=t.key,i=[];let l=!1;for(let r=0;r<n.length;r++){t.key=r;const o=e(n[r],t),c=\"string\"==typeof o;c&&l?i[i.length-1]+=o:null!==o&&i.push(o),l=c}return t.key=r,i}return oe(n,e,t)});var oe;const ce=G(t);return q.length?d(\"div\",null,ce,d(\"footer\",{key:\"footer\"},q.map(function(e){return d(\"div\",{id:r.slugify(e.identifier),key:e.identifier},e.identifier,le(ie(e.footnote,{inline:!0})))}))):ce}export default n=>{let{children:r=\"\",options:i}=n,l=function(e,n){if(null==e)return{};var t,r,i={},l=Object.keys(e);for(r=0;r<l.length;r++)n.indexOf(t=l[r])>=0||(i[t]=e[t]);return i}(n,t);return e.cloneElement(Ze(r,i),l)};export{r as RuleType,Ze as compiler,Ce as slugify};\n//# sourceMappingURL=index.modern.js.map\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Component } from 'react';\nimport { getTemplate, getUiOptions, orderProperties, TranslatableString, ADDITIONAL_PROPERTY_FLAG, PROPERTIES_KEY, REF_KEY, ANY_OF_KEY, ONE_OF_KEY, } from '@rjsf/utils';\nimport Markdown from 'markdown-to-jsx';\nimport get from 'lodash/get';\nimport has from 'lodash/has';\nimport isObject from 'lodash/isObject';\nimport set from 'lodash/set';\nimport unset from 'lodash/unset';\n/** The `ObjectField` component is used to render a field in the schema that is of type `object`. It tracks whether an\n * additional property key was modified and what it was modified to\n *\n * @param props - The `FieldProps` for this template\n */\nclass ObjectField extends Component {\n    constructor() {\n        super(...arguments);\n        /** Set up the initial state */\n        this.state = {\n            wasPropertyKeyModified: false,\n            additionalProperties: {},\n        };\n        /** Returns the `onPropertyChange` handler for the `name` field. Handles the special case where a user is attempting\n         * to clear the data for a field added as an additional property. Calls the `onChange()` handler with the updated\n         * formData.\n         *\n         * @param name - The name of the property\n         * @param addedByAdditionalProperties - Flag indicating whether this property is an additional property\n         * @returns - The onPropertyChange callback for the `name` property\n         */\n        this.onPropertyChange = (name, addedByAdditionalProperties = false) => {\n            return (value, newErrorSchema, id) => {\n                const { formData, onChange, errorSchema } = this.props;\n                if (value === undefined && addedByAdditionalProperties) {\n                    // Don't set value = undefined for fields added by\n                    // additionalProperties. Doing so removes them from the\n                    // formData, which causes them to completely disappear\n                    // (including the input field for the property name). Unlike\n                    // fields which are \"mandated\" by the schema, these fields can\n                    // be set to undefined by clicking a \"delete field\" button, so\n                    // set empty values to the empty string.\n                    value = '';\n                }\n                const newFormData = { ...formData, [name]: value };\n                onChange(newFormData, errorSchema &&\n                    errorSchema && {\n                    ...errorSchema,\n                    [name]: newErrorSchema,\n                }, id);\n            };\n        };\n        /** Returns a callback to handle the onDropPropertyClick event for the given `key` which removes the old `key` data\n         * and calls the `onChange` callback with it\n         *\n         * @param key - The key for which the drop callback is desired\n         * @returns - The drop property click callback\n         */\n        this.onDropPropertyClick = (key) => {\n            return (event) => {\n                event.preventDefault();\n                const { onChange, formData } = this.props;\n                const copiedFormData = { ...formData };\n                unset(copiedFormData, key);\n                onChange(copiedFormData);\n            };\n        };\n        /** Computes the next available key name from the `preferredKey`, indexing through the already existing keys until one\n         * that is already not assigned is found.\n         *\n         * @param preferredKey - The preferred name of a new key\n         * @param [formData] - The form data in which to check if the desired key already exists\n         * @returns - The name of the next available key from `preferredKey`\n         */\n        this.getAvailableKey = (preferredKey, formData) => {\n            const { uiSchema, registry } = this.props;\n            const { duplicateKeySuffixSeparator = '-' } = getUiOptions(uiSchema, registry.globalUiOptions);\n            let index = 0;\n            let newKey = preferredKey;\n            while (has(formData, newKey)) {\n                newKey = `${preferredKey}${duplicateKeySuffixSeparator}${++index}`;\n            }\n            return newKey;\n        };\n        /** Returns a callback function that deals with the rename of a key for an additional property for a schema. That\n         * callback will attempt to rename the key and move the existing data to that key, calling `onChange` when it does.\n         *\n         * @param oldValue - The old value of a field\n         * @returns - The key change callback function\n         */\n        this.onKeyChange = (oldValue) => {\n            return (value, newErrorSchema) => {\n                if (oldValue === value) {\n                    return;\n                }\n                const { formData, onChange, errorSchema } = this.props;\n                value = this.getAvailableKey(value, formData);\n                const newFormData = {\n                    ...formData,\n                };\n                const newKeys = { [oldValue]: value };\n                const keyValues = Object.keys(newFormData).map((key) => {\n                    const newKey = newKeys[key] || key;\n                    return { [newKey]: newFormData[key] };\n                });\n                const renamedObj = Object.assign({}, ...keyValues);\n                this.setState({ wasPropertyKeyModified: true });\n                onChange(renamedObj, errorSchema &&\n                    errorSchema && {\n                    ...errorSchema,\n                    [value]: newErrorSchema,\n                });\n            };\n        };\n        /** Handles the adding of a new additional property on the given `schema`. Calls the `onChange` callback once the new\n         * default data for that field has been added to the formData.\n         *\n         * @param schema - The schema element to which the new property is being added\n         */\n        this.handleAddClick = (schema) => () => {\n            if (!schema.additionalProperties) {\n                return;\n            }\n            const { formData, onChange, registry } = this.props;\n            const newFormData = { ...formData };\n            let type = undefined;\n            let defaultValue = undefined;\n            if (isObject(schema.additionalProperties)) {\n                type = schema.additionalProperties.type;\n                defaultValue = schema.additionalProperties.default;\n                let apSchema = schema.additionalProperties;\n                if (REF_KEY in apSchema) {\n                    const { schemaUtils } = registry;\n                    apSchema = schemaUtils.retrieveSchema({ $ref: apSchema[REF_KEY] }, formData);\n                    type = apSchema.type;\n                    defaultValue = apSchema.default;\n                }\n                if (!type && (ANY_OF_KEY in apSchema || ONE_OF_KEY in apSchema)) {\n                    type = 'object';\n                }\n            }\n            const newKey = this.getAvailableKey('newKey', newFormData);\n            // Cast this to make the `set` work properly\n            set(newFormData, newKey, defaultValue !== null && defaultValue !== void 0 ? defaultValue : this.getDefaultValue(type));\n            onChange(newFormData);\n        };\n    }\n    /** Returns a flag indicating whether the `name` field is required in the object schema\n     *\n     * @param name - The name of the field to check for required-ness\n     * @returns - True if the field `name` is required, false otherwise\n     */\n    isRequired(name) {\n        const { schema } = this.props;\n        return Array.isArray(schema.required) && schema.required.indexOf(name) !== -1;\n    }\n    /** Returns a default value to be used for a new additional schema property of the given `type`\n     *\n     * @param type - The type of the new additional schema property\n     */\n    getDefaultValue(type) {\n        const { registry: { translateString }, } = this.props;\n        switch (type) {\n            case 'array':\n                return [];\n            case 'boolean':\n                return false;\n            case 'null':\n                return null;\n            case 'number':\n                return 0;\n            case 'object':\n                return {};\n            case 'string':\n            default:\n                // We don't have a datatype for some reason (perhaps additionalProperties was true)\n                return translateString(TranslatableString.NewStringDefault);\n        }\n    }\n    /** Renders the `ObjectField` from the given props\n     */\n    render() {\n        var _a, _b, _c, _d;\n        const { schema: rawSchema, uiSchema = {}, formData, errorSchema, idSchema, name, required = false, disabled, readonly, hideError, idPrefix, idSeparator, onBlur, onFocus, registry, title, } = this.props;\n        const { fields, formContext, schemaUtils, translateString, globalUiOptions } = registry;\n        const { SchemaField } = fields;\n        const schema = schemaUtils.retrieveSchema(rawSchema, formData);\n        const uiOptions = getUiOptions(uiSchema, globalUiOptions);\n        const { properties: schemaProperties = {} } = schema;\n        const templateTitle = (_c = (_b = (_a = uiOptions.title) !== null && _a !== void 0 ? _a : schema.title) !== null && _b !== void 0 ? _b : title) !== null && _c !== void 0 ? _c : name;\n        const description = (_d = uiOptions.description) !== null && _d !== void 0 ? _d : schema.description;\n        let orderedProperties;\n        try {\n            const properties = Object.keys(schemaProperties);\n            orderedProperties = orderProperties(properties, uiOptions.order);\n        }\n        catch (err) {\n            return (_jsxs(\"div\", { children: [_jsx(\"p\", { className: 'config-error', style: { color: 'red' }, children: _jsx(Markdown, { children: translateString(TranslatableString.InvalidObjectField, [name || 'root', err.message]) }) }), _jsx(\"pre\", { children: JSON.stringify(schema) })] }));\n        }\n        const Template = getTemplate('ObjectFieldTemplate', registry, uiOptions);\n        const templateProps = {\n            // getDisplayLabel() always returns false for object types, so just check the `uiOptions.label`\n            title: uiOptions.label === false ? '' : templateTitle,\n            description: uiOptions.label === false ? undefined : description,\n            properties: orderedProperties.map((name) => {\n                const addedByAdditionalProperties = has(schema, [PROPERTIES_KEY, name, ADDITIONAL_PROPERTY_FLAG]);\n                const fieldUiSchema = addedByAdditionalProperties ? uiSchema.additionalProperties : uiSchema[name];\n                const hidden = getUiOptions(fieldUiSchema).widget === 'hidden';\n                const fieldIdSchema = get(idSchema, [name], {});\n                return {\n                    content: (_jsx(SchemaField, { name: name, required: this.isRequired(name), schema: get(schema, [PROPERTIES_KEY, name], {}), uiSchema: fieldUiSchema, errorSchema: get(errorSchema, name), idSchema: fieldIdSchema, idPrefix: idPrefix, idSeparator: idSeparator, formData: get(formData, name), formContext: formContext, wasPropertyKeyModified: this.state.wasPropertyKeyModified, onKeyChange: this.onKeyChange(name), onChange: this.onPropertyChange(name, addedByAdditionalProperties), onBlur: onBlur, onFocus: onFocus, registry: registry, disabled: disabled, readonly: readonly, hideError: hideError, onDropPropertyClick: this.onDropPropertyClick }, name)),\n                    name,\n                    readonly,\n                    disabled,\n                    required,\n                    hidden,\n                };\n            }),\n            readonly,\n            disabled,\n            required,\n            idSchema,\n            uiSchema,\n            errorSchema,\n            schema,\n            formData,\n            formContext,\n            registry,\n        };\n        return _jsx(Template, { ...templateProps, onAddClick: this.handleAddClick });\n    }\n}\nexport default ObjectField;\n//# sourceMappingURL=ObjectField.js.map","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, Component } from 'react';\nimport { ADDITIONAL_PROPERTY_FLAG, deepEquals, descriptionId, getSchemaType, getTemplate, getUiOptions, ID_KEY, mergeObjects, TranslatableString, UI_OPTIONS_KEY, } from '@rjsf/utils';\nimport isObject from 'lodash/isObject';\nimport omit from 'lodash/omit';\nimport Markdown from 'markdown-to-jsx';\n/** The map of component type to FieldName */\nconst COMPONENT_TYPES = {\n    array: 'ArrayField',\n    boolean: 'BooleanField',\n    integer: 'NumberField',\n    number: 'NumberField',\n    object: 'ObjectField',\n    string: 'StringField',\n    null: 'NullField',\n};\n/** Computes and returns which `Field` implementation to return in order to render the field represented by the\n * `schema`. The `uiOptions` are used to alter what potential `Field` implementation is actually returned. If no\n * appropriate `Field` implementation can be found then a wrapper around `UnsupportedFieldTemplate` is used.\n *\n * @param schema - The schema from which to obtain the type\n * @param uiOptions - The UI Options that may affect the component decision\n * @param idSchema - The id that is passed to the `UnsupportedFieldTemplate`\n * @param registry - The registry from which fields and templates are obtained\n * @returns - The `Field` component that is used to render the actual field data\n */\nfunction getFieldComponent(schema, uiOptions, idSchema, registry) {\n    const field = uiOptions.field;\n    const { fields, translateString } = registry;\n    if (typeof field === 'function') {\n        return field;\n    }\n    if (typeof field === 'string' && field in fields) {\n        return fields[field];\n    }\n    const schemaType = getSchemaType(schema);\n    const type = Array.isArray(schemaType) ? schemaType[0] : schemaType || '';\n    const schemaId = schema.$id;\n    let componentName = COMPONENT_TYPES[type];\n    if (schemaId && schemaId in fields) {\n        componentName = schemaId;\n    }\n    // If the type is not defined and the schema uses 'anyOf' or 'oneOf', don't\n    // render a field and let the MultiSchemaField component handle the form display\n    if (!componentName && (schema.anyOf || schema.oneOf)) {\n        return () => null;\n    }\n    return componentName in fields\n        ? fields[componentName]\n        : () => {\n            const UnsupportedFieldTemplate = getTemplate('UnsupportedFieldTemplate', registry, uiOptions);\n            return (_jsx(UnsupportedFieldTemplate, { schema: schema, idSchema: idSchema, reason: translateString(TranslatableString.UnknownFieldType, [String(schema.type)]), registry: registry }));\n        };\n}\n/** The `SchemaFieldRender` component is the work-horse of react-jsonschema-form, determining what kind of real field to\n * render based on the `schema`, `uiSchema` and all the other props. It also deals with rendering the `anyOf` and\n * `oneOf` fields.\n *\n * @param props - The `FieldProps` for this component\n */\nfunction SchemaFieldRender(props) {\n    var _a, _b, _c, _d, _e;\n    const { schema: _schema, idSchema: _idSchema, uiSchema, formData, errorSchema, idPrefix, idSeparator, name, onChange, onKeyChange, onDropPropertyClick, required, registry, wasPropertyKeyModified = false, } = props;\n    const { formContext, schemaUtils, globalUiOptions } = registry;\n    const uiOptions = getUiOptions(uiSchema, globalUiOptions);\n    const FieldTemplate = getTemplate('FieldTemplate', registry, uiOptions);\n    const DescriptionFieldTemplate = getTemplate('DescriptionFieldTemplate', registry, uiOptions);\n    const FieldHelpTemplate = getTemplate('FieldHelpTemplate', registry, uiOptions);\n    const FieldErrorTemplate = getTemplate('FieldErrorTemplate', registry, uiOptions);\n    const schema = schemaUtils.retrieveSchema(_schema, formData);\n    const fieldId = _idSchema[ID_KEY];\n    const idSchema = mergeObjects(schemaUtils.toIdSchema(schema, fieldId, formData, idPrefix, idSeparator), _idSchema);\n    /** Intermediary `onChange` handler for field components that will inject the `id` of the current field into the\n     * `onChange` chain if it is not already being provided from a deeper level in the hierarchy\n     */\n    const handleFieldComponentChange = useCallback((formData, newErrorSchema, id) => {\n        const theId = id || fieldId;\n        return onChange(formData, newErrorSchema, theId);\n    }, [fieldId, onChange]);\n    const FieldComponent = getFieldComponent(schema, uiOptions, idSchema, registry);\n    const disabled = Boolean((_a = uiOptions.disabled) !== null && _a !== void 0 ? _a : props.disabled);\n    const readonly = Boolean((_d = (_c = (_b = uiOptions.readonly) !== null && _b !== void 0 ? _b : props.readonly) !== null && _c !== void 0 ? _c : props.schema.readOnly) !== null && _d !== void 0 ? _d : schema.readOnly);\n    const uiSchemaHideError = uiOptions.hideError;\n    // Set hideError to the value provided in the uiSchema, otherwise stick with the prop to propagate to children\n    const hideError = uiSchemaHideError === undefined ? props.hideError : Boolean(uiSchemaHideError);\n    const autofocus = Boolean((_e = uiOptions.autofocus) !== null && _e !== void 0 ? _e : props.autofocus);\n    if (Object.keys(schema).length === 0) {\n        return null;\n    }\n    const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n    const { __errors, ...fieldErrorSchema } = errorSchema || {};\n    // See #439: uiSchema: Don't pass consumed class names or style to child components\n    const fieldUiSchema = omit(uiSchema, ['ui:classNames', 'classNames', 'ui:style']);\n    if (UI_OPTIONS_KEY in fieldUiSchema) {\n        fieldUiSchema[UI_OPTIONS_KEY] = omit(fieldUiSchema[UI_OPTIONS_KEY], ['classNames', 'style']);\n    }\n    const field = (_jsx(FieldComponent, { ...props, onChange: handleFieldComponentChange, idSchema: idSchema, schema: schema, uiSchema: fieldUiSchema, disabled: disabled, readonly: readonly, hideError: hideError, autofocus: autofocus, errorSchema: fieldErrorSchema, formContext: formContext, rawErrors: __errors }));\n    const id = idSchema[ID_KEY];\n    // If this schema has a title defined, but the user has set a new key/label, retain their input.\n    let label;\n    if (wasPropertyKeyModified) {\n        label = name;\n    }\n    else {\n        label =\n            ADDITIONAL_PROPERTY_FLAG in schema\n                ? name\n                : uiOptions.title || props.schema.title || schema.title || props.title || name;\n    }\n    const description = uiOptions.description || props.schema.description || schema.description || '';\n    const richDescription = uiOptions.enableMarkdownInDescription ? _jsx(Markdown, { children: description }) : description;\n    const help = uiOptions.help;\n    const hidden = uiOptions.widget === 'hidden';\n    const classNames = ['form-group', 'field', `field-${getSchemaType(schema)}`];\n    if (!hideError && __errors && __errors.length > 0) {\n        classNames.push('field-error has-error has-danger');\n    }\n    if (uiSchema === null || uiSchema === void 0 ? void 0 : uiSchema.classNames) {\n        if (process.env.NODE_ENV !== 'production') {\n            console.warn(\"'uiSchema.classNames' is deprecated and may be removed in a major release; Use 'ui:classNames' instead.\");\n        }\n        classNames.push(uiSchema.classNames);\n    }\n    if (uiOptions.classNames) {\n        classNames.push(uiOptions.classNames);\n    }\n    const helpComponent = (_jsx(FieldHelpTemplate, { help: help, idSchema: idSchema, schema: schema, uiSchema: uiSchema, hasErrors: !hideError && __errors && __errors.length > 0, registry: registry }));\n    /*\n     * AnyOf/OneOf errors handled by child schema\n     * unless it can be rendered as select control\n     */\n    const errorsComponent = hideError || ((schema.anyOf || schema.oneOf) && !schemaUtils.isSelect(schema)) ? undefined : (_jsx(FieldErrorTemplate, { errors: __errors, errorSchema: errorSchema, idSchema: idSchema, schema: schema, uiSchema: uiSchema, registry: registry }));\n    const fieldProps = {\n        description: (_jsx(DescriptionFieldTemplate, { id: descriptionId(id), description: richDescription, schema: schema, uiSchema: uiSchema, registry: registry })),\n        rawDescription: description,\n        help: helpComponent,\n        rawHelp: typeof help === 'string' ? help : undefined,\n        errors: errorsComponent,\n        rawErrors: hideError ? undefined : __errors,\n        id,\n        label,\n        hidden,\n        onChange,\n        onKeyChange,\n        onDropPropertyClick,\n        required,\n        disabled,\n        readonly,\n        hideError,\n        displayLabel,\n        classNames: classNames.join(' ').trim(),\n        style: uiOptions.style,\n        formContext,\n        formData,\n        schema,\n        uiSchema,\n        registry,\n    };\n    const _AnyOfField = registry.fields.AnyOfField;\n    const _OneOfField = registry.fields.OneOfField;\n    const isReplacingAnyOrOneOf = (uiSchema === null || uiSchema === void 0 ? void 0 : uiSchema['ui:field']) && (uiSchema === null || uiSchema === void 0 ? void 0 : uiSchema['ui:fieldReplacesAnyOrOneOf']) === true;\n    return (_jsx(FieldTemplate, { ...fieldProps, children: _jsxs(_Fragment, { children: [field, schema.anyOf && !isReplacingAnyOrOneOf && !schemaUtils.isSelect(schema) && (_jsx(_AnyOfField, { name: name, disabled: disabled, readonly: readonly, hideError: hideError, errorSchema: errorSchema, formData: formData, formContext: formContext, idPrefix: idPrefix, idSchema: idSchema, idSeparator: idSeparator, onBlur: props.onBlur, onChange: props.onChange, onFocus: props.onFocus, options: schema.anyOf.map((_schema) => schemaUtils.retrieveSchema(isObject(_schema) ? _schema : {}, formData)), registry: registry, schema: schema, uiSchema: uiSchema })), schema.oneOf && !isReplacingAnyOrOneOf && !schemaUtils.isSelect(schema) && (_jsx(_OneOfField, { name: name, disabled: disabled, readonly: readonly, hideError: hideError, errorSchema: errorSchema, formData: formData, formContext: formContext, idPrefix: idPrefix, idSchema: idSchema, idSeparator: idSeparator, onBlur: props.onBlur, onChange: props.onChange, onFocus: props.onFocus, options: schema.oneOf.map((_schema) => schemaUtils.retrieveSchema(isObject(_schema) ? _schema : {}, formData)), registry: registry, schema: schema, uiSchema: uiSchema }))] }) }));\n}\n/** The `SchemaField` component determines whether it is necessary to rerender the component based on any props changes\n * and if so, calls the `SchemaFieldRender` component with the props.\n */\nclass SchemaField extends Component {\n    shouldComponentUpdate(nextProps) {\n        return !deepEquals(this.props, nextProps);\n    }\n    render() {\n        return _jsx(SchemaFieldRender, { ...this.props });\n    }\n}\nexport default SchemaField;\n//# sourceMappingURL=SchemaField.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getWidget, getUiOptions, optionsList, hasWidget, } from '@rjsf/utils';\n/** The `StringField` component is used to render a schema field that represents a string type\n *\n * @param props - The `FieldProps` for this template\n */\nfunction StringField(props) {\n    var _a;\n    const { schema, name, uiSchema, idSchema, formData, required, disabled = false, readonly = false, autofocus = false, onChange, onBlur, onFocus, registry, rawErrors, hideError, } = props;\n    const { title, format } = schema;\n    const { widgets, formContext, schemaUtils, globalUiOptions } = registry;\n    const enumOptions = schemaUtils.isSelect(schema) ? optionsList(schema) : undefined;\n    let defaultWidget = enumOptions ? 'select' : 'text';\n    if (format && hasWidget(schema, format, widgets)) {\n        defaultWidget = format;\n    }\n    const { widget = defaultWidget, placeholder = '', title: uiTitle, ...options } = getUiOptions(uiSchema);\n    const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n    const label = (_a = uiTitle !== null && uiTitle !== void 0 ? uiTitle : title) !== null && _a !== void 0 ? _a : name;\n    const Widget = getWidget(schema, widget, widgets);\n    return (_jsx(Widget, { options: { ...options, enumOptions }, schema: schema, uiSchema: uiSchema, id: idSchema.$id, name: name, label: label, hideLabel: !displayLabel, hideError: hideError, value: formData, onChange: onChange, onBlur: onBlur, onFocus: onFocus, required: required, disabled: disabled, readonly: readonly, formContext: formContext, autofocus: autofocus, registry: registry, placeholder: placeholder, rawErrors: rawErrors }));\n}\nexport default StringField;\n//# sourceMappingURL=StringField.js.map","import { useEffect } from 'react';\n/** The `NullField` component is used to render a field in the schema is null. It also ensures that the `formData` is\n * also set to null if it has no value.\n *\n * @param props - The `FieldProps` for this template\n */\nfunction NullField(props) {\n    const { formData, onChange } = props;\n    useEffect(() => {\n        if (formData === undefined) {\n            onChange(null);\n        }\n    }, [formData, onChange]);\n    return null;\n}\nexport default NullField;\n//# sourceMappingURL=NullField.js.map","import ArrayField from './ArrayField';\nimport BooleanField from './BooleanField';\nimport MultiSchemaField from './MultiSchemaField';\nimport NumberField from './NumberField';\nimport ObjectField from './ObjectField';\nimport SchemaField from './SchemaField';\nimport StringField from './StringField';\nimport NullField from './NullField';\nfunction fields() {\n    return {\n        AnyOfField: MultiSchemaField,\n        ArrayField: ArrayField,\n        // ArrayField falls back to SchemaField if ArraySchemaField is not defined, which it isn't by default\n        BooleanField,\n        NumberField,\n        ObjectField,\n        OneOfField: MultiSchemaField,\n        SchemaField,\n        StringField,\n        NullField,\n    };\n}\nexport default fields;\n//# sourceMappingURL=index.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { descriptionId, getTemplate, getUiOptions, } from '@rjsf/utils';\n/** The `ArrayFieldDescriptionTemplate` component renders a `DescriptionFieldTemplate` with an `id` derived from\n * the `idSchema`.\n *\n * @param props - The `ArrayFieldDescriptionProps` for the component\n */\nexport default function ArrayFieldDescriptionTemplate(props) {\n    const { idSchema, description, registry, schema, uiSchema } = props;\n    const options = getUiOptions(uiSchema, registry.globalUiOptions);\n    const { label: displayLabel = true } = options;\n    if (!description || !displayLabel) {\n        return null;\n    }\n    const DescriptionFieldTemplate = getTemplate('DescriptionFieldTemplate', registry, options);\n    return (_jsx(DescriptionFieldTemplate, { id: descriptionId(idSchema), description: description, schema: schema, uiSchema: uiSchema, registry: registry }));\n}\n//# sourceMappingURL=ArrayFieldDescriptionTemplate.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/** The `ArrayFieldItemTemplate` component is the template used to render an items of an array.\n *\n * @param props - The `ArrayFieldTemplateItemType` props for the component\n */\nexport default function ArrayFieldItemTemplate(props) {\n    const { children, className, disabled, hasToolbar, hasMoveDown, hasMoveUp, hasRemove, hasCopy, index, onCopyIndexClick, onDropIndexClick, onReorderClick, readonly, registry, uiSchema, } = props;\n    const { CopyButton, MoveDownButton, MoveUpButton, RemoveButton } = registry.templates.ButtonTemplates;\n    const btnStyle = {\n        flex: 1,\n        paddingLeft: 6,\n        paddingRight: 6,\n        fontWeight: 'bold',\n    };\n    return (_jsxs(\"div\", { className: className, children: [_jsx(\"div\", { className: hasToolbar ? 'col-xs-9' : 'col-xs-12', children: children }), hasToolbar && (_jsx(\"div\", { className: 'col-xs-3 array-item-toolbox', children: _jsxs(\"div\", { className: 'btn-group', style: {\n                        display: 'flex',\n                        justifyContent: 'space-around',\n                    }, children: [(hasMoveUp || hasMoveDown) && (_jsx(MoveUpButton, { style: btnStyle, disabled: disabled || readonly || !hasMoveUp, onClick: onReorderClick(index, index - 1), uiSchema: uiSchema, registry: registry })), (hasMoveUp || hasMoveDown) && (_jsx(MoveDownButton, { style: btnStyle, disabled: disabled || readonly || !hasMoveDown, onClick: onReorderClick(index, index + 1), uiSchema: uiSchema, registry: registry })), hasCopy && (_jsx(CopyButton, { style: btnStyle, disabled: disabled || readonly, onClick: onCopyIndexClick(index), uiSchema: uiSchema, registry: registry })), hasRemove && (_jsx(RemoveButton, { style: btnStyle, disabled: disabled || readonly, onClick: onDropIndexClick(index), uiSchema: uiSchema, registry: registry }))] }) }))] }));\n}\n//# sourceMappingURL=ArrayFieldItemTemplate.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { getTemplate, getUiOptions, } from '@rjsf/utils';\n/** The `ArrayFieldTemplate` component is the template used to render all items in an array.\n *\n * @param props - The `ArrayFieldTemplateItemType` props for the component\n */\nexport default function ArrayFieldTemplate(props) {\n    const { canAdd, className, disabled, idSchema, uiSchema, items, onAddClick, readonly, registry, required, schema, title, } = props;\n    const uiOptions = getUiOptions(uiSchema);\n    const ArrayFieldDescriptionTemplate = getTemplate('ArrayFieldDescriptionTemplate', registry, uiOptions);\n    const ArrayFieldItemTemplate = getTemplate('ArrayFieldItemTemplate', registry, uiOptions);\n    const ArrayFieldTitleTemplate = getTemplate('ArrayFieldTitleTemplate', registry, uiOptions);\n    // Button templates are not overridden in the uiSchema\n    const { ButtonTemplates: { AddButton }, } = registry.templates;\n    return (_jsxs(\"fieldset\", { className: className, id: idSchema.$id, children: [_jsx(ArrayFieldTitleTemplate, { idSchema: idSchema, title: uiOptions.title || title, required: required, schema: schema, uiSchema: uiSchema, registry: registry }), _jsx(ArrayFieldDescriptionTemplate, { idSchema: idSchema, description: uiOptions.description || schema.description, schema: schema, uiSchema: uiSchema, registry: registry }), _jsx(\"div\", { className: 'row array-item-list', children: items &&\n                    items.map(({ key, ...itemProps }) => (_jsx(ArrayFieldItemTemplate, { ...itemProps }, key))) }), canAdd && (_jsx(AddButton, { className: 'array-item-add', onClick: onAddClick, disabled: disabled || readonly, uiSchema: uiSchema, registry: registry }))] }));\n}\n//# sourceMappingURL=ArrayFieldTemplate.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getTemplate, getUiOptions, titleId, } from '@rjsf/utils';\n/** The `ArrayFieldTitleTemplate` component renders a `TitleFieldTemplate` with an `id` derived from\n * the `idSchema`.\n *\n * @param props - The `ArrayFieldTitleProps` for the component\n */\nexport default function ArrayFieldTitleTemplate(props) {\n    const { idSchema, title, schema, uiSchema, required, registry } = props;\n    const options = getUiOptions(uiSchema, registry.globalUiOptions);\n    const { label: displayLabel = true } = options;\n    if (!title || !displayLabel) {\n        return null;\n    }\n    const TitleFieldTemplate = getTemplate('TitleFieldTemplate', registry, options);\n    return (_jsx(TitleFieldTemplate, { id: titleId(idSchema), title: title, required: required, schema: schema, uiSchema: uiSchema, registry: registry }));\n}\n//# sourceMappingURL=ArrayFieldTitleTemplate.js.map","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { ariaDescribedByIds, examplesId, getInputProps, } from '@rjsf/utils';\n/** The `BaseInputTemplate` is the template to use to render the basic `<input>` component for the `core` theme.\n * It is used as the template for rendering many of the <input> based widgets that differ by `type` and callbacks only.\n * It can be customized/overridden for other themes or individual implementations as needed.\n *\n * @param props - The `WidgetProps` for this template\n */\nexport default function BaseInputTemplate(props) {\n    const { id, name, // remove this from ...rest\n    value, readonly, disabled, autofocus, onBlur, onFocus, onChange, onChangeOverride, options, schema, uiSchema, formContext, registry, rawErrors, type, hideLabel, // remove this from ...rest\n    hideError, // remove this from ...rest\n    ...rest } = props;\n    // Note: since React 15.2.0 we can't forward unknown element attributes, so we\n    // exclude the \"options\" and \"schema\" ones here.\n    if (!id) {\n        console.log('No id for', props);\n        throw new Error(`no id for props ${JSON.stringify(props)}`);\n    }\n    const inputProps = {\n        ...rest,\n        ...getInputProps(schema, type, options),\n    };\n    let inputValue;\n    if (inputProps.type === 'number' || inputProps.type === 'integer') {\n        inputValue = value || value === 0 ? value : '';\n    }\n    else {\n        inputValue = value == null ? '' : value;\n    }\n    const _onChange = useCallback(({ target: { value } }) => onChange(value === '' ? options.emptyValue : value), [onChange, options]);\n    const _onBlur = useCallback(({ target }) => onBlur(id, target && target.value), [onBlur, id]);\n    const _onFocus = useCallback(({ target }) => onFocus(id, target && target.value), [onFocus, id]);\n    return (_jsxs(_Fragment, { children: [_jsx(\"input\", { id: id, name: id, className: 'form-control', readOnly: readonly, disabled: disabled, autoFocus: autofocus, value: inputValue, ...inputProps, list: schema.examples ? examplesId(id) : undefined, onChange: onChangeOverride || _onChange, onBlur: _onBlur, onFocus: _onFocus, \"aria-describedby\": ariaDescribedByIds(id, !!schema.examples) }), Array.isArray(schema.examples) && (_jsx(\"datalist\", { id: examplesId(id), children: schema.examples\n                    .concat(schema.default && !schema.examples.includes(schema.default) ? [schema.default] : [])\n                    .map((example) => {\n                    return _jsx(\"option\", { value: example }, example);\n                }) }, `datalist_${id}`))] }));\n}\n//# sourceMappingURL=BaseInputTemplate.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getSubmitButtonOptions } from '@rjsf/utils';\n/** The `SubmitButton` renders a button that represent the `Submit` action on a form\n */\nexport default function SubmitButton({ uiSchema }) {\n    const { submitText, norender, props: submitButtonProps = {} } = getSubmitButtonOptions(uiSchema);\n    if (norender) {\n        return null;\n    }\n    return (_jsx(\"div\", { children: _jsx(\"button\", { type: 'submit', ...submitButtonProps, className: `btn btn-info ${submitButtonProps.className || ''}`, children: submitText }) }));\n}\n//# sourceMappingURL=SubmitButton.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { TranslatableString } from '@rjsf/utils';\nexport default function IconButton(props) {\n    const { iconType = 'default', icon, className, uiSchema, registry, ...otherProps } = props;\n    return (_jsx(\"button\", { type: 'button', className: `btn btn-${iconType} ${className}`, ...otherProps, children: _jsx(\"i\", { className: `glyphicon glyphicon-${icon}` }) }));\n}\nexport function CopyButton(props) {\n    const { registry: { translateString }, } = props;\n    return (_jsx(IconButton, { title: translateString(TranslatableString.CopyButton), className: 'array-item-copy', ...props, icon: 'copy' }));\n}\nexport function MoveDownButton(props) {\n    const { registry: { translateString }, } = props;\n    return (_jsx(IconButton, { title: translateString(TranslatableString.MoveDownButton), className: 'array-item-move-down', ...props, icon: 'arrow-down' }));\n}\nexport function MoveUpButton(props) {\n    const { registry: { translateString }, } = props;\n    return (_jsx(IconButton, { title: translateString(TranslatableString.MoveUpButton), className: 'array-item-move-up', ...props, icon: 'arrow-up' }));\n}\nexport function RemoveButton(props) {\n    const { registry: { translateString }, } = props;\n    return (_jsx(IconButton, { title: translateString(TranslatableString.RemoveButton), className: 'array-item-remove', ...props, iconType: 'danger', icon: 'remove' }));\n}\n//# sourceMappingURL=IconButton.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { TranslatableString } from '@rjsf/utils';\nimport IconButton from './IconButton';\n/** The `AddButton` renders a button that represent the `Add` action on a form\n */\nexport default function AddButton({ className, onClick, disabled, registry, }) {\n    const { translateString } = registry;\n    return (_jsx(\"div\", { className: 'row', children: _jsx(\"p\", { className: `col-xs-3 col-xs-offset-9 text-right ${className}`, children: _jsx(IconButton, { iconType: 'info', icon: 'plus', className: 'btn-add col-xs-12', title: translateString(TranslatableString.AddButton), onClick: onClick, disabled: disabled, registry: registry }) }) }));\n}\n//# sourceMappingURL=AddButton.js.map","import SubmitButton from './SubmitButton';\nimport AddButton from './AddButton';\nimport { CopyButton, MoveDownButton, MoveUpButton, RemoveButton } from './IconButton';\nfunction buttonTemplates() {\n    return {\n        SubmitButton,\n        AddButton,\n        CopyButton,\n        MoveDownButton,\n        MoveUpButton,\n        RemoveButton,\n    };\n}\nexport default buttonTemplates;\n//# sourceMappingURL=index.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\n/** The `DescriptionField` is the template to use to render the description of a field\n *\n * @param props - The `DescriptionFieldProps` for this component\n */\nexport default function DescriptionField(props) {\n    const { id, description } = props;\n    if (!description) {\n        return null;\n    }\n    if (typeof description === 'string') {\n        return (_jsx(\"p\", { id: id, className: 'field-description', children: description }));\n    }\n    else {\n        return (_jsx(\"div\", { id: id, className: 'field-description', children: description }));\n    }\n}\n//# sourceMappingURL=DescriptionField.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { TranslatableString, } from '@rjsf/utils';\n/** The `ErrorList` component is the template that renders the all the errors associated with the fields in the `Form`\n *\n * @param props - The `ErrorListProps` for this component\n */\nexport default function ErrorList({ errors, registry, }) {\n    const { translateString } = registry;\n    return (_jsxs(\"div\", { className: 'panel panel-danger errors', children: [_jsx(\"div\", { className: 'panel-heading', children: _jsx(\"h3\", { className: 'panel-title', children: translateString(TranslatableString.ErrorsLabel) }) }), _jsx(\"ul\", { className: 'list-group', children: errors.map((error, i) => {\n                    return (_jsx(\"li\", { className: 'list-group-item text-danger', children: error.stack }, i));\n                }) })] }));\n}\n//# sourceMappingURL=ErrorList.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst REQUIRED_FIELD_SYMBOL = '*';\n/** Renders a label for a field\n *\n * @param props - The `LabelProps` for this component\n */\nexport default function Label(props) {\n    const { label, required, id } = props;\n    if (!label) {\n        return null;\n    }\n    return (_jsxs(\"label\", { className: 'control-label', htmlFor: id, children: [label, required && _jsx(\"span\", { className: 'required', children: REQUIRED_FIELD_SYMBOL })] }));\n}\n//# sourceMappingURL=Label.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { getTemplate, getUiOptions, } from '@rjsf/utils';\nimport Label from './Label';\n/** The `FieldTemplate` component is the template used by `SchemaField` to render any field. It renders the field\n * content, (label, description, children, errors and help) inside of a `WrapIfAdditional` component.\n *\n * @param props - The `FieldTemplateProps` for this component\n */\nexport default function FieldTemplate(props) {\n    const { id, label, children, errors, help, description, hidden, required, displayLabel, registry, uiSchema } = props;\n    const uiOptions = getUiOptions(uiSchema);\n    const WrapIfAdditionalTemplate = getTemplate('WrapIfAdditionalTemplate', registry, uiOptions);\n    if (hidden) {\n        return _jsx(\"div\", { className: 'hidden', children: children });\n    }\n    return (_jsxs(WrapIfAdditionalTemplate, { ...props, children: [displayLabel && _jsx(Label, { label: label, required: required, id: id }), displayLabel && description ? description : null, children, errors, help] }));\n}\n//# sourceMappingURL=FieldTemplate.js.map","import FieldTemplate from './FieldTemplate';\nexport default FieldTemplate;\n//# sourceMappingURL=index.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { errorId } from '@rjsf/utils';\n/** The `FieldErrorTemplate` component renders the errors local to the particular field\n *\n * @param props - The `FieldErrorProps` for the errors being rendered\n */\nexport default function FieldErrorTemplate(props) {\n    const { errors = [], idSchema } = props;\n    if (errors.length === 0) {\n        return null;\n    }\n    const id = errorId(idSchema);\n    return (_jsx(\"div\", { children: _jsx(\"ul\", { id: id, className: 'error-detail bs-callout bs-callout-info', children: errors\n                .filter((elem) => !!elem)\n                .map((error, index) => {\n                return (_jsx(\"li\", { className: 'text-danger', children: error }, index));\n            }) }) }));\n}\n//# sourceMappingURL=FieldErrorTemplate.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { helpId } from '@rjsf/utils';\n/** The `FieldHelpTemplate` component renders any help desired for a field\n *\n * @param props - The `FieldHelpProps` to be rendered\n */\nexport default function FieldHelpTemplate(props) {\n    const { idSchema, help } = props;\n    if (!help) {\n        return null;\n    }\n    const id = helpId(idSchema);\n    if (typeof help === 'string') {\n        return (_jsx(\"p\", { id: id, className: 'help-block', children: help }));\n    }\n    return (_jsx(\"div\", { id: id, className: 'help-block', children: help }));\n}\n//# sourceMappingURL=FieldHelpTemplate.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { canExpand, descriptionId, getTemplate, getUiOptions, titleId, } from '@rjsf/utils';\n/** The `ObjectFieldTemplate` is the template to use to render all the inner properties of an object along with the\n * title and description if available. If the object is expandable, then an `AddButton` is also rendered after all\n * the properties.\n *\n * @param props - The `ObjectFieldTemplateProps` for this component\n */\nexport default function ObjectFieldTemplate(props) {\n    const { description, disabled, formData, idSchema, onAddClick, properties, readonly, registry, required, schema, title, uiSchema, } = props;\n    const options = getUiOptions(uiSchema);\n    const TitleFieldTemplate = getTemplate('TitleFieldTemplate', registry, options);\n    const DescriptionFieldTemplate = getTemplate('DescriptionFieldTemplate', registry, options);\n    // Button templates are not overridden in the uiSchema\n    const { ButtonTemplates: { AddButton }, } = registry.templates;\n    return (_jsxs(\"fieldset\", { id: idSchema.$id, children: [title && (_jsx(TitleFieldTemplate, { id: titleId(idSchema), title: title, required: required, schema: schema, uiSchema: uiSchema, registry: registry })), description && (_jsx(DescriptionFieldTemplate, { id: descriptionId(idSchema), description: description, schema: schema, uiSchema: uiSchema, registry: registry })), properties.map((prop) => prop.content), canExpand(schema, uiSchema, formData) && (_jsx(AddButton, { className: 'object-property-expand', onClick: onAddClick(schema), disabled: disabled || readonly, uiSchema: uiSchema, registry: registry }))] }));\n}\n//# sourceMappingURL=ObjectFieldTemplate.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst REQUIRED_FIELD_SYMBOL = '*';\n/** The `TitleField` is the template to use to render the title of a field\n *\n * @param props - The `TitleFieldProps` for this component\n */\nexport default function TitleField(props) {\n    const { id, title, required } = props;\n    return (_jsxs(\"legend\", { id: id, children: [title, required && _jsx(\"span\", { className: 'required', children: REQUIRED_FIELD_SYMBOL })] }));\n}\n//# sourceMappingURL=TitleField.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { TranslatableString } from '@rjsf/utils';\nimport Markdown from 'markdown-to-jsx';\n/** The `UnsupportedField` component is used to render a field in the schema is one that is not supported by\n * react-jsonschema-form.\n *\n * @param props - The `FieldProps` for this template\n */\nfunction UnsupportedField(props) {\n    const { schema, idSchema, reason, registry } = props;\n    const { translateString } = registry;\n    let translateEnum = TranslatableString.UnsupportedField;\n    const translateParams = [];\n    if (idSchema && idSchema.$id) {\n        translateEnum = TranslatableString.UnsupportedFieldWithId;\n        translateParams.push(idSchema.$id);\n    }\n    if (reason) {\n        translateEnum =\n            translateEnum === TranslatableString.UnsupportedField\n                ? TranslatableString.UnsupportedFieldWithReason\n                : TranslatableString.UnsupportedFieldWithIdAndReason;\n        translateParams.push(reason);\n    }\n    return (_jsxs(\"div\", { className: 'unsupported-field', children: [_jsx(\"p\", { children: _jsx(Markdown, { children: translateString(translateEnum, translateParams) }) }), schema && _jsx(\"pre\", { children: JSON.stringify(schema, null, 2) })] }));\n}\nexport default UnsupportedField;\n//# sourceMappingURL=UnsupportedField.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { ADDITIONAL_PROPERTY_FLAG, TranslatableString, } from '@rjsf/utils';\nimport Label from './FieldTemplate/Label';\n/** The `WrapIfAdditional` component is used by the `FieldTemplate` to rename, or remove properties that are\n * part of an `additionalProperties` part of a schema.\n *\n * @param props - The `WrapIfAdditionalProps` for this component\n */\nexport default function WrapIfAdditionalTemplate(props) {\n    const { id, classNames, style, disabled, label, onKeyChange, onDropPropertyClick, readonly, required, schema, children, uiSchema, registry, } = props;\n    const { templates, translateString } = registry;\n    // Button templates are not overridden in the uiSchema\n    const { RemoveButton } = templates.ButtonTemplates;\n    const keyLabel = translateString(TranslatableString.KeyLabel, [label]);\n    const additional = ADDITIONAL_PROPERTY_FLAG in schema;\n    if (!additional) {\n        return (_jsx(\"div\", { className: classNames, style: style, children: children }));\n    }\n    return (_jsx(\"div\", { className: classNames, style: style, children: _jsxs(\"div\", { className: 'row', children: [_jsx(\"div\", { className: 'col-xs-5 form-additional', children: _jsxs(\"div\", { className: 'form-group', children: [_jsx(Label, { label: keyLabel, required: required, id: `${id}-key` }), _jsx(\"input\", { className: 'form-control', type: 'text', id: `${id}-key`, onBlur: ({ target }) => onKeyChange(target && target.value), defaultValue: label })] }) }), _jsx(\"div\", { className: 'form-additional form-group col-xs-5', children: children }), _jsx(\"div\", { className: 'col-xs-2', children: _jsx(RemoveButton, { className: 'array-item-remove btn-block', style: { border: '0' }, disabled: disabled || readonly, onClick: onDropPropertyClick(label), uiSchema: uiSchema, registry: registry }) })] }) }));\n}\n//# sourceMappingURL=WrapIfAdditionalTemplate.js.map","import ArrayFieldDescriptionTemplate from './ArrayFieldDescriptionTemplate';\nimport ArrayFieldItemTemplate from './ArrayFieldItemTemplate';\nimport ArrayFieldTemplate from './ArrayFieldTemplate';\nimport ArrayFieldTitleTemplate from './ArrayFieldTitleTemplate';\nimport BaseInputTemplate from './BaseInputTemplate';\nimport ButtonTemplates from './ButtonTemplates';\nimport DescriptionField from './DescriptionField';\nimport ErrorList from './ErrorList';\nimport FieldTemplate from './FieldTemplate';\nimport FieldErrorTemplate from './FieldErrorTemplate';\nimport FieldHelpTemplate from './FieldHelpTemplate';\nimport ObjectFieldTemplate from './ObjectFieldTemplate';\nimport TitleField from './TitleField';\nimport UnsupportedField from './UnsupportedField';\nimport WrapIfAdditionalTemplate from './WrapIfAdditionalTemplate';\nfunction templates() {\n    return {\n        ArrayFieldDescriptionTemplate,\n        ArrayFieldItemTemplate,\n        ArrayFieldTemplate,\n        ArrayFieldTitleTemplate,\n        ButtonTemplates: ButtonTemplates(),\n        BaseInputTemplate,\n        DescriptionFieldTemplate: DescriptionField,\n        ErrorListTemplate: ErrorList,\n        FieldTemplate,\n        FieldErrorTemplate,\n        FieldHelpTemplate,\n        ObjectFieldTemplate,\n        TitleFieldTemplate: TitleField,\n        UnsupportedFieldTemplate: UnsupportedField,\n        WrapIfAdditionalTemplate,\n    };\n}\nexport default templates;\n//# sourceMappingURL=index.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useEffect, useReducer, useState } from 'react';\nimport { ariaDescribedByIds, parseDateString, toDateString, pad, TranslatableString, getDateElementProps, } from '@rjsf/utils';\nfunction rangeOptions(start, stop) {\n    const options = [];\n    for (let i = start; i <= stop; i++) {\n        options.push({ value: i, label: pad(i, 2) });\n    }\n    return options;\n}\nfunction readyForChange(state) {\n    return Object.values(state).every((value) => value !== -1);\n}\nfunction DateElement({ type, range, value, select, rootId, name, disabled, readonly, autofocus, registry, onBlur, onFocus, }) {\n    const id = rootId + '_' + type;\n    const { SelectWidget } = registry.widgets;\n    return (_jsx(SelectWidget, { schema: { type: 'integer' }, id: id, name: name, className: 'form-control', options: { enumOptions: rangeOptions(range[0], range[1]) }, placeholder: type, value: value, disabled: disabled, readonly: readonly, autofocus: autofocus, onChange: (value) => select(type, value), onBlur: onBlur, onFocus: onFocus, registry: registry, label: '', \"aria-describedby\": ariaDescribedByIds(rootId) }));\n}\n/** The `AltDateWidget` is an alternative widget for rendering date properties.\n * @param props - The `WidgetProps` for this component\n */\nfunction AltDateWidget({ time = false, disabled = false, readonly = false, autofocus = false, options, id, name, registry, onBlur, onFocus, onChange, value, }) {\n    const { translateString } = registry;\n    const [lastValue, setLastValue] = useState(value);\n    const [state, setState] = useReducer((state, action) => {\n        return { ...state, ...action };\n    }, parseDateString(value, time));\n    useEffect(() => {\n        const stateValue = toDateString(state, time);\n        if (readyForChange(state) && stateValue !== value) {\n            // The user changed the date to a new valid data via the comboboxes, so call onChange\n            onChange(stateValue);\n        }\n        else if (lastValue !== value) {\n            // We got a new value in the props\n            setLastValue(value);\n            setState(parseDateString(value, time));\n        }\n    }, [time, value, onChange, state, lastValue]);\n    const handleChange = useCallback((property, value) => {\n        setState({ [property]: value });\n    }, []);\n    const handleSetNow = useCallback((event) => {\n        event.preventDefault();\n        if (disabled || readonly) {\n            return;\n        }\n        const nextState = parseDateString(new Date().toJSON(), time);\n        onChange(toDateString(nextState, time));\n    }, [disabled, readonly, time]);\n    const handleClear = useCallback((event) => {\n        event.preventDefault();\n        if (disabled || readonly) {\n            return;\n        }\n        onChange(undefined);\n    }, [disabled, readonly, onChange]);\n    return (_jsxs(\"ul\", { className: 'list-inline', children: [getDateElementProps(state, time, options.yearsRange, options.format).map((elemProps, i) => (_jsx(\"li\", { className: 'list-inline-item', children: _jsx(DateElement, { rootId: id, name: name, select: handleChange, ...elemProps, disabled: disabled, readonly: readonly, registry: registry, onBlur: onBlur, onFocus: onFocus, autofocus: autofocus && i === 0 }) }, i))), (options.hideNowButton !== 'undefined' ? !options.hideNowButton : true) && (_jsx(\"li\", { className: 'list-inline-item', children: _jsx(\"a\", { href: '#', className: 'btn btn-info btn-now', onClick: handleSetNow, children: translateString(TranslatableString.NowLabel) }) })), (options.hideClearButton !== 'undefined' ? !options.hideClearButton : true) && (_jsx(\"li\", { className: 'list-inline-item', children: _jsx(\"a\", { href: '#', className: 'btn btn-warning btn-clear', onClick: handleClear, children: translateString(TranslatableString.ClearLabel) }) }))] }));\n}\nexport default AltDateWidget;\n//# sourceMappingURL=AltDateWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\n/** The `AltDateTimeWidget` is an alternative widget for rendering datetime properties.\n *  It uses the AltDateWidget for rendering, with the `time` prop set to true by default.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction AltDateTimeWidget({ time = true, ...props }) {\n    const { AltDateWidget } = props.registry.widgets;\n    return _jsx(AltDateWidget, { time: time, ...props });\n}\nexport default AltDateTimeWidget;\n//# sourceMappingURL=AltDateTimeWidget.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { ariaDescribedByIds, descriptionId, getTemplate, labelValue, schemaRequiresTrueValue, } from '@rjsf/utils';\n/** The `CheckBoxWidget` is a widget for rendering boolean properties.\n *  It is typically used to represent a boolean.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction CheckboxWidget({ schema, uiSchema, options, id, value, disabled, readonly, label, hideLabel, autofocus = false, onBlur, onFocus, onChange, registry, }) {\n    var _a;\n    const DescriptionFieldTemplate = getTemplate('DescriptionFieldTemplate', registry, options);\n    // Because an unchecked checkbox will cause html5 validation to fail, only add\n    // the \"required\" attribute if the field value must be \"true\", due to the\n    // \"const\" or \"enum\" keywords\n    const required = schemaRequiresTrueValue(schema);\n    const handleChange = useCallback((event) => onChange(event.target.checked), [onChange]);\n    const handleBlur = useCallback((event) => onBlur(id, event.target.checked), [onBlur, id]);\n    const handleFocus = useCallback((event) => onFocus(id, event.target.checked), [onFocus, id]);\n    const description = (_a = options.description) !== null && _a !== void 0 ? _a : schema.description;\n    return (_jsxs(\"div\", { className: `checkbox ${disabled || readonly ? 'disabled' : ''}`, children: [!hideLabel && !!description && (_jsx(DescriptionFieldTemplate, { id: descriptionId(id), description: description, schema: schema, uiSchema: uiSchema, registry: registry })), _jsxs(\"label\", { children: [_jsx(\"input\", { type: 'checkbox', id: id, name: id, checked: typeof value === 'undefined' ? false : value, required: required, disabled: disabled || readonly, autoFocus: autofocus, onChange: handleChange, onBlur: handleBlur, onFocus: handleFocus, \"aria-describedby\": ariaDescribedByIds(id) }), labelValue(_jsx(\"span\", { children: label }), hideLabel)] })] }));\n}\nexport default CheckboxWidget;\n//# sourceMappingURL=CheckboxWidget.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { ariaDescribedByIds, enumOptionsDeselectValue, enumOptionsIsSelected, enumOptionsSelectValue, enumOptionsValueForIndex, optionId, } from '@rjsf/utils';\n/** The `CheckboxesWidget` is a widget for rendering checkbox groups.\n *  It is typically used to represent an array of enums.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction CheckboxesWidget({ id, disabled, options: { inline = false, enumOptions, enumDisabled, emptyValue }, value, autofocus = false, readonly, onChange, onBlur, onFocus, }) {\n    const checkboxesValues = Array.isArray(value) ? value : [value];\n    const handleBlur = useCallback(({ target }) => onBlur(id, enumOptionsValueForIndex(target && target.value, enumOptions, emptyValue)), [onBlur, id]);\n    const handleFocus = useCallback(({ target }) => onFocus(id, enumOptionsValueForIndex(target && target.value, enumOptions, emptyValue)), [onFocus, id]);\n    return (_jsx(\"div\", { className: 'checkboxes', id: id, children: Array.isArray(enumOptions) &&\n            enumOptions.map((option, index) => {\n                const checked = enumOptionsIsSelected(option.value, checkboxesValues);\n                const itemDisabled = Array.isArray(enumDisabled) && enumDisabled.indexOf(option.value) !== -1;\n                const disabledCls = disabled || itemDisabled || readonly ? 'disabled' : '';\n                const handleChange = (event) => {\n                    if (event.target.checked) {\n                        onChange(enumOptionsSelectValue(index, checkboxesValues, enumOptions));\n                    }\n                    else {\n                        onChange(enumOptionsDeselectValue(index, checkboxesValues, enumOptions));\n                    }\n                };\n                const checkbox = (_jsxs(\"span\", { children: [_jsx(\"input\", { type: 'checkbox', id: optionId(id, index), name: id, checked: checked, value: String(index), disabled: disabled || itemDisabled || readonly, autoFocus: autofocus && index === 0, onChange: handleChange, onBlur: handleBlur, onFocus: handleFocus, \"aria-describedby\": ariaDescribedByIds(id) }), _jsx(\"span\", { children: option.label })] }));\n                return inline ? (_jsx(\"label\", { className: `checkbox-inline ${disabledCls}`, children: checkbox }, index)) : (_jsx(\"div\", { className: `checkbox ${disabledCls}`, children: _jsx(\"label\", { children: checkbox }) }, index));\n            }) }));\n}\nexport default CheckboxesWidget;\n//# sourceMappingURL=CheckboxesWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getTemplate } from '@rjsf/utils';\n/** The `ColorWidget` component uses the `BaseInputTemplate` changing the type to `color` and disables it when it is\n * either disabled or readonly.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function ColorWidget(props) {\n    const { disabled, readonly, options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    return _jsx(BaseInputTemplate, { type: 'color', ...props, disabled: disabled || readonly });\n}\n//# sourceMappingURL=ColorWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { getTemplate } from '@rjsf/utils';\n/** The `DateWidget` component uses the `BaseInputTemplate` changing the type to `date` and transforms\n * the value to undefined when it is falsy during the `onChange` handling.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function DateWidget(props) {\n    const { onChange, options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    const handleChange = useCallback((value) => onChange(value || undefined), [onChange]);\n    return _jsx(BaseInputTemplate, { type: 'date', ...props, onChange: handleChange });\n}\n//# sourceMappingURL=DateWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getTemplate, localToUTC, utcToLocal, } from '@rjsf/utils';\n/** The `DateTimeWidget` component uses the `BaseInputTemplate` changing the type to `datetime-local` and transforms\n * the value to/from utc using the appropriate utility functions.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function DateTimeWidget(props) {\n    const { onChange, value, options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    return (_jsx(BaseInputTemplate, { type: 'datetime-local', ...props, value: utcToLocal(value), onChange: (value) => onChange(localToUTC(value)) }));\n}\n//# sourceMappingURL=DateTimeWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getTemplate } from '@rjsf/utils';\n/** The `EmailWidget` component uses the `BaseInputTemplate` changing the type to `email`.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function EmailWidget(props) {\n    const { options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    return _jsx(BaseInputTemplate, { type: 'email', ...props });\n}\n//# sourceMappingURL=EmailWidget.js.map","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useMemo } from 'react';\nimport { dataURItoBlob, getTemplate, TranslatableString, } from '@rjsf/utils';\nimport Markdown from 'markdown-to-jsx';\nfunction addNameToDataURL(dataURL, name) {\n    if (dataURL === null) {\n        return null;\n    }\n    return dataURL.replace(';base64', `;name=${encodeURIComponent(name)};base64`);\n}\nfunction processFile(file) {\n    const { name, size, type } = file;\n    return new Promise((resolve, reject) => {\n        const reader = new window.FileReader();\n        reader.onerror = reject;\n        reader.onload = (event) => {\n            var _a;\n            if (typeof ((_a = event.target) === null || _a === void 0 ? void 0 : _a.result) === 'string') {\n                resolve({\n                    dataURL: addNameToDataURL(event.target.result, name),\n                    name,\n                    size,\n                    type,\n                });\n            }\n            else {\n                resolve({\n                    dataURL: null,\n                    name,\n                    size,\n                    type,\n                });\n            }\n        };\n        reader.readAsDataURL(file);\n    });\n}\nfunction processFiles(files) {\n    return Promise.all(Array.from(files).map(processFile));\n}\nfunction FileInfoPreview({ fileInfo, registry, }) {\n    const { translateString } = registry;\n    const { dataURL, type, name } = fileInfo;\n    if (!dataURL) {\n        return null;\n    }\n    // If type is JPEG or PNG then show image preview.\n    // Originally, any type of image was supported, but this was changed into a whitelist\n    // since SVGs and animated GIFs are also images, which are generally considered a security risk.\n    if (['image/jpeg', 'image/png'].includes(type)) {\n        return _jsx(\"img\", { src: dataURL, style: { maxWidth: '100%' }, className: 'file-preview' });\n    }\n    // otherwise, let users download file\n    return (_jsxs(_Fragment, { children: [' ', _jsx(\"a\", { download: `preview-${name}`, href: dataURL, className: 'file-download', children: translateString(TranslatableString.PreviewLabel) })] }));\n}\nfunction FilesInfo({ filesInfo, registry, preview, onRemove, options, }) {\n    if (filesInfo.length === 0) {\n        return null;\n    }\n    const { translateString } = registry;\n    const { RemoveButton } = getTemplate('ButtonTemplates', registry, options);\n    return (_jsx(\"ul\", { className: 'file-info', children: filesInfo.map((fileInfo, key) => {\n            const { name, size, type } = fileInfo;\n            const handleRemove = () => onRemove(key);\n            return (_jsxs(\"li\", { children: [_jsx(Markdown, { children: translateString(TranslatableString.FilesInfo, [name, type, String(size)]) }), preview && _jsx(FileInfoPreview, { fileInfo: fileInfo, registry: registry }), _jsx(RemoveButton, { onClick: handleRemove, registry: registry })] }, key));\n        }) }));\n}\nfunction extractFileInfo(dataURLs) {\n    return dataURLs.reduce((acc, dataURL) => {\n        if (!dataURL) {\n            return acc;\n        }\n        try {\n            const { blob, name } = dataURItoBlob(dataURL);\n            return [\n                ...acc,\n                {\n                    dataURL,\n                    name: name,\n                    size: blob.size,\n                    type: blob.type,\n                },\n            ];\n        }\n        catch (e) {\n            // Invalid dataURI, so just ignore it.\n            return acc;\n        }\n    }, []);\n}\n/**\n *  The `FileWidget` is a widget for rendering file upload fields.\n *  It is typically used with a string property with data-url format.\n */\nfunction FileWidget(props) {\n    const { disabled, readonly, required, multiple, onChange, value, options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    const handleChange = useCallback((event) => {\n        if (!event.target.files) {\n            return;\n        }\n        // Due to variances in themes, dealing with multiple files for the array case now happens one file at a time.\n        // This is because we don't pass `multiple` into the `BaseInputTemplate` anymore. Instead, we deal with the single\n        // file in each event and concatenate them together ourselves\n        processFiles(event.target.files).then((filesInfoEvent) => {\n            const newValue = filesInfoEvent.map((fileInfo) => fileInfo.dataURL);\n            if (multiple) {\n                onChange(value.concat(newValue[0]));\n            }\n            else {\n                onChange(newValue[0]);\n            }\n        });\n    }, [multiple, value, onChange]);\n    const filesInfo = useMemo(() => extractFileInfo(Array.isArray(value) ? value : [value]), [value]);\n    const rmFile = useCallback((index) => {\n        if (multiple) {\n            const newValue = value.filter((_, i) => i !== index);\n            onChange(newValue);\n        }\n        else {\n            onChange(undefined);\n        }\n    }, [multiple, value, onChange]);\n    return (_jsxs(\"div\", { children: [_jsx(BaseInputTemplate, { ...props, disabled: disabled || readonly, type: 'file', required: value ? false : required, onChangeOverride: handleChange, value: '', accept: options.accept ? String(options.accept) : undefined }), _jsx(FilesInfo, { filesInfo: filesInfo, onRemove: rmFile, registry: registry, preview: options.filePreview, options: options })] }));\n}\nexport default FileWidget;\n//# sourceMappingURL=FileWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\n/** The `HiddenWidget` is a widget for rendering a hidden input field.\n *  It is typically used by setting type to \"hidden\".\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction HiddenWidget({ id, value, }) {\n    return _jsx(\"input\", { type: 'hidden', id: id, name: id, value: typeof value === 'undefined' ? '' : value });\n}\nexport default HiddenWidget;\n//# sourceMappingURL=HiddenWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getTemplate } from '@rjsf/utils';\n/** The `PasswordWidget` component uses the `BaseInputTemplate` changing the type to `password`.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function PasswordWidget(props) {\n    const { options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    return _jsx(BaseInputTemplate, { type: 'password', ...props });\n}\n//# sourceMappingURL=PasswordWidget.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { ariaDescribedByIds, enumOptionsIsSelected, enumOptionsValueForIndex, optionId, } from '@rjsf/utils';\n/** The `RadioWidget` is a widget for rendering a radio group.\n *  It is typically used with a string property constrained with enum options.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction RadioWidget({ options, value, required, disabled, readonly, autofocus = false, onBlur, onFocus, onChange, id, }) {\n    const { enumOptions, enumDisabled, inline, emptyValue } = options;\n    const handleBlur = useCallback(({ target }) => onBlur(id, enumOptionsValueForIndex(target && target.value, enumOptions, emptyValue)), [onBlur, id]);\n    const handleFocus = useCallback(({ target }) => onFocus(id, enumOptionsValueForIndex(target && target.value, enumOptions, emptyValue)), [onFocus, id]);\n    return (_jsx(\"div\", { className: 'field-radio-group', id: id, children: Array.isArray(enumOptions) &&\n            enumOptions.map((option, i) => {\n                const checked = enumOptionsIsSelected(option.value, value);\n                const itemDisabled = Array.isArray(enumDisabled) && enumDisabled.indexOf(option.value) !== -1;\n                const disabledCls = disabled || itemDisabled || readonly ? 'disabled' : '';\n                const handleChange = () => onChange(option.value);\n                const radio = (_jsxs(\"span\", { children: [_jsx(\"input\", { type: 'radio', id: optionId(id, i), checked: checked, name: id, required: required, value: String(i), disabled: disabled || itemDisabled || readonly, autoFocus: autofocus && i === 0, onChange: handleChange, onBlur: handleBlur, onFocus: handleFocus, \"aria-describedby\": ariaDescribedByIds(id) }), _jsx(\"span\", { children: option.label })] }));\n                return inline ? (_jsx(\"label\", { className: `radio-inline ${disabledCls}`, children: radio }, i)) : (_jsx(\"div\", { className: `radio ${disabledCls}`, children: _jsx(\"label\", { children: radio }) }, i));\n            }) }));\n}\nexport default RadioWidget;\n//# sourceMappingURL=RadioWidget.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/** The `RangeWidget` component uses the `BaseInputTemplate` changing the type to `range` and wrapping the result\n * in a div, with the value along side it.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function RangeWidget(props) {\n    const { value, registry: { templates: { BaseInputTemplate }, }, } = props;\n    return (_jsxs(\"div\", { className: 'field-range-wrapper', children: [_jsx(BaseInputTemplate, { type: 'range', ...props }), _jsx(\"span\", { className: 'range-view', children: value })] }));\n}\n//# sourceMappingURL=RangeWidget.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { ariaDescribedByIds, enumOptionsIndexForValue, enumOptionsValueForIndex, } from '@rjsf/utils';\nfunction getValue(event, multiple) {\n    if (multiple) {\n        return Array.from(event.target.options)\n            .slice()\n            .filter((o) => o.selected)\n            .map((o) => o.value);\n    }\n    return event.target.value;\n}\n/** The `SelectWidget` is a widget for rendering dropdowns.\n *  It is typically used with string properties constrained with enum options.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction SelectWidget({ schema, id, options, value, required, disabled, readonly, multiple = false, autofocus = false, onChange, onBlur, onFocus, placeholder, }) {\n    const { enumOptions, enumDisabled, emptyValue: optEmptyVal } = options;\n    const emptyValue = multiple ? [] : '';\n    const handleFocus = useCallback((event) => {\n        const newValue = getValue(event, multiple);\n        return onFocus(id, enumOptionsValueForIndex(newValue, enumOptions, optEmptyVal));\n    }, [onFocus, id, schema, multiple, options]);\n    const handleBlur = useCallback((event) => {\n        const newValue = getValue(event, multiple);\n        return onBlur(id, enumOptionsValueForIndex(newValue, enumOptions, optEmptyVal));\n    }, [onBlur, id, schema, multiple, options]);\n    const handleChange = useCallback((event) => {\n        const newValue = getValue(event, multiple);\n        return onChange(enumOptionsValueForIndex(newValue, enumOptions, optEmptyVal));\n    }, [onChange, schema, multiple, options]);\n    const selectedIndexes = enumOptionsIndexForValue(value, enumOptions, multiple);\n    return (_jsxs(\"select\", { id: id, name: id, multiple: multiple, className: 'form-control', value: typeof selectedIndexes === 'undefined' ? emptyValue : selectedIndexes, required: required, disabled: disabled || readonly, autoFocus: autofocus, onBlur: handleBlur, onFocus: handleFocus, onChange: handleChange, \"aria-describedby\": ariaDescribedByIds(id), children: [!multiple && schema.default === undefined && _jsx(\"option\", { value: '', children: placeholder }), Array.isArray(enumOptions) &&\n                enumOptions.map(({ value, label }, i) => {\n                    const disabled = enumDisabled && enumDisabled.indexOf(value) !== -1;\n                    return (_jsx(\"option\", { value: String(i), disabled: disabled, children: label }, i));\n                })] }));\n}\nexport default SelectWidget;\n//# sourceMappingURL=SelectWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { ariaDescribedByIds } from '@rjsf/utils';\n/** The `TextareaWidget` is a widget for rendering input fields as textarea.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction TextareaWidget({ id, options = {}, placeholder, value, required, disabled, readonly, autofocus = false, onChange, onBlur, onFocus, }) {\n    const handleChange = useCallback(({ target: { value } }) => onChange(value === '' ? options.emptyValue : value), [onChange, options.emptyValue]);\n    const handleBlur = useCallback(({ target }) => onBlur(id, target && target.value), [onBlur, id]);\n    const handleFocus = useCallback(({ target }) => onFocus(id, target && target.value), [id, onFocus]);\n    return (_jsx(\"textarea\", { id: id, name: id, className: 'form-control', value: value ? value : '', placeholder: placeholder, required: required, disabled: disabled, readOnly: readonly, autoFocus: autofocus, rows: options.rows, onBlur: handleBlur, onFocus: handleFocus, onChange: handleChange, \"aria-describedby\": ariaDescribedByIds(id) }));\n}\nTextareaWidget.defaultProps = {\n    autofocus: false,\n    options: {},\n};\nexport default TextareaWidget;\n//# sourceMappingURL=TextareaWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getTemplate } from '@rjsf/utils';\n/** The `TextWidget` component uses the `BaseInputTemplate`.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function TextWidget(props) {\n    const { options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    return _jsx(BaseInputTemplate, { ...props });\n}\n//# sourceMappingURL=TextWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { getTemplate } from '@rjsf/utils';\n/** The `TimeWidget` component uses the `BaseInputTemplate` changing the type to `time` and transforms\n * the value to undefined when it is falsy during the `onChange` handling.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function TimeWidget(props) {\n    const { onChange, options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    const handleChange = useCallback((value) => onChange(value ? `${value}:00` : undefined), [onChange]);\n    return _jsx(BaseInputTemplate, { type: 'time', ...props, onChange: handleChange });\n}\n//# sourceMappingURL=TimeWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getTemplate } from '@rjsf/utils';\n/** The `URLWidget` component uses the `BaseInputTemplate` changing the type to `url`.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function URLWidget(props) {\n    const { options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    return _jsx(BaseInputTemplate, { type: 'url', ...props });\n}\n//# sourceMappingURL=URLWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getTemplate } from '@rjsf/utils';\n/** The `UpDownWidget` component uses the `BaseInputTemplate` changing the type to `number`.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function UpDownWidget(props) {\n    const { options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    return _jsx(BaseInputTemplate, { type: 'number', ...props });\n}\n//# sourceMappingURL=UpDownWidget.js.map","import AltDateWidget from './AltDateWidget';\nimport AltDateTimeWidget from './AltDateTimeWidget';\nimport CheckboxWidget from './CheckboxWidget';\nimport CheckboxesWidget from './CheckboxesWidget';\nimport ColorWidget from './ColorWidget';\nimport DateWidget from './DateWidget';\nimport DateTimeWidget from './DateTimeWidget';\nimport EmailWidget from './EmailWidget';\nimport FileWidget from './FileWidget';\nimport HiddenWidget from './HiddenWidget';\nimport PasswordWidget from './PasswordWidget';\nimport RadioWidget from './RadioWidget';\nimport RangeWidget from './RangeWidget';\nimport SelectWidget from './SelectWidget';\nimport TextareaWidget from './TextareaWidget';\nimport TextWidget from './TextWidget';\nimport TimeWidget from './TimeWidget';\nimport URLWidget from './URLWidget';\nimport UpDownWidget from './UpDownWidget';\nfunction widgets() {\n    return {\n        AltDateWidget,\n        AltDateTimeWidget,\n        CheckboxWidget,\n        CheckboxesWidget,\n        ColorWidget,\n        DateWidget,\n        DateTimeWidget,\n        EmailWidget,\n        FileWidget,\n        HiddenWidget,\n        PasswordWidget,\n        RadioWidget,\n        RangeWidget,\n        SelectWidget,\n        TextWidget,\n        TextareaWidget,\n        TimeWidget,\n        UpDownWidget,\n        URLWidget,\n    };\n}\nexport default widgets;\n//# sourceMappingURL=index.js.map","import { englishStringTranslator } from '@rjsf/utils';\nimport fields from './components/fields';\nimport templates from './components/templates';\nimport widgets from './components/widgets';\n/** The default registry consists of all the fields, templates and widgets provided in the core implementation,\n * plus an empty `rootSchema` and `formContext. We omit schemaUtils here because it cannot be defaulted without a\n * rootSchema and validator. It will be added into the computed registry later in the Form.\n */\nexport default function getDefaultRegistry() {\n    return {\n        fields: fields(),\n        templates: templates(),\n        widgets: widgets(),\n        rootSchema: {},\n        formContext: {},\n        translateString: englishStringTranslator,\n    };\n}\n//# sourceMappingURL=getDefaultRegistry.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Component, createRef } from 'react';\nimport { createSchemaUtils, deepEquals, getTemplate, getUiOptions, isObject, mergeObjects, NAME_KEY, RJSF_ADDITIONAL_PROPERTIES_FLAG, shouldRender, SUBMIT_BTN_OPTIONS_KEY, toErrorList, UI_GLOBAL_OPTIONS_KEY, UI_OPTIONS_KEY, validationDataMerge, } from '@rjsf/utils';\nimport _get from 'lodash/get';\nimport _isEmpty from 'lodash/isEmpty';\nimport _pick from 'lodash/pick';\nimport _toPath from 'lodash/toPath';\nimport getDefaultRegistry from '../getDefaultRegistry';\n/** The `Form` component renders the outer form and all the fields defined in the `schema` */\nexport default class Form extends Component {\n    /** Constructs the `Form` from the `props`. Will setup the initial state from the props. It will also call the\n     * `onChange` handler if the initially provided `formData` is modified to add missing default values as part of the\n     * state construction.\n     *\n     * @param props - The initial props for the `Form`\n     */\n    constructor(props) {\n        super(props);\n        /** Returns the `formData` with only the elements specified in the `fields` list\n         *\n         * @param formData - The data for the `Form`\n         * @param fields - The fields to keep while filtering\n         */\n        this.getUsedFormData = (formData, fields) => {\n            // For the case of a single input form\n            if (fields.length === 0 && typeof formData !== 'object') {\n                return formData;\n            }\n            // _pick has incorrect type definition, it works with string[][], because lodash/hasIn supports it\n            const data = _pick(formData, fields);\n            if (Array.isArray(formData)) {\n                return Object.keys(data).map((key) => data[key]);\n            }\n            return data;\n        };\n        /** Returns the list of field names from inspecting the `pathSchema` as well as using the `formData`\n         *\n         * @param pathSchema - The `PathSchema` object for the form\n         * @param [formData] - The form data to use while checking for empty objects/arrays\n         */\n        this.getFieldNames = (pathSchema, formData) => {\n            const getAllPaths = (_obj, acc = [], paths = [[]]) => {\n                Object.keys(_obj).forEach((key) => {\n                    if (typeof _obj[key] === 'object') {\n                        const newPaths = paths.map((path) => [...path, key]);\n                        // If an object is marked with additionalProperties, all its keys are valid\n                        if (_obj[key][RJSF_ADDITIONAL_PROPERTIES_FLAG] && _obj[key][NAME_KEY] !== '') {\n                            acc.push(_obj[key][NAME_KEY]);\n                        }\n                        else {\n                            getAllPaths(_obj[key], acc, newPaths);\n                        }\n                    }\n                    else if (key === NAME_KEY && _obj[key] !== '') {\n                        paths.forEach((path) => {\n                            const formValue = _get(formData, path);\n                            // adds path to fieldNames if it points to a value\n                            // or an empty object/array\n                            if (typeof formValue !== 'object' ||\n                                _isEmpty(formValue) ||\n                                (Array.isArray(formValue) && formValue.every((val) => typeof val !== 'object'))) {\n                                acc.push(path);\n                            }\n                        });\n                    }\n                });\n                return acc;\n            };\n            return getAllPaths(pathSchema);\n        };\n        /** Function to handle changes made to a field in the `Form`. This handler receives an entirely new copy of the\n         * `formData` along with a new `ErrorSchema`. It will first update the `formData` with any missing default fields and\n         * then, if `omitExtraData` and `liveOmit` are turned on, the `formData` will be filterer to remove any extra data not\n         * in a form field. Then, the resulting formData will be validated if required. The state will be updated with the new\n         * updated (potentially filtered) `formData`, any errors that resulted from validation. Finally the `onChange`\n         * callback will be called if specified with the updated state.\n         *\n         * @param formData - The new form data from a change to a field\n         * @param newErrorSchema - The new `ErrorSchema` based on the field change\n         * @param id - The id of the field that caused the change\n         */\n        this.onChange = (formData, newErrorSchema, id) => {\n            const { extraErrors, omitExtraData, liveOmit, noValidate, liveValidate, onChange } = this.props;\n            const { schemaUtils, schema, retrievedSchema } = this.state;\n            if (isObject(formData) || Array.isArray(formData)) {\n                const newState = this.getStateFromProps(this.props, formData, retrievedSchema);\n                formData = newState.formData;\n            }\n            const mustValidate = !noValidate && liveValidate;\n            let state = { formData, schema };\n            let newFormData = formData;\n            let _retrievedSchema;\n            if (omitExtraData === true && liveOmit === true) {\n                _retrievedSchema = schemaUtils.retrieveSchema(schema, formData);\n                const pathSchema = schemaUtils.toPathSchema(_retrievedSchema, '', formData);\n                const fieldNames = this.getFieldNames(pathSchema, formData);\n                newFormData = this.getUsedFormData(formData, fieldNames);\n                state = {\n                    formData: newFormData,\n                };\n            }\n            if (mustValidate) {\n                const schemaValidation = this.validate(newFormData, schema, schemaUtils, retrievedSchema);\n                let errors = schemaValidation.errors;\n                let errorSchema = schemaValidation.errorSchema;\n                const schemaValidationErrors = errors;\n                const schemaValidationErrorSchema = errorSchema;\n                if (extraErrors) {\n                    const merged = validationDataMerge(schemaValidation, extraErrors);\n                    errorSchema = merged.errorSchema;\n                    errors = merged.errors;\n                }\n                state = {\n                    formData: newFormData,\n                    errors,\n                    errorSchema,\n                    schemaValidationErrors,\n                    schemaValidationErrorSchema,\n                };\n            }\n            else if (!noValidate && newErrorSchema) {\n                const errorSchema = extraErrors\n                    ? mergeObjects(newErrorSchema, extraErrors, 'preventDuplicates')\n                    : newErrorSchema;\n                state = {\n                    formData: newFormData,\n                    errorSchema: errorSchema,\n                    errors: toErrorList(errorSchema),\n                };\n            }\n            if (_retrievedSchema) {\n                state.retrievedSchema = _retrievedSchema;\n            }\n            this.setState(state, () => onChange && onChange({ ...this.state, ...state }, id));\n        };\n        /**\n         * Callback function to handle reset form data.\n         * - Reset all fields with default values.\n         * - Reset validations and errors\n         *\n         */\n        this.reset = () => {\n            const { onChange } = this.props;\n            const newState = this.getStateFromProps(this.props, undefined);\n            const newFormData = newState.formData;\n            const state = {\n                formData: newFormData,\n                errorSchema: {},\n                errors: [],\n                schemaValidationErrors: [],\n                schemaValidationErrorSchema: {},\n            };\n            this.setState(state, () => onChange && onChange({ ...this.state, ...state }));\n        };\n        /** Callback function to handle when a field on the form is blurred. Calls the `onBlur` callback for the `Form` if it\n         * was provided.\n         *\n         * @param id - The unique `id` of the field that was blurred\n         * @param data - The data associated with the field that was blurred\n         */\n        this.onBlur = (id, data) => {\n            const { onBlur } = this.props;\n            if (onBlur) {\n                onBlur(id, data);\n            }\n        };\n        /** Callback function to handle when a field on the form is focused. Calls the `onFocus` callback for the `Form` if it\n         * was provided.\n         *\n         * @param id - The unique `id` of the field that was focused\n         * @param data - The data associated with the field that was focused\n         */\n        this.onFocus = (id, data) => {\n            const { onFocus } = this.props;\n            if (onFocus) {\n                onFocus(id, data);\n            }\n        };\n        /** Callback function to handle when the form is submitted. First, it prevents the default event behavior. Nothing\n         * happens if the target and currentTarget of the event are not the same. It will omit any extra data in the\n         * `formData` in the state if `omitExtraData` is true. It will validate the resulting `formData`, reporting errors\n         * via the `onError()` callback unless validation is disabled. Finally, it will add in any `extraErrors` and then call\n         * back the `onSubmit` callback if it was provided.\n         *\n         * @param event - The submit HTML form event\n         */\n        this.onSubmit = (event) => {\n            event.preventDefault();\n            if (event.target !== event.currentTarget) {\n                return;\n            }\n            event.persist();\n            const { omitExtraData, extraErrors, noValidate, onSubmit } = this.props;\n            let { formData: newFormData } = this.state;\n            const { schema, schemaUtils } = this.state;\n            if (omitExtraData === true) {\n                const retrievedSchema = schemaUtils.retrieveSchema(schema, newFormData);\n                const pathSchema = schemaUtils.toPathSchema(retrievedSchema, '', newFormData);\n                const fieldNames = this.getFieldNames(pathSchema, newFormData);\n                newFormData = this.getUsedFormData(newFormData, fieldNames);\n            }\n            if (noValidate || this.validateForm()) {\n                // There are no errors generated through schema validation.\n                // Check for user provided errors and update state accordingly.\n                const errorSchema = extraErrors || {};\n                const errors = extraErrors ? toErrorList(extraErrors) : [];\n                this.setState({\n                    formData: newFormData,\n                    errors,\n                    errorSchema,\n                    schemaValidationErrors: [],\n                    schemaValidationErrorSchema: {},\n                }, () => {\n                    if (onSubmit) {\n                        onSubmit({ ...this.state, formData: newFormData, status: 'submitted' }, event);\n                    }\n                });\n            }\n        };\n        /** Provides a function that can be used to programmatically submit the `Form` */\n        this.submit = () => {\n            if (this.formElement.current) {\n                const submitCustomEvent = new CustomEvent('submit', {\n                    cancelable: true,\n                });\n                submitCustomEvent.preventDefault();\n                this.formElement.current.dispatchEvent(submitCustomEvent);\n                this.formElement.current.requestSubmit();\n            }\n        };\n        if (!props.validator) {\n            throw new Error('A validator is required for Form functionality to work');\n        }\n        this.state = this.getStateFromProps(props, props.formData);\n        if (this.props.onChange && !deepEquals(this.state.formData, this.props.formData)) {\n            this.props.onChange(this.state);\n        }\n        this.formElement = createRef();\n    }\n    /**\n     * `getSnapshotBeforeUpdate` is a React lifecycle method that is invoked right before the most recently rendered\n     * output is committed to the DOM. It enables your component to capture current values (e.g., scroll position) before\n     * they are potentially changed.\n     *\n     * In this case, it checks if the props have changed since the last render. If they have, it computes the next state\n     * of the component using `getStateFromProps` method and returns it along with a `shouldUpdate` flag set to `true` IF\n     * the `nextState` and `prevState` are different, otherwise `false`. This ensures that we have the most up-to-date\n     * state ready to be applied in `componentDidUpdate`.\n     *\n     * If `formData` hasn't changed, it simply returns an object with `shouldUpdate` set to `false`, indicating that a\n     * state update is not necessary.\n     *\n     * @param prevProps - The previous set of props before the update.\n     * @param prevState - The previous state before the update.\n     * @returns Either an object containing the next state and a flag indicating that an update should occur, or an object\n     *        with a flag indicating that an update is not necessary.\n     */\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        if (!deepEquals(this.props, prevProps)) {\n            const isSchemaChanged = !deepEquals(prevProps.schema, this.props.schema);\n            const isFormDataChanged = !deepEquals(prevProps.formData, this.props.formData);\n            const nextState = this.getStateFromProps(this.props, this.props.formData, \n            // If the `schema` has changed, we need to update the retrieved schema.\n            // Or if the `formData` changes, for example in the case of a schema with dependencies that need to\n            //  match one of the subSchemas, the retrieved schema must be updated.\n            isSchemaChanged || isFormDataChanged ? undefined : this.state.retrievedSchema, isSchemaChanged);\n            const shouldUpdate = !deepEquals(nextState, prevState);\n            return { nextState, shouldUpdate };\n        }\n        return { shouldUpdate: false };\n    }\n    /**\n     * `componentDidUpdate` is a React lifecycle method that is invoked immediately after updating occurs. This method is\n     * not called for the initial render.\n     *\n     * Here, it checks if an update is necessary based on the `shouldUpdate` flag received from `getSnapshotBeforeUpdate`.\n     * If an update is required, it applies the next state and, if needed, triggers the `onChange` handler to inform about\n     * changes.\n     *\n     * This method effectively replaces the deprecated `UNSAFE_componentWillReceiveProps`, providing a safer alternative\n     * to handle prop changes and state updates.\n     *\n     * @param _ - The previous set of props.\n     * @param prevState - The previous state of the component before the update.\n     * @param snapshot - The value returned from `getSnapshotBeforeUpdate`.\n     */\n    componentDidUpdate(_, prevState, snapshot) {\n        if (snapshot.shouldUpdate) {\n            const { nextState } = snapshot;\n            if (!deepEquals(nextState.formData, this.props.formData) &&\n                !deepEquals(nextState.formData, prevState.formData) &&\n                this.props.onChange) {\n                this.props.onChange(nextState);\n            }\n            this.setState(nextState);\n        }\n    }\n    /** Extracts the updated state from the given `props` and `inputFormData`. As part of this process, the\n     * `inputFormData` is first processed to add any missing required defaults. After that, the data is run through the\n     * validation process IF required by the `props`.\n     *\n     * @param props - The props passed to the `Form`\n     * @param inputFormData - The new or current data for the `Form`\n     * @param retrievedSchema - An expanded schema, if not provided, it will be retrieved from the `schema` and `formData`.\n     * @param isSchemaChanged - A flag indicating whether the schema has changed.\n     * @returns - The new state for the `Form`\n     */\n    getStateFromProps(props, inputFormData, retrievedSchema, isSchemaChanged = false) {\n        const state = this.state || {};\n        const schema = 'schema' in props ? props.schema : this.props.schema;\n        const uiSchema = ('uiSchema' in props ? props.uiSchema : this.props.uiSchema) || {};\n        const edit = typeof inputFormData !== 'undefined';\n        const liveValidate = 'liveValidate' in props ? props.liveValidate : this.props.liveValidate;\n        const mustValidate = edit && !props.noValidate && liveValidate;\n        const rootSchema = schema;\n        const experimental_defaultFormStateBehavior = 'experimental_defaultFormStateBehavior' in props\n            ? props.experimental_defaultFormStateBehavior\n            : this.props.experimental_defaultFormStateBehavior;\n        let schemaUtils = state.schemaUtils;\n        if (!schemaUtils ||\n            schemaUtils.doesSchemaUtilsDiffer(props.validator, rootSchema, experimental_defaultFormStateBehavior)) {\n            schemaUtils = createSchemaUtils(props.validator, rootSchema, experimental_defaultFormStateBehavior);\n        }\n        const formData = schemaUtils.getDefaultFormState(schema, inputFormData);\n        const _retrievedSchema = retrievedSchema !== null && retrievedSchema !== void 0 ? retrievedSchema : schemaUtils.retrieveSchema(schema, formData);\n        const getCurrentErrors = () => {\n            // If the `props.noValidate` option is set or the schema has changed, we reset the error state.\n            if (props.noValidate || isSchemaChanged) {\n                return { errors: [], errorSchema: {} };\n            }\n            else if (!props.liveValidate) {\n                return {\n                    errors: state.schemaValidationErrors || [],\n                    errorSchema: state.schemaValidationErrorSchema || {},\n                };\n            }\n            return {\n                errors: state.errors || [],\n                errorSchema: state.errorSchema || {},\n            };\n        };\n        let errors;\n        let errorSchema;\n        let schemaValidationErrors = state.schemaValidationErrors;\n        let schemaValidationErrorSchema = state.schemaValidationErrorSchema;\n        if (mustValidate) {\n            const schemaValidation = this.validate(formData, schema, schemaUtils, _retrievedSchema);\n            errors = schemaValidation.errors;\n            errorSchema = schemaValidation.errorSchema;\n            schemaValidationErrors = errors;\n            schemaValidationErrorSchema = errorSchema;\n        }\n        else {\n            const currentErrors = getCurrentErrors();\n            errors = currentErrors.errors;\n            errorSchema = currentErrors.errorSchema;\n        }\n        if (props.extraErrors) {\n            const merged = validationDataMerge({ errorSchema, errors }, props.extraErrors);\n            errorSchema = merged.errorSchema;\n            errors = merged.errors;\n        }\n        const idSchema = schemaUtils.toIdSchema(_retrievedSchema, uiSchema['ui:rootFieldId'], formData, props.idPrefix, props.idSeparator);\n        const nextState = {\n            schemaUtils,\n            schema,\n            uiSchema,\n            idSchema,\n            formData,\n            edit,\n            errors,\n            errorSchema,\n            schemaValidationErrors,\n            schemaValidationErrorSchema,\n            retrievedSchema: _retrievedSchema,\n        };\n        return nextState;\n    }\n    /** React lifecycle method that is used to determine whether component should be updated.\n     *\n     * @param nextProps - The next version of the props\n     * @param nextState - The next version of the state\n     * @returns - True if the component should be updated, false otherwise\n     */\n    shouldComponentUpdate(nextProps, nextState) {\n        return shouldRender(this, nextProps, nextState);\n    }\n    /** Validates the `formData` against the `schema` using the `altSchemaUtils` (if provided otherwise it uses the\n     * `schemaUtils` in the state), returning the results.\n     *\n     * @param formData - The new form data to validate\n     * @param schema - The schema used to validate against\n     * @param altSchemaUtils - The alternate schemaUtils to use for validation\n     */\n    validate(formData, schema = this.props.schema, altSchemaUtils, retrievedSchema) {\n        const schemaUtils = altSchemaUtils ? altSchemaUtils : this.state.schemaUtils;\n        const { customValidate, transformErrors, uiSchema } = this.props;\n        const resolvedSchema = retrievedSchema !== null && retrievedSchema !== void 0 ? retrievedSchema : schemaUtils.retrieveSchema(schema, formData);\n        return schemaUtils\n            .getValidator()\n            .validateFormData(formData, resolvedSchema, customValidate, transformErrors, uiSchema);\n    }\n    /** Renders any errors contained in the `state` in using the `ErrorList`, if not disabled by `showErrorList`. */\n    renderErrors(registry) {\n        const { errors, errorSchema, schema, uiSchema } = this.state;\n        const { formContext } = this.props;\n        const options = getUiOptions(uiSchema);\n        const ErrorListTemplate = getTemplate('ErrorListTemplate', registry, options);\n        if (errors && errors.length) {\n            return (_jsx(ErrorListTemplate, { errors: errors, errorSchema: errorSchema || {}, schema: schema, uiSchema: uiSchema, formContext: formContext, registry: registry }));\n        }\n        return null;\n    }\n    /** Returns the registry for the form */\n    getRegistry() {\n        var _a;\n        const { translateString: customTranslateString, uiSchema = {} } = this.props;\n        const { schemaUtils } = this.state;\n        const { fields, templates, widgets, formContext, translateString } = getDefaultRegistry();\n        return {\n            fields: { ...fields, ...this.props.fields },\n            templates: {\n                ...templates,\n                ...this.props.templates,\n                ButtonTemplates: {\n                    ...templates.ButtonTemplates,\n                    ...(_a = this.props.templates) === null || _a === void 0 ? void 0 : _a.ButtonTemplates,\n                },\n            },\n            widgets: { ...widgets, ...this.props.widgets },\n            rootSchema: this.props.schema,\n            formContext: this.props.formContext || formContext,\n            schemaUtils,\n            translateString: customTranslateString || translateString,\n            globalUiOptions: uiSchema[UI_GLOBAL_OPTIONS_KEY],\n        };\n    }\n    /** Attempts to focus on the field associated with the `error`. Uses the `property` field to compute path of the error\n     * field, then, using the `idPrefix` and `idSeparator` converts that path into an id. Then the input element with that\n     * id is attempted to be found using the `formElement` ref. If it is located, then it is focused.\n     *\n     * @param error - The error on which to focus\n     */\n    focusOnError(error) {\n        const { idPrefix = 'root', idSeparator = '_' } = this.props;\n        const { property } = error;\n        const path = _toPath(property);\n        if (path[0] === '') {\n            // Most of the time the `.foo` property results in the first element being empty, so replace it with the idPrefix\n            path[0] = idPrefix;\n        }\n        else {\n            // Otherwise insert the idPrefix into the first location using unshift\n            path.unshift(idPrefix);\n        }\n        const elementId = path.join(idSeparator);\n        let field = this.formElement.current.elements[elementId];\n        if (!field) {\n            // if not an exact match, try finding an input starting with the element id (like radio buttons or checkboxes)\n            field = this.formElement.current.querySelector(`input[id^=${elementId}`);\n        }\n        if (field && field.length) {\n            // If we got a list with length > 0\n            field = field[0];\n        }\n        if (field) {\n            field.focus();\n        }\n    }\n    /** Programmatically validate the form. If `onError` is provided, then it will be called with the list of errors the\n     * same way as would happen on form submission.\n     *\n     * @returns - True if the form is valid, false otherwise.\n     */\n    validateForm() {\n        const { extraErrors, extraErrorsBlockSubmit, focusOnFirstError, onError } = this.props;\n        const { formData, errors: prevErrors } = this.state;\n        const schemaValidation = this.validate(formData);\n        let errors = schemaValidation.errors;\n        let errorSchema = schemaValidation.errorSchema;\n        const schemaValidationErrors = errors;\n        const schemaValidationErrorSchema = errorSchema;\n        const hasError = errors.length > 0 || (extraErrors && extraErrorsBlockSubmit);\n        if (hasError) {\n            if (extraErrors) {\n                const merged = validationDataMerge(schemaValidation, extraErrors);\n                errorSchema = merged.errorSchema;\n                errors = merged.errors;\n            }\n            if (focusOnFirstError) {\n                if (typeof focusOnFirstError === 'function') {\n                    focusOnFirstError(errors[0]);\n                }\n                else {\n                    this.focusOnError(errors[0]);\n                }\n            }\n            this.setState({\n                errors,\n                errorSchema,\n                schemaValidationErrors,\n                schemaValidationErrorSchema,\n            }, () => {\n                if (onError) {\n                    onError(errors);\n                }\n                else {\n                    console.error('Form validation failed', errors);\n                }\n            });\n        }\n        else if (prevErrors.length > 0) {\n            this.setState({\n                errors: [],\n                errorSchema: {},\n                schemaValidationErrors: [],\n                schemaValidationErrorSchema: {},\n            });\n        }\n        return !hasError;\n    }\n    /** Renders the `Form` fields inside the <form> | `tagName` or `_internalFormWrapper`, rendering any errors if\n     * needed along with the submit button or any children of the form.\n     */\n    render() {\n        const { children, id, idPrefix, idSeparator, className = '', tagName, name, method, target, action, autoComplete, enctype, acceptcharset, acceptCharset, noHtml5Validate = false, disabled, readonly, formContext, showErrorList = 'top', _internalFormWrapper, } = this.props;\n        const { schema, uiSchema, formData, errorSchema, idSchema } = this.state;\n        const registry = this.getRegistry();\n        const { SchemaField: _SchemaField } = registry.fields;\n        const { SubmitButton } = registry.templates.ButtonTemplates;\n        // The `semantic-ui` and `material-ui` themes have `_internalFormWrapper`s that take an `as` prop that is the\n        // PropTypes.elementType to use for the inner tag, so we'll need to pass `tagName` along if it is provided.\n        // NOTE, the `as` prop is native to `semantic-ui` and is emulated in the `material-ui` theme\n        const as = _internalFormWrapper ? tagName : undefined;\n        const FormTag = _internalFormWrapper || tagName || 'form';\n        let { [SUBMIT_BTN_OPTIONS_KEY]: submitOptions = {} } = getUiOptions(uiSchema);\n        if (disabled) {\n            submitOptions = { ...submitOptions, props: { ...submitOptions.props, disabled: true } };\n        }\n        const submitUiSchema = { [UI_OPTIONS_KEY]: { [SUBMIT_BTN_OPTIONS_KEY]: submitOptions } };\n        return (_jsxs(FormTag, { className: className ? className : 'rjsf', id: id, name: name, method: method, target: target, action: action, autoComplete: autoComplete, encType: enctype, acceptCharset: acceptCharset || acceptcharset, noValidate: noHtml5Validate, onSubmit: this.onSubmit, as: as, ref: this.formElement, children: [showErrorList === 'top' && this.renderErrors(registry), _jsx(_SchemaField, { name: '', schema: schema, uiSchema: uiSchema, errorSchema: errorSchema, idSchema: idSchema, idPrefix: idPrefix, idSeparator: idSeparator, formContext: formContext, formData: formData, onChange: this.onChange, onBlur: this.onBlur, onFocus: this.onFocus, registry: registry, disabled: disabled, readonly: readonly }), children ? children : _jsx(SubmitButton, { uiSchema: submitUiSchema, registry: registry }), showErrorList === 'bottom' && this.renderErrors(registry)] }));\n    }\n}\n//# sourceMappingURL=Form.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { forwardRef } from 'react';\nimport Form from './components/Form';\n/** A Higher-Order component that creates a wrapper around a `Form` with the overrides from the `WithThemeProps` */\nexport default function withTheme(themeProps) {\n    return forwardRef(({ fields, widgets, templates, ...directProps }, ref) => {\n        var _a;\n        fields = { ...themeProps === null || themeProps === void 0 ? void 0 : themeProps.fields, ...fields };\n        widgets = { ...themeProps === null || themeProps === void 0 ? void 0 : themeProps.widgets, ...widgets };\n        templates = {\n            ...themeProps === null || themeProps === void 0 ? void 0 : themeProps.templates,\n            ...templates,\n            ButtonTemplates: {\n                ...(_a = themeProps === null || themeProps === void 0 ? void 0 : themeProps.templates) === null || _a === void 0 ? void 0 : _a.ButtonTemplates,\n                ...templates === null || templates === void 0 ? void 0 : templates.ButtonTemplates,\n            },\n        };\n        return (_jsx(Form, { ...themeProps, ...directProps, fields: fields, widgets: widgets, templates: templates, ref: ref }));\n    });\n}\n//# sourceMappingURL=withTheme.js.map","import Form from './components/Form';\nimport withTheme from './withTheme';\nimport getDefaultRegistry from './getDefaultRegistry';\nexport { withTheme, getDefaultRegistry };\nexport default Form;\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport { getUiOptions, getTemplate } from '@rjsf/utils';\nimport { ScaffolderField } from '../ScaffolderField/ScaffolderField.esm.js';\n\nconst FieldTemplate = (props) => {\n  const {\n    id,\n    children,\n    classNames,\n    style,\n    disabled,\n    displayLabel,\n    hidden,\n    label,\n    onDropPropertyClick,\n    onKeyChange,\n    readonly,\n    required,\n    rawErrors = [],\n    errors,\n    help,\n    rawDescription,\n    schema,\n    uiSchema,\n    registry\n  } = props;\n  const uiOptions = getUiOptions(uiSchema);\n  const WrapIfAdditionalTemplate = getTemplate(\"WrapIfAdditionalTemplate\", registry, uiOptions);\n  if (hidden) {\n    return /* @__PURE__ */ React.createElement(\"div\", { style: { display: \"none\" } }, children);\n  }\n  return /* @__PURE__ */ React.createElement(\n    WrapIfAdditionalTemplate,\n    {\n      classNames,\n      style,\n      disabled,\n      id,\n      label,\n      onDropPropertyClick,\n      onKeyChange,\n      readonly,\n      required,\n      schema,\n      uiSchema,\n      registry\n    },\n    /* @__PURE__ */ React.createElement(\n      ScaffolderField,\n      {\n        displayLabel,\n        rawErrors,\n        help,\n        disabled,\n        rawDescription,\n        errors,\n        required\n      },\n      children\n    )\n  );\n};\n\nexport { FieldTemplate };\n//# sourceMappingURL=FieldTemplate.esm.js.map\n","import React from 'react';\nimport { MarkdownContent } from '@backstage/core-components';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  markdownDescription: {\n    fontSize: theme.typography.caption.fontSize,\n    margin: 0,\n    color: theme.palette.text.secondary,\n    \"& :first-child\": {\n      margin: 0,\n      marginTop: \"3px\"\n      // to keep the standard browser padding\n    }\n  }\n}));\nconst DescriptionFieldTemplate = (props) => {\n  const { id, description } = props;\n  const classes = useStyles();\n  if (description) {\n    if (typeof description === \"string\") {\n      return /* @__PURE__ */ React.createElement(\n        MarkdownContent,\n        {\n          content: description,\n          className: classes.markdownDescription\n        }\n      );\n    }\n    return /* @__PURE__ */ React.createElement(Typography, { id, variant: \"subtitle2\", style: { marginTop: \"5px\" } }, description);\n  }\n  return null;\n};\n\nexport { DescriptionFieldTemplate };\n//# sourceMappingURL=DescriptionFieldTemplate.esm.js.map\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport AddIcon from '@material-ui/icons/Add';\nimport IconButton from '@material-ui/core/IconButton';\nimport { TranslatableString } from '@rjsf/utils';\n/** The `AddButton` renders a button that represent the `Add` action on a form\n */\nexport default function AddButton({ uiSchema, registry, ...props }) {\n    const { translateString } = registry;\n    return (_jsx(IconButton, { title: translateString(TranslatableString.AddItemButton), ...props, color: 'primary', children: _jsx(AddIcon, {}) }));\n}\n//# sourceMappingURL=AddButton.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\n/** The `ArrayFieldItemTemplate` component is the template used to render an items of an array.\n *\n * @param props - The `ArrayFieldTemplateItemType` props for the component\n */\nexport default function ArrayFieldItemTemplate(props) {\n    const { children, disabled, hasToolbar, hasCopy, hasMoveDown, hasMoveUp, hasRemove, index, onCopyIndexClick, onDropIndexClick, onReorderClick, readonly, uiSchema, registry, } = props;\n    const { CopyButton, MoveDownButton, MoveUpButton, RemoveButton } = registry.templates.ButtonTemplates;\n    const btnStyle = {\n        flex: 1,\n        paddingLeft: 6,\n        paddingRight: 6,\n        fontWeight: 'bold',\n        minWidth: 0,\n    };\n    return (_jsxs(Grid, { container: true, alignItems: 'center', children: [_jsx(Grid, { item: true, xs: true, style: { overflow: 'auto' }, children: _jsx(Box, { mb: 2, children: _jsx(Paper, { elevation: 2, children: _jsx(Box, { p: 2, children: children }) }) }) }), hasToolbar && (_jsxs(Grid, { item: true, children: [(hasMoveUp || hasMoveDown) && (_jsx(MoveUpButton, { style: btnStyle, disabled: disabled || readonly || !hasMoveUp, onClick: onReorderClick(index, index - 1), uiSchema: uiSchema, registry: registry })), (hasMoveUp || hasMoveDown) && (_jsx(MoveDownButton, { style: btnStyle, disabled: disabled || readonly || !hasMoveDown, onClick: onReorderClick(index, index + 1), uiSchema: uiSchema, registry: registry })), hasCopy && (_jsx(CopyButton, { style: btnStyle, disabled: disabled || readonly, onClick: onCopyIndexClick(index), uiSchema: uiSchema, registry: registry })), hasRemove && (_jsx(RemoveButton, { style: btnStyle, disabled: disabled || readonly, onClick: onDropIndexClick(index), uiSchema: uiSchema, registry: registry }))] }))] }));\n}\n//# sourceMappingURL=ArrayFieldItemTemplate.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport { getTemplate, getUiOptions, } from '@rjsf/utils';\n/** The `ArrayFieldTemplate` component is the template used to render all items in an array.\n *\n * @param props - The `ArrayFieldTemplateItemType` props for the component\n */\nexport default function ArrayFieldTemplate(props) {\n    const { canAdd, disabled, idSchema, uiSchema, items, onAddClick, readonly, registry, required, schema, title } = props;\n    const uiOptions = getUiOptions(uiSchema);\n    const ArrayFieldDescriptionTemplate = getTemplate('ArrayFieldDescriptionTemplate', registry, uiOptions);\n    const ArrayFieldItemTemplate = getTemplate('ArrayFieldItemTemplate', registry, uiOptions);\n    const ArrayFieldTitleTemplate = getTemplate('ArrayFieldTitleTemplate', registry, uiOptions);\n    // Button templates are not overridden in the uiSchema\n    const { ButtonTemplates: { AddButton }, } = registry.templates;\n    return (_jsx(Paper, { elevation: 2, children: _jsxs(Box, { p: 2, children: [_jsx(ArrayFieldTitleTemplate, { idSchema: idSchema, title: uiOptions.title || title, schema: schema, uiSchema: uiSchema, required: required, registry: registry }), _jsx(ArrayFieldDescriptionTemplate, { idSchema: idSchema, description: uiOptions.description || schema.description, schema: schema, uiSchema: uiSchema, registry: registry }), items &&\n                    items.map(({ key, ...itemProps }) => (_jsx(ArrayFieldItemTemplate, { ...itemProps }, key))), canAdd && (_jsx(Grid, { container: true, justifyContent: 'flex-end', children: _jsx(Grid, { item: true, children: _jsx(Box, { mt: 2, children: _jsx(AddButton, { className: 'array-item-add', onClick: onAddClick, disabled: disabled || readonly, uiSchema: uiSchema, registry: registry }) }) }) }))] }) }));\n}\n//# sourceMappingURL=ArrayFieldTemplate.js.map","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport TextField from '@material-ui/core/TextField';\nimport { ariaDescribedByIds, examplesId, getInputProps, labelValue, } from '@rjsf/utils';\nconst TYPES_THAT_SHRINK_LABEL = ['date', 'datetime-local', 'file', 'time'];\n/** The `BaseInputTemplate` is the template to use to render the basic `<input>` component for the `core` theme.\n * It is used as the template for rendering many of the <input> based widgets that differ by `type` and callbacks only.\n * It can be customized/overridden for other themes or individual implementations as needed.\n *\n * @param props - The `WidgetProps` for this template\n */\nexport default function BaseInputTemplate(props) {\n    const { id, name, // remove this from textFieldProps\n    placeholder, required, readonly, disabled, type, label, hideLabel, hideError, value, onChange, onChangeOverride, onBlur, onFocus, autofocus, options, schema, uiSchema, rawErrors = [], formContext, registry, InputLabelProps, ...textFieldProps } = props;\n    const inputProps = getInputProps(schema, type, options);\n    // Now we need to pull out the step, min, max into an inner `inputProps` for material-ui\n    const { step, min, max, ...rest } = inputProps;\n    const otherProps = {\n        inputProps: {\n            step,\n            min,\n            max,\n            ...(schema.examples ? { list: examplesId(id) } : undefined),\n        },\n        ...rest,\n    };\n    const _onChange = ({ target: { value } }) => onChange(value === '' ? options.emptyValue : value);\n    const _onBlur = ({ target }) => onBlur(id, target && target.value);\n    const _onFocus = ({ target }) => onFocus(id, target && target.value);\n    const DisplayInputLabelProps = TYPES_THAT_SHRINK_LABEL.includes(type)\n        ? {\n            ...InputLabelProps,\n            shrink: true,\n        }\n        : InputLabelProps;\n    return (_jsxs(_Fragment, { children: [_jsx(TextField, { id: id, name: id, placeholder: placeholder, label: labelValue(label || undefined, hideLabel, false), autoFocus: autofocus, required: required, disabled: disabled || readonly, ...otherProps, value: value || value === 0 ? value : '', error: rawErrors.length > 0, onChange: onChangeOverride || _onChange, onBlur: _onBlur, onFocus: _onFocus, InputLabelProps: DisplayInputLabelProps, ...textFieldProps, \"aria-describedby\": ariaDescribedByIds(id, !!schema.examples) }), Array.isArray(schema.examples) && (_jsx(\"datalist\", { id: examplesId(id), children: schema.examples\n                    .concat(schema.default && !schema.examples.includes(schema.default) ? [schema.default] : [])\n                    .map((example) => {\n                    return _jsx(\"option\", { value: example }, example);\n                }) }))] }));\n}\n//# sourceMappingURL=BaseInputTemplate.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport Typography from '@material-ui/core/Typography';\n/** The `DescriptionField` is the template to use to render the description of a field\n *\n * @param props - The `DescriptionFieldProps` for this component\n */\nexport default function DescriptionField(props) {\n    const { id, description } = props;\n    if (description) {\n        return (_jsx(Typography, { id: id, variant: 'subtitle2', style: { marginTop: '5px' }, children: description }));\n    }\n    return null;\n}\n//# sourceMappingURL=DescriptionField.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport ErrorIcon from '@material-ui/icons/Error';\nimport Box from '@material-ui/core/Box';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { TranslatableString } from '@rjsf/utils';\n/** The `ErrorList` component is the template that renders the all the errors associated with the fields in the `Form`\n *\n * @param props - The `ErrorListProps` for this component\n */\nexport default function ErrorList({ errors, registry, }) {\n    const { translateString } = registry;\n    return (_jsx(Paper, { elevation: 2, children: _jsxs(Box, { mb: 2, p: 2, children: [_jsx(Typography, { variant: 'h6', children: translateString(TranslatableString.ErrorsLabel) }), _jsx(List, { dense: true, children: errors.map((error, i) => {\n                        return (_jsxs(ListItem, { children: [_jsx(ListItemIcon, { children: _jsx(ErrorIcon, { color: 'error' }) }), _jsx(ListItemText, { primary: error.stack })] }, i));\n                    }) })] }) }));\n}\n//# sourceMappingURL=ErrorList.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport { TranslatableString } from '@rjsf/utils';\nexport default function MuiIconButton(props) {\n    const { icon, color, uiSchema, registry, ...otherProps } = props;\n    return (_jsx(IconButton, { ...otherProps, size: 'small', color: color, children: icon }));\n}\nexport function CopyButton(props) {\n    const { registry: { translateString }, } = props;\n    return (_jsx(MuiIconButton, { title: translateString(TranslatableString.CopyButton), ...props, icon: _jsx(CopyIcon, { fontSize: 'small' }) }));\n}\nexport function MoveDownButton(props) {\n    const { registry: { translateString }, } = props;\n    return (_jsx(MuiIconButton, { title: translateString(TranslatableString.MoveDownButton), ...props, icon: _jsx(ArrowDownwardIcon, { fontSize: 'small' }) }));\n}\nexport function MoveUpButton(props) {\n    const { registry: { translateString }, } = props;\n    return (_jsx(MuiIconButton, { title: translateString(TranslatableString.MoveUpButton), ...props, icon: _jsx(ArrowUpwardIcon, { fontSize: 'small' }) }));\n}\nexport function RemoveButton(props) {\n    const { iconType, ...otherProps } = props;\n    const { registry: { translateString }, } = otherProps;\n    return (_jsx(MuiIconButton, { title: translateString(TranslatableString.RemoveButton), ...otherProps, color: 'secondary', icon: _jsx(RemoveIcon, { fontSize: iconType === 'default' ? 'medium' : 'small' }) }));\n}\n//# sourceMappingURL=IconButton.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport ListItem from '@material-ui/core/ListItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport List from '@material-ui/core/List';\nimport { errorId } from '@rjsf/utils';\n/** The `FieldErrorTemplate` component renders the errors local to the particular field\n *\n * @param props - The `FieldErrorProps` for the errors being rendered\n */\nexport default function FieldErrorTemplate(props) {\n    const { errors = [], idSchema } = props;\n    if (errors.length === 0) {\n        return null;\n    }\n    const id = errorId(idSchema);\n    return (_jsx(List, { dense: true, disablePadding: true, children: errors.map((error, i) => {\n            return (_jsx(ListItem, { disableGutters: true, children: _jsx(FormHelperText, { id: id, children: error }) }, i));\n        }) }));\n}\n//# sourceMappingURL=FieldErrorTemplate.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport { helpId } from '@rjsf/utils';\n/** The `FieldHelpTemplate` component renders any help desired for a field\n *\n * @param props - The `FieldHelpProps` to be rendered\n */\nexport default function FieldHelpTemplate(props) {\n    const { idSchema, help } = props;\n    if (!help) {\n        return null;\n    }\n    const id = helpId(idSchema);\n    return _jsx(FormHelperText, { id: id, children: help });\n}\n//# sourceMappingURL=FieldHelpTemplate.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport FormControl from '@material-ui/core/FormControl';\nimport Typography from '@material-ui/core/Typography';\nimport { getTemplate, getUiOptions, } from '@rjsf/utils';\n/** The `FieldTemplate` component is the template used by `SchemaField` to render any field. It renders the field\n * content, (label, description, children, errors and help) inside of a `WrapIfAdditional` component.\n *\n * @param props - The `FieldTemplateProps` for this component\n */\nexport default function FieldTemplate(props) {\n    const { id, children, classNames, style, disabled, displayLabel, hidden, label, onDropPropertyClick, onKeyChange, readonly, required, rawErrors = [], errors, help, description, rawDescription, schema, uiSchema, registry, } = props;\n    const uiOptions = getUiOptions(uiSchema);\n    const WrapIfAdditionalTemplate = getTemplate('WrapIfAdditionalTemplate', registry, uiOptions);\n    if (hidden) {\n        return _jsx(\"div\", { style: { display: 'none' }, children: children });\n    }\n    return (_jsx(WrapIfAdditionalTemplate, { classNames: classNames, style: style, disabled: disabled, id: id, label: label, onDropPropertyClick: onDropPropertyClick, onKeyChange: onKeyChange, readonly: readonly, required: required, schema: schema, uiSchema: uiSchema, registry: registry, children: _jsxs(FormControl, { fullWidth: true, error: rawErrors.length ? true : false, required: required, children: [children, displayLabel && rawDescription ? (_jsx(Typography, { variant: 'caption', color: 'textSecondary', children: description })) : null, errors, help] }) }));\n}\n//# sourceMappingURL=FieldTemplate.js.map","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport Grid from '@material-ui/core/Grid';\nimport { canExpand, descriptionId, getTemplate, getUiOptions, titleId, } from '@rjsf/utils';\n/** The `ObjectFieldTemplate` is the template to use to render all the inner properties of an object along with the\n * title and description if available. If the object is expandable, then an `AddButton` is also rendered after all\n * the properties.\n *\n * @param props - The `ObjectFieldTemplateProps` for this component\n */\nexport default function ObjectFieldTemplate(props) {\n    const { description, title, properties, required, disabled, readonly, uiSchema, idSchema, schema, formData, onAddClick, registry, } = props;\n    const uiOptions = getUiOptions(uiSchema);\n    const TitleFieldTemplate = getTemplate('TitleFieldTemplate', registry, uiOptions);\n    const DescriptionFieldTemplate = getTemplate('DescriptionFieldTemplate', registry, uiOptions);\n    // Button templates are not overridden in the uiSchema\n    const { ButtonTemplates: { AddButton }, } = registry.templates;\n    return (_jsxs(_Fragment, { children: [title && (_jsx(TitleFieldTemplate, { id: titleId(idSchema), title: title, required: required, schema: schema, uiSchema: uiSchema, registry: registry })), description && (_jsx(DescriptionFieldTemplate, { id: descriptionId(idSchema), description: description, schema: schema, uiSchema: uiSchema, registry: registry })), _jsxs(Grid, { container: true, spacing: 2, style: { marginTop: '10px' }, children: [properties.map((element, index) => \n                    // Remove the <Grid> if the inner element is hidden as the <Grid>\n                    // itself would otherwise still take up space.\n                    element.hidden ? (element.content) : (_jsx(Grid, { item: true, xs: 12, style: { marginBottom: '10px' }, children: element.content }, index))), canExpand(schema, uiSchema, formData) && (_jsx(Grid, { container: true, justifyContent: 'flex-end', children: _jsx(Grid, { item: true, children: _jsx(AddButton, { className: 'object-property-expand', onClick: onAddClick(schema), disabled: disabled || readonly, uiSchema: uiSchema, registry: registry }) }) }))] })] }));\n}\n//# sourceMappingURL=ObjectFieldTemplate.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { getSubmitButtonOptions } from '@rjsf/utils';\n/** The `SubmitButton` renders a button that represent the `Submit` action on a form\n */\nexport default function SubmitButton({ uiSchema }) {\n    const { submitText, norender, props: submitButtonProps = {} } = getSubmitButtonOptions(uiSchema);\n    if (norender) {\n        return null;\n    }\n    return (_jsx(Box, { marginTop: 3, children: _jsx(Button, { type: 'submit', variant: 'contained', color: 'primary', ...submitButtonProps, children: submitText }) }));\n}\n//# sourceMappingURL=SubmitButton.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Box from '@material-ui/core/Box';\nimport Divider from '@material-ui/core/Divider';\nimport Typography from '@material-ui/core/Typography';\n/** The `TitleField` is the template to use to render the title of a field\n *\n * @param props - The `TitleFieldProps` for this component\n */\nexport default function TitleField({ id, title, }) {\n    return (_jsxs(Box, { id: id, mb: 1, mt: 1, children: [_jsx(Typography, { variant: 'h5', children: title }), _jsx(Divider, {})] }));\n}\n//# sourceMappingURL=TitleField.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport { ADDITIONAL_PROPERTY_FLAG, TranslatableString, } from '@rjsf/utils';\n/** The `WrapIfAdditional` component is used by the `FieldTemplate` to rename, or remove properties that are\n * part of an `additionalProperties` part of a schema.\n *\n * @param props - The `WrapIfAdditionalProps` for this component\n */\nexport default function WrapIfAdditionalTemplate(props) {\n    const { children, classNames, style, disabled, id, label, onDropPropertyClick, onKeyChange, readonly, required, schema, uiSchema, registry, } = props;\n    const { templates, translateString } = registry;\n    // Button templates are not overridden in the uiSchema\n    const { RemoveButton } = templates.ButtonTemplates;\n    const keyLabel = translateString(TranslatableString.KeyLabel, [label]);\n    const additional = ADDITIONAL_PROPERTY_FLAG in schema;\n    const btnStyle = {\n        flex: 1,\n        paddingLeft: 6,\n        paddingRight: 6,\n        fontWeight: 'bold',\n    };\n    if (!additional) {\n        return (_jsx(\"div\", { className: classNames, style: style, children: children }));\n    }\n    const handleBlur = ({ target }) => onKeyChange(target.value);\n    return (_jsxs(Grid, { container: true, alignItems: 'center', spacing: 2, className: classNames, style: style, children: [_jsx(Grid, { item: true, xs: true, children: _jsx(TextField, { fullWidth: true, required: required, label: keyLabel, defaultValue: label, disabled: disabled || readonly, id: `${id}-key`, name: `${id}-key`, onBlur: !readonly ? handleBlur : undefined, type: 'text' }) }), _jsx(Grid, { item: true, xs: true, children: children }), _jsx(Grid, { item: true, children: _jsx(RemoveButton, { iconType: 'default', style: btnStyle, disabled: disabled || readonly, onClick: onDropPropertyClick(label), uiSchema: uiSchema, registry: registry }) })] }, `${id}-key`));\n}\n//# sourceMappingURL=WrapIfAdditionalTemplate.js.map","import AddButton from '../AddButton';\nimport ArrayFieldItemTemplate from '../ArrayFieldItemTemplate';\nimport ArrayFieldTemplate from '../ArrayFieldTemplate';\nimport BaseInputTemplate from '../BaseInputTemplate';\nimport DescriptionField from '../DescriptionField';\nimport ErrorList from '../ErrorList';\nimport { CopyButton, MoveDownButton, MoveUpButton, RemoveButton } from '../IconButton';\nimport FieldErrorTemplate from '../FieldErrorTemplate';\nimport FieldHelpTemplate from '../FieldHelpTemplate';\nimport FieldTemplate from '../FieldTemplate';\nimport ObjectFieldTemplate from '../ObjectFieldTemplate';\nimport SubmitButton from '../SubmitButton';\nimport TitleField from '../TitleField';\nimport WrapIfAdditionalTemplate from '../WrapIfAdditionalTemplate';\nexport function generateTemplates() {\n    return {\n        ArrayFieldItemTemplate,\n        ArrayFieldTemplate,\n        BaseInputTemplate,\n        ButtonTemplates: {\n            AddButton,\n            CopyButton,\n            MoveDownButton,\n            MoveUpButton,\n            RemoveButton,\n            SubmitButton,\n        },\n        DescriptionFieldTemplate: DescriptionField,\n        ErrorListTemplate: ErrorList,\n        FieldErrorTemplate,\n        FieldHelpTemplate,\n        FieldTemplate,\n        ObjectFieldTemplate,\n        TitleFieldTemplate: TitleField,\n        WrapIfAdditionalTemplate,\n    };\n}\nexport default generateTemplates();\n//# sourceMappingURL=Templates.js.map","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { ariaDescribedByIds, descriptionId, getTemplate, labelValue, schemaRequiresTrueValue, } from '@rjsf/utils';\n/** The `CheckBoxWidget` is a widget for rendering boolean properties.\n *  It is typically used to represent a boolean.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function CheckboxWidget(props) {\n    var _a;\n    const { schema, id, value, disabled, readonly, label = '', hideLabel, autofocus, onChange, onBlur, onFocus, registry, options, uiSchema, } = props;\n    const DescriptionFieldTemplate = getTemplate('DescriptionFieldTemplate', registry, options);\n    // Because an unchecked checkbox will cause html5 validation to fail, only add\n    // the \"required\" attribute if the field value must be \"true\", due to the\n    // \"const\" or \"enum\" keywords\n    const required = schemaRequiresTrueValue(schema);\n    const _onChange = (_, checked) => onChange(checked);\n    const _onBlur = ({ target: { value } }) => onBlur(id, value);\n    const _onFocus = ({ target: { value } }) => onFocus(id, value);\n    const description = (_a = options.description) !== null && _a !== void 0 ? _a : schema.description;\n    return (_jsxs(_Fragment, { children: [!hideLabel && !!description && (_jsx(DescriptionFieldTemplate, { id: descriptionId(id), description: description, schema: schema, uiSchema: uiSchema, registry: registry })), _jsx(FormControlLabel, { control: _jsx(Checkbox, { id: id, name: id, checked: typeof value === 'undefined' ? false : Boolean(value), required: required, disabled: disabled || readonly, autoFocus: autofocus, onChange: _onChange, onBlur: _onBlur, onFocus: _onFocus, \"aria-describedby\": ariaDescribedByIds(id) }), label: labelValue(label, hideLabel, false) })] }));\n}\n//# sourceMappingURL=CheckboxWidget.js.map","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { ariaDescribedByIds, enumOptionsDeselectValue, enumOptionsIsSelected, enumOptionsSelectValue, enumOptionsValueForIndex, labelValue, optionId, } from '@rjsf/utils';\n/** The `CheckboxesWidget` is a widget for rendering checkbox groups.\n *  It is typically used to represent an array of enums.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function CheckboxesWidget({ label, hideLabel, id, disabled, options, value, autofocus, readonly, required, onChange, onBlur, onFocus, }) {\n    const { enumOptions, enumDisabled, inline, emptyValue } = options;\n    const checkboxesValues = Array.isArray(value) ? value : [value];\n    const _onChange = (index) => ({ target: { checked } }) => {\n        if (checked) {\n            onChange(enumOptionsSelectValue(index, checkboxesValues, enumOptions));\n        }\n        else {\n            onChange(enumOptionsDeselectValue(index, checkboxesValues, enumOptions));\n        }\n    };\n    const _onBlur = ({ target: { value } }) => onBlur(id, enumOptionsValueForIndex(value, enumOptions, emptyValue));\n    const _onFocus = ({ target: { value } }) => onFocus(id, enumOptionsValueForIndex(value, enumOptions, emptyValue));\n    return (_jsxs(_Fragment, { children: [labelValue(_jsx(FormLabel, { required: required, htmlFor: id, children: label || undefined }), hideLabel), _jsx(FormGroup, { id: id, row: !!inline, children: Array.isArray(enumOptions) &&\n                    enumOptions.map((option, index) => {\n                        const checked = enumOptionsIsSelected(option.value, checkboxesValues);\n                        const itemDisabled = Array.isArray(enumDisabled) && enumDisabled.indexOf(option.value) !== -1;\n                        const checkbox = (_jsx(Checkbox, { id: optionId(id, index), name: id, checked: checked, disabled: disabled || itemDisabled || readonly, autoFocus: autofocus && index === 0, onChange: _onChange(index), onBlur: _onBlur, onFocus: _onFocus, \"aria-describedby\": ariaDescribedByIds(id) }));\n                        return _jsx(FormControlLabel, { control: checkbox, label: option.label }, index);\n                    }) })] }));\n}\n//# sourceMappingURL=CheckboxesWidget.js.map","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport { ariaDescribedByIds, enumOptionsIndexForValue, enumOptionsValueForIndex, labelValue, optionId, } from '@rjsf/utils';\n/** The `RadioWidget` is a widget for rendering a radio group.\n *  It is typically used with a string property constrained with enum options.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function RadioWidget({ id, options, value, required, disabled, readonly, label, hideLabel, onChange, onBlur, onFocus, }) {\n    var _a;\n    const { enumOptions, enumDisabled, emptyValue } = options;\n    const _onChange = (_, value) => onChange(enumOptionsValueForIndex(value, enumOptions, emptyValue));\n    const _onBlur = ({ target: { value } }) => onBlur(id, enumOptionsValueForIndex(value, enumOptions, emptyValue));\n    const _onFocus = ({ target: { value } }) => onFocus(id, enumOptionsValueForIndex(value, enumOptions, emptyValue));\n    const row = options ? options.inline : false;\n    const selectedIndex = (_a = enumOptionsIndexForValue(value, enumOptions)) !== null && _a !== void 0 ? _a : null;\n    return (_jsxs(_Fragment, { children: [labelValue(_jsx(FormLabel, { required: required, htmlFor: id, children: label || undefined }), hideLabel), _jsx(RadioGroup, { id: id, name: id, value: selectedIndex, row: row, onChange: _onChange, onBlur: _onBlur, onFocus: _onFocus, \"aria-describedby\": ariaDescribedByIds(id), children: Array.isArray(enumOptions) &&\n                    enumOptions.map((option, index) => {\n                        const itemDisabled = Array.isArray(enumDisabled) && enumDisabled.indexOf(option.value) !== -1;\n                        const radio = (_jsx(FormControlLabel, { control: _jsx(Radio, { name: id, id: optionId(id, index), color: 'primary' }), label: option.label, value: String(index), disabled: disabled || itemDisabled || readonly }, index));\n                        return radio;\n                    }) })] }));\n}\n//# sourceMappingURL=RadioWidget.js.map","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Slider from '@material-ui/core/Slider';\nimport { ariaDescribedByIds, labelValue, rangeSpec, } from '@rjsf/utils';\n/** The `RangeWidget` component uses the `BaseInputTemplate` changing the type to `range` and wrapping the result\n * in a div, with the value along side it.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function RangeWidget(props) {\n    const { value, readonly, disabled, onBlur, onFocus, options, schema, onChange, required, label, hideLabel, id } = props;\n    const sliderProps = { value, label, id, name: id, ...rangeSpec(schema) };\n    const _onChange = (_, value) => {\n        onChange(value !== null && value !== void 0 ? value : options.emptyValue);\n    };\n    const _onBlur = ({ target: { value } }) => onBlur(id, value);\n    const _onFocus = ({ target: { value } }) => onFocus(id, value);\n    return (_jsxs(_Fragment, { children: [labelValue(_jsx(FormLabel, { required: required, htmlFor: id, children: label || undefined }), hideLabel), _jsx(Slider, { disabled: disabled || readonly, onChange: _onChange, onBlur: _onBlur, onFocus: _onFocus, valueLabelDisplay: 'auto', ...sliderProps, \"aria-describedby\": ariaDescribedByIds(id) })] }));\n}\n//# sourceMappingURL=RangeWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport { ariaDescribedByIds, enumOptionsIndexForValue, enumOptionsValueForIndex, labelValue, } from '@rjsf/utils';\n/** The `SelectWidget` is a widget for rendering dropdowns.\n *  It is typically used with string properties constrained with enum options.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function SelectWidget({ schema, id, name, // remove this from textFieldProps\noptions, label, hideLabel, required, disabled, readonly, placeholder, value, multiple, autofocus, onChange, onBlur, onFocus, rawErrors = [], registry, uiSchema, hideError, formContext, ...textFieldProps }) {\n    const { enumOptions, enumDisabled, emptyValue: optEmptyVal } = options;\n    multiple = typeof multiple === 'undefined' ? false : !!multiple;\n    const emptyValue = multiple ? [] : '';\n    const isEmpty = typeof value === 'undefined' || (multiple && value.length < 1) || (!multiple && value === emptyValue);\n    const _onChange = ({ target: { value } }) => onChange(enumOptionsValueForIndex(value, enumOptions, optEmptyVal));\n    const _onBlur = ({ target }) => onBlur(id, enumOptionsValueForIndex(target && target.value, enumOptions, optEmptyVal));\n    const _onFocus = ({ target }) => onFocus(id, enumOptionsValueForIndex(target && target.value, enumOptions, optEmptyVal));\n    const selectedIndexes = enumOptionsIndexForValue(value, enumOptions, multiple);\n    return (_jsx(TextField, { id: id, name: id, label: labelValue(label, hideLabel || !label, false), value: !isEmpty && typeof selectedIndexes !== 'undefined' ? selectedIndexes : emptyValue, required: required, disabled: disabled || readonly, autoFocus: autofocus, placeholder: placeholder, error: rawErrors.length > 0, onChange: _onChange, onBlur: _onBlur, onFocus: _onFocus, ...textFieldProps, select // Apply this and the following props after the potential overrides defined in textFieldProps\n        : true, InputLabelProps: {\n            ...textFieldProps.InputLabelProps,\n            shrink: !isEmpty,\n        }, SelectProps: {\n            ...textFieldProps.SelectProps,\n            multiple,\n        }, \"aria-describedby\": ariaDescribedByIds(id), children: Array.isArray(enumOptions) &&\n            enumOptions.map(({ value, label }, i) => {\n                const disabled = Array.isArray(enumDisabled) && enumDisabled.indexOf(value) !== -1;\n                return (_jsx(MenuItem, { value: String(i), disabled: disabled, children: label }, i));\n            }) }));\n}\n//# sourceMappingURL=SelectWidget.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getTemplate } from '@rjsf/utils';\n/** The `TextareaWidget` is a widget for rendering input fields as textarea.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function TextareaWidget(props) {\n    const { options, registry } = props;\n    const BaseInputTemplate = getTemplate('BaseInputTemplate', registry, options);\n    let rows = 5;\n    if (typeof options.rows === 'string' || typeof options.rows === 'number') {\n        rows = options.rows;\n    }\n    return _jsx(BaseInputTemplate, { ...props, multiline: true, rows: rows });\n}\n//# sourceMappingURL=TextareaWidget.js.map","import CheckboxWidget from '../CheckboxWidget/CheckboxWidget';\nimport CheckboxesWidget from '../CheckboxesWidget/CheckboxesWidget';\nimport RadioWidget from '../RadioWidget/RadioWidget';\nimport RangeWidget from '../RangeWidget/RangeWidget';\nimport SelectWidget from '../SelectWidget/SelectWidget';\nimport TextareaWidget from '../TextareaWidget/TextareaWidget';\nexport function generateWidgets() {\n    return {\n        CheckboxWidget,\n        CheckboxesWidget,\n        RadioWidget,\n        RangeWidget,\n        SelectWidget,\n        TextareaWidget,\n    };\n}\nexport default generateWidgets();\n//# sourceMappingURL=Widgets.js.map","import { generateTemplates } from '../Templates';\nimport { generateWidgets } from '../Widgets';\nexport function generateTheme() {\n    return {\n        templates: generateTemplates(),\n        widgets: generateWidgets(),\n    };\n}\nexport default generateTheme();\n//# sourceMappingURL=Theme.js.map","import { withTheme } from '@rjsf/core';\nimport { generateTheme } from '../Theme';\nexport function generateForm() {\n    return withTheme(generateTheme());\n}\nexport default generateForm();\n//# sourceMappingURL=MuiForm.js.map","import MuiForm from './MuiForm/MuiForm';\nexport { default as Form, generateForm } from './MuiForm';\nexport { default as Templates, generateTemplates } from './Templates';\nexport { default as Theme, generateTheme } from './Theme';\nexport { default as Widgets, generateWidgets } from './Widgets';\nexport default MuiForm;\n//# sourceMappingURL=index.js.map","import { withTheme } from '@rjsf/core';\nimport React from 'react';\nimport { FieldTemplate } from './FieldTemplate.esm.js';\nimport { DescriptionFieldTemplate } from './DescriptionFieldTemplate.esm.js';\nimport { Theme } from '@rjsf/material-ui';\n\nconst WrappedForm = withTheme(Theme);\nconst Form = (props) => {\n  const wrappedFields = React.useMemo(\n    () => Object.fromEntries(\n      Object.entries(props.fields ?? {}).map(([key, Component]) => [\n        key,\n        (wrapperProps) => {\n          return /* @__PURE__ */ React.createElement(\n            Component,\n            {\n              ...wrapperProps,\n              uiSchema: wrapperProps.uiSchema ?? {},\n              formData: wrapperProps.formData,\n              rawErrors: wrapperProps.rawErrors ?? [],\n              disabled: wrapperProps.disabled ?? false,\n              readonly: wrapperProps.readonly ?? false\n            }\n          );\n        }\n      ])\n    ),\n    [props.fields]\n  );\n  const templates = React.useMemo(\n    () => ({\n      FieldTemplate,\n      DescriptionFieldTemplate,\n      ...props.templates\n    }),\n    [props.templates]\n  );\n  return /* @__PURE__ */ React.createElement(WrappedForm, { ...props, templates, fields: wrappedFields });\n};\n\nexport { Form };\n//# sourceMappingURL=Form.esm.js.map\n","import React from 'react';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport startCase from 'lodash/startCase';\n\nconst useStyles = makeStyles(\n  (_theme) => createStyles({\n    list: {\n      width: \"100%\"\n    },\n    text: {\n      textWrap: \"wrap\"\n    }\n  })\n);\nconst ErrorListTemplate = ({ errors, schema }) => {\n  const classes = useStyles();\n  function formatErrorMessage(error) {\n    if (error.property && error.message) {\n      const propertyName = error.property.startsWith(\".\") ? error.property.substring(1) : error.property;\n      if (schema.properties && propertyName in schema.properties) {\n        const property = schema.properties[propertyName];\n        if (typeof property === \"object\" && \"title\" in property) {\n          return `'${property.title}' ${error.message}`;\n        }\n      }\n      return `'${startCase(propertyName)}' ${error.message}`;\n    }\n    return error.stack;\n  }\n  return /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(List, { dense: true, className: classes.list }, errors.map((error, index) => /* @__PURE__ */ React.createElement(ListItem, { key: index }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(ErrorIcon, { color: \"error\" })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { primary: classes.text },\n      primary: formatErrorMessage(error)\n    }\n  )))));\n};\n\nexport { ErrorListTemplate };\n//# sourceMappingURL=errorListTemplate.esm.js.map\n","import InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport React from 'react';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport { MarkdownContent } from '@backstage/core-components';\n\nconst PasswordWidget = (props) => {\n  const {\n    value,\n    onChange,\n    schema: { title }\n  } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: title }, title), /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      id: title,\n      \"aria-describedby\": title,\n      onChange: (e) => {\n        onChange(e.target.value);\n      },\n      value,\n      autoComplete: \"off\"\n    }\n  ), /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, /* @__PURE__ */ React.createElement(\n    MarkdownContent,\n    {\n      content: \"This widget is insecure. Please use [`ui:field: Secret`](https://backstage.io/docs/features/software-templates/writing-templates/#using-secrets) instead of\\n          `ui:widget: password`\"\n    }\n  )));\n};\n\nexport { PasswordWidget };\n//# sourceMappingURL=PasswordWidget.esm.js.map\n","import { useAnalytics, useApiHolder } from '@backstage/core-plugin-api';\nimport MuiStepper from '@material-ui/core/Stepper';\nimport MuiStep from '@material-ui/core/Step';\nimport MuiStepLabel from '@material-ui/core/StepLabel';\nimport Button from '@material-ui/core/Button';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport React, { useState, useMemo, useCallback } from 'react';\nimport { createAsyncValidators } from './createAsyncValidators.esm.js';\nimport { ReviewState } from '../ReviewState/ReviewState.esm.js';\nimport { useFormDataFromQuery } from '../../hooks/useFormDataFromQuery.esm.js';\nimport { useTemplateSchema } from '../../hooks/useTemplateSchema.esm.js';\nimport 'react-use/esm/useAsync';\nimport '../../../api/ref.esm.js';\nimport 'lodash/cloneDeep';\nimport validator from '@rjsf/validator-ajv8';\nimport { useTransformSchemaToProps } from '../../hooks/useTransformSchemaToProps.esm.js';\nimport { hasErrors } from './utils.esm.js';\nimport * as index from './FieldOverrides/index.esm.js';\nimport { Form } from '../Form/Form.esm.js';\nimport { ErrorListTemplate } from './ErrorListTemplate/errorListTemplate.esm.js';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { PasswordWidget } from '../PasswordWidget/PasswordWidget.esm.js';\n\nconst useStyles = makeStyles((theme) => ({\n  backButton: {\n    marginRight: theme.spacing(1)\n  },\n  footer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"right\",\n    marginTop: theme.spacing(2)\n  },\n  formWrapper: {\n    padding: theme.spacing(2)\n  }\n}));\nconst Stepper = (stepperProps) => {\n  const { layouts = [], components = {}, ...props } = stepperProps;\n  const {\n    ReviewStateComponent = ReviewState,\n    ReviewStepComponent,\n    backButtonText = \"Back\",\n    createButtonText = \"Create\",\n    reviewButtonText = \"Review\"\n  } = components;\n  const analytics = useAnalytics();\n  const { presentation, steps } = useTemplateSchema(props.manifest);\n  const apiHolder = useApiHolder();\n  const [activeStep, setActiveStep] = useState(0);\n  const [isValidating, setIsValidating] = useState(false);\n  const [formState, setFormState] = useFormDataFromQuery(props.initialState);\n  const [errors, setErrors] = useState();\n  const styles = useStyles();\n  const backLabel = presentation?.buttonLabels?.backButtonText ?? backButtonText;\n  const createLabel = presentation?.buttonLabels?.createButtonText ?? createButtonText;\n  const reviewLabel = presentation?.buttonLabels?.reviewButtonText ?? reviewButtonText;\n  const extensions = useMemo(() => {\n    return Object.fromEntries(\n      props.extensions.map(({ name, component }) => [name, component])\n    );\n  }, [props.extensions]);\n  const fields = useMemo(\n    () => ({ ...index, ...extensions }),\n    [extensions]\n  );\n  const validators = useMemo(() => {\n    return Object.fromEntries(\n      props.extensions.map(({ name, validation: validation2 }) => [name, validation2])\n    );\n  }, [props.extensions]);\n  const validation = useMemo(() => {\n    return createAsyncValidators(steps[activeStep]?.mergedSchema, validators, {\n      apiHolder\n    });\n  }, [steps, activeStep, validators, apiHolder]);\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n  const handleChange = useCallback(\n    (e) => setFormState((current) => ({ ...current, ...e.formData })),\n    [setFormState]\n  );\n  const handleCreate = useCallback(() => {\n    props.onCreate(formState);\n    analytics.captureEvent(\"click\", `${createLabel}`);\n  }, [props, formState, analytics, createLabel]);\n  const currentStep = useTransformSchemaToProps(steps[activeStep], { layouts });\n  const handleNext = async ({\n    formData = {}\n  }) => {\n    setErrors(void 0);\n    setIsValidating(true);\n    const returnedValidation = await validation(formData);\n    setIsValidating(false);\n    if (hasErrors(returnedValidation)) {\n      setErrors(returnedValidation);\n    } else {\n      setErrors(void 0);\n      setActiveStep((prevActiveStep) => {\n        const stepNum = prevActiveStep + 1;\n        analytics.captureEvent(\"click\", `Next Step (${stepNum})`);\n        return stepNum;\n      });\n    }\n    setFormState((current) => ({ ...current, ...formData }));\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, isValidating && /* @__PURE__ */ React.createElement(LinearProgress, { variant: \"indeterminate\" }), /* @__PURE__ */ React.createElement(\n    MuiStepper,\n    {\n      activeStep,\n      alternativeLabel: true,\n      variant: \"elevation\",\n      style: { overflowX: \"auto\" }\n    },\n    steps.map((step, index) => {\n      const isAllowedLabelClick = activeStep > index;\n      return /* @__PURE__ */ React.createElement(MuiStep, { key: index }, /* @__PURE__ */ React.createElement(\n        MuiStepLabel,\n        {\n          \"aria-label\": `Step ${index + 1}`,\n          style: { cursor: isAllowedLabelClick ? \"pointer\" : \"default\" },\n          onClick: () => {\n            if (isAllowedLabelClick) setActiveStep(index);\n          }\n        },\n        step.title\n      ));\n    }),\n    /* @__PURE__ */ React.createElement(MuiStep, null, /* @__PURE__ */ React.createElement(MuiStepLabel, null, reviewLabel))\n  ), /* @__PURE__ */ React.createElement(\"div\", { className: styles.formWrapper }, activeStep < steps.length ? /* @__PURE__ */ React.createElement(\n    Form,\n    {\n      validator,\n      extraErrors: errors,\n      formData: formState,\n      formContext: { formData: formState },\n      schema: currentStep.schema,\n      uiSchema: currentStep.uiSchema,\n      onSubmit: handleNext,\n      fields,\n      showErrorList: \"top\",\n      templates: { ErrorListTemplate },\n      onChange: handleChange,\n      widgets: { password: PasswordWidget },\n      experimental_defaultFormStateBehavior: {\n        allOf: \"populateDefaults\"\n      },\n      ...props.formProps ?? {}\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: styles.footer }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        onClick: handleBack,\n        className: styles.backButton,\n        disabled: activeStep < 1 || isValidating\n      },\n      backLabel\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        type: \"submit\",\n        disabled: isValidating\n      },\n      activeStep === steps.length - 1 ? reviewLabel : \"Next\"\n    ))\n  ) : (\n    // TODO: potentially move away from this pattern, deprecate?\n    ReviewStepComponent ? /* @__PURE__ */ React.createElement(\n      ReviewStepComponent,\n      {\n        disableButtons: isValidating,\n        formData: formState,\n        handleBack,\n        handleReset: () => {\n        },\n        steps,\n        handleCreate\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ReviewStateComponent, { formState, schemas: steps }), /* @__PURE__ */ React.createElement(\"div\", { className: styles.footer }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        onClick: handleBack,\n        className: styles.backButton,\n        disabled: activeStep < 1\n      },\n      backLabel\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: handleCreate\n      },\n      createLabel\n    )))\n  )));\n};\n\nexport { Stepper };\n//# sourceMappingURL=Stepper.esm.js.map\n","import cloneDeep from 'lodash/cloneDeep';\nimport { useApi, featureFlagsApiRef } from '@backstage/core-plugin-api';\n\nconst useFilteredSchemaProperties = (manifest) => {\n  const featureFlagKey = \"backstage:featureFlag\";\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  if (!manifest) {\n    return void 0;\n  }\n  const filteredSteps = manifest?.steps.filter((step) => {\n    const featureFlag = step.schema[featureFlagKey];\n    return typeof featureFlag !== \"string\" || featureFlagApi.isActive(featureFlag);\n  }).map((step) => {\n    const filteredStep = cloneDeep(step);\n    const removedPropertyKeys = [];\n    if (filteredStep.schema.properties) {\n      filteredStep.schema.properties = Object.fromEntries(\n        Object.entries(filteredStep.schema.properties).filter(\n          ([key, value]) => {\n            if (value[featureFlagKey]) {\n              if (featureFlagApi.isActive(value[featureFlagKey])) {\n                return true;\n              }\n              removedPropertyKeys.push(key);\n              return false;\n            }\n            return true;\n          }\n        )\n      );\n      filteredStep.schema.required = Array.isArray(\n        filteredStep.schema.required\n      ) ? filteredStep.schema.required?.filter(\n        (r) => !removedPropertyKeys.includes(r)\n      ) : filteredStep.schema.required;\n    }\n    return filteredStep;\n  });\n  return { ...manifest, steps: filteredSteps };\n};\n\nexport { useFilteredSchemaProperties };\n//# sourceMappingURL=useFilteredSchemaProperties.esm.js.map\n","import { useApi } from '@backstage/core-plugin-api';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { Duration } from 'luxon';\nimport useAsync from 'react-use/lib/useAsync';\n\nconst useTemplateTimeSavedMinutes = (templateRef) => {\n  const catalogApi = useApi(catalogApiRef);\n  const { value: timeSavedMinutes } = useAsync(async () => {\n    const entity = await catalogApi.getEntityByRef(templateRef);\n    const timeSaved = entity?.metadata.annotations?.[\"backstage.io/time-saved\"];\n    if (!entity || !timeSaved) {\n      return void 0;\n    }\n    const durationMs = Duration.fromISO(timeSaved).as(\"minutes\");\n    if (Number.isNaN(durationMs)) {\n      return void 0;\n    }\n    return durationMs;\n  }, [catalogApi, templateRef]);\n  return timeSavedMinutes;\n};\n\nexport { useTemplateTimeSavedMinutes };\n//# sourceMappingURL=useTemplateTimeSaved.esm.js.map\n","import React, { useCallback, useEffect } from 'react';\nimport { Content, Progress, InfoCard, MarkdownContent } from '@backstage/core-components';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useAnalytics, useApi, errorApiRef } from '@backstage/core-plugin-api';\nimport { useTemplateParameterSchema } from '../../hooks/useTemplateParameterSchema.esm.js';\nimport { Stepper } from '../Stepper/Stepper.esm.js';\nimport { SecretsContextProvider } from '../../../secrets/SecretsContext.esm.js';\nimport { useFilteredSchemaProperties } from '../../hooks/useFilteredSchemaProperties.esm.js';\nimport { useTemplateTimeSavedMinutes } from '../../hooks/useTemplateTimeSaved.esm.js';\n\nconst useStyles = makeStyles({\n  markdown: {\n    /** to make the styles for React Markdown not leak into the description */\n    \"& :first-child\": {\n      marginTop: 0\n    },\n    \"& :last-child\": {\n      marginBottom: 0\n    }\n  }\n});\nconst Workflow = (workflowProps) => {\n  const { title, description, namespace, templateName, onCreate, ...props } = workflowProps;\n  const analytics = useAnalytics();\n  const styles = useStyles();\n  const templateRef = stringifyEntityRef({\n    kind: \"Template\",\n    namespace,\n    name: templateName\n  });\n  const errorApi = useApi(errorApiRef);\n  const { loading, manifest, error } = useTemplateParameterSchema(templateRef);\n  const sortedManifest = useFilteredSchemaProperties(manifest);\n  const minutesSaved = useTemplateTimeSavedMinutes(templateRef);\n  const workflowOnCreate = useCallback(\n    async (formState) => {\n      onCreate(formState);\n      const name = typeof formState.name === \"string\" ? formState.name : void 0;\n      analytics.captureEvent(\"create\", name ?? templateName ?? \"unknown\", {\n        value: minutesSaved\n      });\n    },\n    [onCreate, analytics, templateName, minutesSaved]\n  );\n  useEffect(() => {\n    if (error) {\n      errorApi.post(new Error(`Failed to load template, ${error}`));\n    }\n  }, [error, errorApi]);\n  if (error) {\n    return props.onError(error);\n  }\n  return /* @__PURE__ */ React.createElement(Content, null, loading && /* @__PURE__ */ React.createElement(Progress, null), sortedManifest && /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: title ?? sortedManifest.title,\n      subheader: /* @__PURE__ */ React.createElement(\n        MarkdownContent,\n        {\n          className: styles.markdown,\n          content: description ?? sortedManifest.description ?? \"No description\"\n        }\n      ),\n      noPadding: true,\n      titleTypographyProps: { component: \"h2\" }\n    },\n    /* @__PURE__ */ React.createElement(\n      Stepper,\n      {\n        manifest: sortedManifest,\n        onCreate: workflowOnCreate,\n        ...props\n      }\n    )\n  ));\n};\nconst EmbeddableWorkflow = (props) => /* @__PURE__ */ React.createElement(SecretsContextProvider, null, /* @__PURE__ */ React.createElement(Workflow, { ...props }));\n\nexport { EmbeddableWorkflow, Workflow };\n//# sourceMappingURL=Workflow.esm.js.map\n","import IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Popover from '@material-ui/core/Popover';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Edit from '@material-ui/icons/Edit';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport React, { useState } from 'react';\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    color: theme.page.fontColor\n  }\n}));\nfunction TemplateWizardPageContextMenu(props) {\n  const { editUrl } = props;\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState();\n  if (!editUrl) {\n    return null;\n  }\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const onClose = () => {\n    setAnchorEl(void 0);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      id: \"long-menu\",\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-expanded\": !!anchorEl,\n      \"aria-haspopup\": \"true\",\n      role: \"button\",\n      onClick: onOpen,\n      \"data-testid\": \"menu-button\",\n      color: \"inherit\",\n      className: classes.button\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      \"aria-labelledby\": \"long-menu\",\n      open: Boolean(anchorEl),\n      onClose,\n      anchorEl,\n      anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n      transformOrigin: { vertical: \"top\", horizontal: \"right\" }\n    },\n    /* @__PURE__ */ React.createElement(MenuList, null, /* @__PURE__ */ React.createElement(MenuItem, { onClick: () => window.open(editUrl, \"_blank\") }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Edit, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Edit Configuration\" })))\n  ));\n}\n\nexport { TemplateWizardPageContextMenu };\n//# sourceMappingURL=TemplateWizardPageContextMenu.esm.js.map\n","import React from 'react';\nimport { useNavigate, Navigate } from 'react-router-dom';\nimport useAsync from 'react-use/esm/useAsync';\nimport { stringifyEntityRef, ANNOTATION_EDIT_URL } from '@backstage/catalog-model';\nimport { useRouteRef, useApi, useRouteRefParams, AnalyticsContext } from '@backstage/core-plugin-api';\nimport { useTemplateSecrets, scaffolderApiRef } from '@backstage/plugin-scaffolder-react';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { Workflow } from '@backstage/plugin-scaffolder-react/alpha';\nimport { Page, Header } from '@backstage/core-components';\nimport { rootRouteRef, scaffolderTaskRouteRef, selectedTemplateRouteRef } from '../../routes.esm.js';\nimport { TemplateWizardPageContextMenu } from './TemplateWizardPageContextMenu.esm.js';\n\nconst TemplateWizardPage = (props) => {\n  const rootRef = useRouteRef(rootRouteRef);\n  const taskRoute = useRouteRef(scaffolderTaskRouteRef);\n  const { secrets } = useTemplateSecrets();\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const navigate = useNavigate();\n  const { templateName, namespace } = useRouteRefParams(\n    selectedTemplateRouteRef\n  );\n  const templateRef = stringifyEntityRef({\n    kind: \"Template\",\n    namespace,\n    name: templateName\n  });\n  const { value: editUrl } = useAsync(async () => {\n    const data = await catalogApi.getEntityByRef(templateRef);\n    return data?.metadata.annotations?.[ANNOTATION_EDIT_URL];\n  }, [templateRef, catalogApi]);\n  const onCreate = async (values) => {\n    const { taskId } = await scaffolderApi.scaffold({\n      templateRef,\n      values,\n      secrets\n    });\n    navigate(taskRoute({ taskId }));\n  };\n  const onError = () => /* @__PURE__ */ React.createElement(Navigate, { to: rootRef() });\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, { attributes: { entityRef: templateRef } }, /* @__PURE__ */ React.createElement(Page, { themeId: \"website\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      pageTitleOverride: \"Create a new component\",\n      title: \"Create a new component\",\n      subtitle: \"Create new software components using standard templates in your organization\",\n      ...props.headerOptions\n    },\n    /* @__PURE__ */ React.createElement(TemplateWizardPageContextMenu, { editUrl })\n  ), /* @__PURE__ */ React.createElement(\n    Workflow,\n    {\n      namespace,\n      templateName,\n      onCreate,\n      components: props.components,\n      onError,\n      extensions: props.customFieldExtensions,\n      formProps: props.formProps,\n      layouts: props.layouts\n    }\n  )));\n};\n\nexport { TemplateWizardPage };\n//# sourceMappingURL=TemplateWizardPage.esm.js.map\n","function n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){var r;return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!(null===(r=n.constructor)||void 0===r?void 0:r[L])||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?n.add(t):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)||(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0)),n}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function g(n){O(n),n.p.forEach(S),n.p=null}function O(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.g=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.O||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(g(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),g(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o,u=o,a=!1;3===e.i&&(u=new Set(o),o.clear(),a=!0),i(u,(function(r,i){return A(n,e,o,r,i,t,a)})),x(n,o,!1),t&&n.u&&b(\"Patches\").N(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s,v){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),r(c)){var p=M(e,c,s&&i&&3!==i.i&&!u(i.R,a)?s.concat(a):void 0);if(f(o,a,p),!r(p))return;e.m=!1}else v&&o.add(c);if(t(c)&&!y(c)){if(!e.h.D&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),!n.l&&n.h.D&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function N(n,r,t){var e=s(r)?b(\"MapSet\").F(r,t):v(r)?b(\"MapSet\").T(r,t):n.O?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,R:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function R(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=D(r,c),u.I=!1}else e=D(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function D(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function F(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return\"production\"!==process.env.NODE_ENV&&f(r),en.get(r,n)},set:function(r){var t=this[Q];\"production\"!==process.env.NODE_ENV&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.g&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,R:{},l:r,t:n,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.R,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=i[s];\"string\"!=typeof p&&\"number\"!=typeof p&&(p=\"\"+p),0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},N:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.R,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.R,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.R=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=N(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.g&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,R:void 0,t:n,k:this,C:!1,g:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.R.set(n,!0),t.o.set(n,r),t.R.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.R.set(n,!1):r.R.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.R=new Map,i(n.t,(function(r){n.R.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=N(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,g:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{F:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){F(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=N(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.R[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&(void 0!==t||r in n.o)||Number.isNaN(t)&&Number.isNaN(n.o[r])||(n.o[r]=t,n.R[r]=!0),!0},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.R[r]=!1,E(n),k(n)):delete n.R[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.O=B,this.D=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=N(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?g(c):O(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw g(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.D&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=R(e));var i=w(this),o=N(this,e,void 0);return o[Q].C=!0,O(i),o},i.finishDraft=function(r,t){var e=r&&r[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.D=n},i.setUseProxies=function(r){r&&!B&&n(20),this.O=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,R as current,J as enableAllPlugins,F as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,r as isDraft,t as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","import{freeze as n,produce as r}from\"immer\";import{useState as t,useCallback as o,useMemo as f,useReducer as u}from\"react\";function i(f){var u=t(function(){return n(\"function\"==typeof f?f():f,!0)}),i=u[1];return[u[0],o(function(t){i(\"function\"==typeof t?r(t):n(t))},[])]}function e(n,t,o){var i=f(function(){return r(n)},[n]);return u(i,t,o)}export{i as useImmer,e as useImmerReducer};\n//# sourceMappingURL=use-immer.module.js.map\n","import { useImmerReducer } from 'use-immer';\nimport { useEffect } from 'react';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { scaffolderApiRef } from '../api/ref.esm.js';\n\nfunction reducer(draft, action) {\n  switch (action.type) {\n    case \"INIT\": {\n      draft.steps = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = { status: \"open\", id: next.id };\n        return current;\n      }, {});\n      draft.stepLogs = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = [];\n        return current;\n      }, {});\n      draft.loading = false;\n      draft.error = void 0;\n      draft.completed = false;\n      draft.task = action.data;\n      return;\n    }\n    case \"LOGS\": {\n      const entries = action.data;\n      for (const entry of entries) {\n        const logLine = `${entry.createdAt} ${entry.body.message}`;\n        if (!entry.body.stepId || !draft.steps?.[entry.body.stepId]) {\n          continue;\n        }\n        const currentStepLog = draft.stepLogs?.[entry.body.stepId];\n        const currentStep = draft.steps?.[entry.body.stepId];\n        if (currentStep) {\n          if (entry.body.status && entry.body.status !== currentStep.status) {\n            currentStep.status = entry.body.status;\n            if (currentStep.status === \"processing\") {\n              currentStep.startedAt = entry.createdAt;\n            }\n            if ([\"cancelled\", \"completed\", \"failed\"].includes(currentStep.status)) {\n              currentStep.endedAt = entry.createdAt;\n            }\n          }\n        }\n        currentStepLog?.push(logLine);\n      }\n      return;\n    }\n    case \"COMPLETED\": {\n      draft.completed = true;\n      draft.output = action.data.body.output;\n      draft.error = action.data.body.error;\n      return;\n    }\n    case \"CANCELLED\": {\n      draft.cancelled = true;\n      return;\n    }\n    case \"RECOVERED\": {\n      for (const stepId in draft.steps) {\n        if (draft.steps.hasOwnProperty(stepId)) {\n          draft.steps[stepId].startedAt = void 0;\n          draft.steps[stepId].endedAt = void 0;\n          draft.steps[stepId].status = \"open\";\n        }\n      }\n      return;\n    }\n    case \"ERROR\": {\n      draft.error = action.data;\n      draft.loading = false;\n      draft.completed = true;\n      return;\n    }\n    default:\n      return;\n  }\n}\nconst useTaskEventStream = (taskId) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const [state, dispatch] = useImmerReducer(reducer, {\n    cancelled: false,\n    loading: true,\n    completed: false,\n    stepLogs: {},\n    steps: {}\n  });\n  useEffect(() => {\n    let didCancel = false;\n    let subscription;\n    let logPusher;\n    let retryCount = 1;\n    const startStreamLogProcess = () => scaffolderApi.getTask(taskId).then(\n      (task) => {\n        if (didCancel) {\n          return;\n        }\n        dispatch({ type: \"INIT\", data: task });\n        const observable = scaffolderApi.streamLogs({ taskId });\n        const collectedLogEvents = new Array();\n        function emitLogs() {\n          if (collectedLogEvents.length) {\n            const logs = collectedLogEvents.splice(\n              0,\n              collectedLogEvents.length\n            );\n            dispatch({ type: \"LOGS\", data: logs });\n          }\n        }\n        logPusher = setInterval(emitLogs, 500);\n        subscription = observable.subscribe({\n          next: (event) => {\n            retryCount = 1;\n            switch (event.type) {\n              case \"log\":\n                return collectedLogEvents.push(event);\n              case \"cancelled\":\n                dispatch({ type: \"CANCELLED\" });\n                return void 0;\n              case \"completion\":\n                emitLogs();\n                dispatch({ type: \"COMPLETED\", data: event });\n                return void 0;\n              case \"recovered\":\n                dispatch({ type: \"RECOVERED\", data: event });\n                return void 0;\n              default:\n                throw new Error(\n                  `Unhandled event type ${event.type} in observer`\n                );\n            }\n          },\n          error: (error) => {\n            emitLogs();\n            const maxRetries = 3;\n            if (!error.message) {\n              error.message = `We cannot connect at the moment, trying again in some seconds... Retrying (${retryCount > maxRetries ? maxRetries : retryCount}/${maxRetries} retries)`;\n            }\n            setTimeout(() => {\n              retryCount += 1;\n              void startStreamLogProcess();\n            }, 15e3);\n            dispatch({ type: \"ERROR\", data: error });\n          }\n        });\n      },\n      (error) => {\n        if (!didCancel) {\n          dispatch({ type: \"ERROR\", data: error });\n        }\n      }\n    );\n    void startStreamLogProcess();\n    return () => {\n      didCancel = true;\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n      if (logPusher) {\n        clearInterval(logPusher);\n      }\n    };\n  }, [scaffolderApi, dispatch, taskId]);\n  return state;\n};\n\nexport { useTaskEventStream };\n//# sourceMappingURL=useEventStream.esm.js.map\n","import IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Popover from '@material-ui/core/Popover';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useAsync } from '@react-hookz/web';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Retry from '@material-ui/icons/Repeat';\nimport Toc from '@material-ui/icons/Toc';\nimport ControlPointIcon from '@material-ui/icons/ControlPoint';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport React, { useState } from 'react';\nimport { useApi, useAnalytics } from '@backstage/core-plugin-api';\nimport { scaffolderApiRef } from '@backstage/plugin-scaffolder-react';\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport { taskCancelPermission, taskReadPermission, taskCreatePermission } from '@backstage/plugin-scaffolder-common/alpha';\n\nconst useStyles = makeStyles(() => ({\n  button: {\n    color: ({ fontColor }) => fontColor\n  }\n}));\nconst ContextMenu = (props) => {\n  const {\n    cancelEnabled,\n    logsVisible,\n    buttonBarVisible,\n    onStartOver,\n    onToggleLogs,\n    onToggleButtonBar,\n    taskId\n  } = props;\n  const { getPageTheme } = useTheme();\n  const pageTheme = getPageTheme({ themeId: \"website\" });\n  const classes = useStyles({ fontColor: pageTheme.fontColor });\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const analytics = useAnalytics();\n  const [anchorEl, setAnchorEl] = useState();\n  const [{ status: cancelStatus }, { execute: cancel }] = useAsync(async () => {\n    if (taskId) {\n      analytics.captureEvent(\"cancelled\", \"Template has been cancelled\");\n      await scaffolderApi.cancelTask(taskId);\n    }\n  });\n  const { allowed: canCancelTask } = usePermission({\n    permission: taskCancelPermission\n  });\n  const { allowed: canReadTask } = usePermission({\n    permission: taskReadPermission\n  });\n  const { allowed: canCreateTask } = usePermission({\n    permission: taskCreatePermission\n  });\n  const canStartOver = canReadTask && canCreateTask;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: (event) => {\n        setAnchorEl(event.currentTarget);\n      },\n      \"data-testid\": \"menu-button\",\n      className: classes.button\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open: Boolean(anchorEl),\n      onClose: () => setAnchorEl(void 0),\n      anchorEl,\n      anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n      transformOrigin: { vertical: \"top\", horizontal: \"right\" }\n    },\n    /* @__PURE__ */ React.createElement(MenuList, null, /* @__PURE__ */ React.createElement(MenuItem, { onClick: () => onToggleLogs?.(!logsVisible) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Toc, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: logsVisible ? \"Hide Logs\" : \"Show Logs\" })), /* @__PURE__ */ React.createElement(MenuItem, { onClick: () => onToggleButtonBar?.(!buttonBarVisible) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(ControlPointIcon, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        primary: buttonBarVisible ? \"Hide Button Bar\" : \"Show Button Bar\"\n      }\n    )), /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: onStartOver,\n        disabled: cancelEnabled || !canStartOver,\n        \"data-testid\": \"start-over-task\"\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Retry, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Start Over\" })\n    ), /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: cancel,\n        disabled: !cancelEnabled || cancelStatus !== \"not-executed\" || !canCancelTask,\n        \"data-testid\": \"cancel-task\"\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Cancel, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Cancel\" })\n    ))\n  ));\n};\n\nexport { ContextMenu };\n//# sourceMappingURL=ContextMenu.esm.js.map\n","import { useApp, useRouteRef } from '@backstage/core-plugin-api';\nimport { entityRouteRef } from '@backstage/plugin-catalog-react';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport LinkIcon from '@material-ui/icons/Link';\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport { Link } from '@backstage/core-components';\n\nconst useStyles = makeStyles({\n  root: {\n    \"&:hover\": {\n      textDecoration: \"none\"\n    }\n  }\n});\nconst LinkOutputs = (props) => {\n  const { links = [] } = props.output;\n  const classes = useStyles();\n  const app = useApp();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const iconResolver = (key) => app.getSystemIcon(key) ?? LinkIcon;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, links.filter(({ url, entityRef }) => url || entityRef).map(({ url, entityRef, title, icon }) => {\n    if (entityRef) {\n      const entityName = parseEntityRef(entityRef);\n      const target = entityRoute(entityName);\n      return { title, icon, url: target };\n    }\n    return { title, icon, url };\n  }).map(({ url, title, icon }, i) => {\n    const Icon = iconResolver(icon);\n    return /* @__PURE__ */ React.createElement(Link, { to: url, key: i, classes: { root: classes.root } }, /* @__PURE__ */ React.createElement(Button, { startIcon: /* @__PURE__ */ React.createElement(Icon, null), component: \"div\", color: \"primary\" }, title));\n  }));\n};\n\nexport { LinkOutputs };\n//# sourceMappingURL=LinkOutputs.esm.js.map\n","import { useApp } from '@backstage/core-plugin-api';\nimport Button from '@material-ui/core/Button';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport React from 'react';\n\nconst TextOutputs = (props) => {\n  const {\n    output: { text = [] },\n    index,\n    setIndex\n  } = props;\n  const app = useApp();\n  const iconResolver = (key) => app.getSystemIcon(key) ?? DescriptionIcon;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, text.filter(({ content }) => content !== void 0).map(({ title, icon }, i) => {\n    const Icon = iconResolver(icon);\n    return /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        key: i,\n        startIcon: /* @__PURE__ */ React.createElement(Icon, null),\n        component: \"div\",\n        color: \"primary\",\n        onClick: () => {\n          if (index !== i) {\n            setIndex?.(i);\n          }\n        },\n        variant: index === i ? \"outlined\" : void 0\n      },\n      title\n    );\n  }));\n};\n\nexport { TextOutputs };\n//# sourceMappingURL=TextOutputs.esm.js.map\n","import { InfoCard, MarkdownContent } from '@backstage/core-components';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { LinkOutputs } from './LinkOutputs.esm.js';\nimport { TextOutputs } from './TextOutputs.esm.js';\n\nconst DefaultTemplateOutputs = (props) => {\n  const { output } = props;\n  const [textOutputIndex, setTextOutputIndex] = useState(\n    void 0\n  );\n  useEffect(() => {\n    if (textOutputIndex === void 0 && output?.text) {\n      const defaultIndex = output.text.findIndex(\n        (t) => t.default\n      );\n      setTextOutputIndex(defaultIndex >= 0 ? defaultIndex : 0);\n    }\n  }, [textOutputIndex, output]);\n  const textOutput = useMemo(\n    () => textOutputIndex !== void 0 ? output?.text?.[textOutputIndex] : null,\n    [output, textOutputIndex]\n  );\n  if (!output) {\n    return null;\n  }\n  const emptyOutput = Object.keys(output).length === 0;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, !emptyOutput ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2, \"data-testid\": \"output-box\" }, /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      padding: 2,\n      justifyContent: \"center\",\n      display: \"flex\",\n      gridGap: 16\n    },\n    /* @__PURE__ */ React.createElement(\n      TextOutputs,\n      {\n        output,\n        index: textOutputIndex,\n        setIndex: setTextOutputIndex\n      }\n    ),\n    /* @__PURE__ */ React.createElement(LinkOutputs, { output })\n  ))) : null, textOutput ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2, \"data-testid\": \"text-output-box\" }, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: textOutput.title ?? \"Text Output\",\n      noPadding: true,\n      titleTypographyProps: { component: \"h2\" }\n    },\n    /* @__PURE__ */ React.createElement(Box, { padding: 2, height: \"100%\" }, /* @__PURE__ */ React.createElement(MarkdownContent, { content: textOutput.content ?? \"\" }))\n  )) : null);\n};\n\nexport { DefaultTemplateOutputs };\n//# sourceMappingURL=DefaultTemplateOutputs.esm.js.map\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\nimport RemoveCircleOutline from '@material-ui/icons/RemoveCircleOutline';\nimport PanoramaFishEyeIcon from '@material-ui/icons/PanoramaFishEye';\nimport classNames from 'classnames';\nimport CheckCircleOutline from '@material-ui/icons/CheckCircleOutline';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\n\nconst useStepIconStyles = makeStyles((theme) => ({\n  root: {\n    color: theme.palette.text.disabled\n  },\n  completed: {\n    color: theme.palette.status.ok\n  },\n  error: {\n    color: theme.palette.status.error\n  }\n}));\nconst StepIcon = (props) => {\n  const classes = useStepIconStyles();\n  const { active, completed, error, skipped } = props;\n  const getMiddle = () => {\n    if (active) {\n      return /* @__PURE__ */ React.createElement(CircularProgress, { size: \"20px\" });\n    }\n    if (completed) {\n      return /* @__PURE__ */ React.createElement(CheckCircleOutline, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(ErrorOutline, null);\n    }\n    if (skipped) {\n      return /* @__PURE__ */ React.createElement(RemoveCircleOutline, null);\n    }\n    return /* @__PURE__ */ React.createElement(PanoramaFishEyeIcon, null);\n  };\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      className: classNames(classes.root, {\n        [classes.completed]: completed,\n        [classes.error]: error\n      })\n    },\n    getMiddle()\n  );\n};\n\nexport { StepIcon };\n//# sourceMappingURL=StepIcon.esm.js.map\n","import { useEffect, useRef } from 'react';\nvar useInterval = function (callback, delay) {\n    var savedCallback = useRef(function () { });\n    useEffect(function () {\n        savedCallback.current = callback;\n    });\n    useEffect(function () {\n        if (delay !== null) {\n            var interval_1 = setInterval(function () { return savedCallback.current(); }, delay || 0);\n            return function () { return clearInterval(interval_1); };\n        }\n        return undefined;\n    }, [delay]);\n};\nexport default useInterval;\n","import React, { useState, useCallback } from 'react';\nimport useInterval from 'react-use/esm/useInterval';\nimport { DateTime, Interval } from 'luxon';\nimport humanizeDuration from 'humanize-duration';\nimport Typography from '@material-ui/core/Typography';\nimport { useMountEffect } from '@react-hookz/web';\n\nconst StepTime = (props) => {\n  const [time, setTime] = useState(\"\");\n  const { step } = props;\n  const getDelay = () => {\n    if (step.startedAt && step.endedAt && time) {\n      return null;\n    }\n    if (step.startedAt && step.endedAt) {\n      return 1;\n    }\n    return 1e3;\n  };\n  const calculate = useCallback(() => {\n    if (!step.startedAt) {\n      setTime(\"\");\n      return;\n    }\n    const end = step.endedAt ? DateTime.fromISO(step.endedAt) : DateTime.local();\n    const startedAt = DateTime.fromISO(step.startedAt);\n    const formatted = Interval.fromDateTimes(startedAt, end).toDuration().valueOf();\n    setTime(humanizeDuration(formatted, { round: true }));\n  }, [step.endedAt, step.startedAt]);\n  useMountEffect(calculate);\n  useInterval(calculate, getDelay());\n  return /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\" }, time);\n};\n\nexport { StepTime };\n//# sourceMappingURL=StepTime.esm.js.map\n","import React from 'react';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  failed: {\n    backgroundColor: theme.palette.error.main\n  },\n  success: {\n    backgroundColor: theme.palette.success.main\n  }\n}));\nconst TaskBorder = (props) => {\n  const styles = useStyles();\n  if (!props.isComplete) {\n    return /* @__PURE__ */ React.createElement(LinearProgress, { variant: \"indeterminate\" });\n  }\n  return /* @__PURE__ */ React.createElement(\n    LinearProgress,\n    {\n      variant: \"determinate\",\n      classes: { bar: props.isError ? styles.failed : styles.success },\n      value: 100\n    }\n  );\n};\n\nexport { TaskBorder };\n//# sourceMappingURL=TaskBorder.esm.js.map\n","import React from 'react';\nimport MuiStepper from '@material-ui/core/Stepper';\nimport MuiStep from '@material-ui/core/Step';\nimport MuiStepButton from '@material-ui/core/StepButton';\nimport MuiStepLabel from '@material-ui/core/StepLabel';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport { StepIcon } from './StepIcon.esm.js';\nimport { StepTime } from './StepTime.esm.js';\nimport { TaskBorder } from './TaskBorder.esm.js';\n\nconst TaskSteps = (props) => {\n  return /* @__PURE__ */ React.createElement(Paper, { style: { position: \"relative\", overflow: \"hidden\" } }, /* @__PURE__ */ React.createElement(\n    TaskBorder,\n    {\n      isComplete: props.isComplete ?? false,\n      isError: props.isError ?? false\n    }\n  ), /* @__PURE__ */ React.createElement(Box, { padding: 2 }, /* @__PURE__ */ React.createElement(\n    MuiStepper,\n    {\n      activeStep: props.activeStep,\n      alternativeLabel: true,\n      variant: \"elevation\",\n      style: { overflowX: \"auto\" }\n    },\n    props.steps.map((step) => {\n      const isCompleted = step.status === \"completed\";\n      const isFailed = step.status === \"failed\";\n      const isActive = step.status === \"processing\";\n      const isSkipped = step.status === \"skipped\";\n      const stepIconProps = {\n        completed: isCompleted,\n        error: isFailed,\n        active: isActive,\n        skipped: isSkipped\n      };\n      return /* @__PURE__ */ React.createElement(MuiStep, { key: step.id }, /* @__PURE__ */ React.createElement(MuiStepButton, null, /* @__PURE__ */ React.createElement(\n        MuiStepLabel,\n        {\n          StepIconProps: stepIconProps,\n          StepIconComponent: StepIcon,\n          \"data-testid\": \"step-label\"\n        },\n        /* @__PURE__ */ React.createElement(Box, null, step.name),\n        !isSkipped && /* @__PURE__ */ React.createElement(StepTime, { step })\n      )));\n    })\n  )));\n};\n\nexport { TaskSteps };\n//# sourceMappingURL=TaskSteps.esm.js.map\n","import React from 'react';\nimport { LogViewer } from '@backstage/core-components';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n    position: \"relative\"\n  }\n});\nconst TaskLogStream = (props) => {\n  const styles = useStyles();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.root }, /* @__PURE__ */ React.createElement(\n    LogViewer,\n    {\n      text: Object.values(props.logs).map((l) => l.join(\"\\n\")).filter(Boolean).join(\"\\n\")\n    }\n  ));\n};\n\nexport { TaskLogStream };\n//# sourceMappingURL=TaskLogStream.esm.js.map\n","import React, { useMemo, useState, useEffect, useCallback } from 'react';\nimport { Page, Header, Content, ErrorPanel } from '@backstage/core-components';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ResizableBox } from 'react-resizable';\nimport { scaffolderApiRef, useTaskEventStream } from '@backstage/plugin-scaffolder-react';\nimport { selectedTemplateRouteRef } from '../../routes.esm.js';\nimport { useRouteRef, useAnalytics, useApi } from '@backstage/core-plugin-api';\nimport qs from 'qs';\nimport { ContextMenu } from './ContextMenu.esm.js';\nimport { DefaultTemplateOutputs, TaskSteps, TaskLogStream } from '@backstage/plugin-scaffolder-react/alpha';\nimport { useAsync } from '@react-hookz/web';\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport { taskCancelPermission, taskReadPermission, taskCreatePermission } from '@backstage/plugin-scaffolder-common/alpha';\n\nconst useStyles = makeStyles((theme) => ({\n  contentWrapper: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  buttonBar: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"right\"\n  },\n  cancelButton: {\n    marginRight: theme.spacing(1)\n  },\n  logsVisibilityButton: {\n    marginRight: theme.spacing(1)\n  }\n}));\nconst OngoingTask = (props) => {\n  const { taskId } = useParams();\n  const templateRouteRef = useRouteRef(selectedTemplateRouteRef);\n  const navigate = useNavigate();\n  const analytics = useAnalytics();\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const taskStream = useTaskEventStream(taskId);\n  const classes = useStyles();\n  const steps = useMemo(\n    () => taskStream.task?.spec.steps.map((step) => ({\n      ...step,\n      ...taskStream?.steps?.[step.id]\n    })) ?? [],\n    [taskStream]\n  );\n  const [logsVisible, setLogVisibleState] = useState(false);\n  const [buttonBarVisible, setButtonBarVisibleState] = useState(true);\n  const { allowed: canCancelTask } = usePermission({\n    permission: taskCancelPermission\n  });\n  const { allowed: canReadTask } = usePermission({\n    permission: taskReadPermission\n  });\n  const { allowed: canCreateTask } = usePermission({\n    permission: taskCreatePermission\n  });\n  const canStartOver = canReadTask && canCreateTask;\n  useEffect(() => {\n    if (taskStream.error) {\n      setLogVisibleState(true);\n    }\n  }, [taskStream.error]);\n  useEffect(() => {\n    if (taskStream.completed && !taskStream.error) {\n      setButtonBarVisibleState(false);\n    }\n  }, [taskStream.error, taskStream.completed]);\n  const activeStep = useMemo(() => {\n    for (let i = steps.length - 1; i >= 0; i--) {\n      if (steps[i].status !== \"open\") {\n        return i;\n      }\n    }\n    return 0;\n  }, [steps]);\n  const startOver = useCallback(() => {\n    const { namespace, name } = taskStream.task?.spec.templateInfo?.entity?.metadata ?? {};\n    const formData = taskStream.task?.spec.parameters ?? {};\n    if (!namespace || !name) {\n      return;\n    }\n    analytics.captureEvent(\"click\", `Task has been started over`);\n    navigate({\n      pathname: templateRouteRef({\n        namespace,\n        templateName: name\n      }),\n      search: `?${qs.stringify({ formData: JSON.stringify(formData) })}`\n    });\n  }, [\n    analytics,\n    navigate,\n    taskStream.task?.spec.parameters,\n    taskStream.task?.spec.templateInfo?.entity?.metadata,\n    templateRouteRef\n  ]);\n  const [{ status: cancelStatus }, { execute: triggerCancel }] = useAsync(\n    async () => {\n      if (taskId) {\n        analytics.captureEvent(\"cancelled\", \"Template has been cancelled\");\n        await scaffolderApi.cancelTask(taskId);\n      }\n    }\n  );\n  const Outputs = props.TemplateOutputsComponent ?? DefaultTemplateOutputs;\n  const templateName = taskStream.task?.spec.templateInfo?.entity?.metadata.name;\n  const cancelEnabled = !(taskStream.cancelled || taskStream.completed);\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"website\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      pageTitleOverride: `Run of ${templateName}`,\n      title: /* @__PURE__ */ React.createElement(\"div\", null, \"Run of \", /* @__PURE__ */ React.createElement(\"code\", null, templateName)),\n      subtitle: `Task ${taskId}`\n    },\n    /* @__PURE__ */ React.createElement(\n      ContextMenu,\n      {\n        cancelEnabled,\n        logsVisible,\n        buttonBarVisible,\n        onStartOver: startOver,\n        onToggleLogs: setLogVisibleState,\n        onToggleButtonBar: setButtonBarVisibleState,\n        taskId\n      }\n    )\n  ), /* @__PURE__ */ React.createElement(Content, { className: classes.contentWrapper }, taskStream.error ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      error: taskStream.error,\n      titleFormat: \"markdown\",\n      title: taskStream.error.message\n    }\n  )) : null, /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(\n    TaskSteps,\n    {\n      steps,\n      activeStep,\n      isComplete: taskStream.completed,\n      isError: Boolean(taskStream.error)\n    }\n  )), /* @__PURE__ */ React.createElement(Outputs, { output: taskStream.output }), buttonBarVisible ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(Box, { padding: 2 }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.buttonBar }, /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: classes.cancelButton,\n      disabled: !cancelEnabled || cancelStatus !== \"not-executed\" || !canCancelTask,\n      onClick: triggerCancel,\n      \"data-testid\": \"cancel-button\"\n    },\n    \"Cancel\"\n  ), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: classes.logsVisibilityButton,\n      color: \"primary\",\n      variant: \"outlined\",\n      onClick: () => setLogVisibleState(!logsVisible)\n    },\n    logsVisible ? \"Hide Logs\" : \"Show Logs\"\n  ), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"primary\",\n      disabled: cancelEnabled || !canStartOver,\n      onClick: startOver,\n      \"data-testid\": \"start-over-button\"\n    },\n    \"Start Over\"\n  ))))) : null, logsVisible ? /* @__PURE__ */ React.createElement(ResizableBox, { height: 240, minConstraints: [0, 160], axis: \"y\" }, /* @__PURE__ */ React.createElement(Paper, { style: { height: \"100%\" } }, /* @__PURE__ */ React.createElement(Box, { padding: 2, height: \"100%\" }, /* @__PURE__ */ React.createElement(TaskLogStream, { logs: taskStream.stepLogs })))) : null));\n};\n\nexport { OngoingTask };\n//# sourceMappingURL=OngoingTask.esm.js.map\n","const showDirectoryPicker = window.showDirectoryPicker;\nclass WebFileAccess {\n  constructor(path, handle) {\n    this.path = path;\n    this.handle = handle;\n  }\n  file() {\n    return this.handle.getFile();\n  }\n  async save(data) {\n    const writable = await this.handle.createWritable();\n    await writable.write(data);\n    await writable.close();\n  }\n}\nclass WebDirectoryAccess {\n  constructor(handle) {\n    this.handle = handle;\n  }\n  async listFiles() {\n    const content = [];\n    for await (const entry of this.listDirectoryContents(this.handle)) {\n      content.push(entry);\n    }\n    return content;\n  }\n  async *listDirectoryContents(dirHandle, basePath = []) {\n    for await (const handle of dirHandle.values()) {\n      if (handle.kind === \"file\") {\n        yield new WebFileAccess([...basePath, handle.name].join(\"/\"), handle);\n      } else if (handle.kind === \"directory\") {\n        if (handle.name === \".git\") {\n          continue;\n        }\n        yield* this.listDirectoryContents(handle, [...basePath, handle.name]);\n      }\n    }\n  }\n}\nclass WebFileSystemAccess {\n  static isSupported() {\n    return Boolean(showDirectoryPicker);\n  }\n  static async requestDirectoryAccess() {\n    if (!showDirectoryPicker) {\n      throw new Error(\"File system access is not supported\");\n    }\n    const handle = await showDirectoryPicker();\n    return new WebDirectoryAccess(handle);\n  }\n  constructor() {\n  }\n}\n\nexport { WebFileSystemAccess };\n//# sourceMappingURL=WebFileSystemAccess.esm.js.map\n","/**\nThe default maximum length of a `TreeBuffer` node.\n*/\nconst DefaultBufferLength = 1024;\nlet nextPropID = 0;\nclass Range {\n    constructor(from, to) {\n        this.from = from;\n        this.to = to;\n    }\n}\n/**\nEach [node type](#common.NodeType) or [individual tree](#common.Tree)\ncan have metadata associated with it in props. Instances of this\nclass represent prop names.\n*/\nclass NodeProp {\n    /**\n    Create a new node prop type.\n    */\n    constructor(config = {}) {\n        this.id = nextPropID++;\n        this.perNode = !!config.perNode;\n        this.deserialize = config.deserialize || (() => {\n            throw new Error(\"This node type doesn't define a deserialize function\");\n        });\n    }\n    /**\n    This is meant to be used with\n    [`NodeSet.extend`](#common.NodeSet.extend) or\n    [`LRParser.configure`](#lr.ParserConfig.props) to compute\n    prop values for each node type in the set. Takes a [match\n    object](#common.NodeType^match) or function that returns undefined\n    if the node type doesn't get this prop, and the prop's value if\n    it does.\n    */\n    add(match) {\n        if (this.perNode)\n            throw new RangeError(\"Can't add per-node props to node types\");\n        if (typeof match != \"function\")\n            match = NodeType.match(match);\n        return (type) => {\n            let result = match(type);\n            return result === undefined ? null : [this, result];\n        };\n    }\n}\n/**\nProp that is used to describe matching delimiters. For opening\ndelimiters, this holds an array of node names (written as a\nspace-separated string when declaring this prop in a grammar)\nfor the node types of closing delimiters that match it.\n*/\nNodeProp.closedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/**\nThe inverse of [`closedBy`](#common.NodeProp^closedBy). This is\nattached to closing delimiters, holding an array of node names\nof types of matching opening delimiters.\n*/\nNodeProp.openedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/**\nUsed to assign node types to groups (for example, all node\ntypes that represent an expression could be tagged with an\n`\"Expression\"` group).\n*/\nNodeProp.group = new NodeProp({ deserialize: str => str.split(\" \") });\n/**\nAttached to nodes to indicate these should be\n[displayed](https://codemirror.net/docs/ref/#language.syntaxTree)\nin a bidirectional text isolate, so that direction-neutral\ncharacters on their sides don't incorrectly get associated with\nsurrounding text. You'll generally want to set this for nodes\nthat contain arbitrary text, like strings and comments, and for\nnodes that appear _inside_ arbitrary text, like HTML tags. When\nnot given a value, in a grammar declaration, defaults to\n`\"auto\"`.\n*/\nNodeProp.isolate = new NodeProp({ deserialize: value => {\n        if (value && value != \"rtl\" && value != \"ltr\" && value != \"auto\")\n            throw new RangeError(\"Invalid value for isolate: \" + value);\n        return value || \"auto\";\n    } });\n/**\nThe hash of the [context](#lr.ContextTracker.constructor)\nthat the node was parsed in, if any. Used to limit reuse of\ncontextual nodes.\n*/\nNodeProp.contextHash = new NodeProp({ perNode: true });\n/**\nThe distance beyond the end of the node that the tokenizer\nlooked ahead for any of the tokens inside the node. (The LR\nparser only stores this when it is larger than 25, for\nefficiency reasons.)\n*/\nNodeProp.lookAhead = new NodeProp({ perNode: true });\n/**\nThis per-node prop is used to replace a given node, or part of a\nnode, with another tree. This is useful to include trees from\ndifferent languages in mixed-language parsers.\n*/\nNodeProp.mounted = new NodeProp({ perNode: true });\n/**\nA mounted tree, which can be [stored](#common.NodeProp^mounted) on\na tree node to indicate that parts of its content are\nrepresented by another tree.\n*/\nclass MountedTree {\n    constructor(\n    /**\n    The inner tree.\n    */\n    tree, \n    /**\n    If this is null, this tree replaces the entire node (it will\n    be included in the regular iteration instead of its host\n    node). If not, only the given ranges are considered to be\n    covered by this tree. This is used for trees that are mixed in\n    a way that isn't strictly hierarchical. Such mounted trees are\n    only entered by [`resolveInner`](#common.Tree.resolveInner)\n    and [`enter`](#common.SyntaxNode.enter).\n    */\n    overlay, \n    /**\n    The parser used to create this subtree.\n    */\n    parser) {\n        this.tree = tree;\n        this.overlay = overlay;\n        this.parser = parser;\n    }\n    /**\n    @internal\n    */\n    static get(tree) {\n        return tree && tree.props && tree.props[NodeProp.mounted.id];\n    }\n}\nconst noProps = Object.create(null);\n/**\nEach node in a syntax tree has a node type associated with it.\n*/\nclass NodeType {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The name of the node type. Not necessarily unique, but if the\n    grammar was written properly, different node types with the\n    same name within a node set should play the same semantic\n    role.\n    */\n    name, \n    /**\n    @internal\n    */\n    props, \n    /**\n    The id of this node in its set. Corresponds to the term ids\n    used in the parser.\n    */\n    id, \n    /**\n    @internal\n    */\n    flags = 0) {\n        this.name = name;\n        this.props = props;\n        this.id = id;\n        this.flags = flags;\n    }\n    /**\n    Define a node type.\n    */\n    static define(spec) {\n        let props = spec.props && spec.props.length ? Object.create(null) : noProps;\n        let flags = (spec.top ? 1 /* NodeFlag.Top */ : 0) | (spec.skipped ? 2 /* NodeFlag.Skipped */ : 0) |\n            (spec.error ? 4 /* NodeFlag.Error */ : 0) | (spec.name == null ? 8 /* NodeFlag.Anonymous */ : 0);\n        let type = new NodeType(spec.name || \"\", props, spec.id, flags);\n        if (spec.props)\n            for (let src of spec.props) {\n                if (!Array.isArray(src))\n                    src = src(type);\n                if (src) {\n                    if (src[0].perNode)\n                        throw new RangeError(\"Can't store a per-node prop on a node type\");\n                    props[src[0].id] = src[1];\n                }\n            }\n        return type;\n    }\n    /**\n    Retrieves a node prop for this type. Will return `undefined` if\n    the prop isn't present on this node.\n    */\n    prop(prop) { return this.props[prop.id]; }\n    /**\n    True when this is the top node of a grammar.\n    */\n    get isTop() { return (this.flags & 1 /* NodeFlag.Top */) > 0; }\n    /**\n    True when this node is produced by a skip rule.\n    */\n    get isSkipped() { return (this.flags & 2 /* NodeFlag.Skipped */) > 0; }\n    /**\n    Indicates whether this is an error node.\n    */\n    get isError() { return (this.flags & 4 /* NodeFlag.Error */) > 0; }\n    /**\n    When true, this node type doesn't correspond to a user-declared\n    named node, for example because it is used to cache repetition.\n    */\n    get isAnonymous() { return (this.flags & 8 /* NodeFlag.Anonymous */) > 0; }\n    /**\n    Returns true when this node's name or one of its\n    [groups](#common.NodeProp^group) matches the given string.\n    */\n    is(name) {\n        if (typeof name == 'string') {\n            if (this.name == name)\n                return true;\n            let group = this.prop(NodeProp.group);\n            return group ? group.indexOf(name) > -1 : false;\n        }\n        return this.id == name;\n    }\n    /**\n    Create a function from node types to arbitrary values by\n    specifying an object whose property names are node or\n    [group](#common.NodeProp^group) names. Often useful with\n    [`NodeProp.add`](#common.NodeProp.add). You can put multiple\n    names, separated by spaces, in a single property name to map\n    multiple node names to a single value.\n    */\n    static match(map) {\n        let direct = Object.create(null);\n        for (let prop in map)\n            for (let name of prop.split(\" \"))\n                direct[name] = map[prop];\n        return (node) => {\n            for (let groups = node.prop(NodeProp.group), i = -1; i < (groups ? groups.length : 0); i++) {\n                let found = direct[i < 0 ? node.name : groups[i]];\n                if (found)\n                    return found;\n            }\n        };\n    }\n}\n/**\nAn empty dummy node type to use when no actual type is available.\n*/\nNodeType.none = new NodeType(\"\", Object.create(null), 0, 8 /* NodeFlag.Anonymous */);\n/**\nA node set holds a collection of node types. It is used to\ncompactly represent trees by storing their type ids, rather than a\nfull pointer to the type object, in a numeric array. Each parser\n[has](#lr.LRParser.nodeSet) a node set, and [tree\nbuffers](#common.TreeBuffer) can only store collections of nodes\nfrom the same set. A set can have a maximum of 2**16 (65536) node\ntypes in it, so that the ids fit into 16-bit typed array slots.\n*/\nclass NodeSet {\n    /**\n    Create a set with the given types. The `id` property of each\n    type should correspond to its position within the array.\n    */\n    constructor(\n    /**\n    The node types in this set, by id.\n    */\n    types) {\n        this.types = types;\n        for (let i = 0; i < types.length; i++)\n            if (types[i].id != i)\n                throw new RangeError(\"Node type ids should correspond to array positions when creating a node set\");\n    }\n    /**\n    Create a copy of this set with some node properties added. The\n    arguments to this method can be created with\n    [`NodeProp.add`](#common.NodeProp.add).\n    */\n    extend(...props) {\n        let newTypes = [];\n        for (let type of this.types) {\n            let newProps = null;\n            for (let source of props) {\n                let add = source(type);\n                if (add) {\n                    if (!newProps)\n                        newProps = Object.assign({}, type.props);\n                    newProps[add[0].id] = add[1];\n                }\n            }\n            newTypes.push(newProps ? new NodeType(type.name, newProps, type.id, type.flags) : type);\n        }\n        return new NodeSet(newTypes);\n    }\n}\nconst CachedNode = new WeakMap(), CachedInnerNode = new WeakMap();\n/**\nOptions that control iteration. Can be combined with the `|`\noperator to enable multiple ones.\n*/\nvar IterMode;\n(function (IterMode) {\n    /**\n    When enabled, iteration will only visit [`Tree`](#common.Tree)\n    objects, not nodes packed into\n    [`TreeBuffer`](#common.TreeBuffer)s.\n    */\n    IterMode[IterMode[\"ExcludeBuffers\"] = 1] = \"ExcludeBuffers\";\n    /**\n    Enable this to make iteration include anonymous nodes (such as\n    the nodes that wrap repeated grammar constructs into a balanced\n    tree).\n    */\n    IterMode[IterMode[\"IncludeAnonymous\"] = 2] = \"IncludeAnonymous\";\n    /**\n    By default, regular [mounted](#common.NodeProp^mounted) nodes\n    replace their base node in iteration. Enable this to ignore them\n    instead.\n    */\n    IterMode[IterMode[\"IgnoreMounts\"] = 4] = \"IgnoreMounts\";\n    /**\n    This option only applies in\n    [`enter`](#common.SyntaxNode.enter)-style methods. It tells the\n    library to not enter mounted overlays if one covers the given\n    position.\n    */\n    IterMode[IterMode[\"IgnoreOverlays\"] = 8] = \"IgnoreOverlays\";\n})(IterMode || (IterMode = {}));\n/**\nA piece of syntax tree. There are two ways to approach these\ntrees: the way they are actually stored in memory, and the\nconvenient way.\n\nSyntax trees are stored as a tree of `Tree` and `TreeBuffer`\nobjects. By packing detail information into `TreeBuffer` leaf\nnodes, the representation is made a lot more memory-efficient.\n\nHowever, when you want to actually work with tree nodes, this\nrepresentation is very awkward, so most client code will want to\nuse the [`TreeCursor`](#common.TreeCursor) or\n[`SyntaxNode`](#common.SyntaxNode) interface instead, which provides\na view on some part of this data structure, and can be used to\nmove around to adjacent nodes.\n*/\nclass Tree {\n    /**\n    Construct a new tree. See also [`Tree.build`](#common.Tree^build).\n    */\n    constructor(\n    /**\n    The type of the top node.\n    */\n    type, \n    /**\n    This node's child nodes.\n    */\n    children, \n    /**\n    The positions (offsets relative to the start of this tree) of\n    the children.\n    */\n    positions, \n    /**\n    The total length of this tree\n    */\n    length, \n    /**\n    Per-node [node props](#common.NodeProp) to associate with this node.\n    */\n    props) {\n        this.type = type;\n        this.children = children;\n        this.positions = positions;\n        this.length = length;\n        /**\n        @internal\n        */\n        this.props = null;\n        if (props && props.length) {\n            this.props = Object.create(null);\n            for (let [prop, value] of props)\n                this.props[typeof prop == \"number\" ? prop : prop.id] = value;\n        }\n    }\n    /**\n    @internal\n    */\n    toString() {\n        let mounted = MountedTree.get(this);\n        if (mounted && !mounted.overlay)\n            return mounted.tree.toString();\n        let children = \"\";\n        for (let ch of this.children) {\n            let str = ch.toString();\n            if (str) {\n                if (children)\n                    children += \",\";\n                children += str;\n            }\n        }\n        return !this.type.name ? children :\n            (/\\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) +\n                (children.length ? \"(\" + children + \")\" : \"\");\n    }\n    /**\n    Get a [tree cursor](#common.TreeCursor) positioned at the top of\n    the tree. Mode can be used to [control](#common.IterMode) which\n    nodes the cursor visits.\n    */\n    cursor(mode = 0) {\n        return new TreeCursor(this.topNode, mode);\n    }\n    /**\n    Get a [tree cursor](#common.TreeCursor) pointing into this tree\n    at the given position and side (see\n    [`moveTo`](#common.TreeCursor.moveTo).\n    */\n    cursorAt(pos, side = 0, mode = 0) {\n        let scope = CachedNode.get(this) || this.topNode;\n        let cursor = new TreeCursor(scope);\n        cursor.moveTo(pos, side);\n        CachedNode.set(this, cursor._tree);\n        return cursor;\n    }\n    /**\n    Get a [syntax node](#common.SyntaxNode) object for the top of the\n    tree.\n    */\n    get topNode() {\n        return new TreeNode(this, 0, 0, null);\n    }\n    /**\n    Get the [syntax node](#common.SyntaxNode) at the given position.\n    If `side` is -1, this will move into nodes that end at the\n    position. If 1, it'll move into nodes that start at the\n    position. With 0, it'll only enter nodes that cover the position\n    from both sides.\n    \n    Note that this will not enter\n    [overlays](#common.MountedTree.overlay), and you often want\n    [`resolveInner`](#common.Tree.resolveInner) instead.\n    */\n    resolve(pos, side = 0) {\n        let node = resolveNode(CachedNode.get(this) || this.topNode, pos, side, false);\n        CachedNode.set(this, node);\n        return node;\n    }\n    /**\n    Like [`resolve`](#common.Tree.resolve), but will enter\n    [overlaid](#common.MountedTree.overlay) nodes, producing a syntax node\n    pointing into the innermost overlaid tree at the given position\n    (with parent links going through all parent structure, including\n    the host trees).\n    */\n    resolveInner(pos, side = 0) {\n        let node = resolveNode(CachedInnerNode.get(this) || this.topNode, pos, side, true);\n        CachedInnerNode.set(this, node);\n        return node;\n    }\n    /**\n    In some situations, it can be useful to iterate through all\n    nodes around a position, including those in overlays that don't\n    directly cover the position. This method gives you an iterator\n    that will produce all nodes, from small to big, around the given\n    position.\n    */\n    resolveStack(pos, side = 0) {\n        return stackIterator(this, pos, side);\n    }\n    /**\n    Iterate over the tree and its children, calling `enter` for any\n    node that touches the `from`/`to` region (if given) before\n    running over such a node's children, and `leave` (if given) when\n    leaving the node. When `enter` returns `false`, that node will\n    not have its children iterated over (or `leave` called).\n    */\n    iterate(spec) {\n        let { enter, leave, from = 0, to = this.length } = spec;\n        let mode = spec.mode || 0, anon = (mode & IterMode.IncludeAnonymous) > 0;\n        for (let c = this.cursor(mode | IterMode.IncludeAnonymous);;) {\n            let entered = false;\n            if (c.from <= to && c.to >= from && (!anon && c.type.isAnonymous || enter(c) !== false)) {\n                if (c.firstChild())\n                    continue;\n                entered = true;\n            }\n            for (;;) {\n                if (entered && leave && (anon || !c.type.isAnonymous))\n                    leave(c);\n                if (c.nextSibling())\n                    break;\n                if (!c.parent())\n                    return;\n                entered = true;\n            }\n        }\n    }\n    /**\n    Get the value of the given [node prop](#common.NodeProp) for this\n    node. Works with both per-node and per-type props.\n    */\n    prop(prop) {\n        return !prop.perNode ? this.type.prop(prop) : this.props ? this.props[prop.id] : undefined;\n    }\n    /**\n    Returns the node's [per-node props](#common.NodeProp.perNode) in a\n    format that can be passed to the [`Tree`](#common.Tree)\n    constructor.\n    */\n    get propValues() {\n        let result = [];\n        if (this.props)\n            for (let id in this.props)\n                result.push([+id, this.props[id]]);\n        return result;\n    }\n    /**\n    Balance the direct children of this tree, producing a copy of\n    which may have children grouped into subtrees with type\n    [`NodeType.none`](#common.NodeType^none).\n    */\n    balance(config = {}) {\n        return this.children.length <= 8 /* Balance.BranchFactor */ ? this :\n            balanceRange(NodeType.none, this.children, this.positions, 0, this.children.length, 0, this.length, (children, positions, length) => new Tree(this.type, children, positions, length, this.propValues), config.makeTree || ((children, positions, length) => new Tree(NodeType.none, children, positions, length)));\n    }\n    /**\n    Build a tree from a postfix-ordered buffer of node information,\n    or a cursor over such a buffer.\n    */\n    static build(data) { return buildTree(data); }\n}\n/**\nThe empty tree\n*/\nTree.empty = new Tree(NodeType.none, [], [], 0);\nclass FlatBufferCursor {\n    constructor(buffer, index) {\n        this.buffer = buffer;\n        this.index = index;\n    }\n    get id() { return this.buffer[this.index - 4]; }\n    get start() { return this.buffer[this.index - 3]; }\n    get end() { return this.buffer[this.index - 2]; }\n    get size() { return this.buffer[this.index - 1]; }\n    get pos() { return this.index; }\n    next() { this.index -= 4; }\n    fork() { return new FlatBufferCursor(this.buffer, this.index); }\n}\n/**\nTree buffers contain (type, start, end, endIndex) quads for each\nnode. In such a buffer, nodes are stored in prefix order (parents\nbefore children, with the endIndex of the parent indicating which\nchildren belong to it).\n*/\nclass TreeBuffer {\n    /**\n    Create a tree buffer.\n    */\n    constructor(\n    /**\n    The buffer's content.\n    */\n    buffer, \n    /**\n    The total length of the group of nodes in the buffer.\n    */\n    length, \n    /**\n    The node set used in this buffer.\n    */\n    set) {\n        this.buffer = buffer;\n        this.length = length;\n        this.set = set;\n    }\n    /**\n    @internal\n    */\n    get type() { return NodeType.none; }\n    /**\n    @internal\n    */\n    toString() {\n        let result = [];\n        for (let index = 0; index < this.buffer.length;) {\n            result.push(this.childString(index));\n            index = this.buffer[index + 3];\n        }\n        return result.join(\",\");\n    }\n    /**\n    @internal\n    */\n    childString(index) {\n        let id = this.buffer[index], endIndex = this.buffer[index + 3];\n        let type = this.set.types[id], result = type.name;\n        if (/\\W/.test(result) && !type.isError)\n            result = JSON.stringify(result);\n        index += 4;\n        if (endIndex == index)\n            return result;\n        let children = [];\n        while (index < endIndex) {\n            children.push(this.childString(index));\n            index = this.buffer[index + 3];\n        }\n        return result + \"(\" + children.join(\",\") + \")\";\n    }\n    /**\n    @internal\n    */\n    findChild(startIndex, endIndex, dir, pos, side) {\n        let { buffer } = this, pick = -1;\n        for (let i = startIndex; i != endIndex; i = buffer[i + 3]) {\n            if (checkSide(side, pos, buffer[i + 1], buffer[i + 2])) {\n                pick = i;\n                if (dir > 0)\n                    break;\n            }\n        }\n        return pick;\n    }\n    /**\n    @internal\n    */\n    slice(startI, endI, from) {\n        let b = this.buffer;\n        let copy = new Uint16Array(endI - startI), len = 0;\n        for (let i = startI, j = 0; i < endI;) {\n            copy[j++] = b[i++];\n            copy[j++] = b[i++] - from;\n            let to = copy[j++] = b[i++] - from;\n            copy[j++] = b[i++] - startI;\n            len = Math.max(len, to);\n        }\n        return new TreeBuffer(copy, len, this.set);\n    }\n}\nfunction checkSide(side, pos, from, to) {\n    switch (side) {\n        case -2 /* Side.Before */: return from < pos;\n        case -1 /* Side.AtOrBefore */: return to >= pos && from < pos;\n        case 0 /* Side.Around */: return from < pos && to > pos;\n        case 1 /* Side.AtOrAfter */: return from <= pos && to > pos;\n        case 2 /* Side.After */: return to > pos;\n        case 4 /* Side.DontCare */: return true;\n    }\n}\nfunction resolveNode(node, pos, side, overlays) {\n    var _a;\n    // Move up to a node that actually holds the position, if possible\n    while (node.from == node.to ||\n        (side < 1 ? node.from >= pos : node.from > pos) ||\n        (side > -1 ? node.to <= pos : node.to < pos)) {\n        let parent = !overlays && node instanceof TreeNode && node.index < 0 ? null : node.parent;\n        if (!parent)\n            return node;\n        node = parent;\n    }\n    let mode = overlays ? 0 : IterMode.IgnoreOverlays;\n    // Must go up out of overlays when those do not overlap with pos\n    if (overlays)\n        for (let scan = node, parent = scan.parent; parent; scan = parent, parent = scan.parent) {\n            if (scan instanceof TreeNode && scan.index < 0 && ((_a = parent.enter(pos, side, mode)) === null || _a === void 0 ? void 0 : _a.from) != scan.from)\n                node = parent;\n        }\n    for (;;) {\n        let inner = node.enter(pos, side, mode);\n        if (!inner)\n            return node;\n        node = inner;\n    }\n}\nclass BaseNode {\n    cursor(mode = 0) { return new TreeCursor(this, mode); }\n    getChild(type, before = null, after = null) {\n        let r = getChildren(this, type, before, after);\n        return r.length ? r[0] : null;\n    }\n    getChildren(type, before = null, after = null) {\n        return getChildren(this, type, before, after);\n    }\n    resolve(pos, side = 0) {\n        return resolveNode(this, pos, side, false);\n    }\n    resolveInner(pos, side = 0) {\n        return resolveNode(this, pos, side, true);\n    }\n    matchContext(context) {\n        return matchNodeContext(this, context);\n    }\n    enterUnfinishedNodesBefore(pos) {\n        let scan = this.childBefore(pos), node = this;\n        while (scan) {\n            let last = scan.lastChild;\n            if (!last || last.to != scan.to)\n                break;\n            if (last.type.isError && last.from == last.to) {\n                node = scan;\n                scan = last.prevSibling;\n            }\n            else {\n                scan = last;\n            }\n        }\n        return node;\n    }\n    get node() { return this; }\n    get next() { return this.parent; }\n}\nclass TreeNode extends BaseNode {\n    constructor(_tree, from, \n    // Index in parent node, set to -1 if the node is not a direct child of _parent.node (overlay)\n    index, _parent) {\n        super();\n        this._tree = _tree;\n        this.from = from;\n        this.index = index;\n        this._parent = _parent;\n    }\n    get type() { return this._tree.type; }\n    get name() { return this._tree.type.name; }\n    get to() { return this.from + this._tree.length; }\n    nextChild(i, dir, pos, side, mode = 0) {\n        for (let parent = this;;) {\n            for (let { children, positions } = parent._tree, e = dir > 0 ? children.length : -1; i != e; i += dir) {\n                let next = children[i], start = positions[i] + parent.from;\n                if (!checkSide(side, pos, start, start + next.length))\n                    continue;\n                if (next instanceof TreeBuffer) {\n                    if (mode & IterMode.ExcludeBuffers)\n                        continue;\n                    let index = next.findChild(0, next.buffer.length, dir, pos - start, side);\n                    if (index > -1)\n                        return new BufferNode(new BufferContext(parent, next, i, start), null, index);\n                }\n                else if ((mode & IterMode.IncludeAnonymous) || (!next.type.isAnonymous || hasChild(next))) {\n                    let mounted;\n                    if (!(mode & IterMode.IgnoreMounts) && (mounted = MountedTree.get(next)) && !mounted.overlay)\n                        return new TreeNode(mounted.tree, start, i, parent);\n                    let inner = new TreeNode(next, start, i, parent);\n                    return (mode & IterMode.IncludeAnonymous) || !inner.type.isAnonymous ? inner\n                        : inner.nextChild(dir < 0 ? next.children.length - 1 : 0, dir, pos, side);\n                }\n            }\n            if ((mode & IterMode.IncludeAnonymous) || !parent.type.isAnonymous)\n                return null;\n            if (parent.index >= 0)\n                i = parent.index + dir;\n            else\n                i = dir < 0 ? -1 : parent._parent._tree.children.length;\n            parent = parent._parent;\n            if (!parent)\n                return null;\n        }\n    }\n    get firstChild() { return this.nextChild(0, 1, 0, 4 /* Side.DontCare */); }\n    get lastChild() { return this.nextChild(this._tree.children.length - 1, -1, 0, 4 /* Side.DontCare */); }\n    childAfter(pos) { return this.nextChild(0, 1, pos, 2 /* Side.After */); }\n    childBefore(pos) { return this.nextChild(this._tree.children.length - 1, -1, pos, -2 /* Side.Before */); }\n    enter(pos, side, mode = 0) {\n        let mounted;\n        if (!(mode & IterMode.IgnoreOverlays) && (mounted = MountedTree.get(this._tree)) && mounted.overlay) {\n            let rPos = pos - this.from;\n            for (let { from, to } of mounted.overlay) {\n                if ((side > 0 ? from <= rPos : from < rPos) &&\n                    (side < 0 ? to >= rPos : to > rPos))\n                    return new TreeNode(mounted.tree, mounted.overlay[0].from + this.from, -1, this);\n            }\n        }\n        return this.nextChild(0, 1, pos, side, mode);\n    }\n    nextSignificantParent() {\n        let val = this;\n        while (val.type.isAnonymous && val._parent)\n            val = val._parent;\n        return val;\n    }\n    get parent() {\n        return this._parent ? this._parent.nextSignificantParent() : null;\n    }\n    get nextSibling() {\n        return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4 /* Side.DontCare */) : null;\n    }\n    get prevSibling() {\n        return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4 /* Side.DontCare */) : null;\n    }\n    get tree() { return this._tree; }\n    toTree() { return this._tree; }\n    /**\n    @internal\n    */\n    toString() { return this._tree.toString(); }\n}\nfunction getChildren(node, type, before, after) {\n    let cur = node.cursor(), result = [];\n    if (!cur.firstChild())\n        return result;\n    if (before != null)\n        for (let found = false; !found;) {\n            found = cur.type.is(before);\n            if (!cur.nextSibling())\n                return result;\n        }\n    for (;;) {\n        if (after != null && cur.type.is(after))\n            return result;\n        if (cur.type.is(type))\n            result.push(cur.node);\n        if (!cur.nextSibling())\n            return after == null ? result : [];\n    }\n}\nfunction matchNodeContext(node, context, i = context.length - 1) {\n    for (let p = node.parent; i >= 0; p = p.parent) {\n        if (!p)\n            return false;\n        if (!p.type.isAnonymous) {\n            if (context[i] && context[i] != p.name)\n                return false;\n            i--;\n        }\n    }\n    return true;\n}\nclass BufferContext {\n    constructor(parent, buffer, index, start) {\n        this.parent = parent;\n        this.buffer = buffer;\n        this.index = index;\n        this.start = start;\n    }\n}\nclass BufferNode extends BaseNode {\n    get name() { return this.type.name; }\n    get from() { return this.context.start + this.context.buffer.buffer[this.index + 1]; }\n    get to() { return this.context.start + this.context.buffer.buffer[this.index + 2]; }\n    constructor(context, _parent, index) {\n        super();\n        this.context = context;\n        this._parent = _parent;\n        this.index = index;\n        this.type = context.buffer.set.types[context.buffer.buffer[index]];\n    }\n    child(dir, pos, side) {\n        let { buffer } = this.context;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.context.start, side);\n        return index < 0 ? null : new BufferNode(this.context, this, index);\n    }\n    get firstChild() { return this.child(1, 0, 4 /* Side.DontCare */); }\n    get lastChild() { return this.child(-1, 0, 4 /* Side.DontCare */); }\n    childAfter(pos) { return this.child(1, pos, 2 /* Side.After */); }\n    childBefore(pos) { return this.child(-1, pos, -2 /* Side.Before */); }\n    enter(pos, side, mode = 0) {\n        if (mode & IterMode.ExcludeBuffers)\n            return null;\n        let { buffer } = this.context;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], side > 0 ? 1 : -1, pos - this.context.start, side);\n        return index < 0 ? null : new BufferNode(this.context, this, index);\n    }\n    get parent() {\n        return this._parent || this.context.parent.nextSignificantParent();\n    }\n    externalSibling(dir) {\n        return this._parent ? null : this.context.parent.nextChild(this.context.index + dir, dir, 0, 4 /* Side.DontCare */);\n    }\n    get nextSibling() {\n        let { buffer } = this.context;\n        let after = buffer.buffer[this.index + 3];\n        if (after < (this._parent ? buffer.buffer[this._parent.index + 3] : buffer.buffer.length))\n            return new BufferNode(this.context, this._parent, after);\n        return this.externalSibling(1);\n    }\n    get prevSibling() {\n        let { buffer } = this.context;\n        let parentStart = this._parent ? this._parent.index + 4 : 0;\n        if (this.index == parentStart)\n            return this.externalSibling(-1);\n        return new BufferNode(this.context, this._parent, buffer.findChild(parentStart, this.index, -1, 0, 4 /* Side.DontCare */));\n    }\n    get tree() { return null; }\n    toTree() {\n        let children = [], positions = [];\n        let { buffer } = this.context;\n        let startI = this.index + 4, endI = buffer.buffer[this.index + 3];\n        if (endI > startI) {\n            let from = buffer.buffer[this.index + 1];\n            children.push(buffer.slice(startI, endI, from));\n            positions.push(0);\n        }\n        return new Tree(this.type, children, positions, this.to - this.from);\n    }\n    /**\n    @internal\n    */\n    toString() { return this.context.buffer.childString(this.index); }\n}\nfunction iterStack(heads) {\n    if (!heads.length)\n        return null;\n    let pick = 0, picked = heads[0];\n    for (let i = 1; i < heads.length; i++) {\n        let node = heads[i];\n        if (node.from > picked.from || node.to < picked.to) {\n            picked = node;\n            pick = i;\n        }\n    }\n    let next = picked instanceof TreeNode && picked.index < 0 ? null : picked.parent;\n    let newHeads = heads.slice();\n    if (next)\n        newHeads[pick] = next;\n    else\n        newHeads.splice(pick, 1);\n    return new StackIterator(newHeads, picked);\n}\nclass StackIterator {\n    constructor(heads, node) {\n        this.heads = heads;\n        this.node = node;\n    }\n    get next() { return iterStack(this.heads); }\n}\nfunction stackIterator(tree, pos, side) {\n    let inner = tree.resolveInner(pos, side), layers = null;\n    for (let scan = inner instanceof TreeNode ? inner : inner.context.parent; scan; scan = scan.parent) {\n        if (scan.index < 0) { // This is an overlay root\n            let parent = scan.parent;\n            (layers || (layers = [inner])).push(parent.resolve(pos, side));\n            scan = parent;\n        }\n        else {\n            let mount = MountedTree.get(scan.tree);\n            // Relevant overlay branching off\n            if (mount && mount.overlay && mount.overlay[0].from <= pos && mount.overlay[mount.overlay.length - 1].to >= pos) {\n                let root = new TreeNode(mount.tree, mount.overlay[0].from + scan.from, -1, scan);\n                (layers || (layers = [inner])).push(resolveNode(root, pos, side, false));\n            }\n        }\n    }\n    return layers ? iterStack(layers) : inner;\n}\n/**\nA tree cursor object focuses on a given node in a syntax tree, and\nallows you to move to adjacent nodes.\n*/\nclass TreeCursor {\n    /**\n    Shorthand for `.type.name`.\n    */\n    get name() { return this.type.name; }\n    /**\n    @internal\n    */\n    constructor(node, \n    /**\n    @internal\n    */\n    mode = 0) {\n        this.mode = mode;\n        /**\n        @internal\n        */\n        this.buffer = null;\n        this.stack = [];\n        /**\n        @internal\n        */\n        this.index = 0;\n        this.bufferNode = null;\n        if (node instanceof TreeNode) {\n            this.yieldNode(node);\n        }\n        else {\n            this._tree = node.context.parent;\n            this.buffer = node.context;\n            for (let n = node._parent; n; n = n._parent)\n                this.stack.unshift(n.index);\n            this.bufferNode = node;\n            this.yieldBuf(node.index);\n        }\n    }\n    yieldNode(node) {\n        if (!node)\n            return false;\n        this._tree = node;\n        this.type = node.type;\n        this.from = node.from;\n        this.to = node.to;\n        return true;\n    }\n    yieldBuf(index, type) {\n        this.index = index;\n        let { start, buffer } = this.buffer;\n        this.type = type || buffer.set.types[buffer.buffer[index]];\n        this.from = start + buffer.buffer[index + 1];\n        this.to = start + buffer.buffer[index + 2];\n        return true;\n    }\n    /**\n    @internal\n    */\n    yield(node) {\n        if (!node)\n            return false;\n        if (node instanceof TreeNode) {\n            this.buffer = null;\n            return this.yieldNode(node);\n        }\n        this.buffer = node.context;\n        return this.yieldBuf(node.index, node.type);\n    }\n    /**\n    @internal\n    */\n    toString() {\n        return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();\n    }\n    /**\n    @internal\n    */\n    enterChild(dir, pos, side) {\n        if (!this.buffer)\n            return this.yield(this._tree.nextChild(dir < 0 ? this._tree._tree.children.length - 1 : 0, dir, pos, side, this.mode));\n        let { buffer } = this.buffer;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.buffer.start, side);\n        if (index < 0)\n            return false;\n        this.stack.push(this.index);\n        return this.yieldBuf(index);\n    }\n    /**\n    Move the cursor to this node's first child. When this returns\n    false, the node has no child, and the cursor has not been moved.\n    */\n    firstChild() { return this.enterChild(1, 0, 4 /* Side.DontCare */); }\n    /**\n    Move the cursor to this node's last child.\n    */\n    lastChild() { return this.enterChild(-1, 0, 4 /* Side.DontCare */); }\n    /**\n    Move the cursor to the first child that ends after `pos`.\n    */\n    childAfter(pos) { return this.enterChild(1, pos, 2 /* Side.After */); }\n    /**\n    Move to the last child that starts before `pos`.\n    */\n    childBefore(pos) { return this.enterChild(-1, pos, -2 /* Side.Before */); }\n    /**\n    Move the cursor to the child around `pos`. If side is -1 the\n    child may end at that position, when 1 it may start there. This\n    will also enter [overlaid](#common.MountedTree.overlay)\n    [mounted](#common.NodeProp^mounted) trees unless `overlays` is\n    set to false.\n    */\n    enter(pos, side, mode = this.mode) {\n        if (!this.buffer)\n            return this.yield(this._tree.enter(pos, side, mode));\n        return mode & IterMode.ExcludeBuffers ? false : this.enterChild(1, pos, side);\n    }\n    /**\n    Move to the node's parent node, if this isn't the top node.\n    */\n    parent() {\n        if (!this.buffer)\n            return this.yieldNode((this.mode & IterMode.IncludeAnonymous) ? this._tree._parent : this._tree.parent);\n        if (this.stack.length)\n            return this.yieldBuf(this.stack.pop());\n        let parent = (this.mode & IterMode.IncludeAnonymous) ? this.buffer.parent : this.buffer.parent.nextSignificantParent();\n        this.buffer = null;\n        return this.yieldNode(parent);\n    }\n    /**\n    @internal\n    */\n    sibling(dir) {\n        if (!this.buffer)\n            return !this._tree._parent ? false\n                : this.yield(this._tree.index < 0 ? null\n                    : this._tree._parent.nextChild(this._tree.index + dir, dir, 0, 4 /* Side.DontCare */, this.mode));\n        let { buffer } = this.buffer, d = this.stack.length - 1;\n        if (dir < 0) {\n            let parentStart = d < 0 ? 0 : this.stack[d] + 4;\n            if (this.index != parentStart)\n                return this.yieldBuf(buffer.findChild(parentStart, this.index, -1, 0, 4 /* Side.DontCare */));\n        }\n        else {\n            let after = buffer.buffer[this.index + 3];\n            if (after < (d < 0 ? buffer.buffer.length : buffer.buffer[this.stack[d] + 3]))\n                return this.yieldBuf(after);\n        }\n        return d < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + dir, dir, 0, 4 /* Side.DontCare */, this.mode)) : false;\n    }\n    /**\n    Move to this node's next sibling, if any.\n    */\n    nextSibling() { return this.sibling(1); }\n    /**\n    Move to this node's previous sibling, if any.\n    */\n    prevSibling() { return this.sibling(-1); }\n    atLastNode(dir) {\n        let index, parent, { buffer } = this;\n        if (buffer) {\n            if (dir > 0) {\n                if (this.index < buffer.buffer.buffer.length)\n                    return false;\n            }\n            else {\n                for (let i = 0; i < this.index; i++)\n                    if (buffer.buffer.buffer[i + 3] < this.index)\n                        return false;\n            }\n            ({ index, parent } = buffer);\n        }\n        else {\n            ({ index, _parent: parent } = this._tree);\n        }\n        for (; parent; { index, _parent: parent } = parent) {\n            if (index > -1)\n                for (let i = index + dir, e = dir < 0 ? -1 : parent._tree.children.length; i != e; i += dir) {\n                    let child = parent._tree.children[i];\n                    if ((this.mode & IterMode.IncludeAnonymous) ||\n                        child instanceof TreeBuffer ||\n                        !child.type.isAnonymous ||\n                        hasChild(child))\n                        return false;\n                }\n        }\n        return true;\n    }\n    move(dir, enter) {\n        if (enter && this.enterChild(dir, 0, 4 /* Side.DontCare */))\n            return true;\n        for (;;) {\n            if (this.sibling(dir))\n                return true;\n            if (this.atLastNode(dir) || !this.parent())\n                return false;\n        }\n    }\n    /**\n    Move to the next node in a\n    [pre-order](https://en.wikipedia.org/wiki/Tree_traversal#Pre-order,_NLR)\n    traversal, going from a node to its first child or, if the\n    current node is empty or `enter` is false, its next sibling or\n    the next sibling of the first parent node that has one.\n    */\n    next(enter = true) { return this.move(1, enter); }\n    /**\n    Move to the next node in a last-to-first pre-order traveral. A\n    node is followed by its last child or, if it has none, its\n    previous sibling or the previous sibling of the first parent\n    node that has one.\n    */\n    prev(enter = true) { return this.move(-1, enter); }\n    /**\n    Move the cursor to the innermost node that covers `pos`. If\n    `side` is -1, it will enter nodes that end at `pos`. If it is 1,\n    it will enter nodes that start at `pos`.\n    */\n    moveTo(pos, side = 0) {\n        // Move up to a node that actually holds the position, if possible\n        while (this.from == this.to ||\n            (side < 1 ? this.from >= pos : this.from > pos) ||\n            (side > -1 ? this.to <= pos : this.to < pos))\n            if (!this.parent())\n                break;\n        // Then scan down into child nodes as far as possible\n        while (this.enterChild(1, pos, side)) { }\n        return this;\n    }\n    /**\n    Get a [syntax node](#common.SyntaxNode) at the cursor's current\n    position.\n    */\n    get node() {\n        if (!this.buffer)\n            return this._tree;\n        let cache = this.bufferNode, result = null, depth = 0;\n        if (cache && cache.context == this.buffer) {\n            scan: for (let index = this.index, d = this.stack.length; d >= 0;) {\n                for (let c = cache; c; c = c._parent)\n                    if (c.index == index) {\n                        if (index == this.index)\n                            return c;\n                        result = c;\n                        depth = d + 1;\n                        break scan;\n                    }\n                index = this.stack[--d];\n            }\n        }\n        for (let i = depth; i < this.stack.length; i++)\n            result = new BufferNode(this.buffer, result, this.stack[i]);\n        return this.bufferNode = new BufferNode(this.buffer, result, this.index);\n    }\n    /**\n    Get the [tree](#common.Tree) that represents the current node, if\n    any. Will return null when the node is in a [tree\n    buffer](#common.TreeBuffer).\n    */\n    get tree() {\n        return this.buffer ? null : this._tree._tree;\n    }\n    /**\n    Iterate over the current node and all its descendants, calling\n    `enter` when entering a node and `leave`, if given, when leaving\n    one. When `enter` returns `false`, any children of that node are\n    skipped, and `leave` isn't called for it.\n    */\n    iterate(enter, leave) {\n        for (let depth = 0;;) {\n            let mustLeave = false;\n            if (this.type.isAnonymous || enter(this) !== false) {\n                if (this.firstChild()) {\n                    depth++;\n                    continue;\n                }\n                if (!this.type.isAnonymous)\n                    mustLeave = true;\n            }\n            for (;;) {\n                if (mustLeave && leave)\n                    leave(this);\n                mustLeave = this.type.isAnonymous;\n                if (this.nextSibling())\n                    break;\n                if (!depth)\n                    return;\n                this.parent();\n                depth--;\n                mustLeave = true;\n            }\n        }\n    }\n    /**\n    Test whether the current node matches a given context—a sequence\n    of direct parent node names. Empty strings in the context array\n    are treated as wildcards.\n    */\n    matchContext(context) {\n        if (!this.buffer)\n            return matchNodeContext(this.node, context);\n        let { buffer } = this.buffer, { types } = buffer.set;\n        for (let i = context.length - 1, d = this.stack.length - 1; i >= 0; d--) {\n            if (d < 0)\n                return matchNodeContext(this.node, context, i);\n            let type = types[buffer.buffer[this.stack[d]]];\n            if (!type.isAnonymous) {\n                if (context[i] && context[i] != type.name)\n                    return false;\n                i--;\n            }\n        }\n        return true;\n    }\n}\nfunction hasChild(tree) {\n    return tree.children.some(ch => ch instanceof TreeBuffer || !ch.type.isAnonymous || hasChild(ch));\n}\nfunction buildTree(data) {\n    var _a;\n    let { buffer, nodeSet, maxBufferLength = DefaultBufferLength, reused = [], minRepeatType = nodeSet.types.length } = data;\n    let cursor = Array.isArray(buffer) ? new FlatBufferCursor(buffer, buffer.length) : buffer;\n    let types = nodeSet.types;\n    let contextHash = 0, lookAhead = 0;\n    function takeNode(parentStart, minPos, children, positions, inRepeat, depth) {\n        let { id, start, end, size } = cursor;\n        let lookAheadAtStart = lookAhead;\n        while (size < 0) {\n            cursor.next();\n            if (size == -1 /* SpecialRecord.Reuse */) {\n                let node = reused[id];\n                children.push(node);\n                positions.push(start - parentStart);\n                return;\n            }\n            else if (size == -3 /* SpecialRecord.ContextChange */) { // Context change\n                contextHash = id;\n                return;\n            }\n            else if (size == -4 /* SpecialRecord.LookAhead */) {\n                lookAhead = id;\n                return;\n            }\n            else {\n                throw new RangeError(`Unrecognized record size: ${size}`);\n            }\n        }\n        let type = types[id], node, buffer;\n        let startPos = start - parentStart;\n        if (end - start <= maxBufferLength && (buffer = findBufferSize(cursor.pos - minPos, inRepeat))) {\n            // Small enough for a buffer, and no reused nodes inside\n            let data = new Uint16Array(buffer.size - buffer.skip);\n            let endPos = cursor.pos - buffer.size, index = data.length;\n            while (cursor.pos > endPos)\n                index = copyToBuffer(buffer.start, data, index);\n            node = new TreeBuffer(data, end - buffer.start, nodeSet);\n            startPos = buffer.start - parentStart;\n        }\n        else { // Make it a node\n            let endPos = cursor.pos - size;\n            cursor.next();\n            let localChildren = [], localPositions = [];\n            let localInRepeat = id >= minRepeatType ? id : -1;\n            let lastGroup = 0, lastEnd = end;\n            while (cursor.pos > endPos) {\n                if (localInRepeat >= 0 && cursor.id == localInRepeat && cursor.size >= 0) {\n                    if (cursor.end <= lastEnd - maxBufferLength) {\n                        makeRepeatLeaf(localChildren, localPositions, start, lastGroup, cursor.end, lastEnd, localInRepeat, lookAheadAtStart);\n                        lastGroup = localChildren.length;\n                        lastEnd = cursor.end;\n                    }\n                    cursor.next();\n                }\n                else if (depth > 2500 /* CutOff.Depth */) {\n                    takeFlatNode(start, endPos, localChildren, localPositions);\n                }\n                else {\n                    takeNode(start, endPos, localChildren, localPositions, localInRepeat, depth + 1);\n                }\n            }\n            if (localInRepeat >= 0 && lastGroup > 0 && lastGroup < localChildren.length)\n                makeRepeatLeaf(localChildren, localPositions, start, lastGroup, start, lastEnd, localInRepeat, lookAheadAtStart);\n            localChildren.reverse();\n            localPositions.reverse();\n            if (localInRepeat > -1 && lastGroup > 0) {\n                let make = makeBalanced(type);\n                node = balanceRange(type, localChildren, localPositions, 0, localChildren.length, 0, end - start, make, make);\n            }\n            else {\n                node = makeTree(type, localChildren, localPositions, end - start, lookAheadAtStart - end);\n            }\n        }\n        children.push(node);\n        positions.push(startPos);\n    }\n    function takeFlatNode(parentStart, minPos, children, positions) {\n        let nodes = []; // Temporary, inverted array of leaf nodes found, with absolute positions\n        let nodeCount = 0, stopAt = -1;\n        while (cursor.pos > minPos) {\n            let { id, start, end, size } = cursor;\n            if (size > 4) { // Not a leaf\n                cursor.next();\n            }\n            else if (stopAt > -1 && start < stopAt) {\n                break;\n            }\n            else {\n                if (stopAt < 0)\n                    stopAt = end - maxBufferLength;\n                nodes.push(id, start, end);\n                nodeCount++;\n                cursor.next();\n            }\n        }\n        if (nodeCount) {\n            let buffer = new Uint16Array(nodeCount * 4);\n            let start = nodes[nodes.length - 2];\n            for (let i = nodes.length - 3, j = 0; i >= 0; i -= 3) {\n                buffer[j++] = nodes[i];\n                buffer[j++] = nodes[i + 1] - start;\n                buffer[j++] = nodes[i + 2] - start;\n                buffer[j++] = j;\n            }\n            children.push(new TreeBuffer(buffer, nodes[2] - start, nodeSet));\n            positions.push(start - parentStart);\n        }\n    }\n    function makeBalanced(type) {\n        return (children, positions, length) => {\n            let lookAhead = 0, lastI = children.length - 1, last, lookAheadProp;\n            if (lastI >= 0 && (last = children[lastI]) instanceof Tree) {\n                if (!lastI && last.type == type && last.length == length)\n                    return last;\n                if (lookAheadProp = last.prop(NodeProp.lookAhead))\n                    lookAhead = positions[lastI] + last.length + lookAheadProp;\n            }\n            return makeTree(type, children, positions, length, lookAhead);\n        };\n    }\n    function makeRepeatLeaf(children, positions, base, i, from, to, type, lookAhead) {\n        let localChildren = [], localPositions = [];\n        while (children.length > i) {\n            localChildren.push(children.pop());\n            localPositions.push(positions.pop() + base - from);\n        }\n        children.push(makeTree(nodeSet.types[type], localChildren, localPositions, to - from, lookAhead - to));\n        positions.push(from - base);\n    }\n    function makeTree(type, children, positions, length, lookAhead = 0, props) {\n        if (contextHash) {\n            let pair = [NodeProp.contextHash, contextHash];\n            props = props ? [pair].concat(props) : [pair];\n        }\n        if (lookAhead > 25) {\n            let pair = [NodeProp.lookAhead, lookAhead];\n            props = props ? [pair].concat(props) : [pair];\n        }\n        return new Tree(type, children, positions, length, props);\n    }\n    function findBufferSize(maxSize, inRepeat) {\n        // Scan through the buffer to find previous siblings that fit\n        // together in a TreeBuffer, and don't contain any reused nodes\n        // (which can't be stored in a buffer).\n        // If `inRepeat` is > -1, ignore node boundaries of that type for\n        // nesting, but make sure the end falls either at the start\n        // (`maxSize`) or before such a node.\n        let fork = cursor.fork();\n        let size = 0, start = 0, skip = 0, minStart = fork.end - maxBufferLength;\n        let result = { size: 0, start: 0, skip: 0 };\n        scan: for (let minPos = fork.pos - maxSize; fork.pos > minPos;) {\n            let nodeSize = fork.size;\n            // Pretend nested repeat nodes of the same type don't exist\n            if (fork.id == inRepeat && nodeSize >= 0) {\n                // Except that we store the current state as a valid return\n                // value.\n                result.size = size;\n                result.start = start;\n                result.skip = skip;\n                skip += 4;\n                size += 4;\n                fork.next();\n                continue;\n            }\n            let startPos = fork.pos - nodeSize;\n            if (nodeSize < 0 || startPos < minPos || fork.start < minStart)\n                break;\n            let localSkipped = fork.id >= minRepeatType ? 4 : 0;\n            let nodeStart = fork.start;\n            fork.next();\n            while (fork.pos > startPos) {\n                if (fork.size < 0) {\n                    if (fork.size == -3 /* SpecialRecord.ContextChange */)\n                        localSkipped += 4;\n                    else\n                        break scan;\n                }\n                else if (fork.id >= minRepeatType) {\n                    localSkipped += 4;\n                }\n                fork.next();\n            }\n            start = nodeStart;\n            size += nodeSize;\n            skip += localSkipped;\n        }\n        if (inRepeat < 0 || size == maxSize) {\n            result.size = size;\n            result.start = start;\n            result.skip = skip;\n        }\n        return result.size > 4 ? result : undefined;\n    }\n    function copyToBuffer(bufferStart, buffer, index) {\n        let { id, start, end, size } = cursor;\n        cursor.next();\n        if (size >= 0 && id < minRepeatType) {\n            let startIndex = index;\n            if (size > 4) {\n                let endPos = cursor.pos - (size - 4);\n                while (cursor.pos > endPos)\n                    index = copyToBuffer(bufferStart, buffer, index);\n            }\n            buffer[--index] = startIndex;\n            buffer[--index] = end - bufferStart;\n            buffer[--index] = start - bufferStart;\n            buffer[--index] = id;\n        }\n        else if (size == -3 /* SpecialRecord.ContextChange */) {\n            contextHash = id;\n        }\n        else if (size == -4 /* SpecialRecord.LookAhead */) {\n            lookAhead = id;\n        }\n        return index;\n    }\n    let children = [], positions = [];\n    while (cursor.pos > 0)\n        takeNode(data.start || 0, data.bufferStart || 0, children, positions, -1, 0);\n    let length = (_a = data.length) !== null && _a !== void 0 ? _a : (children.length ? positions[0] + children[0].length : 0);\n    return new Tree(types[data.topID], children.reverse(), positions.reverse(), length);\n}\nconst nodeSizeCache = new WeakMap;\nfunction nodeSize(balanceType, node) {\n    if (!balanceType.isAnonymous || node instanceof TreeBuffer || node.type != balanceType)\n        return 1;\n    let size = nodeSizeCache.get(node);\n    if (size == null) {\n        size = 1;\n        for (let child of node.children) {\n            if (child.type != balanceType || !(child instanceof Tree)) {\n                size = 1;\n                break;\n            }\n            size += nodeSize(balanceType, child);\n        }\n        nodeSizeCache.set(node, size);\n    }\n    return size;\n}\nfunction balanceRange(\n// The type the balanced tree's inner nodes.\nbalanceType, \n// The direct children and their positions\nchildren, positions, \n// The index range in children/positions to use\nfrom, to, \n// The start position of the nodes, relative to their parent.\nstart, \n// Length of the outer node\nlength, \n// Function to build the top node of the balanced tree\nmkTop, \n// Function to build internal nodes for the balanced tree\nmkTree) {\n    let total = 0;\n    for (let i = from; i < to; i++)\n        total += nodeSize(balanceType, children[i]);\n    let maxChild = Math.ceil((total * 1.5) / 8 /* Balance.BranchFactor */);\n    let localChildren = [], localPositions = [];\n    function divide(children, positions, from, to, offset) {\n        for (let i = from; i < to;) {\n            let groupFrom = i, groupStart = positions[i], groupSize = nodeSize(balanceType, children[i]);\n            i++;\n            for (; i < to; i++) {\n                let nextSize = nodeSize(balanceType, children[i]);\n                if (groupSize + nextSize >= maxChild)\n                    break;\n                groupSize += nextSize;\n            }\n            if (i == groupFrom + 1) {\n                if (groupSize > maxChild) {\n                    let only = children[groupFrom]; // Only trees can have a size > 1\n                    divide(only.children, only.positions, 0, only.children.length, positions[groupFrom] + offset);\n                    continue;\n                }\n                localChildren.push(children[groupFrom]);\n            }\n            else {\n                let length = positions[i - 1] + children[i - 1].length - groupStart;\n                localChildren.push(balanceRange(balanceType, children, positions, groupFrom, i, groupStart, length, null, mkTree));\n            }\n            localPositions.push(groupStart + offset - start);\n        }\n    }\n    divide(children, positions, from, to, 0);\n    return (mkTop || mkTree)(localChildren, localPositions, length);\n}\n/**\nProvides a way to associate values with pieces of trees. As long\nas that part of the tree is reused, the associated values can be\nretrieved from an updated tree.\n*/\nclass NodeWeakMap {\n    constructor() {\n        this.map = new WeakMap();\n    }\n    setBuffer(buffer, index, value) {\n        let inner = this.map.get(buffer);\n        if (!inner)\n            this.map.set(buffer, inner = new Map);\n        inner.set(index, value);\n    }\n    getBuffer(buffer, index) {\n        let inner = this.map.get(buffer);\n        return inner && inner.get(index);\n    }\n    /**\n    Set the value for this syntax node.\n    */\n    set(node, value) {\n        if (node instanceof BufferNode)\n            this.setBuffer(node.context.buffer, node.index, value);\n        else if (node instanceof TreeNode)\n            this.map.set(node.tree, value);\n    }\n    /**\n    Retrieve value for this syntax node, if it exists in the map.\n    */\n    get(node) {\n        return node instanceof BufferNode ? this.getBuffer(node.context.buffer, node.index)\n            : node instanceof TreeNode ? this.map.get(node.tree) : undefined;\n    }\n    /**\n    Set the value for the node that a cursor currently points to.\n    */\n    cursorSet(cursor, value) {\n        if (cursor.buffer)\n            this.setBuffer(cursor.buffer.buffer, cursor.index, value);\n        else\n            this.map.set(cursor.tree, value);\n    }\n    /**\n    Retrieve the value for the node that a cursor currently points\n    to.\n    */\n    cursorGet(cursor) {\n        return cursor.buffer ? this.getBuffer(cursor.buffer.buffer, cursor.index) : this.map.get(cursor.tree);\n    }\n}\n\n/**\nTree fragments are used during [incremental\nparsing](#common.Parser.startParse) to track parts of old trees\nthat can be reused in a new parse. An array of fragments is used\nto track regions of an old tree whose nodes might be reused in new\nparses. Use the static\n[`applyChanges`](#common.TreeFragment^applyChanges) method to\nupdate fragments for document changes.\n*/\nclass TreeFragment {\n    /**\n    Construct a tree fragment. You'll usually want to use\n    [`addTree`](#common.TreeFragment^addTree) and\n    [`applyChanges`](#common.TreeFragment^applyChanges) instead of\n    calling this directly.\n    */\n    constructor(\n    /**\n    The start of the unchanged range pointed to by this fragment.\n    This refers to an offset in the _updated_ document (as opposed\n    to the original tree).\n    */\n    from, \n    /**\n    The end of the unchanged range.\n    */\n    to, \n    /**\n    The tree that this fragment is based on.\n    */\n    tree, \n    /**\n    The offset between the fragment's tree and the document that\n    this fragment can be used against. Add this when going from\n    document to tree positions, subtract it to go from tree to\n    document positions.\n    */\n    offset, openStart = false, openEnd = false) {\n        this.from = from;\n        this.to = to;\n        this.tree = tree;\n        this.offset = offset;\n        this.open = (openStart ? 1 /* Open.Start */ : 0) | (openEnd ? 2 /* Open.End */ : 0);\n    }\n    /**\n    Whether the start of the fragment represents the start of a\n    parse, or the end of a change. (In the second case, it may not\n    be safe to reuse some nodes at the start, depending on the\n    parsing algorithm.)\n    */\n    get openStart() { return (this.open & 1 /* Open.Start */) > 0; }\n    /**\n    Whether the end of the fragment represents the end of a\n    full-document parse, or the start of a change.\n    */\n    get openEnd() { return (this.open & 2 /* Open.End */) > 0; }\n    /**\n    Create a set of fragments from a freshly parsed tree, or update\n    an existing set of fragments by replacing the ones that overlap\n    with a tree with content from the new tree. When `partial` is\n    true, the parse is treated as incomplete, and the resulting\n    fragment has [`openEnd`](#common.TreeFragment.openEnd) set to\n    true.\n    */\n    static addTree(tree, fragments = [], partial = false) {\n        let result = [new TreeFragment(0, tree.length, tree, 0, false, partial)];\n        for (let f of fragments)\n            if (f.to > tree.length)\n                result.push(f);\n        return result;\n    }\n    /**\n    Apply a set of edits to an array of fragments, removing or\n    splitting fragments as necessary to remove edited ranges, and\n    adjusting offsets for fragments that moved.\n    */\n    static applyChanges(fragments, changes, minGap = 128) {\n        if (!changes.length)\n            return fragments;\n        let result = [];\n        let fI = 1, nextF = fragments.length ? fragments[0] : null;\n        for (let cI = 0, pos = 0, off = 0;; cI++) {\n            let nextC = cI < changes.length ? changes[cI] : null;\n            let nextPos = nextC ? nextC.fromA : 1e9;\n            if (nextPos - pos >= minGap)\n                while (nextF && nextF.from < nextPos) {\n                    let cut = nextF;\n                    if (pos >= cut.from || nextPos <= cut.to || off) {\n                        let fFrom = Math.max(cut.from, pos) - off, fTo = Math.min(cut.to, nextPos) - off;\n                        cut = fFrom >= fTo ? null : new TreeFragment(fFrom, fTo, cut.tree, cut.offset + off, cI > 0, !!nextC);\n                    }\n                    if (cut)\n                        result.push(cut);\n                    if (nextF.to > nextPos)\n                        break;\n                    nextF = fI < fragments.length ? fragments[fI++] : null;\n                }\n            if (!nextC)\n                break;\n            pos = nextC.toA;\n            off = nextC.toA - nextC.toB;\n        }\n        return result;\n    }\n}\n/**\nA superclass that parsers should extend.\n*/\nclass Parser {\n    /**\n    Start a parse, returning a [partial parse](#common.PartialParse)\n    object. [`fragments`](#common.TreeFragment) can be passed in to\n    make the parse incremental.\n    \n    By default, the entire input is parsed. You can pass `ranges`,\n    which should be a sorted array of non-empty, non-overlapping\n    ranges, to parse only those ranges. The tree returned in that\n    case will start at `ranges[0].from`.\n    */\n    startParse(input, fragments, ranges) {\n        if (typeof input == \"string\")\n            input = new StringInput(input);\n        ranges = !ranges ? [new Range(0, input.length)] : ranges.length ? ranges.map(r => new Range(r.from, r.to)) : [new Range(0, 0)];\n        return this.createParse(input, fragments || [], ranges);\n    }\n    /**\n    Run a full parse, returning the resulting tree.\n    */\n    parse(input, fragments, ranges) {\n        let parse = this.startParse(input, fragments, ranges);\n        for (;;) {\n            let done = parse.advance();\n            if (done)\n                return done;\n        }\n    }\n}\nclass StringInput {\n    constructor(string) {\n        this.string = string;\n    }\n    get length() { return this.string.length; }\n    chunk(from) { return this.string.slice(from); }\n    get lineChunks() { return false; }\n    read(from, to) { return this.string.slice(from, to); }\n}\n\n/**\nCreate a parse wrapper that, after the inner parse completes,\nscans its tree for mixed language regions with the `nest`\nfunction, runs the resulting [inner parses](#common.NestedParse),\nand then [mounts](#common.NodeProp^mounted) their results onto the\ntree.\n*/\nfunction parseMixed(nest) {\n    return (parse, input, fragments, ranges) => new MixedParse(parse, nest, input, fragments, ranges);\n}\nclass InnerParse {\n    constructor(parser, parse, overlay, target, from) {\n        this.parser = parser;\n        this.parse = parse;\n        this.overlay = overlay;\n        this.target = target;\n        this.from = from;\n    }\n}\nfunction checkRanges(ranges) {\n    if (!ranges.length || ranges.some(r => r.from >= r.to))\n        throw new RangeError(\"Invalid inner parse ranges given: \" + JSON.stringify(ranges));\n}\nclass ActiveOverlay {\n    constructor(parser, predicate, mounts, index, start, target, prev) {\n        this.parser = parser;\n        this.predicate = predicate;\n        this.mounts = mounts;\n        this.index = index;\n        this.start = start;\n        this.target = target;\n        this.prev = prev;\n        this.depth = 0;\n        this.ranges = [];\n    }\n}\nconst stoppedInner = new NodeProp({ perNode: true });\nclass MixedParse {\n    constructor(base, nest, input, fragments, ranges) {\n        this.nest = nest;\n        this.input = input;\n        this.fragments = fragments;\n        this.ranges = ranges;\n        this.inner = [];\n        this.innerDone = 0;\n        this.baseTree = null;\n        this.stoppedAt = null;\n        this.baseParse = base;\n    }\n    advance() {\n        if (this.baseParse) {\n            let done = this.baseParse.advance();\n            if (!done)\n                return null;\n            this.baseParse = null;\n            this.baseTree = done;\n            this.startInner();\n            if (this.stoppedAt != null)\n                for (let inner of this.inner)\n                    inner.parse.stopAt(this.stoppedAt);\n        }\n        if (this.innerDone == this.inner.length) {\n            let result = this.baseTree;\n            if (this.stoppedAt != null)\n                result = new Tree(result.type, result.children, result.positions, result.length, result.propValues.concat([[stoppedInner, this.stoppedAt]]));\n            return result;\n        }\n        let inner = this.inner[this.innerDone], done = inner.parse.advance();\n        if (done) {\n            this.innerDone++;\n            // This is a somewhat dodgy but super helpful hack where we\n            // patch up nodes created by the inner parse (and thus\n            // presumably not aliased anywhere else) to hold the information\n            // about the inner parse.\n            let props = Object.assign(Object.create(null), inner.target.props);\n            props[NodeProp.mounted.id] = new MountedTree(done, inner.overlay, inner.parser);\n            inner.target.props = props;\n        }\n        return null;\n    }\n    get parsedPos() {\n        if (this.baseParse)\n            return 0;\n        let pos = this.input.length;\n        for (let i = this.innerDone; i < this.inner.length; i++) {\n            if (this.inner[i].from < pos)\n                pos = Math.min(pos, this.inner[i].parse.parsedPos);\n        }\n        return pos;\n    }\n    stopAt(pos) {\n        this.stoppedAt = pos;\n        if (this.baseParse)\n            this.baseParse.stopAt(pos);\n        else\n            for (let i = this.innerDone; i < this.inner.length; i++)\n                this.inner[i].parse.stopAt(pos);\n    }\n    startInner() {\n        let fragmentCursor = new FragmentCursor(this.fragments);\n        let overlay = null;\n        let covered = null;\n        let cursor = new TreeCursor(new TreeNode(this.baseTree, this.ranges[0].from, 0, null), IterMode.IncludeAnonymous | IterMode.IgnoreMounts);\n        scan: for (let nest, isCovered;;) {\n            let enter = true, range;\n            if (this.stoppedAt != null && cursor.from >= this.stoppedAt) {\n                enter = false;\n            }\n            else if (fragmentCursor.hasNode(cursor)) {\n                if (overlay) {\n                    let match = overlay.mounts.find(m => m.frag.from <= cursor.from && m.frag.to >= cursor.to && m.mount.overlay);\n                    if (match)\n                        for (let r of match.mount.overlay) {\n                            let from = r.from + match.pos, to = r.to + match.pos;\n                            if (from >= cursor.from && to <= cursor.to && !overlay.ranges.some(r => r.from < to && r.to > from))\n                                overlay.ranges.push({ from, to });\n                        }\n                }\n                enter = false;\n            }\n            else if (covered && (isCovered = checkCover(covered.ranges, cursor.from, cursor.to))) {\n                enter = isCovered != 2 /* Cover.Full */;\n            }\n            else if (!cursor.type.isAnonymous && (nest = this.nest(cursor, this.input)) &&\n                (cursor.from < cursor.to || !nest.overlay)) {\n                if (!cursor.tree)\n                    materialize(cursor);\n                let oldMounts = fragmentCursor.findMounts(cursor.from, nest.parser);\n                if (typeof nest.overlay == \"function\") {\n                    overlay = new ActiveOverlay(nest.parser, nest.overlay, oldMounts, this.inner.length, cursor.from, cursor.tree, overlay);\n                }\n                else {\n                    let ranges = punchRanges(this.ranges, nest.overlay ||\n                        (cursor.from < cursor.to ? [new Range(cursor.from, cursor.to)] : []));\n                    if (ranges.length)\n                        checkRanges(ranges);\n                    if (ranges.length || !nest.overlay)\n                        this.inner.push(new InnerParse(nest.parser, ranges.length ? nest.parser.startParse(this.input, enterFragments(oldMounts, ranges), ranges)\n                            : nest.parser.startParse(\"\"), nest.overlay ? nest.overlay.map(r => new Range(r.from - cursor.from, r.to - cursor.from)) : null, cursor.tree, ranges.length ? ranges[0].from : cursor.from));\n                    if (!nest.overlay)\n                        enter = false;\n                    else if (ranges.length)\n                        covered = { ranges, depth: 0, prev: covered };\n                }\n            }\n            else if (overlay && (range = overlay.predicate(cursor))) {\n                if (range === true)\n                    range = new Range(cursor.from, cursor.to);\n                if (range.from < range.to)\n                    overlay.ranges.push(range);\n            }\n            if (enter && cursor.firstChild()) {\n                if (overlay)\n                    overlay.depth++;\n                if (covered)\n                    covered.depth++;\n            }\n            else {\n                for (;;) {\n                    if (cursor.nextSibling())\n                        break;\n                    if (!cursor.parent())\n                        break scan;\n                    if (overlay && !--overlay.depth) {\n                        let ranges = punchRanges(this.ranges, overlay.ranges);\n                        if (ranges.length) {\n                            checkRanges(ranges);\n                            this.inner.splice(overlay.index, 0, new InnerParse(overlay.parser, overlay.parser.startParse(this.input, enterFragments(overlay.mounts, ranges), ranges), overlay.ranges.map(r => new Range(r.from - overlay.start, r.to - overlay.start)), overlay.target, ranges[0].from));\n                        }\n                        overlay = overlay.prev;\n                    }\n                    if (covered && !--covered.depth)\n                        covered = covered.prev;\n                }\n            }\n        }\n    }\n}\nfunction checkCover(covered, from, to) {\n    for (let range of covered) {\n        if (range.from >= to)\n            break;\n        if (range.to > from)\n            return range.from <= from && range.to >= to ? 2 /* Cover.Full */ : 1 /* Cover.Partial */;\n    }\n    return 0 /* Cover.None */;\n}\n// Take a piece of buffer and convert it into a stand-alone\n// TreeBuffer.\nfunction sliceBuf(buf, startI, endI, nodes, positions, off) {\n    if (startI < endI) {\n        let from = buf.buffer[startI + 1];\n        nodes.push(buf.slice(startI, endI, from));\n        positions.push(from - off);\n    }\n}\n// This function takes a node that's in a buffer, and converts it, and\n// its parent buffer nodes, into a Tree. This is again acting on the\n// assumption that the trees and buffers have been constructed by the\n// parse that was ran via the mix parser, and thus aren't shared with\n// any other code, making violations of the immutability safe.\nfunction materialize(cursor) {\n    let { node } = cursor, stack = [];\n    let buffer = node.context.buffer;\n    // Scan up to the nearest tree\n    do {\n        stack.push(cursor.index);\n        cursor.parent();\n    } while (!cursor.tree);\n    // Find the index of the buffer in that tree\n    let base = cursor.tree, i = base.children.indexOf(buffer);\n    let buf = base.children[i], b = buf.buffer, newStack = [i];\n    // Split a level in the buffer, putting the nodes before and after\n    // the child that contains `node` into new buffers.\n    function split(startI, endI, type, innerOffset, length, stackPos) {\n        let targetI = stack[stackPos];\n        let children = [], positions = [];\n        sliceBuf(buf, startI, targetI, children, positions, innerOffset);\n        let from = b[targetI + 1], to = b[targetI + 2];\n        newStack.push(children.length);\n        let child = stackPos\n            ? split(targetI + 4, b[targetI + 3], buf.set.types[b[targetI]], from, to - from, stackPos - 1)\n            : node.toTree();\n        children.push(child);\n        positions.push(from - innerOffset);\n        sliceBuf(buf, b[targetI + 3], endI, children, positions, innerOffset);\n        return new Tree(type, children, positions, length);\n    }\n    base.children[i] = split(0, b.length, NodeType.none, 0, buf.length, stack.length - 1);\n    // Move the cursor back to the target node\n    for (let index of newStack) {\n        let tree = cursor.tree.children[index], pos = cursor.tree.positions[index];\n        cursor.yield(new TreeNode(tree, pos + cursor.from, index, cursor._tree));\n    }\n}\nclass StructureCursor {\n    constructor(root, offset) {\n        this.offset = offset;\n        this.done = false;\n        this.cursor = root.cursor(IterMode.IncludeAnonymous | IterMode.IgnoreMounts);\n    }\n    // Move to the first node (in pre-order) that starts at or after `pos`.\n    moveTo(pos) {\n        let { cursor } = this, p = pos - this.offset;\n        while (!this.done && cursor.from < p) {\n            if (cursor.to >= pos && cursor.enter(p, 1, IterMode.IgnoreOverlays | IterMode.ExcludeBuffers)) ;\n            else if (!cursor.next(false))\n                this.done = true;\n        }\n    }\n    hasNode(cursor) {\n        this.moveTo(cursor.from);\n        if (!this.done && this.cursor.from + this.offset == cursor.from && this.cursor.tree) {\n            for (let tree = this.cursor.tree;;) {\n                if (tree == cursor.tree)\n                    return true;\n                if (tree.children.length && tree.positions[0] == 0 && tree.children[0] instanceof Tree)\n                    tree = tree.children[0];\n                else\n                    break;\n            }\n        }\n        return false;\n    }\n}\nclass FragmentCursor {\n    constructor(fragments) {\n        var _a;\n        this.fragments = fragments;\n        this.curTo = 0;\n        this.fragI = 0;\n        if (fragments.length) {\n            let first = this.curFrag = fragments[0];\n            this.curTo = (_a = first.tree.prop(stoppedInner)) !== null && _a !== void 0 ? _a : first.to;\n            this.inner = new StructureCursor(first.tree, -first.offset);\n        }\n        else {\n            this.curFrag = this.inner = null;\n        }\n    }\n    hasNode(node) {\n        while (this.curFrag && node.from >= this.curTo)\n            this.nextFrag();\n        return this.curFrag && this.curFrag.from <= node.from && this.curTo >= node.to && this.inner.hasNode(node);\n    }\n    nextFrag() {\n        var _a;\n        this.fragI++;\n        if (this.fragI == this.fragments.length) {\n            this.curFrag = this.inner = null;\n        }\n        else {\n            let frag = this.curFrag = this.fragments[this.fragI];\n            this.curTo = (_a = frag.tree.prop(stoppedInner)) !== null && _a !== void 0 ? _a : frag.to;\n            this.inner = new StructureCursor(frag.tree, -frag.offset);\n        }\n    }\n    findMounts(pos, parser) {\n        var _a;\n        let result = [];\n        if (this.inner) {\n            this.inner.cursor.moveTo(pos, 1);\n            for (let pos = this.inner.cursor.node; pos; pos = pos.parent) {\n                let mount = (_a = pos.tree) === null || _a === void 0 ? void 0 : _a.prop(NodeProp.mounted);\n                if (mount && mount.parser == parser) {\n                    for (let i = this.fragI; i < this.fragments.length; i++) {\n                        let frag = this.fragments[i];\n                        if (frag.from >= pos.to)\n                            break;\n                        if (frag.tree == this.curFrag.tree)\n                            result.push({\n                                frag,\n                                pos: pos.from - frag.offset,\n                                mount\n                            });\n                    }\n                }\n            }\n        }\n        return result;\n    }\n}\nfunction punchRanges(outer, ranges) {\n    let copy = null, current = ranges;\n    for (let i = 1, j = 0; i < outer.length; i++) {\n        let gapFrom = outer[i - 1].to, gapTo = outer[i].from;\n        for (; j < current.length; j++) {\n            let r = current[j];\n            if (r.from >= gapTo)\n                break;\n            if (r.to <= gapFrom)\n                continue;\n            if (!copy)\n                current = copy = ranges.slice();\n            if (r.from < gapFrom) {\n                copy[j] = new Range(r.from, gapFrom);\n                if (r.to > gapTo)\n                    copy.splice(j + 1, 0, new Range(gapTo, r.to));\n            }\n            else if (r.to > gapTo) {\n                copy[j--] = new Range(gapTo, r.to);\n            }\n            else {\n                copy.splice(j--, 1);\n            }\n        }\n    }\n    return current;\n}\nfunction findCoverChanges(a, b, from, to) {\n    let iA = 0, iB = 0, inA = false, inB = false, pos = -1e9;\n    let result = [];\n    for (;;) {\n        let nextA = iA == a.length ? 1e9 : inA ? a[iA].to : a[iA].from;\n        let nextB = iB == b.length ? 1e9 : inB ? b[iB].to : b[iB].from;\n        if (inA != inB) {\n            let start = Math.max(pos, from), end = Math.min(nextA, nextB, to);\n            if (start < end)\n                result.push(new Range(start, end));\n        }\n        pos = Math.min(nextA, nextB);\n        if (pos == 1e9)\n            break;\n        if (nextA == pos) {\n            if (!inA)\n                inA = true;\n            else {\n                inA = false;\n                iA++;\n            }\n        }\n        if (nextB == pos) {\n            if (!inB)\n                inB = true;\n            else {\n                inB = false;\n                iB++;\n            }\n        }\n    }\n    return result;\n}\n// Given a number of fragments for the outer tree, and a set of ranges\n// to parse, find fragments for inner trees mounted around those\n// ranges, if any.\nfunction enterFragments(mounts, ranges) {\n    let result = [];\n    for (let { pos, mount, frag } of mounts) {\n        let startPos = pos + (mount.overlay ? mount.overlay[0].from : 0), endPos = startPos + mount.tree.length;\n        let from = Math.max(frag.from, startPos), to = Math.min(frag.to, endPos);\n        if (mount.overlay) {\n            let overlay = mount.overlay.map(r => new Range(r.from + pos, r.to + pos));\n            let changes = findCoverChanges(ranges, overlay, from, to);\n            for (let i = 0, pos = from;; i++) {\n                let last = i == changes.length, end = last ? to : changes[i].from;\n                if (end > pos)\n                    result.push(new TreeFragment(pos, end, mount.tree, -startPos, frag.from >= pos || frag.openStart, frag.to <= end || frag.openEnd));\n                if (last)\n                    break;\n                pos = changes[i].to;\n            }\n        }\n        else {\n            result.push(new TreeFragment(from, to, mount.tree, -startPos, frag.from >= startPos || frag.openStart, frag.to <= endPos || frag.openEnd));\n        }\n    }\n    return result;\n}\n\nexport { DefaultBufferLength, IterMode, MountedTree, NodeProp, NodeSet, NodeType, NodeWeakMap, Parser, Tree, TreeBuffer, TreeCursor, TreeFragment, parseMixed };\n","/**\nThe data structure for documents. @nonabstract\n*/\nclass Text {\n    /**\n    Get the line description around the given position.\n    */\n    lineAt(pos) {\n        if (pos < 0 || pos > this.length)\n            throw new RangeError(`Invalid position ${pos} in document of length ${this.length}`);\n        return this.lineInner(pos, false, 1, 0);\n    }\n    /**\n    Get the description for the given (1-based) line number.\n    */\n    line(n) {\n        if (n < 1 || n > this.lines)\n            throw new RangeError(`Invalid line number ${n} in ${this.lines}-line document`);\n        return this.lineInner(n, true, 1, 0);\n    }\n    /**\n    Replace a range of the text with the given content.\n    */\n    replace(from, to, text) {\n        [from, to] = clip(this, from, to);\n        let parts = [];\n        this.decompose(0, from, parts, 2 /* Open.To */);\n        if (text.length)\n            text.decompose(0, text.length, parts, 1 /* Open.From */ | 2 /* Open.To */);\n        this.decompose(to, this.length, parts, 1 /* Open.From */);\n        return TextNode.from(parts, this.length - (to - from) + text.length);\n    }\n    /**\n    Append another document to this one.\n    */\n    append(other) {\n        return this.replace(this.length, this.length, other);\n    }\n    /**\n    Retrieve the text between the given points.\n    */\n    slice(from, to = this.length) {\n        [from, to] = clip(this, from, to);\n        let parts = [];\n        this.decompose(from, to, parts, 0);\n        return TextNode.from(parts, to - from);\n    }\n    /**\n    Test whether this text is equal to another instance.\n    */\n    eq(other) {\n        if (other == this)\n            return true;\n        if (other.length != this.length || other.lines != this.lines)\n            return false;\n        let start = this.scanIdentical(other, 1), end = this.length - this.scanIdentical(other, -1);\n        let a = new RawTextCursor(this), b = new RawTextCursor(other);\n        for (let skip = start, pos = start;;) {\n            a.next(skip);\n            b.next(skip);\n            skip = 0;\n            if (a.lineBreak != b.lineBreak || a.done != b.done || a.value != b.value)\n                return false;\n            pos += a.value.length;\n            if (a.done || pos >= end)\n                return true;\n        }\n    }\n    /**\n    Iterate over the text. When `dir` is `-1`, iteration happens\n    from end to start. This will return lines and the breaks between\n    them as separate strings.\n    */\n    iter(dir = 1) { return new RawTextCursor(this, dir); }\n    /**\n    Iterate over a range of the text. When `from` > `to`, the\n    iterator will run in reverse.\n    */\n    iterRange(from, to = this.length) { return new PartialTextCursor(this, from, to); }\n    /**\n    Return a cursor that iterates over the given range of lines,\n    _without_ returning the line breaks between, and yielding empty\n    strings for empty lines.\n    \n    When `from` and `to` are given, they should be 1-based line numbers.\n    */\n    iterLines(from, to) {\n        let inner;\n        if (from == null) {\n            inner = this.iter();\n        }\n        else {\n            if (to == null)\n                to = this.lines + 1;\n            let start = this.line(from).from;\n            inner = this.iterRange(start, Math.max(start, to == this.lines + 1 ? this.length : to <= 1 ? 0 : this.line(to - 1).to));\n        }\n        return new LineCursor(inner);\n    }\n    /**\n    Return the document as a string, using newline characters to\n    separate lines.\n    */\n    toString() { return this.sliceString(0); }\n    /**\n    Convert the document to an array of lines (which can be\n    deserialized again via [`Text.of`](https://codemirror.net/6/docs/ref/#state.Text^of)).\n    */\n    toJSON() {\n        let lines = [];\n        this.flatten(lines);\n        return lines;\n    }\n    /**\n    @internal\n    */\n    constructor() { }\n    /**\n    Create a `Text` instance for the given array of lines.\n    */\n    static of(text) {\n        if (text.length == 0)\n            throw new RangeError(\"A document must have at least one line\");\n        if (text.length == 1 && !text[0])\n            return Text.empty;\n        return text.length <= 32 /* Tree.Branch */ ? new TextLeaf(text) : TextNode.from(TextLeaf.split(text, []));\n    }\n}\n// Leaves store an array of line strings. There are always line breaks\n// between these strings. Leaves are limited in size and have to be\n// contained in TextNode instances for bigger documents.\nclass TextLeaf extends Text {\n    constructor(text, length = textLength(text)) {\n        super();\n        this.text = text;\n        this.length = length;\n    }\n    get lines() { return this.text.length; }\n    get children() { return null; }\n    lineInner(target, isLine, line, offset) {\n        for (let i = 0;; i++) {\n            let string = this.text[i], end = offset + string.length;\n            if ((isLine ? line : end) >= target)\n                return new Line(offset, end, line, string);\n            offset = end + 1;\n            line++;\n        }\n    }\n    decompose(from, to, target, open) {\n        let text = from <= 0 && to >= this.length ? this\n            : new TextLeaf(sliceText(this.text, from, to), Math.min(to, this.length) - Math.max(0, from));\n        if (open & 1 /* Open.From */) {\n            let prev = target.pop();\n            let joined = appendText(text.text, prev.text.slice(), 0, text.length);\n            if (joined.length <= 32 /* Tree.Branch */) {\n                target.push(new TextLeaf(joined, prev.length + text.length));\n            }\n            else {\n                let mid = joined.length >> 1;\n                target.push(new TextLeaf(joined.slice(0, mid)), new TextLeaf(joined.slice(mid)));\n            }\n        }\n        else {\n            target.push(text);\n        }\n    }\n    replace(from, to, text) {\n        if (!(text instanceof TextLeaf))\n            return super.replace(from, to, text);\n        [from, to] = clip(this, from, to);\n        let lines = appendText(this.text, appendText(text.text, sliceText(this.text, 0, from)), to);\n        let newLen = this.length + text.length - (to - from);\n        if (lines.length <= 32 /* Tree.Branch */)\n            return new TextLeaf(lines, newLen);\n        return TextNode.from(TextLeaf.split(lines, []), newLen);\n    }\n    sliceString(from, to = this.length, lineSep = \"\\n\") {\n        [from, to] = clip(this, from, to);\n        let result = \"\";\n        for (let pos = 0, i = 0; pos <= to && i < this.text.length; i++) {\n            let line = this.text[i], end = pos + line.length;\n            if (pos > from && i)\n                result += lineSep;\n            if (from < end && to > pos)\n                result += line.slice(Math.max(0, from - pos), to - pos);\n            pos = end + 1;\n        }\n        return result;\n    }\n    flatten(target) {\n        for (let line of this.text)\n            target.push(line);\n    }\n    scanIdentical() { return 0; }\n    static split(text, target) {\n        let part = [], len = -1;\n        for (let line of text) {\n            part.push(line);\n            len += line.length + 1;\n            if (part.length == 32 /* Tree.Branch */) {\n                target.push(new TextLeaf(part, len));\n                part = [];\n                len = -1;\n            }\n        }\n        if (len > -1)\n            target.push(new TextLeaf(part, len));\n        return target;\n    }\n}\n// Nodes provide the tree structure of the `Text` type. They store a\n// number of other nodes or leaves, taking care to balance themselves\n// on changes. There are implied line breaks _between_ the children of\n// a node (but not before the first or after the last child).\nclass TextNode extends Text {\n    constructor(children, length) {\n        super();\n        this.children = children;\n        this.length = length;\n        this.lines = 0;\n        for (let child of children)\n            this.lines += child.lines;\n    }\n    lineInner(target, isLine, line, offset) {\n        for (let i = 0;; i++) {\n            let child = this.children[i], end = offset + child.length, endLine = line + child.lines - 1;\n            if ((isLine ? endLine : end) >= target)\n                return child.lineInner(target, isLine, line, offset);\n            offset = end + 1;\n            line = endLine + 1;\n        }\n    }\n    decompose(from, to, target, open) {\n        for (let i = 0, pos = 0; pos <= to && i < this.children.length; i++) {\n            let child = this.children[i], end = pos + child.length;\n            if (from <= end && to >= pos) {\n                let childOpen = open & ((pos <= from ? 1 /* Open.From */ : 0) | (end >= to ? 2 /* Open.To */ : 0));\n                if (pos >= from && end <= to && !childOpen)\n                    target.push(child);\n                else\n                    child.decompose(from - pos, to - pos, target, childOpen);\n            }\n            pos = end + 1;\n        }\n    }\n    replace(from, to, text) {\n        [from, to] = clip(this, from, to);\n        if (text.lines < this.lines)\n            for (let i = 0, pos = 0; i < this.children.length; i++) {\n                let child = this.children[i], end = pos + child.length;\n                // Fast path: if the change only affects one child and the\n                // child's size remains in the acceptable range, only update\n                // that child\n                if (from >= pos && to <= end) {\n                    let updated = child.replace(from - pos, to - pos, text);\n                    let totalLines = this.lines - child.lines + updated.lines;\n                    if (updated.lines < (totalLines >> (5 /* Tree.BranchShift */ - 1)) &&\n                        updated.lines > (totalLines >> (5 /* Tree.BranchShift */ + 1))) {\n                        let copy = this.children.slice();\n                        copy[i] = updated;\n                        return new TextNode(copy, this.length - (to - from) + text.length);\n                    }\n                    return super.replace(pos, end, updated);\n                }\n                pos = end + 1;\n            }\n        return super.replace(from, to, text);\n    }\n    sliceString(from, to = this.length, lineSep = \"\\n\") {\n        [from, to] = clip(this, from, to);\n        let result = \"\";\n        for (let i = 0, pos = 0; i < this.children.length && pos <= to; i++) {\n            let child = this.children[i], end = pos + child.length;\n            if (pos > from && i)\n                result += lineSep;\n            if (from < end && to > pos)\n                result += child.sliceString(from - pos, to - pos, lineSep);\n            pos = end + 1;\n        }\n        return result;\n    }\n    flatten(target) {\n        for (let child of this.children)\n            child.flatten(target);\n    }\n    scanIdentical(other, dir) {\n        if (!(other instanceof TextNode))\n            return 0;\n        let length = 0;\n        let [iA, iB, eA, eB] = dir > 0 ? [0, 0, this.children.length, other.children.length]\n            : [this.children.length - 1, other.children.length - 1, -1, -1];\n        for (;; iA += dir, iB += dir) {\n            if (iA == eA || iB == eB)\n                return length;\n            let chA = this.children[iA], chB = other.children[iB];\n            if (chA != chB)\n                return length + chA.scanIdentical(chB, dir);\n            length += chA.length + 1;\n        }\n    }\n    static from(children, length = children.reduce((l, ch) => l + ch.length + 1, -1)) {\n        let lines = 0;\n        for (let ch of children)\n            lines += ch.lines;\n        if (lines < 32 /* Tree.Branch */) {\n            let flat = [];\n            for (let ch of children)\n                ch.flatten(flat);\n            return new TextLeaf(flat, length);\n        }\n        let chunk = Math.max(32 /* Tree.Branch */, lines >> 5 /* Tree.BranchShift */), maxChunk = chunk << 1, minChunk = chunk >> 1;\n        let chunked = [], currentLines = 0, currentLen = -1, currentChunk = [];\n        function add(child) {\n            let last;\n            if (child.lines > maxChunk && child instanceof TextNode) {\n                for (let node of child.children)\n                    add(node);\n            }\n            else if (child.lines > minChunk && (currentLines > minChunk || !currentLines)) {\n                flush();\n                chunked.push(child);\n            }\n            else if (child instanceof TextLeaf && currentLines &&\n                (last = currentChunk[currentChunk.length - 1]) instanceof TextLeaf &&\n                child.lines + last.lines <= 32 /* Tree.Branch */) {\n                currentLines += child.lines;\n                currentLen += child.length + 1;\n                currentChunk[currentChunk.length - 1] = new TextLeaf(last.text.concat(child.text), last.length + 1 + child.length);\n            }\n            else {\n                if (currentLines + child.lines > chunk)\n                    flush();\n                currentLines += child.lines;\n                currentLen += child.length + 1;\n                currentChunk.push(child);\n            }\n        }\n        function flush() {\n            if (currentLines == 0)\n                return;\n            chunked.push(currentChunk.length == 1 ? currentChunk[0] : TextNode.from(currentChunk, currentLen));\n            currentLen = -1;\n            currentLines = currentChunk.length = 0;\n        }\n        for (let child of children)\n            add(child);\n        flush();\n        return chunked.length == 1 ? chunked[0] : new TextNode(chunked, length);\n    }\n}\nText.empty = /*@__PURE__*/new TextLeaf([\"\"], 0);\nfunction textLength(text) {\n    let length = -1;\n    for (let line of text)\n        length += line.length + 1;\n    return length;\n}\nfunction appendText(text, target, from = 0, to = 1e9) {\n    for (let pos = 0, i = 0, first = true; i < text.length && pos <= to; i++) {\n        let line = text[i], end = pos + line.length;\n        if (end >= from) {\n            if (end > to)\n                line = line.slice(0, to - pos);\n            if (pos < from)\n                line = line.slice(from - pos);\n            if (first) {\n                target[target.length - 1] += line;\n                first = false;\n            }\n            else\n                target.push(line);\n        }\n        pos = end + 1;\n    }\n    return target;\n}\nfunction sliceText(text, from, to) {\n    return appendText(text, [\"\"], from, to);\n}\nclass RawTextCursor {\n    constructor(text, dir = 1) {\n        this.dir = dir;\n        this.done = false;\n        this.lineBreak = false;\n        this.value = \"\";\n        this.nodes = [text];\n        this.offsets = [dir > 0 ? 1 : (text instanceof TextLeaf ? text.text.length : text.children.length) << 1];\n    }\n    nextInner(skip, dir) {\n        this.done = this.lineBreak = false;\n        for (;;) {\n            let last = this.nodes.length - 1;\n            let top = this.nodes[last], offsetValue = this.offsets[last], offset = offsetValue >> 1;\n            let size = top instanceof TextLeaf ? top.text.length : top.children.length;\n            if (offset == (dir > 0 ? size : 0)) {\n                if (last == 0) {\n                    this.done = true;\n                    this.value = \"\";\n                    return this;\n                }\n                if (dir > 0)\n                    this.offsets[last - 1]++;\n                this.nodes.pop();\n                this.offsets.pop();\n            }\n            else if ((offsetValue & 1) == (dir > 0 ? 0 : 1)) {\n                this.offsets[last] += dir;\n                if (skip == 0) {\n                    this.lineBreak = true;\n                    this.value = \"\\n\";\n                    return this;\n                }\n                skip--;\n            }\n            else if (top instanceof TextLeaf) {\n                // Move to the next string\n                let next = top.text[offset + (dir < 0 ? -1 : 0)];\n                this.offsets[last] += dir;\n                if (next.length > Math.max(0, skip)) {\n                    this.value = skip == 0 ? next : dir > 0 ? next.slice(skip) : next.slice(0, next.length - skip);\n                    return this;\n                }\n                skip -= next.length;\n            }\n            else {\n                let next = top.children[offset + (dir < 0 ? -1 : 0)];\n                if (skip > next.length) {\n                    skip -= next.length;\n                    this.offsets[last] += dir;\n                }\n                else {\n                    if (dir < 0)\n                        this.offsets[last]--;\n                    this.nodes.push(next);\n                    this.offsets.push(dir > 0 ? 1 : (next instanceof TextLeaf ? next.text.length : next.children.length) << 1);\n                }\n            }\n        }\n    }\n    next(skip = 0) {\n        if (skip < 0) {\n            this.nextInner(-skip, (-this.dir));\n            skip = this.value.length;\n        }\n        return this.nextInner(skip, this.dir);\n    }\n}\nclass PartialTextCursor {\n    constructor(text, start, end) {\n        this.value = \"\";\n        this.done = false;\n        this.cursor = new RawTextCursor(text, start > end ? -1 : 1);\n        this.pos = start > end ? text.length : 0;\n        this.from = Math.min(start, end);\n        this.to = Math.max(start, end);\n    }\n    nextInner(skip, dir) {\n        if (dir < 0 ? this.pos <= this.from : this.pos >= this.to) {\n            this.value = \"\";\n            this.done = true;\n            return this;\n        }\n        skip += Math.max(0, dir < 0 ? this.pos - this.to : this.from - this.pos);\n        let limit = dir < 0 ? this.pos - this.from : this.to - this.pos;\n        if (skip > limit)\n            skip = limit;\n        limit -= skip;\n        let { value } = this.cursor.next(skip);\n        this.pos += (value.length + skip) * dir;\n        this.value = value.length <= limit ? value : dir < 0 ? value.slice(value.length - limit) : value.slice(0, limit);\n        this.done = !this.value;\n        return this;\n    }\n    next(skip = 0) {\n        if (skip < 0)\n            skip = Math.max(skip, this.from - this.pos);\n        else if (skip > 0)\n            skip = Math.min(skip, this.to - this.pos);\n        return this.nextInner(skip, this.cursor.dir);\n    }\n    get lineBreak() { return this.cursor.lineBreak && this.value != \"\"; }\n}\nclass LineCursor {\n    constructor(inner) {\n        this.inner = inner;\n        this.afterBreak = true;\n        this.value = \"\";\n        this.done = false;\n    }\n    next(skip = 0) {\n        let { done, lineBreak, value } = this.inner.next(skip);\n        if (done && this.afterBreak) {\n            this.value = \"\";\n            this.afterBreak = false;\n        }\n        else if (done) {\n            this.done = true;\n            this.value = \"\";\n        }\n        else if (lineBreak) {\n            if (this.afterBreak) {\n                this.value = \"\";\n            }\n            else {\n                this.afterBreak = true;\n                this.next();\n            }\n        }\n        else {\n            this.value = value;\n            this.afterBreak = false;\n        }\n        return this;\n    }\n    get lineBreak() { return false; }\n}\nif (typeof Symbol != \"undefined\") {\n    Text.prototype[Symbol.iterator] = function () { return this.iter(); };\n    RawTextCursor.prototype[Symbol.iterator] = PartialTextCursor.prototype[Symbol.iterator] =\n        LineCursor.prototype[Symbol.iterator] = function () { return this; };\n}\n/**\nThis type describes a line in the document. It is created\non-demand when lines are [queried](https://codemirror.net/6/docs/ref/#state.Text.lineAt).\n*/\nclass Line {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The position of the start of the line.\n    */\n    from, \n    /**\n    The position at the end of the line (_before_ the line break,\n    or at the end of document for the last line).\n    */\n    to, \n    /**\n    This line's line number (1-based).\n    */\n    number, \n    /**\n    The line's content.\n    */\n    text) {\n        this.from = from;\n        this.to = to;\n        this.number = number;\n        this.text = text;\n    }\n    /**\n    The length of the line (not including any line break after it).\n    */\n    get length() { return this.to - this.from; }\n}\nfunction clip(text, from, to) {\n    from = Math.max(0, Math.min(text.length, from));\n    return [from, Math.max(from, Math.min(text.length, to))];\n}\n\n// Compressed representation of the Grapheme_Cluster_Break=Extend\n// information from\n// http://www.unicode.org/Public/13.0.0/ucd/auxiliary/GraphemeBreakProperty.txt.\n// Each pair of elements represents a range, as an offet from the\n// previous range and a length. Numbers are in base-36, with the empty\n// string being a shorthand for 1.\nlet extend = /*@__PURE__*/\"lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o\".split(\",\").map(s => s ? parseInt(s, 36) : 1);\n// Convert offsets into absolute values\nfor (let i = 1; i < extend.length; i++)\n    extend[i] += extend[i - 1];\nfunction isExtendingChar(code) {\n    for (let i = 1; i < extend.length; i += 2)\n        if (extend[i] > code)\n            return extend[i - 1] <= code;\n    return false;\n}\nfunction isRegionalIndicator(code) {\n    return code >= 0x1F1E6 && code <= 0x1F1FF;\n}\nconst ZWJ = 0x200d;\n/**\nReturns a next grapheme cluster break _after_ (not equal to)\n`pos`, if `forward` is true, or before otherwise. Returns `pos`\nitself if no further cluster break is available in the string.\nMoves across surrogate pairs, extending characters (when\n`includeExtending` is true), characters joined with zero-width\njoiners, and flag emoji.\n*/\nfunction findClusterBreak(str, pos, forward = true, includeExtending = true) {\n    return (forward ? nextClusterBreak : prevClusterBreak)(str, pos, includeExtending);\n}\nfunction nextClusterBreak(str, pos, includeExtending) {\n    if (pos == str.length)\n        return pos;\n    // If pos is in the middle of a surrogate pair, move to its start\n    if (pos && surrogateLow(str.charCodeAt(pos)) && surrogateHigh(str.charCodeAt(pos - 1)))\n        pos--;\n    let prev = codePointAt(str, pos);\n    pos += codePointSize(prev);\n    while (pos < str.length) {\n        let next = codePointAt(str, pos);\n        if (prev == ZWJ || next == ZWJ || includeExtending && isExtendingChar(next)) {\n            pos += codePointSize(next);\n            prev = next;\n        }\n        else if (isRegionalIndicator(next)) {\n            let countBefore = 0, i = pos - 2;\n            while (i >= 0 && isRegionalIndicator(codePointAt(str, i))) {\n                countBefore++;\n                i -= 2;\n            }\n            if (countBefore % 2 == 0)\n                break;\n            else\n                pos += 2;\n        }\n        else {\n            break;\n        }\n    }\n    return pos;\n}\nfunction prevClusterBreak(str, pos, includeExtending) {\n    while (pos > 0) {\n        let found = nextClusterBreak(str, pos - 2, includeExtending);\n        if (found < pos)\n            return found;\n        pos--;\n    }\n    return 0;\n}\nfunction surrogateLow(ch) { return ch >= 0xDC00 && ch < 0xE000; }\nfunction surrogateHigh(ch) { return ch >= 0xD800 && ch < 0xDC00; }\n/**\nFind the code point at the given position in a string (like the\n[`codePointAt`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/codePointAt)\nstring method).\n*/\nfunction codePointAt(str, pos) {\n    let code0 = str.charCodeAt(pos);\n    if (!surrogateHigh(code0) || pos + 1 == str.length)\n        return code0;\n    let code1 = str.charCodeAt(pos + 1);\n    if (!surrogateLow(code1))\n        return code0;\n    return ((code0 - 0xd800) << 10) + (code1 - 0xdc00) + 0x10000;\n}\n/**\nGiven a Unicode codepoint, return the JavaScript string that\nrespresents it (like\n[`String.fromCodePoint`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint)).\n*/\nfunction fromCodePoint(code) {\n    if (code <= 0xffff)\n        return String.fromCharCode(code);\n    code -= 0x10000;\n    return String.fromCharCode((code >> 10) + 0xd800, (code & 1023) + 0xdc00);\n}\n/**\nThe amount of positions a character takes up a JavaScript string.\n*/\nfunction codePointSize(code) { return code < 0x10000 ? 1 : 2; }\n\nconst DefaultSplit = /\\r\\n?|\\n/;\n/**\nDistinguishes different ways in which positions can be mapped.\n*/\nvar MapMode = /*@__PURE__*/(function (MapMode) {\n    /**\n    Map a position to a valid new position, even when its context\n    was deleted.\n    */\n    MapMode[MapMode[\"Simple\"] = 0] = \"Simple\";\n    /**\n    Return null if deletion happens across the position.\n    */\n    MapMode[MapMode[\"TrackDel\"] = 1] = \"TrackDel\";\n    /**\n    Return null if the character _before_ the position is deleted.\n    */\n    MapMode[MapMode[\"TrackBefore\"] = 2] = \"TrackBefore\";\n    /**\n    Return null if the character _after_ the position is deleted.\n    */\n    MapMode[MapMode[\"TrackAfter\"] = 3] = \"TrackAfter\";\nreturn MapMode})(MapMode || (MapMode = {}));\n/**\nA change description is a variant of [change set](https://codemirror.net/6/docs/ref/#state.ChangeSet)\nthat doesn't store the inserted text. As such, it can't be\napplied, but is cheaper to store and manipulate.\n*/\nclass ChangeDesc {\n    // Sections are encoded as pairs of integers. The first is the\n    // length in the current document, and the second is -1 for\n    // unaffected sections, and the length of the replacement content\n    // otherwise. So an insertion would be (0, n>0), a deletion (n>0,\n    // 0), and a replacement two positive numbers.\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    @internal\n    */\n    sections) {\n        this.sections = sections;\n    }\n    /**\n    The length of the document before the change.\n    */\n    get length() {\n        let result = 0;\n        for (let i = 0; i < this.sections.length; i += 2)\n            result += this.sections[i];\n        return result;\n    }\n    /**\n    The length of the document after the change.\n    */\n    get newLength() {\n        let result = 0;\n        for (let i = 0; i < this.sections.length; i += 2) {\n            let ins = this.sections[i + 1];\n            result += ins < 0 ? this.sections[i] : ins;\n        }\n        return result;\n    }\n    /**\n    False when there are actual changes in this set.\n    */\n    get empty() { return this.sections.length == 0 || this.sections.length == 2 && this.sections[1] < 0; }\n    /**\n    Iterate over the unchanged parts left by these changes. `posA`\n    provides the position of the range in the old document, `posB`\n    the new position in the changed document.\n    */\n    iterGaps(f) {\n        for (let i = 0, posA = 0, posB = 0; i < this.sections.length;) {\n            let len = this.sections[i++], ins = this.sections[i++];\n            if (ins < 0) {\n                f(posA, posB, len);\n                posB += len;\n            }\n            else {\n                posB += ins;\n            }\n            posA += len;\n        }\n    }\n    /**\n    Iterate over the ranges changed by these changes. (See\n    [`ChangeSet.iterChanges`](https://codemirror.net/6/docs/ref/#state.ChangeSet.iterChanges) for a\n    variant that also provides you with the inserted text.)\n    `fromA`/`toA` provides the extent of the change in the starting\n    document, `fromB`/`toB` the extent of the replacement in the\n    changed document.\n    \n    When `individual` is true, adjacent changes (which are kept\n    separate for [position mapping](https://codemirror.net/6/docs/ref/#state.ChangeDesc.mapPos)) are\n    reported separately.\n    */\n    iterChangedRanges(f, individual = false) {\n        iterChanges(this, f, individual);\n    }\n    /**\n    Get a description of the inverted form of these changes.\n    */\n    get invertedDesc() {\n        let sections = [];\n        for (let i = 0; i < this.sections.length;) {\n            let len = this.sections[i++], ins = this.sections[i++];\n            if (ins < 0)\n                sections.push(len, ins);\n            else\n                sections.push(ins, len);\n        }\n        return new ChangeDesc(sections);\n    }\n    /**\n    Compute the combined effect of applying another set of changes\n    after this one. The length of the document after this set should\n    match the length before `other`.\n    */\n    composeDesc(other) { return this.empty ? other : other.empty ? this : composeSets(this, other); }\n    /**\n    Map this description, which should start with the same document\n    as `other`, over another set of changes, so that it can be\n    applied after it. When `before` is true, map as if the changes\n    in `other` happened before the ones in `this`.\n    */\n    mapDesc(other, before = false) { return other.empty ? this : mapSet(this, other, before); }\n    mapPos(pos, assoc = -1, mode = MapMode.Simple) {\n        let posA = 0, posB = 0;\n        for (let i = 0; i < this.sections.length;) {\n            let len = this.sections[i++], ins = this.sections[i++], endA = posA + len;\n            if (ins < 0) {\n                if (endA > pos)\n                    return posB + (pos - posA);\n                posB += len;\n            }\n            else {\n                if (mode != MapMode.Simple && endA >= pos &&\n                    (mode == MapMode.TrackDel && posA < pos && endA > pos ||\n                        mode == MapMode.TrackBefore && posA < pos ||\n                        mode == MapMode.TrackAfter && endA > pos))\n                    return null;\n                if (endA > pos || endA == pos && assoc < 0 && !len)\n                    return pos == posA || assoc < 0 ? posB : posB + ins;\n                posB += ins;\n            }\n            posA = endA;\n        }\n        if (pos > posA)\n            throw new RangeError(`Position ${pos} is out of range for changeset of length ${posA}`);\n        return posB;\n    }\n    /**\n    Check whether these changes touch a given range. When one of the\n    changes entirely covers the range, the string `\"cover\"` is\n    returned.\n    */\n    touchesRange(from, to = from) {\n        for (let i = 0, pos = 0; i < this.sections.length && pos <= to;) {\n            let len = this.sections[i++], ins = this.sections[i++], end = pos + len;\n            if (ins >= 0 && pos <= to && end >= from)\n                return pos < from && end > to ? \"cover\" : true;\n            pos = end;\n        }\n        return false;\n    }\n    /**\n    @internal\n    */\n    toString() {\n        let result = \"\";\n        for (let i = 0; i < this.sections.length;) {\n            let len = this.sections[i++], ins = this.sections[i++];\n            result += (result ? \" \" : \"\") + len + (ins >= 0 ? \":\" + ins : \"\");\n        }\n        return result;\n    }\n    /**\n    Serialize this change desc to a JSON-representable value.\n    */\n    toJSON() { return this.sections; }\n    /**\n    Create a change desc from its JSON representation (as produced\n    by [`toJSON`](https://codemirror.net/6/docs/ref/#state.ChangeDesc.toJSON).\n    */\n    static fromJSON(json) {\n        if (!Array.isArray(json) || json.length % 2 || json.some(a => typeof a != \"number\"))\n            throw new RangeError(\"Invalid JSON representation of ChangeDesc\");\n        return new ChangeDesc(json);\n    }\n    /**\n    @internal\n    */\n    static create(sections) { return new ChangeDesc(sections); }\n}\n/**\nA change set represents a group of modifications to a document. It\nstores the document length, and can only be applied to documents\nwith exactly that length.\n*/\nclass ChangeSet extends ChangeDesc {\n    constructor(sections, \n    /**\n    @internal\n    */\n    inserted) {\n        super(sections);\n        this.inserted = inserted;\n    }\n    /**\n    Apply the changes to a document, returning the modified\n    document.\n    */\n    apply(doc) {\n        if (this.length != doc.length)\n            throw new RangeError(\"Applying change set to a document with the wrong length\");\n        iterChanges(this, (fromA, toA, fromB, _toB, text) => doc = doc.replace(fromB, fromB + (toA - fromA), text), false);\n        return doc;\n    }\n    mapDesc(other, before = false) { return mapSet(this, other, before, true); }\n    /**\n    Given the document as it existed _before_ the changes, return a\n    change set that represents the inverse of this set, which could\n    be used to go from the document created by the changes back to\n    the document as it existed before the changes.\n    */\n    invert(doc) {\n        let sections = this.sections.slice(), inserted = [];\n        for (let i = 0, pos = 0; i < sections.length; i += 2) {\n            let len = sections[i], ins = sections[i + 1];\n            if (ins >= 0) {\n                sections[i] = ins;\n                sections[i + 1] = len;\n                let index = i >> 1;\n                while (inserted.length < index)\n                    inserted.push(Text.empty);\n                inserted.push(len ? doc.slice(pos, pos + len) : Text.empty);\n            }\n            pos += len;\n        }\n        return new ChangeSet(sections, inserted);\n    }\n    /**\n    Combine two subsequent change sets into a single set. `other`\n    must start in the document produced by `this`. If `this` goes\n    `docA` → `docB` and `other` represents `docB` → `docC`, the\n    returned value will represent the change `docA` → `docC`.\n    */\n    compose(other) { return this.empty ? other : other.empty ? this : composeSets(this, other, true); }\n    /**\n    Given another change set starting in the same document, maps this\n    change set over the other, producing a new change set that can be\n    applied to the document produced by applying `other`. When\n    `before` is `true`, order changes as if `this` comes before\n    `other`, otherwise (the default) treat `other` as coming first.\n    \n    Given two changes `A` and `B`, `A.compose(B.map(A))` and\n    `B.compose(A.map(B, true))` will produce the same document. This\n    provides a basic form of [operational\n    transformation](https://en.wikipedia.org/wiki/Operational_transformation),\n    and can be used for collaborative editing.\n    */\n    map(other, before = false) { return other.empty ? this : mapSet(this, other, before, true); }\n    /**\n    Iterate over the changed ranges in the document, calling `f` for\n    each, with the range in the original document (`fromA`-`toA`)\n    and the range that replaces it in the new document\n    (`fromB`-`toB`).\n    \n    When `individual` is true, adjacent changes are reported\n    separately.\n    */\n    iterChanges(f, individual = false) {\n        iterChanges(this, f, individual);\n    }\n    /**\n    Get a [change description](https://codemirror.net/6/docs/ref/#state.ChangeDesc) for this change\n    set.\n    */\n    get desc() { return ChangeDesc.create(this.sections); }\n    /**\n    @internal\n    */\n    filter(ranges) {\n        let resultSections = [], resultInserted = [], filteredSections = [];\n        let iter = new SectionIter(this);\n        done: for (let i = 0, pos = 0;;) {\n            let next = i == ranges.length ? 1e9 : ranges[i++];\n            while (pos < next || pos == next && iter.len == 0) {\n                if (iter.done)\n                    break done;\n                let len = Math.min(iter.len, next - pos);\n                addSection(filteredSections, len, -1);\n                let ins = iter.ins == -1 ? -1 : iter.off == 0 ? iter.ins : 0;\n                addSection(resultSections, len, ins);\n                if (ins > 0)\n                    addInsert(resultInserted, resultSections, iter.text);\n                iter.forward(len);\n                pos += len;\n            }\n            let end = ranges[i++];\n            while (pos < end) {\n                if (iter.done)\n                    break done;\n                let len = Math.min(iter.len, end - pos);\n                addSection(resultSections, len, -1);\n                addSection(filteredSections, len, iter.ins == -1 ? -1 : iter.off == 0 ? iter.ins : 0);\n                iter.forward(len);\n                pos += len;\n            }\n        }\n        return { changes: new ChangeSet(resultSections, resultInserted),\n            filtered: ChangeDesc.create(filteredSections) };\n    }\n    /**\n    Serialize this change set to a JSON-representable value.\n    */\n    toJSON() {\n        let parts = [];\n        for (let i = 0; i < this.sections.length; i += 2) {\n            let len = this.sections[i], ins = this.sections[i + 1];\n            if (ins < 0)\n                parts.push(len);\n            else if (ins == 0)\n                parts.push([len]);\n            else\n                parts.push([len].concat(this.inserted[i >> 1].toJSON()));\n        }\n        return parts;\n    }\n    /**\n    Create a change set for the given changes, for a document of the\n    given length, using `lineSep` as line separator.\n    */\n    static of(changes, length, lineSep) {\n        let sections = [], inserted = [], pos = 0;\n        let total = null;\n        function flush(force = false) {\n            if (!force && !sections.length)\n                return;\n            if (pos < length)\n                addSection(sections, length - pos, -1);\n            let set = new ChangeSet(sections, inserted);\n            total = total ? total.compose(set.map(total)) : set;\n            sections = [];\n            inserted = [];\n            pos = 0;\n        }\n        function process(spec) {\n            if (Array.isArray(spec)) {\n                for (let sub of spec)\n                    process(sub);\n            }\n            else if (spec instanceof ChangeSet) {\n                if (spec.length != length)\n                    throw new RangeError(`Mismatched change set length (got ${spec.length}, expected ${length})`);\n                flush();\n                total = total ? total.compose(spec.map(total)) : spec;\n            }\n            else {\n                let { from, to = from, insert } = spec;\n                if (from > to || from < 0 || to > length)\n                    throw new RangeError(`Invalid change range ${from} to ${to} (in doc of length ${length})`);\n                let insText = !insert ? Text.empty : typeof insert == \"string\" ? Text.of(insert.split(lineSep || DefaultSplit)) : insert;\n                let insLen = insText.length;\n                if (from == to && insLen == 0)\n                    return;\n                if (from < pos)\n                    flush();\n                if (from > pos)\n                    addSection(sections, from - pos, -1);\n                addSection(sections, to - from, insLen);\n                addInsert(inserted, sections, insText);\n                pos = to;\n            }\n        }\n        process(changes);\n        flush(!total);\n        return total;\n    }\n    /**\n    Create an empty changeset of the given length.\n    */\n    static empty(length) {\n        return new ChangeSet(length ? [length, -1] : [], []);\n    }\n    /**\n    Create a changeset from its JSON representation (as produced by\n    [`toJSON`](https://codemirror.net/6/docs/ref/#state.ChangeSet.toJSON).\n    */\n    static fromJSON(json) {\n        if (!Array.isArray(json))\n            throw new RangeError(\"Invalid JSON representation of ChangeSet\");\n        let sections = [], inserted = [];\n        for (let i = 0; i < json.length; i++) {\n            let part = json[i];\n            if (typeof part == \"number\") {\n                sections.push(part, -1);\n            }\n            else if (!Array.isArray(part) || typeof part[0] != \"number\" || part.some((e, i) => i && typeof e != \"string\")) {\n                throw new RangeError(\"Invalid JSON representation of ChangeSet\");\n            }\n            else if (part.length == 1) {\n                sections.push(part[0], 0);\n            }\n            else {\n                while (inserted.length < i)\n                    inserted.push(Text.empty);\n                inserted[i] = Text.of(part.slice(1));\n                sections.push(part[0], inserted[i].length);\n            }\n        }\n        return new ChangeSet(sections, inserted);\n    }\n    /**\n    @internal\n    */\n    static createSet(sections, inserted) {\n        return new ChangeSet(sections, inserted);\n    }\n}\nfunction addSection(sections, len, ins, forceJoin = false) {\n    if (len == 0 && ins <= 0)\n        return;\n    let last = sections.length - 2;\n    if (last >= 0 && ins <= 0 && ins == sections[last + 1])\n        sections[last] += len;\n    else if (len == 0 && sections[last] == 0)\n        sections[last + 1] += ins;\n    else if (forceJoin) {\n        sections[last] += len;\n        sections[last + 1] += ins;\n    }\n    else\n        sections.push(len, ins);\n}\nfunction addInsert(values, sections, value) {\n    if (value.length == 0)\n        return;\n    let index = (sections.length - 2) >> 1;\n    if (index < values.length) {\n        values[values.length - 1] = values[values.length - 1].append(value);\n    }\n    else {\n        while (values.length < index)\n            values.push(Text.empty);\n        values.push(value);\n    }\n}\nfunction iterChanges(desc, f, individual) {\n    let inserted = desc.inserted;\n    for (let posA = 0, posB = 0, i = 0; i < desc.sections.length;) {\n        let len = desc.sections[i++], ins = desc.sections[i++];\n        if (ins < 0) {\n            posA += len;\n            posB += len;\n        }\n        else {\n            let endA = posA, endB = posB, text = Text.empty;\n            for (;;) {\n                endA += len;\n                endB += ins;\n                if (ins && inserted)\n                    text = text.append(inserted[(i - 2) >> 1]);\n                if (individual || i == desc.sections.length || desc.sections[i + 1] < 0)\n                    break;\n                len = desc.sections[i++];\n                ins = desc.sections[i++];\n            }\n            f(posA, endA, posB, endB, text);\n            posA = endA;\n            posB = endB;\n        }\n    }\n}\nfunction mapSet(setA, setB, before, mkSet = false) {\n    // Produce a copy of setA that applies to the document after setB\n    // has been applied (assuming both start at the same document).\n    let sections = [], insert = mkSet ? [] : null;\n    let a = new SectionIter(setA), b = new SectionIter(setB);\n    // Iterate over both sets in parallel. inserted tracks, for changes\n    // in A that have to be processed piece-by-piece, whether their\n    // content has been inserted already, and refers to the section\n    // index.\n    for (let inserted = -1;;) {\n        if (a.ins == -1 && b.ins == -1) {\n            // Move across ranges skipped by both sets.\n            let len = Math.min(a.len, b.len);\n            addSection(sections, len, -1);\n            a.forward(len);\n            b.forward(len);\n        }\n        else if (b.ins >= 0 && (a.ins < 0 || inserted == a.i || a.off == 0 && (b.len < a.len || b.len == a.len && !before))) {\n            // If there's a change in B that comes before the next change in\n            // A (ordered by start pos, then len, then before flag), skip\n            // that (and process any changes in A it covers).\n            let len = b.len;\n            addSection(sections, b.ins, -1);\n            while (len) {\n                let piece = Math.min(a.len, len);\n                if (a.ins >= 0 && inserted < a.i && a.len <= piece) {\n                    addSection(sections, 0, a.ins);\n                    if (insert)\n                        addInsert(insert, sections, a.text);\n                    inserted = a.i;\n                }\n                a.forward(piece);\n                len -= piece;\n            }\n            b.next();\n        }\n        else if (a.ins >= 0) {\n            // Process the part of a change in A up to the start of the next\n            // non-deletion change in B (if overlapping).\n            let len = 0, left = a.len;\n            while (left) {\n                if (b.ins == -1) {\n                    let piece = Math.min(left, b.len);\n                    len += piece;\n                    left -= piece;\n                    b.forward(piece);\n                }\n                else if (b.ins == 0 && b.len < left) {\n                    left -= b.len;\n                    b.next();\n                }\n                else {\n                    break;\n                }\n            }\n            addSection(sections, len, inserted < a.i ? a.ins : 0);\n            if (insert && inserted < a.i)\n                addInsert(insert, sections, a.text);\n            inserted = a.i;\n            a.forward(a.len - left);\n        }\n        else if (a.done && b.done) {\n            return insert ? ChangeSet.createSet(sections, insert) : ChangeDesc.create(sections);\n        }\n        else {\n            throw new Error(\"Mismatched change set lengths\");\n        }\n    }\n}\nfunction composeSets(setA, setB, mkSet = false) {\n    let sections = [];\n    let insert = mkSet ? [] : null;\n    let a = new SectionIter(setA), b = new SectionIter(setB);\n    for (let open = false;;) {\n        if (a.done && b.done) {\n            return insert ? ChangeSet.createSet(sections, insert) : ChangeDesc.create(sections);\n        }\n        else if (a.ins == 0) { // Deletion in A\n            addSection(sections, a.len, 0, open);\n            a.next();\n        }\n        else if (b.len == 0 && !b.done) { // Insertion in B\n            addSection(sections, 0, b.ins, open);\n            if (insert)\n                addInsert(insert, sections, b.text);\n            b.next();\n        }\n        else if (a.done || b.done) {\n            throw new Error(\"Mismatched change set lengths\");\n        }\n        else {\n            let len = Math.min(a.len2, b.len), sectionLen = sections.length;\n            if (a.ins == -1) {\n                let insB = b.ins == -1 ? -1 : b.off ? 0 : b.ins;\n                addSection(sections, len, insB, open);\n                if (insert && insB)\n                    addInsert(insert, sections, b.text);\n            }\n            else if (b.ins == -1) {\n                addSection(sections, a.off ? 0 : a.len, len, open);\n                if (insert)\n                    addInsert(insert, sections, a.textBit(len));\n            }\n            else {\n                addSection(sections, a.off ? 0 : a.len, b.off ? 0 : b.ins, open);\n                if (insert && !b.off)\n                    addInsert(insert, sections, b.text);\n            }\n            open = (a.ins > len || b.ins >= 0 && b.len > len) && (open || sections.length > sectionLen);\n            a.forward2(len);\n            b.forward(len);\n        }\n    }\n}\nclass SectionIter {\n    constructor(set) {\n        this.set = set;\n        this.i = 0;\n        this.next();\n    }\n    next() {\n        let { sections } = this.set;\n        if (this.i < sections.length) {\n            this.len = sections[this.i++];\n            this.ins = sections[this.i++];\n        }\n        else {\n            this.len = 0;\n            this.ins = -2;\n        }\n        this.off = 0;\n    }\n    get done() { return this.ins == -2; }\n    get len2() { return this.ins < 0 ? this.len : this.ins; }\n    get text() {\n        let { inserted } = this.set, index = (this.i - 2) >> 1;\n        return index >= inserted.length ? Text.empty : inserted[index];\n    }\n    textBit(len) {\n        let { inserted } = this.set, index = (this.i - 2) >> 1;\n        return index >= inserted.length && !len ? Text.empty\n            : inserted[index].slice(this.off, len == null ? undefined : this.off + len);\n    }\n    forward(len) {\n        if (len == this.len)\n            this.next();\n        else {\n            this.len -= len;\n            this.off += len;\n        }\n    }\n    forward2(len) {\n        if (this.ins == -1)\n            this.forward(len);\n        else if (len == this.ins)\n            this.next();\n        else {\n            this.ins -= len;\n            this.off += len;\n        }\n    }\n}\n\n/**\nA single selection range. When\n[`allowMultipleSelections`](https://codemirror.net/6/docs/ref/#state.EditorState^allowMultipleSelections)\nis enabled, a [selection](https://codemirror.net/6/docs/ref/#state.EditorSelection) may hold\nmultiple ranges. By default, selections hold exactly one range.\n*/\nclass SelectionRange {\n    constructor(\n    /**\n    The lower boundary of the range.\n    */\n    from, \n    /**\n    The upper boundary of the range.\n    */\n    to, flags) {\n        this.from = from;\n        this.to = to;\n        this.flags = flags;\n    }\n    /**\n    The anchor of the range—the side that doesn't move when you\n    extend it.\n    */\n    get anchor() { return this.flags & 32 /* RangeFlag.Inverted */ ? this.to : this.from; }\n    /**\n    The head of the range, which is moved when the range is\n    [extended](https://codemirror.net/6/docs/ref/#state.SelectionRange.extend).\n    */\n    get head() { return this.flags & 32 /* RangeFlag.Inverted */ ? this.from : this.to; }\n    /**\n    True when `anchor` and `head` are at the same position.\n    */\n    get empty() { return this.from == this.to; }\n    /**\n    If this is a cursor that is explicitly associated with the\n    character on one of its sides, this returns the side. -1 means\n    the character before its position, 1 the character after, and 0\n    means no association.\n    */\n    get assoc() { return this.flags & 8 /* RangeFlag.AssocBefore */ ? -1 : this.flags & 16 /* RangeFlag.AssocAfter */ ? 1 : 0; }\n    /**\n    The bidirectional text level associated with this cursor, if\n    any.\n    */\n    get bidiLevel() {\n        let level = this.flags & 7 /* RangeFlag.BidiLevelMask */;\n        return level == 7 ? null : level;\n    }\n    /**\n    The goal column (stored vertical offset) associated with a\n    cursor. This is used to preserve the vertical position when\n    [moving](https://codemirror.net/6/docs/ref/#view.EditorView.moveVertically) across\n    lines of different length.\n    */\n    get goalColumn() {\n        let value = this.flags >> 6 /* RangeFlag.GoalColumnOffset */;\n        return value == 16777215 /* RangeFlag.NoGoalColumn */ ? undefined : value;\n    }\n    /**\n    Map this range through a change, producing a valid range in the\n    updated document.\n    */\n    map(change, assoc = -1) {\n        let from, to;\n        if (this.empty) {\n            from = to = change.mapPos(this.from, assoc);\n        }\n        else {\n            from = change.mapPos(this.from, 1);\n            to = change.mapPos(this.to, -1);\n        }\n        return from == this.from && to == this.to ? this : new SelectionRange(from, to, this.flags);\n    }\n    /**\n    Extend this range to cover at least `from` to `to`.\n    */\n    extend(from, to = from) {\n        if (from <= this.anchor && to >= this.anchor)\n            return EditorSelection.range(from, to);\n        let head = Math.abs(from - this.anchor) > Math.abs(to - this.anchor) ? from : to;\n        return EditorSelection.range(this.anchor, head);\n    }\n    /**\n    Compare this range to another range.\n    */\n    eq(other, includeAssoc = false) {\n        return this.anchor == other.anchor && this.head == other.head &&\n            (!includeAssoc || !this.empty || this.assoc == other.assoc);\n    }\n    /**\n    Return a JSON-serializable object representing the range.\n    */\n    toJSON() { return { anchor: this.anchor, head: this.head }; }\n    /**\n    Convert a JSON representation of a range to a `SelectionRange`\n    instance.\n    */\n    static fromJSON(json) {\n        if (!json || typeof json.anchor != \"number\" || typeof json.head != \"number\")\n            throw new RangeError(\"Invalid JSON representation for SelectionRange\");\n        return EditorSelection.range(json.anchor, json.head);\n    }\n    /**\n    @internal\n    */\n    static create(from, to, flags) {\n        return new SelectionRange(from, to, flags);\n    }\n}\n/**\nAn editor selection holds one or more selection ranges.\n*/\nclass EditorSelection {\n    constructor(\n    /**\n    The ranges in the selection, sorted by position. Ranges cannot\n    overlap (but they may touch, if they aren't empty).\n    */\n    ranges, \n    /**\n    The index of the _main_ range in the selection (which is\n    usually the range that was added last).\n    */\n    mainIndex) {\n        this.ranges = ranges;\n        this.mainIndex = mainIndex;\n    }\n    /**\n    Map a selection through a change. Used to adjust the selection\n    position for changes.\n    */\n    map(change, assoc = -1) {\n        if (change.empty)\n            return this;\n        return EditorSelection.create(this.ranges.map(r => r.map(change, assoc)), this.mainIndex);\n    }\n    /**\n    Compare this selection to another selection. By default, ranges\n    are compared only by position. When `includeAssoc` is true,\n    cursor ranges must also have the same\n    [`assoc`](https://codemirror.net/6/docs/ref/#state.SelectionRange.assoc) value.\n    */\n    eq(other, includeAssoc = false) {\n        if (this.ranges.length != other.ranges.length ||\n            this.mainIndex != other.mainIndex)\n            return false;\n        for (let i = 0; i < this.ranges.length; i++)\n            if (!this.ranges[i].eq(other.ranges[i], includeAssoc))\n                return false;\n        return true;\n    }\n    /**\n    Get the primary selection range. Usually, you should make sure\n    your code applies to _all_ ranges, by using methods like\n    [`changeByRange`](https://codemirror.net/6/docs/ref/#state.EditorState.changeByRange).\n    */\n    get main() { return this.ranges[this.mainIndex]; }\n    /**\n    Make sure the selection only has one range. Returns a selection\n    holding only the main range from this selection.\n    */\n    asSingle() {\n        return this.ranges.length == 1 ? this : new EditorSelection([this.main], 0);\n    }\n    /**\n    Extend this selection with an extra range.\n    */\n    addRange(range, main = true) {\n        return EditorSelection.create([range].concat(this.ranges), main ? 0 : this.mainIndex + 1);\n    }\n    /**\n    Replace a given range with another range, and then normalize the\n    selection to merge and sort ranges if necessary.\n    */\n    replaceRange(range, which = this.mainIndex) {\n        let ranges = this.ranges.slice();\n        ranges[which] = range;\n        return EditorSelection.create(ranges, this.mainIndex);\n    }\n    /**\n    Convert this selection to an object that can be serialized to\n    JSON.\n    */\n    toJSON() {\n        return { ranges: this.ranges.map(r => r.toJSON()), main: this.mainIndex };\n    }\n    /**\n    Create a selection from a JSON representation.\n    */\n    static fromJSON(json) {\n        if (!json || !Array.isArray(json.ranges) || typeof json.main != \"number\" || json.main >= json.ranges.length)\n            throw new RangeError(\"Invalid JSON representation for EditorSelection\");\n        return new EditorSelection(json.ranges.map((r) => SelectionRange.fromJSON(r)), json.main);\n    }\n    /**\n    Create a selection holding a single range.\n    */\n    static single(anchor, head = anchor) {\n        return new EditorSelection([EditorSelection.range(anchor, head)], 0);\n    }\n    /**\n    Sort and merge the given set of ranges, creating a valid\n    selection.\n    */\n    static create(ranges, mainIndex = 0) {\n        if (ranges.length == 0)\n            throw new RangeError(\"A selection needs at least one range\");\n        for (let pos = 0, i = 0; i < ranges.length; i++) {\n            let range = ranges[i];\n            if (range.empty ? range.from <= pos : range.from < pos)\n                return EditorSelection.normalized(ranges.slice(), mainIndex);\n            pos = range.to;\n        }\n        return new EditorSelection(ranges, mainIndex);\n    }\n    /**\n    Create a cursor selection range at the given position. You can\n    safely ignore the optional arguments in most situations.\n    */\n    static cursor(pos, assoc = 0, bidiLevel, goalColumn) {\n        return SelectionRange.create(pos, pos, (assoc == 0 ? 0 : assoc < 0 ? 8 /* RangeFlag.AssocBefore */ : 16 /* RangeFlag.AssocAfter */) |\n            (bidiLevel == null ? 7 : Math.min(6, bidiLevel)) |\n            ((goalColumn !== null && goalColumn !== void 0 ? goalColumn : 16777215 /* RangeFlag.NoGoalColumn */) << 6 /* RangeFlag.GoalColumnOffset */));\n    }\n    /**\n    Create a selection range.\n    */\n    static range(anchor, head, goalColumn, bidiLevel) {\n        let flags = ((goalColumn !== null && goalColumn !== void 0 ? goalColumn : 16777215 /* RangeFlag.NoGoalColumn */) << 6 /* RangeFlag.GoalColumnOffset */) |\n            (bidiLevel == null ? 7 : Math.min(6, bidiLevel));\n        return head < anchor ? SelectionRange.create(head, anchor, 32 /* RangeFlag.Inverted */ | 16 /* RangeFlag.AssocAfter */ | flags)\n            : SelectionRange.create(anchor, head, (head > anchor ? 8 /* RangeFlag.AssocBefore */ : 0) | flags);\n    }\n    /**\n    @internal\n    */\n    static normalized(ranges, mainIndex = 0) {\n        let main = ranges[mainIndex];\n        ranges.sort((a, b) => a.from - b.from);\n        mainIndex = ranges.indexOf(main);\n        for (let i = 1; i < ranges.length; i++) {\n            let range = ranges[i], prev = ranges[i - 1];\n            if (range.empty ? range.from <= prev.to : range.from < prev.to) {\n                let from = prev.from, to = Math.max(range.to, prev.to);\n                if (i <= mainIndex)\n                    mainIndex--;\n                ranges.splice(--i, 2, range.anchor > range.head ? EditorSelection.range(to, from) : EditorSelection.range(from, to));\n            }\n        }\n        return new EditorSelection(ranges, mainIndex);\n    }\n}\nfunction checkSelection(selection, docLength) {\n    for (let range of selection.ranges)\n        if (range.to > docLength)\n            throw new RangeError(\"Selection points outside of document\");\n}\n\nlet nextID = 0;\n/**\nA facet is a labeled value that is associated with an editor\nstate. It takes inputs from any number of extensions, and combines\nthose into a single output value.\n\nExamples of uses of facets are the [tab\nsize](https://codemirror.net/6/docs/ref/#state.EditorState^tabSize), [editor\nattributes](https://codemirror.net/6/docs/ref/#view.EditorView^editorAttributes), and [update\nlisteners](https://codemirror.net/6/docs/ref/#view.EditorView^updateListener).\n\nNote that `Facet` instances can be used anywhere where\n[`FacetReader`](https://codemirror.net/6/docs/ref/#state.FacetReader) is expected.\n*/\nclass Facet {\n    constructor(\n    /**\n    @internal\n    */\n    combine, \n    /**\n    @internal\n    */\n    compareInput, \n    /**\n    @internal\n    */\n    compare, isStatic, enables) {\n        this.combine = combine;\n        this.compareInput = compareInput;\n        this.compare = compare;\n        this.isStatic = isStatic;\n        /**\n        @internal\n        */\n        this.id = nextID++;\n        this.default = combine([]);\n        this.extensions = typeof enables == \"function\" ? enables(this) : enables;\n    }\n    /**\n    Returns a facet reader for this facet, which can be used to\n    [read](https://codemirror.net/6/docs/ref/#state.EditorState.facet) it but not to define values for it.\n    */\n    get reader() { return this; }\n    /**\n    Define a new facet.\n    */\n    static define(config = {}) {\n        return new Facet(config.combine || ((a) => a), config.compareInput || ((a, b) => a === b), config.compare || (!config.combine ? sameArray : (a, b) => a === b), !!config.static, config.enables);\n    }\n    /**\n    Returns an extension that adds the given value to this facet.\n    */\n    of(value) {\n        return new FacetProvider([], this, 0 /* Provider.Static */, value);\n    }\n    /**\n    Create an extension that computes a value for the facet from a\n    state. You must take care to declare the parts of the state that\n    this value depends on, since your function is only called again\n    for a new state when one of those parts changed.\n    \n    In cases where your value depends only on a single field, you'll\n    want to use the [`from`](https://codemirror.net/6/docs/ref/#state.Facet.from) method instead.\n    */\n    compute(deps, get) {\n        if (this.isStatic)\n            throw new Error(\"Can't compute a static facet\");\n        return new FacetProvider(deps, this, 1 /* Provider.Single */, get);\n    }\n    /**\n    Create an extension that computes zero or more values for this\n    facet from a state.\n    */\n    computeN(deps, get) {\n        if (this.isStatic)\n            throw new Error(\"Can't compute a static facet\");\n        return new FacetProvider(deps, this, 2 /* Provider.Multi */, get);\n    }\n    from(field, get) {\n        if (!get)\n            get = x => x;\n        return this.compute([field], state => get(state.field(field)));\n    }\n}\nfunction sameArray(a, b) {\n    return a == b || a.length == b.length && a.every((e, i) => e === b[i]);\n}\nclass FacetProvider {\n    constructor(dependencies, facet, type, value) {\n        this.dependencies = dependencies;\n        this.facet = facet;\n        this.type = type;\n        this.value = value;\n        this.id = nextID++;\n    }\n    dynamicSlot(addresses) {\n        var _a;\n        let getter = this.value;\n        let compare = this.facet.compareInput;\n        let id = this.id, idx = addresses[id] >> 1, multi = this.type == 2 /* Provider.Multi */;\n        let depDoc = false, depSel = false, depAddrs = [];\n        for (let dep of this.dependencies) {\n            if (dep == \"doc\")\n                depDoc = true;\n            else if (dep == \"selection\")\n                depSel = true;\n            else if ((((_a = addresses[dep.id]) !== null && _a !== void 0 ? _a : 1) & 1) == 0)\n                depAddrs.push(addresses[dep.id]);\n        }\n        return {\n            create(state) {\n                state.values[idx] = getter(state);\n                return 1 /* SlotStatus.Changed */;\n            },\n            update(state, tr) {\n                if ((depDoc && tr.docChanged) || (depSel && (tr.docChanged || tr.selection)) || ensureAll(state, depAddrs)) {\n                    let newVal = getter(state);\n                    if (multi ? !compareArray(newVal, state.values[idx], compare) : !compare(newVal, state.values[idx])) {\n                        state.values[idx] = newVal;\n                        return 1 /* SlotStatus.Changed */;\n                    }\n                }\n                return 0;\n            },\n            reconfigure: (state, oldState) => {\n                let newVal, oldAddr = oldState.config.address[id];\n                if (oldAddr != null) {\n                    let oldVal = getAddr(oldState, oldAddr);\n                    if (this.dependencies.every(dep => {\n                        return dep instanceof Facet ? oldState.facet(dep) === state.facet(dep) :\n                            dep instanceof StateField ? oldState.field(dep, false) == state.field(dep, false) : true;\n                    }) || (multi ? compareArray(newVal = getter(state), oldVal, compare) : compare(newVal = getter(state), oldVal))) {\n                        state.values[idx] = oldVal;\n                        return 0;\n                    }\n                }\n                else {\n                    newVal = getter(state);\n                }\n                state.values[idx] = newVal;\n                return 1 /* SlotStatus.Changed */;\n            }\n        };\n    }\n}\nfunction compareArray(a, b, compare) {\n    if (a.length != b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (!compare(a[i], b[i]))\n            return false;\n    return true;\n}\nfunction ensureAll(state, addrs) {\n    let changed = false;\n    for (let addr of addrs)\n        if (ensureAddr(state, addr) & 1 /* SlotStatus.Changed */)\n            changed = true;\n    return changed;\n}\nfunction dynamicFacetSlot(addresses, facet, providers) {\n    let providerAddrs = providers.map(p => addresses[p.id]);\n    let providerTypes = providers.map(p => p.type);\n    let dynamic = providerAddrs.filter(p => !(p & 1));\n    let idx = addresses[facet.id] >> 1;\n    function get(state) {\n        let values = [];\n        for (let i = 0; i < providerAddrs.length; i++) {\n            let value = getAddr(state, providerAddrs[i]);\n            if (providerTypes[i] == 2 /* Provider.Multi */)\n                for (let val of value)\n                    values.push(val);\n            else\n                values.push(value);\n        }\n        return facet.combine(values);\n    }\n    return {\n        create(state) {\n            for (let addr of providerAddrs)\n                ensureAddr(state, addr);\n            state.values[idx] = get(state);\n            return 1 /* SlotStatus.Changed */;\n        },\n        update(state, tr) {\n            if (!ensureAll(state, dynamic))\n                return 0;\n            let value = get(state);\n            if (facet.compare(value, state.values[idx]))\n                return 0;\n            state.values[idx] = value;\n            return 1 /* SlotStatus.Changed */;\n        },\n        reconfigure(state, oldState) {\n            let depChanged = ensureAll(state, providerAddrs);\n            let oldProviders = oldState.config.facets[facet.id], oldValue = oldState.facet(facet);\n            if (oldProviders && !depChanged && sameArray(providers, oldProviders)) {\n                state.values[idx] = oldValue;\n                return 0;\n            }\n            let value = get(state);\n            if (facet.compare(value, oldValue)) {\n                state.values[idx] = oldValue;\n                return 0;\n            }\n            state.values[idx] = value;\n            return 1 /* SlotStatus.Changed */;\n        }\n    };\n}\nconst initField = /*@__PURE__*/Facet.define({ static: true });\n/**\nFields can store additional information in an editor state, and\nkeep it in sync with the rest of the state.\n*/\nclass StateField {\n    constructor(\n    /**\n    @internal\n    */\n    id, createF, updateF, compareF, \n    /**\n    @internal\n    */\n    spec) {\n        this.id = id;\n        this.createF = createF;\n        this.updateF = updateF;\n        this.compareF = compareF;\n        this.spec = spec;\n        /**\n        @internal\n        */\n        this.provides = undefined;\n    }\n    /**\n    Define a state field.\n    */\n    static define(config) {\n        let field = new StateField(nextID++, config.create, config.update, config.compare || ((a, b) => a === b), config);\n        if (config.provide)\n            field.provides = config.provide(field);\n        return field;\n    }\n    create(state) {\n        let init = state.facet(initField).find(i => i.field == this);\n        return ((init === null || init === void 0 ? void 0 : init.create) || this.createF)(state);\n    }\n    /**\n    @internal\n    */\n    slot(addresses) {\n        let idx = addresses[this.id] >> 1;\n        return {\n            create: (state) => {\n                state.values[idx] = this.create(state);\n                return 1 /* SlotStatus.Changed */;\n            },\n            update: (state, tr) => {\n                let oldVal = state.values[idx];\n                let value = this.updateF(oldVal, tr);\n                if (this.compareF(oldVal, value))\n                    return 0;\n                state.values[idx] = value;\n                return 1 /* SlotStatus.Changed */;\n            },\n            reconfigure: (state, oldState) => {\n                if (oldState.config.address[this.id] != null) {\n                    state.values[idx] = oldState.field(this);\n                    return 0;\n                }\n                state.values[idx] = this.create(state);\n                return 1 /* SlotStatus.Changed */;\n            }\n        };\n    }\n    /**\n    Returns an extension that enables this field and overrides the\n    way it is initialized. Can be useful when you need to provide a\n    non-default starting value for the field.\n    */\n    init(create) {\n        return [this, initField.of({ field: this, create })];\n    }\n    /**\n    State field instances can be used as\n    [`Extension`](https://codemirror.net/6/docs/ref/#state.Extension) values to enable the field in a\n    given state.\n    */\n    get extension() { return this; }\n}\nconst Prec_ = { lowest: 4, low: 3, default: 2, high: 1, highest: 0 };\nfunction prec(value) {\n    return (ext) => new PrecExtension(ext, value);\n}\n/**\nBy default extensions are registered in the order they are found\nin the flattened form of nested array that was provided.\nIndividual extension values can be assigned a precedence to\noverride this. Extensions that do not have a precedence set get\nthe precedence of the nearest parent with a precedence, or\n[`default`](https://codemirror.net/6/docs/ref/#state.Prec.default) if there is no such parent. The\nfinal ordering of extensions is determined by first sorting by\nprecedence and then by order within each precedence.\n*/\nconst Prec = {\n    /**\n    The highest precedence level, for extensions that should end up\n    near the start of the precedence ordering.\n    */\n    highest: /*@__PURE__*/prec(Prec_.highest),\n    /**\n    A higher-than-default precedence, for extensions that should\n    come before those with default precedence.\n    */\n    high: /*@__PURE__*/prec(Prec_.high),\n    /**\n    The default precedence, which is also used for extensions\n    without an explicit precedence.\n    */\n    default: /*@__PURE__*/prec(Prec_.default),\n    /**\n    A lower-than-default precedence.\n    */\n    low: /*@__PURE__*/prec(Prec_.low),\n    /**\n    The lowest precedence level. Meant for things that should end up\n    near the end of the extension order.\n    */\n    lowest: /*@__PURE__*/prec(Prec_.lowest)\n};\nclass PrecExtension {\n    constructor(inner, prec) {\n        this.inner = inner;\n        this.prec = prec;\n    }\n}\n/**\nExtension compartments can be used to make a configuration\ndynamic. By [wrapping](https://codemirror.net/6/docs/ref/#state.Compartment.of) part of your\nconfiguration in a compartment, you can later\n[replace](https://codemirror.net/6/docs/ref/#state.Compartment.reconfigure) that part through a\ntransaction.\n*/\nclass Compartment {\n    /**\n    Create an instance of this compartment to add to your [state\n    configuration](https://codemirror.net/6/docs/ref/#state.EditorStateConfig.extensions).\n    */\n    of(ext) { return new CompartmentInstance(this, ext); }\n    /**\n    Create an [effect](https://codemirror.net/6/docs/ref/#state.TransactionSpec.effects) that\n    reconfigures this compartment.\n    */\n    reconfigure(content) {\n        return Compartment.reconfigure.of({ compartment: this, extension: content });\n    }\n    /**\n    Get the current content of the compartment in the state, or\n    `undefined` if it isn't present.\n    */\n    get(state) {\n        return state.config.compartments.get(this);\n    }\n}\nclass CompartmentInstance {\n    constructor(compartment, inner) {\n        this.compartment = compartment;\n        this.inner = inner;\n    }\n}\nclass Configuration {\n    constructor(base, compartments, dynamicSlots, address, staticValues, facets) {\n        this.base = base;\n        this.compartments = compartments;\n        this.dynamicSlots = dynamicSlots;\n        this.address = address;\n        this.staticValues = staticValues;\n        this.facets = facets;\n        this.statusTemplate = [];\n        while (this.statusTemplate.length < dynamicSlots.length)\n            this.statusTemplate.push(0 /* SlotStatus.Unresolved */);\n    }\n    staticFacet(facet) {\n        let addr = this.address[facet.id];\n        return addr == null ? facet.default : this.staticValues[addr >> 1];\n    }\n    static resolve(base, compartments, oldState) {\n        let fields = [];\n        let facets = Object.create(null);\n        let newCompartments = new Map();\n        for (let ext of flatten(base, compartments, newCompartments)) {\n            if (ext instanceof StateField)\n                fields.push(ext);\n            else\n                (facets[ext.facet.id] || (facets[ext.facet.id] = [])).push(ext);\n        }\n        let address = Object.create(null);\n        let staticValues = [];\n        let dynamicSlots = [];\n        for (let field of fields) {\n            address[field.id] = dynamicSlots.length << 1;\n            dynamicSlots.push(a => field.slot(a));\n        }\n        let oldFacets = oldState === null || oldState === void 0 ? void 0 : oldState.config.facets;\n        for (let id in facets) {\n            let providers = facets[id], facet = providers[0].facet;\n            let oldProviders = oldFacets && oldFacets[id] || [];\n            if (providers.every(p => p.type == 0 /* Provider.Static */)) {\n                address[facet.id] = (staticValues.length << 1) | 1;\n                if (sameArray(oldProviders, providers)) {\n                    staticValues.push(oldState.facet(facet));\n                }\n                else {\n                    let value = facet.combine(providers.map(p => p.value));\n                    staticValues.push(oldState && facet.compare(value, oldState.facet(facet)) ? oldState.facet(facet) : value);\n                }\n            }\n            else {\n                for (let p of providers) {\n                    if (p.type == 0 /* Provider.Static */) {\n                        address[p.id] = (staticValues.length << 1) | 1;\n                        staticValues.push(p.value);\n                    }\n                    else {\n                        address[p.id] = dynamicSlots.length << 1;\n                        dynamicSlots.push(a => p.dynamicSlot(a));\n                    }\n                }\n                address[facet.id] = dynamicSlots.length << 1;\n                dynamicSlots.push(a => dynamicFacetSlot(a, facet, providers));\n            }\n        }\n        let dynamic = dynamicSlots.map(f => f(address));\n        return new Configuration(base, newCompartments, dynamic, address, staticValues, facets);\n    }\n}\nfunction flatten(extension, compartments, newCompartments) {\n    let result = [[], [], [], [], []];\n    let seen = new Map();\n    function inner(ext, prec) {\n        let known = seen.get(ext);\n        if (known != null) {\n            if (known <= prec)\n                return;\n            let found = result[known].indexOf(ext);\n            if (found > -1)\n                result[known].splice(found, 1);\n            if (ext instanceof CompartmentInstance)\n                newCompartments.delete(ext.compartment);\n        }\n        seen.set(ext, prec);\n        if (Array.isArray(ext)) {\n            for (let e of ext)\n                inner(e, prec);\n        }\n        else if (ext instanceof CompartmentInstance) {\n            if (newCompartments.has(ext.compartment))\n                throw new RangeError(`Duplicate use of compartment in extensions`);\n            let content = compartments.get(ext.compartment) || ext.inner;\n            newCompartments.set(ext.compartment, content);\n            inner(content, prec);\n        }\n        else if (ext instanceof PrecExtension) {\n            inner(ext.inner, ext.prec);\n        }\n        else if (ext instanceof StateField) {\n            result[prec].push(ext);\n            if (ext.provides)\n                inner(ext.provides, prec);\n        }\n        else if (ext instanceof FacetProvider) {\n            result[prec].push(ext);\n            if (ext.facet.extensions)\n                inner(ext.facet.extensions, Prec_.default);\n        }\n        else {\n            let content = ext.extension;\n            if (!content)\n                throw new Error(`Unrecognized extension value in extension set (${ext}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);\n            inner(content, prec);\n        }\n    }\n    inner(extension, Prec_.default);\n    return result.reduce((a, b) => a.concat(b));\n}\nfunction ensureAddr(state, addr) {\n    if (addr & 1)\n        return 2 /* SlotStatus.Computed */;\n    let idx = addr >> 1;\n    let status = state.status[idx];\n    if (status == 4 /* SlotStatus.Computing */)\n        throw new Error(\"Cyclic dependency between fields and/or facets\");\n    if (status & 2 /* SlotStatus.Computed */)\n        return status;\n    state.status[idx] = 4 /* SlotStatus.Computing */;\n    let changed = state.computeSlot(state, state.config.dynamicSlots[idx]);\n    return state.status[idx] = 2 /* SlotStatus.Computed */ | changed;\n}\nfunction getAddr(state, addr) {\n    return addr & 1 ? state.config.staticValues[addr >> 1] : state.values[addr >> 1];\n}\n\nconst languageData = /*@__PURE__*/Facet.define();\nconst allowMultipleSelections = /*@__PURE__*/Facet.define({\n    combine: values => values.some(v => v),\n    static: true\n});\nconst lineSeparator = /*@__PURE__*/Facet.define({\n    combine: values => values.length ? values[0] : undefined,\n    static: true\n});\nconst changeFilter = /*@__PURE__*/Facet.define();\nconst transactionFilter = /*@__PURE__*/Facet.define();\nconst transactionExtender = /*@__PURE__*/Facet.define();\nconst readOnly = /*@__PURE__*/Facet.define({\n    combine: values => values.length ? values[0] : false\n});\n\n/**\nAnnotations are tagged values that are used to add metadata to\ntransactions in an extensible way. They should be used to model\nthings that effect the entire transaction (such as its [time\nstamp](https://codemirror.net/6/docs/ref/#state.Transaction^time) or information about its\n[origin](https://codemirror.net/6/docs/ref/#state.Transaction^userEvent)). For effects that happen\n_alongside_ the other changes made by the transaction, [state\neffects](https://codemirror.net/6/docs/ref/#state.StateEffect) are more appropriate.\n*/\nclass Annotation {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The annotation type.\n    */\n    type, \n    /**\n    The value of this annotation.\n    */\n    value) {\n        this.type = type;\n        this.value = value;\n    }\n    /**\n    Define a new type of annotation.\n    */\n    static define() { return new AnnotationType(); }\n}\n/**\nMarker that identifies a type of [annotation](https://codemirror.net/6/docs/ref/#state.Annotation).\n*/\nclass AnnotationType {\n    /**\n    Create an instance of this annotation.\n    */\n    of(value) { return new Annotation(this, value); }\n}\n/**\nRepresentation of a type of state effect. Defined with\n[`StateEffect.define`](https://codemirror.net/6/docs/ref/#state.StateEffect^define).\n*/\nclass StateEffectType {\n    /**\n    @internal\n    */\n    constructor(\n    // The `any` types in these function types are there to work\n    // around TypeScript issue #37631, where the type guard on\n    // `StateEffect.is` mysteriously stops working when these properly\n    // have type `Value`.\n    /**\n    @internal\n    */\n    map) {\n        this.map = map;\n    }\n    /**\n    Create a [state effect](https://codemirror.net/6/docs/ref/#state.StateEffect) instance of this\n    type.\n    */\n    of(value) { return new StateEffect(this, value); }\n}\n/**\nState effects can be used to represent additional effects\nassociated with a [transaction](https://codemirror.net/6/docs/ref/#state.Transaction.effects). They\nare often useful to model changes to custom [state\nfields](https://codemirror.net/6/docs/ref/#state.StateField), when those changes aren't implicit in\ndocument or selection changes.\n*/\nclass StateEffect {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    @internal\n    */\n    type, \n    /**\n    The value of this effect.\n    */\n    value) {\n        this.type = type;\n        this.value = value;\n    }\n    /**\n    Map this effect through a position mapping. Will return\n    `undefined` when that ends up deleting the effect.\n    */\n    map(mapping) {\n        let mapped = this.type.map(this.value, mapping);\n        return mapped === undefined ? undefined : mapped == this.value ? this : new StateEffect(this.type, mapped);\n    }\n    /**\n    Tells you whether this effect object is of a given\n    [type](https://codemirror.net/6/docs/ref/#state.StateEffectType).\n    */\n    is(type) { return this.type == type; }\n    /**\n    Define a new effect type. The type parameter indicates the type\n    of values that his effect holds. It should be a type that\n    doesn't include `undefined`, since that is used in\n    [mapping](https://codemirror.net/6/docs/ref/#state.StateEffect.map) to indicate that an effect is\n    removed.\n    */\n    static define(spec = {}) {\n        return new StateEffectType(spec.map || (v => v));\n    }\n    /**\n    Map an array of effects through a change set.\n    */\n    static mapEffects(effects, mapping) {\n        if (!effects.length)\n            return effects;\n        let result = [];\n        for (let effect of effects) {\n            let mapped = effect.map(mapping);\n            if (mapped)\n                result.push(mapped);\n        }\n        return result;\n    }\n}\n/**\nThis effect can be used to reconfigure the root extensions of\nthe editor. Doing this will discard any extensions\n[appended](https://codemirror.net/6/docs/ref/#state.StateEffect^appendConfig), but does not reset\nthe content of [reconfigured](https://codemirror.net/6/docs/ref/#state.Compartment.reconfigure)\ncompartments.\n*/\nStateEffect.reconfigure = /*@__PURE__*/StateEffect.define();\n/**\nAppend extensions to the top-level configuration of the editor.\n*/\nStateEffect.appendConfig = /*@__PURE__*/StateEffect.define();\n/**\nChanges to the editor state are grouped into transactions.\nTypically, a user action creates a single transaction, which may\ncontain any number of document changes, may change the selection,\nor have other effects. Create a transaction by calling\n[`EditorState.update`](https://codemirror.net/6/docs/ref/#state.EditorState.update), or immediately\ndispatch one by calling\n[`EditorView.dispatch`](https://codemirror.net/6/docs/ref/#view.EditorView.dispatch).\n*/\nclass Transaction {\n    constructor(\n    /**\n    The state from which the transaction starts.\n    */\n    startState, \n    /**\n    The document changes made by this transaction.\n    */\n    changes, \n    /**\n    The selection set by this transaction, or undefined if it\n    doesn't explicitly set a selection.\n    */\n    selection, \n    /**\n    The effects added to the transaction.\n    */\n    effects, \n    /**\n    @internal\n    */\n    annotations, \n    /**\n    Whether the selection should be scrolled into view after this\n    transaction is dispatched.\n    */\n    scrollIntoView) {\n        this.startState = startState;\n        this.changes = changes;\n        this.selection = selection;\n        this.effects = effects;\n        this.annotations = annotations;\n        this.scrollIntoView = scrollIntoView;\n        /**\n        @internal\n        */\n        this._doc = null;\n        /**\n        @internal\n        */\n        this._state = null;\n        if (selection)\n            checkSelection(selection, changes.newLength);\n        if (!annotations.some((a) => a.type == Transaction.time))\n            this.annotations = annotations.concat(Transaction.time.of(Date.now()));\n    }\n    /**\n    @internal\n    */\n    static create(startState, changes, selection, effects, annotations, scrollIntoView) {\n        return new Transaction(startState, changes, selection, effects, annotations, scrollIntoView);\n    }\n    /**\n    The new document produced by the transaction. Contrary to\n    [`.state`](https://codemirror.net/6/docs/ref/#state.Transaction.state)`.doc`, accessing this won't\n    force the entire new state to be computed right away, so it is\n    recommended that [transaction\n    filters](https://codemirror.net/6/docs/ref/#state.EditorState^transactionFilter) use this getter\n    when they need to look at the new document.\n    */\n    get newDoc() {\n        return this._doc || (this._doc = this.changes.apply(this.startState.doc));\n    }\n    /**\n    The new selection produced by the transaction. If\n    [`this.selection`](https://codemirror.net/6/docs/ref/#state.Transaction.selection) is undefined,\n    this will [map](https://codemirror.net/6/docs/ref/#state.EditorSelection.map) the start state's\n    current selection through the changes made by the transaction.\n    */\n    get newSelection() {\n        return this.selection || this.startState.selection.map(this.changes);\n    }\n    /**\n    The new state created by the transaction. Computed on demand\n    (but retained for subsequent access), so it is recommended not to\n    access it in [transaction\n    filters](https://codemirror.net/6/docs/ref/#state.EditorState^transactionFilter) when possible.\n    */\n    get state() {\n        if (!this._state)\n            this.startState.applyTransaction(this);\n        return this._state;\n    }\n    /**\n    Get the value of the given annotation type, if any.\n    */\n    annotation(type) {\n        for (let ann of this.annotations)\n            if (ann.type == type)\n                return ann.value;\n        return undefined;\n    }\n    /**\n    Indicates whether the transaction changed the document.\n    */\n    get docChanged() { return !this.changes.empty; }\n    /**\n    Indicates whether this transaction reconfigures the state\n    (through a [configuration compartment](https://codemirror.net/6/docs/ref/#state.Compartment) or\n    with a top-level configuration\n    [effect](https://codemirror.net/6/docs/ref/#state.StateEffect^reconfigure).\n    */\n    get reconfigured() { return this.startState.config != this.state.config; }\n    /**\n    Returns true if the transaction has a [user\n    event](https://codemirror.net/6/docs/ref/#state.Transaction^userEvent) annotation that is equal to\n    or more specific than `event`. For example, if the transaction\n    has `\"select.pointer\"` as user event, `\"select\"` and\n    `\"select.pointer\"` will match it.\n    */\n    isUserEvent(event) {\n        let e = this.annotation(Transaction.userEvent);\n        return !!(e && (e == event || e.length > event.length && e.slice(0, event.length) == event && e[event.length] == \".\"));\n    }\n}\n/**\nAnnotation used to store transaction timestamps. Automatically\nadded to every transaction, holding `Date.now()`.\n*/\nTransaction.time = /*@__PURE__*/Annotation.define();\n/**\nAnnotation used to associate a transaction with a user interface\nevent. Holds a string identifying the event, using a\ndot-separated format to support attaching more specific\ninformation. The events used by the core libraries are:\n\n - `\"input\"` when content is entered\n   - `\"input.type\"` for typed input\n     - `\"input.type.compose\"` for composition\n   - `\"input.paste\"` for pasted input\n   - `\"input.drop\"` when adding content with drag-and-drop\n   - `\"input.complete\"` when autocompleting\n - `\"delete\"` when the user deletes content\n   - `\"delete.selection\"` when deleting the selection\n   - `\"delete.forward\"` when deleting forward from the selection\n   - `\"delete.backward\"` when deleting backward from the selection\n   - `\"delete.cut\"` when cutting to the clipboard\n - `\"move\"` when content is moved\n   - `\"move.drop\"` when content is moved within the editor through drag-and-drop\n - `\"select\"` when explicitly changing the selection\n   - `\"select.pointer\"` when selecting with a mouse or other pointing device\n - `\"undo\"` and `\"redo\"` for history actions\n\nUse [`isUserEvent`](https://codemirror.net/6/docs/ref/#state.Transaction.isUserEvent) to check\nwhether the annotation matches a given event.\n*/\nTransaction.userEvent = /*@__PURE__*/Annotation.define();\n/**\nAnnotation indicating whether a transaction should be added to\nthe undo history or not.\n*/\nTransaction.addToHistory = /*@__PURE__*/Annotation.define();\n/**\nAnnotation indicating (when present and true) that a transaction\nrepresents a change made by some other actor, not the user. This\nis used, for example, to tag other people's changes in\ncollaborative editing.\n*/\nTransaction.remote = /*@__PURE__*/Annotation.define();\nfunction joinRanges(a, b) {\n    let result = [];\n    for (let iA = 0, iB = 0;;) {\n        let from, to;\n        if (iA < a.length && (iB == b.length || b[iB] >= a[iA])) {\n            from = a[iA++];\n            to = a[iA++];\n        }\n        else if (iB < b.length) {\n            from = b[iB++];\n            to = b[iB++];\n        }\n        else\n            return result;\n        if (!result.length || result[result.length - 1] < from)\n            result.push(from, to);\n        else if (result[result.length - 1] < to)\n            result[result.length - 1] = to;\n    }\n}\nfunction mergeTransaction(a, b, sequential) {\n    var _a;\n    let mapForA, mapForB, changes;\n    if (sequential) {\n        mapForA = b.changes;\n        mapForB = ChangeSet.empty(b.changes.length);\n        changes = a.changes.compose(b.changes);\n    }\n    else {\n        mapForA = b.changes.map(a.changes);\n        mapForB = a.changes.mapDesc(b.changes, true);\n        changes = a.changes.compose(mapForA);\n    }\n    return {\n        changes,\n        selection: b.selection ? b.selection.map(mapForB) : (_a = a.selection) === null || _a === void 0 ? void 0 : _a.map(mapForA),\n        effects: StateEffect.mapEffects(a.effects, mapForA).concat(StateEffect.mapEffects(b.effects, mapForB)),\n        annotations: a.annotations.length ? a.annotations.concat(b.annotations) : b.annotations,\n        scrollIntoView: a.scrollIntoView || b.scrollIntoView\n    };\n}\nfunction resolveTransactionInner(state, spec, docSize) {\n    let sel = spec.selection, annotations = asArray(spec.annotations);\n    if (spec.userEvent)\n        annotations = annotations.concat(Transaction.userEvent.of(spec.userEvent));\n    return {\n        changes: spec.changes instanceof ChangeSet ? spec.changes\n            : ChangeSet.of(spec.changes || [], docSize, state.facet(lineSeparator)),\n        selection: sel && (sel instanceof EditorSelection ? sel : EditorSelection.single(sel.anchor, sel.head)),\n        effects: asArray(spec.effects),\n        annotations,\n        scrollIntoView: !!spec.scrollIntoView\n    };\n}\nfunction resolveTransaction(state, specs, filter) {\n    let s = resolveTransactionInner(state, specs.length ? specs[0] : {}, state.doc.length);\n    if (specs.length && specs[0].filter === false)\n        filter = false;\n    for (let i = 1; i < specs.length; i++) {\n        if (specs[i].filter === false)\n            filter = false;\n        let seq = !!specs[i].sequential;\n        s = mergeTransaction(s, resolveTransactionInner(state, specs[i], seq ? s.changes.newLength : state.doc.length), seq);\n    }\n    let tr = Transaction.create(state, s.changes, s.selection, s.effects, s.annotations, s.scrollIntoView);\n    return extendTransaction(filter ? filterTransaction(tr) : tr);\n}\n// Finish a transaction by applying filters if necessary.\nfunction filterTransaction(tr) {\n    let state = tr.startState;\n    // Change filters\n    let result = true;\n    for (let filter of state.facet(changeFilter)) {\n        let value = filter(tr);\n        if (value === false) {\n            result = false;\n            break;\n        }\n        if (Array.isArray(value))\n            result = result === true ? value : joinRanges(result, value);\n    }\n    if (result !== true) {\n        let changes, back;\n        if (result === false) {\n            back = tr.changes.invertedDesc;\n            changes = ChangeSet.empty(state.doc.length);\n        }\n        else {\n            let filtered = tr.changes.filter(result);\n            changes = filtered.changes;\n            back = filtered.filtered.mapDesc(filtered.changes).invertedDesc;\n        }\n        tr = Transaction.create(state, changes, tr.selection && tr.selection.map(back), StateEffect.mapEffects(tr.effects, back), tr.annotations, tr.scrollIntoView);\n    }\n    // Transaction filters\n    let filters = state.facet(transactionFilter);\n    for (let i = filters.length - 1; i >= 0; i--) {\n        let filtered = filters[i](tr);\n        if (filtered instanceof Transaction)\n            tr = filtered;\n        else if (Array.isArray(filtered) && filtered.length == 1 && filtered[0] instanceof Transaction)\n            tr = filtered[0];\n        else\n            tr = resolveTransaction(state, asArray(filtered), false);\n    }\n    return tr;\n}\nfunction extendTransaction(tr) {\n    let state = tr.startState, extenders = state.facet(transactionExtender), spec = tr;\n    for (let i = extenders.length - 1; i >= 0; i--) {\n        let extension = extenders[i](tr);\n        if (extension && Object.keys(extension).length)\n            spec = mergeTransaction(spec, resolveTransactionInner(state, extension, tr.changes.newLength), true);\n    }\n    return spec == tr ? tr : Transaction.create(state, tr.changes, tr.selection, spec.effects, spec.annotations, spec.scrollIntoView);\n}\nconst none = [];\nfunction asArray(value) {\n    return value == null ? none : Array.isArray(value) ? value : [value];\n}\n\n/**\nThe categories produced by a [character\ncategorizer](https://codemirror.net/6/docs/ref/#state.EditorState.charCategorizer). These are used\ndo things like selecting by word.\n*/\nvar CharCategory = /*@__PURE__*/(function (CharCategory) {\n    /**\n    Word characters.\n    */\n    CharCategory[CharCategory[\"Word\"] = 0] = \"Word\";\n    /**\n    Whitespace.\n    */\n    CharCategory[CharCategory[\"Space\"] = 1] = \"Space\";\n    /**\n    Anything else.\n    */\n    CharCategory[CharCategory[\"Other\"] = 2] = \"Other\";\nreturn CharCategory})(CharCategory || (CharCategory = {}));\nconst nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\nlet wordChar;\ntry {\n    wordChar = /*@__PURE__*/new RegExp(\"[\\\\p{Alphabetic}\\\\p{Number}_]\", \"u\");\n}\ncatch (_) { }\nfunction hasWordChar(str) {\n    if (wordChar)\n        return wordChar.test(str);\n    for (let i = 0; i < str.length; i++) {\n        let ch = str[i];\n        if (/\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch)))\n            return true;\n    }\n    return false;\n}\nfunction makeCategorizer(wordChars) {\n    return (char) => {\n        if (!/\\S/.test(char))\n            return CharCategory.Space;\n        if (hasWordChar(char))\n            return CharCategory.Word;\n        for (let i = 0; i < wordChars.length; i++)\n            if (char.indexOf(wordChars[i]) > -1)\n                return CharCategory.Word;\n        return CharCategory.Other;\n    };\n}\n\n/**\nThe editor state class is a persistent (immutable) data structure.\nTo update a state, you [create](https://codemirror.net/6/docs/ref/#state.EditorState.update) a\n[transaction](https://codemirror.net/6/docs/ref/#state.Transaction), which produces a _new_ state\ninstance, without modifying the original object.\n\nAs such, _never_ mutate properties of a state directly. That'll\njust break things.\n*/\nclass EditorState {\n    constructor(\n    /**\n    @internal\n    */\n    config, \n    /**\n    The current document.\n    */\n    doc, \n    /**\n    The current selection.\n    */\n    selection, \n    /**\n    @internal\n    */\n    values, computeSlot, tr) {\n        this.config = config;\n        this.doc = doc;\n        this.selection = selection;\n        this.values = values;\n        this.status = config.statusTemplate.slice();\n        this.computeSlot = computeSlot;\n        // Fill in the computed state immediately, so that further queries\n        // for it made during the update return this state\n        if (tr)\n            tr._state = this;\n        for (let i = 0; i < this.config.dynamicSlots.length; i++)\n            ensureAddr(this, i << 1);\n        this.computeSlot = null;\n    }\n    field(field, require = true) {\n        let addr = this.config.address[field.id];\n        if (addr == null) {\n            if (require)\n                throw new RangeError(\"Field is not present in this state\");\n            return undefined;\n        }\n        ensureAddr(this, addr);\n        return getAddr(this, addr);\n    }\n    /**\n    Create a [transaction](https://codemirror.net/6/docs/ref/#state.Transaction) that updates this\n    state. Any number of [transaction specs](https://codemirror.net/6/docs/ref/#state.TransactionSpec)\n    can be passed. Unless\n    [`sequential`](https://codemirror.net/6/docs/ref/#state.TransactionSpec.sequential) is set, the\n    [changes](https://codemirror.net/6/docs/ref/#state.TransactionSpec.changes) (if any) of each spec\n    are assumed to start in the _current_ document (not the document\n    produced by previous specs), and its\n    [selection](https://codemirror.net/6/docs/ref/#state.TransactionSpec.selection) and\n    [effects](https://codemirror.net/6/docs/ref/#state.TransactionSpec.effects) are assumed to refer\n    to the document created by its _own_ changes. The resulting\n    transaction contains the combined effect of all the different\n    specs. For [selection](https://codemirror.net/6/docs/ref/#state.TransactionSpec.selection), later\n    specs take precedence over earlier ones.\n    */\n    update(...specs) {\n        return resolveTransaction(this, specs, true);\n    }\n    /**\n    @internal\n    */\n    applyTransaction(tr) {\n        let conf = this.config, { base, compartments } = conf;\n        for (let effect of tr.effects) {\n            if (effect.is(Compartment.reconfigure)) {\n                if (conf) {\n                    compartments = new Map;\n                    conf.compartments.forEach((val, key) => compartments.set(key, val));\n                    conf = null;\n                }\n                compartments.set(effect.value.compartment, effect.value.extension);\n            }\n            else if (effect.is(StateEffect.reconfigure)) {\n                conf = null;\n                base = effect.value;\n            }\n            else if (effect.is(StateEffect.appendConfig)) {\n                conf = null;\n                base = asArray(base).concat(effect.value);\n            }\n        }\n        let startValues;\n        if (!conf) {\n            conf = Configuration.resolve(base, compartments, this);\n            let intermediateState = new EditorState(conf, this.doc, this.selection, conf.dynamicSlots.map(() => null), (state, slot) => slot.reconfigure(state, this), null);\n            startValues = intermediateState.values;\n        }\n        else {\n            startValues = tr.startState.values.slice();\n        }\n        let selection = tr.startState.facet(allowMultipleSelections) ? tr.newSelection : tr.newSelection.asSingle();\n        new EditorState(conf, tr.newDoc, selection, startValues, (state, slot) => slot.update(state, tr), tr);\n    }\n    /**\n    Create a [transaction spec](https://codemirror.net/6/docs/ref/#state.TransactionSpec) that\n    replaces every selection range with the given content.\n    */\n    replaceSelection(text) {\n        if (typeof text == \"string\")\n            text = this.toText(text);\n        return this.changeByRange(range => ({ changes: { from: range.from, to: range.to, insert: text },\n            range: EditorSelection.cursor(range.from + text.length) }));\n    }\n    /**\n    Create a set of changes and a new selection by running the given\n    function for each range in the active selection. The function\n    can return an optional set of changes (in the coordinate space\n    of the start document), plus an updated range (in the coordinate\n    space of the document produced by the call's own changes). This\n    method will merge all the changes and ranges into a single\n    changeset and selection, and return it as a [transaction\n    spec](https://codemirror.net/6/docs/ref/#state.TransactionSpec), which can be passed to\n    [`update`](https://codemirror.net/6/docs/ref/#state.EditorState.update).\n    */\n    changeByRange(f) {\n        let sel = this.selection;\n        let result1 = f(sel.ranges[0]);\n        let changes = this.changes(result1.changes), ranges = [result1.range];\n        let effects = asArray(result1.effects);\n        for (let i = 1; i < sel.ranges.length; i++) {\n            let result = f(sel.ranges[i]);\n            let newChanges = this.changes(result.changes), newMapped = newChanges.map(changes);\n            for (let j = 0; j < i; j++)\n                ranges[j] = ranges[j].map(newMapped);\n            let mapBy = changes.mapDesc(newChanges, true);\n            ranges.push(result.range.map(mapBy));\n            changes = changes.compose(newMapped);\n            effects = StateEffect.mapEffects(effects, newMapped).concat(StateEffect.mapEffects(asArray(result.effects), mapBy));\n        }\n        return {\n            changes,\n            selection: EditorSelection.create(ranges, sel.mainIndex),\n            effects\n        };\n    }\n    /**\n    Create a [change set](https://codemirror.net/6/docs/ref/#state.ChangeSet) from the given change\n    description, taking the state's document length and line\n    separator into account.\n    */\n    changes(spec = []) {\n        if (spec instanceof ChangeSet)\n            return spec;\n        return ChangeSet.of(spec, this.doc.length, this.facet(EditorState.lineSeparator));\n    }\n    /**\n    Using the state's [line\n    separator](https://codemirror.net/6/docs/ref/#state.EditorState^lineSeparator), create a\n    [`Text`](https://codemirror.net/6/docs/ref/#state.Text) instance from the given string.\n    */\n    toText(string) {\n        return Text.of(string.split(this.facet(EditorState.lineSeparator) || DefaultSplit));\n    }\n    /**\n    Return the given range of the document as a string.\n    */\n    sliceDoc(from = 0, to = this.doc.length) {\n        return this.doc.sliceString(from, to, this.lineBreak);\n    }\n    /**\n    Get the value of a state [facet](https://codemirror.net/6/docs/ref/#state.Facet).\n    */\n    facet(facet) {\n        let addr = this.config.address[facet.id];\n        if (addr == null)\n            return facet.default;\n        ensureAddr(this, addr);\n        return getAddr(this, addr);\n    }\n    /**\n    Convert this state to a JSON-serializable object. When custom\n    fields should be serialized, you can pass them in as an object\n    mapping property names (in the resulting object, which should\n    not use `doc` or `selection`) to fields.\n    */\n    toJSON(fields) {\n        let result = {\n            doc: this.sliceDoc(),\n            selection: this.selection.toJSON()\n        };\n        if (fields)\n            for (let prop in fields) {\n                let value = fields[prop];\n                if (value instanceof StateField && this.config.address[value.id] != null)\n                    result[prop] = value.spec.toJSON(this.field(fields[prop]), this);\n            }\n        return result;\n    }\n    /**\n    Deserialize a state from its JSON representation. When custom\n    fields should be deserialized, pass the same object you passed\n    to [`toJSON`](https://codemirror.net/6/docs/ref/#state.EditorState.toJSON) when serializing as\n    third argument.\n    */\n    static fromJSON(json, config = {}, fields) {\n        if (!json || typeof json.doc != \"string\")\n            throw new RangeError(\"Invalid JSON representation for EditorState\");\n        let fieldInit = [];\n        if (fields)\n            for (let prop in fields) {\n                if (Object.prototype.hasOwnProperty.call(json, prop)) {\n                    let field = fields[prop], value = json[prop];\n                    fieldInit.push(field.init(state => field.spec.fromJSON(value, state)));\n                }\n            }\n        return EditorState.create({\n            doc: json.doc,\n            selection: EditorSelection.fromJSON(json.selection),\n            extensions: config.extensions ? fieldInit.concat([config.extensions]) : fieldInit\n        });\n    }\n    /**\n    Create a new state. You'll usually only need this when\n    initializing an editor—updated states are created by applying\n    transactions.\n    */\n    static create(config = {}) {\n        let configuration = Configuration.resolve(config.extensions || [], new Map);\n        let doc = config.doc instanceof Text ? config.doc\n            : Text.of((config.doc || \"\").split(configuration.staticFacet(EditorState.lineSeparator) || DefaultSplit));\n        let selection = !config.selection ? EditorSelection.single(0)\n            : config.selection instanceof EditorSelection ? config.selection\n                : EditorSelection.single(config.selection.anchor, config.selection.head);\n        checkSelection(selection, doc.length);\n        if (!configuration.staticFacet(allowMultipleSelections))\n            selection = selection.asSingle();\n        return new EditorState(configuration, doc, selection, configuration.dynamicSlots.map(() => null), (state, slot) => slot.create(state), null);\n    }\n    /**\n    The size (in columns) of a tab in the document, determined by\n    the [`tabSize`](https://codemirror.net/6/docs/ref/#state.EditorState^tabSize) facet.\n    */\n    get tabSize() { return this.facet(EditorState.tabSize); }\n    /**\n    Get the proper [line-break](https://codemirror.net/6/docs/ref/#state.EditorState^lineSeparator)\n    string for this state.\n    */\n    get lineBreak() { return this.facet(EditorState.lineSeparator) || \"\\n\"; }\n    /**\n    Returns true when the editor is\n    [configured](https://codemirror.net/6/docs/ref/#state.EditorState^readOnly) to be read-only.\n    */\n    get readOnly() { return this.facet(readOnly); }\n    /**\n    Look up a translation for the given phrase (via the\n    [`phrases`](https://codemirror.net/6/docs/ref/#state.EditorState^phrases) facet), or return the\n    original string if no translation is found.\n    \n    If additional arguments are passed, they will be inserted in\n    place of markers like `$1` (for the first value) and `$2`, etc.\n    A single `$` is equivalent to `$1`, and `$$` will produce a\n    literal dollar sign.\n    */\n    phrase(phrase, ...insert) {\n        for (let map of this.facet(EditorState.phrases))\n            if (Object.prototype.hasOwnProperty.call(map, phrase)) {\n                phrase = map[phrase];\n                break;\n            }\n        if (insert.length)\n            phrase = phrase.replace(/\\$(\\$|\\d*)/g, (m, i) => {\n                if (i == \"$\")\n                    return \"$\";\n                let n = +(i || 1);\n                return !n || n > insert.length ? m : insert[n - 1];\n            });\n        return phrase;\n    }\n    /**\n    Find the values for a given language data field, provided by the\n    the [`languageData`](https://codemirror.net/6/docs/ref/#state.EditorState^languageData) facet.\n    \n    Examples of language data fields are...\n    \n    - [`\"commentTokens\"`](https://codemirror.net/6/docs/ref/#commands.CommentTokens) for specifying\n      comment syntax.\n    - [`\"autocomplete\"`](https://codemirror.net/6/docs/ref/#autocomplete.autocompletion^config.override)\n      for providing language-specific completion sources.\n    - [`\"wordChars\"`](https://codemirror.net/6/docs/ref/#state.EditorState.charCategorizer) for adding\n      characters that should be considered part of words in this\n      language.\n    - [`\"closeBrackets\"`](https://codemirror.net/6/docs/ref/#autocomplete.CloseBracketConfig) controls\n      bracket closing behavior.\n    */\n    languageDataAt(name, pos, side = -1) {\n        let values = [];\n        for (let provider of this.facet(languageData)) {\n            for (let result of provider(this, pos, side)) {\n                if (Object.prototype.hasOwnProperty.call(result, name))\n                    values.push(result[name]);\n            }\n        }\n        return values;\n    }\n    /**\n    Return a function that can categorize strings (expected to\n    represent a single [grapheme cluster](https://codemirror.net/6/docs/ref/#state.findClusterBreak))\n    into one of:\n    \n     - Word (contains an alphanumeric character or a character\n       explicitly listed in the local language's `\"wordChars\"`\n       language data, which should be a string)\n     - Space (contains only whitespace)\n     - Other (anything else)\n    */\n    charCategorizer(at) {\n        return makeCategorizer(this.languageDataAt(\"wordChars\", at).join(\"\"));\n    }\n    /**\n    Find the word at the given position, meaning the range\n    containing all [word](https://codemirror.net/6/docs/ref/#state.CharCategory.Word) characters\n    around it. If no word characters are adjacent to the position,\n    this returns null.\n    */\n    wordAt(pos) {\n        let { text, from, length } = this.doc.lineAt(pos);\n        let cat = this.charCategorizer(pos);\n        let start = pos - from, end = pos - from;\n        while (start > 0) {\n            let prev = findClusterBreak(text, start, false);\n            if (cat(text.slice(prev, start)) != CharCategory.Word)\n                break;\n            start = prev;\n        }\n        while (end < length) {\n            let next = findClusterBreak(text, end);\n            if (cat(text.slice(end, next)) != CharCategory.Word)\n                break;\n            end = next;\n        }\n        return start == end ? null : EditorSelection.range(start + from, end + from);\n    }\n}\n/**\nA facet that, when enabled, causes the editor to allow multiple\nranges to be selected. Be careful though, because by default the\neditor relies on the native DOM selection, which cannot handle\nmultiple selections. An extension like\n[`drawSelection`](https://codemirror.net/6/docs/ref/#view.drawSelection) can be used to make\nsecondary selections visible to the user.\n*/\nEditorState.allowMultipleSelections = allowMultipleSelections;\n/**\nConfigures the tab size to use in this state. The first\n(highest-precedence) value of the facet is used. If no value is\ngiven, this defaults to 4.\n*/\nEditorState.tabSize = /*@__PURE__*/Facet.define({\n    combine: values => values.length ? values[0] : 4\n});\n/**\nThe line separator to use. By default, any of `\"\\n\"`, `\"\\r\\n\"`\nand `\"\\r\"` is treated as a separator when splitting lines, and\nlines are joined with `\"\\n\"`.\n\nWhen you configure a value here, only that precise separator\nwill be used, allowing you to round-trip documents through the\neditor without normalizing line separators.\n*/\nEditorState.lineSeparator = lineSeparator;\n/**\nThis facet controls the value of the\n[`readOnly`](https://codemirror.net/6/docs/ref/#state.EditorState.readOnly) getter, which is\nconsulted by commands and extensions that implement editing\nfunctionality to determine whether they should apply. It\ndefaults to false, but when its highest-precedence value is\n`true`, such functionality disables itself.\n\nNot to be confused with\n[`EditorView.editable`](https://codemirror.net/6/docs/ref/#view.EditorView^editable), which\ncontrols whether the editor's DOM is set to be editable (and\nthus focusable).\n*/\nEditorState.readOnly = readOnly;\n/**\nRegisters translation phrases. The\n[`phrase`](https://codemirror.net/6/docs/ref/#state.EditorState.phrase) method will look through\nall objects registered with this facet to find translations for\nits argument.\n*/\nEditorState.phrases = /*@__PURE__*/Facet.define({\n    compare(a, b) {\n        let kA = Object.keys(a), kB = Object.keys(b);\n        return kA.length == kB.length && kA.every(k => a[k] == b[k]);\n    }\n});\n/**\nA facet used to register [language\ndata](https://codemirror.net/6/docs/ref/#state.EditorState.languageDataAt) providers.\n*/\nEditorState.languageData = languageData;\n/**\nFacet used to register change filters, which are called for each\ntransaction (unless explicitly\n[disabled](https://codemirror.net/6/docs/ref/#state.TransactionSpec.filter)), and can suppress\npart of the transaction's changes.\n\nSuch a function can return `true` to indicate that it doesn't\nwant to do anything, `false` to completely stop the changes in\nthe transaction, or a set of ranges in which changes should be\nsuppressed. Such ranges are represented as an array of numbers,\nwith each pair of two numbers indicating the start and end of a\nrange. So for example `[10, 20, 100, 110]` suppresses changes\nbetween 10 and 20, and between 100 and 110.\n*/\nEditorState.changeFilter = changeFilter;\n/**\nFacet used to register a hook that gets a chance to update or\nreplace transaction specs before they are applied. This will\nonly be applied for transactions that don't have\n[`filter`](https://codemirror.net/6/docs/ref/#state.TransactionSpec.filter) set to `false`. You\ncan either return a single transaction spec (possibly the input\ntransaction), or an array of specs (which will be combined in\nthe same way as the arguments to\n[`EditorState.update`](https://codemirror.net/6/docs/ref/#state.EditorState.update)).\n\nWhen possible, it is recommended to avoid accessing\n[`Transaction.state`](https://codemirror.net/6/docs/ref/#state.Transaction.state) in a filter,\nsince it will force creation of a state that will then be\ndiscarded again, if the transaction is actually filtered.\n\n(This functionality should be used with care. Indiscriminately\nmodifying transaction is likely to break something or degrade\nthe user experience.)\n*/\nEditorState.transactionFilter = transactionFilter;\n/**\nThis is a more limited form of\n[`transactionFilter`](https://codemirror.net/6/docs/ref/#state.EditorState^transactionFilter),\nwhich can only add\n[annotations](https://codemirror.net/6/docs/ref/#state.TransactionSpec.annotations) and\n[effects](https://codemirror.net/6/docs/ref/#state.TransactionSpec.effects). _But_, this type\nof filter runs even if the transaction has disabled regular\n[filtering](https://codemirror.net/6/docs/ref/#state.TransactionSpec.filter), making it suitable\nfor effects that don't need to touch the changes or selection,\nbut do want to process every transaction.\n\nExtenders run _after_ filters, when both are present.\n*/\nEditorState.transactionExtender = transactionExtender;\nCompartment.reconfigure = /*@__PURE__*/StateEffect.define();\n\n/**\nUtility function for combining behaviors to fill in a config\nobject from an array of provided configs. `defaults` should hold\ndefault values for all optional fields in `Config`.\n\nThe function will, by default, error\nwhen a field gets two values that aren't `===`-equal, but you can\nprovide combine functions per field to do something else.\n*/\nfunction combineConfig(configs, defaults, // Should hold only the optional properties of Config, but I haven't managed to express that\ncombine = {}) {\n    let result = {};\n    for (let config of configs)\n        for (let key of Object.keys(config)) {\n            let value = config[key], current = result[key];\n            if (current === undefined)\n                result[key] = value;\n            else if (current === value || value === undefined) ; // No conflict\n            else if (Object.hasOwnProperty.call(combine, key))\n                result[key] = combine[key](current, value);\n            else\n                throw new Error(\"Config merge conflict for field \" + key);\n        }\n    for (let key in defaults)\n        if (result[key] === undefined)\n            result[key] = defaults[key];\n    return result;\n}\n\n/**\nEach range is associated with a value, which must inherit from\nthis class.\n*/\nclass RangeValue {\n    /**\n    Compare this value with another value. Used when comparing\n    rangesets. The default implementation compares by identity.\n    Unless you are only creating a fixed number of unique instances\n    of your value type, it is a good idea to implement this\n    properly.\n    */\n    eq(other) { return this == other; }\n    /**\n    Create a [range](https://codemirror.net/6/docs/ref/#state.Range) with this value.\n    */\n    range(from, to = from) { return Range.create(from, to, this); }\n}\nRangeValue.prototype.startSide = RangeValue.prototype.endSide = 0;\nRangeValue.prototype.point = false;\nRangeValue.prototype.mapMode = MapMode.TrackDel;\n/**\nA range associates a value with a range of positions.\n*/\nclass Range {\n    constructor(\n    /**\n    The range's start position.\n    */\n    from, \n    /**\n    Its end position.\n    */\n    to, \n    /**\n    The value associated with this range.\n    */\n    value) {\n        this.from = from;\n        this.to = to;\n        this.value = value;\n    }\n    /**\n    @internal\n    */\n    static create(from, to, value) {\n        return new Range(from, to, value);\n    }\n}\nfunction cmpRange(a, b) {\n    return a.from - b.from || a.value.startSide - b.value.startSide;\n}\nclass Chunk {\n    constructor(from, to, value, \n    // Chunks are marked with the largest point that occurs\n    // in them (or -1 for no points), so that scans that are\n    // only interested in points (such as the\n    // heightmap-related logic) can skip range-only chunks.\n    maxPoint) {\n        this.from = from;\n        this.to = to;\n        this.value = value;\n        this.maxPoint = maxPoint;\n    }\n    get length() { return this.to[this.to.length - 1]; }\n    // Find the index of the given position and side. Use the ranges'\n    // `from` pos when `end == false`, `to` when `end == true`.\n    findIndex(pos, side, end, startAt = 0) {\n        let arr = end ? this.to : this.from;\n        for (let lo = startAt, hi = arr.length;;) {\n            if (lo == hi)\n                return lo;\n            let mid = (lo + hi) >> 1;\n            let diff = arr[mid] - pos || (end ? this.value[mid].endSide : this.value[mid].startSide) - side;\n            if (mid == lo)\n                return diff >= 0 ? lo : hi;\n            if (diff >= 0)\n                hi = mid;\n            else\n                lo = mid + 1;\n        }\n    }\n    between(offset, from, to, f) {\n        for (let i = this.findIndex(from, -1000000000 /* C.Far */, true), e = this.findIndex(to, 1000000000 /* C.Far */, false, i); i < e; i++)\n            if (f(this.from[i] + offset, this.to[i] + offset, this.value[i]) === false)\n                return false;\n    }\n    map(offset, changes) {\n        let value = [], from = [], to = [], newPos = -1, maxPoint = -1;\n        for (let i = 0; i < this.value.length; i++) {\n            let val = this.value[i], curFrom = this.from[i] + offset, curTo = this.to[i] + offset, newFrom, newTo;\n            if (curFrom == curTo) {\n                let mapped = changes.mapPos(curFrom, val.startSide, val.mapMode);\n                if (mapped == null)\n                    continue;\n                newFrom = newTo = mapped;\n                if (val.startSide != val.endSide) {\n                    newTo = changes.mapPos(curFrom, val.endSide);\n                    if (newTo < newFrom)\n                        continue;\n                }\n            }\n            else {\n                newFrom = changes.mapPos(curFrom, val.startSide);\n                newTo = changes.mapPos(curTo, val.endSide);\n                if (newFrom > newTo || newFrom == newTo && val.startSide > 0 && val.endSide <= 0)\n                    continue;\n            }\n            if ((newTo - newFrom || val.endSide - val.startSide) < 0)\n                continue;\n            if (newPos < 0)\n                newPos = newFrom;\n            if (val.point)\n                maxPoint = Math.max(maxPoint, newTo - newFrom);\n            value.push(val);\n            from.push(newFrom - newPos);\n            to.push(newTo - newPos);\n        }\n        return { mapped: value.length ? new Chunk(from, to, value, maxPoint) : null, pos: newPos };\n    }\n}\n/**\nA range set stores a collection of [ranges](https://codemirror.net/6/docs/ref/#state.Range) in a\nway that makes them efficient to [map](https://codemirror.net/6/docs/ref/#state.RangeSet.map) and\n[update](https://codemirror.net/6/docs/ref/#state.RangeSet.update). This is an immutable data\nstructure.\n*/\nclass RangeSet {\n    constructor(\n    /**\n    @internal\n    */\n    chunkPos, \n    /**\n    @internal\n    */\n    chunk, \n    /**\n    @internal\n    */\n    nextLayer, \n    /**\n    @internal\n    */\n    maxPoint) {\n        this.chunkPos = chunkPos;\n        this.chunk = chunk;\n        this.nextLayer = nextLayer;\n        this.maxPoint = maxPoint;\n    }\n    /**\n    @internal\n    */\n    static create(chunkPos, chunk, nextLayer, maxPoint) {\n        return new RangeSet(chunkPos, chunk, nextLayer, maxPoint);\n    }\n    /**\n    @internal\n    */\n    get length() {\n        let last = this.chunk.length - 1;\n        return last < 0 ? 0 : Math.max(this.chunkEnd(last), this.nextLayer.length);\n    }\n    /**\n    The number of ranges in the set.\n    */\n    get size() {\n        if (this.isEmpty)\n            return 0;\n        let size = this.nextLayer.size;\n        for (let chunk of this.chunk)\n            size += chunk.value.length;\n        return size;\n    }\n    /**\n    @internal\n    */\n    chunkEnd(index) {\n        return this.chunkPos[index] + this.chunk[index].length;\n    }\n    /**\n    Update the range set, optionally adding new ranges or filtering\n    out existing ones.\n    \n    (Note: The type parameter is just there as a kludge to work\n    around TypeScript variance issues that prevented `RangeSet<X>`\n    from being a subtype of `RangeSet<Y>` when `X` is a subtype of\n    `Y`.)\n    */\n    update(updateSpec) {\n        let { add = [], sort = false, filterFrom = 0, filterTo = this.length } = updateSpec;\n        let filter = updateSpec.filter;\n        if (add.length == 0 && !filter)\n            return this;\n        if (sort)\n            add = add.slice().sort(cmpRange);\n        if (this.isEmpty)\n            return add.length ? RangeSet.of(add) : this;\n        let cur = new LayerCursor(this, null, -1).goto(0), i = 0, spill = [];\n        let builder = new RangeSetBuilder();\n        while (cur.value || i < add.length) {\n            if (i < add.length && (cur.from - add[i].from || cur.startSide - add[i].value.startSide) >= 0) {\n                let range = add[i++];\n                if (!builder.addInner(range.from, range.to, range.value))\n                    spill.push(range);\n            }\n            else if (cur.rangeIndex == 1 && cur.chunkIndex < this.chunk.length &&\n                (i == add.length || this.chunkEnd(cur.chunkIndex) < add[i].from) &&\n                (!filter || filterFrom > this.chunkEnd(cur.chunkIndex) || filterTo < this.chunkPos[cur.chunkIndex]) &&\n                builder.addChunk(this.chunkPos[cur.chunkIndex], this.chunk[cur.chunkIndex])) {\n                cur.nextChunk();\n            }\n            else {\n                if (!filter || filterFrom > cur.to || filterTo < cur.from || filter(cur.from, cur.to, cur.value)) {\n                    if (!builder.addInner(cur.from, cur.to, cur.value))\n                        spill.push(Range.create(cur.from, cur.to, cur.value));\n                }\n                cur.next();\n            }\n        }\n        return builder.finishInner(this.nextLayer.isEmpty && !spill.length ? RangeSet.empty\n            : this.nextLayer.update({ add: spill, filter, filterFrom, filterTo }));\n    }\n    /**\n    Map this range set through a set of changes, return the new set.\n    */\n    map(changes) {\n        if (changes.empty || this.isEmpty)\n            return this;\n        let chunks = [], chunkPos = [], maxPoint = -1;\n        for (let i = 0; i < this.chunk.length; i++) {\n            let start = this.chunkPos[i], chunk = this.chunk[i];\n            let touch = changes.touchesRange(start, start + chunk.length);\n            if (touch === false) {\n                maxPoint = Math.max(maxPoint, chunk.maxPoint);\n                chunks.push(chunk);\n                chunkPos.push(changes.mapPos(start));\n            }\n            else if (touch === true) {\n                let { mapped, pos } = chunk.map(start, changes);\n                if (mapped) {\n                    maxPoint = Math.max(maxPoint, mapped.maxPoint);\n                    chunks.push(mapped);\n                    chunkPos.push(pos);\n                }\n            }\n        }\n        let next = this.nextLayer.map(changes);\n        return chunks.length == 0 ? next : new RangeSet(chunkPos, chunks, next || RangeSet.empty, maxPoint);\n    }\n    /**\n    Iterate over the ranges that touch the region `from` to `to`,\n    calling `f` for each. There is no guarantee that the ranges will\n    be reported in any specific order. When the callback returns\n    `false`, iteration stops.\n    */\n    between(from, to, f) {\n        if (this.isEmpty)\n            return;\n        for (let i = 0; i < this.chunk.length; i++) {\n            let start = this.chunkPos[i], chunk = this.chunk[i];\n            if (to >= start && from <= start + chunk.length &&\n                chunk.between(start, from - start, to - start, f) === false)\n                return;\n        }\n        this.nextLayer.between(from, to, f);\n    }\n    /**\n    Iterate over the ranges in this set, in order, including all\n    ranges that end at or after `from`.\n    */\n    iter(from = 0) {\n        return HeapCursor.from([this]).goto(from);\n    }\n    /**\n    @internal\n    */\n    get isEmpty() { return this.nextLayer == this; }\n    /**\n    Iterate over the ranges in a collection of sets, in order,\n    starting from `from`.\n    */\n    static iter(sets, from = 0) {\n        return HeapCursor.from(sets).goto(from);\n    }\n    /**\n    Iterate over two groups of sets, calling methods on `comparator`\n    to notify it of possible differences.\n    */\n    static compare(oldSets, newSets, \n    /**\n    This indicates how the underlying data changed between these\n    ranges, and is needed to synchronize the iteration.\n    */\n    textDiff, comparator, \n    /**\n    Can be used to ignore all non-point ranges, and points below\n    the given size. When -1, all ranges are compared.\n    */\n    minPointSize = -1) {\n        let a = oldSets.filter(set => set.maxPoint > 0 || !set.isEmpty && set.maxPoint >= minPointSize);\n        let b = newSets.filter(set => set.maxPoint > 0 || !set.isEmpty && set.maxPoint >= minPointSize);\n        let sharedChunks = findSharedChunks(a, b, textDiff);\n        let sideA = new SpanCursor(a, sharedChunks, minPointSize);\n        let sideB = new SpanCursor(b, sharedChunks, minPointSize);\n        textDiff.iterGaps((fromA, fromB, length) => compare(sideA, fromA, sideB, fromB, length, comparator));\n        if (textDiff.empty && textDiff.length == 0)\n            compare(sideA, 0, sideB, 0, 0, comparator);\n    }\n    /**\n    Compare the contents of two groups of range sets, returning true\n    if they are equivalent in the given range.\n    */\n    static eq(oldSets, newSets, from = 0, to) {\n        if (to == null)\n            to = 1000000000 /* C.Far */ - 1;\n        let a = oldSets.filter(set => !set.isEmpty && newSets.indexOf(set) < 0);\n        let b = newSets.filter(set => !set.isEmpty && oldSets.indexOf(set) < 0);\n        if (a.length != b.length)\n            return false;\n        if (!a.length)\n            return true;\n        let sharedChunks = findSharedChunks(a, b);\n        let sideA = new SpanCursor(a, sharedChunks, 0).goto(from), sideB = new SpanCursor(b, sharedChunks, 0).goto(from);\n        for (;;) {\n            if (sideA.to != sideB.to ||\n                !sameValues(sideA.active, sideB.active) ||\n                sideA.point && (!sideB.point || !sideA.point.eq(sideB.point)))\n                return false;\n            if (sideA.to > to)\n                return true;\n            sideA.next();\n            sideB.next();\n        }\n    }\n    /**\n    Iterate over a group of range sets at the same time, notifying\n    the iterator about the ranges covering every given piece of\n    content. Returns the open count (see\n    [`SpanIterator.span`](https://codemirror.net/6/docs/ref/#state.SpanIterator.span)) at the end\n    of the iteration.\n    */\n    static spans(sets, from, to, iterator, \n    /**\n    When given and greater than -1, only points of at least this\n    size are taken into account.\n    */\n    minPointSize = -1) {\n        let cursor = new SpanCursor(sets, null, minPointSize).goto(from), pos = from;\n        let openRanges = cursor.openStart;\n        for (;;) {\n            let curTo = Math.min(cursor.to, to);\n            if (cursor.point) {\n                let active = cursor.activeForPoint(cursor.to);\n                let openCount = cursor.pointFrom < from ? active.length + 1\n                    : cursor.point.startSide < 0 ? active.length\n                        : Math.min(active.length, openRanges);\n                iterator.point(pos, curTo, cursor.point, active, openCount, cursor.pointRank);\n                openRanges = Math.min(cursor.openEnd(curTo), active.length);\n            }\n            else if (curTo > pos) {\n                iterator.span(pos, curTo, cursor.active, openRanges);\n                openRanges = cursor.openEnd(curTo);\n            }\n            if (cursor.to > to)\n                return openRanges + (cursor.point && cursor.to > to ? 1 : 0);\n            pos = cursor.to;\n            cursor.next();\n        }\n    }\n    /**\n    Create a range set for the given range or array of ranges. By\n    default, this expects the ranges to be _sorted_ (by start\n    position and, if two start at the same position,\n    `value.startSide`). You can pass `true` as second argument to\n    cause the method to sort them.\n    */\n    static of(ranges, sort = false) {\n        let build = new RangeSetBuilder();\n        for (let range of ranges instanceof Range ? [ranges] : sort ? lazySort(ranges) : ranges)\n            build.add(range.from, range.to, range.value);\n        return build.finish();\n    }\n    /**\n    Join an array of range sets into a single set.\n    */\n    static join(sets) {\n        if (!sets.length)\n            return RangeSet.empty;\n        let result = sets[sets.length - 1];\n        for (let i = sets.length - 2; i >= 0; i--) {\n            for (let layer = sets[i]; layer != RangeSet.empty; layer = layer.nextLayer)\n                result = new RangeSet(layer.chunkPos, layer.chunk, result, Math.max(layer.maxPoint, result.maxPoint));\n        }\n        return result;\n    }\n}\n/**\nThe empty set of ranges.\n*/\nRangeSet.empty = /*@__PURE__*/new RangeSet([], [], null, -1);\nfunction lazySort(ranges) {\n    if (ranges.length > 1)\n        for (let prev = ranges[0], i = 1; i < ranges.length; i++) {\n            let cur = ranges[i];\n            if (cmpRange(prev, cur) > 0)\n                return ranges.slice().sort(cmpRange);\n            prev = cur;\n        }\n    return ranges;\n}\nRangeSet.empty.nextLayer = RangeSet.empty;\n/**\nA range set builder is a data structure that helps build up a\n[range set](https://codemirror.net/6/docs/ref/#state.RangeSet) directly, without first allocating\nan array of [`Range`](https://codemirror.net/6/docs/ref/#state.Range) objects.\n*/\nclass RangeSetBuilder {\n    finishChunk(newArrays) {\n        this.chunks.push(new Chunk(this.from, this.to, this.value, this.maxPoint));\n        this.chunkPos.push(this.chunkStart);\n        this.chunkStart = -1;\n        this.setMaxPoint = Math.max(this.setMaxPoint, this.maxPoint);\n        this.maxPoint = -1;\n        if (newArrays) {\n            this.from = [];\n            this.to = [];\n            this.value = [];\n        }\n    }\n    /**\n    Create an empty builder.\n    */\n    constructor() {\n        this.chunks = [];\n        this.chunkPos = [];\n        this.chunkStart = -1;\n        this.last = null;\n        this.lastFrom = -1000000000 /* C.Far */;\n        this.lastTo = -1000000000 /* C.Far */;\n        this.from = [];\n        this.to = [];\n        this.value = [];\n        this.maxPoint = -1;\n        this.setMaxPoint = -1;\n        this.nextLayer = null;\n    }\n    /**\n    Add a range. Ranges should be added in sorted (by `from` and\n    `value.startSide`) order.\n    */\n    add(from, to, value) {\n        if (!this.addInner(from, to, value))\n            (this.nextLayer || (this.nextLayer = new RangeSetBuilder)).add(from, to, value);\n    }\n    /**\n    @internal\n    */\n    addInner(from, to, value) {\n        let diff = from - this.lastTo || value.startSide - this.last.endSide;\n        if (diff <= 0 && (from - this.lastFrom || value.startSide - this.last.startSide) < 0)\n            throw new Error(\"Ranges must be added sorted by `from` position and `startSide`\");\n        if (diff < 0)\n            return false;\n        if (this.from.length == 250 /* C.ChunkSize */)\n            this.finishChunk(true);\n        if (this.chunkStart < 0)\n            this.chunkStart = from;\n        this.from.push(from - this.chunkStart);\n        this.to.push(to - this.chunkStart);\n        this.last = value;\n        this.lastFrom = from;\n        this.lastTo = to;\n        this.value.push(value);\n        if (value.point)\n            this.maxPoint = Math.max(this.maxPoint, to - from);\n        return true;\n    }\n    /**\n    @internal\n    */\n    addChunk(from, chunk) {\n        if ((from - this.lastTo || chunk.value[0].startSide - this.last.endSide) < 0)\n            return false;\n        if (this.from.length)\n            this.finishChunk(true);\n        this.setMaxPoint = Math.max(this.setMaxPoint, chunk.maxPoint);\n        this.chunks.push(chunk);\n        this.chunkPos.push(from);\n        let last = chunk.value.length - 1;\n        this.last = chunk.value[last];\n        this.lastFrom = chunk.from[last] + from;\n        this.lastTo = chunk.to[last] + from;\n        return true;\n    }\n    /**\n    Finish the range set. Returns the new set. The builder can't be\n    used anymore after this has been called.\n    */\n    finish() { return this.finishInner(RangeSet.empty); }\n    /**\n    @internal\n    */\n    finishInner(next) {\n        if (this.from.length)\n            this.finishChunk(false);\n        if (this.chunks.length == 0)\n            return next;\n        let result = RangeSet.create(this.chunkPos, this.chunks, this.nextLayer ? this.nextLayer.finishInner(next) : next, this.setMaxPoint);\n        this.from = null; // Make sure further `add` calls produce errors\n        return result;\n    }\n}\nfunction findSharedChunks(a, b, textDiff) {\n    let inA = new Map();\n    for (let set of a)\n        for (let i = 0; i < set.chunk.length; i++)\n            if (set.chunk[i].maxPoint <= 0)\n                inA.set(set.chunk[i], set.chunkPos[i]);\n    let shared = new Set();\n    for (let set of b)\n        for (let i = 0; i < set.chunk.length; i++) {\n            let known = inA.get(set.chunk[i]);\n            if (known != null && (textDiff ? textDiff.mapPos(known) : known) == set.chunkPos[i] &&\n                !(textDiff === null || textDiff === void 0 ? void 0 : textDiff.touchesRange(known, known + set.chunk[i].length)))\n                shared.add(set.chunk[i]);\n        }\n    return shared;\n}\nclass LayerCursor {\n    constructor(layer, skip, minPoint, rank = 0) {\n        this.layer = layer;\n        this.skip = skip;\n        this.minPoint = minPoint;\n        this.rank = rank;\n    }\n    get startSide() { return this.value ? this.value.startSide : 0; }\n    get endSide() { return this.value ? this.value.endSide : 0; }\n    goto(pos, side = -1000000000 /* C.Far */) {\n        this.chunkIndex = this.rangeIndex = 0;\n        this.gotoInner(pos, side, false);\n        return this;\n    }\n    gotoInner(pos, side, forward) {\n        while (this.chunkIndex < this.layer.chunk.length) {\n            let next = this.layer.chunk[this.chunkIndex];\n            if (!(this.skip && this.skip.has(next) ||\n                this.layer.chunkEnd(this.chunkIndex) < pos ||\n                next.maxPoint < this.minPoint))\n                break;\n            this.chunkIndex++;\n            forward = false;\n        }\n        if (this.chunkIndex < this.layer.chunk.length) {\n            let rangeIndex = this.layer.chunk[this.chunkIndex].findIndex(pos - this.layer.chunkPos[this.chunkIndex], side, true);\n            if (!forward || this.rangeIndex < rangeIndex)\n                this.setRangeIndex(rangeIndex);\n        }\n        this.next();\n    }\n    forward(pos, side) {\n        if ((this.to - pos || this.endSide - side) < 0)\n            this.gotoInner(pos, side, true);\n    }\n    next() {\n        for (;;) {\n            if (this.chunkIndex == this.layer.chunk.length) {\n                this.from = this.to = 1000000000 /* C.Far */;\n                this.value = null;\n                break;\n            }\n            else {\n                let chunkPos = this.layer.chunkPos[this.chunkIndex], chunk = this.layer.chunk[this.chunkIndex];\n                let from = chunkPos + chunk.from[this.rangeIndex];\n                this.from = from;\n                this.to = chunkPos + chunk.to[this.rangeIndex];\n                this.value = chunk.value[this.rangeIndex];\n                this.setRangeIndex(this.rangeIndex + 1);\n                if (this.minPoint < 0 || this.value.point && this.to - this.from >= this.minPoint)\n                    break;\n            }\n        }\n    }\n    setRangeIndex(index) {\n        if (index == this.layer.chunk[this.chunkIndex].value.length) {\n            this.chunkIndex++;\n            if (this.skip) {\n                while (this.chunkIndex < this.layer.chunk.length && this.skip.has(this.layer.chunk[this.chunkIndex]))\n                    this.chunkIndex++;\n            }\n            this.rangeIndex = 0;\n        }\n        else {\n            this.rangeIndex = index;\n        }\n    }\n    nextChunk() {\n        this.chunkIndex++;\n        this.rangeIndex = 0;\n        this.next();\n    }\n    compare(other) {\n        return this.from - other.from || this.startSide - other.startSide || this.rank - other.rank ||\n            this.to - other.to || this.endSide - other.endSide;\n    }\n}\nclass HeapCursor {\n    constructor(heap) {\n        this.heap = heap;\n    }\n    static from(sets, skip = null, minPoint = -1) {\n        let heap = [];\n        for (let i = 0; i < sets.length; i++) {\n            for (let cur = sets[i]; !cur.isEmpty; cur = cur.nextLayer) {\n                if (cur.maxPoint >= minPoint)\n                    heap.push(new LayerCursor(cur, skip, minPoint, i));\n            }\n        }\n        return heap.length == 1 ? heap[0] : new HeapCursor(heap);\n    }\n    get startSide() { return this.value ? this.value.startSide : 0; }\n    goto(pos, side = -1000000000 /* C.Far */) {\n        for (let cur of this.heap)\n            cur.goto(pos, side);\n        for (let i = this.heap.length >> 1; i >= 0; i--)\n            heapBubble(this.heap, i);\n        this.next();\n        return this;\n    }\n    forward(pos, side) {\n        for (let cur of this.heap)\n            cur.forward(pos, side);\n        for (let i = this.heap.length >> 1; i >= 0; i--)\n            heapBubble(this.heap, i);\n        if ((this.to - pos || this.value.endSide - side) < 0)\n            this.next();\n    }\n    next() {\n        if (this.heap.length == 0) {\n            this.from = this.to = 1000000000 /* C.Far */;\n            this.value = null;\n            this.rank = -1;\n        }\n        else {\n            let top = this.heap[0];\n            this.from = top.from;\n            this.to = top.to;\n            this.value = top.value;\n            this.rank = top.rank;\n            if (top.value)\n                top.next();\n            heapBubble(this.heap, 0);\n        }\n    }\n}\nfunction heapBubble(heap, index) {\n    for (let cur = heap[index];;) {\n        let childIndex = (index << 1) + 1;\n        if (childIndex >= heap.length)\n            break;\n        let child = heap[childIndex];\n        if (childIndex + 1 < heap.length && child.compare(heap[childIndex + 1]) >= 0) {\n            child = heap[childIndex + 1];\n            childIndex++;\n        }\n        if (cur.compare(child) < 0)\n            break;\n        heap[childIndex] = cur;\n        heap[index] = child;\n        index = childIndex;\n    }\n}\nclass SpanCursor {\n    constructor(sets, skip, minPoint) {\n        this.minPoint = minPoint;\n        this.active = [];\n        this.activeTo = [];\n        this.activeRank = [];\n        this.minActive = -1;\n        // A currently active point range, if any\n        this.point = null;\n        this.pointFrom = 0;\n        this.pointRank = 0;\n        this.to = -1000000000 /* C.Far */;\n        this.endSide = 0;\n        // The amount of open active ranges at the start of the iterator.\n        // Not including points.\n        this.openStart = -1;\n        this.cursor = HeapCursor.from(sets, skip, minPoint);\n    }\n    goto(pos, side = -1000000000 /* C.Far */) {\n        this.cursor.goto(pos, side);\n        this.active.length = this.activeTo.length = this.activeRank.length = 0;\n        this.minActive = -1;\n        this.to = pos;\n        this.endSide = side;\n        this.openStart = -1;\n        this.next();\n        return this;\n    }\n    forward(pos, side) {\n        while (this.minActive > -1 && (this.activeTo[this.minActive] - pos || this.active[this.minActive].endSide - side) < 0)\n            this.removeActive(this.minActive);\n        this.cursor.forward(pos, side);\n    }\n    removeActive(index) {\n        remove(this.active, index);\n        remove(this.activeTo, index);\n        remove(this.activeRank, index);\n        this.minActive = findMinIndex(this.active, this.activeTo);\n    }\n    addActive(trackOpen) {\n        let i = 0, { value, to, rank } = this.cursor;\n        // Organize active marks by rank first, then by size\n        while (i < this.activeRank.length && (rank - this.activeRank[i] || to - this.activeTo[i]) > 0)\n            i++;\n        insert(this.active, i, value);\n        insert(this.activeTo, i, to);\n        insert(this.activeRank, i, rank);\n        if (trackOpen)\n            insert(trackOpen, i, this.cursor.from);\n        this.minActive = findMinIndex(this.active, this.activeTo);\n    }\n    // After calling this, if `this.point` != null, the next range is a\n    // point. Otherwise, it's a regular range, covered by `this.active`.\n    next() {\n        let from = this.to, wasPoint = this.point;\n        this.point = null;\n        let trackOpen = this.openStart < 0 ? [] : null;\n        for (;;) {\n            let a = this.minActive;\n            if (a > -1 && (this.activeTo[a] - this.cursor.from || this.active[a].endSide - this.cursor.startSide) < 0) {\n                if (this.activeTo[a] > from) {\n                    this.to = this.activeTo[a];\n                    this.endSide = this.active[a].endSide;\n                    break;\n                }\n                this.removeActive(a);\n                if (trackOpen)\n                    remove(trackOpen, a);\n            }\n            else if (!this.cursor.value) {\n                this.to = this.endSide = 1000000000 /* C.Far */;\n                break;\n            }\n            else if (this.cursor.from > from) {\n                this.to = this.cursor.from;\n                this.endSide = this.cursor.startSide;\n                break;\n            }\n            else {\n                let nextVal = this.cursor.value;\n                if (!nextVal.point) { // Opening a range\n                    this.addActive(trackOpen);\n                    this.cursor.next();\n                }\n                else if (wasPoint && this.cursor.to == this.to && this.cursor.from < this.cursor.to) {\n                    // Ignore any non-empty points that end precisely at the end of the prev point\n                    this.cursor.next();\n                }\n                else { // New point\n                    this.point = nextVal;\n                    this.pointFrom = this.cursor.from;\n                    this.pointRank = this.cursor.rank;\n                    this.to = this.cursor.to;\n                    this.endSide = nextVal.endSide;\n                    this.cursor.next();\n                    this.forward(this.to, this.endSide);\n                    break;\n                }\n            }\n        }\n        if (trackOpen) {\n            this.openStart = 0;\n            for (let i = trackOpen.length - 1; i >= 0 && trackOpen[i] < from; i--)\n                this.openStart++;\n        }\n    }\n    activeForPoint(to) {\n        if (!this.active.length)\n            return this.active;\n        let active = [];\n        for (let i = this.active.length - 1; i >= 0; i--) {\n            if (this.activeRank[i] < this.pointRank)\n                break;\n            if (this.activeTo[i] > to || this.activeTo[i] == to && this.active[i].endSide >= this.point.endSide)\n                active.push(this.active[i]);\n        }\n        return active.reverse();\n    }\n    openEnd(to) {\n        let open = 0;\n        for (let i = this.activeTo.length - 1; i >= 0 && this.activeTo[i] > to; i--)\n            open++;\n        return open;\n    }\n}\nfunction compare(a, startA, b, startB, length, comparator) {\n    a.goto(startA);\n    b.goto(startB);\n    let endB = startB + length;\n    let pos = startB, dPos = startB - startA;\n    for (;;) {\n        let diff = (a.to + dPos) - b.to || a.endSide - b.endSide;\n        let end = diff < 0 ? a.to + dPos : b.to, clipEnd = Math.min(end, endB);\n        if (a.point || b.point) {\n            if (!(a.point && b.point && (a.point == b.point || a.point.eq(b.point)) &&\n                sameValues(a.activeForPoint(a.to), b.activeForPoint(b.to))))\n                comparator.comparePoint(pos, clipEnd, a.point, b.point);\n        }\n        else {\n            if (clipEnd > pos && !sameValues(a.active, b.active))\n                comparator.compareRange(pos, clipEnd, a.active, b.active);\n        }\n        if (end > endB)\n            break;\n        pos = end;\n        if (diff <= 0)\n            a.next();\n        if (diff >= 0)\n            b.next();\n    }\n}\nfunction sameValues(a, b) {\n    if (a.length != b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (a[i] != b[i] && !a[i].eq(b[i]))\n            return false;\n    return true;\n}\nfunction remove(array, index) {\n    for (let i = index, e = array.length - 1; i < e; i++)\n        array[i] = array[i + 1];\n    array.pop();\n}\nfunction insert(array, index, value) {\n    for (let i = array.length - 1; i >= index; i--)\n        array[i + 1] = array[i];\n    array[index] = value;\n}\nfunction findMinIndex(value, array) {\n    let found = -1, foundPos = 1000000000 /* C.Far */;\n    for (let i = 0; i < array.length; i++)\n        if ((array[i] - foundPos || value[i].endSide - value[found].endSide) < 0) {\n            found = i;\n            foundPos = array[i];\n        }\n    return found;\n}\n\n/**\nCount the column position at the given offset into the string,\ntaking extending characters and tab size into account.\n*/\nfunction countColumn(string, tabSize, to = string.length) {\n    let n = 0;\n    for (let i = 0; i < to;) {\n        if (string.charCodeAt(i) == 9) {\n            n += tabSize - (n % tabSize);\n            i++;\n        }\n        else {\n            n++;\n            i = findClusterBreak(string, i);\n        }\n    }\n    return n;\n}\n/**\nFind the offset that corresponds to the given column position in a\nstring, taking extending characters and tab size into account. By\ndefault, the string length is returned when it is too short to\nreach the column. Pass `strict` true to make it return -1 in that\nsituation.\n*/\nfunction findColumn(string, col, tabSize, strict) {\n    for (let i = 0, n = 0;;) {\n        if (n >= col)\n            return i;\n        if (i == string.length)\n            break;\n        n += string.charCodeAt(i) == 9 ? tabSize - (n % tabSize) : 1;\n        i = findClusterBreak(string, i);\n    }\n    return strict === true ? -1 : string.length;\n}\n\nexport { Annotation, AnnotationType, ChangeDesc, ChangeSet, CharCategory, Compartment, EditorSelection, EditorState, Facet, Line, MapMode, Prec, Range, RangeSet, RangeSetBuilder, RangeValue, SelectionRange, StateEffect, StateEffectType, StateField, Text, Transaction, codePointAt, codePointSize, combineConfig, countColumn, findClusterBreak, findColumn, fromCodePoint };\n","const C = \"\\u037c\"\nconst COUNT = typeof Symbol == \"undefined\" ? \"__\" + C : Symbol.for(C)\nconst SET = typeof Symbol == \"undefined\" ? \"__styleSet\" + Math.floor(Math.random() * 1e8) : Symbol(\"styleSet\")\nconst top = typeof globalThis != \"undefined\" ? globalThis : typeof window != \"undefined\" ? window : {}\n\n// :: - Style modules encapsulate a set of CSS rules defined from\n// JavaScript. Their definitions are only available in a given DOM\n// root after it has been _mounted_ there with `StyleModule.mount`.\n//\n// Style modules should be created once and stored somewhere, as\n// opposed to re-creating them every time you need them. The amount of\n// CSS rules generated for a given DOM root is bounded by the amount\n// of style modules that were used. So to avoid leaking rules, don't\n// create these dynamically, but treat them as one-time allocations.\nexport class StyleModule {\n  // :: (Object<Style>, ?{finish: ?(string) → string})\n  // Create a style module from the given spec.\n  //\n  // When `finish` is given, it is called on regular (non-`@`)\n  // selectors (after `&` expansion) to compute the final selector.\n  constructor(spec, options) {\n    this.rules = []\n    let {finish} = options || {}\n\n    function splitSelector(selector) {\n      return /^@/.test(selector) ? [selector] : selector.split(/,\\s*/)\n    }\n\n    function render(selectors, spec, target, isKeyframes) {\n      let local = [], isAt = /^@(\\w+)\\b/.exec(selectors[0]), keyframes = isAt && isAt[1] == \"keyframes\"\n      if (isAt && spec == null) return target.push(selectors[0] + \";\")\n      for (let prop in spec) {\n        let value = spec[prop]\n        if (/&/.test(prop)) {\n          render(prop.split(/,\\s*/).map(part => selectors.map(sel => part.replace(/&/, sel))).reduce((a, b) => a.concat(b)),\n                 value, target)\n        } else if (value && typeof value == \"object\") {\n          if (!isAt) throw new RangeError(\"The value of a property (\" + prop + \") should be a primitive value.\")\n          render(splitSelector(prop), value, local, keyframes)\n        } else if (value != null) {\n          local.push(prop.replace(/_.*/, \"\").replace(/[A-Z]/g, l => \"-\" + l.toLowerCase()) + \": \" + value + \";\")\n        }\n      }\n      if (local.length || keyframes) {\n        target.push((finish && !isAt && !isKeyframes ? selectors.map(finish) : selectors).join(\", \") +\n                    \" {\" + local.join(\" \") + \"}\")\n      }\n    }\n\n    for (let prop in spec) render(splitSelector(prop), spec[prop], this.rules)\n  }\n\n  // :: () → string\n  // Returns a string containing the module's CSS rules.\n  getRules() { return this.rules.join(\"\\n\") }\n\n  // :: () → string\n  // Generate a new unique CSS class name.\n  static newName() {\n    let id = top[COUNT] || 1\n    top[COUNT] = id + 1\n    return C + id.toString(36)\n  }\n\n  // :: (union<Document, ShadowRoot>, union<[StyleModule], StyleModule>, ?{nonce: ?string})\n  //\n  // Mount the given set of modules in the given DOM root, which ensures\n  // that the CSS rules defined by the module are available in that\n  // context.\n  //\n  // Rules are only added to the document once per root.\n  //\n  // Rule order will follow the order of the modules, so that rules from\n  // modules later in the array take precedence of those from earlier\n  // modules. If you call this function multiple times for the same root\n  // in a way that changes the order of already mounted modules, the old\n  // order will be changed.\n  //\n  // If a Content Security Policy nonce is provided, it is added to\n  // the `<style>` tag generated by the library.\n  static mount(root, modules, options) {\n    let set = root[SET], nonce = options && options.nonce\n    if (!set) set = new StyleSet(root, nonce)\n    else if (nonce) set.setNonce(nonce)\n    set.mount(Array.isArray(modules) ? modules : [modules], root)\n  }\n}\n\nlet adoptedSet = new Map //<Document, StyleSet>\n\nclass StyleSet {\n  constructor(root, nonce) {\n    let doc = root.ownerDocument || root, win = doc.defaultView\n    if (!root.head && root.adoptedStyleSheets && win.CSSStyleSheet) {\n      let adopted = adoptedSet.get(doc)\n      if (adopted) return root[SET] = adopted\n      this.sheet = new win.CSSStyleSheet\n      adoptedSet.set(doc, this)\n    } else {\n      this.styleTag = doc.createElement(\"style\")\n      if (nonce) this.styleTag.setAttribute(\"nonce\", nonce)\n    }\n    this.modules = []\n    root[SET] = this\n  }\n\n  mount(modules, root) {\n    let sheet = this.sheet\n    let pos = 0 /* Current rule offset */, j = 0 /* Index into this.modules */\n    for (let i = 0; i < modules.length; i++) {\n      let mod = modules[i], index = this.modules.indexOf(mod)\n      if (index < j && index > -1) { // Ordering conflict\n        this.modules.splice(index, 1)\n        j--\n        index = -1\n      }\n      if (index == -1) {\n        this.modules.splice(j++, 0, mod)\n        if (sheet) for (let k = 0; k < mod.rules.length; k++)\n          sheet.insertRule(mod.rules[k], pos++)\n      } else {\n        while (j < index) pos += this.modules[j++].rules.length\n        pos += mod.rules.length\n        j++\n      }\n    }\n\n    if (sheet) {\n      if (root.adoptedStyleSheets.indexOf(this.sheet) < 0)\n        root.adoptedStyleSheets = [this.sheet, ...root.adoptedStyleSheets]\n    } else {\n      let text = \"\"\n      for (let i = 0; i < this.modules.length; i++)\n        text += this.modules[i].getRules() + \"\\n\"\n      this.styleTag.textContent = text\n      let target = root.head || root\n      if (this.styleTag.parentNode != target)\n        target.insertBefore(this.styleTag, target.firstChild)\n    }\n  }\n\n  setNonce(nonce) {\n    if (this.styleTag && this.styleTag.getAttribute(\"nonce\") != nonce)\n      this.styleTag.setAttribute(\"nonce\", nonce)\n  }\n}\n\n// Style::Object<union<Style,string>>\n//\n// A style is an object that, in the simple case, maps CSS property\n// names to strings holding their values, as in `{color: \"red\",\n// fontWeight: \"bold\"}`. The property names can be given in\n// camel-case—the library will insert a dash before capital letters\n// when converting them to CSS.\n//\n// If you include an underscore in a property name, it and everything\n// after it will be removed from the output, which can be useful when\n// providing a property multiple times, for browser compatibility\n// reasons.\n//\n// A property in a style object can also be a sub-selector, which\n// extends the current context to add a pseudo-selector or a child\n// selector. Such a property should contain a `&` character, which\n// will be replaced by the current selector. For example `{\"&:before\":\n// {content: '\"hi\"'}}`. Sub-selectors and regular properties can\n// freely be mixed in a given object. Any property containing a `&` is\n// assumed to be a sub-selector.\n//\n// Finally, a property can specify an @-block to be wrapped around the\n// styles defined inside the object that's the property's value. For\n// example to create a media query you can do `{\"@media screen and\n// (min-width: 400px)\": {...}}`.\n","export var base = {\n  8: \"Backspace\",\n  9: \"Tab\",\n  10: \"Enter\",\n  12: \"NumLock\",\n  13: \"Enter\",\n  16: \"Shift\",\n  17: \"Control\",\n  18: \"Alt\",\n  20: \"CapsLock\",\n  27: \"Escape\",\n  32: \" \",\n  33: \"PageUp\",\n  34: \"PageDown\",\n  35: \"End\",\n  36: \"Home\",\n  37: \"ArrowLeft\",\n  38: \"ArrowUp\",\n  39: \"ArrowRight\",\n  40: \"ArrowDown\",\n  44: \"PrintScreen\",\n  45: \"Insert\",\n  46: \"Delete\",\n  59: \";\",\n  61: \"=\",\n  91: \"Meta\",\n  92: \"Meta\",\n  106: \"*\",\n  107: \"+\",\n  108: \",\",\n  109: \"-\",\n  110: \".\",\n  111: \"/\",\n  144: \"NumLock\",\n  145: \"ScrollLock\",\n  160: \"Shift\",\n  161: \"Shift\",\n  162: \"Control\",\n  163: \"Control\",\n  164: \"Alt\",\n  165: \"Alt\",\n  173: \"-\",\n  186: \";\",\n  187: \"=\",\n  188: \",\",\n  189: \"-\",\n  190: \".\",\n  191: \"/\",\n  192: \"`\",\n  219: \"[\",\n  220: \"\\\\\",\n  221: \"]\",\n  222: \"'\"\n}\n\nexport var shift = {\n  48: \")\",\n  49: \"!\",\n  50: \"@\",\n  51: \"#\",\n  52: \"$\",\n  53: \"%\",\n  54: \"^\",\n  55: \"&\",\n  56: \"*\",\n  57: \"(\",\n  59: \":\",\n  61: \"+\",\n  173: \"_\",\n  186: \":\",\n  187: \"+\",\n  188: \"<\",\n  189: \"_\",\n  190: \">\",\n  191: \"?\",\n  192: \"~\",\n  219: \"{\",\n  220: \"|\",\n  221: \"}\",\n  222: \"\\\"\"\n}\n\nvar mac = typeof navigator != \"undefined\" && /Mac/.test(navigator.platform)\nvar ie = typeof navigator != \"undefined\" && /MSIE \\d|Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(navigator.userAgent)\n\n// Fill in the digit keys\nfor (var i = 0; i < 10; i++) base[48 + i] = base[96 + i] = String(i)\n\n// The function keys\nfor (var i = 1; i <= 24; i++) base[i + 111] = \"F\" + i\n\n// And the alphabetic keys\nfor (var i = 65; i <= 90; i++) {\n  base[i] = String.fromCharCode(i + 32)\n  shift[i] = String.fromCharCode(i)\n}\n\n// For each code that doesn't have a shift-equivalent, copy the base name\nfor (var code in base) if (!shift.hasOwnProperty(code)) shift[code] = base[code]\n\nexport function keyName(event) {\n  // On macOS, keys held with Shift and Cmd don't reflect the effect of Shift in `.key`.\n  // On IE, shift effect is never included in `.key`.\n  var ignoreKey = mac && event.metaKey && event.shiftKey && !event.ctrlKey && !event.altKey ||\n      ie && event.shiftKey && event.key && event.key.length == 1 ||\n      event.key == \"Unidentified\"\n  var name = (!ignoreKey && event.key) ||\n    (event.shiftKey ? shift : base)[event.keyCode] ||\n    event.key || \"Unidentified\"\n  // Edge sometimes produces wrong names (Issue #3)\n  if (name == \"Esc\") name = \"Escape\"\n  if (name == \"Del\") name = \"Delete\"\n  // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8860571/\n  if (name == \"Left\") name = \"ArrowLeft\"\n  if (name == \"Up\") name = \"ArrowUp\"\n  if (name == \"Right\") name = \"ArrowRight\"\n  if (name == \"Down\") name = \"ArrowDown\"\n  return name\n}\n","import { Text, RangeSet, MapMode, RangeValue, findClusterBreak, EditorSelection, Facet, StateEffect, ChangeSet, findColumn, CharCategory, Annotation, EditorState, Transaction, Prec, codePointAt, codePointSize, combineConfig, StateField, RangeSetBuilder, countColumn } from '@codemirror/state';\nimport { StyleModule } from 'style-mod';\nimport { keyName, base, shift } from 'w3c-keyname';\n\nfunction getSelection(root) {\n    let target;\n    // Browsers differ on whether shadow roots have a getSelection\n    // method. If it exists, use that, otherwise, call it on the\n    // document.\n    if (root.nodeType == 11) { // Shadow root\n        target = root.getSelection ? root : root.ownerDocument;\n    }\n    else {\n        target = root;\n    }\n    return target.getSelection();\n}\nfunction contains(dom, node) {\n    return node ? dom == node || dom.contains(node.nodeType != 1 ? node.parentNode : node) : false;\n}\nfunction deepActiveElement(doc) {\n    let elt = doc.activeElement;\n    while (elt && elt.shadowRoot)\n        elt = elt.shadowRoot.activeElement;\n    return elt;\n}\nfunction hasSelection(dom, selection) {\n    if (!selection.anchorNode)\n        return false;\n    try {\n        // Firefox will raise 'permission denied' errors when accessing\n        // properties of `sel.anchorNode` when it's in a generated CSS\n        // element.\n        return contains(dom, selection.anchorNode);\n    }\n    catch (_) {\n        return false;\n    }\n}\nfunction clientRectsFor(dom) {\n    if (dom.nodeType == 3)\n        return textRange(dom, 0, dom.nodeValue.length).getClientRects();\n    else if (dom.nodeType == 1)\n        return dom.getClientRects();\n    else\n        return [];\n}\n// Scans forward and backward through DOM positions equivalent to the\n// given one to see if the two are in the same place (i.e. after a\n// text node vs at the end of that text node)\nfunction isEquivalentPosition(node, off, targetNode, targetOff) {\n    return targetNode ? (scanFor(node, off, targetNode, targetOff, -1) ||\n        scanFor(node, off, targetNode, targetOff, 1)) : false;\n}\nfunction domIndex(node) {\n    for (var index = 0;; index++) {\n        node = node.previousSibling;\n        if (!node)\n            return index;\n    }\n}\nfunction isBlockElement(node) {\n    return node.nodeType == 1 && /^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\\d|SECTION|PRE)$/.test(node.nodeName);\n}\nfunction scanFor(node, off, targetNode, targetOff, dir) {\n    for (;;) {\n        if (node == targetNode && off == targetOff)\n            return true;\n        if (off == (dir < 0 ? 0 : maxOffset(node))) {\n            if (node.nodeName == \"DIV\")\n                return false;\n            let parent = node.parentNode;\n            if (!parent || parent.nodeType != 1)\n                return false;\n            off = domIndex(node) + (dir < 0 ? 0 : 1);\n            node = parent;\n        }\n        else if (node.nodeType == 1) {\n            node = node.childNodes[off + (dir < 0 ? -1 : 0)];\n            if (node.nodeType == 1 && node.contentEditable == \"false\")\n                return false;\n            off = dir < 0 ? maxOffset(node) : 0;\n        }\n        else {\n            return false;\n        }\n    }\n}\nfunction maxOffset(node) {\n    return node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length;\n}\nfunction flattenRect(rect, left) {\n    let x = left ? rect.left : rect.right;\n    return { left: x, right: x, top: rect.top, bottom: rect.bottom };\n}\nfunction windowRect(win) {\n    let vp = win.visualViewport;\n    if (vp)\n        return {\n            left: 0, right: vp.width,\n            top: 0, bottom: vp.height\n        };\n    return { left: 0, right: win.innerWidth,\n        top: 0, bottom: win.innerHeight };\n}\nfunction getScale(elt, rect) {\n    let scaleX = rect.width / elt.offsetWidth;\n    let scaleY = rect.height / elt.offsetHeight;\n    if (scaleX > 0.995 && scaleX < 1.005 || !isFinite(scaleX) || Math.abs(rect.width - elt.offsetWidth) < 1)\n        scaleX = 1;\n    if (scaleY > 0.995 && scaleY < 1.005 || !isFinite(scaleY) || Math.abs(rect.height - elt.offsetHeight) < 1)\n        scaleY = 1;\n    return { scaleX, scaleY };\n}\nfunction scrollRectIntoView(dom, rect, side, x, y, xMargin, yMargin, ltr) {\n    let doc = dom.ownerDocument, win = doc.defaultView || window;\n    for (let cur = dom, stop = false; cur && !stop;) {\n        if (cur.nodeType == 1) { // Element\n            let bounding, top = cur == doc.body;\n            let scaleX = 1, scaleY = 1;\n            if (top) {\n                bounding = windowRect(win);\n            }\n            else {\n                if (/^(fixed|sticky)$/.test(getComputedStyle(cur).position))\n                    stop = true;\n                if (cur.scrollHeight <= cur.clientHeight && cur.scrollWidth <= cur.clientWidth) {\n                    cur = cur.assignedSlot || cur.parentNode;\n                    continue;\n                }\n                let rect = cur.getBoundingClientRect();\n                ({ scaleX, scaleY } = getScale(cur, rect));\n                // Make sure scrollbar width isn't included in the rectangle\n                bounding = { left: rect.left, right: rect.left + cur.clientWidth * scaleX,\n                    top: rect.top, bottom: rect.top + cur.clientHeight * scaleY };\n            }\n            let moveX = 0, moveY = 0;\n            if (y == \"nearest\") {\n                if (rect.top < bounding.top) {\n                    moveY = -(bounding.top - rect.top + yMargin);\n                    if (side > 0 && rect.bottom > bounding.bottom + moveY)\n                        moveY = rect.bottom - bounding.bottom + moveY + yMargin;\n                }\n                else if (rect.bottom > bounding.bottom) {\n                    moveY = rect.bottom - bounding.bottom + yMargin;\n                    if (side < 0 && (rect.top - moveY) < bounding.top)\n                        moveY = -(bounding.top + moveY - rect.top + yMargin);\n                }\n            }\n            else {\n                let rectHeight = rect.bottom - rect.top, boundingHeight = bounding.bottom - bounding.top;\n                let targetTop = y == \"center\" && rectHeight <= boundingHeight ? rect.top + rectHeight / 2 - boundingHeight / 2 :\n                    y == \"start\" || y == \"center\" && side < 0 ? rect.top - yMargin :\n                        rect.bottom - boundingHeight + yMargin;\n                moveY = targetTop - bounding.top;\n            }\n            if (x == \"nearest\") {\n                if (rect.left < bounding.left) {\n                    moveX = -(bounding.left - rect.left + xMargin);\n                    if (side > 0 && rect.right > bounding.right + moveX)\n                        moveX = rect.right - bounding.right + moveX + xMargin;\n                }\n                else if (rect.right > bounding.right) {\n                    moveX = rect.right - bounding.right + xMargin;\n                    if (side < 0 && rect.left < bounding.left + moveX)\n                        moveX = -(bounding.left + moveX - rect.left + xMargin);\n                }\n            }\n            else {\n                let targetLeft = x == \"center\" ? rect.left + (rect.right - rect.left) / 2 - (bounding.right - bounding.left) / 2 :\n                    (x == \"start\") == ltr ? rect.left - xMargin :\n                        rect.right - (bounding.right - bounding.left) + xMargin;\n                moveX = targetLeft - bounding.left;\n            }\n            if (moveX || moveY) {\n                if (top) {\n                    win.scrollBy(moveX, moveY);\n                }\n                else {\n                    let movedX = 0, movedY = 0;\n                    if (moveY) {\n                        let start = cur.scrollTop;\n                        cur.scrollTop += moveY / scaleY;\n                        movedY = (cur.scrollTop - start) * scaleY;\n                    }\n                    if (moveX) {\n                        let start = cur.scrollLeft;\n                        cur.scrollLeft += moveX / scaleX;\n                        movedX = (cur.scrollLeft - start) * scaleX;\n                    }\n                    rect = { left: rect.left - movedX, top: rect.top - movedY,\n                        right: rect.right - movedX, bottom: rect.bottom - movedY };\n                    if (movedX && Math.abs(movedX - moveX) < 1)\n                        x = \"nearest\";\n                    if (movedY && Math.abs(movedY - moveY) < 1)\n                        y = \"nearest\";\n                }\n            }\n            if (top)\n                break;\n            cur = cur.assignedSlot || cur.parentNode;\n        }\n        else if (cur.nodeType == 11) { // A shadow root\n            cur = cur.host;\n        }\n        else {\n            break;\n        }\n    }\n}\nfunction scrollableParents(dom) {\n    let doc = dom.ownerDocument, x, y;\n    for (let cur = dom.parentNode; cur;) {\n        if (cur == doc.body || (x && y)) {\n            break;\n        }\n        else if (cur.nodeType == 1) {\n            if (!y && cur.scrollHeight > cur.clientHeight)\n                y = cur;\n            if (!x && cur.scrollWidth > cur.clientWidth)\n                x = cur;\n            cur = cur.assignedSlot || cur.parentNode;\n        }\n        else if (cur.nodeType == 11) {\n            cur = cur.host;\n        }\n        else {\n            break;\n        }\n    }\n    return { x, y };\n}\nclass DOMSelectionState {\n    constructor() {\n        this.anchorNode = null;\n        this.anchorOffset = 0;\n        this.focusNode = null;\n        this.focusOffset = 0;\n    }\n    eq(domSel) {\n        return this.anchorNode == domSel.anchorNode && this.anchorOffset == domSel.anchorOffset &&\n            this.focusNode == domSel.focusNode && this.focusOffset == domSel.focusOffset;\n    }\n    setRange(range) {\n        let { anchorNode, focusNode } = range;\n        // Clip offsets to node size to avoid crashes when Safari reports bogus offsets (#1152)\n        this.set(anchorNode, Math.min(range.anchorOffset, anchorNode ? maxOffset(anchorNode) : 0), focusNode, Math.min(range.focusOffset, focusNode ? maxOffset(focusNode) : 0));\n    }\n    set(anchorNode, anchorOffset, focusNode, focusOffset) {\n        this.anchorNode = anchorNode;\n        this.anchorOffset = anchorOffset;\n        this.focusNode = focusNode;\n        this.focusOffset = focusOffset;\n    }\n}\nlet preventScrollSupported = null;\n// Feature-detects support for .focus({preventScroll: true}), and uses\n// a fallback kludge when not supported.\nfunction focusPreventScroll(dom) {\n    if (dom.setActive)\n        return dom.setActive(); // in IE\n    if (preventScrollSupported)\n        return dom.focus(preventScrollSupported);\n    let stack = [];\n    for (let cur = dom; cur; cur = cur.parentNode) {\n        stack.push(cur, cur.scrollTop, cur.scrollLeft);\n        if (cur == cur.ownerDocument)\n            break;\n    }\n    dom.focus(preventScrollSupported == null ? {\n        get preventScroll() {\n            preventScrollSupported = { preventScroll: true };\n            return true;\n        }\n    } : undefined);\n    if (!preventScrollSupported) {\n        preventScrollSupported = false;\n        for (let i = 0; i < stack.length;) {\n            let elt = stack[i++], top = stack[i++], left = stack[i++];\n            if (elt.scrollTop != top)\n                elt.scrollTop = top;\n            if (elt.scrollLeft != left)\n                elt.scrollLeft = left;\n        }\n    }\n}\nlet scratchRange;\nfunction textRange(node, from, to = from) {\n    let range = scratchRange || (scratchRange = document.createRange());\n    range.setEnd(node, to);\n    range.setStart(node, from);\n    return range;\n}\nfunction dispatchKey(elt, name, code, mods) {\n    let options = { key: name, code: name, keyCode: code, which: code, cancelable: true };\n    if (mods)\n        ({ altKey: options.altKey, ctrlKey: options.ctrlKey, shiftKey: options.shiftKey, metaKey: options.metaKey } = mods);\n    let down = new KeyboardEvent(\"keydown\", options);\n    down.synthetic = true;\n    elt.dispatchEvent(down);\n    let up = new KeyboardEvent(\"keyup\", options);\n    up.synthetic = true;\n    elt.dispatchEvent(up);\n    return down.defaultPrevented || up.defaultPrevented;\n}\nfunction getRoot(node) {\n    while (node) {\n        if (node && (node.nodeType == 9 || node.nodeType == 11 && node.host))\n            return node;\n        node = node.assignedSlot || node.parentNode;\n    }\n    return null;\n}\nfunction clearAttributes(node) {\n    while (node.attributes.length)\n        node.removeAttributeNode(node.attributes[0]);\n}\nfunction atElementStart(doc, selection) {\n    let node = selection.focusNode, offset = selection.focusOffset;\n    if (!node || selection.anchorNode != node || selection.anchorOffset != offset)\n        return false;\n    // Safari can report bogus offsets (#1152)\n    offset = Math.min(offset, maxOffset(node));\n    for (;;) {\n        if (offset) {\n            if (node.nodeType != 1)\n                return false;\n            let prev = node.childNodes[offset - 1];\n            if (prev.contentEditable == \"false\")\n                offset--;\n            else {\n                node = prev;\n                offset = maxOffset(node);\n            }\n        }\n        else if (node == doc) {\n            return true;\n        }\n        else {\n            offset = domIndex(node);\n            node = node.parentNode;\n        }\n    }\n}\nfunction isScrolledToBottom(elt) {\n    return elt.scrollTop > Math.max(1, elt.scrollHeight - elt.clientHeight - 4);\n}\nfunction textNodeBefore(startNode, startOffset) {\n    for (let node = startNode, offset = startOffset;;) {\n        if (node.nodeType == 3 && offset > 0) {\n            return { node: node, offset: offset };\n        }\n        else if (node.nodeType == 1 && offset > 0) {\n            if (node.contentEditable == \"false\")\n                return null;\n            node = node.childNodes[offset - 1];\n            offset = maxOffset(node);\n        }\n        else if (node.parentNode && !isBlockElement(node)) {\n            offset = domIndex(node);\n            node = node.parentNode;\n        }\n        else {\n            return null;\n        }\n    }\n}\nfunction textNodeAfter(startNode, startOffset) {\n    for (let node = startNode, offset = startOffset;;) {\n        if (node.nodeType == 3 && offset < node.nodeValue.length) {\n            return { node: node, offset: offset };\n        }\n        else if (node.nodeType == 1 && offset < node.childNodes.length) {\n            if (node.contentEditable == \"false\")\n                return null;\n            node = node.childNodes[offset];\n            offset = 0;\n        }\n        else if (node.parentNode && !isBlockElement(node)) {\n            offset = domIndex(node) + 1;\n            node = node.parentNode;\n        }\n        else {\n            return null;\n        }\n    }\n}\n\nclass DOMPos {\n    constructor(node, offset, precise = true) {\n        this.node = node;\n        this.offset = offset;\n        this.precise = precise;\n    }\n    static before(dom, precise) { return new DOMPos(dom.parentNode, domIndex(dom), precise); }\n    static after(dom, precise) { return new DOMPos(dom.parentNode, domIndex(dom) + 1, precise); }\n}\nconst noChildren = [];\nclass ContentView {\n    constructor() {\n        this.parent = null;\n        this.dom = null;\n        this.flags = 2 /* ViewFlag.NodeDirty */;\n    }\n    get overrideDOMText() { return null; }\n    get posAtStart() {\n        return this.parent ? this.parent.posBefore(this) : 0;\n    }\n    get posAtEnd() {\n        return this.posAtStart + this.length;\n    }\n    posBefore(view) {\n        let pos = this.posAtStart;\n        for (let child of this.children) {\n            if (child == view)\n                return pos;\n            pos += child.length + child.breakAfter;\n        }\n        throw new RangeError(\"Invalid child in posBefore\");\n    }\n    posAfter(view) {\n        return this.posBefore(view) + view.length;\n    }\n    sync(view, track) {\n        if (this.flags & 2 /* ViewFlag.NodeDirty */) {\n            let parent = this.dom;\n            let prev = null, next;\n            for (let child of this.children) {\n                if (child.flags & 7 /* ViewFlag.Dirty */) {\n                    if (!child.dom && (next = prev ? prev.nextSibling : parent.firstChild)) {\n                        let contentView = ContentView.get(next);\n                        if (!contentView || !contentView.parent && contentView.canReuseDOM(child))\n                            child.reuseDOM(next);\n                    }\n                    child.sync(view, track);\n                    child.flags &= ~7 /* ViewFlag.Dirty */;\n                }\n                next = prev ? prev.nextSibling : parent.firstChild;\n                if (track && !track.written && track.node == parent && next != child.dom)\n                    track.written = true;\n                if (child.dom.parentNode == parent) {\n                    while (next && next != child.dom)\n                        next = rm$1(next);\n                }\n                else {\n                    parent.insertBefore(child.dom, next);\n                }\n                prev = child.dom;\n            }\n            next = prev ? prev.nextSibling : parent.firstChild;\n            if (next && track && track.node == parent)\n                track.written = true;\n            while (next)\n                next = rm$1(next);\n        }\n        else if (this.flags & 1 /* ViewFlag.ChildDirty */) {\n            for (let child of this.children)\n                if (child.flags & 7 /* ViewFlag.Dirty */) {\n                    child.sync(view, track);\n                    child.flags &= ~7 /* ViewFlag.Dirty */;\n                }\n        }\n    }\n    reuseDOM(_dom) { }\n    localPosFromDOM(node, offset) {\n        let after;\n        if (node == this.dom) {\n            after = this.dom.childNodes[offset];\n        }\n        else {\n            let bias = maxOffset(node) == 0 ? 0 : offset == 0 ? -1 : 1;\n            for (;;) {\n                let parent = node.parentNode;\n                if (parent == this.dom)\n                    break;\n                if (bias == 0 && parent.firstChild != parent.lastChild) {\n                    if (node == parent.firstChild)\n                        bias = -1;\n                    else\n                        bias = 1;\n                }\n                node = parent;\n            }\n            if (bias < 0)\n                after = node;\n            else\n                after = node.nextSibling;\n        }\n        if (after == this.dom.firstChild)\n            return 0;\n        while (after && !ContentView.get(after))\n            after = after.nextSibling;\n        if (!after)\n            return this.length;\n        for (let i = 0, pos = 0;; i++) {\n            let child = this.children[i];\n            if (child.dom == after)\n                return pos;\n            pos += child.length + child.breakAfter;\n        }\n    }\n    domBoundsAround(from, to, offset = 0) {\n        let fromI = -1, fromStart = -1, toI = -1, toEnd = -1;\n        for (let i = 0, pos = offset, prevEnd = offset; i < this.children.length; i++) {\n            let child = this.children[i], end = pos + child.length;\n            if (pos < from && end > to)\n                return child.domBoundsAround(from, to, pos);\n            if (end >= from && fromI == -1) {\n                fromI = i;\n                fromStart = pos;\n            }\n            if (pos > to && child.dom.parentNode == this.dom) {\n                toI = i;\n                toEnd = prevEnd;\n                break;\n            }\n            prevEnd = end;\n            pos = end + child.breakAfter;\n        }\n        return { from: fromStart, to: toEnd < 0 ? offset + this.length : toEnd,\n            startDOM: (fromI ? this.children[fromI - 1].dom.nextSibling : null) || this.dom.firstChild,\n            endDOM: toI < this.children.length && toI >= 0 ? this.children[toI].dom : null };\n    }\n    markDirty(andParent = false) {\n        this.flags |= 2 /* ViewFlag.NodeDirty */;\n        this.markParentsDirty(andParent);\n    }\n    markParentsDirty(childList) {\n        for (let parent = this.parent; parent; parent = parent.parent) {\n            if (childList)\n                parent.flags |= 2 /* ViewFlag.NodeDirty */;\n            if (parent.flags & 1 /* ViewFlag.ChildDirty */)\n                return;\n            parent.flags |= 1 /* ViewFlag.ChildDirty */;\n            childList = false;\n        }\n    }\n    setParent(parent) {\n        if (this.parent != parent) {\n            this.parent = parent;\n            if (this.flags & 7 /* ViewFlag.Dirty */)\n                this.markParentsDirty(true);\n        }\n    }\n    setDOM(dom) {\n        if (this.dom == dom)\n            return;\n        if (this.dom)\n            this.dom.cmView = null;\n        this.dom = dom;\n        dom.cmView = this;\n    }\n    get rootView() {\n        for (let v = this;;) {\n            let parent = v.parent;\n            if (!parent)\n                return v;\n            v = parent;\n        }\n    }\n    replaceChildren(from, to, children = noChildren) {\n        this.markDirty();\n        for (let i = from; i < to; i++) {\n            let child = this.children[i];\n            if (child.parent == this && children.indexOf(child) < 0)\n                child.destroy();\n        }\n        this.children.splice(from, to - from, ...children);\n        for (let i = 0; i < children.length; i++)\n            children[i].setParent(this);\n    }\n    ignoreMutation(_rec) { return false; }\n    ignoreEvent(_event) { return false; }\n    childCursor(pos = this.length) {\n        return new ChildCursor(this.children, pos, this.children.length);\n    }\n    childPos(pos, bias = 1) {\n        return this.childCursor().findPos(pos, bias);\n    }\n    toString() {\n        let name = this.constructor.name.replace(\"View\", \"\");\n        return name + (this.children.length ? \"(\" + this.children.join() + \")\" :\n            this.length ? \"[\" + (name == \"Text\" ? this.text : this.length) + \"]\" : \"\") +\n            (this.breakAfter ? \"#\" : \"\");\n    }\n    static get(node) { return node.cmView; }\n    get isEditable() { return true; }\n    get isWidget() { return false; }\n    get isHidden() { return false; }\n    merge(from, to, source, hasStart, openStart, openEnd) {\n        return false;\n    }\n    become(other) { return false; }\n    canReuseDOM(other) {\n        return other.constructor == this.constructor && !((this.flags | other.flags) & 8 /* ViewFlag.Composition */);\n    }\n    // When this is a zero-length view with a side, this should return a\n    // number <= 0 to indicate it is before its position, or a\n    // number > 0 when after its position.\n    getSide() { return 0; }\n    destroy() {\n        for (let child of this.children)\n            if (child.parent == this)\n                child.destroy();\n        this.parent = null;\n    }\n}\nContentView.prototype.breakAfter = 0;\n// Remove a DOM node and return its next sibling.\nfunction rm$1(dom) {\n    let next = dom.nextSibling;\n    dom.parentNode.removeChild(dom);\n    return next;\n}\nclass ChildCursor {\n    constructor(children, pos, i) {\n        this.children = children;\n        this.pos = pos;\n        this.i = i;\n        this.off = 0;\n    }\n    findPos(pos, bias = 1) {\n        for (;;) {\n            if (pos > this.pos || pos == this.pos &&\n                (bias > 0 || this.i == 0 || this.children[this.i - 1].breakAfter)) {\n                this.off = pos - this.pos;\n                return this;\n            }\n            let next = this.children[--this.i];\n            this.pos -= next.length + next.breakAfter;\n        }\n    }\n}\nfunction replaceRange(parent, fromI, fromOff, toI, toOff, insert, breakAtStart, openStart, openEnd) {\n    let { children } = parent;\n    let before = children.length ? children[fromI] : null;\n    let last = insert.length ? insert[insert.length - 1] : null;\n    let breakAtEnd = last ? last.breakAfter : breakAtStart;\n    // Change within a single child\n    if (fromI == toI && before && !breakAtStart && !breakAtEnd && insert.length < 2 &&\n        before.merge(fromOff, toOff, insert.length ? last : null, fromOff == 0, openStart, openEnd))\n        return;\n    if (toI < children.length) {\n        let after = children[toI];\n        // Make sure the end of the child after the update is preserved in `after`\n        if (after && (toOff < after.length || after.breakAfter && (last === null || last === void 0 ? void 0 : last.breakAfter))) {\n            // If we're splitting a child, separate part of it to avoid that\n            // being mangled when updating the child before the update.\n            if (fromI == toI) {\n                after = after.split(toOff);\n                toOff = 0;\n            }\n            // If the element after the replacement should be merged with\n            // the last replacing element, update `content`\n            if (!breakAtEnd && last && after.merge(0, toOff, last, true, 0, openEnd)) {\n                insert[insert.length - 1] = after;\n            }\n            else {\n                // Remove the start of the after element, if necessary, and\n                // add it to `content`.\n                if (toOff || after.children.length && !after.children[0].length)\n                    after.merge(0, toOff, null, false, 0, openEnd);\n                insert.push(after);\n            }\n        }\n        else if (after === null || after === void 0 ? void 0 : after.breakAfter) {\n            // The element at `toI` is entirely covered by this range.\n            // Preserve its line break, if any.\n            if (last)\n                last.breakAfter = 1;\n            else\n                breakAtStart = 1;\n        }\n        // Since we've handled the next element from the current elements\n        // now, make sure `toI` points after that.\n        toI++;\n    }\n    if (before) {\n        before.breakAfter = breakAtStart;\n        if (fromOff > 0) {\n            if (!breakAtStart && insert.length && before.merge(fromOff, before.length, insert[0], false, openStart, 0)) {\n                before.breakAfter = insert.shift().breakAfter;\n            }\n            else if (fromOff < before.length || before.children.length && before.children[before.children.length - 1].length == 0) {\n                before.merge(fromOff, before.length, null, false, openStart, 0);\n            }\n            fromI++;\n        }\n    }\n    // Try to merge widgets on the boundaries of the replacement\n    while (fromI < toI && insert.length) {\n        if (children[toI - 1].become(insert[insert.length - 1])) {\n            toI--;\n            insert.pop();\n            openEnd = insert.length ? 0 : openStart;\n        }\n        else if (children[fromI].become(insert[0])) {\n            fromI++;\n            insert.shift();\n            openStart = insert.length ? 0 : openEnd;\n        }\n        else {\n            break;\n        }\n    }\n    if (!insert.length && fromI && toI < children.length && !children[fromI - 1].breakAfter &&\n        children[toI].merge(0, 0, children[fromI - 1], false, openStart, openEnd))\n        fromI--;\n    if (fromI < toI || insert.length)\n        parent.replaceChildren(fromI, toI, insert);\n}\nfunction mergeChildrenInto(parent, from, to, insert, openStart, openEnd) {\n    let cur = parent.childCursor();\n    let { i: toI, off: toOff } = cur.findPos(to, 1);\n    let { i: fromI, off: fromOff } = cur.findPos(from, -1);\n    let dLen = from - to;\n    for (let view of insert)\n        dLen += view.length;\n    parent.length += dLen;\n    replaceRange(parent, fromI, fromOff, toI, toOff, insert, 0, openStart, openEnd);\n}\n\nlet nav = typeof navigator != \"undefined\" ? navigator : { userAgent: \"\", vendor: \"\", platform: \"\" };\nlet doc = typeof document != \"undefined\" ? document : { documentElement: { style: {} } };\nconst ie_edge = /*@__PURE__*//Edge\\/(\\d+)/.exec(nav.userAgent);\nconst ie_upto10 = /*@__PURE__*//MSIE \\d/.test(nav.userAgent);\nconst ie_11up = /*@__PURE__*//Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(nav.userAgent);\nconst ie = !!(ie_upto10 || ie_11up || ie_edge);\nconst gecko = !ie && /*@__PURE__*//gecko\\/(\\d+)/i.test(nav.userAgent);\nconst chrome = !ie && /*@__PURE__*//Chrome\\/(\\d+)/.exec(nav.userAgent);\nconst webkit = \"webkitFontSmoothing\" in doc.documentElement.style;\nconst safari = !ie && /*@__PURE__*//Apple Computer/.test(nav.vendor);\nconst ios = safari && (/*@__PURE__*//Mobile\\/\\w+/.test(nav.userAgent) || nav.maxTouchPoints > 2);\nvar browser = {\n    mac: ios || /*@__PURE__*//Mac/.test(nav.platform),\n    windows: /*@__PURE__*//Win/.test(nav.platform),\n    linux: /*@__PURE__*//Linux|X11/.test(nav.platform),\n    ie,\n    ie_version: ie_upto10 ? doc.documentMode || 6 : ie_11up ? +ie_11up[1] : ie_edge ? +ie_edge[1] : 0,\n    gecko,\n    gecko_version: gecko ? +(/*@__PURE__*//Firefox\\/(\\d+)/.exec(nav.userAgent) || [0, 0])[1] : 0,\n    chrome: !!chrome,\n    chrome_version: chrome ? +chrome[1] : 0,\n    ios,\n    android: /*@__PURE__*//Android\\b/.test(nav.userAgent),\n    webkit,\n    safari,\n    webkit_version: webkit ? +(/*@__PURE__*//\\bAppleWebKit\\/(\\d+)/.exec(nav.userAgent) || [0, 0])[1] : 0,\n    tabSize: doc.documentElement.style.tabSize != null ? \"tab-size\" : \"-moz-tab-size\"\n};\n\nconst MaxJoinLen = 256;\nclass TextView extends ContentView {\n    constructor(text) {\n        super();\n        this.text = text;\n    }\n    get length() { return this.text.length; }\n    createDOM(textDOM) {\n        this.setDOM(textDOM || document.createTextNode(this.text));\n    }\n    sync(view, track) {\n        if (!this.dom)\n            this.createDOM();\n        if (this.dom.nodeValue != this.text) {\n            if (track && track.node == this.dom)\n                track.written = true;\n            this.dom.nodeValue = this.text;\n        }\n    }\n    reuseDOM(dom) {\n        if (dom.nodeType == 3)\n            this.createDOM(dom);\n    }\n    merge(from, to, source) {\n        if ((this.flags & 8 /* ViewFlag.Composition */) ||\n            source && (!(source instanceof TextView) ||\n                this.length - (to - from) + source.length > MaxJoinLen ||\n                (source.flags & 8 /* ViewFlag.Composition */)))\n            return false;\n        this.text = this.text.slice(0, from) + (source ? source.text : \"\") + this.text.slice(to);\n        this.markDirty();\n        return true;\n    }\n    split(from) {\n        let result = new TextView(this.text.slice(from));\n        this.text = this.text.slice(0, from);\n        this.markDirty();\n        result.flags |= this.flags & 8 /* ViewFlag.Composition */;\n        return result;\n    }\n    localPosFromDOM(node, offset) {\n        return node == this.dom ? offset : offset ? this.text.length : 0;\n    }\n    domAtPos(pos) { return new DOMPos(this.dom, pos); }\n    domBoundsAround(_from, _to, offset) {\n        return { from: offset, to: offset + this.length, startDOM: this.dom, endDOM: this.dom.nextSibling };\n    }\n    coordsAt(pos, side) {\n        return textCoords(this.dom, pos, side);\n    }\n}\nclass MarkView extends ContentView {\n    constructor(mark, children = [], length = 0) {\n        super();\n        this.mark = mark;\n        this.children = children;\n        this.length = length;\n        for (let ch of children)\n            ch.setParent(this);\n    }\n    setAttrs(dom) {\n        clearAttributes(dom);\n        if (this.mark.class)\n            dom.className = this.mark.class;\n        if (this.mark.attrs)\n            for (let name in this.mark.attrs)\n                dom.setAttribute(name, this.mark.attrs[name]);\n        return dom;\n    }\n    canReuseDOM(other) {\n        return super.canReuseDOM(other) && !((this.flags | other.flags) & 8 /* ViewFlag.Composition */);\n    }\n    reuseDOM(node) {\n        if (node.nodeName == this.mark.tagName.toUpperCase()) {\n            this.setDOM(node);\n            this.flags |= 4 /* ViewFlag.AttrsDirty */ | 2 /* ViewFlag.NodeDirty */;\n        }\n    }\n    sync(view, track) {\n        if (!this.dom)\n            this.setDOM(this.setAttrs(document.createElement(this.mark.tagName)));\n        else if (this.flags & 4 /* ViewFlag.AttrsDirty */)\n            this.setAttrs(this.dom);\n        super.sync(view, track);\n    }\n    merge(from, to, source, _hasStart, openStart, openEnd) {\n        if (source && (!(source instanceof MarkView && source.mark.eq(this.mark)) ||\n            (from && openStart <= 0) || (to < this.length && openEnd <= 0)))\n            return false;\n        mergeChildrenInto(this, from, to, source ? source.children.slice() : [], openStart - 1, openEnd - 1);\n        this.markDirty();\n        return true;\n    }\n    split(from) {\n        let result = [], off = 0, detachFrom = -1, i = 0;\n        for (let elt of this.children) {\n            let end = off + elt.length;\n            if (end > from)\n                result.push(off < from ? elt.split(from - off) : elt);\n            if (detachFrom < 0 && off >= from)\n                detachFrom = i;\n            off = end;\n            i++;\n        }\n        let length = this.length - from;\n        this.length = from;\n        if (detachFrom > -1) {\n            this.children.length = detachFrom;\n            this.markDirty();\n        }\n        return new MarkView(this.mark, result, length);\n    }\n    domAtPos(pos) {\n        return inlineDOMAtPos(this, pos);\n    }\n    coordsAt(pos, side) {\n        return coordsInChildren(this, pos, side);\n    }\n}\nfunction textCoords(text, pos, side) {\n    let length = text.nodeValue.length;\n    if (pos > length)\n        pos = length;\n    let from = pos, to = pos, flatten = 0;\n    if (pos == 0 && side < 0 || pos == length && side >= 0) {\n        if (!(browser.chrome || browser.gecko)) { // These browsers reliably return valid rectangles for empty ranges\n            if (pos) {\n                from--;\n                flatten = 1;\n            } // FIXME this is wrong in RTL text\n            else if (to < length) {\n                to++;\n                flatten = -1;\n            }\n        }\n    }\n    else {\n        if (side < 0)\n            from--;\n        else if (to < length)\n            to++;\n    }\n    let rects = textRange(text, from, to).getClientRects();\n    if (!rects.length)\n        return null;\n    let rect = rects[(flatten ? flatten < 0 : side >= 0) ? 0 : rects.length - 1];\n    if (browser.safari && !flatten && rect.width == 0)\n        rect = Array.prototype.find.call(rects, r => r.width) || rect;\n    return flatten ? flattenRect(rect, flatten < 0) : rect || null;\n}\n// Also used for collapsed ranges that don't have a placeholder widget!\nclass WidgetView extends ContentView {\n    static create(widget, length, side) {\n        return new WidgetView(widget, length, side);\n    }\n    constructor(widget, length, side) {\n        super();\n        this.widget = widget;\n        this.length = length;\n        this.side = side;\n        this.prevWidget = null;\n    }\n    split(from) {\n        let result = WidgetView.create(this.widget, this.length - from, this.side);\n        this.length -= from;\n        return result;\n    }\n    sync(view) {\n        if (!this.dom || !this.widget.updateDOM(this.dom, view)) {\n            if (this.dom && this.prevWidget)\n                this.prevWidget.destroy(this.dom);\n            this.prevWidget = null;\n            this.setDOM(this.widget.toDOM(view));\n            if (!this.widget.editable)\n                this.dom.contentEditable = \"false\";\n        }\n    }\n    getSide() { return this.side; }\n    merge(from, to, source, hasStart, openStart, openEnd) {\n        if (source && (!(source instanceof WidgetView) || !this.widget.compare(source.widget) ||\n            from > 0 && openStart <= 0 || to < this.length && openEnd <= 0))\n            return false;\n        this.length = from + (source ? source.length : 0) + (this.length - to);\n        return true;\n    }\n    become(other) {\n        if (other instanceof WidgetView && other.side == this.side &&\n            this.widget.constructor == other.widget.constructor) {\n            if (!this.widget.compare(other.widget))\n                this.markDirty(true);\n            if (this.dom && !this.prevWidget)\n                this.prevWidget = this.widget;\n            this.widget = other.widget;\n            this.length = other.length;\n            return true;\n        }\n        return false;\n    }\n    ignoreMutation() { return true; }\n    ignoreEvent(event) { return this.widget.ignoreEvent(event); }\n    get overrideDOMText() {\n        if (this.length == 0)\n            return Text.empty;\n        let top = this;\n        while (top.parent)\n            top = top.parent;\n        let { view } = top, text = view && view.state.doc, start = this.posAtStart;\n        return text ? text.slice(start, start + this.length) : Text.empty;\n    }\n    domAtPos(pos) {\n        return (this.length ? pos == 0 : this.side > 0)\n            ? DOMPos.before(this.dom)\n            : DOMPos.after(this.dom, pos == this.length);\n    }\n    domBoundsAround() { return null; }\n    coordsAt(pos, side) {\n        let custom = this.widget.coordsAt(this.dom, pos, side);\n        if (custom)\n            return custom;\n        let rects = this.dom.getClientRects(), rect = null;\n        if (!rects.length)\n            return null;\n        let fromBack = this.side ? this.side < 0 : pos > 0;\n        for (let i = fromBack ? rects.length - 1 : 0;; i += (fromBack ? -1 : 1)) {\n            rect = rects[i];\n            if (pos > 0 ? i == 0 : i == rects.length - 1 || rect.top < rect.bottom)\n                break;\n        }\n        return flattenRect(rect, !fromBack);\n    }\n    get isEditable() { return false; }\n    get isWidget() { return true; }\n    get isHidden() { return this.widget.isHidden; }\n    destroy() {\n        super.destroy();\n        if (this.dom)\n            this.widget.destroy(this.dom);\n    }\n}\n// These are drawn around uneditable widgets to avoid a number of\n// browser bugs that show up when the cursor is directly next to\n// uneditable inline content.\nclass WidgetBufferView extends ContentView {\n    constructor(side) {\n        super();\n        this.side = side;\n    }\n    get length() { return 0; }\n    merge() { return false; }\n    become(other) {\n        return other instanceof WidgetBufferView && other.side == this.side;\n    }\n    split() { return new WidgetBufferView(this.side); }\n    sync() {\n        if (!this.dom) {\n            let dom = document.createElement(\"img\");\n            dom.className = \"cm-widgetBuffer\";\n            dom.setAttribute(\"aria-hidden\", \"true\");\n            this.setDOM(dom);\n        }\n    }\n    getSide() { return this.side; }\n    domAtPos(pos) { return this.side > 0 ? DOMPos.before(this.dom) : DOMPos.after(this.dom); }\n    localPosFromDOM() { return 0; }\n    domBoundsAround() { return null; }\n    coordsAt(pos) {\n        return this.dom.getBoundingClientRect();\n    }\n    get overrideDOMText() {\n        return Text.empty;\n    }\n    get isHidden() { return true; }\n}\nTextView.prototype.children = WidgetView.prototype.children = WidgetBufferView.prototype.children = noChildren;\nfunction inlineDOMAtPos(parent, pos) {\n    let dom = parent.dom, { children } = parent, i = 0;\n    for (let off = 0; i < children.length; i++) {\n        let child = children[i], end = off + child.length;\n        if (end == off && child.getSide() <= 0)\n            continue;\n        if (pos > off && pos < end && child.dom.parentNode == dom)\n            return child.domAtPos(pos - off);\n        if (pos <= off)\n            break;\n        off = end;\n    }\n    for (let j = i; j > 0; j--) {\n        let prev = children[j - 1];\n        if (prev.dom.parentNode == dom)\n            return prev.domAtPos(prev.length);\n    }\n    for (let j = i; j < children.length; j++) {\n        let next = children[j];\n        if (next.dom.parentNode == dom)\n            return next.domAtPos(0);\n    }\n    return new DOMPos(dom, 0);\n}\n// Assumes `view`, if a mark view, has precisely 1 child.\nfunction joinInlineInto(parent, view, open) {\n    let last, { children } = parent;\n    if (open > 0 && view instanceof MarkView && children.length &&\n        (last = children[children.length - 1]) instanceof MarkView && last.mark.eq(view.mark)) {\n        joinInlineInto(last, view.children[0], open - 1);\n    }\n    else {\n        children.push(view);\n        view.setParent(parent);\n    }\n    parent.length += view.length;\n}\nfunction coordsInChildren(view, pos, side) {\n    let before = null, beforePos = -1, after = null, afterPos = -1;\n    function scan(view, pos) {\n        for (let i = 0, off = 0; i < view.children.length && off <= pos; i++) {\n            let child = view.children[i], end = off + child.length;\n            if (end >= pos) {\n                if (child.children.length) {\n                    scan(child, pos - off);\n                }\n                else if ((!after || after.isHidden && side > 0) &&\n                    (end > pos || off == end && child.getSide() > 0)) {\n                    after = child;\n                    afterPos = pos - off;\n                }\n                else if (off < pos || (off == end && child.getSide() < 0) && !child.isHidden) {\n                    before = child;\n                    beforePos = pos - off;\n                }\n            }\n            off = end;\n        }\n    }\n    scan(view, pos);\n    let target = (side < 0 ? before : after) || before || after;\n    if (target)\n        return target.coordsAt(Math.max(0, target == before ? beforePos : afterPos), side);\n    return fallbackRect(view);\n}\nfunction fallbackRect(view) {\n    let last = view.dom.lastChild;\n    if (!last)\n        return view.dom.getBoundingClientRect();\n    let rects = clientRectsFor(last);\n    return rects[rects.length - 1] || null;\n}\n\nfunction combineAttrs(source, target) {\n    for (let name in source) {\n        if (name == \"class\" && target.class)\n            target.class += \" \" + source.class;\n        else if (name == \"style\" && target.style)\n            target.style += \";\" + source.style;\n        else\n            target[name] = source[name];\n    }\n    return target;\n}\nconst noAttrs = /*@__PURE__*/Object.create(null);\nfunction attrsEq(a, b, ignore) {\n    if (a == b)\n        return true;\n    if (!a)\n        a = noAttrs;\n    if (!b)\n        b = noAttrs;\n    let keysA = Object.keys(a), keysB = Object.keys(b);\n    if (keysA.length - (ignore && keysA.indexOf(ignore) > -1 ? 1 : 0) !=\n        keysB.length - (ignore && keysB.indexOf(ignore) > -1 ? 1 : 0))\n        return false;\n    for (let key of keysA) {\n        if (key != ignore && (keysB.indexOf(key) == -1 || a[key] !== b[key]))\n            return false;\n    }\n    return true;\n}\nfunction updateAttrs(dom, prev, attrs) {\n    let changed = false;\n    if (prev)\n        for (let name in prev)\n            if (!(attrs && name in attrs)) {\n                changed = true;\n                if (name == \"style\")\n                    dom.style.cssText = \"\";\n                else\n                    dom.removeAttribute(name);\n            }\n    if (attrs)\n        for (let name in attrs)\n            if (!(prev && prev[name] == attrs[name])) {\n                changed = true;\n                if (name == \"style\")\n                    dom.style.cssText = attrs[name];\n                else\n                    dom.setAttribute(name, attrs[name]);\n            }\n    return changed;\n}\nfunction getAttrs(dom) {\n    let attrs = Object.create(null);\n    for (let i = 0; i < dom.attributes.length; i++) {\n        let attr = dom.attributes[i];\n        attrs[attr.name] = attr.value;\n    }\n    return attrs;\n}\n\nclass LineView extends ContentView {\n    constructor() {\n        super(...arguments);\n        this.children = [];\n        this.length = 0;\n        this.prevAttrs = undefined;\n        this.attrs = null;\n        this.breakAfter = 0;\n    }\n    // Consumes source\n    merge(from, to, source, hasStart, openStart, openEnd) {\n        if (source) {\n            if (!(source instanceof LineView))\n                return false;\n            if (!this.dom)\n                source.transferDOM(this); // Reuse source.dom when appropriate\n        }\n        if (hasStart)\n            this.setDeco(source ? source.attrs : null);\n        mergeChildrenInto(this, from, to, source ? source.children.slice() : [], openStart, openEnd);\n        return true;\n    }\n    split(at) {\n        let end = new LineView;\n        end.breakAfter = this.breakAfter;\n        if (this.length == 0)\n            return end;\n        let { i, off } = this.childPos(at);\n        if (off) {\n            end.append(this.children[i].split(off), 0);\n            this.children[i].merge(off, this.children[i].length, null, false, 0, 0);\n            i++;\n        }\n        for (let j = i; j < this.children.length; j++)\n            end.append(this.children[j], 0);\n        while (i > 0 && this.children[i - 1].length == 0)\n            this.children[--i].destroy();\n        this.children.length = i;\n        this.markDirty();\n        this.length = at;\n        return end;\n    }\n    transferDOM(other) {\n        if (!this.dom)\n            return;\n        this.markDirty();\n        other.setDOM(this.dom);\n        other.prevAttrs = this.prevAttrs === undefined ? this.attrs : this.prevAttrs;\n        this.prevAttrs = undefined;\n        this.dom = null;\n    }\n    setDeco(attrs) {\n        if (!attrsEq(this.attrs, attrs)) {\n            if (this.dom) {\n                this.prevAttrs = this.attrs;\n                this.markDirty();\n            }\n            this.attrs = attrs;\n        }\n    }\n    append(child, openStart) {\n        joinInlineInto(this, child, openStart);\n    }\n    // Only called when building a line view in ContentBuilder\n    addLineDeco(deco) {\n        let attrs = deco.spec.attributes, cls = deco.spec.class;\n        if (attrs)\n            this.attrs = combineAttrs(attrs, this.attrs || {});\n        if (cls)\n            this.attrs = combineAttrs({ class: cls }, this.attrs || {});\n    }\n    domAtPos(pos) {\n        return inlineDOMAtPos(this, pos);\n    }\n    reuseDOM(node) {\n        if (node.nodeName == \"DIV\") {\n            this.setDOM(node);\n            this.flags |= 4 /* ViewFlag.AttrsDirty */ | 2 /* ViewFlag.NodeDirty */;\n        }\n    }\n    sync(view, track) {\n        var _a;\n        if (!this.dom) {\n            this.setDOM(document.createElement(\"div\"));\n            this.dom.className = \"cm-line\";\n            this.prevAttrs = this.attrs ? null : undefined;\n        }\n        else if (this.flags & 4 /* ViewFlag.AttrsDirty */) {\n            clearAttributes(this.dom);\n            this.dom.className = \"cm-line\";\n            this.prevAttrs = this.attrs ? null : undefined;\n        }\n        if (this.prevAttrs !== undefined) {\n            updateAttrs(this.dom, this.prevAttrs, this.attrs);\n            this.dom.classList.add(\"cm-line\");\n            this.prevAttrs = undefined;\n        }\n        super.sync(view, track);\n        let last = this.dom.lastChild;\n        while (last && ContentView.get(last) instanceof MarkView)\n            last = last.lastChild;\n        if (!last || !this.length ||\n            last.nodeName != \"BR\" && ((_a = ContentView.get(last)) === null || _a === void 0 ? void 0 : _a.isEditable) == false &&\n                (!browser.ios || !this.children.some(ch => ch instanceof TextView))) {\n            let hack = document.createElement(\"BR\");\n            hack.cmIgnore = true;\n            this.dom.appendChild(hack);\n        }\n    }\n    measureTextSize() {\n        if (this.children.length == 0 || this.length > 20)\n            return null;\n        let totalWidth = 0, textHeight;\n        for (let child of this.children) {\n            if (!(child instanceof TextView) || /[^ -~]/.test(child.text))\n                return null;\n            let rects = clientRectsFor(child.dom);\n            if (rects.length != 1)\n                return null;\n            totalWidth += rects[0].width;\n            textHeight = rects[0].height;\n        }\n        return !totalWidth ? null : {\n            lineHeight: this.dom.getBoundingClientRect().height,\n            charWidth: totalWidth / this.length,\n            textHeight\n        };\n    }\n    coordsAt(pos, side) {\n        let rect = coordsInChildren(this, pos, side);\n        // Correct rectangle height for empty lines when the returned\n        // height is larger than the text height.\n        if (!this.children.length && rect && this.parent) {\n            let { heightOracle } = this.parent.view.viewState, height = rect.bottom - rect.top;\n            if (Math.abs(height - heightOracle.lineHeight) < 2 && heightOracle.textHeight < height) {\n                let dist = (height - heightOracle.textHeight) / 2;\n                return { top: rect.top + dist, bottom: rect.bottom - dist, left: rect.left, right: rect.left };\n            }\n        }\n        return rect;\n    }\n    become(other) {\n        return other instanceof LineView && this.children.length == 0 && other.children.length == 0 &&\n            attrsEq(this.attrs, other.attrs) && this.breakAfter == other.breakAfter;\n    }\n    covers() { return true; }\n    static find(docView, pos) {\n        for (let i = 0, off = 0; i < docView.children.length; i++) {\n            let block = docView.children[i], end = off + block.length;\n            if (end >= pos) {\n                if (block instanceof LineView)\n                    return block;\n                if (end > pos)\n                    break;\n            }\n            off = end + block.breakAfter;\n        }\n        return null;\n    }\n}\nclass BlockWidgetView extends ContentView {\n    constructor(widget, length, deco) {\n        super();\n        this.widget = widget;\n        this.length = length;\n        this.deco = deco;\n        this.breakAfter = 0;\n        this.prevWidget = null;\n    }\n    merge(from, to, source, _takeDeco, openStart, openEnd) {\n        if (source && (!(source instanceof BlockWidgetView) || !this.widget.compare(source.widget) ||\n            from > 0 && openStart <= 0 || to < this.length && openEnd <= 0))\n            return false;\n        this.length = from + (source ? source.length : 0) + (this.length - to);\n        return true;\n    }\n    domAtPos(pos) {\n        return pos == 0 ? DOMPos.before(this.dom) : DOMPos.after(this.dom, pos == this.length);\n    }\n    split(at) {\n        let len = this.length - at;\n        this.length = at;\n        let end = new BlockWidgetView(this.widget, len, this.deco);\n        end.breakAfter = this.breakAfter;\n        return end;\n    }\n    get children() { return noChildren; }\n    sync(view) {\n        if (!this.dom || !this.widget.updateDOM(this.dom, view)) {\n            if (this.dom && this.prevWidget)\n                this.prevWidget.destroy(this.dom);\n            this.prevWidget = null;\n            this.setDOM(this.widget.toDOM(view));\n            if (!this.widget.editable)\n                this.dom.contentEditable = \"false\";\n        }\n    }\n    get overrideDOMText() {\n        return this.parent ? this.parent.view.state.doc.slice(this.posAtStart, this.posAtEnd) : Text.empty;\n    }\n    domBoundsAround() { return null; }\n    become(other) {\n        if (other instanceof BlockWidgetView &&\n            other.widget.constructor == this.widget.constructor) {\n            if (!other.widget.compare(this.widget))\n                this.markDirty(true);\n            if (this.dom && !this.prevWidget)\n                this.prevWidget = this.widget;\n            this.widget = other.widget;\n            this.length = other.length;\n            this.deco = other.deco;\n            this.breakAfter = other.breakAfter;\n            return true;\n        }\n        return false;\n    }\n    ignoreMutation() { return true; }\n    ignoreEvent(event) { return this.widget.ignoreEvent(event); }\n    get isEditable() { return false; }\n    get isWidget() { return true; }\n    coordsAt(pos, side) {\n        return this.widget.coordsAt(this.dom, pos, side);\n    }\n    destroy() {\n        super.destroy();\n        if (this.dom)\n            this.widget.destroy(this.dom);\n    }\n    covers(side) {\n        let { startSide, endSide } = this.deco;\n        return startSide == endSide ? false : side < 0 ? startSide < 0 : endSide > 0;\n    }\n}\n\n/**\nWidgets added to the content are described by subclasses of this\nclass. Using a description object like that makes it possible to\ndelay creating of the DOM structure for a widget until it is\nneeded, and to avoid redrawing widgets even if the decorations\nthat define them are recreated.\n*/\nclass WidgetType {\n    /**\n    Compare this instance to another instance of the same type.\n    (TypeScript can't express this, but only instances of the same\n    specific class will be passed to this method.) This is used to\n    avoid redrawing widgets when they are replaced by a new\n    decoration of the same type. The default implementation just\n    returns `false`, which will cause new instances of the widget to\n    always be redrawn.\n    */\n    eq(widget) { return false; }\n    /**\n    Update a DOM element created by a widget of the same type (but\n    different, non-`eq` content) to reflect this widget. May return\n    true to indicate that it could update, false to indicate it\n    couldn't (in which case the widget will be redrawn). The default\n    implementation just returns false.\n    */\n    updateDOM(dom, view) { return false; }\n    /**\n    @internal\n    */\n    compare(other) {\n        return this == other || this.constructor == other.constructor && this.eq(other);\n    }\n    /**\n    The estimated height this widget will have, to be used when\n    estimating the height of content that hasn't been drawn. May\n    return -1 to indicate you don't know. The default implementation\n    returns -1.\n    */\n    get estimatedHeight() { return -1; }\n    /**\n    For inline widgets that are displayed inline (as opposed to\n    `inline-block`) and introduce line breaks (through `<br>` tags\n    or textual newlines), this must indicate the amount of line\n    breaks they introduce. Defaults to 0.\n    */\n    get lineBreaks() { return 0; }\n    /**\n    Can be used to configure which kinds of events inside the widget\n    should be ignored by the editor. The default is to ignore all\n    events.\n    */\n    ignoreEvent(event) { return true; }\n    /**\n    Override the way screen coordinates for positions at/in the\n    widget are found. `pos` will be the offset into the widget, and\n    `side` the side of the position that is being queried—less than\n    zero for before, greater than zero for after, and zero for\n    directly at that position.\n    */\n    coordsAt(dom, pos, side) { return null; }\n    /**\n    @internal\n    */\n    get isHidden() { return false; }\n    /**\n    @internal\n    */\n    get editable() { return false; }\n    /**\n    This is called when the an instance of the widget is removed\n    from the editor view.\n    */\n    destroy(dom) { }\n}\n/**\nThe different types of blocks that can occur in an editor view.\n*/\nvar BlockType = /*@__PURE__*/(function (BlockType) {\n    /**\n    A line of text.\n    */\n    BlockType[BlockType[\"Text\"] = 0] = \"Text\";\n    /**\n    A block widget associated with the position after it.\n    */\n    BlockType[BlockType[\"WidgetBefore\"] = 1] = \"WidgetBefore\";\n    /**\n    A block widget associated with the position before it.\n    */\n    BlockType[BlockType[\"WidgetAfter\"] = 2] = \"WidgetAfter\";\n    /**\n    A block widget [replacing](https://codemirror.net/6/docs/ref/#view.Decoration^replace) a range of content.\n    */\n    BlockType[BlockType[\"WidgetRange\"] = 3] = \"WidgetRange\";\nreturn BlockType})(BlockType || (BlockType = {}));\n/**\nA decoration provides information on how to draw or style a piece\nof content. You'll usually use it wrapped in a\n[`Range`](https://codemirror.net/6/docs/ref/#state.Range), which adds a start and end position.\n@nonabstract\n*/\nclass Decoration extends RangeValue {\n    constructor(\n    /**\n    @internal\n    */\n    startSide, \n    /**\n    @internal\n    */\n    endSide, \n    /**\n    @internal\n    */\n    widget, \n    /**\n    The config object used to create this decoration. You can\n    include additional properties in there to store metadata about\n    your decoration.\n    */\n    spec) {\n        super();\n        this.startSide = startSide;\n        this.endSide = endSide;\n        this.widget = widget;\n        this.spec = spec;\n    }\n    /**\n    @internal\n    */\n    get heightRelevant() { return false; }\n    /**\n    Create a mark decoration, which influences the styling of the\n    content in its range. Nested mark decorations will cause nested\n    DOM elements to be created. Nesting order is determined by\n    precedence of the [facet](https://codemirror.net/6/docs/ref/#view.EditorView^decorations), with\n    the higher-precedence decorations creating the inner DOM nodes.\n    Such elements are split on line boundaries and on the boundaries\n    of lower-precedence decorations.\n    */\n    static mark(spec) {\n        return new MarkDecoration(spec);\n    }\n    /**\n    Create a widget decoration, which displays a DOM element at the\n    given position.\n    */\n    static widget(spec) {\n        let side = Math.max(-10000, Math.min(10000, spec.side || 0)), block = !!spec.block;\n        side += (block && !spec.inlineOrder)\n            ? (side > 0 ? 300000000 /* Side.BlockAfter */ : -400000000 /* Side.BlockBefore */)\n            : (side > 0 ? 100000000 /* Side.InlineAfter */ : -100000000 /* Side.InlineBefore */);\n        return new PointDecoration(spec, side, side, block, spec.widget || null, false);\n    }\n    /**\n    Create a replace decoration which replaces the given range with\n    a widget, or simply hides it.\n    */\n    static replace(spec) {\n        let block = !!spec.block, startSide, endSide;\n        if (spec.isBlockGap) {\n            startSide = -500000000 /* Side.GapStart */;\n            endSide = 400000000 /* Side.GapEnd */;\n        }\n        else {\n            let { start, end } = getInclusive(spec, block);\n            startSide = (start ? (block ? -300000000 /* Side.BlockIncStart */ : -1 /* Side.InlineIncStart */) : 500000000 /* Side.NonIncStart */) - 1;\n            endSide = (end ? (block ? 200000000 /* Side.BlockIncEnd */ : 1 /* Side.InlineIncEnd */) : -600000000 /* Side.NonIncEnd */) + 1;\n        }\n        return new PointDecoration(spec, startSide, endSide, block, spec.widget || null, true);\n    }\n    /**\n    Create a line decoration, which can add DOM attributes to the\n    line starting at the given position.\n    */\n    static line(spec) {\n        return new LineDecoration(spec);\n    }\n    /**\n    Build a [`DecorationSet`](https://codemirror.net/6/docs/ref/#view.DecorationSet) from the given\n    decorated range or ranges. If the ranges aren't already sorted,\n    pass `true` for `sort` to make the library sort them for you.\n    */\n    static set(of, sort = false) {\n        return RangeSet.of(of, sort);\n    }\n    /**\n    @internal\n    */\n    hasHeight() { return this.widget ? this.widget.estimatedHeight > -1 : false; }\n}\n/**\nThe empty set of decorations.\n*/\nDecoration.none = RangeSet.empty;\nclass MarkDecoration extends Decoration {\n    constructor(spec) {\n        let { start, end } = getInclusive(spec);\n        super(start ? -1 /* Side.InlineIncStart */ : 500000000 /* Side.NonIncStart */, end ? 1 /* Side.InlineIncEnd */ : -600000000 /* Side.NonIncEnd */, null, spec);\n        this.tagName = spec.tagName || \"span\";\n        this.class = spec.class || \"\";\n        this.attrs = spec.attributes || null;\n    }\n    eq(other) {\n        var _a, _b;\n        return this == other ||\n            other instanceof MarkDecoration &&\n                this.tagName == other.tagName &&\n                (this.class || ((_a = this.attrs) === null || _a === void 0 ? void 0 : _a.class)) == (other.class || ((_b = other.attrs) === null || _b === void 0 ? void 0 : _b.class)) &&\n                attrsEq(this.attrs, other.attrs, \"class\");\n    }\n    range(from, to = from) {\n        if (from >= to)\n            throw new RangeError(\"Mark decorations may not be empty\");\n        return super.range(from, to);\n    }\n}\nMarkDecoration.prototype.point = false;\nclass LineDecoration extends Decoration {\n    constructor(spec) {\n        super(-200000000 /* Side.Line */, -200000000 /* Side.Line */, null, spec);\n    }\n    eq(other) {\n        return other instanceof LineDecoration &&\n            this.spec.class == other.spec.class &&\n            attrsEq(this.spec.attributes, other.spec.attributes);\n    }\n    range(from, to = from) {\n        if (to != from)\n            throw new RangeError(\"Line decoration ranges must be zero-length\");\n        return super.range(from, to);\n    }\n}\nLineDecoration.prototype.mapMode = MapMode.TrackBefore;\nLineDecoration.prototype.point = true;\nclass PointDecoration extends Decoration {\n    constructor(spec, startSide, endSide, block, widget, isReplace) {\n        super(startSide, endSide, widget, spec);\n        this.block = block;\n        this.isReplace = isReplace;\n        this.mapMode = !block ? MapMode.TrackDel : startSide <= 0 ? MapMode.TrackBefore : MapMode.TrackAfter;\n    }\n    // Only relevant when this.block == true\n    get type() {\n        return this.startSide != this.endSide ? BlockType.WidgetRange\n            : this.startSide <= 0 ? BlockType.WidgetBefore : BlockType.WidgetAfter;\n    }\n    get heightRelevant() {\n        return this.block || !!this.widget && (this.widget.estimatedHeight >= 5 || this.widget.lineBreaks > 0);\n    }\n    eq(other) {\n        return other instanceof PointDecoration &&\n            widgetsEq(this.widget, other.widget) &&\n            this.block == other.block &&\n            this.startSide == other.startSide && this.endSide == other.endSide;\n    }\n    range(from, to = from) {\n        if (this.isReplace && (from > to || (from == to && this.startSide > 0 && this.endSide <= 0)))\n            throw new RangeError(\"Invalid range for replacement decoration\");\n        if (!this.isReplace && to != from)\n            throw new RangeError(\"Widget decorations can only have zero-length ranges\");\n        return super.range(from, to);\n    }\n}\nPointDecoration.prototype.point = true;\nfunction getInclusive(spec, block = false) {\n    let { inclusiveStart: start, inclusiveEnd: end } = spec;\n    if (start == null)\n        start = spec.inclusive;\n    if (end == null)\n        end = spec.inclusive;\n    return { start: start !== null && start !== void 0 ? start : block, end: end !== null && end !== void 0 ? end : block };\n}\nfunction widgetsEq(a, b) {\n    return a == b || !!(a && b && a.compare(b));\n}\nfunction addRange(from, to, ranges, margin = 0) {\n    let last = ranges.length - 1;\n    if (last >= 0 && ranges[last] + margin >= from)\n        ranges[last] = Math.max(ranges[last], to);\n    else\n        ranges.push(from, to);\n}\n\nclass ContentBuilder {\n    constructor(doc, pos, end, disallowBlockEffectsFor) {\n        this.doc = doc;\n        this.pos = pos;\n        this.end = end;\n        this.disallowBlockEffectsFor = disallowBlockEffectsFor;\n        this.content = [];\n        this.curLine = null;\n        this.breakAtStart = 0;\n        this.pendingBuffer = 0 /* Buf.No */;\n        this.bufferMarks = [];\n        // Set to false directly after a widget that covers the position after it\n        this.atCursorPos = true;\n        this.openStart = -1;\n        this.openEnd = -1;\n        this.text = \"\";\n        this.textOff = 0;\n        this.cursor = doc.iter();\n        this.skip = pos;\n    }\n    posCovered() {\n        if (this.content.length == 0)\n            return !this.breakAtStart && this.doc.lineAt(this.pos).from != this.pos;\n        let last = this.content[this.content.length - 1];\n        return !(last.breakAfter || last instanceof BlockWidgetView && last.deco.endSide < 0);\n    }\n    getLine() {\n        if (!this.curLine) {\n            this.content.push(this.curLine = new LineView);\n            this.atCursorPos = true;\n        }\n        return this.curLine;\n    }\n    flushBuffer(active = this.bufferMarks) {\n        if (this.pendingBuffer) {\n            this.curLine.append(wrapMarks(new WidgetBufferView(-1), active), active.length);\n            this.pendingBuffer = 0 /* Buf.No */;\n        }\n    }\n    addBlockWidget(view) {\n        this.flushBuffer();\n        this.curLine = null;\n        this.content.push(view);\n    }\n    finish(openEnd) {\n        if (this.pendingBuffer && openEnd <= this.bufferMarks.length)\n            this.flushBuffer();\n        else\n            this.pendingBuffer = 0 /* Buf.No */;\n        if (!this.posCovered() &&\n            !(openEnd && this.content.length && this.content[this.content.length - 1] instanceof BlockWidgetView))\n            this.getLine();\n    }\n    buildText(length, active, openStart) {\n        while (length > 0) {\n            if (this.textOff == this.text.length) {\n                let { value, lineBreak, done } = this.cursor.next(this.skip);\n                this.skip = 0;\n                if (done)\n                    throw new Error(\"Ran out of text content when drawing inline views\");\n                if (lineBreak) {\n                    if (!this.posCovered())\n                        this.getLine();\n                    if (this.content.length)\n                        this.content[this.content.length - 1].breakAfter = 1;\n                    else\n                        this.breakAtStart = 1;\n                    this.flushBuffer();\n                    this.curLine = null;\n                    this.atCursorPos = true;\n                    length--;\n                    continue;\n                }\n                else {\n                    this.text = value;\n                    this.textOff = 0;\n                }\n            }\n            let take = Math.min(this.text.length - this.textOff, length, 512 /* T.Chunk */);\n            this.flushBuffer(active.slice(active.length - openStart));\n            this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff, this.textOff + take)), active), openStart);\n            this.atCursorPos = true;\n            this.textOff += take;\n            length -= take;\n            openStart = 0;\n        }\n    }\n    span(from, to, active, openStart) {\n        this.buildText(to - from, active, openStart);\n        this.pos = to;\n        if (this.openStart < 0)\n            this.openStart = openStart;\n    }\n    point(from, to, deco, active, openStart, index) {\n        if (this.disallowBlockEffectsFor[index] && deco instanceof PointDecoration) {\n            if (deco.block)\n                throw new RangeError(\"Block decorations may not be specified via plugins\");\n            if (to > this.doc.lineAt(this.pos).to)\n                throw new RangeError(\"Decorations that replace line breaks may not be specified via plugins\");\n        }\n        let len = to - from;\n        if (deco instanceof PointDecoration) {\n            if (deco.block) {\n                if (deco.startSide > 0 && !this.posCovered())\n                    this.getLine();\n                this.addBlockWidget(new BlockWidgetView(deco.widget || NullWidget.block, len, deco));\n            }\n            else {\n                let view = WidgetView.create(deco.widget || NullWidget.inline, len, len ? 0 : deco.startSide);\n                let cursorBefore = this.atCursorPos && !view.isEditable && openStart <= active.length &&\n                    (from < to || deco.startSide > 0);\n                let cursorAfter = !view.isEditable && (from < to || openStart > active.length || deco.startSide <= 0);\n                let line = this.getLine();\n                if (this.pendingBuffer == 2 /* Buf.IfCursor */ && !cursorBefore && !view.isEditable)\n                    this.pendingBuffer = 0 /* Buf.No */;\n                this.flushBuffer(active);\n                if (cursorBefore) {\n                    line.append(wrapMarks(new WidgetBufferView(1), active), openStart);\n                    openStart = active.length + Math.max(0, openStart - active.length);\n                }\n                line.append(wrapMarks(view, active), openStart);\n                this.atCursorPos = cursorAfter;\n                this.pendingBuffer = !cursorAfter ? 0 /* Buf.No */ : from < to || openStart > active.length ? 1 /* Buf.Yes */ : 2 /* Buf.IfCursor */;\n                if (this.pendingBuffer)\n                    this.bufferMarks = active.slice();\n            }\n        }\n        else if (this.doc.lineAt(this.pos).from == this.pos) { // Line decoration\n            this.getLine().addLineDeco(deco);\n        }\n        if (len) {\n            // Advance the iterator past the replaced content\n            if (this.textOff + len <= this.text.length) {\n                this.textOff += len;\n            }\n            else {\n                this.skip += len - (this.text.length - this.textOff);\n                this.text = \"\";\n                this.textOff = 0;\n            }\n            this.pos = to;\n        }\n        if (this.openStart < 0)\n            this.openStart = openStart;\n    }\n    static build(text, from, to, decorations, dynamicDecorationMap) {\n        let builder = new ContentBuilder(text, from, to, dynamicDecorationMap);\n        builder.openEnd = RangeSet.spans(decorations, from, to, builder);\n        if (builder.openStart < 0)\n            builder.openStart = builder.openEnd;\n        builder.finish(builder.openEnd);\n        return builder;\n    }\n}\nfunction wrapMarks(view, active) {\n    for (let mark of active)\n        view = new MarkView(mark, [view], view.length);\n    return view;\n}\nclass NullWidget extends WidgetType {\n    constructor(tag) {\n        super();\n        this.tag = tag;\n    }\n    eq(other) { return other.tag == this.tag; }\n    toDOM() { return document.createElement(this.tag); }\n    updateDOM(elt) { return elt.nodeName.toLowerCase() == this.tag; }\n    get isHidden() { return true; }\n}\nNullWidget.inline = /*@__PURE__*/new NullWidget(\"span\");\nNullWidget.block = /*@__PURE__*/new NullWidget(\"div\");\n\n/**\nUsed to indicate [text direction](https://codemirror.net/6/docs/ref/#view.EditorView.textDirection).\n*/\nvar Direction = /*@__PURE__*/(function (Direction) {\n    // (These are chosen to match the base levels, in bidi algorithm\n    // terms, of spans in that direction.)\n    /**\n    Left-to-right.\n    */\n    Direction[Direction[\"LTR\"] = 0] = \"LTR\";\n    /**\n    Right-to-left.\n    */\n    Direction[Direction[\"RTL\"] = 1] = \"RTL\";\nreturn Direction})(Direction || (Direction = {}));\nconst LTR = Direction.LTR, RTL = Direction.RTL;\n// Decode a string with each type encoded as log2(type)\nfunction dec(str) {\n    let result = [];\n    for (let i = 0; i < str.length; i++)\n        result.push(1 << +str[i]);\n    return result;\n}\n// Character types for codepoints 0 to 0xf8\nconst LowTypes = /*@__PURE__*/dec(\"88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008\");\n// Character types for codepoints 0x600 to 0x6f9\nconst ArabicTypes = /*@__PURE__*/dec(\"4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333\");\nconst Brackets = /*@__PURE__*/Object.create(null), BracketStack = [];\n// There's a lot more in\n// https://www.unicode.org/Public/UCD/latest/ucd/BidiBrackets.txt,\n// which are left out to keep code size down.\nfor (let p of [\"()\", \"[]\", \"{}\"]) {\n    let l = /*@__PURE__*/p.charCodeAt(0), r = /*@__PURE__*/p.charCodeAt(1);\n    Brackets[l] = r;\n    Brackets[r] = -l;\n}\nfunction charType(ch) {\n    return ch <= 0xf7 ? LowTypes[ch] :\n        0x590 <= ch && ch <= 0x5f4 ? 2 /* T.R */ :\n            0x600 <= ch && ch <= 0x6f9 ? ArabicTypes[ch - 0x600] :\n                0x6ee <= ch && ch <= 0x8ac ? 4 /* T.AL */ :\n                    0x2000 <= ch && ch <= 0x200c ? 256 /* T.NI */ :\n                        0xfb50 <= ch && ch <= 0xfdff ? 4 /* T.AL */ : 1 /* T.L */;\n}\nconst BidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac\\ufb50-\\ufdff]/;\n/**\nRepresents a contiguous range of text that has a single direction\n(as in left-to-right or right-to-left).\n*/\nclass BidiSpan {\n    /**\n    The direction of this span.\n    */\n    get dir() { return this.level % 2 ? RTL : LTR; }\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The start of the span (relative to the start of the line).\n    */\n    from, \n    /**\n    The end of the span.\n    */\n    to, \n    /**\n    The [\"bidi\n    level\"](https://unicode.org/reports/tr9/#Basic_Display_Algorithm)\n    of the span (in this context, 0 means\n    left-to-right, 1 means right-to-left, 2 means left-to-right\n    number inside right-to-left text).\n    */\n    level) {\n        this.from = from;\n        this.to = to;\n        this.level = level;\n    }\n    /**\n    @internal\n    */\n    side(end, dir) { return (this.dir == dir) == end ? this.to : this.from; }\n    /**\n    @internal\n    */\n    forward(forward, dir) { return forward == (this.dir == dir); }\n    /**\n    @internal\n    */\n    static find(order, index, level, assoc) {\n        let maybe = -1;\n        for (let i = 0; i < order.length; i++) {\n            let span = order[i];\n            if (span.from <= index && span.to >= index) {\n                if (span.level == level)\n                    return i;\n                // When multiple spans match, if assoc != 0, take the one that\n                // covers that side, otherwise take the one with the minimum\n                // level.\n                if (maybe < 0 || (assoc != 0 ? (assoc < 0 ? span.from < index : span.to > index) : order[maybe].level > span.level))\n                    maybe = i;\n            }\n        }\n        if (maybe < 0)\n            throw new RangeError(\"Index out of range\");\n        return maybe;\n    }\n}\nfunction isolatesEq(a, b) {\n    if (a.length != b.length)\n        return false;\n    for (let i = 0; i < a.length; i++) {\n        let iA = a[i], iB = b[i];\n        if (iA.from != iB.from || iA.to != iB.to || iA.direction != iB.direction || !isolatesEq(iA.inner, iB.inner))\n            return false;\n    }\n    return true;\n}\n// Reused array of character types\nconst types = [];\n// Fill in the character types (in `types`) from `from` to `to` and\n// apply W normalization rules.\nfunction computeCharTypes(line, rFrom, rTo, isolates, outerType) {\n    for (let iI = 0; iI <= isolates.length; iI++) {\n        let from = iI ? isolates[iI - 1].to : rFrom, to = iI < isolates.length ? isolates[iI].from : rTo;\n        let prevType = iI ? 256 /* T.NI */ : outerType;\n        // W1. Examine each non-spacing mark (NSM) in the level run, and\n        // change the type of the NSM to the type of the previous\n        // character. If the NSM is at the start of the level run, it will\n        // get the type of sor.\n        // W2. Search backwards from each instance of a European number\n        // until the first strong type (R, L, AL, or sor) is found. If an\n        // AL is found, change the type of the European number to Arabic\n        // number.\n        // W3. Change all ALs to R.\n        // (Left after this: L, R, EN, AN, ET, CS, NI)\n        for (let i = from, prev = prevType, prevStrong = prevType; i < to; i++) {\n            let type = charType(line.charCodeAt(i));\n            if (type == 512 /* T.NSM */)\n                type = prev;\n            else if (type == 8 /* T.EN */ && prevStrong == 4 /* T.AL */)\n                type = 16 /* T.AN */;\n            types[i] = type == 4 /* T.AL */ ? 2 /* T.R */ : type;\n            if (type & 7 /* T.Strong */)\n                prevStrong = type;\n            prev = type;\n        }\n        // W5. A sequence of European terminators adjacent to European\n        // numbers changes to all European numbers.\n        // W6. Otherwise, separators and terminators change to Other\n        // Neutral.\n        // W7. Search backwards from each instance of a European number\n        // until the first strong type (R, L, or sor) is found. If an L is\n        // found, then change the type of the European number to L.\n        // (Left after this: L, R, EN+AN, NI)\n        for (let i = from, prev = prevType, prevStrong = prevType; i < to; i++) {\n            let type = types[i];\n            if (type == 128 /* T.CS */) {\n                if (i < to - 1 && prev == types[i + 1] && (prev & 24 /* T.Num */))\n                    type = types[i] = prev;\n                else\n                    types[i] = 256 /* T.NI */;\n            }\n            else if (type == 64 /* T.ET */) {\n                let end = i + 1;\n                while (end < to && types[end] == 64 /* T.ET */)\n                    end++;\n                let replace = (i && prev == 8 /* T.EN */) || (end < rTo && types[end] == 8 /* T.EN */) ? (prevStrong == 1 /* T.L */ ? 1 /* T.L */ : 8 /* T.EN */) : 256 /* T.NI */;\n                for (let j = i; j < end; j++)\n                    types[j] = replace;\n                i = end - 1;\n            }\n            else if (type == 8 /* T.EN */ && prevStrong == 1 /* T.L */) {\n                types[i] = 1 /* T.L */;\n            }\n            prev = type;\n            if (type & 7 /* T.Strong */)\n                prevStrong = type;\n        }\n    }\n}\n// Process brackets throughout a run sequence.\nfunction processBracketPairs(line, rFrom, rTo, isolates, outerType) {\n    let oppositeType = outerType == 1 /* T.L */ ? 2 /* T.R */ : 1 /* T.L */;\n    for (let iI = 0, sI = 0, context = 0; iI <= isolates.length; iI++) {\n        let from = iI ? isolates[iI - 1].to : rFrom, to = iI < isolates.length ? isolates[iI].from : rTo;\n        // N0. Process bracket pairs in an isolating run sequence\n        // sequentially in the logical order of the text positions of the\n        // opening paired brackets using the logic given below. Within this\n        // scope, bidirectional types EN and AN are treated as R.\n        for (let i = from, ch, br, type; i < to; i++) {\n            // Keeps [startIndex, type, strongSeen] triples for each open\n            // bracket on BracketStack.\n            if (br = Brackets[ch = line.charCodeAt(i)]) {\n                if (br < 0) { // Closing bracket\n                    for (let sJ = sI - 3; sJ >= 0; sJ -= 3) {\n                        if (BracketStack[sJ + 1] == -br) {\n                            let flags = BracketStack[sJ + 2];\n                            let type = (flags & 2 /* Bracketed.EmbedInside */) ? outerType :\n                                !(flags & 4 /* Bracketed.OppositeInside */) ? 0 :\n                                    (flags & 1 /* Bracketed.OppositeBefore */) ? oppositeType : outerType;\n                            if (type)\n                                types[i] = types[BracketStack[sJ]] = type;\n                            sI = sJ;\n                            break;\n                        }\n                    }\n                }\n                else if (BracketStack.length == 189 /* Bracketed.MaxDepth */) {\n                    break;\n                }\n                else {\n                    BracketStack[sI++] = i;\n                    BracketStack[sI++] = ch;\n                    BracketStack[sI++] = context;\n                }\n            }\n            else if ((type = types[i]) == 2 /* T.R */ || type == 1 /* T.L */) {\n                let embed = type == outerType;\n                context = embed ? 0 : 1 /* Bracketed.OppositeBefore */;\n                for (let sJ = sI - 3; sJ >= 0; sJ -= 3) {\n                    let cur = BracketStack[sJ + 2];\n                    if (cur & 2 /* Bracketed.EmbedInside */)\n                        break;\n                    if (embed) {\n                        BracketStack[sJ + 2] |= 2 /* Bracketed.EmbedInside */;\n                    }\n                    else {\n                        if (cur & 4 /* Bracketed.OppositeInside */)\n                            break;\n                        BracketStack[sJ + 2] |= 4 /* Bracketed.OppositeInside */;\n                    }\n                }\n            }\n        }\n    }\n}\nfunction processNeutrals(rFrom, rTo, isolates, outerType) {\n    for (let iI = 0, prev = outerType; iI <= isolates.length; iI++) {\n        let from = iI ? isolates[iI - 1].to : rFrom, to = iI < isolates.length ? isolates[iI].from : rTo;\n        // N1. A sequence of neutrals takes the direction of the\n        // surrounding strong text if the text on both sides has the same\n        // direction. European and Arabic numbers act as if they were R in\n        // terms of their influence on neutrals. Start-of-level-run (sor)\n        // and end-of-level-run (eor) are used at level run boundaries.\n        // N2. Any remaining neutrals take the embedding direction.\n        // (Left after this: L, R, EN+AN)\n        for (let i = from; i < to;) {\n            let type = types[i];\n            if (type == 256 /* T.NI */) {\n                let end = i + 1;\n                for (;;) {\n                    if (end == to) {\n                        if (iI == isolates.length)\n                            break;\n                        end = isolates[iI++].to;\n                        to = iI < isolates.length ? isolates[iI].from : rTo;\n                    }\n                    else if (types[end] == 256 /* T.NI */) {\n                        end++;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                let beforeL = prev == 1 /* T.L */;\n                let afterL = (end < rTo ? types[end] : outerType) == 1 /* T.L */;\n                let replace = beforeL == afterL ? (beforeL ? 1 /* T.L */ : 2 /* T.R */) : outerType;\n                for (let j = end, jI = iI, fromJ = jI ? isolates[jI - 1].to : rFrom; j > i;) {\n                    if (j == fromJ) {\n                        j = isolates[--jI].from;\n                        fromJ = jI ? isolates[jI - 1].to : rFrom;\n                    }\n                    types[--j] = replace;\n                }\n                i = end;\n            }\n            else {\n                prev = type;\n                i++;\n            }\n        }\n    }\n}\n// Find the contiguous ranges of character types in a given range, and\n// emit spans for them. Flip the order of the spans as appropriate\n// based on the level, and call through to compute the spans for\n// isolates at the proper point.\nfunction emitSpans(line, from, to, level, baseLevel, isolates, order) {\n    let ourType = level % 2 ? 2 /* T.R */ : 1 /* T.L */;\n    if ((level % 2) == (baseLevel % 2)) { // Same dir as base direction, don't flip\n        for (let iCh = from, iI = 0; iCh < to;) {\n            // Scan a section of characters in direction ourType, unless\n            // there's another type of char right after iCh, in which case\n            // we scan a section of other characters (which, if ourType ==\n            // T.L, may contain both T.R and T.AN chars).\n            let sameDir = true, isNum = false;\n            if (iI == isolates.length || iCh < isolates[iI].from) {\n                let next = types[iCh];\n                if (next != ourType) {\n                    sameDir = false;\n                    isNum = next == 16 /* T.AN */;\n                }\n            }\n            // Holds an array of isolates to pass to a recursive call if we\n            // must recurse (to distinguish T.AN inside an RTL section in\n            // LTR text), null if we can emit directly\n            let recurse = !sameDir && ourType == 1 /* T.L */ ? [] : null;\n            let localLevel = sameDir ? level : level + 1;\n            let iScan = iCh;\n            run: for (;;) {\n                if (iI < isolates.length && iScan == isolates[iI].from) {\n                    if (isNum)\n                        break run;\n                    let iso = isolates[iI];\n                    // Scan ahead to verify that there is another char in this dir after the isolate(s)\n                    if (!sameDir)\n                        for (let upto = iso.to, jI = iI + 1;;) {\n                            if (upto == to)\n                                break run;\n                            if (jI < isolates.length && isolates[jI].from == upto)\n                                upto = isolates[jI++].to;\n                            else if (types[upto] == ourType)\n                                break run;\n                            else\n                                break;\n                        }\n                    iI++;\n                    if (recurse) {\n                        recurse.push(iso);\n                    }\n                    else {\n                        if (iso.from > iCh)\n                            order.push(new BidiSpan(iCh, iso.from, localLevel));\n                        let dirSwap = (iso.direction == LTR) != !(localLevel % 2);\n                        computeSectionOrder(line, dirSwap ? level + 1 : level, baseLevel, iso.inner, iso.from, iso.to, order);\n                        iCh = iso.to;\n                    }\n                    iScan = iso.to;\n                }\n                else if (iScan == to || (sameDir ? types[iScan] != ourType : types[iScan] == ourType)) {\n                    break;\n                }\n                else {\n                    iScan++;\n                }\n            }\n            if (recurse)\n                emitSpans(line, iCh, iScan, level + 1, baseLevel, recurse, order);\n            else if (iCh < iScan)\n                order.push(new BidiSpan(iCh, iScan, localLevel));\n            iCh = iScan;\n        }\n    }\n    else {\n        // Iterate in reverse to flip the span order. Same code again, but\n        // going from the back of the section to the front\n        for (let iCh = to, iI = isolates.length; iCh > from;) {\n            let sameDir = true, isNum = false;\n            if (!iI || iCh > isolates[iI - 1].to) {\n                let next = types[iCh - 1];\n                if (next != ourType) {\n                    sameDir = false;\n                    isNum = next == 16 /* T.AN */;\n                }\n            }\n            let recurse = !sameDir && ourType == 1 /* T.L */ ? [] : null;\n            let localLevel = sameDir ? level : level + 1;\n            let iScan = iCh;\n            run: for (;;) {\n                if (iI && iScan == isolates[iI - 1].to) {\n                    if (isNum)\n                        break run;\n                    let iso = isolates[--iI];\n                    // Scan ahead to verify that there is another char in this dir after the isolate(s)\n                    if (!sameDir)\n                        for (let upto = iso.from, jI = iI;;) {\n                            if (upto == from)\n                                break run;\n                            if (jI && isolates[jI - 1].to == upto)\n                                upto = isolates[--jI].from;\n                            else if (types[upto - 1] == ourType)\n                                break run;\n                            else\n                                break;\n                        }\n                    if (recurse) {\n                        recurse.push(iso);\n                    }\n                    else {\n                        if (iso.to < iCh)\n                            order.push(new BidiSpan(iso.to, iCh, localLevel));\n                        let dirSwap = (iso.direction == LTR) != !(localLevel % 2);\n                        computeSectionOrder(line, dirSwap ? level + 1 : level, baseLevel, iso.inner, iso.from, iso.to, order);\n                        iCh = iso.from;\n                    }\n                    iScan = iso.from;\n                }\n                else if (iScan == from || (sameDir ? types[iScan - 1] != ourType : types[iScan - 1] == ourType)) {\n                    break;\n                }\n                else {\n                    iScan--;\n                }\n            }\n            if (recurse)\n                emitSpans(line, iScan, iCh, level + 1, baseLevel, recurse, order);\n            else if (iScan < iCh)\n                order.push(new BidiSpan(iScan, iCh, localLevel));\n            iCh = iScan;\n        }\n    }\n}\nfunction computeSectionOrder(line, level, baseLevel, isolates, from, to, order) {\n    let outerType = (level % 2 ? 2 /* T.R */ : 1 /* T.L */);\n    computeCharTypes(line, from, to, isolates, outerType);\n    processBracketPairs(line, from, to, isolates, outerType);\n    processNeutrals(from, to, isolates, outerType);\n    emitSpans(line, from, to, level, baseLevel, isolates, order);\n}\nfunction computeOrder(line, direction, isolates) {\n    if (!line)\n        return [new BidiSpan(0, 0, direction == RTL ? 1 : 0)];\n    if (direction == LTR && !isolates.length && !BidiRE.test(line))\n        return trivialOrder(line.length);\n    if (isolates.length)\n        while (line.length > types.length)\n            types[types.length] = 256 /* T.NI */; // Make sure types array has no gaps\n    let order = [], level = direction == LTR ? 0 : 1;\n    computeSectionOrder(line, level, level, isolates, 0, line.length, order);\n    return order;\n}\nfunction trivialOrder(length) {\n    return [new BidiSpan(0, length, 0)];\n}\nlet movedOver = \"\";\n// This implementation moves strictly visually, without concern for a\n// traversal visiting every logical position in the string. It will\n// still do so for simple input, but situations like multiple isolates\n// with the same level next to each other, or text going against the\n// main dir at the end of the line, will make some positions\n// unreachable with this motion. Each visible cursor position will\n// correspond to the lower-level bidi span that touches it.\n//\n// The alternative would be to solve an order globally for a given\n// line, making sure that it includes every position, but that would\n// require associating non-canonical (higher bidi span level)\n// positions with a given visual position, which is likely to confuse\n// people. (And would generally be a lot more complicated.)\nfunction moveVisually(line, order, dir, start, forward) {\n    var _a;\n    let startIndex = start.head - line.from;\n    let spanI = BidiSpan.find(order, startIndex, (_a = start.bidiLevel) !== null && _a !== void 0 ? _a : -1, start.assoc);\n    let span = order[spanI], spanEnd = span.side(forward, dir);\n    // End of span\n    if (startIndex == spanEnd) {\n        let nextI = spanI += forward ? 1 : -1;\n        if (nextI < 0 || nextI >= order.length)\n            return null;\n        span = order[spanI = nextI];\n        startIndex = span.side(!forward, dir);\n        spanEnd = span.side(forward, dir);\n    }\n    let nextIndex = findClusterBreak(line.text, startIndex, span.forward(forward, dir));\n    if (nextIndex < span.from || nextIndex > span.to)\n        nextIndex = spanEnd;\n    movedOver = line.text.slice(Math.min(startIndex, nextIndex), Math.max(startIndex, nextIndex));\n    let nextSpan = spanI == (forward ? order.length - 1 : 0) ? null : order[spanI + (forward ? 1 : -1)];\n    if (nextSpan && nextIndex == spanEnd && nextSpan.level + (forward ? 0 : 1) < span.level)\n        return EditorSelection.cursor(nextSpan.side(!forward, dir) + line.from, nextSpan.forward(forward, dir) ? 1 : -1, nextSpan.level);\n    return EditorSelection.cursor(nextIndex + line.from, span.forward(forward, dir) ? -1 : 1, span.level);\n}\nfunction autoDirection(text, from, to) {\n    for (let i = from; i < to; i++) {\n        let type = charType(text.charCodeAt(i));\n        if (type == 1 /* T.L */)\n            return LTR;\n        if (type == 2 /* T.R */ || type == 4 /* T.AL */)\n            return RTL;\n    }\n    return LTR;\n}\n\nconst clickAddsSelectionRange = /*@__PURE__*/Facet.define();\nconst dragMovesSelection$1 = /*@__PURE__*/Facet.define();\nconst mouseSelectionStyle = /*@__PURE__*/Facet.define();\nconst exceptionSink = /*@__PURE__*/Facet.define();\nconst updateListener = /*@__PURE__*/Facet.define();\nconst inputHandler = /*@__PURE__*/Facet.define();\nconst focusChangeEffect = /*@__PURE__*/Facet.define();\nconst perLineTextDirection = /*@__PURE__*/Facet.define({\n    combine: values => values.some(x => x)\n});\nconst nativeSelectionHidden = /*@__PURE__*/Facet.define({\n    combine: values => values.some(x => x)\n});\nconst scrollHandler = /*@__PURE__*/Facet.define();\nclass ScrollTarget {\n    constructor(range, y = \"nearest\", x = \"nearest\", yMargin = 5, xMargin = 5, \n    // This data structure is abused to also store precise scroll\n    // snapshots, instead of a `scrollIntoView` request. When this\n    // flag is `true`, `range` points at a position in the reference\n    // line, `yMargin` holds the difference between the top of that\n    // line and the top of the editor, and `xMargin` holds the\n    // editor's `scrollLeft`.\n    isSnapshot = false) {\n        this.range = range;\n        this.y = y;\n        this.x = x;\n        this.yMargin = yMargin;\n        this.xMargin = xMargin;\n        this.isSnapshot = isSnapshot;\n    }\n    map(changes) {\n        return changes.empty ? this :\n            new ScrollTarget(this.range.map(changes), this.y, this.x, this.yMargin, this.xMargin, this.isSnapshot);\n    }\n    clip(state) {\n        return this.range.to <= state.doc.length ? this :\n            new ScrollTarget(EditorSelection.cursor(state.doc.length), this.y, this.x, this.yMargin, this.xMargin, this.isSnapshot);\n    }\n}\nconst scrollIntoView = /*@__PURE__*/StateEffect.define({ map: (t, ch) => t.map(ch) });\nconst setEditContextFormatting = /*@__PURE__*/StateEffect.define();\n/**\nLog or report an unhandled exception in client code. Should\nprobably only be used by extension code that allows client code to\nprovide functions, and calls those functions in a context where an\nexception can't be propagated to calling code in a reasonable way\n(for example when in an event handler).\n\nEither calls a handler registered with\n[`EditorView.exceptionSink`](https://codemirror.net/6/docs/ref/#view.EditorView^exceptionSink),\n`window.onerror`, if defined, or `console.error` (in which case\nit'll pass `context`, when given, as first argument).\n*/\nfunction logException(state, exception, context) {\n    let handler = state.facet(exceptionSink);\n    if (handler.length)\n        handler[0](exception);\n    else if (window.onerror)\n        window.onerror(String(exception), context, undefined, undefined, exception);\n    else if (context)\n        console.error(context + \":\", exception);\n    else\n        console.error(exception);\n}\nconst editable = /*@__PURE__*/Facet.define({ combine: values => values.length ? values[0] : true });\nlet nextPluginID = 0;\nconst viewPlugin = /*@__PURE__*/Facet.define();\n/**\nView plugins associate stateful values with a view. They can\ninfluence the way the content is drawn, and are notified of things\nthat happen in the view.\n*/\nclass ViewPlugin {\n    constructor(\n    /**\n    @internal\n    */\n    id, \n    /**\n    @internal\n    */\n    create, \n    /**\n    @internal\n    */\n    domEventHandlers, \n    /**\n    @internal\n    */\n    domEventObservers, buildExtensions) {\n        this.id = id;\n        this.create = create;\n        this.domEventHandlers = domEventHandlers;\n        this.domEventObservers = domEventObservers;\n        this.extension = buildExtensions(this);\n    }\n    /**\n    Define a plugin from a constructor function that creates the\n    plugin's value, given an editor view.\n    */\n    static define(create, spec) {\n        const { eventHandlers, eventObservers, provide, decorations: deco } = spec || {};\n        return new ViewPlugin(nextPluginID++, create, eventHandlers, eventObservers, plugin => {\n            let ext = [viewPlugin.of(plugin)];\n            if (deco)\n                ext.push(decorations.of(view => {\n                    let pluginInst = view.plugin(plugin);\n                    return pluginInst ? deco(pluginInst) : Decoration.none;\n                }));\n            if (provide)\n                ext.push(provide(plugin));\n            return ext;\n        });\n    }\n    /**\n    Create a plugin for a class whose constructor takes a single\n    editor view as argument.\n    */\n    static fromClass(cls, spec) {\n        return ViewPlugin.define(view => new cls(view), spec);\n    }\n}\nclass PluginInstance {\n    constructor(spec) {\n        this.spec = spec;\n        // When starting an update, all plugins have this field set to the\n        // update object, indicating they need to be updated. When finished\n        // updating, it is set to `false`. Retrieving a plugin that needs to\n        // be updated with `view.plugin` forces an eager update.\n        this.mustUpdate = null;\n        // This is null when the plugin is initially created, but\n        // initialized on the first update.\n        this.value = null;\n    }\n    update(view) {\n        if (!this.value) {\n            if (this.spec) {\n                try {\n                    this.value = this.spec.create(view);\n                }\n                catch (e) {\n                    logException(view.state, e, \"CodeMirror plugin crashed\");\n                    this.deactivate();\n                }\n            }\n        }\n        else if (this.mustUpdate) {\n            let update = this.mustUpdate;\n            this.mustUpdate = null;\n            if (this.value.update) {\n                try {\n                    this.value.update(update);\n                }\n                catch (e) {\n                    logException(update.state, e, \"CodeMirror plugin crashed\");\n                    if (this.value.destroy)\n                        try {\n                            this.value.destroy();\n                        }\n                        catch (_) { }\n                    this.deactivate();\n                }\n            }\n        }\n        return this;\n    }\n    destroy(view) {\n        var _a;\n        if ((_a = this.value) === null || _a === void 0 ? void 0 : _a.destroy) {\n            try {\n                this.value.destroy();\n            }\n            catch (e) {\n                logException(view.state, e, \"CodeMirror plugin crashed\");\n            }\n        }\n    }\n    deactivate() {\n        this.spec = this.value = null;\n    }\n}\nconst editorAttributes = /*@__PURE__*/Facet.define();\nconst contentAttributes = /*@__PURE__*/Facet.define();\n// Provide decorations\nconst decorations = /*@__PURE__*/Facet.define();\nconst outerDecorations = /*@__PURE__*/Facet.define();\nconst atomicRanges = /*@__PURE__*/Facet.define();\nconst bidiIsolatedRanges = /*@__PURE__*/Facet.define();\nfunction getIsolatedRanges(view, line) {\n    let isolates = view.state.facet(bidiIsolatedRanges);\n    if (!isolates.length)\n        return isolates;\n    let sets = isolates.map(i => i instanceof Function ? i(view) : i);\n    let result = [];\n    RangeSet.spans(sets, line.from, line.to, {\n        point() { },\n        span(fromDoc, toDoc, active, open) {\n            let from = fromDoc - line.from, to = toDoc - line.from;\n            let level = result;\n            for (let i = active.length - 1; i >= 0; i--, open--) {\n                let direction = active[i].spec.bidiIsolate, update;\n                if (direction == null)\n                    direction = autoDirection(line.text, from, to);\n                if (open > 0 && level.length &&\n                    (update = level[level.length - 1]).to == from && update.direction == direction) {\n                    update.to = to;\n                    level = update.inner;\n                }\n                else {\n                    let add = { from, to, direction, inner: [] };\n                    level.push(add);\n                    level = add.inner;\n                }\n            }\n        }\n    });\n    return result;\n}\nconst scrollMargins = /*@__PURE__*/Facet.define();\nfunction getScrollMargins(view) {\n    let left = 0, right = 0, top = 0, bottom = 0;\n    for (let source of view.state.facet(scrollMargins)) {\n        let m = source(view);\n        if (m) {\n            if (m.left != null)\n                left = Math.max(left, m.left);\n            if (m.right != null)\n                right = Math.max(right, m.right);\n            if (m.top != null)\n                top = Math.max(top, m.top);\n            if (m.bottom != null)\n                bottom = Math.max(bottom, m.bottom);\n        }\n    }\n    return { left, right, top, bottom };\n}\nconst styleModule = /*@__PURE__*/Facet.define();\nclass ChangedRange {\n    constructor(fromA, toA, fromB, toB) {\n        this.fromA = fromA;\n        this.toA = toA;\n        this.fromB = fromB;\n        this.toB = toB;\n    }\n    join(other) {\n        return new ChangedRange(Math.min(this.fromA, other.fromA), Math.max(this.toA, other.toA), Math.min(this.fromB, other.fromB), Math.max(this.toB, other.toB));\n    }\n    addToSet(set) {\n        let i = set.length, me = this;\n        for (; i > 0; i--) {\n            let range = set[i - 1];\n            if (range.fromA > me.toA)\n                continue;\n            if (range.toA < me.fromA)\n                break;\n            me = me.join(range);\n            set.splice(i - 1, 1);\n        }\n        set.splice(i, 0, me);\n        return set;\n    }\n    static extendWithRanges(diff, ranges) {\n        if (ranges.length == 0)\n            return diff;\n        let result = [];\n        for (let dI = 0, rI = 0, posA = 0, posB = 0;; dI++) {\n            let next = dI == diff.length ? null : diff[dI], off = posA - posB;\n            let end = next ? next.fromB : 1e9;\n            while (rI < ranges.length && ranges[rI] < end) {\n                let from = ranges[rI], to = ranges[rI + 1];\n                let fromB = Math.max(posB, from), toB = Math.min(end, to);\n                if (fromB <= toB)\n                    new ChangedRange(fromB + off, toB + off, fromB, toB).addToSet(result);\n                if (to > end)\n                    break;\n                else\n                    rI += 2;\n            }\n            if (!next)\n                return result;\n            new ChangedRange(next.fromA, next.toA, next.fromB, next.toB).addToSet(result);\n            posA = next.toA;\n            posB = next.toB;\n        }\n    }\n}\n/**\nView [plugins](https://codemirror.net/6/docs/ref/#view.ViewPlugin) are given instances of this\nclass, which describe what happened, whenever the view is updated.\n*/\nclass ViewUpdate {\n    constructor(\n    /**\n    The editor view that the update is associated with.\n    */\n    view, \n    /**\n    The new editor state.\n    */\n    state, \n    /**\n    The transactions involved in the update. May be empty.\n    */\n    transactions) {\n        this.view = view;\n        this.state = state;\n        this.transactions = transactions;\n        /**\n        @internal\n        */\n        this.flags = 0;\n        this.startState = view.state;\n        this.changes = ChangeSet.empty(this.startState.doc.length);\n        for (let tr of transactions)\n            this.changes = this.changes.compose(tr.changes);\n        let changedRanges = [];\n        this.changes.iterChangedRanges((fromA, toA, fromB, toB) => changedRanges.push(new ChangedRange(fromA, toA, fromB, toB)));\n        this.changedRanges = changedRanges;\n    }\n    /**\n    @internal\n    */\n    static create(view, state, transactions) {\n        return new ViewUpdate(view, state, transactions);\n    }\n    /**\n    Tells you whether the [viewport](https://codemirror.net/6/docs/ref/#view.EditorView.viewport) or\n    [visible ranges](https://codemirror.net/6/docs/ref/#view.EditorView.visibleRanges) changed in this\n    update.\n    */\n    get viewportChanged() {\n        return (this.flags & 4 /* UpdateFlag.Viewport */) > 0;\n    }\n    /**\n    Indicates whether the height of a block element in the editor\n    changed in this update.\n    */\n    get heightChanged() {\n        return (this.flags & 2 /* UpdateFlag.Height */) > 0;\n    }\n    /**\n    Returns true when the document was modified or the size of the\n    editor, or elements within the editor, changed.\n    */\n    get geometryChanged() {\n        return this.docChanged || (this.flags & (8 /* UpdateFlag.Geometry */ | 2 /* UpdateFlag.Height */)) > 0;\n    }\n    /**\n    True when this update indicates a focus change.\n    */\n    get focusChanged() {\n        return (this.flags & 1 /* UpdateFlag.Focus */) > 0;\n    }\n    /**\n    Whether the document changed in this update.\n    */\n    get docChanged() {\n        return !this.changes.empty;\n    }\n    /**\n    Whether the selection was explicitly set in this update.\n    */\n    get selectionSet() {\n        return this.transactions.some(tr => tr.selection);\n    }\n    /**\n    @internal\n    */\n    get empty() { return this.flags == 0 && this.transactions.length == 0; }\n}\n\nclass DocView extends ContentView {\n    get length() { return this.view.state.doc.length; }\n    constructor(view) {\n        super();\n        this.view = view;\n        this.decorations = [];\n        this.dynamicDecorationMap = [false];\n        this.domChanged = null;\n        this.hasComposition = null;\n        this.markedForComposition = new Set;\n        this.editContextFormatting = Decoration.none;\n        this.lastCompositionAfterCursor = false;\n        // Track a minimum width for the editor. When measuring sizes in\n        // measureVisibleLineHeights, this is updated to point at the width\n        // of a given element and its extent in the document. When a change\n        // happens in that range, these are reset. That way, once we've seen\n        // a line/element of a given length, we keep the editor wide enough\n        // to fit at least that element, until it is changed, at which point\n        // we forget it again.\n        this.minWidth = 0;\n        this.minWidthFrom = 0;\n        this.minWidthTo = 0;\n        // Track whether the DOM selection was set in a lossy way, so that\n        // we don't mess it up when reading it back it\n        this.impreciseAnchor = null;\n        this.impreciseHead = null;\n        this.forceSelection = false;\n        // Used by the resize observer to ignore resizes that we caused\n        // ourselves\n        this.lastUpdate = Date.now();\n        this.setDOM(view.contentDOM);\n        this.children = [new LineView];\n        this.children[0].setParent(this);\n        this.updateDeco();\n        this.updateInner([new ChangedRange(0, 0, 0, view.state.doc.length)], 0, null);\n    }\n    // Update the document view to a given state.\n    update(update) {\n        var _a;\n        let changedRanges = update.changedRanges;\n        if (this.minWidth > 0 && changedRanges.length) {\n            if (!changedRanges.every(({ fromA, toA }) => toA < this.minWidthFrom || fromA > this.minWidthTo)) {\n                this.minWidth = this.minWidthFrom = this.minWidthTo = 0;\n            }\n            else {\n                this.minWidthFrom = update.changes.mapPos(this.minWidthFrom, 1);\n                this.minWidthTo = update.changes.mapPos(this.minWidthTo, 1);\n            }\n        }\n        this.updateEditContextFormatting(update);\n        let readCompositionAt = -1;\n        if (this.view.inputState.composing >= 0 && !this.view.observer.editContext) {\n            if ((_a = this.domChanged) === null || _a === void 0 ? void 0 : _a.newSel)\n                readCompositionAt = this.domChanged.newSel.head;\n            else if (!touchesComposition(update.changes, this.hasComposition) && !update.selectionSet)\n                readCompositionAt = update.state.selection.main.head;\n        }\n        let composition = readCompositionAt > -1 ? findCompositionRange(this.view, update.changes, readCompositionAt) : null;\n        this.domChanged = null;\n        if (this.hasComposition) {\n            this.markedForComposition.clear();\n            let { from, to } = this.hasComposition;\n            changedRanges = new ChangedRange(from, to, update.changes.mapPos(from, -1), update.changes.mapPos(to, 1))\n                .addToSet(changedRanges.slice());\n        }\n        this.hasComposition = composition ? { from: composition.range.fromB, to: composition.range.toB } : null;\n        // When the DOM nodes around the selection are moved to another\n        // parent, Chrome sometimes reports a different selection through\n        // getSelection than the one that it actually shows to the user.\n        // This forces a selection update when lines are joined to work\n        // around that. Issue #54\n        if ((browser.ie || browser.chrome) && !composition && update &&\n            update.state.doc.lines != update.startState.doc.lines)\n            this.forceSelection = true;\n        let prevDeco = this.decorations, deco = this.updateDeco();\n        let decoDiff = findChangedDeco(prevDeco, deco, update.changes);\n        changedRanges = ChangedRange.extendWithRanges(changedRanges, decoDiff);\n        if (!(this.flags & 7 /* ViewFlag.Dirty */) && changedRanges.length == 0) {\n            return false;\n        }\n        else {\n            this.updateInner(changedRanges, update.startState.doc.length, composition);\n            if (update.transactions.length)\n                this.lastUpdate = Date.now();\n            return true;\n        }\n    }\n    // Used by update and the constructor do perform the actual DOM\n    // update\n    updateInner(changes, oldLength, composition) {\n        this.view.viewState.mustMeasureContent = true;\n        this.updateChildren(changes, oldLength, composition);\n        let { observer } = this.view;\n        observer.ignore(() => {\n            // Lock the height during redrawing, since Chrome sometimes\n            // messes with the scroll position during DOM mutation (though\n            // no relayout is triggered and I cannot imagine how it can\n            // recompute the scroll position without a layout)\n            this.dom.style.height = this.view.viewState.contentHeight / this.view.scaleY + \"px\";\n            this.dom.style.flexBasis = this.minWidth ? this.minWidth + \"px\" : \"\";\n            // Chrome will sometimes, when DOM mutations occur directly\n            // around the selection, get confused and report a different\n            // selection from the one it displays (issue #218). This tries\n            // to detect that situation.\n            let track = browser.chrome || browser.ios ? { node: observer.selectionRange.focusNode, written: false } : undefined;\n            this.sync(this.view, track);\n            this.flags &= ~7 /* ViewFlag.Dirty */;\n            if (track && (track.written || observer.selectionRange.focusNode != track.node))\n                this.forceSelection = true;\n            this.dom.style.height = \"\";\n        });\n        this.markedForComposition.forEach(cView => cView.flags &= ~8 /* ViewFlag.Composition */);\n        let gaps = [];\n        if (this.view.viewport.from || this.view.viewport.to < this.view.state.doc.length)\n            for (let child of this.children)\n                if (child instanceof BlockWidgetView && child.widget instanceof BlockGapWidget)\n                    gaps.push(child.dom);\n        observer.updateGaps(gaps);\n    }\n    updateChildren(changes, oldLength, composition) {\n        let ranges = composition ? composition.range.addToSet(changes.slice()) : changes;\n        let cursor = this.childCursor(oldLength);\n        for (let i = ranges.length - 1;; i--) {\n            let next = i >= 0 ? ranges[i] : null;\n            if (!next)\n                break;\n            let { fromA, toA, fromB, toB } = next, content, breakAtStart, openStart, openEnd;\n            if (composition && composition.range.fromB < toB && composition.range.toB > fromB) {\n                let before = ContentBuilder.build(this.view.state.doc, fromB, composition.range.fromB, this.decorations, this.dynamicDecorationMap);\n                let after = ContentBuilder.build(this.view.state.doc, composition.range.toB, toB, this.decorations, this.dynamicDecorationMap);\n                breakAtStart = before.breakAtStart;\n                openStart = before.openStart;\n                openEnd = after.openEnd;\n                let compLine = this.compositionView(composition);\n                if (after.breakAtStart) {\n                    compLine.breakAfter = 1;\n                }\n                else if (after.content.length &&\n                    compLine.merge(compLine.length, compLine.length, after.content[0], false, after.openStart, 0)) {\n                    compLine.breakAfter = after.content[0].breakAfter;\n                    after.content.shift();\n                }\n                if (before.content.length &&\n                    compLine.merge(0, 0, before.content[before.content.length - 1], true, 0, before.openEnd)) {\n                    before.content.pop();\n                }\n                content = before.content.concat(compLine).concat(after.content);\n            }\n            else {\n                ({ content, breakAtStart, openStart, openEnd } =\n                    ContentBuilder.build(this.view.state.doc, fromB, toB, this.decorations, this.dynamicDecorationMap));\n            }\n            let { i: toI, off: toOff } = cursor.findPos(toA, 1);\n            let { i: fromI, off: fromOff } = cursor.findPos(fromA, -1);\n            replaceRange(this, fromI, fromOff, toI, toOff, content, breakAtStart, openStart, openEnd);\n        }\n        if (composition)\n            this.fixCompositionDOM(composition);\n    }\n    updateEditContextFormatting(update) {\n        this.editContextFormatting = this.editContextFormatting.map(update.changes);\n        for (let tr of update.transactions)\n            for (let effect of tr.effects)\n                if (effect.is(setEditContextFormatting)) {\n                    this.editContextFormatting = effect.value;\n                }\n    }\n    compositionView(composition) {\n        let cur = new TextView(composition.text.nodeValue);\n        cur.flags |= 8 /* ViewFlag.Composition */;\n        for (let { deco } of composition.marks)\n            cur = new MarkView(deco, [cur], cur.length);\n        let line = new LineView;\n        line.append(cur, 0);\n        return line;\n    }\n    fixCompositionDOM(composition) {\n        let fix = (dom, cView) => {\n            cView.flags |= 8 /* ViewFlag.Composition */ | (cView.children.some(c => c.flags & 7 /* ViewFlag.Dirty */) ? 1 /* ViewFlag.ChildDirty */ : 0);\n            this.markedForComposition.add(cView);\n            let prev = ContentView.get(dom);\n            if (prev && prev != cView)\n                prev.dom = null;\n            cView.setDOM(dom);\n        };\n        let pos = this.childPos(composition.range.fromB, 1);\n        let cView = this.children[pos.i];\n        fix(composition.line, cView);\n        for (let i = composition.marks.length - 1; i >= -1; i--) {\n            pos = cView.childPos(pos.off, 1);\n            cView = cView.children[pos.i];\n            fix(i >= 0 ? composition.marks[i].node : composition.text, cView);\n        }\n    }\n    // Sync the DOM selection to this.state.selection\n    updateSelection(mustRead = false, fromPointer = false) {\n        if (mustRead || !this.view.observer.selectionRange.focusNode)\n            this.view.observer.readSelectionRange();\n        let activeElt = this.view.root.activeElement, focused = activeElt == this.dom;\n        let selectionNotFocus = !focused &&\n            hasSelection(this.dom, this.view.observer.selectionRange) && !(activeElt && this.dom.contains(activeElt));\n        if (!(focused || fromPointer || selectionNotFocus))\n            return;\n        let force = this.forceSelection;\n        this.forceSelection = false;\n        let main = this.view.state.selection.main;\n        let anchor = this.moveToLine(this.domAtPos(main.anchor));\n        let head = main.empty ? anchor : this.moveToLine(this.domAtPos(main.head));\n        // Always reset on Firefox when next to an uneditable node to\n        // avoid invisible cursor bugs (#111)\n        if (browser.gecko && main.empty && !this.hasComposition && betweenUneditable(anchor)) {\n            let dummy = document.createTextNode(\"\");\n            this.view.observer.ignore(() => anchor.node.insertBefore(dummy, anchor.node.childNodes[anchor.offset] || null));\n            anchor = head = new DOMPos(dummy, 0);\n            force = true;\n        }\n        let domSel = this.view.observer.selectionRange;\n        // If the selection is already here, or in an equivalent position, don't touch it\n        if (force || !domSel.focusNode || (!isEquivalentPosition(anchor.node, anchor.offset, domSel.anchorNode, domSel.anchorOffset) ||\n            !isEquivalentPosition(head.node, head.offset, domSel.focusNode, domSel.focusOffset)) && !this.suppressWidgetCursorChange(domSel, main)) {\n            this.view.observer.ignore(() => {\n                // Chrome Android will hide the virtual keyboard when tapping\n                // inside an uneditable node, and not bring it back when we\n                // move the cursor to its proper position. This tries to\n                // restore the keyboard by cycling focus.\n                if (browser.android && browser.chrome && this.dom.contains(domSel.focusNode) &&\n                    inUneditable(domSel.focusNode, this.dom)) {\n                    this.dom.blur();\n                    this.dom.focus({ preventScroll: true });\n                }\n                let rawSel = getSelection(this.view.root);\n                if (!rawSel) ;\n                else if (main.empty) {\n                    // Work around https://bugzilla.mozilla.org/show_bug.cgi?id=1612076\n                    if (browser.gecko) {\n                        let nextTo = nextToUneditable(anchor.node, anchor.offset);\n                        if (nextTo && nextTo != (1 /* NextTo.Before */ | 2 /* NextTo.After */)) {\n                            let text = (nextTo == 1 /* NextTo.Before */ ? textNodeBefore : textNodeAfter)(anchor.node, anchor.offset);\n                            if (text)\n                                anchor = new DOMPos(text.node, text.offset);\n                        }\n                    }\n                    rawSel.collapse(anchor.node, anchor.offset);\n                    if (main.bidiLevel != null && rawSel.caretBidiLevel !== undefined)\n                        rawSel.caretBidiLevel = main.bidiLevel;\n                }\n                else if (rawSel.extend) {\n                    // Selection.extend can be used to create an 'inverted' selection\n                    // (one where the focus is before the anchor), but not all\n                    // browsers support it yet.\n                    rawSel.collapse(anchor.node, anchor.offset);\n                    // Safari will ignore the call above when the editor is\n                    // hidden, and then raise an error on the call to extend\n                    // (#940).\n                    try {\n                        rawSel.extend(head.node, head.offset);\n                    }\n                    catch (_) { }\n                }\n                else {\n                    // Primitive (IE) way\n                    let range = document.createRange();\n                    if (main.anchor > main.head)\n                        [anchor, head] = [head, anchor];\n                    range.setEnd(head.node, head.offset);\n                    range.setStart(anchor.node, anchor.offset);\n                    rawSel.removeAllRanges();\n                    rawSel.addRange(range);\n                }\n                if (selectionNotFocus && this.view.root.activeElement == this.dom) {\n                    this.dom.blur();\n                    if (activeElt)\n                        activeElt.focus();\n                }\n            });\n            this.view.observer.setSelectionRange(anchor, head);\n        }\n        this.impreciseAnchor = anchor.precise ? null : new DOMPos(domSel.anchorNode, domSel.anchorOffset);\n        this.impreciseHead = head.precise ? null : new DOMPos(domSel.focusNode, domSel.focusOffset);\n    }\n    // If a zero-length widget is inserted next to the cursor during\n    // composition, avoid moving it across it and disrupting the\n    // composition.\n    suppressWidgetCursorChange(sel, cursor) {\n        return this.hasComposition && cursor.empty &&\n            isEquivalentPosition(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset) &&\n            this.posFromDOM(sel.focusNode, sel.focusOffset) == cursor.head;\n    }\n    enforceCursorAssoc() {\n        if (this.hasComposition)\n            return;\n        let { view } = this, cursor = view.state.selection.main;\n        let sel = getSelection(view.root);\n        let { anchorNode, anchorOffset } = view.observer.selectionRange;\n        if (!sel || !cursor.empty || !cursor.assoc || !sel.modify)\n            return;\n        let line = LineView.find(this, cursor.head);\n        if (!line)\n            return;\n        let lineStart = line.posAtStart;\n        if (cursor.head == lineStart || cursor.head == lineStart + line.length)\n            return;\n        let before = this.coordsAt(cursor.head, -1), after = this.coordsAt(cursor.head, 1);\n        if (!before || !after || before.bottom > after.top)\n            return;\n        let dom = this.domAtPos(cursor.head + cursor.assoc);\n        sel.collapse(dom.node, dom.offset);\n        sel.modify(\"move\", cursor.assoc < 0 ? \"forward\" : \"backward\", \"lineboundary\");\n        // This can go wrong in corner cases like single-character lines,\n        // so check and reset if necessary.\n        view.observer.readSelectionRange();\n        let newRange = view.observer.selectionRange;\n        if (view.docView.posFromDOM(newRange.anchorNode, newRange.anchorOffset) != cursor.from)\n            sel.collapse(anchorNode, anchorOffset);\n    }\n    // If a position is in/near a block widget, move it to a nearby text\n    // line, since we don't want the cursor inside a block widget.\n    moveToLine(pos) {\n        // Block widgets will return positions before/after them, which\n        // are thus directly in the document DOM element.\n        let dom = this.dom, newPos;\n        if (pos.node != dom)\n            return pos;\n        for (let i = pos.offset; !newPos && i < dom.childNodes.length; i++) {\n            let view = ContentView.get(dom.childNodes[i]);\n            if (view instanceof LineView)\n                newPos = view.domAtPos(0);\n        }\n        for (let i = pos.offset - 1; !newPos && i >= 0; i--) {\n            let view = ContentView.get(dom.childNodes[i]);\n            if (view instanceof LineView)\n                newPos = view.domAtPos(view.length);\n        }\n        return newPos ? new DOMPos(newPos.node, newPos.offset, true) : pos;\n    }\n    nearest(dom) {\n        for (let cur = dom; cur;) {\n            let domView = ContentView.get(cur);\n            if (domView && domView.rootView == this)\n                return domView;\n            cur = cur.parentNode;\n        }\n        return null;\n    }\n    posFromDOM(node, offset) {\n        let view = this.nearest(node);\n        if (!view)\n            throw new RangeError(\"Trying to find position for a DOM position outside of the document\");\n        return view.localPosFromDOM(node, offset) + view.posAtStart;\n    }\n    domAtPos(pos) {\n        let { i, off } = this.childCursor().findPos(pos, -1);\n        for (; i < this.children.length - 1;) {\n            let child = this.children[i];\n            if (off < child.length || child instanceof LineView)\n                break;\n            i++;\n            off = 0;\n        }\n        return this.children[i].domAtPos(off);\n    }\n    coordsAt(pos, side) {\n        let best = null, bestPos = 0;\n        for (let off = this.length, i = this.children.length - 1; i >= 0; i--) {\n            let child = this.children[i], end = off - child.breakAfter, start = end - child.length;\n            if (end < pos)\n                break;\n            if (start <= pos && (start < pos || child.covers(-1)) && (end > pos || child.covers(1)) &&\n                (!best || child instanceof LineView && !(best instanceof LineView && side >= 0))) {\n                best = child;\n                bestPos = start;\n            }\n            else if (best && start == pos && end == pos && child instanceof BlockWidgetView && Math.abs(side) < 2) {\n                if (child.deco.startSide < 0)\n                    break;\n                else if (i)\n                    best = null;\n            }\n            off = start;\n        }\n        return best ? best.coordsAt(pos - bestPos, side) : null;\n    }\n    coordsForChar(pos) {\n        let { i, off } = this.childPos(pos, 1), child = this.children[i];\n        if (!(child instanceof LineView))\n            return null;\n        while (child.children.length) {\n            let { i, off: childOff } = child.childPos(off, 1);\n            for (;; i++) {\n                if (i == child.children.length)\n                    return null;\n                if ((child = child.children[i]).length)\n                    break;\n            }\n            off = childOff;\n        }\n        if (!(child instanceof TextView))\n            return null;\n        let end = findClusterBreak(child.text, off);\n        if (end == off)\n            return null;\n        let rects = textRange(child.dom, off, end).getClientRects();\n        for (let i = 0; i < rects.length; i++) {\n            let rect = rects[i];\n            if (i == rects.length - 1 || rect.top < rect.bottom && rect.left < rect.right)\n                return rect;\n        }\n        return null;\n    }\n    measureVisibleLineHeights(viewport) {\n        let result = [], { from, to } = viewport;\n        let contentWidth = this.view.contentDOM.clientWidth;\n        let isWider = contentWidth > Math.max(this.view.scrollDOM.clientWidth, this.minWidth) + 1;\n        let widest = -1, ltr = this.view.textDirection == Direction.LTR;\n        for (let pos = 0, i = 0; i < this.children.length; i++) {\n            let child = this.children[i], end = pos + child.length;\n            if (end > to)\n                break;\n            if (pos >= from) {\n                let childRect = child.dom.getBoundingClientRect();\n                result.push(childRect.height);\n                if (isWider) {\n                    let last = child.dom.lastChild;\n                    let rects = last ? clientRectsFor(last) : [];\n                    if (rects.length) {\n                        let rect = rects[rects.length - 1];\n                        let width = ltr ? rect.right - childRect.left : childRect.right - rect.left;\n                        if (width > widest) {\n                            widest = width;\n                            this.minWidth = contentWidth;\n                            this.minWidthFrom = pos;\n                            this.minWidthTo = end;\n                        }\n                    }\n                }\n            }\n            pos = end + child.breakAfter;\n        }\n        return result;\n    }\n    textDirectionAt(pos) {\n        let { i } = this.childPos(pos, 1);\n        return getComputedStyle(this.children[i].dom).direction == \"rtl\" ? Direction.RTL : Direction.LTR;\n    }\n    measureTextSize() {\n        for (let child of this.children) {\n            if (child instanceof LineView) {\n                let measure = child.measureTextSize();\n                if (measure)\n                    return measure;\n            }\n        }\n        // If no workable line exists, force a layout of a measurable element\n        let dummy = document.createElement(\"div\"), lineHeight, charWidth, textHeight;\n        dummy.className = \"cm-line\";\n        dummy.style.width = \"99999px\";\n        dummy.style.position = \"absolute\";\n        dummy.textContent = \"abc def ghi jkl mno pqr stu\";\n        this.view.observer.ignore(() => {\n            this.dom.appendChild(dummy);\n            let rect = clientRectsFor(dummy.firstChild)[0];\n            lineHeight = dummy.getBoundingClientRect().height;\n            charWidth = rect ? rect.width / 27 : 7;\n            textHeight = rect ? rect.height : lineHeight;\n            dummy.remove();\n        });\n        return { lineHeight, charWidth, textHeight };\n    }\n    childCursor(pos = this.length) {\n        // Move back to start of last element when possible, so that\n        // `ChildCursor.findPos` doesn't have to deal with the edge case\n        // of being after the last element.\n        let i = this.children.length;\n        if (i)\n            pos -= this.children[--i].length;\n        return new ChildCursor(this.children, pos, i);\n    }\n    computeBlockGapDeco() {\n        let deco = [], vs = this.view.viewState;\n        for (let pos = 0, i = 0;; i++) {\n            let next = i == vs.viewports.length ? null : vs.viewports[i];\n            let end = next ? next.from - 1 : this.length;\n            if (end > pos) {\n                let height = (vs.lineBlockAt(end).bottom - vs.lineBlockAt(pos).top) / this.view.scaleY;\n                deco.push(Decoration.replace({\n                    widget: new BlockGapWidget(height),\n                    block: true,\n                    inclusive: true,\n                    isBlockGap: true,\n                }).range(pos, end));\n            }\n            if (!next)\n                break;\n            pos = next.to + 1;\n        }\n        return Decoration.set(deco);\n    }\n    updateDeco() {\n        let i = 1;\n        let allDeco = this.view.state.facet(decorations).map(d => {\n            let dynamic = this.dynamicDecorationMap[i++] = typeof d == \"function\";\n            return dynamic ? d(this.view) : d;\n        });\n        let dynamicOuter = false, outerDeco = this.view.state.facet(outerDecorations).map((d, i) => {\n            let dynamic = typeof d == \"function\";\n            if (dynamic)\n                dynamicOuter = true;\n            return dynamic ? d(this.view) : d;\n        });\n        if (outerDeco.length) {\n            this.dynamicDecorationMap[i++] = dynamicOuter;\n            allDeco.push(RangeSet.join(outerDeco));\n        }\n        this.decorations = [\n            this.editContextFormatting,\n            ...allDeco,\n            this.computeBlockGapDeco(),\n            this.view.viewState.lineGapDeco\n        ];\n        while (i < this.decorations.length)\n            this.dynamicDecorationMap[i++] = false;\n        return this.decorations;\n    }\n    scrollIntoView(target) {\n        if (target.isSnapshot) {\n            let ref = this.view.viewState.lineBlockAt(target.range.head);\n            this.view.scrollDOM.scrollTop = ref.top - target.yMargin;\n            this.view.scrollDOM.scrollLeft = target.xMargin;\n            return;\n        }\n        for (let handler of this.view.state.facet(scrollHandler)) {\n            try {\n                if (handler(this.view, target.range, target))\n                    return true;\n            }\n            catch (e) {\n                logException(this.view.state, e, \"scroll handler\");\n            }\n        }\n        let { range } = target;\n        let rect = this.coordsAt(range.head, range.empty ? range.assoc : range.head > range.anchor ? -1 : 1), other;\n        if (!rect)\n            return;\n        if (!range.empty && (other = this.coordsAt(range.anchor, range.anchor > range.head ? -1 : 1)))\n            rect = { left: Math.min(rect.left, other.left), top: Math.min(rect.top, other.top),\n                right: Math.max(rect.right, other.right), bottom: Math.max(rect.bottom, other.bottom) };\n        let margins = getScrollMargins(this.view);\n        let targetRect = {\n            left: rect.left - margins.left, top: rect.top - margins.top,\n            right: rect.right + margins.right, bottom: rect.bottom + margins.bottom\n        };\n        let { offsetWidth, offsetHeight } = this.view.scrollDOM;\n        scrollRectIntoView(this.view.scrollDOM, targetRect, range.head < range.anchor ? -1 : 1, target.x, target.y, Math.max(Math.min(target.xMargin, offsetWidth), -offsetWidth), Math.max(Math.min(target.yMargin, offsetHeight), -offsetHeight), this.view.textDirection == Direction.LTR);\n    }\n}\nfunction betweenUneditable(pos) {\n    return pos.node.nodeType == 1 && pos.node.firstChild &&\n        (pos.offset == 0 || pos.node.childNodes[pos.offset - 1].contentEditable == \"false\") &&\n        (pos.offset == pos.node.childNodes.length || pos.node.childNodes[pos.offset].contentEditable == \"false\");\n}\nclass BlockGapWidget extends WidgetType {\n    constructor(height) {\n        super();\n        this.height = height;\n    }\n    toDOM() {\n        let elt = document.createElement(\"div\");\n        elt.className = \"cm-gap\";\n        this.updateDOM(elt);\n        return elt;\n    }\n    eq(other) { return other.height == this.height; }\n    updateDOM(elt) {\n        elt.style.height = this.height + \"px\";\n        return true;\n    }\n    get editable() { return true; }\n    get estimatedHeight() { return this.height; }\n    ignoreEvent() { return false; }\n}\nfunction findCompositionNode(view, headPos) {\n    let sel = view.observer.selectionRange;\n    if (!sel.focusNode)\n        return null;\n    let textBefore = textNodeBefore(sel.focusNode, sel.focusOffset);\n    let textAfter = textNodeAfter(sel.focusNode, sel.focusOffset);\n    let textNode = textBefore || textAfter;\n    if (textAfter && textBefore && textAfter.node != textBefore.node) {\n        let descAfter = ContentView.get(textAfter.node);\n        if (!descAfter || descAfter instanceof TextView && descAfter.text != textAfter.node.nodeValue) {\n            textNode = textAfter;\n        }\n        else if (view.docView.lastCompositionAfterCursor) {\n            let descBefore = ContentView.get(textBefore.node);\n            if (!(!descBefore || descBefore instanceof TextView && descBefore.text != textBefore.node.nodeValue))\n                textNode = textAfter;\n        }\n    }\n    view.docView.lastCompositionAfterCursor = textNode != textBefore;\n    if (!textNode)\n        return null;\n    let from = headPos - textNode.offset;\n    return { from, to: from + textNode.node.nodeValue.length, node: textNode.node };\n}\nfunction findCompositionRange(view, changes, headPos) {\n    let found = findCompositionNode(view, headPos);\n    if (!found)\n        return null;\n    let { node: textNode, from, to } = found, text = textNode.nodeValue;\n    // Don't try to preserve multi-line compositions\n    if (/[\\n\\r]/.test(text))\n        return null;\n    if (view.state.doc.sliceString(found.from, found.to) != text)\n        return null;\n    let inv = changes.invertedDesc;\n    let range = new ChangedRange(inv.mapPos(from), inv.mapPos(to), from, to);\n    let marks = [];\n    for (let parent = textNode.parentNode;; parent = parent.parentNode) {\n        let parentView = ContentView.get(parent);\n        if (parentView instanceof MarkView)\n            marks.push({ node: parent, deco: parentView.mark });\n        else if (parentView instanceof LineView || parent.nodeName == \"DIV\" && parent.parentNode == view.contentDOM)\n            return { range, text: textNode, marks, line: parent };\n        else if (parent != view.contentDOM)\n            marks.push({ node: parent, deco: new MarkDecoration({\n                    inclusive: true,\n                    attributes: getAttrs(parent),\n                    tagName: parent.tagName.toLowerCase()\n                }) });\n        else\n            return null;\n    }\n}\nfunction nextToUneditable(node, offset) {\n    if (node.nodeType != 1)\n        return 0;\n    return (offset && node.childNodes[offset - 1].contentEditable == \"false\" ? 1 /* NextTo.Before */ : 0) |\n        (offset < node.childNodes.length && node.childNodes[offset].contentEditable == \"false\" ? 2 /* NextTo.After */ : 0);\n}\nlet DecorationComparator$1 = class DecorationComparator {\n    constructor() {\n        this.changes = [];\n    }\n    compareRange(from, to) { addRange(from, to, this.changes); }\n    comparePoint(from, to) { addRange(from, to, this.changes); }\n};\nfunction findChangedDeco(a, b, diff) {\n    let comp = new DecorationComparator$1;\n    RangeSet.compare(a, b, diff, comp);\n    return comp.changes;\n}\nfunction inUneditable(node, inside) {\n    for (let cur = node; cur && cur != inside; cur = cur.assignedSlot || cur.parentNode) {\n        if (cur.nodeType == 1 && cur.contentEditable == 'false') {\n            return true;\n        }\n    }\n    return false;\n}\nfunction touchesComposition(changes, composition) {\n    let touched = false;\n    if (composition)\n        changes.iterChangedRanges((from, to) => {\n            if (from < composition.to && to > composition.from)\n                touched = true;\n        });\n    return touched;\n}\n\nfunction groupAt(state, pos, bias = 1) {\n    let categorize = state.charCategorizer(pos);\n    let line = state.doc.lineAt(pos), linePos = pos - line.from;\n    if (line.length == 0)\n        return EditorSelection.cursor(pos);\n    if (linePos == 0)\n        bias = 1;\n    else if (linePos == line.length)\n        bias = -1;\n    let from = linePos, to = linePos;\n    if (bias < 0)\n        from = findClusterBreak(line.text, linePos, false);\n    else\n        to = findClusterBreak(line.text, linePos);\n    let cat = categorize(line.text.slice(from, to));\n    while (from > 0) {\n        let prev = findClusterBreak(line.text, from, false);\n        if (categorize(line.text.slice(prev, from)) != cat)\n            break;\n        from = prev;\n    }\n    while (to < line.length) {\n        let next = findClusterBreak(line.text, to);\n        if (categorize(line.text.slice(to, next)) != cat)\n            break;\n        to = next;\n    }\n    return EditorSelection.range(from + line.from, to + line.from);\n}\n// Search the DOM for the {node, offset} position closest to the given\n// coordinates. Very inefficient and crude, but can usually be avoided\n// by calling caret(Position|Range)FromPoint instead.\nfunction getdx(x, rect) {\n    return rect.left > x ? rect.left - x : Math.max(0, x - rect.right);\n}\nfunction getdy(y, rect) {\n    return rect.top > y ? rect.top - y : Math.max(0, y - rect.bottom);\n}\nfunction yOverlap(a, b) {\n    return a.top < b.bottom - 1 && a.bottom > b.top + 1;\n}\nfunction upTop(rect, top) {\n    return top < rect.top ? { top, left: rect.left, right: rect.right, bottom: rect.bottom } : rect;\n}\nfunction upBot(rect, bottom) {\n    return bottom > rect.bottom ? { top: rect.top, left: rect.left, right: rect.right, bottom } : rect;\n}\nfunction domPosAtCoords(parent, x, y) {\n    let closest, closestRect, closestX, closestY, closestOverlap = false;\n    let above, below, aboveRect, belowRect;\n    for (let child = parent.firstChild; child; child = child.nextSibling) {\n        let rects = clientRectsFor(child);\n        for (let i = 0; i < rects.length; i++) {\n            let rect = rects[i];\n            if (closestRect && yOverlap(closestRect, rect))\n                rect = upTop(upBot(rect, closestRect.bottom), closestRect.top);\n            let dx = getdx(x, rect), dy = getdy(y, rect);\n            if (dx == 0 && dy == 0)\n                return child.nodeType == 3 ? domPosInText(child, x, y) : domPosAtCoords(child, x, y);\n            if (!closest || closestY > dy || closestY == dy && closestX > dx) {\n                closest = child;\n                closestRect = rect;\n                closestX = dx;\n                closestY = dy;\n                let side = dy ? (y < rect.top ? -1 : 1) : dx ? (x < rect.left ? -1 : 1) : 0;\n                closestOverlap = !side || (side > 0 ? i < rects.length - 1 : i > 0);\n            }\n            if (dx == 0) {\n                if (y > rect.bottom && (!aboveRect || aboveRect.bottom < rect.bottom)) {\n                    above = child;\n                    aboveRect = rect;\n                }\n                else if (y < rect.top && (!belowRect || belowRect.top > rect.top)) {\n                    below = child;\n                    belowRect = rect;\n                }\n            }\n            else if (aboveRect && yOverlap(aboveRect, rect)) {\n                aboveRect = upBot(aboveRect, rect.bottom);\n            }\n            else if (belowRect && yOverlap(belowRect, rect)) {\n                belowRect = upTop(belowRect, rect.top);\n            }\n        }\n    }\n    if (aboveRect && aboveRect.bottom >= y) {\n        closest = above;\n        closestRect = aboveRect;\n    }\n    else if (belowRect && belowRect.top <= y) {\n        closest = below;\n        closestRect = belowRect;\n    }\n    if (!closest)\n        return { node: parent, offset: 0 };\n    let clipX = Math.max(closestRect.left, Math.min(closestRect.right, x));\n    if (closest.nodeType == 3)\n        return domPosInText(closest, clipX, y);\n    if (closestOverlap && closest.contentEditable != \"false\")\n        return domPosAtCoords(closest, clipX, y);\n    let offset = Array.prototype.indexOf.call(parent.childNodes, closest) +\n        (x >= (closestRect.left + closestRect.right) / 2 ? 1 : 0);\n    return { node: parent, offset };\n}\nfunction domPosInText(node, x, y) {\n    let len = node.nodeValue.length;\n    let closestOffset = -1, closestDY = 1e9, generalSide = 0;\n    for (let i = 0; i < len; i++) {\n        let rects = textRange(node, i, i + 1).getClientRects();\n        for (let j = 0; j < rects.length; j++) {\n            let rect = rects[j];\n            if (rect.top == rect.bottom)\n                continue;\n            if (!generalSide)\n                generalSide = x - rect.left;\n            let dy = (rect.top > y ? rect.top - y : y - rect.bottom) - 1;\n            if (rect.left - 1 <= x && rect.right + 1 >= x && dy < closestDY) {\n                let right = x >= (rect.left + rect.right) / 2, after = right;\n                if (browser.chrome || browser.gecko) {\n                    // Check for RTL on browsers that support getting client\n                    // rects for empty ranges.\n                    let rectBefore = textRange(node, i).getBoundingClientRect();\n                    if (rectBefore.left == rect.right)\n                        after = !right;\n                }\n                if (dy <= 0)\n                    return { node, offset: i + (after ? 1 : 0) };\n                closestOffset = i + (after ? 1 : 0);\n                closestDY = dy;\n            }\n        }\n    }\n    return { node, offset: closestOffset > -1 ? closestOffset : generalSide > 0 ? node.nodeValue.length : 0 };\n}\nfunction posAtCoords(view, coords, precise, bias = -1) {\n    var _a, _b;\n    let content = view.contentDOM.getBoundingClientRect(), docTop = content.top + view.viewState.paddingTop;\n    let block, { docHeight } = view.viewState;\n    let { x, y } = coords, yOffset = y - docTop;\n    if (yOffset < 0)\n        return 0;\n    if (yOffset > docHeight)\n        return view.state.doc.length;\n    // Scan for a text block near the queried y position\n    for (let halfLine = view.viewState.heightOracle.textHeight / 2, bounced = false;;) {\n        block = view.elementAtHeight(yOffset);\n        if (block.type == BlockType.Text)\n            break;\n        for (;;) {\n            // Move the y position out of this block\n            yOffset = bias > 0 ? block.bottom + halfLine : block.top - halfLine;\n            if (yOffset >= 0 && yOffset <= docHeight)\n                break;\n            // If the document consists entirely of replaced widgets, we\n            // won't find a text block, so return 0\n            if (bounced)\n                return precise ? null : 0;\n            bounced = true;\n            bias = -bias;\n        }\n    }\n    y = docTop + yOffset;\n    let lineStart = block.from;\n    // If this is outside of the rendered viewport, we can't determine a position\n    if (lineStart < view.viewport.from)\n        return view.viewport.from == 0 ? 0 : precise ? null : posAtCoordsImprecise(view, content, block, x, y);\n    if (lineStart > view.viewport.to)\n        return view.viewport.to == view.state.doc.length ? view.state.doc.length :\n            precise ? null : posAtCoordsImprecise(view, content, block, x, y);\n    // Prefer ShadowRootOrDocument.elementFromPoint if present, fall back to document if not\n    let doc = view.dom.ownerDocument;\n    let root = view.root.elementFromPoint ? view.root : doc;\n    let element = root.elementFromPoint(x, y);\n    if (element && !view.contentDOM.contains(element))\n        element = null;\n    // If the element is unexpected, clip x at the sides of the content area and try again\n    if (!element) {\n        x = Math.max(content.left + 1, Math.min(content.right - 1, x));\n        element = root.elementFromPoint(x, y);\n        if (element && !view.contentDOM.contains(element))\n            element = null;\n    }\n    // There's visible editor content under the point, so we can try\n    // using caret(Position|Range)FromPoint as a shortcut\n    let node, offset = -1;\n    if (element && ((_a = view.docView.nearest(element)) === null || _a === void 0 ? void 0 : _a.isEditable) != false) {\n        if (doc.caretPositionFromPoint) {\n            let pos = doc.caretPositionFromPoint(x, y);\n            if (pos)\n                ({ offsetNode: node, offset } = pos);\n        }\n        else if (doc.caretRangeFromPoint) {\n            let range = doc.caretRangeFromPoint(x, y);\n            if (range) {\n                ({ startContainer: node, startOffset: offset } = range);\n                if (!view.contentDOM.contains(node) ||\n                    browser.safari && isSuspiciousSafariCaretResult(node, offset, x) ||\n                    browser.chrome && isSuspiciousChromeCaretResult(node, offset, x))\n                    node = undefined;\n            }\n        }\n    }\n    // No luck, do our own (potentially expensive) search\n    if (!node || !view.docView.dom.contains(node)) {\n        let line = LineView.find(view.docView, lineStart);\n        if (!line)\n            return yOffset > block.top + block.height / 2 ? block.to : block.from;\n        ({ node, offset } = domPosAtCoords(line.dom, x, y));\n    }\n    let nearest = view.docView.nearest(node);\n    if (!nearest)\n        return null;\n    if (nearest.isWidget && ((_b = nearest.dom) === null || _b === void 0 ? void 0 : _b.nodeType) == 1) {\n        let rect = nearest.dom.getBoundingClientRect();\n        return coords.y < rect.top || coords.y <= rect.bottom && coords.x <= (rect.left + rect.right) / 2\n            ? nearest.posAtStart : nearest.posAtEnd;\n    }\n    else {\n        return nearest.localPosFromDOM(node, offset) + nearest.posAtStart;\n    }\n}\nfunction posAtCoordsImprecise(view, contentRect, block, x, y) {\n    let into = Math.round((x - contentRect.left) * view.defaultCharacterWidth);\n    if (view.lineWrapping && block.height > view.defaultLineHeight * 1.5) {\n        let textHeight = view.viewState.heightOracle.textHeight;\n        let line = Math.floor((y - block.top - (view.defaultLineHeight - textHeight) * 0.5) / textHeight);\n        into += line * view.viewState.heightOracle.lineLength;\n    }\n    let content = view.state.sliceDoc(block.from, block.to);\n    return block.from + findColumn(content, into, view.state.tabSize);\n}\n// In case of a high line height, Safari's caretRangeFromPoint treats\n// the space between lines as belonging to the last character of the\n// line before. This is used to detect such a result so that it can be\n// ignored (issue #401).\nfunction isSuspiciousSafariCaretResult(node, offset, x) {\n    let len;\n    if (node.nodeType != 3 || offset != (len = node.nodeValue.length))\n        return false;\n    for (let next = node.nextSibling; next; next = next.nextSibling)\n        if (next.nodeType != 1 || next.nodeName != \"BR\")\n            return false;\n    return textRange(node, len - 1, len).getBoundingClientRect().left > x;\n}\n// Chrome will move positions between lines to the start of the next line\nfunction isSuspiciousChromeCaretResult(node, offset, x) {\n    if (offset != 0)\n        return false;\n    for (let cur = node;;) {\n        let parent = cur.parentNode;\n        if (!parent || parent.nodeType != 1 || parent.firstChild != cur)\n            return false;\n        if (parent.classList.contains(\"cm-line\"))\n            break;\n        cur = parent;\n    }\n    let rect = node.nodeType == 1 ? node.getBoundingClientRect()\n        : textRange(node, 0, Math.max(node.nodeValue.length, 1)).getBoundingClientRect();\n    return x - rect.left > 5;\n}\nfunction blockAt(view, pos) {\n    let line = view.lineBlockAt(pos);\n    if (Array.isArray(line.type))\n        for (let l of line.type) {\n            if (l.to > pos || l.to == pos && (l.to == line.to || l.type == BlockType.Text))\n                return l;\n        }\n    return line;\n}\nfunction moveToLineBoundary(view, start, forward, includeWrap) {\n    let line = blockAt(view, start.head);\n    let coords = !includeWrap || line.type != BlockType.Text || !(view.lineWrapping || line.widgetLineBreaks) ? null\n        : view.coordsAtPos(start.assoc < 0 && start.head > line.from ? start.head - 1 : start.head);\n    if (coords) {\n        let editorRect = view.dom.getBoundingClientRect();\n        let direction = view.textDirectionAt(line.from);\n        let pos = view.posAtCoords({ x: forward == (direction == Direction.LTR) ? editorRect.right - 1 : editorRect.left + 1,\n            y: (coords.top + coords.bottom) / 2 });\n        if (pos != null)\n            return EditorSelection.cursor(pos, forward ? -1 : 1);\n    }\n    return EditorSelection.cursor(forward ? line.to : line.from, forward ? -1 : 1);\n}\nfunction moveByChar(view, start, forward, by) {\n    let line = view.state.doc.lineAt(start.head), spans = view.bidiSpans(line);\n    let direction = view.textDirectionAt(line.from);\n    for (let cur = start, check = null;;) {\n        let next = moveVisually(line, spans, direction, cur, forward), char = movedOver;\n        if (!next) {\n            if (line.number == (forward ? view.state.doc.lines : 1))\n                return cur;\n            char = \"\\n\";\n            line = view.state.doc.line(line.number + (forward ? 1 : -1));\n            spans = view.bidiSpans(line);\n            next = view.visualLineSide(line, !forward);\n        }\n        if (!check) {\n            if (!by)\n                return next;\n            check = by(char);\n        }\n        else if (!check(char)) {\n            return cur;\n        }\n        cur = next;\n    }\n}\nfunction byGroup(view, pos, start) {\n    let categorize = view.state.charCategorizer(pos);\n    let cat = categorize(start);\n    return (next) => {\n        let nextCat = categorize(next);\n        if (cat == CharCategory.Space)\n            cat = nextCat;\n        return cat == nextCat;\n    };\n}\nfunction moveVertically(view, start, forward, distance) {\n    let startPos = start.head, dir = forward ? 1 : -1;\n    if (startPos == (forward ? view.state.doc.length : 0))\n        return EditorSelection.cursor(startPos, start.assoc);\n    let goal = start.goalColumn, startY;\n    let rect = view.contentDOM.getBoundingClientRect();\n    let startCoords = view.coordsAtPos(startPos, start.assoc || -1), docTop = view.documentTop;\n    if (startCoords) {\n        if (goal == null)\n            goal = startCoords.left - rect.left;\n        startY = dir < 0 ? startCoords.top : startCoords.bottom;\n    }\n    else {\n        let line = view.viewState.lineBlockAt(startPos);\n        if (goal == null)\n            goal = Math.min(rect.right - rect.left, view.defaultCharacterWidth * (startPos - line.from));\n        startY = (dir < 0 ? line.top : line.bottom) + docTop;\n    }\n    let resolvedGoal = rect.left + goal;\n    let dist = distance !== null && distance !== void 0 ? distance : (view.viewState.heightOracle.textHeight >> 1);\n    for (let extra = 0;; extra += 10) {\n        let curY = startY + (dist + extra) * dir;\n        let pos = posAtCoords(view, { x: resolvedGoal, y: curY }, false, dir);\n        if (curY < rect.top || curY > rect.bottom || (dir < 0 ? pos < startPos : pos > startPos)) {\n            let charRect = view.docView.coordsForChar(pos);\n            let assoc = !charRect || curY < charRect.top ? -1 : 1;\n            return EditorSelection.cursor(pos, assoc, undefined, goal);\n        }\n    }\n}\nfunction skipAtomicRanges(atoms, pos, bias) {\n    for (;;) {\n        let moved = 0;\n        for (let set of atoms) {\n            set.between(pos - 1, pos + 1, (from, to, value) => {\n                if (pos > from && pos < to) {\n                    let side = moved || bias || (pos - from < to - pos ? -1 : 1);\n                    pos = side < 0 ? from : to;\n                    moved = side;\n                }\n            });\n        }\n        if (!moved)\n            return pos;\n    }\n}\nfunction skipAtoms(view, oldPos, pos) {\n    let newPos = skipAtomicRanges(view.state.facet(atomicRanges).map(f => f(view)), pos.from, oldPos.head > pos.from ? -1 : 1);\n    return newPos == pos.from ? pos : EditorSelection.cursor(newPos, newPos < pos.from ? 1 : -1);\n}\n\n// This will also be where dragging info and such goes\nclass InputState {\n    setSelectionOrigin(origin) {\n        this.lastSelectionOrigin = origin;\n        this.lastSelectionTime = Date.now();\n    }\n    constructor(view) {\n        this.view = view;\n        this.lastKeyCode = 0;\n        this.lastKeyTime = 0;\n        this.lastTouchTime = 0;\n        this.lastFocusTime = 0;\n        this.lastScrollTop = 0;\n        this.lastScrollLeft = 0;\n        // On iOS, some keys need to have their default behavior happen\n        // (after which we retroactively handle them and reset the DOM) to\n        // avoid messing up the virtual keyboard state.\n        this.pendingIOSKey = undefined;\n        /**\n        When enabled (>-1), tab presses are not given to key handlers,\n        leaving the browser's default behavior. If >0, the mode expires\n        at that timestamp, and any other keypress clears it.\n        Esc enables temporary tab focus mode for two seconds when not\n        otherwise handled.\n        */\n        this.tabFocusMode = -1;\n        this.lastSelectionOrigin = null;\n        this.lastSelectionTime = 0;\n        this.lastContextMenu = 0;\n        this.scrollHandlers = [];\n        this.handlers = Object.create(null);\n        // -1 means not in a composition. Otherwise, this counts the number\n        // of changes made during the composition. The count is used to\n        // avoid treating the start state of the composition, before any\n        // changes have been made, as part of the composition.\n        this.composing = -1;\n        // Tracks whether the next change should be marked as starting the\n        // composition (null means no composition, true means next is the\n        // first, false means first has already been marked for this\n        // composition)\n        this.compositionFirstChange = null;\n        // End time of the previous composition\n        this.compositionEndedAt = 0;\n        // Used in a kludge to detect when an Enter keypress should be\n        // considered part of the composition on Safari, which fires events\n        // in the wrong order\n        this.compositionPendingKey = false;\n        // Used to categorize changes as part of a composition, even when\n        // the mutation events fire shortly after the compositionend event\n        this.compositionPendingChange = false;\n        this.mouseSelection = null;\n        // When a drag from the editor is active, this points at the range\n        // being dragged.\n        this.draggedContent = null;\n        this.handleEvent = this.handleEvent.bind(this);\n        this.notifiedFocused = view.hasFocus;\n        // On Safari adding an input event handler somehow prevents an\n        // issue where the composition vanishes when you press enter.\n        if (browser.safari)\n            view.contentDOM.addEventListener(\"input\", () => null);\n        if (browser.gecko)\n            firefoxCopyCutHack(view.contentDOM.ownerDocument);\n    }\n    handleEvent(event) {\n        if (!eventBelongsToEditor(this.view, event) || this.ignoreDuringComposition(event))\n            return;\n        if (event.type == \"keydown\" && this.keydown(event))\n            return;\n        this.runHandlers(event.type, event);\n    }\n    runHandlers(type, event) {\n        let handlers = this.handlers[type];\n        if (handlers) {\n            for (let observer of handlers.observers)\n                observer(this.view, event);\n            for (let handler of handlers.handlers) {\n                if (event.defaultPrevented)\n                    break;\n                if (handler(this.view, event)) {\n                    event.preventDefault();\n                    break;\n                }\n            }\n        }\n    }\n    ensureHandlers(plugins) {\n        let handlers = computeHandlers(plugins), prev = this.handlers, dom = this.view.contentDOM;\n        for (let type in handlers)\n            if (type != \"scroll\") {\n                let passive = !handlers[type].handlers.length;\n                let exists = prev[type];\n                if (exists && passive != !exists.handlers.length) {\n                    dom.removeEventListener(type, this.handleEvent);\n                    exists = null;\n                }\n                if (!exists)\n                    dom.addEventListener(type, this.handleEvent, { passive });\n            }\n        for (let type in prev)\n            if (type != \"scroll\" && !handlers[type])\n                dom.removeEventListener(type, this.handleEvent);\n        this.handlers = handlers;\n    }\n    keydown(event) {\n        // Must always run, even if a custom handler handled the event\n        this.lastKeyCode = event.keyCode;\n        this.lastKeyTime = Date.now();\n        if (event.keyCode == 9 && this.tabFocusMode > -1 && (!this.tabFocusMode || Date.now() <= this.tabFocusMode))\n            return true;\n        if (this.tabFocusMode > 0 && event.keyCode != 27 && modifierCodes.indexOf(event.keyCode) < 0)\n            this.tabFocusMode = -1;\n        // Chrome for Android usually doesn't fire proper key events, but\n        // occasionally does, usually surrounded by a bunch of complicated\n        // composition changes. When an enter or backspace key event is\n        // seen, hold off on handling DOM events for a bit, and then\n        // dispatch it.\n        if (browser.android && browser.chrome && !event.synthetic &&\n            (event.keyCode == 13 || event.keyCode == 8)) {\n            this.view.observer.delayAndroidKey(event.key, event.keyCode);\n            return true;\n        }\n        // Preventing the default behavior of Enter on iOS makes the\n        // virtual keyboard get stuck in the wrong (lowercase)\n        // state. So we let it go through, and then, in\n        // applyDOMChange, notify key handlers of it and reset to\n        // the state they produce.\n        let pending;\n        if (browser.ios && !event.synthetic && !event.altKey && !event.metaKey &&\n            ((pending = PendingKeys.find(key => key.keyCode == event.keyCode)) && !event.ctrlKey ||\n                EmacsyPendingKeys.indexOf(event.key) > -1 && event.ctrlKey && !event.shiftKey)) {\n            this.pendingIOSKey = pending || event;\n            setTimeout(() => this.flushIOSKey(), 250);\n            return true;\n        }\n        if (event.keyCode != 229)\n            this.view.observer.forceFlush();\n        return false;\n    }\n    flushIOSKey(change) {\n        let key = this.pendingIOSKey;\n        if (!key)\n            return false;\n        // This looks like an autocorrection before Enter\n        if (key.key == \"Enter\" && change && change.from < change.to && /^\\S+$/.test(change.insert.toString()))\n            return false;\n        this.pendingIOSKey = undefined;\n        return dispatchKey(this.view.contentDOM, key.key, key.keyCode, key instanceof KeyboardEvent ? key : undefined);\n    }\n    ignoreDuringComposition(event) {\n        if (!/^key/.test(event.type))\n            return false;\n        if (this.composing > 0)\n            return true;\n        // See https://www.stum.de/2016/06/24/handling-ime-events-in-javascript/.\n        // On some input method editors (IMEs), the Enter key is used to\n        // confirm character selection. On Safari, when Enter is pressed,\n        // compositionend and keydown events are sometimes emitted in the\n        // wrong order. The key event should still be ignored, even when\n        // it happens after the compositionend event.\n        if (browser.safari && !browser.ios && this.compositionPendingKey && Date.now() - this.compositionEndedAt < 100) {\n            this.compositionPendingKey = false;\n            return true;\n        }\n        return false;\n    }\n    startMouseSelection(mouseSelection) {\n        if (this.mouseSelection)\n            this.mouseSelection.destroy();\n        this.mouseSelection = mouseSelection;\n    }\n    update(update) {\n        this.view.observer.update(update);\n        if (this.mouseSelection)\n            this.mouseSelection.update(update);\n        if (this.draggedContent && update.docChanged)\n            this.draggedContent = this.draggedContent.map(update.changes);\n        if (update.transactions.length)\n            this.lastKeyCode = this.lastSelectionTime = 0;\n    }\n    destroy() {\n        if (this.mouseSelection)\n            this.mouseSelection.destroy();\n    }\n}\nfunction bindHandler(plugin, handler) {\n    return (view, event) => {\n        try {\n            return handler.call(plugin, event, view);\n        }\n        catch (e) {\n            logException(view.state, e);\n        }\n    };\n}\nfunction computeHandlers(plugins) {\n    let result = Object.create(null);\n    function record(type) {\n        return result[type] || (result[type] = { observers: [], handlers: [] });\n    }\n    for (let plugin of plugins) {\n        let spec = plugin.spec;\n        if (spec && spec.domEventHandlers)\n            for (let type in spec.domEventHandlers) {\n                let f = spec.domEventHandlers[type];\n                if (f)\n                    record(type).handlers.push(bindHandler(plugin.value, f));\n            }\n        if (spec && spec.domEventObservers)\n            for (let type in spec.domEventObservers) {\n                let f = spec.domEventObservers[type];\n                if (f)\n                    record(type).observers.push(bindHandler(plugin.value, f));\n            }\n    }\n    for (let type in handlers)\n        record(type).handlers.push(handlers[type]);\n    for (let type in observers)\n        record(type).observers.push(observers[type]);\n    return result;\n}\nconst PendingKeys = [\n    { key: \"Backspace\", keyCode: 8, inputType: \"deleteContentBackward\" },\n    { key: \"Enter\", keyCode: 13, inputType: \"insertParagraph\" },\n    { key: \"Enter\", keyCode: 13, inputType: \"insertLineBreak\" },\n    { key: \"Delete\", keyCode: 46, inputType: \"deleteContentForward\" }\n];\nconst EmacsyPendingKeys = \"dthko\";\n// Key codes for modifier keys\nconst modifierCodes = [16, 17, 18, 20, 91, 92, 224, 225];\nconst dragScrollMargin = 6;\nfunction dragScrollSpeed(dist) {\n    return Math.max(0, dist) * 0.7 + 8;\n}\nfunction dist(a, b) {\n    return Math.max(Math.abs(a.clientX - b.clientX), Math.abs(a.clientY - b.clientY));\n}\nclass MouseSelection {\n    constructor(view, startEvent, style, mustSelect) {\n        this.view = view;\n        this.startEvent = startEvent;\n        this.style = style;\n        this.mustSelect = mustSelect;\n        this.scrollSpeed = { x: 0, y: 0 };\n        this.scrolling = -1;\n        this.lastEvent = startEvent;\n        this.scrollParents = scrollableParents(view.contentDOM);\n        this.atoms = view.state.facet(atomicRanges).map(f => f(view));\n        let doc = view.contentDOM.ownerDocument;\n        doc.addEventListener(\"mousemove\", this.move = this.move.bind(this));\n        doc.addEventListener(\"mouseup\", this.up = this.up.bind(this));\n        this.extend = startEvent.shiftKey;\n        this.multiple = view.state.facet(EditorState.allowMultipleSelections) && addsSelectionRange(view, startEvent);\n        this.dragging = isInPrimarySelection(view, startEvent) && getClickType(startEvent) == 1 ? null : false;\n    }\n    start(event) {\n        // When clicking outside of the selection, immediately apply the\n        // effect of starting the selection\n        if (this.dragging === false)\n            this.select(event);\n    }\n    move(event) {\n        if (event.buttons == 0)\n            return this.destroy();\n        if (this.dragging || this.dragging == null && dist(this.startEvent, event) < 10)\n            return;\n        this.select(this.lastEvent = event);\n        let sx = 0, sy = 0;\n        let left = 0, top = 0, right = this.view.win.innerWidth, bottom = this.view.win.innerHeight;\n        if (this.scrollParents.x)\n            ({ left, right } = this.scrollParents.x.getBoundingClientRect());\n        if (this.scrollParents.y)\n            ({ top, bottom } = this.scrollParents.y.getBoundingClientRect());\n        let margins = getScrollMargins(this.view);\n        if (event.clientX - margins.left <= left + dragScrollMargin)\n            sx = -dragScrollSpeed(left - event.clientX);\n        else if (event.clientX + margins.right >= right - dragScrollMargin)\n            sx = dragScrollSpeed(event.clientX - right);\n        if (event.clientY - margins.top <= top + dragScrollMargin)\n            sy = -dragScrollSpeed(top - event.clientY);\n        else if (event.clientY + margins.bottom >= bottom - dragScrollMargin)\n            sy = dragScrollSpeed(event.clientY - bottom);\n        this.setScrollSpeed(sx, sy);\n    }\n    up(event) {\n        if (this.dragging == null)\n            this.select(this.lastEvent);\n        if (!this.dragging)\n            event.preventDefault();\n        this.destroy();\n    }\n    destroy() {\n        this.setScrollSpeed(0, 0);\n        let doc = this.view.contentDOM.ownerDocument;\n        doc.removeEventListener(\"mousemove\", this.move);\n        doc.removeEventListener(\"mouseup\", this.up);\n        this.view.inputState.mouseSelection = this.view.inputState.draggedContent = null;\n    }\n    setScrollSpeed(sx, sy) {\n        this.scrollSpeed = { x: sx, y: sy };\n        if (sx || sy) {\n            if (this.scrolling < 0)\n                this.scrolling = setInterval(() => this.scroll(), 50);\n        }\n        else if (this.scrolling > -1) {\n            clearInterval(this.scrolling);\n            this.scrolling = -1;\n        }\n    }\n    scroll() {\n        let { x, y } = this.scrollSpeed;\n        if (x && this.scrollParents.x) {\n            this.scrollParents.x.scrollLeft += x;\n            x = 0;\n        }\n        if (y && this.scrollParents.y) {\n            this.scrollParents.y.scrollTop += y;\n            y = 0;\n        }\n        if (x || y)\n            this.view.win.scrollBy(x, y);\n        if (this.dragging === false)\n            this.select(this.lastEvent);\n    }\n    skipAtoms(sel) {\n        let ranges = null;\n        for (let i = 0; i < sel.ranges.length; i++) {\n            let range = sel.ranges[i], updated = null;\n            if (range.empty) {\n                let pos = skipAtomicRanges(this.atoms, range.from, 0);\n                if (pos != range.from)\n                    updated = EditorSelection.cursor(pos, -1);\n            }\n            else {\n                let from = skipAtomicRanges(this.atoms, range.from, -1);\n                let to = skipAtomicRanges(this.atoms, range.to, 1);\n                if (from != range.from || to != range.to)\n                    updated = EditorSelection.range(range.from == range.anchor ? from : to, range.from == range.head ? from : to);\n            }\n            if (updated) {\n                if (!ranges)\n                    ranges = sel.ranges.slice();\n                ranges[i] = updated;\n            }\n        }\n        return ranges ? EditorSelection.create(ranges, sel.mainIndex) : sel;\n    }\n    select(event) {\n        let { view } = this, selection = this.skipAtoms(this.style.get(event, this.extend, this.multiple));\n        if (this.mustSelect || !selection.eq(view.state.selection, this.dragging === false))\n            this.view.dispatch({\n                selection,\n                userEvent: \"select.pointer\"\n            });\n        this.mustSelect = false;\n    }\n    update(update) {\n        if (update.transactions.some(tr => tr.isUserEvent(\"input.type\")))\n            this.destroy();\n        else if (this.style.update(update))\n            setTimeout(() => this.select(this.lastEvent), 20);\n    }\n}\nfunction addsSelectionRange(view, event) {\n    let facet = view.state.facet(clickAddsSelectionRange);\n    return facet.length ? facet[0](event) : browser.mac ? event.metaKey : event.ctrlKey;\n}\nfunction dragMovesSelection(view, event) {\n    let facet = view.state.facet(dragMovesSelection$1);\n    return facet.length ? facet[0](event) : browser.mac ? !event.altKey : !event.ctrlKey;\n}\nfunction isInPrimarySelection(view, event) {\n    let { main } = view.state.selection;\n    if (main.empty)\n        return false;\n    // On boundary clicks, check whether the coordinates are inside the\n    // selection's client rectangles\n    let sel = getSelection(view.root);\n    if (!sel || sel.rangeCount == 0)\n        return true;\n    let rects = sel.getRangeAt(0).getClientRects();\n    for (let i = 0; i < rects.length; i++) {\n        let rect = rects[i];\n        if (rect.left <= event.clientX && rect.right >= event.clientX &&\n            rect.top <= event.clientY && rect.bottom >= event.clientY)\n            return true;\n    }\n    return false;\n}\nfunction eventBelongsToEditor(view, event) {\n    if (!event.bubbles)\n        return true;\n    if (event.defaultPrevented)\n        return false;\n    for (let node = event.target, cView; node != view.contentDOM; node = node.parentNode)\n        if (!node || node.nodeType == 11 || ((cView = ContentView.get(node)) && cView.ignoreEvent(event)))\n            return false;\n    return true;\n}\nconst handlers = /*@__PURE__*/Object.create(null);\nconst observers = /*@__PURE__*/Object.create(null);\n// This is very crude, but unfortunately both these browsers _pretend_\n// that they have a clipboard API—all the objects and methods are\n// there, they just don't work, and they are hard to test.\nconst brokenClipboardAPI = (browser.ie && browser.ie_version < 15) ||\n    (browser.ios && browser.webkit_version < 604);\nfunction capturePaste(view) {\n    let parent = view.dom.parentNode;\n    if (!parent)\n        return;\n    let target = parent.appendChild(document.createElement(\"textarea\"));\n    target.style.cssText = \"position: fixed; left: -10000px; top: 10px\";\n    target.focus();\n    setTimeout(() => {\n        view.focus();\n        target.remove();\n        doPaste(view, target.value);\n    }, 50);\n}\nfunction doPaste(view, input) {\n    let { state } = view, changes, i = 1, text = state.toText(input);\n    let byLine = text.lines == state.selection.ranges.length;\n    let linewise = lastLinewiseCopy != null && state.selection.ranges.every(r => r.empty) && lastLinewiseCopy == text.toString();\n    if (linewise) {\n        let lastLine = -1;\n        changes = state.changeByRange(range => {\n            let line = state.doc.lineAt(range.from);\n            if (line.from == lastLine)\n                return { range };\n            lastLine = line.from;\n            let insert = state.toText((byLine ? text.line(i++).text : input) + state.lineBreak);\n            return { changes: { from: line.from, insert },\n                range: EditorSelection.cursor(range.from + insert.length) };\n        });\n    }\n    else if (byLine) {\n        changes = state.changeByRange(range => {\n            let line = text.line(i++);\n            return { changes: { from: range.from, to: range.to, insert: line.text },\n                range: EditorSelection.cursor(range.from + line.length) };\n        });\n    }\n    else {\n        changes = state.replaceSelection(text);\n    }\n    view.dispatch(changes, {\n        userEvent: \"input.paste\",\n        scrollIntoView: true\n    });\n}\nobservers.scroll = view => {\n    view.inputState.lastScrollTop = view.scrollDOM.scrollTop;\n    view.inputState.lastScrollLeft = view.scrollDOM.scrollLeft;\n};\nhandlers.keydown = (view, event) => {\n    view.inputState.setSelectionOrigin(\"select\");\n    if (event.keyCode == 27 && view.inputState.tabFocusMode != 0)\n        view.inputState.tabFocusMode = Date.now() + 2000;\n    return false;\n};\nobservers.touchstart = (view, e) => {\n    view.inputState.lastTouchTime = Date.now();\n    view.inputState.setSelectionOrigin(\"select.pointer\");\n};\nobservers.touchmove = view => {\n    view.inputState.setSelectionOrigin(\"select.pointer\");\n};\nhandlers.mousedown = (view, event) => {\n    view.observer.flush();\n    if (view.inputState.lastTouchTime > Date.now() - 2000)\n        return false; // Ignore touch interaction\n    let style = null;\n    for (let makeStyle of view.state.facet(mouseSelectionStyle)) {\n        style = makeStyle(view, event);\n        if (style)\n            break;\n    }\n    if (!style && event.button == 0)\n        style = basicMouseSelection(view, event);\n    if (style) {\n        let mustFocus = !view.hasFocus;\n        view.inputState.startMouseSelection(new MouseSelection(view, event, style, mustFocus));\n        if (mustFocus)\n            view.observer.ignore(() => {\n                focusPreventScroll(view.contentDOM);\n                let active = view.root.activeElement;\n                if (active && !active.contains(view.contentDOM))\n                    active.blur();\n            });\n        let mouseSel = view.inputState.mouseSelection;\n        if (mouseSel) {\n            mouseSel.start(event);\n            return mouseSel.dragging === false;\n        }\n    }\n    return false;\n};\nfunction rangeForClick(view, pos, bias, type) {\n    if (type == 1) { // Single click\n        return EditorSelection.cursor(pos, bias);\n    }\n    else if (type == 2) { // Double click\n        return groupAt(view.state, pos, bias);\n    }\n    else { // Triple click\n        let visual = LineView.find(view.docView, pos), line = view.state.doc.lineAt(visual ? visual.posAtEnd : pos);\n        let from = visual ? visual.posAtStart : line.from, to = visual ? visual.posAtEnd : line.to;\n        if (to < view.state.doc.length && to == line.to)\n            to++;\n        return EditorSelection.range(from, to);\n    }\n}\nlet insideY = (y, rect) => y >= rect.top && y <= rect.bottom;\nlet inside = (x, y, rect) => insideY(y, rect) && x >= rect.left && x <= rect.right;\n// Try to determine, for the given coordinates, associated with the\n// given position, whether they are related to the element before or\n// the element after the position.\nfunction findPositionSide(view, pos, x, y) {\n    let line = LineView.find(view.docView, pos);\n    if (!line)\n        return 1;\n    let off = pos - line.posAtStart;\n    // Line boundaries point into the line\n    if (off == 0)\n        return 1;\n    if (off == line.length)\n        return -1;\n    // Positions on top of an element point at that element\n    let before = line.coordsAt(off, -1);\n    if (before && inside(x, y, before))\n        return -1;\n    let after = line.coordsAt(off, 1);\n    if (after && inside(x, y, after))\n        return 1;\n    // This is probably a line wrap point. Pick before if the point is\n    // beside it.\n    return before && insideY(y, before) ? -1 : 1;\n}\nfunction queryPos(view, event) {\n    let pos = view.posAtCoords({ x: event.clientX, y: event.clientY }, false);\n    return { pos, bias: findPositionSide(view, pos, event.clientX, event.clientY) };\n}\nconst BadMouseDetail = browser.ie && browser.ie_version <= 11;\nlet lastMouseDown = null, lastMouseDownCount = 0, lastMouseDownTime = 0;\nfunction getClickType(event) {\n    if (!BadMouseDetail)\n        return event.detail;\n    let last = lastMouseDown, lastTime = lastMouseDownTime;\n    lastMouseDown = event;\n    lastMouseDownTime = Date.now();\n    return lastMouseDownCount = !last || (lastTime > Date.now() - 400 && Math.abs(last.clientX - event.clientX) < 2 &&\n        Math.abs(last.clientY - event.clientY) < 2) ? (lastMouseDownCount + 1) % 3 : 1;\n}\nfunction basicMouseSelection(view, event) {\n    let start = queryPos(view, event), type = getClickType(event);\n    let startSel = view.state.selection;\n    return {\n        update(update) {\n            if (update.docChanged) {\n                start.pos = update.changes.mapPos(start.pos);\n                startSel = startSel.map(update.changes);\n            }\n        },\n        get(event, extend, multiple) {\n            let cur = queryPos(view, event), removed;\n            let range = rangeForClick(view, cur.pos, cur.bias, type);\n            if (start.pos != cur.pos && !extend) {\n                let startRange = rangeForClick(view, start.pos, start.bias, type);\n                let from = Math.min(startRange.from, range.from), to = Math.max(startRange.to, range.to);\n                range = from < range.from ? EditorSelection.range(from, to) : EditorSelection.range(to, from);\n            }\n            if (extend)\n                return startSel.replaceRange(startSel.main.extend(range.from, range.to));\n            else if (multiple && type == 1 && startSel.ranges.length > 1 && (removed = removeRangeAround(startSel, cur.pos)))\n                return removed;\n            else if (multiple)\n                return startSel.addRange(range);\n            else\n                return EditorSelection.create([range]);\n        }\n    };\n}\nfunction removeRangeAround(sel, pos) {\n    for (let i = 0; i < sel.ranges.length; i++) {\n        let { from, to } = sel.ranges[i];\n        if (from <= pos && to >= pos)\n            return EditorSelection.create(sel.ranges.slice(0, i).concat(sel.ranges.slice(i + 1)), sel.mainIndex == i ? 0 : sel.mainIndex - (sel.mainIndex > i ? 1 : 0));\n    }\n    return null;\n}\nhandlers.dragstart = (view, event) => {\n    let { selection: { main: range } } = view.state;\n    if (event.target.draggable) {\n        let cView = view.docView.nearest(event.target);\n        if (cView && cView.isWidget) {\n            let from = cView.posAtStart, to = from + cView.length;\n            if (from >= range.to || to <= range.from)\n                range = EditorSelection.range(from, to);\n        }\n    }\n    let { inputState } = view;\n    if (inputState.mouseSelection)\n        inputState.mouseSelection.dragging = true;\n    inputState.draggedContent = range;\n    if (event.dataTransfer) {\n        event.dataTransfer.setData(\"Text\", view.state.sliceDoc(range.from, range.to));\n        event.dataTransfer.effectAllowed = \"copyMove\";\n    }\n    return false;\n};\nhandlers.dragend = view => {\n    view.inputState.draggedContent = null;\n    return false;\n};\nfunction dropText(view, event, text, direct) {\n    if (!text)\n        return;\n    let dropPos = view.posAtCoords({ x: event.clientX, y: event.clientY }, false);\n    let { draggedContent } = view.inputState;\n    let del = direct && draggedContent && dragMovesSelection(view, event)\n        ? { from: draggedContent.from, to: draggedContent.to } : null;\n    let ins = { from: dropPos, insert: text };\n    let changes = view.state.changes(del ? [del, ins] : ins);\n    view.focus();\n    view.dispatch({\n        changes,\n        selection: { anchor: changes.mapPos(dropPos, -1), head: changes.mapPos(dropPos, 1) },\n        userEvent: del ? \"move.drop\" : \"input.drop\"\n    });\n    view.inputState.draggedContent = null;\n}\nhandlers.drop = (view, event) => {\n    if (!event.dataTransfer)\n        return false;\n    if (view.state.readOnly)\n        return true;\n    let files = event.dataTransfer.files;\n    if (files && files.length) { // For a file drop, read the file's text.\n        let text = Array(files.length), read = 0;\n        let finishFile = () => {\n            if (++read == files.length)\n                dropText(view, event, text.filter(s => s != null).join(view.state.lineBreak), false);\n        };\n        for (let i = 0; i < files.length; i++) {\n            let reader = new FileReader;\n            reader.onerror = finishFile;\n            reader.onload = () => {\n                if (!/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(reader.result))\n                    text[i] = reader.result;\n                finishFile();\n            };\n            reader.readAsText(files[i]);\n        }\n        return true;\n    }\n    else {\n        let text = event.dataTransfer.getData(\"Text\");\n        if (text) {\n            dropText(view, event, text, true);\n            return true;\n        }\n    }\n    return false;\n};\nhandlers.paste = (view, event) => {\n    if (view.state.readOnly)\n        return true;\n    view.observer.flush();\n    let data = brokenClipboardAPI ? null : event.clipboardData;\n    if (data) {\n        doPaste(view, data.getData(\"text/plain\") || data.getData(\"text/uri-list\"));\n        return true;\n    }\n    else {\n        capturePaste(view);\n        return false;\n    }\n};\nfunction captureCopy(view, text) {\n    // The extra wrapper is somehow necessary on IE/Edge to prevent the\n    // content from being mangled when it is put onto the clipboard\n    let parent = view.dom.parentNode;\n    if (!parent)\n        return;\n    let target = parent.appendChild(document.createElement(\"textarea\"));\n    target.style.cssText = \"position: fixed; left: -10000px; top: 10px\";\n    target.value = text;\n    target.focus();\n    target.selectionEnd = text.length;\n    target.selectionStart = 0;\n    setTimeout(() => {\n        target.remove();\n        view.focus();\n    }, 50);\n}\nfunction copiedRange(state) {\n    let content = [], ranges = [], linewise = false;\n    for (let range of state.selection.ranges)\n        if (!range.empty) {\n            content.push(state.sliceDoc(range.from, range.to));\n            ranges.push(range);\n        }\n    if (!content.length) {\n        // Nothing selected, do a line-wise copy\n        let upto = -1;\n        for (let { from } of state.selection.ranges) {\n            let line = state.doc.lineAt(from);\n            if (line.number > upto) {\n                content.push(line.text);\n                ranges.push({ from: line.from, to: Math.min(state.doc.length, line.to + 1) });\n            }\n            upto = line.number;\n        }\n        linewise = true;\n    }\n    return { text: content.join(state.lineBreak), ranges, linewise };\n}\nlet lastLinewiseCopy = null;\nhandlers.copy = handlers.cut = (view, event) => {\n    let { text, ranges, linewise } = copiedRange(view.state);\n    if (!text && !linewise)\n        return false;\n    lastLinewiseCopy = linewise ? text : null;\n    if (event.type == \"cut\" && !view.state.readOnly)\n        view.dispatch({\n            changes: ranges,\n            scrollIntoView: true,\n            userEvent: \"delete.cut\"\n        });\n    let data = brokenClipboardAPI ? null : event.clipboardData;\n    if (data) {\n        data.clearData();\n        data.setData(\"text/plain\", text);\n        return true;\n    }\n    else {\n        captureCopy(view, text);\n        return false;\n    }\n};\nconst isFocusChange = /*@__PURE__*/Annotation.define();\nfunction focusChangeTransaction(state, focus) {\n    let effects = [];\n    for (let getEffect of state.facet(focusChangeEffect)) {\n        let effect = getEffect(state, focus);\n        if (effect)\n            effects.push(effect);\n    }\n    return effects ? state.update({ effects, annotations: isFocusChange.of(true) }) : null;\n}\nfunction updateForFocusChange(view) {\n    setTimeout(() => {\n        let focus = view.hasFocus;\n        if (focus != view.inputState.notifiedFocused) {\n            let tr = focusChangeTransaction(view.state, focus);\n            if (tr)\n                view.dispatch(tr);\n            else\n                view.update([]);\n        }\n    }, 10);\n}\nobservers.focus = view => {\n    view.inputState.lastFocusTime = Date.now();\n    // When focusing reset the scroll position, move it back to where it was\n    if (!view.scrollDOM.scrollTop && (view.inputState.lastScrollTop || view.inputState.lastScrollLeft)) {\n        view.scrollDOM.scrollTop = view.inputState.lastScrollTop;\n        view.scrollDOM.scrollLeft = view.inputState.lastScrollLeft;\n    }\n    updateForFocusChange(view);\n};\nobservers.blur = view => {\n    view.observer.clearSelectionRange();\n    updateForFocusChange(view);\n};\nobservers.compositionstart = observers.compositionupdate = view => {\n    if (view.observer.editContext)\n        return; // Composition handled by edit context\n    if (view.inputState.compositionFirstChange == null)\n        view.inputState.compositionFirstChange = true;\n    if (view.inputState.composing < 0) {\n        // FIXME possibly set a timeout to clear it again on Android\n        view.inputState.composing = 0;\n    }\n};\nobservers.compositionend = view => {\n    if (view.observer.editContext)\n        return; // Composition handled by edit context\n    view.inputState.composing = -1;\n    view.inputState.compositionEndedAt = Date.now();\n    view.inputState.compositionPendingKey = true;\n    view.inputState.compositionPendingChange = view.observer.pendingRecords().length > 0;\n    view.inputState.compositionFirstChange = null;\n    if (browser.chrome && browser.android) {\n        // Delay flushing for a bit on Android because it'll often fire a\n        // bunch of contradictory changes in a row at end of compositon\n        view.observer.flushSoon();\n    }\n    else if (view.inputState.compositionPendingChange) {\n        // If we found pending records, schedule a flush.\n        Promise.resolve().then(() => view.observer.flush());\n    }\n    else {\n        // Otherwise, make sure that, if no changes come in soon, the\n        // composition view is cleared.\n        setTimeout(() => {\n            if (view.inputState.composing < 0 && view.docView.hasComposition)\n                view.update([]);\n        }, 50);\n    }\n};\nobservers.contextmenu = view => {\n    view.inputState.lastContextMenu = Date.now();\n};\nhandlers.beforeinput = (view, event) => {\n    var _a;\n    // Because Chrome Android doesn't fire useful key events, use\n    // beforeinput to detect backspace (and possibly enter and delete,\n    // but those usually don't even seem to fire beforeinput events at\n    // the moment) and fake a key event for it.\n    //\n    // (preventDefault on beforeinput, though supported in the spec,\n    // seems to do nothing at all on Chrome).\n    let pending;\n    if (browser.chrome && browser.android && (pending = PendingKeys.find(key => key.inputType == event.inputType))) {\n        view.observer.delayAndroidKey(pending.key, pending.keyCode);\n        if (pending.key == \"Backspace\" || pending.key == \"Delete\") {\n            let startViewHeight = ((_a = window.visualViewport) === null || _a === void 0 ? void 0 : _a.height) || 0;\n            setTimeout(() => {\n                var _a;\n                // Backspacing near uneditable nodes on Chrome Android sometimes\n                // closes the virtual keyboard. This tries to crudely detect\n                // that and refocus to get it back.\n                if ((((_a = window.visualViewport) === null || _a === void 0 ? void 0 : _a.height) || 0) > startViewHeight + 10 && view.hasFocus) {\n                    view.contentDOM.blur();\n                    view.focus();\n                }\n            }, 100);\n        }\n    }\n    if (browser.ios && event.inputType == \"deleteContentForward\") {\n        // For some reason, DOM changes (and beforeinput) happen _before_\n        // the key event for ctrl-d on iOS when using an external\n        // keyboard.\n        view.observer.flushSoon();\n    }\n    // Safari will occasionally forget to fire compositionend at the end of a dead-key composition\n    if (browser.safari && event.inputType == \"insertText\" && view.inputState.composing >= 0) {\n        setTimeout(() => observers.compositionend(view, event), 20);\n    }\n    return false;\n};\nconst appliedFirefoxHack = /*@__PURE__*/new Set;\n// In Firefox, when cut/copy handlers are added to the document, that\n// somehow avoids a bug where those events aren't fired when the\n// selection is empty. See https://github.com/codemirror/dev/issues/1082\n// and https://bugzilla.mozilla.org/show_bug.cgi?id=995961\nfunction firefoxCopyCutHack(doc) {\n    if (!appliedFirefoxHack.has(doc)) {\n        appliedFirefoxHack.add(doc);\n        doc.addEventListener(\"copy\", () => { });\n        doc.addEventListener(\"cut\", () => { });\n    }\n}\n\nconst wrappingWhiteSpace = [\"pre-wrap\", \"normal\", \"pre-line\", \"break-spaces\"];\nclass HeightOracle {\n    constructor(lineWrapping) {\n        this.lineWrapping = lineWrapping;\n        this.doc = Text.empty;\n        this.heightSamples = {};\n        this.lineHeight = 14; // The height of an entire line (line-height)\n        this.charWidth = 7;\n        this.textHeight = 14; // The height of the actual font (font-size)\n        this.lineLength = 30;\n        // Used to track, during updateHeight, if any actual heights changed\n        this.heightChanged = false;\n    }\n    heightForGap(from, to) {\n        let lines = this.doc.lineAt(to).number - this.doc.lineAt(from).number + 1;\n        if (this.lineWrapping)\n            lines += Math.max(0, Math.ceil(((to - from) - (lines * this.lineLength * 0.5)) / this.lineLength));\n        return this.lineHeight * lines;\n    }\n    heightForLine(length) {\n        if (!this.lineWrapping)\n            return this.lineHeight;\n        let lines = 1 + Math.max(0, Math.ceil((length - this.lineLength) / (this.lineLength - 5)));\n        return lines * this.lineHeight;\n    }\n    setDoc(doc) { this.doc = doc; return this; }\n    mustRefreshForWrapping(whiteSpace) {\n        return (wrappingWhiteSpace.indexOf(whiteSpace) > -1) != this.lineWrapping;\n    }\n    mustRefreshForHeights(lineHeights) {\n        let newHeight = false;\n        for (let i = 0; i < lineHeights.length; i++) {\n            let h = lineHeights[i];\n            if (h < 0) {\n                i++;\n            }\n            else if (!this.heightSamples[Math.floor(h * 10)]) { // Round to .1 pixels\n                newHeight = true;\n                this.heightSamples[Math.floor(h * 10)] = true;\n            }\n        }\n        return newHeight;\n    }\n    refresh(whiteSpace, lineHeight, charWidth, textHeight, lineLength, knownHeights) {\n        let lineWrapping = wrappingWhiteSpace.indexOf(whiteSpace) > -1;\n        let changed = Math.round(lineHeight) != Math.round(this.lineHeight) || this.lineWrapping != lineWrapping;\n        this.lineWrapping = lineWrapping;\n        this.lineHeight = lineHeight;\n        this.charWidth = charWidth;\n        this.textHeight = textHeight;\n        this.lineLength = lineLength;\n        if (changed) {\n            this.heightSamples = {};\n            for (let i = 0; i < knownHeights.length; i++) {\n                let h = knownHeights[i];\n                if (h < 0)\n                    i++;\n                else\n                    this.heightSamples[Math.floor(h * 10)] = true;\n            }\n        }\n        return changed;\n    }\n}\n// This object is used by `updateHeight` to make DOM measurements\n// arrive at the right nides. The `heights` array is a sequence of\n// block heights, starting from position `from`.\nclass MeasuredHeights {\n    constructor(from, heights) {\n        this.from = from;\n        this.heights = heights;\n        this.index = 0;\n    }\n    get more() { return this.index < this.heights.length; }\n}\n/**\nRecord used to represent information about a block-level element\nin the editor view.\n*/\nclass BlockInfo {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The start of the element in the document.\n    */\n    from, \n    /**\n    The length of the element.\n    */\n    length, \n    /**\n    The top position of the element (relative to the top of the\n    document).\n    */\n    top, \n    /**\n    Its height.\n    */\n    height, \n    /**\n    @internal Weird packed field that holds an array of children\n    for composite blocks, a decoration for block widgets, and a\n    number indicating the amount of widget-create line breaks for\n    text blocks.\n    */\n    _content) {\n        this.from = from;\n        this.length = length;\n        this.top = top;\n        this.height = height;\n        this._content = _content;\n    }\n    /**\n    The type of element this is. When querying lines, this may be\n    an array of all the blocks that make up the line.\n    */\n    get type() {\n        return typeof this._content == \"number\" ? BlockType.Text :\n            Array.isArray(this._content) ? this._content : this._content.type;\n    }\n    /**\n    The end of the element as a document position.\n    */\n    get to() { return this.from + this.length; }\n    /**\n    The bottom position of the element.\n    */\n    get bottom() { return this.top + this.height; }\n    /**\n    If this is a widget block, this will return the widget\n    associated with it.\n    */\n    get widget() {\n        return this._content instanceof PointDecoration ? this._content.widget : null;\n    }\n    /**\n    If this is a textblock, this holds the number of line breaks\n    that appear in widgets inside the block.\n    */\n    get widgetLineBreaks() {\n        return typeof this._content == \"number\" ? this._content : 0;\n    }\n    /**\n    @internal\n    */\n    join(other) {\n        let content = (Array.isArray(this._content) ? this._content : [this])\n            .concat(Array.isArray(other._content) ? other._content : [other]);\n        return new BlockInfo(this.from, this.length + other.length, this.top, this.height + other.height, content);\n    }\n}\nvar QueryType = /*@__PURE__*/(function (QueryType) {\n    QueryType[QueryType[\"ByPos\"] = 0] = \"ByPos\";\n    QueryType[QueryType[\"ByHeight\"] = 1] = \"ByHeight\";\n    QueryType[QueryType[\"ByPosNoHeight\"] = 2] = \"ByPosNoHeight\";\nreturn QueryType})(QueryType || (QueryType = {}));\nconst Epsilon = 1e-3;\nclass HeightMap {\n    constructor(length, // The number of characters covered\n    height, // Height of this part of the document\n    flags = 2 /* Flag.Outdated */) {\n        this.length = length;\n        this.height = height;\n        this.flags = flags;\n    }\n    get outdated() { return (this.flags & 2 /* Flag.Outdated */) > 0; }\n    set outdated(value) { this.flags = (value ? 2 /* Flag.Outdated */ : 0) | (this.flags & ~2 /* Flag.Outdated */); }\n    setHeight(oracle, height) {\n        if (this.height != height) {\n            if (Math.abs(this.height - height) > Epsilon)\n                oracle.heightChanged = true;\n            this.height = height;\n        }\n    }\n    // Base case is to replace a leaf node, which simply builds a tree\n    // from the new nodes and returns that (HeightMapBranch and\n    // HeightMapGap override this to actually use from/to)\n    replace(_from, _to, nodes) {\n        return HeightMap.of(nodes);\n    }\n    // Again, these are base cases, and are overridden for branch and gap nodes.\n    decomposeLeft(_to, result) { result.push(this); }\n    decomposeRight(_from, result) { result.push(this); }\n    applyChanges(decorations, oldDoc, oracle, changes) {\n        let me = this, doc = oracle.doc;\n        for (let i = changes.length - 1; i >= 0; i--) {\n            let { fromA, toA, fromB, toB } = changes[i];\n            let start = me.lineAt(fromA, QueryType.ByPosNoHeight, oracle.setDoc(oldDoc), 0, 0);\n            let end = start.to >= toA ? start : me.lineAt(toA, QueryType.ByPosNoHeight, oracle, 0, 0);\n            toB += end.to - toA;\n            toA = end.to;\n            while (i > 0 && start.from <= changes[i - 1].toA) {\n                fromA = changes[i - 1].fromA;\n                fromB = changes[i - 1].fromB;\n                i--;\n                if (fromA < start.from)\n                    start = me.lineAt(fromA, QueryType.ByPosNoHeight, oracle, 0, 0);\n            }\n            fromB += start.from - fromA;\n            fromA = start.from;\n            let nodes = NodeBuilder.build(oracle.setDoc(doc), decorations, fromB, toB);\n            me = me.replace(fromA, toA, nodes);\n        }\n        return me.updateHeight(oracle, 0);\n    }\n    static empty() { return new HeightMapText(0, 0); }\n    // nodes uses null values to indicate the position of line breaks.\n    // There are never line breaks at the start or end of the array, or\n    // two line breaks next to each other, and the array isn't allowed\n    // to be empty (same restrictions as return value from the builder).\n    static of(nodes) {\n        if (nodes.length == 1)\n            return nodes[0];\n        let i = 0, j = nodes.length, before = 0, after = 0;\n        for (;;) {\n            if (i == j) {\n                if (before > after * 2) {\n                    let split = nodes[i - 1];\n                    if (split.break)\n                        nodes.splice(--i, 1, split.left, null, split.right);\n                    else\n                        nodes.splice(--i, 1, split.left, split.right);\n                    j += 1 + split.break;\n                    before -= split.size;\n                }\n                else if (after > before * 2) {\n                    let split = nodes[j];\n                    if (split.break)\n                        nodes.splice(j, 1, split.left, null, split.right);\n                    else\n                        nodes.splice(j, 1, split.left, split.right);\n                    j += 2 + split.break;\n                    after -= split.size;\n                }\n                else {\n                    break;\n                }\n            }\n            else if (before < after) {\n                let next = nodes[i++];\n                if (next)\n                    before += next.size;\n            }\n            else {\n                let next = nodes[--j];\n                if (next)\n                    after += next.size;\n            }\n        }\n        let brk = 0;\n        if (nodes[i - 1] == null) {\n            brk = 1;\n            i--;\n        }\n        else if (nodes[i] == null) {\n            brk = 1;\n            j++;\n        }\n        return new HeightMapBranch(HeightMap.of(nodes.slice(0, i)), brk, HeightMap.of(nodes.slice(j)));\n    }\n}\nHeightMap.prototype.size = 1;\nclass HeightMapBlock extends HeightMap {\n    constructor(length, height, deco) {\n        super(length, height);\n        this.deco = deco;\n    }\n    blockAt(_height, _oracle, top, offset) {\n        return new BlockInfo(offset, this.length, top, this.height, this.deco || 0);\n    }\n    lineAt(_value, _type, oracle, top, offset) {\n        return this.blockAt(0, oracle, top, offset);\n    }\n    forEachLine(from, to, oracle, top, offset, f) {\n        if (from <= offset + this.length && to >= offset)\n            f(this.blockAt(0, oracle, top, offset));\n    }\n    updateHeight(oracle, offset = 0, _force = false, measured) {\n        if (measured && measured.from <= offset && measured.more)\n            this.setHeight(oracle, measured.heights[measured.index++]);\n        this.outdated = false;\n        return this;\n    }\n    toString() { return `block(${this.length})`; }\n}\nclass HeightMapText extends HeightMapBlock {\n    constructor(length, height) {\n        super(length, height, null);\n        this.collapsed = 0; // Amount of collapsed content in the line\n        this.widgetHeight = 0; // Maximum inline widget height\n        this.breaks = 0; // Number of widget-introduced line breaks on the line\n    }\n    blockAt(_height, _oracle, top, offset) {\n        return new BlockInfo(offset, this.length, top, this.height, this.breaks);\n    }\n    replace(_from, _to, nodes) {\n        let node = nodes[0];\n        if (nodes.length == 1 && (node instanceof HeightMapText || node instanceof HeightMapGap && (node.flags & 4 /* Flag.SingleLine */)) &&\n            Math.abs(this.length - node.length) < 10) {\n            if (node instanceof HeightMapGap)\n                node = new HeightMapText(node.length, this.height);\n            else\n                node.height = this.height;\n            if (!this.outdated)\n                node.outdated = false;\n            return node;\n        }\n        else {\n            return HeightMap.of(nodes);\n        }\n    }\n    updateHeight(oracle, offset = 0, force = false, measured) {\n        if (measured && measured.from <= offset && measured.more)\n            this.setHeight(oracle, measured.heights[measured.index++]);\n        else if (force || this.outdated)\n            this.setHeight(oracle, Math.max(this.widgetHeight, oracle.heightForLine(this.length - this.collapsed)) +\n                this.breaks * oracle.lineHeight);\n        this.outdated = false;\n        return this;\n    }\n    toString() {\n        return `line(${this.length}${this.collapsed ? -this.collapsed : \"\"}${this.widgetHeight ? \":\" + this.widgetHeight : \"\"})`;\n    }\n}\nclass HeightMapGap extends HeightMap {\n    constructor(length) { super(length, 0); }\n    heightMetrics(oracle, offset) {\n        let firstLine = oracle.doc.lineAt(offset).number, lastLine = oracle.doc.lineAt(offset + this.length).number;\n        let lines = lastLine - firstLine + 1;\n        let perLine, perChar = 0;\n        if (oracle.lineWrapping) {\n            let totalPerLine = Math.min(this.height, oracle.lineHeight * lines);\n            perLine = totalPerLine / lines;\n            if (this.length > lines + 1)\n                perChar = (this.height - totalPerLine) / (this.length - lines - 1);\n        }\n        else {\n            perLine = this.height / lines;\n        }\n        return { firstLine, lastLine, perLine, perChar };\n    }\n    blockAt(height, oracle, top, offset) {\n        let { firstLine, lastLine, perLine, perChar } = this.heightMetrics(oracle, offset);\n        if (oracle.lineWrapping) {\n            let guess = offset + (height < oracle.lineHeight ? 0\n                : Math.round(Math.max(0, Math.min(1, (height - top) / this.height)) * this.length));\n            let line = oracle.doc.lineAt(guess), lineHeight = perLine + line.length * perChar;\n            let lineTop = Math.max(top, height - lineHeight / 2);\n            return new BlockInfo(line.from, line.length, lineTop, lineHeight, 0);\n        }\n        else {\n            let line = Math.max(0, Math.min(lastLine - firstLine, Math.floor((height - top) / perLine)));\n            let { from, length } = oracle.doc.line(firstLine + line);\n            return new BlockInfo(from, length, top + perLine * line, perLine, 0);\n        }\n    }\n    lineAt(value, type, oracle, top, offset) {\n        if (type == QueryType.ByHeight)\n            return this.blockAt(value, oracle, top, offset);\n        if (type == QueryType.ByPosNoHeight) {\n            let { from, to } = oracle.doc.lineAt(value);\n            return new BlockInfo(from, to - from, 0, 0, 0);\n        }\n        let { firstLine, perLine, perChar } = this.heightMetrics(oracle, offset);\n        let line = oracle.doc.lineAt(value), lineHeight = perLine + line.length * perChar;\n        let linesAbove = line.number - firstLine;\n        let lineTop = top + perLine * linesAbove + perChar * (line.from - offset - linesAbove);\n        return new BlockInfo(line.from, line.length, Math.max(top, Math.min(lineTop, top + this.height - lineHeight)), lineHeight, 0);\n    }\n    forEachLine(from, to, oracle, top, offset, f) {\n        from = Math.max(from, offset);\n        to = Math.min(to, offset + this.length);\n        let { firstLine, perLine, perChar } = this.heightMetrics(oracle, offset);\n        for (let pos = from, lineTop = top; pos <= to;) {\n            let line = oracle.doc.lineAt(pos);\n            if (pos == from) {\n                let linesAbove = line.number - firstLine;\n                lineTop += perLine * linesAbove + perChar * (from - offset - linesAbove);\n            }\n            let lineHeight = perLine + perChar * line.length;\n            f(new BlockInfo(line.from, line.length, lineTop, lineHeight, 0));\n            lineTop += lineHeight;\n            pos = line.to + 1;\n        }\n    }\n    replace(from, to, nodes) {\n        let after = this.length - to;\n        if (after > 0) {\n            let last = nodes[nodes.length - 1];\n            if (last instanceof HeightMapGap)\n                nodes[nodes.length - 1] = new HeightMapGap(last.length + after);\n            else\n                nodes.push(null, new HeightMapGap(after - 1));\n        }\n        if (from > 0) {\n            let first = nodes[0];\n            if (first instanceof HeightMapGap)\n                nodes[0] = new HeightMapGap(from + first.length);\n            else\n                nodes.unshift(new HeightMapGap(from - 1), null);\n        }\n        return HeightMap.of(nodes);\n    }\n    decomposeLeft(to, result) {\n        result.push(new HeightMapGap(to - 1), null);\n    }\n    decomposeRight(from, result) {\n        result.push(null, new HeightMapGap(this.length - from - 1));\n    }\n    updateHeight(oracle, offset = 0, force = false, measured) {\n        let end = offset + this.length;\n        if (measured && measured.from <= offset + this.length && measured.more) {\n            // Fill in part of this gap with measured lines. We know there\n            // can't be widgets or collapsed ranges in those lines, because\n            // they would already have been added to the heightmap (gaps\n            // only contain plain text).\n            let nodes = [], pos = Math.max(offset, measured.from), singleHeight = -1;\n            if (measured.from > offset)\n                nodes.push(new HeightMapGap(measured.from - offset - 1).updateHeight(oracle, offset));\n            while (pos <= end && measured.more) {\n                let len = oracle.doc.lineAt(pos).length;\n                if (nodes.length)\n                    nodes.push(null);\n                let height = measured.heights[measured.index++];\n                if (singleHeight == -1)\n                    singleHeight = height;\n                else if (Math.abs(height - singleHeight) >= Epsilon)\n                    singleHeight = -2;\n                let line = new HeightMapText(len, height);\n                line.outdated = false;\n                nodes.push(line);\n                pos += len + 1;\n            }\n            if (pos <= end)\n                nodes.push(null, new HeightMapGap(end - pos).updateHeight(oracle, pos));\n            let result = HeightMap.of(nodes);\n            if (singleHeight < 0 || Math.abs(result.height - this.height) >= Epsilon ||\n                Math.abs(singleHeight - this.heightMetrics(oracle, offset).perLine) >= Epsilon)\n                oracle.heightChanged = true;\n            return result;\n        }\n        else if (force || this.outdated) {\n            this.setHeight(oracle, oracle.heightForGap(offset, offset + this.length));\n            this.outdated = false;\n        }\n        return this;\n    }\n    toString() { return `gap(${this.length})`; }\n}\nclass HeightMapBranch extends HeightMap {\n    constructor(left, brk, right) {\n        super(left.length + brk + right.length, left.height + right.height, brk | (left.outdated || right.outdated ? 2 /* Flag.Outdated */ : 0));\n        this.left = left;\n        this.right = right;\n        this.size = left.size + right.size;\n    }\n    get break() { return this.flags & 1 /* Flag.Break */; }\n    blockAt(height, oracle, top, offset) {\n        let mid = top + this.left.height;\n        return height < mid ? this.left.blockAt(height, oracle, top, offset)\n            : this.right.blockAt(height, oracle, mid, offset + this.left.length + this.break);\n    }\n    lineAt(value, type, oracle, top, offset) {\n        let rightTop = top + this.left.height, rightOffset = offset + this.left.length + this.break;\n        let left = type == QueryType.ByHeight ? value < rightTop : value < rightOffset;\n        let base = left ? this.left.lineAt(value, type, oracle, top, offset)\n            : this.right.lineAt(value, type, oracle, rightTop, rightOffset);\n        if (this.break || (left ? base.to < rightOffset : base.from > rightOffset))\n            return base;\n        let subQuery = type == QueryType.ByPosNoHeight ? QueryType.ByPosNoHeight : QueryType.ByPos;\n        if (left)\n            return base.join(this.right.lineAt(rightOffset, subQuery, oracle, rightTop, rightOffset));\n        else\n            return this.left.lineAt(rightOffset, subQuery, oracle, top, offset).join(base);\n    }\n    forEachLine(from, to, oracle, top, offset, f) {\n        let rightTop = top + this.left.height, rightOffset = offset + this.left.length + this.break;\n        if (this.break) {\n            if (from < rightOffset)\n                this.left.forEachLine(from, to, oracle, top, offset, f);\n            if (to >= rightOffset)\n                this.right.forEachLine(from, to, oracle, rightTop, rightOffset, f);\n        }\n        else {\n            let mid = this.lineAt(rightOffset, QueryType.ByPos, oracle, top, offset);\n            if (from < mid.from)\n                this.left.forEachLine(from, mid.from - 1, oracle, top, offset, f);\n            if (mid.to >= from && mid.from <= to)\n                f(mid);\n            if (to > mid.to)\n                this.right.forEachLine(mid.to + 1, to, oracle, rightTop, rightOffset, f);\n        }\n    }\n    replace(from, to, nodes) {\n        let rightStart = this.left.length + this.break;\n        if (to < rightStart)\n            return this.balanced(this.left.replace(from, to, nodes), this.right);\n        if (from > this.left.length)\n            return this.balanced(this.left, this.right.replace(from - rightStart, to - rightStart, nodes));\n        let result = [];\n        if (from > 0)\n            this.decomposeLeft(from, result);\n        let left = result.length;\n        for (let node of nodes)\n            result.push(node);\n        if (from > 0)\n            mergeGaps(result, left - 1);\n        if (to < this.length) {\n            let right = result.length;\n            this.decomposeRight(to, result);\n            mergeGaps(result, right);\n        }\n        return HeightMap.of(result);\n    }\n    decomposeLeft(to, result) {\n        let left = this.left.length;\n        if (to <= left)\n            return this.left.decomposeLeft(to, result);\n        result.push(this.left);\n        if (this.break) {\n            left++;\n            if (to >= left)\n                result.push(null);\n        }\n        if (to > left)\n            this.right.decomposeLeft(to - left, result);\n    }\n    decomposeRight(from, result) {\n        let left = this.left.length, right = left + this.break;\n        if (from >= right)\n            return this.right.decomposeRight(from - right, result);\n        if (from < left)\n            this.left.decomposeRight(from, result);\n        if (this.break && from < right)\n            result.push(null);\n        result.push(this.right);\n    }\n    balanced(left, right) {\n        if (left.size > 2 * right.size || right.size > 2 * left.size)\n            return HeightMap.of(this.break ? [left, null, right] : [left, right]);\n        this.left = left;\n        this.right = right;\n        this.height = left.height + right.height;\n        this.outdated = left.outdated || right.outdated;\n        this.size = left.size + right.size;\n        this.length = left.length + this.break + right.length;\n        return this;\n    }\n    updateHeight(oracle, offset = 0, force = false, measured) {\n        let { left, right } = this, rightStart = offset + left.length + this.break, rebalance = null;\n        if (measured && measured.from <= offset + left.length && measured.more)\n            rebalance = left = left.updateHeight(oracle, offset, force, measured);\n        else\n            left.updateHeight(oracle, offset, force);\n        if (measured && measured.from <= rightStart + right.length && measured.more)\n            rebalance = right = right.updateHeight(oracle, rightStart, force, measured);\n        else\n            right.updateHeight(oracle, rightStart, force);\n        if (rebalance)\n            return this.balanced(left, right);\n        this.height = this.left.height + this.right.height;\n        this.outdated = false;\n        return this;\n    }\n    toString() { return this.left + (this.break ? \" \" : \"-\") + this.right; }\n}\nfunction mergeGaps(nodes, around) {\n    let before, after;\n    if (nodes[around] == null &&\n        (before = nodes[around - 1]) instanceof HeightMapGap &&\n        (after = nodes[around + 1]) instanceof HeightMapGap)\n        nodes.splice(around - 1, 3, new HeightMapGap(before.length + 1 + after.length));\n}\nconst relevantWidgetHeight = 5;\nclass NodeBuilder {\n    constructor(pos, oracle) {\n        this.pos = pos;\n        this.oracle = oracle;\n        this.nodes = [];\n        this.lineStart = -1;\n        this.lineEnd = -1;\n        this.covering = null;\n        this.writtenTo = pos;\n    }\n    get isCovered() {\n        return this.covering && this.nodes[this.nodes.length - 1] == this.covering;\n    }\n    span(_from, to) {\n        if (this.lineStart > -1) {\n            let end = Math.min(to, this.lineEnd), last = this.nodes[this.nodes.length - 1];\n            if (last instanceof HeightMapText)\n                last.length += end - this.pos;\n            else if (end > this.pos || !this.isCovered)\n                this.nodes.push(new HeightMapText(end - this.pos, -1));\n            this.writtenTo = end;\n            if (to > end) {\n                this.nodes.push(null);\n                this.writtenTo++;\n                this.lineStart = -1;\n            }\n        }\n        this.pos = to;\n    }\n    point(from, to, deco) {\n        if (from < to || deco.heightRelevant) {\n            let height = deco.widget ? deco.widget.estimatedHeight : 0;\n            let breaks = deco.widget ? deco.widget.lineBreaks : 0;\n            if (height < 0)\n                height = this.oracle.lineHeight;\n            let len = to - from;\n            if (deco.block) {\n                this.addBlock(new HeightMapBlock(len, height, deco));\n            }\n            else if (len || breaks || height >= relevantWidgetHeight) {\n                this.addLineDeco(height, breaks, len);\n            }\n        }\n        else if (to > from) {\n            this.span(from, to);\n        }\n        if (this.lineEnd > -1 && this.lineEnd < this.pos)\n            this.lineEnd = this.oracle.doc.lineAt(this.pos).to;\n    }\n    enterLine() {\n        if (this.lineStart > -1)\n            return;\n        let { from, to } = this.oracle.doc.lineAt(this.pos);\n        this.lineStart = from;\n        this.lineEnd = to;\n        if (this.writtenTo < from) {\n            if (this.writtenTo < from - 1 || this.nodes[this.nodes.length - 1] == null)\n                this.nodes.push(this.blankContent(this.writtenTo, from - 1));\n            this.nodes.push(null);\n        }\n        if (this.pos > from)\n            this.nodes.push(new HeightMapText(this.pos - from, -1));\n        this.writtenTo = this.pos;\n    }\n    blankContent(from, to) {\n        let gap = new HeightMapGap(to - from);\n        if (this.oracle.doc.lineAt(from).to == to)\n            gap.flags |= 4 /* Flag.SingleLine */;\n        return gap;\n    }\n    ensureLine() {\n        this.enterLine();\n        let last = this.nodes.length ? this.nodes[this.nodes.length - 1] : null;\n        if (last instanceof HeightMapText)\n            return last;\n        let line = new HeightMapText(0, -1);\n        this.nodes.push(line);\n        return line;\n    }\n    addBlock(block) {\n        this.enterLine();\n        let deco = block.deco;\n        if (deco && deco.startSide > 0 && !this.isCovered)\n            this.ensureLine();\n        this.nodes.push(block);\n        this.writtenTo = this.pos = this.pos + block.length;\n        if (deco && deco.endSide > 0)\n            this.covering = block;\n    }\n    addLineDeco(height, breaks, length) {\n        let line = this.ensureLine();\n        line.length += length;\n        line.collapsed += length;\n        line.widgetHeight = Math.max(line.widgetHeight, height);\n        line.breaks += breaks;\n        this.writtenTo = this.pos = this.pos + length;\n    }\n    finish(from) {\n        let last = this.nodes.length == 0 ? null : this.nodes[this.nodes.length - 1];\n        if (this.lineStart > -1 && !(last instanceof HeightMapText) && !this.isCovered)\n            this.nodes.push(new HeightMapText(0, -1));\n        else if (this.writtenTo < this.pos || last == null)\n            this.nodes.push(this.blankContent(this.writtenTo, this.pos));\n        let pos = from;\n        for (let node of this.nodes) {\n            if (node instanceof HeightMapText)\n                node.updateHeight(this.oracle, pos);\n            pos += node ? node.length : 1;\n        }\n        return this.nodes;\n    }\n    // Always called with a region that on both sides either stretches\n    // to a line break or the end of the document.\n    // The returned array uses null to indicate line breaks, but never\n    // starts or ends in a line break, or has multiple line breaks next\n    // to each other.\n    static build(oracle, decorations, from, to) {\n        let builder = new NodeBuilder(from, oracle);\n        RangeSet.spans(decorations, from, to, builder, 0);\n        return builder.finish(from);\n    }\n}\nfunction heightRelevantDecoChanges(a, b, diff) {\n    let comp = new DecorationComparator;\n    RangeSet.compare(a, b, diff, comp, 0);\n    return comp.changes;\n}\nclass DecorationComparator {\n    constructor() {\n        this.changes = [];\n    }\n    compareRange() { }\n    comparePoint(from, to, a, b) {\n        if (from < to || a && a.heightRelevant || b && b.heightRelevant)\n            addRange(from, to, this.changes, 5);\n    }\n}\n\nfunction visiblePixelRange(dom, paddingTop) {\n    let rect = dom.getBoundingClientRect();\n    let doc = dom.ownerDocument, win = doc.defaultView || window;\n    let left = Math.max(0, rect.left), right = Math.min(win.innerWidth, rect.right);\n    let top = Math.max(0, rect.top), bottom = Math.min(win.innerHeight, rect.bottom);\n    for (let parent = dom.parentNode; parent && parent != doc.body;) {\n        if (parent.nodeType == 1) {\n            let elt = parent;\n            let style = window.getComputedStyle(elt);\n            if ((elt.scrollHeight > elt.clientHeight || elt.scrollWidth > elt.clientWidth) &&\n                style.overflow != \"visible\") {\n                let parentRect = elt.getBoundingClientRect();\n                left = Math.max(left, parentRect.left);\n                right = Math.min(right, parentRect.right);\n                top = Math.max(top, parentRect.top);\n                bottom = parent == dom.parentNode ? parentRect.bottom : Math.min(bottom, parentRect.bottom);\n            }\n            parent = style.position == \"absolute\" || style.position == \"fixed\" ? elt.offsetParent : elt.parentNode;\n        }\n        else if (parent.nodeType == 11) { // Shadow root\n            parent = parent.host;\n        }\n        else {\n            break;\n        }\n    }\n    return { left: left - rect.left, right: Math.max(left, right) - rect.left,\n        top: top - (rect.top + paddingTop), bottom: Math.max(top, bottom) - (rect.top + paddingTop) };\n}\nfunction fullPixelRange(dom, paddingTop) {\n    let rect = dom.getBoundingClientRect();\n    return { left: 0, right: rect.right - rect.left,\n        top: paddingTop, bottom: rect.bottom - (rect.top + paddingTop) };\n}\n// Line gaps are placeholder widgets used to hide pieces of overlong\n// lines within the viewport, as a kludge to keep the editor\n// responsive when a ridiculously long line is loaded into it.\nclass LineGap {\n    constructor(from, to, size) {\n        this.from = from;\n        this.to = to;\n        this.size = size;\n    }\n    static same(a, b) {\n        if (a.length != b.length)\n            return false;\n        for (let i = 0; i < a.length; i++) {\n            let gA = a[i], gB = b[i];\n            if (gA.from != gB.from || gA.to != gB.to || gA.size != gB.size)\n                return false;\n        }\n        return true;\n    }\n    draw(viewState, wrapping) {\n        return Decoration.replace({\n            widget: new LineGapWidget(this.size * (wrapping ? viewState.scaleY : viewState.scaleX), wrapping)\n        }).range(this.from, this.to);\n    }\n}\nclass LineGapWidget extends WidgetType {\n    constructor(size, vertical) {\n        super();\n        this.size = size;\n        this.vertical = vertical;\n    }\n    eq(other) { return other.size == this.size && other.vertical == this.vertical; }\n    toDOM() {\n        let elt = document.createElement(\"div\");\n        if (this.vertical) {\n            elt.style.height = this.size + \"px\";\n        }\n        else {\n            elt.style.width = this.size + \"px\";\n            elt.style.height = \"2px\";\n            elt.style.display = \"inline-block\";\n        }\n        return elt;\n    }\n    get estimatedHeight() { return this.vertical ? this.size : -1; }\n}\nclass ViewState {\n    constructor(state) {\n        this.state = state;\n        // These are contentDOM-local coordinates\n        this.pixelViewport = { left: 0, right: window.innerWidth, top: 0, bottom: 0 };\n        this.inView = true;\n        this.paddingTop = 0; // Padding above the document, scaled\n        this.paddingBottom = 0; // Padding below the document, scaled\n        this.contentDOMWidth = 0; // contentDOM.getBoundingClientRect().width\n        this.contentDOMHeight = 0; // contentDOM.getBoundingClientRect().height\n        this.editorHeight = 0; // scrollDOM.clientHeight, unscaled\n        this.editorWidth = 0; // scrollDOM.clientWidth, unscaled\n        this.scrollTop = 0; // Last seen scrollDOM.scrollTop, scaled\n        this.scrolledToBottom = false;\n        // The CSS-transformation scale of the editor (transformed size /\n        // concrete size)\n        this.scaleX = 1;\n        this.scaleY = 1;\n        // The vertical position (document-relative) to which to anchor the\n        // scroll position. -1 means anchor to the end of the document.\n        this.scrollAnchorPos = 0;\n        // The height at the anchor position. Set by the DOM update phase.\n        // -1 means no height available.\n        this.scrollAnchorHeight = -1;\n        // See VP.MaxDOMHeight\n        this.scaler = IdScaler;\n        this.scrollTarget = null;\n        // Briefly set to true when printing, to disable viewport limiting\n        this.printing = false;\n        // Flag set when editor content was redrawn, so that the next\n        // measure stage knows it must read DOM layout\n        this.mustMeasureContent = true;\n        this.defaultTextDirection = Direction.LTR;\n        this.visibleRanges = [];\n        // Cursor 'assoc' is only significant when the cursor is on a line\n        // wrap point, where it must stick to the character that it is\n        // associated with. Since browsers don't provide a reasonable\n        // interface to set or query this, when a selection is set that\n        // might cause this to be significant, this flag is set. The next\n        // measure phase will check whether the cursor is on a line-wrapping\n        // boundary and, if so, reset it to make sure it is positioned in\n        // the right place.\n        this.mustEnforceCursorAssoc = false;\n        let guessWrapping = state.facet(contentAttributes).some(v => typeof v != \"function\" && v.class == \"cm-lineWrapping\");\n        this.heightOracle = new HeightOracle(guessWrapping);\n        this.stateDeco = state.facet(decorations).filter(d => typeof d != \"function\");\n        this.heightMap = HeightMap.empty().applyChanges(this.stateDeco, Text.empty, this.heightOracle.setDoc(state.doc), [new ChangedRange(0, 0, 0, state.doc.length)]);\n        for (let i = 0; i < 2; i++) {\n            this.viewport = this.getViewport(0, null);\n            if (!this.updateForViewport())\n                break;\n        }\n        this.updateViewportLines();\n        this.lineGaps = this.ensureLineGaps([]);\n        this.lineGapDeco = Decoration.set(this.lineGaps.map(gap => gap.draw(this, false)));\n        this.computeVisibleRanges();\n    }\n    updateForViewport() {\n        let viewports = [this.viewport], { main } = this.state.selection;\n        for (let i = 0; i <= 1; i++) {\n            let pos = i ? main.head : main.anchor;\n            if (!viewports.some(({ from, to }) => pos >= from && pos <= to)) {\n                let { from, to } = this.lineBlockAt(pos);\n                viewports.push(new Viewport(from, to));\n            }\n        }\n        this.viewports = viewports.sort((a, b) => a.from - b.from);\n        return this.updateScaler();\n    }\n    updateScaler() {\n        let scaler = this.scaler;\n        this.scaler = this.heightMap.height <= 7000000 /* VP.MaxDOMHeight */ ? IdScaler :\n            new BigScaler(this.heightOracle, this.heightMap, this.viewports);\n        return scaler.eq(this.scaler) ? 0 : 2 /* UpdateFlag.Height */;\n    }\n    updateViewportLines() {\n        this.viewportLines = [];\n        this.heightMap.forEachLine(this.viewport.from, this.viewport.to, this.heightOracle.setDoc(this.state.doc), 0, 0, block => {\n            this.viewportLines.push(scaleBlock(block, this.scaler));\n        });\n    }\n    update(update, scrollTarget = null) {\n        this.state = update.state;\n        let prevDeco = this.stateDeco;\n        this.stateDeco = this.state.facet(decorations).filter(d => typeof d != \"function\");\n        let contentChanges = update.changedRanges;\n        let heightChanges = ChangedRange.extendWithRanges(contentChanges, heightRelevantDecoChanges(prevDeco, this.stateDeco, update ? update.changes : ChangeSet.empty(this.state.doc.length)));\n        let prevHeight = this.heightMap.height;\n        let scrollAnchor = this.scrolledToBottom ? null : this.scrollAnchorAt(this.scrollTop);\n        this.heightMap = this.heightMap.applyChanges(this.stateDeco, update.startState.doc, this.heightOracle.setDoc(this.state.doc), heightChanges);\n        if (this.heightMap.height != prevHeight)\n            update.flags |= 2 /* UpdateFlag.Height */;\n        if (scrollAnchor) {\n            this.scrollAnchorPos = update.changes.mapPos(scrollAnchor.from, -1);\n            this.scrollAnchorHeight = scrollAnchor.top;\n        }\n        else {\n            this.scrollAnchorPos = -1;\n            this.scrollAnchorHeight = this.heightMap.height;\n        }\n        let viewport = heightChanges.length ? this.mapViewport(this.viewport, update.changes) : this.viewport;\n        if (scrollTarget && (scrollTarget.range.head < viewport.from || scrollTarget.range.head > viewport.to) ||\n            !this.viewportIsAppropriate(viewport))\n            viewport = this.getViewport(0, scrollTarget);\n        let viewportChange = viewport.from != this.viewport.from || viewport.to != this.viewport.to;\n        this.viewport = viewport;\n        update.flags |= this.updateForViewport();\n        if (viewportChange || !update.changes.empty || (update.flags & 2 /* UpdateFlag.Height */))\n            this.updateViewportLines();\n        if (this.lineGaps.length || this.viewport.to - this.viewport.from > (2000 /* LG.Margin */ << 1))\n            this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps, update.changes)));\n        update.flags |= this.computeVisibleRanges();\n        if (scrollTarget)\n            this.scrollTarget = scrollTarget;\n        if (!this.mustEnforceCursorAssoc && update.selectionSet && update.view.lineWrapping &&\n            update.state.selection.main.empty && update.state.selection.main.assoc &&\n            !update.state.facet(nativeSelectionHidden))\n            this.mustEnforceCursorAssoc = true;\n    }\n    measure(view) {\n        let dom = view.contentDOM, style = window.getComputedStyle(dom);\n        let oracle = this.heightOracle;\n        let whiteSpace = style.whiteSpace;\n        this.defaultTextDirection = style.direction == \"rtl\" ? Direction.RTL : Direction.LTR;\n        let refresh = this.heightOracle.mustRefreshForWrapping(whiteSpace);\n        let domRect = dom.getBoundingClientRect();\n        let measureContent = refresh || this.mustMeasureContent || this.contentDOMHeight != domRect.height;\n        this.contentDOMHeight = domRect.height;\n        this.mustMeasureContent = false;\n        let result = 0, bias = 0;\n        if (domRect.width && domRect.height) {\n            let { scaleX, scaleY } = getScale(dom, domRect);\n            if (scaleX > .005 && Math.abs(this.scaleX - scaleX) > .005 ||\n                scaleY > .005 && Math.abs(this.scaleY - scaleY) > .005) {\n                this.scaleX = scaleX;\n                this.scaleY = scaleY;\n                result |= 8 /* UpdateFlag.Geometry */;\n                refresh = measureContent = true;\n            }\n        }\n        // Vertical padding\n        let paddingTop = (parseInt(style.paddingTop) || 0) * this.scaleY;\n        let paddingBottom = (parseInt(style.paddingBottom) || 0) * this.scaleY;\n        if (this.paddingTop != paddingTop || this.paddingBottom != paddingBottom) {\n            this.paddingTop = paddingTop;\n            this.paddingBottom = paddingBottom;\n            result |= 8 /* UpdateFlag.Geometry */ | 2 /* UpdateFlag.Height */;\n        }\n        if (this.editorWidth != view.scrollDOM.clientWidth) {\n            if (oracle.lineWrapping)\n                measureContent = true;\n            this.editorWidth = view.scrollDOM.clientWidth;\n            result |= 8 /* UpdateFlag.Geometry */;\n        }\n        let scrollTop = view.scrollDOM.scrollTop * this.scaleY;\n        if (this.scrollTop != scrollTop) {\n            this.scrollAnchorHeight = -1;\n            this.scrollTop = scrollTop;\n        }\n        this.scrolledToBottom = isScrolledToBottom(view.scrollDOM);\n        // Pixel viewport\n        let pixelViewport = (this.printing ? fullPixelRange : visiblePixelRange)(dom, this.paddingTop);\n        let dTop = pixelViewport.top - this.pixelViewport.top, dBottom = pixelViewport.bottom - this.pixelViewport.bottom;\n        this.pixelViewport = pixelViewport;\n        let inView = this.pixelViewport.bottom > this.pixelViewport.top && this.pixelViewport.right > this.pixelViewport.left;\n        if (inView != this.inView) {\n            this.inView = inView;\n            if (inView)\n                measureContent = true;\n        }\n        if (!this.inView && !this.scrollTarget)\n            return 0;\n        let contentWidth = domRect.width;\n        if (this.contentDOMWidth != contentWidth || this.editorHeight != view.scrollDOM.clientHeight) {\n            this.contentDOMWidth = domRect.width;\n            this.editorHeight = view.scrollDOM.clientHeight;\n            result |= 8 /* UpdateFlag.Geometry */;\n        }\n        if (measureContent) {\n            let lineHeights = view.docView.measureVisibleLineHeights(this.viewport);\n            if (oracle.mustRefreshForHeights(lineHeights))\n                refresh = true;\n            if (refresh || oracle.lineWrapping && Math.abs(contentWidth - this.contentDOMWidth) > oracle.charWidth) {\n                let { lineHeight, charWidth, textHeight } = view.docView.measureTextSize();\n                refresh = lineHeight > 0 && oracle.refresh(whiteSpace, lineHeight, charWidth, textHeight, contentWidth / charWidth, lineHeights);\n                if (refresh) {\n                    view.docView.minWidth = 0;\n                    result |= 8 /* UpdateFlag.Geometry */;\n                }\n            }\n            if (dTop > 0 && dBottom > 0)\n                bias = Math.max(dTop, dBottom);\n            else if (dTop < 0 && dBottom < 0)\n                bias = Math.min(dTop, dBottom);\n            oracle.heightChanged = false;\n            for (let vp of this.viewports) {\n                let heights = vp.from == this.viewport.from ? lineHeights : view.docView.measureVisibleLineHeights(vp);\n                this.heightMap = (refresh ? HeightMap.empty().applyChanges(this.stateDeco, Text.empty, this.heightOracle, [new ChangedRange(0, 0, 0, view.state.doc.length)]) : this.heightMap).updateHeight(oracle, 0, refresh, new MeasuredHeights(vp.from, heights));\n            }\n            if (oracle.heightChanged)\n                result |= 2 /* UpdateFlag.Height */;\n        }\n        let viewportChange = !this.viewportIsAppropriate(this.viewport, bias) ||\n            this.scrollTarget && (this.scrollTarget.range.head < this.viewport.from ||\n                this.scrollTarget.range.head > this.viewport.to);\n        if (viewportChange) {\n            if (result & 2 /* UpdateFlag.Height */)\n                result |= this.updateScaler();\n            this.viewport = this.getViewport(bias, this.scrollTarget);\n            result |= this.updateForViewport();\n        }\n        if ((result & 2 /* UpdateFlag.Height */) || viewportChange)\n            this.updateViewportLines();\n        if (this.lineGaps.length || this.viewport.to - this.viewport.from > (2000 /* LG.Margin */ << 1))\n            this.updateLineGaps(this.ensureLineGaps(refresh ? [] : this.lineGaps, view));\n        result |= this.computeVisibleRanges();\n        if (this.mustEnforceCursorAssoc) {\n            this.mustEnforceCursorAssoc = false;\n            // This is done in the read stage, because moving the selection\n            // to a line end is going to trigger a layout anyway, so it\n            // can't be a pure write. It should be rare that it does any\n            // writing.\n            view.docView.enforceCursorAssoc();\n        }\n        return result;\n    }\n    get visibleTop() { return this.scaler.fromDOM(this.pixelViewport.top); }\n    get visibleBottom() { return this.scaler.fromDOM(this.pixelViewport.bottom); }\n    getViewport(bias, scrollTarget) {\n        // This will divide VP.Margin between the top and the\n        // bottom, depending on the bias (the change in viewport position\n        // since the last update). It'll hold a number between 0 and 1\n        let marginTop = 0.5 - Math.max(-0.5, Math.min(0.5, bias / 1000 /* VP.Margin */ / 2));\n        let map = this.heightMap, oracle = this.heightOracle;\n        let { visibleTop, visibleBottom } = this;\n        let viewport = new Viewport(map.lineAt(visibleTop - marginTop * 1000 /* VP.Margin */, QueryType.ByHeight, oracle, 0, 0).from, map.lineAt(visibleBottom + (1 - marginTop) * 1000 /* VP.Margin */, QueryType.ByHeight, oracle, 0, 0).to);\n        // If scrollTarget is given, make sure the viewport includes that position\n        if (scrollTarget) {\n            let { head } = scrollTarget.range;\n            if (head < viewport.from || head > viewport.to) {\n                let viewHeight = Math.min(this.editorHeight, this.pixelViewport.bottom - this.pixelViewport.top);\n                let block = map.lineAt(head, QueryType.ByPos, oracle, 0, 0), topPos;\n                if (scrollTarget.y == \"center\")\n                    topPos = (block.top + block.bottom) / 2 - viewHeight / 2;\n                else if (scrollTarget.y == \"start\" || scrollTarget.y == \"nearest\" && head < viewport.from)\n                    topPos = block.top;\n                else\n                    topPos = block.bottom - viewHeight;\n                viewport = new Viewport(map.lineAt(topPos - 1000 /* VP.Margin */ / 2, QueryType.ByHeight, oracle, 0, 0).from, map.lineAt(topPos + viewHeight + 1000 /* VP.Margin */ / 2, QueryType.ByHeight, oracle, 0, 0).to);\n            }\n        }\n        return viewport;\n    }\n    mapViewport(viewport, changes) {\n        let from = changes.mapPos(viewport.from, -1), to = changes.mapPos(viewport.to, 1);\n        return new Viewport(this.heightMap.lineAt(from, QueryType.ByPos, this.heightOracle, 0, 0).from, this.heightMap.lineAt(to, QueryType.ByPos, this.heightOracle, 0, 0).to);\n    }\n    // Checks if a given viewport covers the visible part of the\n    // document and not too much beyond that.\n    viewportIsAppropriate({ from, to }, bias = 0) {\n        if (!this.inView)\n            return true;\n        let { top } = this.heightMap.lineAt(from, QueryType.ByPos, this.heightOracle, 0, 0);\n        let { bottom } = this.heightMap.lineAt(to, QueryType.ByPos, this.heightOracle, 0, 0);\n        let { visibleTop, visibleBottom } = this;\n        return (from == 0 || top <= visibleTop - Math.max(10 /* VP.MinCoverMargin */, Math.min(-bias, 250 /* VP.MaxCoverMargin */))) &&\n            (to == this.state.doc.length ||\n                bottom >= visibleBottom + Math.max(10 /* VP.MinCoverMargin */, Math.min(bias, 250 /* VP.MaxCoverMargin */))) &&\n            (top > visibleTop - 2 * 1000 /* VP.Margin */ && bottom < visibleBottom + 2 * 1000 /* VP.Margin */);\n    }\n    mapLineGaps(gaps, changes) {\n        if (!gaps.length || changes.empty)\n            return gaps;\n        let mapped = [];\n        for (let gap of gaps)\n            if (!changes.touchesRange(gap.from, gap.to))\n                mapped.push(new LineGap(changes.mapPos(gap.from), changes.mapPos(gap.to), gap.size));\n        return mapped;\n    }\n    // Computes positions in the viewport where the start or end of a\n    // line should be hidden, trying to reuse existing line gaps when\n    // appropriate to avoid unneccesary redraws.\n    // Uses crude character-counting for the positioning and sizing,\n    // since actual DOM coordinates aren't always available and\n    // predictable. Relies on generous margins (see LG.Margin) to hide\n    // the artifacts this might produce from the user.\n    ensureLineGaps(current, mayMeasure) {\n        let wrapping = this.heightOracle.lineWrapping;\n        let margin = wrapping ? 10000 /* LG.MarginWrap */ : 2000 /* LG.Margin */, halfMargin = margin >> 1, doubleMargin = margin << 1;\n        // The non-wrapping logic won't work at all in predominantly right-to-left text.\n        if (this.defaultTextDirection != Direction.LTR && !wrapping)\n            return [];\n        let gaps = [];\n        let addGap = (from, to, line, structure) => {\n            if (to - from < halfMargin)\n                return;\n            let sel = this.state.selection.main, avoid = [sel.from];\n            if (!sel.empty)\n                avoid.push(sel.to);\n            for (let pos of avoid) {\n                if (pos > from && pos < to) {\n                    addGap(from, pos - 10 /* LG.SelectionMargin */, line, structure);\n                    addGap(pos + 10 /* LG.SelectionMargin */, to, line, structure);\n                    return;\n                }\n            }\n            let gap = find(current, gap => gap.from >= line.from && gap.to <= line.to &&\n                Math.abs(gap.from - from) < halfMargin && Math.abs(gap.to - to) < halfMargin &&\n                !avoid.some(pos => gap.from < pos && gap.to > pos));\n            if (!gap) {\n                // When scrolling down, snap gap ends to line starts to avoid shifts in wrapping\n                if (to < line.to && mayMeasure && wrapping &&\n                    mayMeasure.visibleRanges.some(r => r.from <= to && r.to >= to)) {\n                    let lineStart = mayMeasure.moveToLineBoundary(EditorSelection.cursor(to), false, true).head;\n                    if (lineStart > from)\n                        to = lineStart;\n                }\n                gap = new LineGap(from, to, this.gapSize(line, from, to, structure));\n            }\n            gaps.push(gap);\n        };\n        let checkLine = (line) => {\n            if (line.length < doubleMargin || line.type != BlockType.Text)\n                return;\n            let structure = lineStructure(line.from, line.to, this.stateDeco);\n            if (structure.total < doubleMargin)\n                return;\n            let target = this.scrollTarget ? this.scrollTarget.range.head : null;\n            let viewFrom, viewTo;\n            if (wrapping) {\n                let marginHeight = (margin / this.heightOracle.lineLength) * this.heightOracle.lineHeight;\n                let top, bot;\n                if (target != null) {\n                    let targetFrac = findFraction(structure, target);\n                    let spaceFrac = ((this.visibleBottom - this.visibleTop) / 2 + marginHeight) / line.height;\n                    top = targetFrac - spaceFrac;\n                    bot = targetFrac + spaceFrac;\n                }\n                else {\n                    top = (this.visibleTop - line.top - marginHeight) / line.height;\n                    bot = (this.visibleBottom - line.top + marginHeight) / line.height;\n                }\n                viewFrom = findPosition(structure, top);\n                viewTo = findPosition(structure, bot);\n            }\n            else {\n                let totalWidth = structure.total * this.heightOracle.charWidth;\n                let marginWidth = margin * this.heightOracle.charWidth;\n                let left, right;\n                if (target != null) {\n                    let targetFrac = findFraction(structure, target);\n                    let spaceFrac = ((this.pixelViewport.right - this.pixelViewport.left) / 2 + marginWidth) / totalWidth;\n                    left = targetFrac - spaceFrac;\n                    right = targetFrac + spaceFrac;\n                }\n                else {\n                    left = (this.pixelViewport.left - marginWidth) / totalWidth;\n                    right = (this.pixelViewport.right + marginWidth) / totalWidth;\n                }\n                viewFrom = findPosition(structure, left);\n                viewTo = findPosition(structure, right);\n            }\n            if (viewFrom > line.from)\n                addGap(line.from, viewFrom, line, structure);\n            if (viewTo < line.to)\n                addGap(viewTo, line.to, line, structure);\n        };\n        for (let line of this.viewportLines) {\n            if (Array.isArray(line.type))\n                line.type.forEach(checkLine);\n            else\n                checkLine(line);\n        }\n        return gaps;\n    }\n    gapSize(line, from, to, structure) {\n        let fraction = findFraction(structure, to) - findFraction(structure, from);\n        if (this.heightOracle.lineWrapping) {\n            return line.height * fraction;\n        }\n        else {\n            return structure.total * this.heightOracle.charWidth * fraction;\n        }\n    }\n    updateLineGaps(gaps) {\n        if (!LineGap.same(gaps, this.lineGaps)) {\n            this.lineGaps = gaps;\n            this.lineGapDeco = Decoration.set(gaps.map(gap => gap.draw(this, this.heightOracle.lineWrapping)));\n        }\n    }\n    computeVisibleRanges() {\n        let deco = this.stateDeco;\n        if (this.lineGaps.length)\n            deco = deco.concat(this.lineGapDeco);\n        let ranges = [];\n        RangeSet.spans(deco, this.viewport.from, this.viewport.to, {\n            span(from, to) { ranges.push({ from, to }); },\n            point() { }\n        }, 20);\n        let changed = ranges.length != this.visibleRanges.length ||\n            this.visibleRanges.some((r, i) => r.from != ranges[i].from || r.to != ranges[i].to);\n        this.visibleRanges = ranges;\n        return changed ? 4 /* UpdateFlag.Viewport */ : 0;\n    }\n    lineBlockAt(pos) {\n        return (pos >= this.viewport.from && pos <= this.viewport.to &&\n            this.viewportLines.find(b => b.from <= pos && b.to >= pos)) ||\n            scaleBlock(this.heightMap.lineAt(pos, QueryType.ByPos, this.heightOracle, 0, 0), this.scaler);\n    }\n    lineBlockAtHeight(height) {\n        return (height >= this.viewportLines[0].top && height <= this.viewportLines[this.viewportLines.length - 1].bottom &&\n            this.viewportLines.find(l => l.top <= height && l.bottom >= height)) ||\n            scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(height), QueryType.ByHeight, this.heightOracle, 0, 0), this.scaler);\n    }\n    scrollAnchorAt(scrollTop) {\n        let block = this.lineBlockAtHeight(scrollTop + 8);\n        return block.from >= this.viewport.from || this.viewportLines[0].top - scrollTop > 200 ? block : this.viewportLines[0];\n    }\n    elementAtHeight(height) {\n        return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(height), this.heightOracle, 0, 0), this.scaler);\n    }\n    get docHeight() {\n        return this.scaler.toDOM(this.heightMap.height);\n    }\n    get contentHeight() {\n        return this.docHeight + this.paddingTop + this.paddingBottom;\n    }\n}\nclass Viewport {\n    constructor(from, to) {\n        this.from = from;\n        this.to = to;\n    }\n}\nfunction lineStructure(from, to, stateDeco) {\n    let ranges = [], pos = from, total = 0;\n    RangeSet.spans(stateDeco, from, to, {\n        span() { },\n        point(from, to) {\n            if (from > pos) {\n                ranges.push({ from: pos, to: from });\n                total += from - pos;\n            }\n            pos = to;\n        }\n    }, 20); // We're only interested in collapsed ranges of a significant size\n    if (pos < to) {\n        ranges.push({ from: pos, to });\n        total += to - pos;\n    }\n    return { total, ranges };\n}\nfunction findPosition({ total, ranges }, ratio) {\n    if (ratio <= 0)\n        return ranges[0].from;\n    if (ratio >= 1)\n        return ranges[ranges.length - 1].to;\n    let dist = Math.floor(total * ratio);\n    for (let i = 0;; i++) {\n        let { from, to } = ranges[i], size = to - from;\n        if (dist <= size)\n            return from + dist;\n        dist -= size;\n    }\n}\nfunction findFraction(structure, pos) {\n    let counted = 0;\n    for (let { from, to } of structure.ranges) {\n        if (pos <= to) {\n            counted += pos - from;\n            break;\n        }\n        counted += to - from;\n    }\n    return counted / structure.total;\n}\nfunction find(array, f) {\n    for (let val of array)\n        if (f(val))\n            return val;\n    return undefined;\n}\n// Don't scale when the document height is within the range of what\n// the DOM can handle.\nconst IdScaler = {\n    toDOM(n) { return n; },\n    fromDOM(n) { return n; },\n    scale: 1,\n    eq(other) { return other == this; }\n};\n// When the height is too big (> VP.MaxDOMHeight), scale down the\n// regions outside the viewports so that the total height is\n// VP.MaxDOMHeight.\nclass BigScaler {\n    constructor(oracle, heightMap, viewports) {\n        let vpHeight = 0, base = 0, domBase = 0;\n        this.viewports = viewports.map(({ from, to }) => {\n            let top = heightMap.lineAt(from, QueryType.ByPos, oracle, 0, 0).top;\n            let bottom = heightMap.lineAt(to, QueryType.ByPos, oracle, 0, 0).bottom;\n            vpHeight += bottom - top;\n            return { from, to, top, bottom, domTop: 0, domBottom: 0 };\n        });\n        this.scale = (7000000 /* VP.MaxDOMHeight */ - vpHeight) / (heightMap.height - vpHeight);\n        for (let obj of this.viewports) {\n            obj.domTop = domBase + (obj.top - base) * this.scale;\n            domBase = obj.domBottom = obj.domTop + (obj.bottom - obj.top);\n            base = obj.bottom;\n        }\n    }\n    toDOM(n) {\n        for (let i = 0, base = 0, domBase = 0;; i++) {\n            let vp = i < this.viewports.length ? this.viewports[i] : null;\n            if (!vp || n < vp.top)\n                return domBase + (n - base) * this.scale;\n            if (n <= vp.bottom)\n                return vp.domTop + (n - vp.top);\n            base = vp.bottom;\n            domBase = vp.domBottom;\n        }\n    }\n    fromDOM(n) {\n        for (let i = 0, base = 0, domBase = 0;; i++) {\n            let vp = i < this.viewports.length ? this.viewports[i] : null;\n            if (!vp || n < vp.domTop)\n                return base + (n - domBase) / this.scale;\n            if (n <= vp.domBottom)\n                return vp.top + (n - vp.domTop);\n            base = vp.bottom;\n            domBase = vp.domBottom;\n        }\n    }\n    eq(other) {\n        if (!(other instanceof BigScaler))\n            return false;\n        return this.scale == other.scale && this.viewports.length == other.viewports.length &&\n            this.viewports.every((vp, i) => vp.from == other.viewports[i].from && vp.to == other.viewports[i].to);\n    }\n}\nfunction scaleBlock(block, scaler) {\n    if (scaler.scale == 1)\n        return block;\n    let bTop = scaler.toDOM(block.top), bBottom = scaler.toDOM(block.bottom);\n    return new BlockInfo(block.from, block.length, bTop, bBottom - bTop, Array.isArray(block._content) ? block._content.map(b => scaleBlock(b, scaler)) : block._content);\n}\n\nconst theme = /*@__PURE__*/Facet.define({ combine: strs => strs.join(\" \") });\nconst darkTheme = /*@__PURE__*/Facet.define({ combine: values => values.indexOf(true) > -1 });\nconst baseThemeID = /*@__PURE__*/StyleModule.newName(), baseLightID = /*@__PURE__*/StyleModule.newName(), baseDarkID = /*@__PURE__*/StyleModule.newName();\nconst lightDarkIDs = { \"&light\": \".\" + baseLightID, \"&dark\": \".\" + baseDarkID };\nfunction buildTheme(main, spec, scopes) {\n    return new StyleModule(spec, {\n        finish(sel) {\n            return /&/.test(sel) ? sel.replace(/&\\w*/, m => {\n                if (m == \"&\")\n                    return main;\n                if (!scopes || !scopes[m])\n                    throw new RangeError(`Unsupported selector: ${m}`);\n                return scopes[m];\n            }) : main + \" \" + sel;\n        }\n    });\n}\nconst baseTheme$1 = /*@__PURE__*/buildTheme(\".\" + baseThemeID, {\n    \"&\": {\n        position: \"relative !important\",\n        boxSizing: \"border-box\",\n        \"&.cm-focused\": {\n            // Provide a simple default outline to make sure a focused\n            // editor is visually distinct. Can't leave the default behavior\n            // because that will apply to the content element, which is\n            // inside the scrollable container and doesn't include the\n            // gutters. We also can't use an 'auto' outline, since those\n            // are, for some reason, drawn behind the element content, which\n            // will cause things like the active line background to cover\n            // the outline (#297).\n            outline: \"1px dotted #212121\"\n        },\n        display: \"flex !important\",\n        flexDirection: \"column\"\n    },\n    \".cm-scroller\": {\n        display: \"flex !important\",\n        alignItems: \"flex-start !important\",\n        fontFamily: \"monospace\",\n        lineHeight: 1.4,\n        height: \"100%\",\n        overflowX: \"auto\",\n        position: \"relative\",\n        zIndex: 0\n    },\n    \".cm-content\": {\n        margin: 0,\n        flexGrow: 2,\n        flexShrink: 0,\n        display: \"block\",\n        whiteSpace: \"pre\",\n        wordWrap: \"normal\", // https://github.com/codemirror/dev/issues/456\n        boxSizing: \"border-box\",\n        minHeight: \"100%\",\n        padding: \"4px 0\",\n        outline: \"none\",\n        \"&[contenteditable=true]\": {\n            WebkitUserModify: \"read-write-plaintext-only\",\n        }\n    },\n    \".cm-lineWrapping\": {\n        whiteSpace_fallback: \"pre-wrap\", // For IE\n        whiteSpace: \"break-spaces\",\n        wordBreak: \"break-word\", // For Safari, which doesn't support overflow-wrap: anywhere\n        overflowWrap: \"anywhere\",\n        flexShrink: 1\n    },\n    \"&light .cm-content\": { caretColor: \"black\" },\n    \"&dark .cm-content\": { caretColor: \"white\" },\n    \".cm-line\": {\n        display: \"block\",\n        padding: \"0 2px 0 6px\"\n    },\n    \".cm-layer\": {\n        position: \"absolute\",\n        left: 0,\n        top: 0,\n        contain: \"size style\",\n        \"& > *\": {\n            position: \"absolute\"\n        }\n    },\n    \"&light .cm-selectionBackground\": {\n        background: \"#d9d9d9\"\n    },\n    \"&dark .cm-selectionBackground\": {\n        background: \"#222\"\n    },\n    \"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground\": {\n        background: \"#d7d4f0\"\n    },\n    \"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground\": {\n        background: \"#233\"\n    },\n    \".cm-cursorLayer\": {\n        pointerEvents: \"none\"\n    },\n    \"&.cm-focused > .cm-scroller > .cm-cursorLayer\": {\n        animation: \"steps(1) cm-blink 1.2s infinite\"\n    },\n    // Two animations defined so that we can switch between them to\n    // restart the animation without forcing another style\n    // recomputation.\n    \"@keyframes cm-blink\": { \"0%\": {}, \"50%\": { opacity: 0 }, \"100%\": {} },\n    \"@keyframes cm-blink2\": { \"0%\": {}, \"50%\": { opacity: 0 }, \"100%\": {} },\n    \".cm-cursor, .cm-dropCursor\": {\n        borderLeft: \"1.2px solid black\",\n        marginLeft: \"-0.6px\",\n        pointerEvents: \"none\",\n    },\n    \".cm-cursor\": {\n        display: \"none\"\n    },\n    \"&dark .cm-cursor\": {\n        borderLeftColor: \"#444\"\n    },\n    \".cm-dropCursor\": {\n        position: \"absolute\"\n    },\n    \"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor\": {\n        display: \"block\"\n    },\n    \".cm-iso\": {\n        unicodeBidi: \"isolate\"\n    },\n    \".cm-announced\": {\n        position: \"fixed\",\n        top: \"-10000px\"\n    },\n    \"@media print\": {\n        \".cm-announced\": { display: \"none\" }\n    },\n    \"&light .cm-activeLine\": { backgroundColor: \"#cceeff44\" },\n    \"&dark .cm-activeLine\": { backgroundColor: \"#99eeff33\" },\n    \"&light .cm-specialChar\": { color: \"red\" },\n    \"&dark .cm-specialChar\": { color: \"#f78\" },\n    \".cm-gutters\": {\n        flexShrink: 0,\n        display: \"flex\",\n        height: \"100%\",\n        boxSizing: \"border-box\",\n        insetInlineStart: 0,\n        zIndex: 200\n    },\n    \"&light .cm-gutters\": {\n        backgroundColor: \"#f5f5f5\",\n        color: \"#6c6c6c\",\n        borderRight: \"1px solid #ddd\"\n    },\n    \"&dark .cm-gutters\": {\n        backgroundColor: \"#333338\",\n        color: \"#ccc\"\n    },\n    \".cm-gutter\": {\n        display: \"flex !important\", // Necessary -- prevents margin collapsing\n        flexDirection: \"column\",\n        flexShrink: 0,\n        boxSizing: \"border-box\",\n        minHeight: \"100%\",\n        overflow: \"hidden\"\n    },\n    \".cm-gutterElement\": {\n        boxSizing: \"border-box\"\n    },\n    \".cm-lineNumbers .cm-gutterElement\": {\n        padding: \"0 3px 0 5px\",\n        minWidth: \"20px\",\n        textAlign: \"right\",\n        whiteSpace: \"nowrap\"\n    },\n    \"&light .cm-activeLineGutter\": {\n        backgroundColor: \"#e2f2ff\"\n    },\n    \"&dark .cm-activeLineGutter\": {\n        backgroundColor: \"#222227\"\n    },\n    \".cm-panels\": {\n        boxSizing: \"border-box\",\n        position: \"sticky\",\n        left: 0,\n        right: 0\n    },\n    \"&light .cm-panels\": {\n        backgroundColor: \"#f5f5f5\",\n        color: \"black\"\n    },\n    \"&light .cm-panels-top\": {\n        borderBottom: \"1px solid #ddd\"\n    },\n    \"&light .cm-panels-bottom\": {\n        borderTop: \"1px solid #ddd\"\n    },\n    \"&dark .cm-panels\": {\n        backgroundColor: \"#333338\",\n        color: \"white\"\n    },\n    \".cm-tab\": {\n        display: \"inline-block\",\n        overflow: \"hidden\",\n        verticalAlign: \"bottom\"\n    },\n    \".cm-widgetBuffer\": {\n        verticalAlign: \"text-top\",\n        height: \"1em\",\n        width: 0,\n        display: \"inline\"\n    },\n    \".cm-placeholder\": {\n        color: \"#888\",\n        display: \"inline-block\",\n        verticalAlign: \"top\",\n    },\n    \".cm-highlightSpace:before\": {\n        content: \"attr(data-display)\",\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        color: \"#888\"\n    },\n    \".cm-highlightTab\": {\n        backgroundImage: `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"20\"><path stroke=\"%23888\" stroke-width=\"1\" fill=\"none\" d=\"M1 10H196L190 5M190 15L196 10M197 4L197 16\"/></svg>')`,\n        backgroundSize: \"auto 100%\",\n        backgroundPosition: \"right 90%\",\n        backgroundRepeat: \"no-repeat\"\n    },\n    \".cm-trailingSpace\": {\n        backgroundColor: \"#ff332255\"\n    },\n    \".cm-button\": {\n        verticalAlign: \"middle\",\n        color: \"inherit\",\n        fontSize: \"70%\",\n        padding: \".2em 1em\",\n        borderRadius: \"1px\"\n    },\n    \"&light .cm-button\": {\n        backgroundImage: \"linear-gradient(#eff1f5, #d9d9df)\",\n        border: \"1px solid #888\",\n        \"&:active\": {\n            backgroundImage: \"linear-gradient(#b4b4b4, #d0d3d6)\"\n        }\n    },\n    \"&dark .cm-button\": {\n        backgroundImage: \"linear-gradient(#393939, #111)\",\n        border: \"1px solid #888\",\n        \"&:active\": {\n            backgroundImage: \"linear-gradient(#111, #333)\"\n        }\n    },\n    \".cm-textfield\": {\n        verticalAlign: \"middle\",\n        color: \"inherit\",\n        fontSize: \"70%\",\n        border: \"1px solid silver\",\n        padding: \".2em .5em\"\n    },\n    \"&light .cm-textfield\": {\n        backgroundColor: \"white\"\n    },\n    \"&dark .cm-textfield\": {\n        border: \"1px solid #555\",\n        backgroundColor: \"inherit\"\n    }\n}, lightDarkIDs);\n\nconst LineBreakPlaceholder = \"\\uffff\";\nclass DOMReader {\n    constructor(points, state) {\n        this.points = points;\n        this.text = \"\";\n        this.lineSeparator = state.facet(EditorState.lineSeparator);\n    }\n    append(text) {\n        this.text += text;\n    }\n    lineBreak() {\n        this.text += LineBreakPlaceholder;\n    }\n    readRange(start, end) {\n        if (!start)\n            return this;\n        let parent = start.parentNode;\n        for (let cur = start;;) {\n            this.findPointBefore(parent, cur);\n            let oldLen = this.text.length;\n            this.readNode(cur);\n            let next = cur.nextSibling;\n            if (next == end)\n                break;\n            let view = ContentView.get(cur), nextView = ContentView.get(next);\n            if (view && nextView ? view.breakAfter :\n                (view ? view.breakAfter : isBlockElement(cur)) ||\n                    (isBlockElement(next) && (cur.nodeName != \"BR\" || cur.cmIgnore) && this.text.length > oldLen))\n                this.lineBreak();\n            cur = next;\n        }\n        this.findPointBefore(parent, end);\n        return this;\n    }\n    readTextNode(node) {\n        let text = node.nodeValue;\n        for (let point of this.points)\n            if (point.node == node)\n                point.pos = this.text.length + Math.min(point.offset, text.length);\n        for (let off = 0, re = this.lineSeparator ? null : /\\r\\n?|\\n/g;;) {\n            let nextBreak = -1, breakSize = 1, m;\n            if (this.lineSeparator) {\n                nextBreak = text.indexOf(this.lineSeparator, off);\n                breakSize = this.lineSeparator.length;\n            }\n            else if (m = re.exec(text)) {\n                nextBreak = m.index;\n                breakSize = m[0].length;\n            }\n            this.append(text.slice(off, nextBreak < 0 ? text.length : nextBreak));\n            if (nextBreak < 0)\n                break;\n            this.lineBreak();\n            if (breakSize > 1)\n                for (let point of this.points)\n                    if (point.node == node && point.pos > this.text.length)\n                        point.pos -= breakSize - 1;\n            off = nextBreak + breakSize;\n        }\n    }\n    readNode(node) {\n        if (node.cmIgnore)\n            return;\n        let view = ContentView.get(node);\n        let fromView = view && view.overrideDOMText;\n        if (fromView != null) {\n            this.findPointInside(node, fromView.length);\n            for (let i = fromView.iter(); !i.next().done;) {\n                if (i.lineBreak)\n                    this.lineBreak();\n                else\n                    this.append(i.value);\n            }\n        }\n        else if (node.nodeType == 3) {\n            this.readTextNode(node);\n        }\n        else if (node.nodeName == \"BR\") {\n            if (node.nextSibling)\n                this.lineBreak();\n        }\n        else if (node.nodeType == 1) {\n            this.readRange(node.firstChild, null);\n        }\n    }\n    findPointBefore(node, next) {\n        for (let point of this.points)\n            if (point.node == node && node.childNodes[point.offset] == next)\n                point.pos = this.text.length;\n    }\n    findPointInside(node, length) {\n        for (let point of this.points)\n            if (node.nodeType == 3 ? point.node == node : node.contains(point.node))\n                point.pos = this.text.length + (isAtEnd(node, point.node, point.offset) ? length : 0);\n    }\n}\nfunction isAtEnd(parent, node, offset) {\n    for (;;) {\n        if (!node || offset < maxOffset(node))\n            return false;\n        if (node == parent)\n            return true;\n        offset = domIndex(node) + 1;\n        node = node.parentNode;\n    }\n}\nclass DOMPoint {\n    constructor(node, offset) {\n        this.node = node;\n        this.offset = offset;\n        this.pos = -1;\n    }\n}\n\nclass DOMChange {\n    constructor(view, start, end, typeOver) {\n        this.typeOver = typeOver;\n        this.bounds = null;\n        this.text = \"\";\n        this.domChanged = start > -1;\n        let { impreciseHead: iHead, impreciseAnchor: iAnchor } = view.docView;\n        if (view.state.readOnly && start > -1) {\n            // Ignore changes when the editor is read-only\n            this.newSel = null;\n        }\n        else if (start > -1 && (this.bounds = view.docView.domBoundsAround(start, end, 0))) {\n            let selPoints = iHead || iAnchor ? [] : selectionPoints(view);\n            let reader = new DOMReader(selPoints, view.state);\n            reader.readRange(this.bounds.startDOM, this.bounds.endDOM);\n            this.text = reader.text;\n            this.newSel = selectionFromPoints(selPoints, this.bounds.from);\n        }\n        else {\n            let domSel = view.observer.selectionRange;\n            let head = iHead && iHead.node == domSel.focusNode && iHead.offset == domSel.focusOffset ||\n                !contains(view.contentDOM, domSel.focusNode)\n                ? view.state.selection.main.head\n                : view.docView.posFromDOM(domSel.focusNode, domSel.focusOffset);\n            let anchor = iAnchor && iAnchor.node == domSel.anchorNode && iAnchor.offset == domSel.anchorOffset ||\n                !contains(view.contentDOM, domSel.anchorNode)\n                ? view.state.selection.main.anchor\n                : view.docView.posFromDOM(domSel.anchorNode, domSel.anchorOffset);\n            // iOS will refuse to select the block gaps when doing\n            // select-all.\n            // Chrome will put the selection *inside* them, confusing\n            // posFromDOM\n            let vp = view.viewport;\n            if ((browser.ios || browser.chrome) && view.state.selection.main.empty && head != anchor &&\n                (vp.from > 0 || vp.to < view.state.doc.length)) {\n                let from = Math.min(head, anchor), to = Math.max(head, anchor);\n                let offFrom = vp.from - from, offTo = vp.to - to;\n                if ((offFrom == 0 || offFrom == 1 || from == 0) && (offTo == 0 || offTo == -1 || to == view.state.doc.length)) {\n                    head = 0;\n                    anchor = view.state.doc.length;\n                }\n            }\n            this.newSel = EditorSelection.single(anchor, head);\n        }\n    }\n}\nfunction applyDOMChange(view, domChange) {\n    let change;\n    let { newSel } = domChange, sel = view.state.selection.main;\n    let lastKey = view.inputState.lastKeyTime > Date.now() - 100 ? view.inputState.lastKeyCode : -1;\n    if (domChange.bounds) {\n        let { from, to } = domChange.bounds;\n        let preferredPos = sel.from, preferredSide = null;\n        // Prefer anchoring to end when Backspace is pressed (or, on\n        // Android, when something was deleted)\n        if (lastKey === 8 || browser.android && domChange.text.length < to - from) {\n            preferredPos = sel.to;\n            preferredSide = \"end\";\n        }\n        let diff = findDiff(view.state.doc.sliceString(from, to, LineBreakPlaceholder), domChange.text, preferredPos - from, preferredSide);\n        if (diff) {\n            // Chrome inserts two newlines when pressing shift-enter at the\n            // end of a line. DomChange drops one of those.\n            if (browser.chrome && lastKey == 13 &&\n                diff.toB == diff.from + 2 && domChange.text.slice(diff.from, diff.toB) == LineBreakPlaceholder + LineBreakPlaceholder)\n                diff.toB--;\n            change = { from: from + diff.from, to: from + diff.toA,\n                insert: Text.of(domChange.text.slice(diff.from, diff.toB).split(LineBreakPlaceholder)) };\n        }\n    }\n    else if (newSel && (!view.hasFocus && view.state.facet(editable) || newSel.main.eq(sel))) {\n        newSel = null;\n    }\n    if (!change && !newSel)\n        return false;\n    if (!change && domChange.typeOver && !sel.empty && newSel && newSel.main.empty) {\n        // Heuristic to notice typing over a selected character\n        change = { from: sel.from, to: sel.to, insert: view.state.doc.slice(sel.from, sel.to) };\n    }\n    else if (change && change.from >= sel.from && change.to <= sel.to &&\n        (change.from != sel.from || change.to != sel.to) &&\n        (sel.to - sel.from) - (change.to - change.from) <= 4) {\n        // If the change is inside the selection and covers most of it,\n        // assume it is a selection replace (with identical characters at\n        // the start/end not included in the diff)\n        change = {\n            from: sel.from, to: sel.to,\n            insert: view.state.doc.slice(sel.from, change.from).append(change.insert).append(view.state.doc.slice(change.to, sel.to))\n        };\n    }\n    else if ((browser.mac || browser.android) && change && change.from == change.to && change.from == sel.head - 1 &&\n        /^\\. ?$/.test(change.insert.toString()) && view.contentDOM.getAttribute(\"autocorrect\") == \"off\") {\n        // Detect insert-period-on-double-space Mac and Android behavior,\n        // and transform it into a regular space insert.\n        if (newSel && change.insert.length == 2)\n            newSel = EditorSelection.single(newSel.main.anchor - 1, newSel.main.head - 1);\n        change = { from: sel.from, to: sel.to, insert: Text.of([\" \"]) };\n    }\n    else if (browser.chrome && change && change.from == change.to && change.from == sel.head &&\n        change.insert.toString() == \"\\n \" && view.lineWrapping) {\n        // In Chrome, if you insert a space at the start of a wrapped\n        // line, it will actually insert a newline and a space, causing a\n        // bogus new line to be created in CodeMirror (#968)\n        if (newSel)\n            newSel = EditorSelection.single(newSel.main.anchor - 1, newSel.main.head - 1);\n        change = { from: sel.from, to: sel.to, insert: Text.of([\" \"]) };\n    }\n    if (change) {\n        return applyDOMChangeInner(view, change, newSel, lastKey);\n    }\n    else if (newSel && !newSel.main.eq(sel)) {\n        let scrollIntoView = false, userEvent = \"select\";\n        if (view.inputState.lastSelectionTime > Date.now() - 50) {\n            if (view.inputState.lastSelectionOrigin == \"select\")\n                scrollIntoView = true;\n            userEvent = view.inputState.lastSelectionOrigin;\n        }\n        view.dispatch({ selection: newSel, scrollIntoView, userEvent });\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nfunction applyDOMChangeInner(view, change, newSel, lastKey = -1) {\n    if (browser.ios && view.inputState.flushIOSKey(change))\n        return true;\n    let sel = view.state.selection.main;\n    // Android browsers don't fire reasonable key events for enter,\n    // backspace, or delete. So this detects changes that look like\n    // they're caused by those keys, and reinterprets them as key\n    // events. (Some of these keys are also handled by beforeinput\n    // events and the pendingAndroidKey mechanism, but that's not\n    // reliable in all situations.)\n    if (browser.android &&\n        ((change.to == sel.to &&\n            // GBoard will sometimes remove a space it just inserted\n            // after a completion when you press enter\n            (change.from == sel.from || change.from == sel.from - 1 && view.state.sliceDoc(change.from, sel.from) == \" \") &&\n            change.insert.length == 1 && change.insert.lines == 2 &&\n            dispatchKey(view.contentDOM, \"Enter\", 13)) ||\n            ((change.from == sel.from - 1 && change.to == sel.to && change.insert.length == 0 ||\n                lastKey == 8 && change.insert.length < change.to - change.from && change.to > sel.head) &&\n                dispatchKey(view.contentDOM, \"Backspace\", 8)) ||\n            (change.from == sel.from && change.to == sel.to + 1 && change.insert.length == 0 &&\n                dispatchKey(view.contentDOM, \"Delete\", 46))))\n        return true;\n    let text = change.insert.toString();\n    if (view.inputState.composing >= 0)\n        view.inputState.composing++;\n    let defaultTr;\n    let defaultInsert = () => defaultTr || (defaultTr = applyDefaultInsert(view, change, newSel));\n    if (!view.state.facet(inputHandler).some(h => h(view, change.from, change.to, text, defaultInsert)))\n        view.dispatch(defaultInsert());\n    return true;\n}\nfunction applyDefaultInsert(view, change, newSel) {\n    let tr, startState = view.state, sel = startState.selection.main;\n    if (change.from >= sel.from && change.to <= sel.to && change.to - change.from >= (sel.to - sel.from) / 3 &&\n        (!newSel || newSel.main.empty && newSel.main.from == change.from + change.insert.length) &&\n        view.inputState.composing < 0) {\n        let before = sel.from < change.from ? startState.sliceDoc(sel.from, change.from) : \"\";\n        let after = sel.to > change.to ? startState.sliceDoc(change.to, sel.to) : \"\";\n        tr = startState.replaceSelection(view.state.toText(before + change.insert.sliceString(0, undefined, view.state.lineBreak) + after));\n    }\n    else {\n        let changes = startState.changes(change);\n        let mainSel = newSel && newSel.main.to <= changes.newLength ? newSel.main : undefined;\n        // Try to apply a composition change to all cursors\n        if (startState.selection.ranges.length > 1 && view.inputState.composing >= 0 &&\n            change.to <= sel.to && change.to >= sel.to - 10) {\n            let replaced = view.state.sliceDoc(change.from, change.to);\n            let compositionRange, composition = newSel && findCompositionNode(view, newSel.main.head);\n            if (composition) {\n                let dLen = change.insert.length - (change.to - change.from);\n                compositionRange = { from: composition.from, to: composition.to - dLen };\n            }\n            else {\n                compositionRange = view.state.doc.lineAt(sel.head);\n            }\n            let offset = sel.to - change.to, size = sel.to - sel.from;\n            tr = startState.changeByRange(range => {\n                if (range.from == sel.from && range.to == sel.to)\n                    return { changes, range: mainSel || range.map(changes) };\n                let to = range.to - offset, from = to - replaced.length;\n                if (range.to - range.from != size || view.state.sliceDoc(from, to) != replaced ||\n                    // Unfortunately, there's no way to make multiple\n                    // changes in the same node work without aborting\n                    // composition, so cursors in the composition range are\n                    // ignored.\n                    range.to >= compositionRange.from && range.from <= compositionRange.to)\n                    return { range };\n                let rangeChanges = startState.changes({ from, to, insert: change.insert }), selOff = range.to - sel.to;\n                return {\n                    changes: rangeChanges,\n                    range: !mainSel ? range.map(rangeChanges) :\n                        EditorSelection.range(Math.max(0, mainSel.anchor + selOff), Math.max(0, mainSel.head + selOff))\n                };\n            });\n        }\n        else {\n            tr = {\n                changes,\n                selection: mainSel && startState.selection.replaceRange(mainSel)\n            };\n        }\n    }\n    let userEvent = \"input.type\";\n    if (view.composing ||\n        view.inputState.compositionPendingChange && view.inputState.compositionEndedAt > Date.now() - 50) {\n        view.inputState.compositionPendingChange = false;\n        userEvent += \".compose\";\n        if (view.inputState.compositionFirstChange) {\n            userEvent += \".start\";\n            view.inputState.compositionFirstChange = false;\n        }\n    }\n    return startState.update(tr, { userEvent, scrollIntoView: true });\n}\nfunction findDiff(a, b, preferredPos, preferredSide) {\n    let minLen = Math.min(a.length, b.length);\n    let from = 0;\n    while (from < minLen && a.charCodeAt(from) == b.charCodeAt(from))\n        from++;\n    if (from == minLen && a.length == b.length)\n        return null;\n    let toA = a.length, toB = b.length;\n    while (toA > 0 && toB > 0 && a.charCodeAt(toA - 1) == b.charCodeAt(toB - 1)) {\n        toA--;\n        toB--;\n    }\n    if (preferredSide == \"end\") {\n        let adjust = Math.max(0, from - Math.min(toA, toB));\n        preferredPos -= toA + adjust - from;\n    }\n    if (toA < from && a.length < b.length) {\n        let move = preferredPos <= from && preferredPos >= toA ? from - preferredPos : 0;\n        from -= move;\n        toB = from + (toB - toA);\n        toA = from;\n    }\n    else if (toB < from) {\n        let move = preferredPos <= from && preferredPos >= toB ? from - preferredPos : 0;\n        from -= move;\n        toA = from + (toA - toB);\n        toB = from;\n    }\n    return { from, toA, toB };\n}\nfunction selectionPoints(view) {\n    let result = [];\n    if (view.root.activeElement != view.contentDOM)\n        return result;\n    let { anchorNode, anchorOffset, focusNode, focusOffset } = view.observer.selectionRange;\n    if (anchorNode) {\n        result.push(new DOMPoint(anchorNode, anchorOffset));\n        if (focusNode != anchorNode || focusOffset != anchorOffset)\n            result.push(new DOMPoint(focusNode, focusOffset));\n    }\n    return result;\n}\nfunction selectionFromPoints(points, base) {\n    if (points.length == 0)\n        return null;\n    let anchor = points[0].pos, head = points.length == 2 ? points[1].pos : anchor;\n    return anchor > -1 && head > -1 ? EditorSelection.single(anchor + base, head + base) : null;\n}\n\nconst observeOptions = {\n    childList: true,\n    characterData: true,\n    subtree: true,\n    attributes: true,\n    characterDataOldValue: true\n};\n// IE11 has very broken mutation observers, so we also listen to\n// DOMCharacterDataModified there\nconst useCharData = browser.ie && browser.ie_version <= 11;\nclass DOMObserver {\n    constructor(view) {\n        this.view = view;\n        this.active = false;\n        this.editContext = null;\n        // The known selection. Kept in our own object, as opposed to just\n        // directly accessing the selection because:\n        //  - Safari doesn't report the right selection in shadow DOM\n        //  - Reading from the selection forces a DOM layout\n        //  - This way, we can ignore selectionchange events if we have\n        //    already seen the 'new' selection\n        this.selectionRange = new DOMSelectionState;\n        // Set when a selection change is detected, cleared on flush\n        this.selectionChanged = false;\n        this.delayedFlush = -1;\n        this.resizeTimeout = -1;\n        this.queue = [];\n        this.delayedAndroidKey = null;\n        this.flushingAndroidKey = -1;\n        this.lastChange = 0;\n        this.scrollTargets = [];\n        this.intersection = null;\n        this.resizeScroll = null;\n        this.intersecting = false;\n        this.gapIntersection = null;\n        this.gaps = [];\n        this.printQuery = null;\n        // Timeout for scheduling check of the parents that need scroll handlers\n        this.parentCheck = -1;\n        this.dom = view.contentDOM;\n        this.observer = new MutationObserver(mutations => {\n            for (let mut of mutations)\n                this.queue.push(mut);\n            // IE11 will sometimes (on typing over a selection or\n            // backspacing out a single character text node) call the\n            // observer callback before actually updating the DOM.\n            //\n            // Unrelatedly, iOS Safari will, when ending a composition,\n            // sometimes first clear it, deliver the mutations, and then\n            // reinsert the finished text. CodeMirror's handling of the\n            // deletion will prevent the reinsertion from happening,\n            // breaking composition.\n            if ((browser.ie && browser.ie_version <= 11 || browser.ios && view.composing) &&\n                mutations.some(m => m.type == \"childList\" && m.removedNodes.length ||\n                    m.type == \"characterData\" && m.oldValue.length > m.target.nodeValue.length))\n                this.flushSoon();\n            else\n                this.flush();\n        });\n        if (window.EditContext && view.constructor.EDIT_CONTEXT !== false &&\n            // Chrome <126 doesn't support inverted selections in edit context (#1392)\n            !(browser.chrome && browser.chrome_version < 126)) {\n            this.editContext = new EditContextManager(view);\n            if (view.state.facet(editable))\n                view.contentDOM.editContext = this.editContext.editContext;\n        }\n        if (useCharData)\n            this.onCharData = (event) => {\n                this.queue.push({ target: event.target,\n                    type: \"characterData\",\n                    oldValue: event.prevValue });\n                this.flushSoon();\n            };\n        this.onSelectionChange = this.onSelectionChange.bind(this);\n        this.onResize = this.onResize.bind(this);\n        this.onPrint = this.onPrint.bind(this);\n        this.onScroll = this.onScroll.bind(this);\n        if (window.matchMedia)\n            this.printQuery = window.matchMedia(\"print\");\n        if (typeof ResizeObserver == \"function\") {\n            this.resizeScroll = new ResizeObserver(() => {\n                var _a;\n                if (((_a = this.view.docView) === null || _a === void 0 ? void 0 : _a.lastUpdate) < Date.now() - 75)\n                    this.onResize();\n            });\n            this.resizeScroll.observe(view.scrollDOM);\n        }\n        this.addWindowListeners(this.win = view.win);\n        this.start();\n        if (typeof IntersectionObserver == \"function\") {\n            this.intersection = new IntersectionObserver(entries => {\n                if (this.parentCheck < 0)\n                    this.parentCheck = setTimeout(this.listenForScroll.bind(this), 1000);\n                if (entries.length > 0 && (entries[entries.length - 1].intersectionRatio > 0) != this.intersecting) {\n                    this.intersecting = !this.intersecting;\n                    if (this.intersecting != this.view.inView)\n                        this.onScrollChanged(document.createEvent(\"Event\"));\n                }\n            }, { threshold: [0, .001] });\n            this.intersection.observe(this.dom);\n            this.gapIntersection = new IntersectionObserver(entries => {\n                if (entries.length > 0 && entries[entries.length - 1].intersectionRatio > 0)\n                    this.onScrollChanged(document.createEvent(\"Event\"));\n            }, {});\n        }\n        this.listenForScroll();\n        this.readSelectionRange();\n    }\n    onScrollChanged(e) {\n        this.view.inputState.runHandlers(\"scroll\", e);\n        if (this.intersecting)\n            this.view.measure();\n    }\n    onScroll(e) {\n        if (this.intersecting)\n            this.flush(false);\n        if (this.editContext)\n            this.view.requestMeasure(this.editContext.measureReq);\n        this.onScrollChanged(e);\n    }\n    onResize() {\n        if (this.resizeTimeout < 0)\n            this.resizeTimeout = setTimeout(() => {\n                this.resizeTimeout = -1;\n                this.view.requestMeasure();\n            }, 50);\n    }\n    onPrint(event) {\n        if (event.type == \"change\" && !event.matches)\n            return;\n        this.view.viewState.printing = true;\n        this.view.measure();\n        setTimeout(() => {\n            this.view.viewState.printing = false;\n            this.view.requestMeasure();\n        }, 500);\n    }\n    updateGaps(gaps) {\n        if (this.gapIntersection && (gaps.length != this.gaps.length || this.gaps.some((g, i) => g != gaps[i]))) {\n            this.gapIntersection.disconnect();\n            for (let gap of gaps)\n                this.gapIntersection.observe(gap);\n            this.gaps = gaps;\n        }\n    }\n    onSelectionChange(event) {\n        let wasChanged = this.selectionChanged;\n        if (!this.readSelectionRange() || this.delayedAndroidKey)\n            return;\n        let { view } = this, sel = this.selectionRange;\n        if (view.state.facet(editable) ? view.root.activeElement != this.dom : !hasSelection(view.dom, sel))\n            return;\n        let context = sel.anchorNode && view.docView.nearest(sel.anchorNode);\n        if (context && context.ignoreEvent(event)) {\n            if (!wasChanged)\n                this.selectionChanged = false;\n            return;\n        }\n        // Deletions on IE11 fire their events in the wrong order, giving\n        // us a selection change event before the DOM changes are\n        // reported.\n        // Chrome Android has a similar issue when backspacing out a\n        // selection (#645).\n        if ((browser.ie && browser.ie_version <= 11 || browser.android && browser.chrome) && !view.state.selection.main.empty &&\n            // (Selection.isCollapsed isn't reliable on IE)\n            sel.focusNode && isEquivalentPosition(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset))\n            this.flushSoon();\n        else\n            this.flush(false);\n    }\n    readSelectionRange() {\n        let { view } = this;\n        // The Selection object is broken in shadow roots in Safari. See\n        // https://github.com/codemirror/dev/issues/414\n        let selection = getSelection(view.root);\n        if (!selection)\n            return false;\n        let range = browser.safari && view.root.nodeType == 11 &&\n            deepActiveElement(this.dom.ownerDocument) == this.dom &&\n            safariSelectionRangeHack(this.view, selection) || selection;\n        if (!range || this.selectionRange.eq(range))\n            return false;\n        let local = hasSelection(this.dom, range);\n        // Detect the situation where the browser has, on focus, moved the\n        // selection to the start of the content element. Reset it to the\n        // position from the editor state.\n        if (local && !this.selectionChanged &&\n            view.inputState.lastFocusTime > Date.now() - 200 &&\n            view.inputState.lastTouchTime < Date.now() - 300 &&\n            atElementStart(this.dom, range)) {\n            this.view.inputState.lastFocusTime = 0;\n            view.docView.updateSelection();\n            return false;\n        }\n        this.selectionRange.setRange(range);\n        if (local)\n            this.selectionChanged = true;\n        return true;\n    }\n    setSelectionRange(anchor, head) {\n        this.selectionRange.set(anchor.node, anchor.offset, head.node, head.offset);\n        this.selectionChanged = false;\n    }\n    clearSelectionRange() {\n        this.selectionRange.set(null, 0, null, 0);\n    }\n    listenForScroll() {\n        this.parentCheck = -1;\n        let i = 0, changed = null;\n        for (let dom = this.dom; dom;) {\n            if (dom.nodeType == 1) {\n                if (!changed && i < this.scrollTargets.length && this.scrollTargets[i] == dom)\n                    i++;\n                else if (!changed)\n                    changed = this.scrollTargets.slice(0, i);\n                if (changed)\n                    changed.push(dom);\n                dom = dom.assignedSlot || dom.parentNode;\n            }\n            else if (dom.nodeType == 11) { // Shadow root\n                dom = dom.host;\n            }\n            else {\n                break;\n            }\n        }\n        if (i < this.scrollTargets.length && !changed)\n            changed = this.scrollTargets.slice(0, i);\n        if (changed) {\n            for (let dom of this.scrollTargets)\n                dom.removeEventListener(\"scroll\", this.onScroll);\n            for (let dom of this.scrollTargets = changed)\n                dom.addEventListener(\"scroll\", this.onScroll);\n        }\n    }\n    ignore(f) {\n        if (!this.active)\n            return f();\n        try {\n            this.stop();\n            return f();\n        }\n        finally {\n            this.start();\n            this.clear();\n        }\n    }\n    start() {\n        if (this.active)\n            return;\n        this.observer.observe(this.dom, observeOptions);\n        if (useCharData)\n            this.dom.addEventListener(\"DOMCharacterDataModified\", this.onCharData);\n        this.active = true;\n    }\n    stop() {\n        if (!this.active)\n            return;\n        this.active = false;\n        this.observer.disconnect();\n        if (useCharData)\n            this.dom.removeEventListener(\"DOMCharacterDataModified\", this.onCharData);\n    }\n    // Throw away any pending changes\n    clear() {\n        this.processRecords();\n        this.queue.length = 0;\n        this.selectionChanged = false;\n    }\n    // Chrome Android, especially in combination with GBoard, not only\n    // doesn't reliably fire regular key events, but also often\n    // surrounds the effect of enter or backspace with a bunch of\n    // composition events that, when interrupted, cause text duplication\n    // or other kinds of corruption. This hack makes the editor back off\n    // from handling DOM changes for a moment when such a key is\n    // detected (via beforeinput or keydown), and then tries to flush\n    // them or, if that has no effect, dispatches the given key.\n    delayAndroidKey(key, keyCode) {\n        var _a;\n        if (!this.delayedAndroidKey) {\n            let flush = () => {\n                let key = this.delayedAndroidKey;\n                if (key) {\n                    this.clearDelayedAndroidKey();\n                    this.view.inputState.lastKeyCode = key.keyCode;\n                    this.view.inputState.lastKeyTime = Date.now();\n                    let flushed = this.flush();\n                    if (!flushed && key.force)\n                        dispatchKey(this.dom, key.key, key.keyCode);\n                }\n            };\n            this.flushingAndroidKey = this.view.win.requestAnimationFrame(flush);\n        }\n        // Since backspace beforeinput is sometimes signalled spuriously,\n        // Enter always takes precedence.\n        if (!this.delayedAndroidKey || key == \"Enter\")\n            this.delayedAndroidKey = {\n                key, keyCode,\n                // Only run the key handler when no changes are detected if\n                // this isn't coming right after another change, in which case\n                // it is probably part of a weird chain of updates, and should\n                // be ignored if it returns the DOM to its previous state.\n                force: this.lastChange < Date.now() - 50 || !!((_a = this.delayedAndroidKey) === null || _a === void 0 ? void 0 : _a.force)\n            };\n    }\n    clearDelayedAndroidKey() {\n        this.win.cancelAnimationFrame(this.flushingAndroidKey);\n        this.delayedAndroidKey = null;\n        this.flushingAndroidKey = -1;\n    }\n    flushSoon() {\n        if (this.delayedFlush < 0)\n            this.delayedFlush = this.view.win.requestAnimationFrame(() => { this.delayedFlush = -1; this.flush(); });\n    }\n    forceFlush() {\n        if (this.delayedFlush >= 0) {\n            this.view.win.cancelAnimationFrame(this.delayedFlush);\n            this.delayedFlush = -1;\n        }\n        this.flush();\n    }\n    pendingRecords() {\n        for (let mut of this.observer.takeRecords())\n            this.queue.push(mut);\n        return this.queue;\n    }\n    processRecords() {\n        let records = this.pendingRecords();\n        if (records.length)\n            this.queue = [];\n        let from = -1, to = -1, typeOver = false;\n        for (let record of records) {\n            let range = this.readMutation(record);\n            if (!range)\n                continue;\n            if (range.typeOver)\n                typeOver = true;\n            if (from == -1) {\n                ({ from, to } = range);\n            }\n            else {\n                from = Math.min(range.from, from);\n                to = Math.max(range.to, to);\n            }\n        }\n        return { from, to, typeOver };\n    }\n    readChange() {\n        let { from, to, typeOver } = this.processRecords();\n        let newSel = this.selectionChanged && hasSelection(this.dom, this.selectionRange);\n        if (from < 0 && !newSel)\n            return null;\n        if (from > -1)\n            this.lastChange = Date.now();\n        this.view.inputState.lastFocusTime = 0;\n        this.selectionChanged = false;\n        let change = new DOMChange(this.view, from, to, typeOver);\n        this.view.docView.domChanged = { newSel: change.newSel ? change.newSel.main : null };\n        return change;\n    }\n    // Apply pending changes, if any\n    flush(readSelection = true) {\n        // Completely hold off flushing when pending keys are set—the code\n        // managing those will make sure processRecords is called and the\n        // view is resynchronized after\n        if (this.delayedFlush >= 0 || this.delayedAndroidKey)\n            return false;\n        if (readSelection)\n            this.readSelectionRange();\n        let domChange = this.readChange();\n        if (!domChange) {\n            this.view.requestMeasure();\n            return false;\n        }\n        let startState = this.view.state;\n        let handled = applyDOMChange(this.view, domChange);\n        // The view wasn't updated but DOM/selection changes were seen. Reset the view.\n        if (this.view.state == startState &&\n            (domChange.domChanged || domChange.newSel && !domChange.newSel.main.eq(this.view.state.selection.main)))\n            this.view.update([]);\n        return handled;\n    }\n    readMutation(rec) {\n        let cView = this.view.docView.nearest(rec.target);\n        if (!cView || cView.ignoreMutation(rec))\n            return null;\n        cView.markDirty(rec.type == \"attributes\");\n        if (rec.type == \"attributes\")\n            cView.flags |= 4 /* ViewFlag.AttrsDirty */;\n        if (rec.type == \"childList\") {\n            let childBefore = findChild(cView, rec.previousSibling || rec.target.previousSibling, -1);\n            let childAfter = findChild(cView, rec.nextSibling || rec.target.nextSibling, 1);\n            return { from: childBefore ? cView.posAfter(childBefore) : cView.posAtStart,\n                to: childAfter ? cView.posBefore(childAfter) : cView.posAtEnd, typeOver: false };\n        }\n        else if (rec.type == \"characterData\") {\n            return { from: cView.posAtStart, to: cView.posAtEnd, typeOver: rec.target.nodeValue == rec.oldValue };\n        }\n        else {\n            return null;\n        }\n    }\n    setWindow(win) {\n        if (win != this.win) {\n            this.removeWindowListeners(this.win);\n            this.win = win;\n            this.addWindowListeners(this.win);\n        }\n    }\n    addWindowListeners(win) {\n        win.addEventListener(\"resize\", this.onResize);\n        if (this.printQuery)\n            this.printQuery.addEventListener(\"change\", this.onPrint);\n        else\n            win.addEventListener(\"beforeprint\", this.onPrint);\n        win.addEventListener(\"scroll\", this.onScroll);\n        win.document.addEventListener(\"selectionchange\", this.onSelectionChange);\n    }\n    removeWindowListeners(win) {\n        win.removeEventListener(\"scroll\", this.onScroll);\n        win.removeEventListener(\"resize\", this.onResize);\n        if (this.printQuery)\n            this.printQuery.removeEventListener(\"change\", this.onPrint);\n        else\n            win.removeEventListener(\"beforeprint\", this.onPrint);\n        win.document.removeEventListener(\"selectionchange\", this.onSelectionChange);\n    }\n    update(update) {\n        if (this.editContext) {\n            this.editContext.update(update);\n            if (update.startState.facet(editable) != update.state.facet(editable))\n                update.view.contentDOM.editContext = update.state.facet(editable) ? this.editContext.editContext : null;\n        }\n    }\n    destroy() {\n        var _a, _b, _c;\n        this.stop();\n        (_a = this.intersection) === null || _a === void 0 ? void 0 : _a.disconnect();\n        (_b = this.gapIntersection) === null || _b === void 0 ? void 0 : _b.disconnect();\n        (_c = this.resizeScroll) === null || _c === void 0 ? void 0 : _c.disconnect();\n        for (let dom of this.scrollTargets)\n            dom.removeEventListener(\"scroll\", this.onScroll);\n        this.removeWindowListeners(this.win);\n        clearTimeout(this.parentCheck);\n        clearTimeout(this.resizeTimeout);\n        this.win.cancelAnimationFrame(this.delayedFlush);\n        this.win.cancelAnimationFrame(this.flushingAndroidKey);\n        if (this.editContext) {\n            this.view.contentDOM.editContext = null;\n            this.editContext.destroy();\n        }\n    }\n}\nfunction findChild(cView, dom, dir) {\n    while (dom) {\n        let curView = ContentView.get(dom);\n        if (curView && curView.parent == cView)\n            return curView;\n        let parent = dom.parentNode;\n        dom = parent != cView.dom ? parent : dir > 0 ? dom.nextSibling : dom.previousSibling;\n    }\n    return null;\n}\nfunction buildSelectionRangeFromRange(view, range) {\n    let anchorNode = range.startContainer, anchorOffset = range.startOffset;\n    let focusNode = range.endContainer, focusOffset = range.endOffset;\n    let curAnchor = view.docView.domAtPos(view.state.selection.main.anchor);\n    // Since such a range doesn't distinguish between anchor and head,\n    // use a heuristic that flips it around if its end matches the\n    // current anchor.\n    if (isEquivalentPosition(curAnchor.node, curAnchor.offset, focusNode, focusOffset))\n        [anchorNode, anchorOffset, focusNode, focusOffset] = [focusNode, focusOffset, anchorNode, anchorOffset];\n    return { anchorNode, anchorOffset, focusNode, focusOffset };\n}\n// Used to work around a Safari Selection/shadow DOM bug (#414)\nfunction safariSelectionRangeHack(view, selection) {\n    if (selection.getComposedRanges) {\n        let range = selection.getComposedRanges(view.root)[0];\n        if (range)\n            return buildSelectionRangeFromRange(view, range);\n    }\n    let found = null;\n    // Because Safari (at least in 2018-2021) doesn't provide regular\n    // access to the selection inside a shadowroot, we have to perform a\n    // ridiculous hack to get at it—using `execCommand` to trigger a\n    // `beforeInput` event so that we can read the target range from the\n    // event.\n    function read(event) {\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        found = event.getTargetRanges()[0];\n    }\n    view.contentDOM.addEventListener(\"beforeinput\", read, true);\n    view.dom.ownerDocument.execCommand(\"indent\");\n    view.contentDOM.removeEventListener(\"beforeinput\", read, true);\n    return found ? buildSelectionRangeFromRange(view, found) : null;\n}\nclass EditContextManager {\n    constructor(view) {\n        // The document window for which the text in the context is\n        // maintained. For large documents, this may be smaller than the\n        // editor document. This window always includes the selection head.\n        this.from = 0;\n        this.to = 0;\n        // When applying a transaction, this is used to compare the change\n        // made to the context content to the change in the transaction in\n        // order to make the minimal changes to the context (since touching\n        // that sometimes breaks series of multiple edits made for a single\n        // user action on some Android keyboards)\n        this.pendingContextChange = null;\n        this.handlers = Object.create(null);\n        this.resetRange(view.state);\n        let context = this.editContext = new window.EditContext({\n            text: view.state.doc.sliceString(this.from, this.to),\n            selectionStart: this.toContextPos(Math.max(this.from, Math.min(this.to, view.state.selection.main.anchor))),\n            selectionEnd: this.toContextPos(view.state.selection.main.head)\n        });\n        this.handlers.textupdate = e => {\n            let { anchor } = view.state.selection.main;\n            let change = { from: this.toEditorPos(e.updateRangeStart),\n                to: this.toEditorPos(e.updateRangeEnd),\n                insert: Text.of(e.text.split(\"\\n\")) };\n            // If the window doesn't include the anchor, assume changes\n            // adjacent to a side go up to the anchor.\n            if (change.from == this.from && anchor < this.from)\n                change.from = anchor;\n            else if (change.to == this.to && anchor > this.to)\n                change.to = anchor;\n            // Edit contexts sometimes fire empty changes\n            if (change.from == change.to && !change.insert.length)\n                return;\n            this.pendingContextChange = change;\n            applyDOMChangeInner(view, change, EditorSelection.single(this.toEditorPos(e.selectionStart), this.toEditorPos(e.selectionEnd)));\n            // If the transaction didn't flush our change, revert it so\n            // that the context is in sync with the editor state again.\n            if (this.pendingContextChange)\n                this.revertPending(view.state);\n        };\n        this.handlers.characterboundsupdate = e => {\n            let rects = [], prev = null;\n            for (let i = this.toEditorPos(e.rangeStart), end = this.toEditorPos(e.rangeEnd); i < end; i++) {\n                let rect = view.coordsForChar(i);\n                prev = (rect && new DOMRect(rect.left, rect.top, rect.right - rect.left, rect.bottom - rect.top))\n                    || prev || new DOMRect;\n                rects.push(prev);\n            }\n            context.updateCharacterBounds(e.rangeStart, rects);\n        };\n        this.handlers.textformatupdate = e => {\n            let deco = [];\n            for (let format of e.getTextFormats()) {\n                let lineStyle = format.underlineStyle, thickness = format.underlineThickness;\n                if (lineStyle != \"None\" && thickness != \"None\") {\n                    let style = `text-decoration: underline ${lineStyle == \"Dashed\" ? \"dashed \" : lineStyle == \"Squiggle\" ? \"wavy \" : \"\"}${thickness == \"Thin\" ? 1 : 2}px`;\n                    deco.push(Decoration.mark({ attributes: { style } })\n                        .range(this.toEditorPos(format.rangeStart), this.toEditorPos(format.rangeEnd)));\n                }\n            }\n            view.dispatch({ effects: setEditContextFormatting.of(Decoration.set(deco)) });\n        };\n        this.handlers.compositionstart = () => {\n            if (view.inputState.composing < 0) {\n                view.inputState.composing = 0;\n                view.inputState.compositionFirstChange = true;\n            }\n        };\n        this.handlers.compositionend = () => {\n            view.inputState.composing = -1;\n            view.inputState.compositionFirstChange = null;\n        };\n        for (let event in this.handlers)\n            context.addEventListener(event, this.handlers[event]);\n        this.measureReq = { read: view => {\n                this.editContext.updateControlBounds(view.contentDOM.getBoundingClientRect());\n                let sel = getSelection(view.root);\n                if (sel && sel.rangeCount)\n                    this.editContext.updateSelectionBounds(sel.getRangeAt(0).getBoundingClientRect());\n            } };\n    }\n    applyEdits(update) {\n        let off = 0, abort = false, pending = this.pendingContextChange;\n        update.changes.iterChanges((fromA, toA, _fromB, _toB, insert) => {\n            if (abort)\n                return;\n            let dLen = insert.length - (toA - fromA);\n            if (pending && toA >= pending.to) {\n                if (pending.from == fromA && pending.to == toA && pending.insert.eq(insert)) {\n                    pending = this.pendingContextChange = null; // Match\n                    off += dLen;\n                    this.to += dLen;\n                    return;\n                }\n                else { // Mismatch, revert\n                    pending = null;\n                    this.revertPending(update.state);\n                }\n            }\n            fromA += off;\n            toA += off;\n            if (toA <= this.from) { // Before the window\n                this.from += dLen;\n                this.to += dLen;\n            }\n            else if (fromA < this.to) { // Overlaps with window\n                if (fromA < this.from || toA > this.to || (this.to - this.from) + insert.length > 30000 /* CxVp.MaxSize */) {\n                    abort = true;\n                    return;\n                }\n                this.editContext.updateText(this.toContextPos(fromA), this.toContextPos(toA), insert.toString());\n                this.to += dLen;\n            }\n            off += dLen;\n        });\n        if (pending && !abort)\n            this.revertPending(update.state);\n        return !abort;\n    }\n    update(update) {\n        if (!this.applyEdits(update) || !this.rangeIsValid(update.state)) {\n            this.pendingContextChange = null;\n            this.resetRange(update.state);\n            this.editContext.updateText(0, this.editContext.text.length, update.state.doc.sliceString(this.from, this.to));\n            this.setSelection(update.state);\n        }\n        else if (update.docChanged || update.selectionSet) {\n            this.setSelection(update.state);\n        }\n        if (update.geometryChanged || update.docChanged || update.selectionSet)\n            update.view.requestMeasure(this.measureReq);\n    }\n    resetRange(state) {\n        let { head } = state.selection.main;\n        this.from = Math.max(0, head - 10000 /* CxVp.Margin */);\n        this.to = Math.min(state.doc.length, head + 10000 /* CxVp.Margin */);\n    }\n    revertPending(state) {\n        let pending = this.pendingContextChange;\n        this.pendingContextChange = null;\n        this.editContext.updateText(this.toContextPos(pending.from), this.toContextPos(pending.to + pending.insert.length), state.doc.sliceString(pending.from, pending.to));\n    }\n    setSelection(state) {\n        let { main } = state.selection;\n        let start = this.toContextPos(Math.max(this.from, Math.min(this.to, main.anchor)));\n        let end = this.toContextPos(main.head);\n        if (this.editContext.selectionStart != start || this.editContext.selectionEnd != end)\n            this.editContext.updateSelection(start, end);\n    }\n    rangeIsValid(state) {\n        let { head } = state.selection.main;\n        return !(this.from > 0 && head - this.from < 500 /* CxVp.MinMargin */ ||\n            this.to < state.doc.length && this.to - head < 500 /* CxVp.MinMargin */ ||\n            this.to - this.from > 10000 /* CxVp.Margin */ * 3);\n    }\n    toEditorPos(contextPos) { return contextPos + this.from; }\n    toContextPos(editorPos) { return editorPos - this.from; }\n    destroy() {\n        for (let event in this.handlers)\n            this.editContext.removeEventListener(event, this.handlers[event]);\n    }\n}\n\n// The editor's update state machine looks something like this:\n//\n//     Idle → Updating ⇆ Idle (unchecked) → Measuring → Idle\n//                                         ↑      ↓\n//                                         Updating (measure)\n//\n// The difference between 'Idle' and 'Idle (unchecked)' lies in\n// whether a layout check has been scheduled. A regular update through\n// the `update` method updates the DOM in a write-only fashion, and\n// relies on a check (scheduled with `requestAnimationFrame`) to make\n// sure everything is where it should be and the viewport covers the\n// visible code. That check continues to measure and then optionally\n// update until it reaches a coherent state.\n/**\nAn editor view represents the editor's user interface. It holds\nthe editable DOM surface, and possibly other elements such as the\nline number gutter. It handles events and dispatches state\ntransactions for editing actions.\n*/\nclass EditorView {\n    /**\n    The current editor state.\n    */\n    get state() { return this.viewState.state; }\n    /**\n    To be able to display large documents without consuming too much\n    memory or overloading the browser, CodeMirror only draws the\n    code that is visible (plus a margin around it) to the DOM. This\n    property tells you the extent of the current drawn viewport, in\n    document positions.\n    */\n    get viewport() { return this.viewState.viewport; }\n    /**\n    When there are, for example, large collapsed ranges in the\n    viewport, its size can be a lot bigger than the actual visible\n    content. Thus, if you are doing something like styling the\n    content in the viewport, it is preferable to only do so for\n    these ranges, which are the subset of the viewport that is\n    actually drawn.\n    */\n    get visibleRanges() { return this.viewState.visibleRanges; }\n    /**\n    Returns false when the editor is entirely scrolled out of view\n    or otherwise hidden.\n    */\n    get inView() { return this.viewState.inView; }\n    /**\n    Indicates whether the user is currently composing text via\n    [IME](https://en.wikipedia.org/wiki/Input_method), and at least\n    one change has been made in the current composition.\n    */\n    get composing() { return this.inputState.composing > 0; }\n    /**\n    Indicates whether the user is currently in composing state. Note\n    that on some platforms, like Android, this will be the case a\n    lot, since just putting the cursor on a word starts a\n    composition there.\n    */\n    get compositionStarted() { return this.inputState.composing >= 0; }\n    /**\n    The document or shadow root that the view lives in.\n    */\n    get root() { return this._root; }\n    /**\n    @internal\n    */\n    get win() { return this.dom.ownerDocument.defaultView || window; }\n    /**\n    Construct a new view. You'll want to either provide a `parent`\n    option, or put `view.dom` into your document after creating a\n    view, so that the user can see the editor.\n    */\n    constructor(config = {}) {\n        this.plugins = [];\n        this.pluginMap = new Map;\n        this.editorAttrs = {};\n        this.contentAttrs = {};\n        this.bidiCache = [];\n        this.destroyed = false;\n        /**\n        @internal\n        */\n        this.updateState = 2 /* UpdateState.Updating */;\n        /**\n        @internal\n        */\n        this.measureScheduled = -1;\n        /**\n        @internal\n        */\n        this.measureRequests = [];\n        this.contentDOM = document.createElement(\"div\");\n        this.scrollDOM = document.createElement(\"div\");\n        this.scrollDOM.tabIndex = -1;\n        this.scrollDOM.className = \"cm-scroller\";\n        this.scrollDOM.appendChild(this.contentDOM);\n        this.announceDOM = document.createElement(\"div\");\n        this.announceDOM.className = \"cm-announced\";\n        this.announceDOM.setAttribute(\"aria-live\", \"polite\");\n        this.dom = document.createElement(\"div\");\n        this.dom.appendChild(this.announceDOM);\n        this.dom.appendChild(this.scrollDOM);\n        if (config.parent)\n            config.parent.appendChild(this.dom);\n        let { dispatch } = config;\n        this.dispatchTransactions = config.dispatchTransactions ||\n            (dispatch && ((trs) => trs.forEach(tr => dispatch(tr, this)))) ||\n            ((trs) => this.update(trs));\n        this.dispatch = this.dispatch.bind(this);\n        this._root = (config.root || getRoot(config.parent) || document);\n        this.viewState = new ViewState(config.state || EditorState.create(config));\n        if (config.scrollTo && config.scrollTo.is(scrollIntoView))\n            this.viewState.scrollTarget = config.scrollTo.value.clip(this.viewState.state);\n        this.plugins = this.state.facet(viewPlugin).map(spec => new PluginInstance(spec));\n        for (let plugin of this.plugins)\n            plugin.update(this);\n        this.observer = new DOMObserver(this);\n        this.inputState = new InputState(this);\n        this.inputState.ensureHandlers(this.plugins);\n        this.docView = new DocView(this);\n        this.mountStyles();\n        this.updateAttrs();\n        this.updateState = 0 /* UpdateState.Idle */;\n        this.requestMeasure();\n    }\n    dispatch(...input) {\n        let trs = input.length == 1 && input[0] instanceof Transaction ? input\n            : input.length == 1 && Array.isArray(input[0]) ? input[0]\n                : [this.state.update(...input)];\n        this.dispatchTransactions(trs, this);\n    }\n    /**\n    Update the view for the given array of transactions. This will\n    update the visible document and selection to match the state\n    produced by the transactions, and notify view plugins of the\n    change. You should usually call\n    [`dispatch`](https://codemirror.net/6/docs/ref/#view.EditorView.dispatch) instead, which uses this\n    as a primitive.\n    */\n    update(transactions) {\n        if (this.updateState != 0 /* UpdateState.Idle */)\n            throw new Error(\"Calls to EditorView.update are not allowed while an update is in progress\");\n        let redrawn = false, attrsChanged = false, update;\n        let state = this.state;\n        for (let tr of transactions) {\n            if (tr.startState != state)\n                throw new RangeError(\"Trying to update state with a transaction that doesn't start from the previous state.\");\n            state = tr.state;\n        }\n        if (this.destroyed) {\n            this.viewState.state = state;\n            return;\n        }\n        let focus = this.hasFocus, focusFlag = 0, dispatchFocus = null;\n        if (transactions.some(tr => tr.annotation(isFocusChange))) {\n            this.inputState.notifiedFocused = focus;\n            // If a focus-change transaction is being dispatched, set this update flag.\n            focusFlag = 1 /* UpdateFlag.Focus */;\n        }\n        else if (focus != this.inputState.notifiedFocused) {\n            this.inputState.notifiedFocused = focus;\n            // Schedule a separate focus transaction if necessary, otherwise\n            // add a flag to this update\n            dispatchFocus = focusChangeTransaction(state, focus);\n            if (!dispatchFocus)\n                focusFlag = 1 /* UpdateFlag.Focus */;\n        }\n        // If there was a pending DOM change, eagerly read it and try to\n        // apply it after the given transactions.\n        let pendingKey = this.observer.delayedAndroidKey, domChange = null;\n        if (pendingKey) {\n            this.observer.clearDelayedAndroidKey();\n            domChange = this.observer.readChange();\n            // Only try to apply DOM changes if the transactions didn't\n            // change the doc or selection.\n            if (domChange && !this.state.doc.eq(state.doc) || !this.state.selection.eq(state.selection))\n                domChange = null;\n        }\n        else {\n            this.observer.clear();\n        }\n        // When the phrases change, redraw the editor\n        if (state.facet(EditorState.phrases) != this.state.facet(EditorState.phrases))\n            return this.setState(state);\n        update = ViewUpdate.create(this, state, transactions);\n        update.flags |= focusFlag;\n        let scrollTarget = this.viewState.scrollTarget;\n        try {\n            this.updateState = 2 /* UpdateState.Updating */;\n            for (let tr of transactions) {\n                if (scrollTarget)\n                    scrollTarget = scrollTarget.map(tr.changes);\n                if (tr.scrollIntoView) {\n                    let { main } = tr.state.selection;\n                    scrollTarget = new ScrollTarget(main.empty ? main : EditorSelection.cursor(main.head, main.head > main.anchor ? -1 : 1));\n                }\n                for (let e of tr.effects)\n                    if (e.is(scrollIntoView))\n                        scrollTarget = e.value.clip(this.state);\n            }\n            this.viewState.update(update, scrollTarget);\n            this.bidiCache = CachedOrder.update(this.bidiCache, update.changes);\n            if (!update.empty) {\n                this.updatePlugins(update);\n                this.inputState.update(update);\n            }\n            redrawn = this.docView.update(update);\n            if (this.state.facet(styleModule) != this.styleModules)\n                this.mountStyles();\n            attrsChanged = this.updateAttrs();\n            this.showAnnouncements(transactions);\n            this.docView.updateSelection(redrawn, transactions.some(tr => tr.isUserEvent(\"select.pointer\")));\n        }\n        finally {\n            this.updateState = 0 /* UpdateState.Idle */;\n        }\n        if (update.startState.facet(theme) != update.state.facet(theme))\n            this.viewState.mustMeasureContent = true;\n        if (redrawn || attrsChanged || scrollTarget || this.viewState.mustEnforceCursorAssoc || this.viewState.mustMeasureContent)\n            this.requestMeasure();\n        if (redrawn)\n            this.docViewUpdate();\n        if (!update.empty)\n            for (let listener of this.state.facet(updateListener)) {\n                try {\n                    listener(update);\n                }\n                catch (e) {\n                    logException(this.state, e, \"update listener\");\n                }\n            }\n        if (dispatchFocus || domChange)\n            Promise.resolve().then(() => {\n                if (dispatchFocus && this.state == dispatchFocus.startState)\n                    this.dispatch(dispatchFocus);\n                if (domChange) {\n                    if (!applyDOMChange(this, domChange) && pendingKey.force)\n                        dispatchKey(this.contentDOM, pendingKey.key, pendingKey.keyCode);\n                }\n            });\n    }\n    /**\n    Reset the view to the given state. (This will cause the entire\n    document to be redrawn and all view plugins to be reinitialized,\n    so you should probably only use it when the new state isn't\n    derived from the old state. Otherwise, use\n    [`dispatch`](https://codemirror.net/6/docs/ref/#view.EditorView.dispatch) instead.)\n    */\n    setState(newState) {\n        if (this.updateState != 0 /* UpdateState.Idle */)\n            throw new Error(\"Calls to EditorView.setState are not allowed while an update is in progress\");\n        if (this.destroyed) {\n            this.viewState.state = newState;\n            return;\n        }\n        this.updateState = 2 /* UpdateState.Updating */;\n        let hadFocus = this.hasFocus;\n        try {\n            for (let plugin of this.plugins)\n                plugin.destroy(this);\n            this.viewState = new ViewState(newState);\n            this.plugins = newState.facet(viewPlugin).map(spec => new PluginInstance(spec));\n            this.pluginMap.clear();\n            for (let plugin of this.plugins)\n                plugin.update(this);\n            this.docView.destroy();\n            this.docView = new DocView(this);\n            this.inputState.ensureHandlers(this.plugins);\n            this.mountStyles();\n            this.updateAttrs();\n            this.bidiCache = [];\n        }\n        finally {\n            this.updateState = 0 /* UpdateState.Idle */;\n        }\n        if (hadFocus)\n            this.focus();\n        this.requestMeasure();\n    }\n    updatePlugins(update) {\n        let prevSpecs = update.startState.facet(viewPlugin), specs = update.state.facet(viewPlugin);\n        if (prevSpecs != specs) {\n            let newPlugins = [];\n            for (let spec of specs) {\n                let found = prevSpecs.indexOf(spec);\n                if (found < 0) {\n                    newPlugins.push(new PluginInstance(spec));\n                }\n                else {\n                    let plugin = this.plugins[found];\n                    plugin.mustUpdate = update;\n                    newPlugins.push(plugin);\n                }\n            }\n            for (let plugin of this.plugins)\n                if (plugin.mustUpdate != update)\n                    plugin.destroy(this);\n            this.plugins = newPlugins;\n            this.pluginMap.clear();\n        }\n        else {\n            for (let p of this.plugins)\n                p.mustUpdate = update;\n        }\n        for (let i = 0; i < this.plugins.length; i++)\n            this.plugins[i].update(this);\n        if (prevSpecs != specs)\n            this.inputState.ensureHandlers(this.plugins);\n    }\n    docViewUpdate() {\n        for (let plugin of this.plugins) {\n            let val = plugin.value;\n            if (val && val.docViewUpdate) {\n                try {\n                    val.docViewUpdate(this);\n                }\n                catch (e) {\n                    logException(this.state, e, \"doc view update listener\");\n                }\n            }\n        }\n    }\n    /**\n    @internal\n    */\n    measure(flush = true) {\n        if (this.destroyed)\n            return;\n        if (this.measureScheduled > -1)\n            this.win.cancelAnimationFrame(this.measureScheduled);\n        if (this.observer.delayedAndroidKey) {\n            this.measureScheduled = -1;\n            this.requestMeasure();\n            return;\n        }\n        this.measureScheduled = 0; // Prevent requestMeasure calls from scheduling another animation frame\n        if (flush)\n            this.observer.forceFlush();\n        let updated = null;\n        let sDOM = this.scrollDOM, scrollTop = sDOM.scrollTop * this.scaleY;\n        let { scrollAnchorPos, scrollAnchorHeight } = this.viewState;\n        if (Math.abs(scrollTop - this.viewState.scrollTop) > 1)\n            scrollAnchorHeight = -1;\n        this.viewState.scrollAnchorHeight = -1;\n        try {\n            for (let i = 0;; i++) {\n                if (scrollAnchorHeight < 0) {\n                    if (isScrolledToBottom(sDOM)) {\n                        scrollAnchorPos = -1;\n                        scrollAnchorHeight = this.viewState.heightMap.height;\n                    }\n                    else {\n                        let block = this.viewState.scrollAnchorAt(scrollTop);\n                        scrollAnchorPos = block.from;\n                        scrollAnchorHeight = block.top;\n                    }\n                }\n                this.updateState = 1 /* UpdateState.Measuring */;\n                let changed = this.viewState.measure(this);\n                if (!changed && !this.measureRequests.length && this.viewState.scrollTarget == null)\n                    break;\n                if (i > 5) {\n                    console.warn(this.measureRequests.length\n                        ? \"Measure loop restarted more than 5 times\"\n                        : \"Viewport failed to stabilize\");\n                    break;\n                }\n                let measuring = [];\n                // Only run measure requests in this cycle when the viewport didn't change\n                if (!(changed & 4 /* UpdateFlag.Viewport */))\n                    [this.measureRequests, measuring] = [measuring, this.measureRequests];\n                let measured = measuring.map(m => {\n                    try {\n                        return m.read(this);\n                    }\n                    catch (e) {\n                        logException(this.state, e);\n                        return BadMeasure;\n                    }\n                });\n                let update = ViewUpdate.create(this, this.state, []), redrawn = false;\n                update.flags |= changed;\n                if (!updated)\n                    updated = update;\n                else\n                    updated.flags |= changed;\n                this.updateState = 2 /* UpdateState.Updating */;\n                if (!update.empty) {\n                    this.updatePlugins(update);\n                    this.inputState.update(update);\n                    this.updateAttrs();\n                    redrawn = this.docView.update(update);\n                    if (redrawn)\n                        this.docViewUpdate();\n                }\n                for (let i = 0; i < measuring.length; i++)\n                    if (measured[i] != BadMeasure) {\n                        try {\n                            let m = measuring[i];\n                            if (m.write)\n                                m.write(measured[i], this);\n                        }\n                        catch (e) {\n                            logException(this.state, e);\n                        }\n                    }\n                if (redrawn)\n                    this.docView.updateSelection(true);\n                if (!update.viewportChanged && this.measureRequests.length == 0) {\n                    if (this.viewState.editorHeight) {\n                        if (this.viewState.scrollTarget) {\n                            this.docView.scrollIntoView(this.viewState.scrollTarget);\n                            this.viewState.scrollTarget = null;\n                            scrollAnchorHeight = -1;\n                            continue;\n                        }\n                        else {\n                            let newAnchorHeight = scrollAnchorPos < 0 ? this.viewState.heightMap.height :\n                                this.viewState.lineBlockAt(scrollAnchorPos).top;\n                            let diff = newAnchorHeight - scrollAnchorHeight;\n                            if (diff > 1 || diff < -1) {\n                                scrollTop = scrollTop + diff;\n                                sDOM.scrollTop = scrollTop / this.scaleY;\n                                scrollAnchorHeight = -1;\n                                continue;\n                            }\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n        finally {\n            this.updateState = 0 /* UpdateState.Idle */;\n            this.measureScheduled = -1;\n        }\n        if (updated && !updated.empty)\n            for (let listener of this.state.facet(updateListener))\n                listener(updated);\n    }\n    /**\n    Get the CSS classes for the currently active editor themes.\n    */\n    get themeClasses() {\n        return baseThemeID + \" \" +\n            (this.state.facet(darkTheme) ? baseDarkID : baseLightID) + \" \" +\n            this.state.facet(theme);\n    }\n    updateAttrs() {\n        let editorAttrs = attrsFromFacet(this, editorAttributes, {\n            class: \"cm-editor\" + (this.hasFocus ? \" cm-focused \" : \" \") + this.themeClasses\n        });\n        let contentAttrs = {\n            spellcheck: \"false\",\n            autocorrect: \"off\",\n            autocapitalize: \"off\",\n            translate: \"no\",\n            contenteditable: !this.state.facet(editable) ? \"false\" : \"true\",\n            class: \"cm-content\",\n            style: `${browser.tabSize}: ${this.state.tabSize}`,\n            role: \"textbox\",\n            \"aria-multiline\": \"true\"\n        };\n        if (this.state.readOnly)\n            contentAttrs[\"aria-readonly\"] = \"true\";\n        attrsFromFacet(this, contentAttributes, contentAttrs);\n        let changed = this.observer.ignore(() => {\n            let changedContent = updateAttrs(this.contentDOM, this.contentAttrs, contentAttrs);\n            let changedEditor = updateAttrs(this.dom, this.editorAttrs, editorAttrs);\n            return changedContent || changedEditor;\n        });\n        this.editorAttrs = editorAttrs;\n        this.contentAttrs = contentAttrs;\n        return changed;\n    }\n    showAnnouncements(trs) {\n        let first = true;\n        for (let tr of trs)\n            for (let effect of tr.effects)\n                if (effect.is(EditorView.announce)) {\n                    if (first)\n                        this.announceDOM.textContent = \"\";\n                    first = false;\n                    let div = this.announceDOM.appendChild(document.createElement(\"div\"));\n                    div.textContent = effect.value;\n                }\n    }\n    mountStyles() {\n        this.styleModules = this.state.facet(styleModule);\n        let nonce = this.state.facet(EditorView.cspNonce);\n        StyleModule.mount(this.root, this.styleModules.concat(baseTheme$1).reverse(), nonce ? { nonce } : undefined);\n    }\n    readMeasured() {\n        if (this.updateState == 2 /* UpdateState.Updating */)\n            throw new Error(\"Reading the editor layout isn't allowed during an update\");\n        if (this.updateState == 0 /* UpdateState.Idle */ && this.measureScheduled > -1)\n            this.measure(false);\n    }\n    /**\n    Schedule a layout measurement, optionally providing callbacks to\n    do custom DOM measuring followed by a DOM write phase. Using\n    this is preferable reading DOM layout directly from, for\n    example, an event handler, because it'll make sure measuring and\n    drawing done by other components is synchronized, avoiding\n    unnecessary DOM layout computations.\n    */\n    requestMeasure(request) {\n        if (this.measureScheduled < 0)\n            this.measureScheduled = this.win.requestAnimationFrame(() => this.measure());\n        if (request) {\n            if (this.measureRequests.indexOf(request) > -1)\n                return;\n            if (request.key != null)\n                for (let i = 0; i < this.measureRequests.length; i++) {\n                    if (this.measureRequests[i].key === request.key) {\n                        this.measureRequests[i] = request;\n                        return;\n                    }\n                }\n            this.measureRequests.push(request);\n        }\n    }\n    /**\n    Get the value of a specific plugin, if present. Note that\n    plugins that crash can be dropped from a view, so even when you\n    know you registered a given plugin, it is recommended to check\n    the return value of this method.\n    */\n    plugin(plugin) {\n        let known = this.pluginMap.get(plugin);\n        if (known === undefined || known && known.spec != plugin)\n            this.pluginMap.set(plugin, known = this.plugins.find(p => p.spec == plugin) || null);\n        return known && known.update(this).value;\n    }\n    /**\n    The top position of the document, in screen coordinates. This\n    may be negative when the editor is scrolled down. Points\n    directly to the top of the first line, not above the padding.\n    */\n    get documentTop() {\n        return this.contentDOM.getBoundingClientRect().top + this.viewState.paddingTop;\n    }\n    /**\n    Reports the padding above and below the document.\n    */\n    get documentPadding() {\n        return { top: this.viewState.paddingTop, bottom: this.viewState.paddingBottom };\n    }\n    /**\n    If the editor is transformed with CSS, this provides the scale\n    along the X axis. Otherwise, it will just be 1. Note that\n    transforms other than translation and scaling are not supported.\n    */\n    get scaleX() { return this.viewState.scaleX; }\n    /**\n    Provide the CSS transformed scale along the Y axis.\n    */\n    get scaleY() { return this.viewState.scaleY; }\n    /**\n    Find the text line or block widget at the given vertical\n    position (which is interpreted as relative to the [top of the\n    document](https://codemirror.net/6/docs/ref/#view.EditorView.documentTop)).\n    */\n    elementAtHeight(height) {\n        this.readMeasured();\n        return this.viewState.elementAtHeight(height);\n    }\n    /**\n    Find the line block (see\n    [`lineBlockAt`](https://codemirror.net/6/docs/ref/#view.EditorView.lineBlockAt) at the given\n    height, again interpreted relative to the [top of the\n    document](https://codemirror.net/6/docs/ref/#view.EditorView.documentTop).\n    */\n    lineBlockAtHeight(height) {\n        this.readMeasured();\n        return this.viewState.lineBlockAtHeight(height);\n    }\n    /**\n    Get the extent and vertical position of all [line\n    blocks](https://codemirror.net/6/docs/ref/#view.EditorView.lineBlockAt) in the viewport. Positions\n    are relative to the [top of the\n    document](https://codemirror.net/6/docs/ref/#view.EditorView.documentTop);\n    */\n    get viewportLineBlocks() {\n        return this.viewState.viewportLines;\n    }\n    /**\n    Find the line block around the given document position. A line\n    block is a range delimited on both sides by either a\n    non-[hidden](https://codemirror.net/6/docs/ref/#view.Decoration^replace) line breaks, or the\n    start/end of the document. It will usually just hold a line of\n    text, but may be broken into multiple textblocks by block\n    widgets.\n    */\n    lineBlockAt(pos) {\n        return this.viewState.lineBlockAt(pos);\n    }\n    /**\n    The editor's total content height.\n    */\n    get contentHeight() {\n        return this.viewState.contentHeight;\n    }\n    /**\n    Move a cursor position by [grapheme\n    cluster](https://codemirror.net/6/docs/ref/#state.findClusterBreak). `forward` determines whether\n    the motion is away from the line start, or towards it. In\n    bidirectional text, the line is traversed in visual order, using\n    the editor's [text direction](https://codemirror.net/6/docs/ref/#view.EditorView.textDirection).\n    When the start position was the last one on the line, the\n    returned position will be across the line break. If there is no\n    further line, the original position is returned.\n    \n    By default, this method moves over a single cluster. The\n    optional `by` argument can be used to move across more. It will\n    be called with the first cluster as argument, and should return\n    a predicate that determines, for each subsequent cluster,\n    whether it should also be moved over.\n    */\n    moveByChar(start, forward, by) {\n        return skipAtoms(this, start, moveByChar(this, start, forward, by));\n    }\n    /**\n    Move a cursor position across the next group of either\n    [letters](https://codemirror.net/6/docs/ref/#state.EditorState.charCategorizer) or non-letter\n    non-whitespace characters.\n    */\n    moveByGroup(start, forward) {\n        return skipAtoms(this, start, moveByChar(this, start, forward, initial => byGroup(this, start.head, initial)));\n    }\n    /**\n    Get the cursor position visually at the start or end of a line.\n    Note that this may differ from the _logical_ position at its\n    start or end (which is simply at `line.from`/`line.to`) if text\n    at the start or end goes against the line's base text direction.\n    */\n    visualLineSide(line, end) {\n        let order = this.bidiSpans(line), dir = this.textDirectionAt(line.from);\n        let span = order[end ? order.length - 1 : 0];\n        return EditorSelection.cursor(span.side(end, dir) + line.from, span.forward(!end, dir) ? 1 : -1);\n    }\n    /**\n    Move to the next line boundary in the given direction. If\n    `includeWrap` is true, line wrapping is on, and there is a\n    further wrap point on the current line, the wrap point will be\n    returned. Otherwise this function will return the start or end\n    of the line.\n    */\n    moveToLineBoundary(start, forward, includeWrap = true) {\n        return moveToLineBoundary(this, start, forward, includeWrap);\n    }\n    /**\n    Move a cursor position vertically. When `distance` isn't given,\n    it defaults to moving to the next line (including wrapped\n    lines). Otherwise, `distance` should provide a positive distance\n    in pixels.\n    \n    When `start` has a\n    [`goalColumn`](https://codemirror.net/6/docs/ref/#state.SelectionRange.goalColumn), the vertical\n    motion will use that as a target horizontal position. Otherwise,\n    the cursor's own horizontal position is used. The returned\n    cursor will have its goal column set to whichever column was\n    used.\n    */\n    moveVertically(start, forward, distance) {\n        return skipAtoms(this, start, moveVertically(this, start, forward, distance));\n    }\n    /**\n    Find the DOM parent node and offset (child offset if `node` is\n    an element, character offset when it is a text node) at the\n    given document position.\n    \n    Note that for positions that aren't currently in\n    `visibleRanges`, the resulting DOM position isn't necessarily\n    meaningful (it may just point before or after a placeholder\n    element).\n    */\n    domAtPos(pos) {\n        return this.docView.domAtPos(pos);\n    }\n    /**\n    Find the document position at the given DOM node. Can be useful\n    for associating positions with DOM events. Will raise an error\n    when `node` isn't part of the editor content.\n    */\n    posAtDOM(node, offset = 0) {\n        return this.docView.posFromDOM(node, offset);\n    }\n    posAtCoords(coords, precise = true) {\n        this.readMeasured();\n        return posAtCoords(this, coords, precise);\n    }\n    /**\n    Get the screen coordinates at the given document position.\n    `side` determines whether the coordinates are based on the\n    element before (-1) or after (1) the position (if no element is\n    available on the given side, the method will transparently use\n    another strategy to get reasonable coordinates).\n    */\n    coordsAtPos(pos, side = 1) {\n        this.readMeasured();\n        let rect = this.docView.coordsAt(pos, side);\n        if (!rect || rect.left == rect.right)\n            return rect;\n        let line = this.state.doc.lineAt(pos), order = this.bidiSpans(line);\n        let span = order[BidiSpan.find(order, pos - line.from, -1, side)];\n        return flattenRect(rect, (span.dir == Direction.LTR) == (side > 0));\n    }\n    /**\n    Return the rectangle around a given character. If `pos` does not\n    point in front of a character that is in the viewport and\n    rendered (i.e. not replaced, not a line break), this will return\n    null. For space characters that are a line wrap point, this will\n    return the position before the line break.\n    */\n    coordsForChar(pos) {\n        this.readMeasured();\n        return this.docView.coordsForChar(pos);\n    }\n    /**\n    The default width of a character in the editor. May not\n    accurately reflect the width of all characters (given variable\n    width fonts or styling of invididual ranges).\n    */\n    get defaultCharacterWidth() { return this.viewState.heightOracle.charWidth; }\n    /**\n    The default height of a line in the editor. May not be accurate\n    for all lines.\n    */\n    get defaultLineHeight() { return this.viewState.heightOracle.lineHeight; }\n    /**\n    The text direction\n    ([`direction`](https://developer.mozilla.org/en-US/docs/Web/CSS/direction)\n    CSS property) of the editor's content element.\n    */\n    get textDirection() { return this.viewState.defaultTextDirection; }\n    /**\n    Find the text direction of the block at the given position, as\n    assigned by CSS. If\n    [`perLineTextDirection`](https://codemirror.net/6/docs/ref/#view.EditorView^perLineTextDirection)\n    isn't enabled, or the given position is outside of the viewport,\n    this will always return the same as\n    [`textDirection`](https://codemirror.net/6/docs/ref/#view.EditorView.textDirection). Note that\n    this may trigger a DOM layout.\n    */\n    textDirectionAt(pos) {\n        let perLine = this.state.facet(perLineTextDirection);\n        if (!perLine || pos < this.viewport.from || pos > this.viewport.to)\n            return this.textDirection;\n        this.readMeasured();\n        return this.docView.textDirectionAt(pos);\n    }\n    /**\n    Whether this editor [wraps lines](https://codemirror.net/6/docs/ref/#view.EditorView.lineWrapping)\n    (as determined by the\n    [`white-space`](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)\n    CSS property of its content element).\n    */\n    get lineWrapping() { return this.viewState.heightOracle.lineWrapping; }\n    /**\n    Returns the bidirectional text structure of the given line\n    (which should be in the current document) as an array of span\n    objects. The order of these spans matches the [text\n    direction](https://codemirror.net/6/docs/ref/#view.EditorView.textDirection)—if that is\n    left-to-right, the leftmost spans come first, otherwise the\n    rightmost spans come first.\n    */\n    bidiSpans(line) {\n        if (line.length > MaxBidiLine)\n            return trivialOrder(line.length);\n        let dir = this.textDirectionAt(line.from), isolates;\n        for (let entry of this.bidiCache) {\n            if (entry.from == line.from && entry.dir == dir &&\n                (entry.fresh || isolatesEq(entry.isolates, isolates = getIsolatedRanges(this, line))))\n                return entry.order;\n        }\n        if (!isolates)\n            isolates = getIsolatedRanges(this, line);\n        let order = computeOrder(line.text, dir, isolates);\n        this.bidiCache.push(new CachedOrder(line.from, line.to, dir, isolates, true, order));\n        return order;\n    }\n    /**\n    Check whether the editor has focus.\n    */\n    get hasFocus() {\n        var _a;\n        // Safari return false for hasFocus when the context menu is open\n        // or closing, which leads us to ignore selection changes from the\n        // context menu because it looks like the editor isn't focused.\n        // This kludges around that.\n        return (this.dom.ownerDocument.hasFocus() || browser.safari && ((_a = this.inputState) === null || _a === void 0 ? void 0 : _a.lastContextMenu) > Date.now() - 3e4) &&\n            this.root.activeElement == this.contentDOM;\n    }\n    /**\n    Put focus on the editor.\n    */\n    focus() {\n        this.observer.ignore(() => {\n            focusPreventScroll(this.contentDOM);\n            this.docView.updateSelection();\n        });\n    }\n    /**\n    Update the [root](https://codemirror.net/6/docs/ref/##view.EditorViewConfig.root) in which the editor lives. This is only\n    necessary when moving the editor's existing DOM to a new window or shadow root.\n    */\n    setRoot(root) {\n        if (this._root != root) {\n            this._root = root;\n            this.observer.setWindow((root.nodeType == 9 ? root : root.ownerDocument).defaultView || window);\n            this.mountStyles();\n        }\n    }\n    /**\n    Clean up this editor view, removing its element from the\n    document, unregistering event handlers, and notifying\n    plugins. The view instance can no longer be used after\n    calling this.\n    */\n    destroy() {\n        if (this.root.activeElement == this.contentDOM)\n            this.contentDOM.blur();\n        for (let plugin of this.plugins)\n            plugin.destroy(this);\n        this.plugins = [];\n        this.inputState.destroy();\n        this.docView.destroy();\n        this.dom.remove();\n        this.observer.destroy();\n        if (this.measureScheduled > -1)\n            this.win.cancelAnimationFrame(this.measureScheduled);\n        this.destroyed = true;\n    }\n    /**\n    Returns an effect that can be\n    [added](https://codemirror.net/6/docs/ref/#state.TransactionSpec.effects) to a transaction to\n    cause it to scroll the given position or range into view.\n    */\n    static scrollIntoView(pos, options = {}) {\n        return scrollIntoView.of(new ScrollTarget(typeof pos == \"number\" ? EditorSelection.cursor(pos) : pos, options.y, options.x, options.yMargin, options.xMargin));\n    }\n    /**\n    Return an effect that resets the editor to its current (at the\n    time this method was called) scroll position. Note that this\n    only affects the editor's own scrollable element, not parents.\n    See also\n    [`EditorViewConfig.scrollTo`](https://codemirror.net/6/docs/ref/#view.EditorViewConfig.scrollTo).\n    \n    The effect should be used with a document identical to the one\n    it was created for. Failing to do so is not an error, but may\n    not scroll to the expected position. You can\n    [map](https://codemirror.net/6/docs/ref/#state.StateEffect.map) the effect to account for changes.\n    */\n    scrollSnapshot() {\n        let { scrollTop, scrollLeft } = this.scrollDOM;\n        let ref = this.viewState.scrollAnchorAt(scrollTop);\n        return scrollIntoView.of(new ScrollTarget(EditorSelection.cursor(ref.from), \"start\", \"start\", ref.top - scrollTop, scrollLeft, true));\n    }\n    /**\n    Enable or disable tab-focus mode, which disables key bindings\n    for Tab and Shift-Tab, letting the browser's default\n    focus-changing behavior go through instead. This is useful to\n    prevent trapping keyboard users in your editor.\n    \n    Without argument, this toggles the mode. With a boolean, it\n    enables (true) or disables it (false). Given a number, it\n    temporarily enables the mode until that number of milliseconds\n    have passed or another non-Tab key is pressed.\n    */\n    setTabFocusMode(to) {\n        if (to == null)\n            this.inputState.tabFocusMode = this.inputState.tabFocusMode < 0 ? 0 : -1;\n        else if (typeof to == \"boolean\")\n            this.inputState.tabFocusMode = to ? 0 : -1;\n        else if (this.inputState.tabFocusMode != 0)\n            this.inputState.tabFocusMode = Date.now() + to;\n    }\n    /**\n    Returns an extension that can be used to add DOM event handlers.\n    The value should be an object mapping event names to handler\n    functions. For any given event, such functions are ordered by\n    extension precedence, and the first handler to return true will\n    be assumed to have handled that event, and no other handlers or\n    built-in behavior will be activated for it. These are registered\n    on the [content element](https://codemirror.net/6/docs/ref/#view.EditorView.contentDOM), except\n    for `scroll` handlers, which will be called any time the\n    editor's [scroll element](https://codemirror.net/6/docs/ref/#view.EditorView.scrollDOM) or one of\n    its parent nodes is scrolled.\n    */\n    static domEventHandlers(handlers) {\n        return ViewPlugin.define(() => ({}), { eventHandlers: handlers });\n    }\n    /**\n    Create an extension that registers DOM event observers. Contrary\n    to event [handlers](https://codemirror.net/6/docs/ref/#view.EditorView^domEventHandlers),\n    observers can't be prevented from running by a higher-precedence\n    handler returning true. They also don't prevent other handlers\n    and observers from running when they return true, and should not\n    call `preventDefault`.\n    */\n    static domEventObservers(observers) {\n        return ViewPlugin.define(() => ({}), { eventObservers: observers });\n    }\n    /**\n    Create a theme extension. The first argument can be a\n    [`style-mod`](https://github.com/marijnh/style-mod#documentation)\n    style spec providing the styles for the theme. These will be\n    prefixed with a generated class for the style.\n    \n    Because the selectors will be prefixed with a scope class, rule\n    that directly match the editor's [wrapper\n    element](https://codemirror.net/6/docs/ref/#view.EditorView.dom)—to which the scope class will be\n    added—need to be explicitly differentiated by adding an `&` to\n    the selector for that element—for example\n    `&.cm-focused`.\n    \n    When `dark` is set to true, the theme will be marked as dark,\n    which will cause the `&dark` rules from [base\n    themes](https://codemirror.net/6/docs/ref/#view.EditorView^baseTheme) to be used (as opposed to\n    `&light` when a light theme is active).\n    */\n    static theme(spec, options) {\n        let prefix = StyleModule.newName();\n        let result = [theme.of(prefix), styleModule.of(buildTheme(`.${prefix}`, spec))];\n        if (options && options.dark)\n            result.push(darkTheme.of(true));\n        return result;\n    }\n    /**\n    Create an extension that adds styles to the base theme. Like\n    with [`theme`](https://codemirror.net/6/docs/ref/#view.EditorView^theme), use `&` to indicate the\n    place of the editor wrapper element when directly targeting\n    that. You can also use `&dark` or `&light` instead to only\n    target editors with a dark or light theme.\n    */\n    static baseTheme(spec) {\n        return Prec.lowest(styleModule.of(buildTheme(\".\" + baseThemeID, spec, lightDarkIDs)));\n    }\n    /**\n    Retrieve an editor view instance from the view's DOM\n    representation.\n    */\n    static findFromDOM(dom) {\n        var _a;\n        let content = dom.querySelector(\".cm-content\");\n        let cView = content && ContentView.get(content) || ContentView.get(dom);\n        return ((_a = cView === null || cView === void 0 ? void 0 : cView.rootView) === null || _a === void 0 ? void 0 : _a.view) || null;\n    }\n}\n/**\nFacet to add a [style\nmodule](https://github.com/marijnh/style-mod#documentation) to\nan editor view. The view will ensure that the module is\nmounted in its [document\nroot](https://codemirror.net/6/docs/ref/#view.EditorView.constructor^config.root).\n*/\nEditorView.styleModule = styleModule;\n/**\nAn input handler can override the way changes to the editable\nDOM content are handled. Handlers are passed the document\npositions between which the change was found, and the new\ncontent. When one returns true, no further input handlers are\ncalled and the default behavior is prevented.\n\nThe `insert` argument can be used to get the default transaction\nthat would be applied for this input. This can be useful when\ndispatching the custom behavior as a separate transaction.\n*/\nEditorView.inputHandler = inputHandler;\n/**\nScroll handlers can override how things are scrolled into view.\nIf they return `true`, no further handling happens for the\nscrolling. If they return false, the default scroll behavior is\napplied. Scroll handlers should never initiate editor updates.\n*/\nEditorView.scrollHandler = scrollHandler;\n/**\nThis facet can be used to provide functions that create effects\nto be dispatched when the editor's focus state changes.\n*/\nEditorView.focusChangeEffect = focusChangeEffect;\n/**\nBy default, the editor assumes all its content has the same\n[text direction](https://codemirror.net/6/docs/ref/#view.Direction). Configure this with a `true`\nvalue to make it read the text direction of every (rendered)\nline separately.\n*/\nEditorView.perLineTextDirection = perLineTextDirection;\n/**\nAllows you to provide a function that should be called when the\nlibrary catches an exception from an extension (mostly from view\nplugins, but may be used by other extensions to route exceptions\nfrom user-code-provided callbacks). This is mostly useful for\ndebugging and logging. See [`logException`](https://codemirror.net/6/docs/ref/#view.logException).\n*/\nEditorView.exceptionSink = exceptionSink;\n/**\nA facet that can be used to register a function to be called\nevery time the view updates.\n*/\nEditorView.updateListener = updateListener;\n/**\nFacet that controls whether the editor content DOM is editable.\nWhen its highest-precedence value is `false`, the element will\nnot have its `contenteditable` attribute set. (Note that this\ndoesn't affect API calls that change the editor content, even\nwhen those are bound to keys or buttons. See the\n[`readOnly`](https://codemirror.net/6/docs/ref/#state.EditorState.readOnly) facet for that.)\n*/\nEditorView.editable = editable;\n/**\nAllows you to influence the way mouse selection happens. The\nfunctions in this facet will be called for a `mousedown` event\non the editor, and can return an object that overrides the way a\nselection is computed from that mouse click or drag.\n*/\nEditorView.mouseSelectionStyle = mouseSelectionStyle;\n/**\nFacet used to configure whether a given selection drag event\nshould move or copy the selection. The given predicate will be\ncalled with the `mousedown` event, and can return `true` when\nthe drag should move the content.\n*/\nEditorView.dragMovesSelection = dragMovesSelection$1;\n/**\nFacet used to configure whether a given selecting click adds a\nnew range to the existing selection or replaces it entirely. The\ndefault behavior is to check `event.metaKey` on macOS, and\n`event.ctrlKey` elsewhere.\n*/\nEditorView.clickAddsSelectionRange = clickAddsSelectionRange;\n/**\nA facet that determines which [decorations](https://codemirror.net/6/docs/ref/#view.Decoration)\nare shown in the view. Decorations can be provided in two\nways—directly, or via a function that takes an editor view.\n\nOnly decoration sets provided directly are allowed to influence\nthe editor's vertical layout structure. The ones provided as\nfunctions are called _after_ the new viewport has been computed,\nand thus **must not** introduce block widgets or replacing\ndecorations that cover line breaks.\n\nIf you want decorated ranges to behave like atomic units for\ncursor motion and deletion purposes, also provide the range set\ncontaining the decorations to\n[`EditorView.atomicRanges`](https://codemirror.net/6/docs/ref/#view.EditorView^atomicRanges).\n*/\nEditorView.decorations = decorations;\n/**\nFacet that works much like\n[`decorations`](https://codemirror.net/6/docs/ref/#view.EditorView^decorations), but puts its\ninputs at the very bottom of the precedence stack, meaning mark\ndecorations provided here will only be split by other, partially\noverlapping \\`outerDecorations\\` ranges, and wrap around all\nregular decorations. Use this for mark elements that should, as\nmuch as possible, remain in one piece.\n*/\nEditorView.outerDecorations = outerDecorations;\n/**\nUsed to provide ranges that should be treated as atoms as far as\ncursor motion is concerned. This causes methods like\n[`moveByChar`](https://codemirror.net/6/docs/ref/#view.EditorView.moveByChar) and\n[`moveVertically`](https://codemirror.net/6/docs/ref/#view.EditorView.moveVertically) (and the\ncommands built on top of them) to skip across such regions when\na selection endpoint would enter them. This does _not_ prevent\ndirect programmatic [selection\nupdates](https://codemirror.net/6/docs/ref/#state.TransactionSpec.selection) from moving into such\nregions.\n*/\nEditorView.atomicRanges = atomicRanges;\n/**\nWhen range decorations add a `unicode-bidi: isolate` style, they\nshould also include a\n[`bidiIsolate`](https://codemirror.net/6/docs/ref/#view.MarkDecorationSpec.bidiIsolate) property\nin their decoration spec, and be exposed through this facet, so\nthat the editor can compute the proper text order. (Other values\nfor `unicode-bidi`, except of course `normal`, are not\nsupported.)\n*/\nEditorView.bidiIsolatedRanges = bidiIsolatedRanges;\n/**\nFacet that allows extensions to provide additional scroll\nmargins (space around the sides of the scrolling element that\nshould be considered invisible). This can be useful when the\nplugin introduces elements that cover part of that element (for\nexample a horizontally fixed gutter).\n*/\nEditorView.scrollMargins = scrollMargins;\n/**\nThis facet records whether a dark theme is active. The extension\nreturned by [`theme`](https://codemirror.net/6/docs/ref/#view.EditorView^theme) automatically\nincludes an instance of this when the `dark` option is set to\ntrue.\n*/\nEditorView.darkTheme = darkTheme;\n/**\nProvides a Content Security Policy nonce to use when creating\nthe style sheets for the editor. Holds the empty string when no\nnonce has been provided.\n*/\nEditorView.cspNonce = /*@__PURE__*/Facet.define({ combine: values => values.length ? values[0] : \"\" });\n/**\nFacet that provides additional DOM attributes for the editor's\neditable DOM element.\n*/\nEditorView.contentAttributes = contentAttributes;\n/**\nFacet that provides DOM attributes for the editor's outer\nelement.\n*/\nEditorView.editorAttributes = editorAttributes;\n/**\nAn extension that enables line wrapping in the editor (by\nsetting CSS `white-space` to `pre-wrap` in the content).\n*/\nEditorView.lineWrapping = /*@__PURE__*/EditorView.contentAttributes.of({ \"class\": \"cm-lineWrapping\" });\n/**\nState effect used to include screen reader announcements in a\ntransaction. These will be added to the DOM in a visually hidden\nelement with `aria-live=\"polite\"` set, and should be used to\ndescribe effects that are visually obvious but may not be\nnoticed by screen reader users (such as moving to the next\nsearch match).\n*/\nEditorView.announce = /*@__PURE__*/StateEffect.define();\n// Maximum line length for which we compute accurate bidi info\nconst MaxBidiLine = 4096;\nconst BadMeasure = {};\nclass CachedOrder {\n    constructor(from, to, dir, isolates, fresh, order) {\n        this.from = from;\n        this.to = to;\n        this.dir = dir;\n        this.isolates = isolates;\n        this.fresh = fresh;\n        this.order = order;\n    }\n    static update(cache, changes) {\n        if (changes.empty && !cache.some(c => c.fresh))\n            return cache;\n        let result = [], lastDir = cache.length ? cache[cache.length - 1].dir : Direction.LTR;\n        for (let i = Math.max(0, cache.length - 10); i < cache.length; i++) {\n            let entry = cache[i];\n            if (entry.dir == lastDir && !changes.touchesRange(entry.from, entry.to))\n                result.push(new CachedOrder(changes.mapPos(entry.from, 1), changes.mapPos(entry.to, -1), entry.dir, entry.isolates, false, entry.order));\n        }\n        return result;\n    }\n}\nfunction attrsFromFacet(view, facet, base) {\n    for (let sources = view.state.facet(facet), i = sources.length - 1; i >= 0; i--) {\n        let source = sources[i], value = typeof source == \"function\" ? source(view) : source;\n        if (value)\n            combineAttrs(value, base);\n    }\n    return base;\n}\n\nconst currentPlatform = browser.mac ? \"mac\" : browser.windows ? \"win\" : browser.linux ? \"linux\" : \"key\";\nfunction normalizeKeyName(name, platform) {\n    const parts = name.split(/-(?!$)/);\n    let result = parts[parts.length - 1];\n    if (result == \"Space\")\n        result = \" \";\n    let alt, ctrl, shift, meta;\n    for (let i = 0; i < parts.length - 1; ++i) {\n        const mod = parts[i];\n        if (/^(cmd|meta|m)$/i.test(mod))\n            meta = true;\n        else if (/^a(lt)?$/i.test(mod))\n            alt = true;\n        else if (/^(c|ctrl|control)$/i.test(mod))\n            ctrl = true;\n        else if (/^s(hift)?$/i.test(mod))\n            shift = true;\n        else if (/^mod$/i.test(mod)) {\n            if (platform == \"mac\")\n                meta = true;\n            else\n                ctrl = true;\n        }\n        else\n            throw new Error(\"Unrecognized modifier name: \" + mod);\n    }\n    if (alt)\n        result = \"Alt-\" + result;\n    if (ctrl)\n        result = \"Ctrl-\" + result;\n    if (meta)\n        result = \"Meta-\" + result;\n    if (shift)\n        result = \"Shift-\" + result;\n    return result;\n}\nfunction modifiers(name, event, shift) {\n    if (event.altKey)\n        name = \"Alt-\" + name;\n    if (event.ctrlKey)\n        name = \"Ctrl-\" + name;\n    if (event.metaKey)\n        name = \"Meta-\" + name;\n    if (shift !== false && event.shiftKey)\n        name = \"Shift-\" + name;\n    return name;\n}\nconst handleKeyEvents = /*@__PURE__*/Prec.default(/*@__PURE__*/EditorView.domEventHandlers({\n    keydown(event, view) {\n        return runHandlers(getKeymap(view.state), event, view, \"editor\");\n    }\n}));\n/**\nFacet used for registering keymaps.\n\nYou can add multiple keymaps to an editor. Their priorities\ndetermine their precedence (the ones specified early or with high\npriority get checked first). When a handler has returned `true`\nfor a given key, no further handlers are called.\n*/\nconst keymap = /*@__PURE__*/Facet.define({ enables: handleKeyEvents });\nconst Keymaps = /*@__PURE__*/new WeakMap();\n// This is hidden behind an indirection, rather than directly computed\n// by the facet, to keep internal types out of the facet's type.\nfunction getKeymap(state) {\n    let bindings = state.facet(keymap);\n    let map = Keymaps.get(bindings);\n    if (!map)\n        Keymaps.set(bindings, map = buildKeymap(bindings.reduce((a, b) => a.concat(b), [])));\n    return map;\n}\n/**\nRun the key handlers registered for a given scope. The event\nobject should be a `\"keydown\"` event. Returns true if any of the\nhandlers handled it.\n*/\nfunction runScopeHandlers(view, event, scope) {\n    return runHandlers(getKeymap(view.state), event, view, scope);\n}\nlet storedPrefix = null;\nconst PrefixTimeout = 4000;\nfunction buildKeymap(bindings, platform = currentPlatform) {\n    let bound = Object.create(null);\n    let isPrefix = Object.create(null);\n    let checkPrefix = (name, is) => {\n        let current = isPrefix[name];\n        if (current == null)\n            isPrefix[name] = is;\n        else if (current != is)\n            throw new Error(\"Key binding \" + name + \" is used both as a regular binding and as a multi-stroke prefix\");\n    };\n    let add = (scope, key, command, preventDefault, stopPropagation) => {\n        var _a, _b;\n        let scopeObj = bound[scope] || (bound[scope] = Object.create(null));\n        let parts = key.split(/ (?!$)/).map(k => normalizeKeyName(k, platform));\n        for (let i = 1; i < parts.length; i++) {\n            let prefix = parts.slice(0, i).join(\" \");\n            checkPrefix(prefix, true);\n            if (!scopeObj[prefix])\n                scopeObj[prefix] = {\n                    preventDefault: true,\n                    stopPropagation: false,\n                    run: [(view) => {\n                            let ourObj = storedPrefix = { view, prefix, scope };\n                            setTimeout(() => { if (storedPrefix == ourObj)\n                                storedPrefix = null; }, PrefixTimeout);\n                            return true;\n                        }]\n                };\n        }\n        let full = parts.join(\" \");\n        checkPrefix(full, false);\n        let binding = scopeObj[full] || (scopeObj[full] = {\n            preventDefault: false,\n            stopPropagation: false,\n            run: ((_b = (_a = scopeObj._any) === null || _a === void 0 ? void 0 : _a.run) === null || _b === void 0 ? void 0 : _b.slice()) || []\n        });\n        if (command)\n            binding.run.push(command);\n        if (preventDefault)\n            binding.preventDefault = true;\n        if (stopPropagation)\n            binding.stopPropagation = true;\n    };\n    for (let b of bindings) {\n        let scopes = b.scope ? b.scope.split(\" \") : [\"editor\"];\n        if (b.any)\n            for (let scope of scopes) {\n                let scopeObj = bound[scope] || (bound[scope] = Object.create(null));\n                if (!scopeObj._any)\n                    scopeObj._any = { preventDefault: false, stopPropagation: false, run: [] };\n                let { any } = b;\n                for (let key in scopeObj)\n                    scopeObj[key].run.push(view => any(view, currentKeyEvent));\n            }\n        let name = b[platform] || b.key;\n        if (!name)\n            continue;\n        for (let scope of scopes) {\n            add(scope, name, b.run, b.preventDefault, b.stopPropagation);\n            if (b.shift)\n                add(scope, \"Shift-\" + name, b.shift, b.preventDefault, b.stopPropagation);\n        }\n    }\n    return bound;\n}\nlet currentKeyEvent = null;\nfunction runHandlers(map, event, view, scope) {\n    currentKeyEvent = event;\n    let name = keyName(event);\n    let charCode = codePointAt(name, 0), isChar = codePointSize(charCode) == name.length && name != \" \";\n    let prefix = \"\", handled = false, prevented = false, stopPropagation = false;\n    if (storedPrefix && storedPrefix.view == view && storedPrefix.scope == scope) {\n        prefix = storedPrefix.prefix + \" \";\n        if (modifierCodes.indexOf(event.keyCode) < 0) {\n            prevented = true;\n            storedPrefix = null;\n        }\n    }\n    let ran = new Set;\n    let runFor = (binding) => {\n        if (binding) {\n            for (let cmd of binding.run)\n                if (!ran.has(cmd)) {\n                    ran.add(cmd);\n                    if (cmd(view)) {\n                        if (binding.stopPropagation)\n                            stopPropagation = true;\n                        return true;\n                    }\n                }\n            if (binding.preventDefault) {\n                if (binding.stopPropagation)\n                    stopPropagation = true;\n                prevented = true;\n            }\n        }\n        return false;\n    };\n    let scopeObj = map[scope], baseName, shiftName;\n    if (scopeObj) {\n        if (runFor(scopeObj[prefix + modifiers(name, event, !isChar)])) {\n            handled = true;\n        }\n        else if (isChar && (event.altKey || event.metaKey || event.ctrlKey) &&\n            // Ctrl-Alt may be used for AltGr on Windows\n            !(browser.windows && event.ctrlKey && event.altKey) &&\n            (baseName = base[event.keyCode]) && baseName != name) {\n            if (runFor(scopeObj[prefix + modifiers(baseName, event, true)])) {\n                handled = true;\n            }\n            else if (event.shiftKey && (shiftName = shift[event.keyCode]) != name && shiftName != baseName &&\n                runFor(scopeObj[prefix + modifiers(shiftName, event, false)])) {\n                handled = true;\n            }\n        }\n        else if (isChar && event.shiftKey &&\n            runFor(scopeObj[prefix + modifiers(name, event, true)])) {\n            handled = true;\n        }\n        if (!handled && runFor(scopeObj._any))\n            handled = true;\n    }\n    if (prevented)\n        handled = true;\n    if (handled && stopPropagation)\n        event.stopPropagation();\n    currentKeyEvent = null;\n    return handled;\n}\n\n/**\nImplementation of [`LayerMarker`](https://codemirror.net/6/docs/ref/#view.LayerMarker) that creates\na rectangle at a given set of coordinates.\n*/\nclass RectangleMarker {\n    /**\n    Create a marker with the given class and dimensions. If `width`\n    is null, the DOM element will get no width style.\n    */\n    constructor(className, \n    /**\n    The left position of the marker (in pixels, document-relative).\n    */\n    left, \n    /**\n    The top position of the marker.\n    */\n    top, \n    /**\n    The width of the marker, or null if it shouldn't get a width assigned.\n    */\n    width, \n    /**\n    The height of the marker.\n    */\n    height) {\n        this.className = className;\n        this.left = left;\n        this.top = top;\n        this.width = width;\n        this.height = height;\n    }\n    draw() {\n        let elt = document.createElement(\"div\");\n        elt.className = this.className;\n        this.adjust(elt);\n        return elt;\n    }\n    update(elt, prev) {\n        if (prev.className != this.className)\n            return false;\n        this.adjust(elt);\n        return true;\n    }\n    adjust(elt) {\n        elt.style.left = this.left + \"px\";\n        elt.style.top = this.top + \"px\";\n        if (this.width != null)\n            elt.style.width = this.width + \"px\";\n        elt.style.height = this.height + \"px\";\n    }\n    eq(p) {\n        return this.left == p.left && this.top == p.top && this.width == p.width && this.height == p.height &&\n            this.className == p.className;\n    }\n    /**\n    Create a set of rectangles for the given selection range,\n    assigning them theclass`className`. Will create a single\n    rectangle for empty ranges, and a set of selection-style\n    rectangles covering the range's content (in a bidi-aware\n    way) for non-empty ones.\n    */\n    static forRange(view, className, range) {\n        if (range.empty) {\n            let pos = view.coordsAtPos(range.head, range.assoc || 1);\n            if (!pos)\n                return [];\n            let base = getBase(view);\n            return [new RectangleMarker(className, pos.left - base.left, pos.top - base.top, null, pos.bottom - pos.top)];\n        }\n        else {\n            return rectanglesForRange(view, className, range);\n        }\n    }\n}\nfunction getBase(view) {\n    let rect = view.scrollDOM.getBoundingClientRect();\n    let left = view.textDirection == Direction.LTR ? rect.left : rect.right - view.scrollDOM.clientWidth * view.scaleX;\n    return { left: left - view.scrollDOM.scrollLeft * view.scaleX, top: rect.top - view.scrollDOM.scrollTop * view.scaleY };\n}\nfunction wrappedLine(view, pos, side, inside) {\n    let coords = view.coordsAtPos(pos, side * 2);\n    if (!coords)\n        return inside;\n    let editorRect = view.dom.getBoundingClientRect();\n    let y = (coords.top + coords.bottom) / 2;\n    let left = view.posAtCoords({ x: editorRect.left + 1, y });\n    let right = view.posAtCoords({ x: editorRect.right - 1, y });\n    if (left == null || right == null)\n        return inside;\n    return { from: Math.max(inside.from, Math.min(left, right)), to: Math.min(inside.to, Math.max(left, right)) };\n}\nfunction rectanglesForRange(view, className, range) {\n    if (range.to <= view.viewport.from || range.from >= view.viewport.to)\n        return [];\n    let from = Math.max(range.from, view.viewport.from), to = Math.min(range.to, view.viewport.to);\n    let ltr = view.textDirection == Direction.LTR;\n    let content = view.contentDOM, contentRect = content.getBoundingClientRect(), base = getBase(view);\n    let lineElt = content.querySelector(\".cm-line\"), lineStyle = lineElt && window.getComputedStyle(lineElt);\n    let leftSide = contentRect.left +\n        (lineStyle ? parseInt(lineStyle.paddingLeft) + Math.min(0, parseInt(lineStyle.textIndent)) : 0);\n    let rightSide = contentRect.right - (lineStyle ? parseInt(lineStyle.paddingRight) : 0);\n    let startBlock = blockAt(view, from), endBlock = blockAt(view, to);\n    let visualStart = startBlock.type == BlockType.Text ? startBlock : null;\n    let visualEnd = endBlock.type == BlockType.Text ? endBlock : null;\n    if (visualStart && (view.lineWrapping || startBlock.widgetLineBreaks))\n        visualStart = wrappedLine(view, from, 1, visualStart);\n    if (visualEnd && (view.lineWrapping || endBlock.widgetLineBreaks))\n        visualEnd = wrappedLine(view, to, -1, visualEnd);\n    if (visualStart && visualEnd && visualStart.from == visualEnd.from && visualStart.to == visualEnd.to) {\n        return pieces(drawForLine(range.from, range.to, visualStart));\n    }\n    else {\n        let top = visualStart ? drawForLine(range.from, null, visualStart) : drawForWidget(startBlock, false);\n        let bottom = visualEnd ? drawForLine(null, range.to, visualEnd) : drawForWidget(endBlock, true);\n        let between = [];\n        if ((visualStart || startBlock).to < (visualEnd || endBlock).from - (visualStart && visualEnd ? 1 : 0) ||\n            startBlock.widgetLineBreaks > 1 && top.bottom + view.defaultLineHeight / 2 < bottom.top)\n            between.push(piece(leftSide, top.bottom, rightSide, bottom.top));\n        else if (top.bottom < bottom.top && view.elementAtHeight((top.bottom + bottom.top) / 2).type == BlockType.Text)\n            top.bottom = bottom.top = (top.bottom + bottom.top) / 2;\n        return pieces(top).concat(between).concat(pieces(bottom));\n    }\n    function piece(left, top, right, bottom) {\n        return new RectangleMarker(className, left - base.left, top - base.top - 0.01 /* C.Epsilon */, right - left, bottom - top + 0.01 /* C.Epsilon */);\n    }\n    function pieces({ top, bottom, horizontal }) {\n        let pieces = [];\n        for (let i = 0; i < horizontal.length; i += 2)\n            pieces.push(piece(horizontal[i], top, horizontal[i + 1], bottom));\n        return pieces;\n    }\n    // Gets passed from/to in line-local positions\n    function drawForLine(from, to, line) {\n        let top = 1e9, bottom = -1e9, horizontal = [];\n        function addSpan(from, fromOpen, to, toOpen, dir) {\n            // Passing 2/-2 is a kludge to force the view to return\n            // coordinates on the proper side of block widgets, since\n            // normalizing the side there, though appropriate for most\n            // coordsAtPos queries, would break selection drawing.\n            let fromCoords = view.coordsAtPos(from, (from == line.to ? -2 : 2));\n            let toCoords = view.coordsAtPos(to, (to == line.from ? 2 : -2));\n            if (!fromCoords || !toCoords)\n                return;\n            top = Math.min(fromCoords.top, toCoords.top, top);\n            bottom = Math.max(fromCoords.bottom, toCoords.bottom, bottom);\n            if (dir == Direction.LTR)\n                horizontal.push(ltr && fromOpen ? leftSide : fromCoords.left, ltr && toOpen ? rightSide : toCoords.right);\n            else\n                horizontal.push(!ltr && toOpen ? leftSide : toCoords.left, !ltr && fromOpen ? rightSide : fromCoords.right);\n        }\n        let start = from !== null && from !== void 0 ? from : line.from, end = to !== null && to !== void 0 ? to : line.to;\n        // Split the range by visible range and document line\n        for (let r of view.visibleRanges)\n            if (r.to > start && r.from < end) {\n                for (let pos = Math.max(r.from, start), endPos = Math.min(r.to, end);;) {\n                    let docLine = view.state.doc.lineAt(pos);\n                    for (let span of view.bidiSpans(docLine)) {\n                        let spanFrom = span.from + docLine.from, spanTo = span.to + docLine.from;\n                        if (spanFrom >= endPos)\n                            break;\n                        if (spanTo > pos)\n                            addSpan(Math.max(spanFrom, pos), from == null && spanFrom <= start, Math.min(spanTo, endPos), to == null && spanTo >= end, span.dir);\n                    }\n                    pos = docLine.to + 1;\n                    if (pos >= endPos)\n                        break;\n                }\n            }\n        if (horizontal.length == 0)\n            addSpan(start, from == null, end, to == null, view.textDirection);\n        return { top, bottom, horizontal };\n    }\n    function drawForWidget(block, top) {\n        let y = contentRect.top + (top ? block.top : block.bottom);\n        return { top: y, bottom: y, horizontal: [] };\n    }\n}\nfunction sameMarker(a, b) {\n    return a.constructor == b.constructor && a.eq(b);\n}\nclass LayerView {\n    constructor(view, layer) {\n        this.view = view;\n        this.layer = layer;\n        this.drawn = [];\n        this.scaleX = 1;\n        this.scaleY = 1;\n        this.measureReq = { read: this.measure.bind(this), write: this.draw.bind(this) };\n        this.dom = view.scrollDOM.appendChild(document.createElement(\"div\"));\n        this.dom.classList.add(\"cm-layer\");\n        if (layer.above)\n            this.dom.classList.add(\"cm-layer-above\");\n        if (layer.class)\n            this.dom.classList.add(layer.class);\n        this.scale();\n        this.dom.setAttribute(\"aria-hidden\", \"true\");\n        this.setOrder(view.state);\n        view.requestMeasure(this.measureReq);\n        if (layer.mount)\n            layer.mount(this.dom, view);\n    }\n    update(update) {\n        if (update.startState.facet(layerOrder) != update.state.facet(layerOrder))\n            this.setOrder(update.state);\n        if (this.layer.update(update, this.dom) || update.geometryChanged) {\n            this.scale();\n            update.view.requestMeasure(this.measureReq);\n        }\n    }\n    docViewUpdate(view) {\n        if (this.layer.updateOnDocViewUpdate !== false)\n            view.requestMeasure(this.measureReq);\n    }\n    setOrder(state) {\n        let pos = 0, order = state.facet(layerOrder);\n        while (pos < order.length && order[pos] != this.layer)\n            pos++;\n        this.dom.style.zIndex = String((this.layer.above ? 150 : -1) - pos);\n    }\n    measure() {\n        return this.layer.markers(this.view);\n    }\n    scale() {\n        let { scaleX, scaleY } = this.view;\n        if (scaleX != this.scaleX || scaleY != this.scaleY) {\n            this.scaleX = scaleX;\n            this.scaleY = scaleY;\n            this.dom.style.transform = `scale(${1 / scaleX}, ${1 / scaleY})`;\n        }\n    }\n    draw(markers) {\n        if (markers.length != this.drawn.length || markers.some((p, i) => !sameMarker(p, this.drawn[i]))) {\n            let old = this.dom.firstChild, oldI = 0;\n            for (let marker of markers) {\n                if (marker.update && old && marker.constructor && this.drawn[oldI].constructor &&\n                    marker.update(old, this.drawn[oldI])) {\n                    old = old.nextSibling;\n                    oldI++;\n                }\n                else {\n                    this.dom.insertBefore(marker.draw(), old);\n                }\n            }\n            while (old) {\n                let next = old.nextSibling;\n                old.remove();\n                old = next;\n            }\n            this.drawn = markers;\n        }\n    }\n    destroy() {\n        if (this.layer.destroy)\n            this.layer.destroy(this.dom, this.view);\n        this.dom.remove();\n    }\n}\nconst layerOrder = /*@__PURE__*/Facet.define();\n/**\nDefine a layer.\n*/\nfunction layer(config) {\n    return [\n        ViewPlugin.define(v => new LayerView(v, config)),\n        layerOrder.of(config)\n    ];\n}\n\nconst CanHidePrimary = !browser.ios; // FIXME test IE\nconst selectionConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            cursorBlinkRate: 1200,\n            drawRangeCursor: true\n        }, {\n            cursorBlinkRate: (a, b) => Math.min(a, b),\n            drawRangeCursor: (a, b) => a || b\n        });\n    }\n});\n/**\nReturns an extension that hides the browser's native selection and\ncursor, replacing the selection with a background behind the text\n(with the `cm-selectionBackground` class), and the\ncursors with elements overlaid over the code (using\n`cm-cursor-primary` and `cm-cursor-secondary`).\n\nThis allows the editor to display secondary selection ranges, and\ntends to produce a type of selection more in line with that users\nexpect in a text editor (the native selection styling will often\nleave gaps between lines and won't fill the horizontal space after\na line when the selection continues past it).\n\nIt does have a performance cost, in that it requires an extra DOM\nlayout cycle for many updates (the selection is drawn based on DOM\nlayout information that's only available after laying out the\ncontent).\n*/\nfunction drawSelection(config = {}) {\n    return [\n        selectionConfig.of(config),\n        cursorLayer,\n        selectionLayer,\n        hideNativeSelection,\n        nativeSelectionHidden.of(true)\n    ];\n}\n/**\nRetrieve the [`drawSelection`](https://codemirror.net/6/docs/ref/#view.drawSelection) configuration\nfor this state. (Note that this will return a set of defaults even\nif `drawSelection` isn't enabled.)\n*/\nfunction getDrawSelectionConfig(state) {\n    return state.facet(selectionConfig);\n}\nfunction configChanged(update) {\n    return update.startState.facet(selectionConfig) != update.state.facet(selectionConfig);\n}\nconst cursorLayer = /*@__PURE__*/layer({\n    above: true,\n    markers(view) {\n        let { state } = view, conf = state.facet(selectionConfig);\n        let cursors = [];\n        for (let r of state.selection.ranges) {\n            let prim = r == state.selection.main;\n            if (r.empty ? !prim || CanHidePrimary : conf.drawRangeCursor) {\n                let className = prim ? \"cm-cursor cm-cursor-primary\" : \"cm-cursor cm-cursor-secondary\";\n                let cursor = r.empty ? r : EditorSelection.cursor(r.head, r.head > r.anchor ? -1 : 1);\n                for (let piece of RectangleMarker.forRange(view, className, cursor))\n                    cursors.push(piece);\n            }\n        }\n        return cursors;\n    },\n    update(update, dom) {\n        if (update.transactions.some(tr => tr.selection))\n            dom.style.animationName = dom.style.animationName == \"cm-blink\" ? \"cm-blink2\" : \"cm-blink\";\n        let confChange = configChanged(update);\n        if (confChange)\n            setBlinkRate(update.state, dom);\n        return update.docChanged || update.selectionSet || confChange;\n    },\n    mount(dom, view) {\n        setBlinkRate(view.state, dom);\n    },\n    class: \"cm-cursorLayer\"\n});\nfunction setBlinkRate(state, dom) {\n    dom.style.animationDuration = state.facet(selectionConfig).cursorBlinkRate + \"ms\";\n}\nconst selectionLayer = /*@__PURE__*/layer({\n    above: false,\n    markers(view) {\n        return view.state.selection.ranges.map(r => r.empty ? [] : RectangleMarker.forRange(view, \"cm-selectionBackground\", r))\n            .reduce((a, b) => a.concat(b));\n    },\n    update(update, dom) {\n        return update.docChanged || update.selectionSet || update.viewportChanged || configChanged(update);\n    },\n    class: \"cm-selectionLayer\"\n});\nconst themeSpec = {\n    \".cm-line\": {\n        \"& ::selection, &::selection\": { backgroundColor: \"transparent !important\" },\n    },\n    \".cm-content\": {\n        \"& :focus\": {\n            caretColor: \"initial !important\",\n            \"&::selection, & ::selection\": {\n                backgroundColor: \"Highlight !important\"\n            }\n        }\n    }\n};\nif (CanHidePrimary)\n    themeSpec[\".cm-line\"].caretColor = themeSpec[\".cm-content\"].caretColor = \"transparent !important\";\nconst hideNativeSelection = /*@__PURE__*/Prec.highest(/*@__PURE__*/EditorView.theme(themeSpec));\n\nconst setDropCursorPos = /*@__PURE__*/StateEffect.define({\n    map(pos, mapping) { return pos == null ? null : mapping.mapPos(pos); }\n});\nconst dropCursorPos = /*@__PURE__*/StateField.define({\n    create() { return null; },\n    update(pos, tr) {\n        if (pos != null)\n            pos = tr.changes.mapPos(pos);\n        return tr.effects.reduce((pos, e) => e.is(setDropCursorPos) ? e.value : pos, pos);\n    }\n});\nconst drawDropCursor = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.cursor = null;\n        this.measureReq = { read: this.readPos.bind(this), write: this.drawCursor.bind(this) };\n    }\n    update(update) {\n        var _a;\n        let cursorPos = update.state.field(dropCursorPos);\n        if (cursorPos == null) {\n            if (this.cursor != null) {\n                (_a = this.cursor) === null || _a === void 0 ? void 0 : _a.remove();\n                this.cursor = null;\n            }\n        }\n        else {\n            if (!this.cursor) {\n                this.cursor = this.view.scrollDOM.appendChild(document.createElement(\"div\"));\n                this.cursor.className = \"cm-dropCursor\";\n            }\n            if (update.startState.field(dropCursorPos) != cursorPos || update.docChanged || update.geometryChanged)\n                this.view.requestMeasure(this.measureReq);\n        }\n    }\n    readPos() {\n        let { view } = this;\n        let pos = view.state.field(dropCursorPos);\n        let rect = pos != null && view.coordsAtPos(pos);\n        if (!rect)\n            return null;\n        let outer = view.scrollDOM.getBoundingClientRect();\n        return {\n            left: rect.left - outer.left + view.scrollDOM.scrollLeft * view.scaleX,\n            top: rect.top - outer.top + view.scrollDOM.scrollTop * view.scaleY,\n            height: rect.bottom - rect.top\n        };\n    }\n    drawCursor(pos) {\n        if (this.cursor) {\n            let { scaleX, scaleY } = this.view;\n            if (pos) {\n                this.cursor.style.left = pos.left / scaleX + \"px\";\n                this.cursor.style.top = pos.top / scaleY + \"px\";\n                this.cursor.style.height = pos.height / scaleY + \"px\";\n            }\n            else {\n                this.cursor.style.left = \"-100000px\";\n            }\n        }\n    }\n    destroy() {\n        if (this.cursor)\n            this.cursor.remove();\n    }\n    setDropPos(pos) {\n        if (this.view.state.field(dropCursorPos) != pos)\n            this.view.dispatch({ effects: setDropCursorPos.of(pos) });\n    }\n}, {\n    eventObservers: {\n        dragover(event) {\n            this.setDropPos(this.view.posAtCoords({ x: event.clientX, y: event.clientY }));\n        },\n        dragleave(event) {\n            if (event.target == this.view.contentDOM || !this.view.contentDOM.contains(event.relatedTarget))\n                this.setDropPos(null);\n        },\n        dragend() {\n            this.setDropPos(null);\n        },\n        drop() {\n            this.setDropPos(null);\n        }\n    }\n});\n/**\nDraws a cursor at the current drop position when something is\ndragged over the editor.\n*/\nfunction dropCursor() {\n    return [dropCursorPos, drawDropCursor];\n}\n\nfunction iterMatches(doc, re, from, to, f) {\n    re.lastIndex = 0;\n    for (let cursor = doc.iterRange(from, to), pos = from, m; !cursor.next().done; pos += cursor.value.length) {\n        if (!cursor.lineBreak)\n            while (m = re.exec(cursor.value))\n                f(pos + m.index, m);\n    }\n}\nfunction matchRanges(view, maxLength) {\n    let visible = view.visibleRanges;\n    if (visible.length == 1 && visible[0].from == view.viewport.from &&\n        visible[0].to == view.viewport.to)\n        return visible;\n    let result = [];\n    for (let { from, to } of visible) {\n        from = Math.max(view.state.doc.lineAt(from).from, from - maxLength);\n        to = Math.min(view.state.doc.lineAt(to).to, to + maxLength);\n        if (result.length && result[result.length - 1].to >= from)\n            result[result.length - 1].to = to;\n        else\n            result.push({ from, to });\n    }\n    return result;\n}\n/**\nHelper class used to make it easier to maintain decorations on\nvisible code that matches a given regular expression. To be used\nin a [view plugin](https://codemirror.net/6/docs/ref/#view.ViewPlugin). Instances of this object\nrepresent a matching configuration.\n*/\nclass MatchDecorator {\n    /**\n    Create a decorator.\n    */\n    constructor(config) {\n        const { regexp, decoration, decorate, boundary, maxLength = 1000 } = config;\n        if (!regexp.global)\n            throw new RangeError(\"The regular expression given to MatchDecorator should have its 'g' flag set\");\n        this.regexp = regexp;\n        if (decorate) {\n            this.addMatch = (match, view, from, add) => decorate(add, from, from + match[0].length, match, view);\n        }\n        else if (typeof decoration == \"function\") {\n            this.addMatch = (match, view, from, add) => {\n                let deco = decoration(match, view, from);\n                if (deco)\n                    add(from, from + match[0].length, deco);\n            };\n        }\n        else if (decoration) {\n            this.addMatch = (match, _view, from, add) => add(from, from + match[0].length, decoration);\n        }\n        else {\n            throw new RangeError(\"Either 'decorate' or 'decoration' should be provided to MatchDecorator\");\n        }\n        this.boundary = boundary;\n        this.maxLength = maxLength;\n    }\n    /**\n    Compute the full set of decorations for matches in the given\n    view's viewport. You'll want to call this when initializing your\n    plugin.\n    */\n    createDeco(view) {\n        let build = new RangeSetBuilder(), add = build.add.bind(build);\n        for (let { from, to } of matchRanges(view, this.maxLength))\n            iterMatches(view.state.doc, this.regexp, from, to, (from, m) => this.addMatch(m, view, from, add));\n        return build.finish();\n    }\n    /**\n    Update a set of decorations for a view update. `deco` _must_ be\n    the set of decorations produced by _this_ `MatchDecorator` for\n    the view state before the update.\n    */\n    updateDeco(update, deco) {\n        let changeFrom = 1e9, changeTo = -1;\n        if (update.docChanged)\n            update.changes.iterChanges((_f, _t, from, to) => {\n                if (to > update.view.viewport.from && from < update.view.viewport.to) {\n                    changeFrom = Math.min(from, changeFrom);\n                    changeTo = Math.max(to, changeTo);\n                }\n            });\n        if (update.viewportChanged || changeTo - changeFrom > 1000)\n            return this.createDeco(update.view);\n        if (changeTo > -1)\n            return this.updateRange(update.view, deco.map(update.changes), changeFrom, changeTo);\n        return deco;\n    }\n    updateRange(view, deco, updateFrom, updateTo) {\n        for (let r of view.visibleRanges) {\n            let from = Math.max(r.from, updateFrom), to = Math.min(r.to, updateTo);\n            if (to > from) {\n                let fromLine = view.state.doc.lineAt(from), toLine = fromLine.to < to ? view.state.doc.lineAt(to) : fromLine;\n                let start = Math.max(r.from, fromLine.from), end = Math.min(r.to, toLine.to);\n                if (this.boundary) {\n                    for (; from > fromLine.from; from--)\n                        if (this.boundary.test(fromLine.text[from - 1 - fromLine.from])) {\n                            start = from;\n                            break;\n                        }\n                    for (; to < toLine.to; to++)\n                        if (this.boundary.test(toLine.text[to - toLine.from])) {\n                            end = to;\n                            break;\n                        }\n                }\n                let ranges = [], m;\n                let add = (from, to, deco) => ranges.push(deco.range(from, to));\n                if (fromLine == toLine) {\n                    this.regexp.lastIndex = start - fromLine.from;\n                    while ((m = this.regexp.exec(fromLine.text)) && m.index < end - fromLine.from)\n                        this.addMatch(m, view, m.index + fromLine.from, add);\n                }\n                else {\n                    iterMatches(view.state.doc, this.regexp, start, end, (from, m) => this.addMatch(m, view, from, add));\n                }\n                deco = deco.update({ filterFrom: start, filterTo: end, filter: (from, to) => from < start || to > end, add: ranges });\n            }\n        }\n        return deco;\n    }\n}\n\nconst UnicodeRegexpSupport = /x/.unicode != null ? \"gu\" : \"g\";\nconst Specials = /*@__PURE__*/new RegExp(\"[\\u0000-\\u0008\\u000a-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b\\u200e\\u200f\\u2028\\u2029\\u202d\\u202e\\u2066\\u2067\\u2069\\ufeff\\ufff9-\\ufffc]\", UnicodeRegexpSupport);\nconst Names = {\n    0: \"null\",\n    7: \"bell\",\n    8: \"backspace\",\n    10: \"newline\",\n    11: \"vertical tab\",\n    13: \"carriage return\",\n    27: \"escape\",\n    8203: \"zero width space\",\n    8204: \"zero width non-joiner\",\n    8205: \"zero width joiner\",\n    8206: \"left-to-right mark\",\n    8207: \"right-to-left mark\",\n    8232: \"line separator\",\n    8237: \"left-to-right override\",\n    8238: \"right-to-left override\",\n    8294: \"left-to-right isolate\",\n    8295: \"right-to-left isolate\",\n    8297: \"pop directional isolate\",\n    8233: \"paragraph separator\",\n    65279: \"zero width no-break space\",\n    65532: \"object replacement\"\n};\nlet _supportsTabSize = null;\nfunction supportsTabSize() {\n    var _a;\n    if (_supportsTabSize == null && typeof document != \"undefined\" && document.body) {\n        let styles = document.body.style;\n        _supportsTabSize = ((_a = styles.tabSize) !== null && _a !== void 0 ? _a : styles.MozTabSize) != null;\n    }\n    return _supportsTabSize || false;\n}\nconst specialCharConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        let config = combineConfig(configs, {\n            render: null,\n            specialChars: Specials,\n            addSpecialChars: null\n        });\n        if (config.replaceTabs = !supportsTabSize())\n            config.specialChars = new RegExp(\"\\t|\" + config.specialChars.source, UnicodeRegexpSupport);\n        if (config.addSpecialChars)\n            config.specialChars = new RegExp(config.specialChars.source + \"|\" + config.addSpecialChars.source, UnicodeRegexpSupport);\n        return config;\n    }\n});\n/**\nReturns an extension that installs highlighting of special\ncharacters.\n*/\nfunction highlightSpecialChars(\n/**\nConfiguration options.\n*/\nconfig = {}) {\n    return [specialCharConfig.of(config), specialCharPlugin()];\n}\nlet _plugin = null;\nfunction specialCharPlugin() {\n    return _plugin || (_plugin = ViewPlugin.fromClass(class {\n        constructor(view) {\n            this.view = view;\n            this.decorations = Decoration.none;\n            this.decorationCache = Object.create(null);\n            this.decorator = this.makeDecorator(view.state.facet(specialCharConfig));\n            this.decorations = this.decorator.createDeco(view);\n        }\n        makeDecorator(conf) {\n            return new MatchDecorator({\n                regexp: conf.specialChars,\n                decoration: (m, view, pos) => {\n                    let { doc } = view.state;\n                    let code = codePointAt(m[0], 0);\n                    if (code == 9) {\n                        let line = doc.lineAt(pos);\n                        let size = view.state.tabSize, col = countColumn(line.text, size, pos - line.from);\n                        return Decoration.replace({\n                            widget: new TabWidget((size - (col % size)) * this.view.defaultCharacterWidth / this.view.scaleX)\n                        });\n                    }\n                    return this.decorationCache[code] ||\n                        (this.decorationCache[code] = Decoration.replace({ widget: new SpecialCharWidget(conf, code) }));\n                },\n                boundary: conf.replaceTabs ? undefined : /[^]/\n            });\n        }\n        update(update) {\n            let conf = update.state.facet(specialCharConfig);\n            if (update.startState.facet(specialCharConfig) != conf) {\n                this.decorator = this.makeDecorator(conf);\n                this.decorations = this.decorator.createDeco(update.view);\n            }\n            else {\n                this.decorations = this.decorator.updateDeco(update, this.decorations);\n            }\n        }\n    }, {\n        decorations: v => v.decorations\n    }));\n}\nconst DefaultPlaceholder = \"\\u2022\";\n// Assigns placeholder characters from the Control Pictures block to\n// ASCII control characters\nfunction placeholder$1(code) {\n    if (code >= 32)\n        return DefaultPlaceholder;\n    if (code == 10)\n        return \"\\u2424\";\n    return String.fromCharCode(9216 + code);\n}\nclass SpecialCharWidget extends WidgetType {\n    constructor(options, code) {\n        super();\n        this.options = options;\n        this.code = code;\n    }\n    eq(other) { return other.code == this.code; }\n    toDOM(view) {\n        let ph = placeholder$1(this.code);\n        let desc = view.state.phrase(\"Control character\") + \" \" + (Names[this.code] || \"0x\" + this.code.toString(16));\n        let custom = this.options.render && this.options.render(this.code, desc, ph);\n        if (custom)\n            return custom;\n        let span = document.createElement(\"span\");\n        span.textContent = ph;\n        span.title = desc;\n        span.setAttribute(\"aria-label\", desc);\n        span.className = \"cm-specialChar\";\n        return span;\n    }\n    ignoreEvent() { return false; }\n}\nclass TabWidget extends WidgetType {\n    constructor(width) {\n        super();\n        this.width = width;\n    }\n    eq(other) { return other.width == this.width; }\n    toDOM() {\n        let span = document.createElement(\"span\");\n        span.textContent = \"\\t\";\n        span.className = \"cm-tab\";\n        span.style.width = this.width + \"px\";\n        return span;\n    }\n    ignoreEvent() { return false; }\n}\n\nconst plugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor() {\n        this.height = 1000;\n        this.attrs = { style: \"padding-bottom: 1000px\" };\n    }\n    update(update) {\n        let { view } = update;\n        let height = view.viewState.editorHeight -\n            view.defaultLineHeight - view.documentPadding.top - 0.5;\n        if (height >= 0 && height != this.height) {\n            this.height = height;\n            this.attrs = { style: `padding-bottom: ${height}px` };\n        }\n    }\n});\n/**\nReturns an extension that makes sure the content has a bottom\nmargin equivalent to the height of the editor, minus one line\nheight, so that every line in the document can be scrolled to the\ntop of the editor.\n\nThis is only meaningful when the editor is scrollable, and should\nnot be enabled in editors that take the size of their content.\n*/\nfunction scrollPastEnd() {\n    return [plugin, contentAttributes.of(view => { var _a; return ((_a = view.plugin(plugin)) === null || _a === void 0 ? void 0 : _a.attrs) || null; })];\n}\n\n/**\nMark lines that have a cursor on them with the `\"cm-activeLine\"`\nDOM class.\n*/\nfunction highlightActiveLine() {\n    return activeLineHighlighter;\n}\nconst lineDeco = /*@__PURE__*/Decoration.line({ class: \"cm-activeLine\" });\nconst activeLineHighlighter = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.decorations = this.getDeco(view);\n    }\n    update(update) {\n        if (update.docChanged || update.selectionSet)\n            this.decorations = this.getDeco(update.view);\n    }\n    getDeco(view) {\n        let lastLineStart = -1, deco = [];\n        for (let r of view.state.selection.ranges) {\n            let line = view.lineBlockAt(r.head);\n            if (line.from > lastLineStart) {\n                deco.push(lineDeco.range(line.from));\n                lastLineStart = line.from;\n            }\n        }\n        return Decoration.set(deco);\n    }\n}, {\n    decorations: v => v.decorations\n});\n\nclass Placeholder extends WidgetType {\n    constructor(content) {\n        super();\n        this.content = content;\n    }\n    toDOM() {\n        let wrap = document.createElement(\"span\");\n        wrap.className = \"cm-placeholder\";\n        wrap.style.pointerEvents = \"none\";\n        wrap.appendChild(typeof this.content == \"string\" ? document.createTextNode(this.content) : this.content);\n        if (typeof this.content == \"string\")\n            wrap.setAttribute(\"aria-label\", \"placeholder \" + this.content);\n        else\n            wrap.setAttribute(\"aria-hidden\", \"true\");\n        return wrap;\n    }\n    coordsAt(dom) {\n        let rects = dom.firstChild ? clientRectsFor(dom.firstChild) : [];\n        if (!rects.length)\n            return null;\n        let style = window.getComputedStyle(dom.parentNode);\n        let rect = flattenRect(rects[0], style.direction != \"rtl\");\n        let lineHeight = parseInt(style.lineHeight);\n        if (rect.bottom - rect.top > lineHeight * 1.5)\n            return { left: rect.left, right: rect.right, top: rect.top, bottom: rect.top + lineHeight };\n        return rect;\n    }\n    ignoreEvent() { return false; }\n}\n/**\nExtension that enables a placeholder—a piece of example content\nto show when the editor is empty.\n*/\nfunction placeholder(content) {\n    return ViewPlugin.fromClass(class {\n        constructor(view) {\n            this.view = view;\n            this.placeholder = content\n                ? Decoration.set([Decoration.widget({ widget: new Placeholder(content), side: 1 }).range(0)])\n                : Decoration.none;\n        }\n        get decorations() { return this.view.state.doc.length ? Decoration.none : this.placeholder; }\n    }, { decorations: v => v.decorations });\n}\n\n// Don't compute precise column positions for line offsets above this\n// (since it could get expensive). Assume offset==column for them.\nconst MaxOff = 2000;\nfunction rectangleFor(state, a, b) {\n    let startLine = Math.min(a.line, b.line), endLine = Math.max(a.line, b.line);\n    let ranges = [];\n    if (a.off > MaxOff || b.off > MaxOff || a.col < 0 || b.col < 0) {\n        let startOff = Math.min(a.off, b.off), endOff = Math.max(a.off, b.off);\n        for (let i = startLine; i <= endLine; i++) {\n            let line = state.doc.line(i);\n            if (line.length <= endOff)\n                ranges.push(EditorSelection.range(line.from + startOff, line.to + endOff));\n        }\n    }\n    else {\n        let startCol = Math.min(a.col, b.col), endCol = Math.max(a.col, b.col);\n        for (let i = startLine; i <= endLine; i++) {\n            let line = state.doc.line(i);\n            let start = findColumn(line.text, startCol, state.tabSize, true);\n            if (start < 0) {\n                ranges.push(EditorSelection.cursor(line.to));\n            }\n            else {\n                let end = findColumn(line.text, endCol, state.tabSize);\n                ranges.push(EditorSelection.range(line.from + start, line.from + end));\n            }\n        }\n    }\n    return ranges;\n}\nfunction absoluteColumn(view, x) {\n    let ref = view.coordsAtPos(view.viewport.from);\n    return ref ? Math.round(Math.abs((ref.left - x) / view.defaultCharacterWidth)) : -1;\n}\nfunction getPos(view, event) {\n    let offset = view.posAtCoords({ x: event.clientX, y: event.clientY }, false);\n    let line = view.state.doc.lineAt(offset), off = offset - line.from;\n    let col = off > MaxOff ? -1\n        : off == line.length ? absoluteColumn(view, event.clientX)\n            : countColumn(line.text, view.state.tabSize, offset - line.from);\n    return { line: line.number, col, off };\n}\nfunction rectangleSelectionStyle(view, event) {\n    let start = getPos(view, event), startSel = view.state.selection;\n    if (!start)\n        return null;\n    return {\n        update(update) {\n            if (update.docChanged) {\n                let newStart = update.changes.mapPos(update.startState.doc.line(start.line).from);\n                let newLine = update.state.doc.lineAt(newStart);\n                start = { line: newLine.number, col: start.col, off: Math.min(start.off, newLine.length) };\n                startSel = startSel.map(update.changes);\n            }\n        },\n        get(event, _extend, multiple) {\n            let cur = getPos(view, event);\n            if (!cur)\n                return startSel;\n            let ranges = rectangleFor(view.state, start, cur);\n            if (!ranges.length)\n                return startSel;\n            if (multiple)\n                return EditorSelection.create(ranges.concat(startSel.ranges));\n            else\n                return EditorSelection.create(ranges);\n        }\n    };\n}\n/**\nCreate an extension that enables rectangular selections. By\ndefault, it will react to left mouse drag with the Alt key held\ndown. When such a selection occurs, the text within the rectangle\nthat was dragged over will be selected, as one selection\n[range](https://codemirror.net/6/docs/ref/#state.SelectionRange) per line.\n*/\nfunction rectangularSelection(options) {\n    let filter = (options === null || options === void 0 ? void 0 : options.eventFilter) || (e => e.altKey && e.button == 0);\n    return EditorView.mouseSelectionStyle.of((view, event) => filter(event) ? rectangleSelectionStyle(view, event) : null);\n}\nconst keys = {\n    Alt: [18, e => !!e.altKey],\n    Control: [17, e => !!e.ctrlKey],\n    Shift: [16, e => !!e.shiftKey],\n    Meta: [91, e => !!e.metaKey]\n};\nconst showCrosshair = { style: \"cursor: crosshair\" };\n/**\nReturns an extension that turns the pointer cursor into a\ncrosshair when a given modifier key, defaulting to Alt, is held\ndown. Can serve as a visual hint that rectangular selection is\ngoing to happen when paired with\n[`rectangularSelection`](https://codemirror.net/6/docs/ref/#view.rectangularSelection).\n*/\nfunction crosshairCursor(options = {}) {\n    let [code, getter] = keys[options.key || \"Alt\"];\n    let plugin = ViewPlugin.fromClass(class {\n        constructor(view) {\n            this.view = view;\n            this.isDown = false;\n        }\n        set(isDown) {\n            if (this.isDown != isDown) {\n                this.isDown = isDown;\n                this.view.update([]);\n            }\n        }\n    }, {\n        eventObservers: {\n            keydown(e) {\n                this.set(e.keyCode == code || getter(e));\n            },\n            keyup(e) {\n                if (e.keyCode == code || !getter(e))\n                    this.set(false);\n            },\n            mousemove(e) {\n                this.set(getter(e));\n            }\n        }\n    });\n    return [\n        plugin,\n        EditorView.contentAttributes.of(view => { var _a; return ((_a = view.plugin(plugin)) === null || _a === void 0 ? void 0 : _a.isDown) ? showCrosshair : null; })\n    ];\n}\n\nconst Outside = \"-10000px\";\nclass TooltipViewManager {\n    constructor(view, facet, createTooltipView, removeTooltipView) {\n        this.facet = facet;\n        this.createTooltipView = createTooltipView;\n        this.removeTooltipView = removeTooltipView;\n        this.input = view.state.facet(facet);\n        this.tooltips = this.input.filter(t => t);\n        let prev = null;\n        this.tooltipViews = this.tooltips.map(t => prev = createTooltipView(t, prev));\n    }\n    update(update, above) {\n        var _a;\n        let input = update.state.facet(this.facet);\n        let tooltips = input.filter(x => x);\n        if (input === this.input) {\n            for (let t of this.tooltipViews)\n                if (t.update)\n                    t.update(update);\n            return false;\n        }\n        let tooltipViews = [], newAbove = above ? [] : null;\n        for (let i = 0; i < tooltips.length; i++) {\n            let tip = tooltips[i], known = -1;\n            if (!tip)\n                continue;\n            for (let i = 0; i < this.tooltips.length; i++) {\n                let other = this.tooltips[i];\n                if (other && other.create == tip.create)\n                    known = i;\n            }\n            if (known < 0) {\n                tooltipViews[i] = this.createTooltipView(tip, i ? tooltipViews[i - 1] : null);\n                if (newAbove)\n                    newAbove[i] = !!tip.above;\n            }\n            else {\n                let tooltipView = tooltipViews[i] = this.tooltipViews[known];\n                if (newAbove)\n                    newAbove[i] = above[known];\n                if (tooltipView.update)\n                    tooltipView.update(update);\n            }\n        }\n        for (let t of this.tooltipViews)\n            if (tooltipViews.indexOf(t) < 0) {\n                this.removeTooltipView(t);\n                (_a = t.destroy) === null || _a === void 0 ? void 0 : _a.call(t);\n            }\n        if (above) {\n            newAbove.forEach((val, i) => above[i] = val);\n            above.length = newAbove.length;\n        }\n        this.input = input;\n        this.tooltips = tooltips;\n        this.tooltipViews = tooltipViews;\n        return true;\n    }\n}\n/**\nCreates an extension that configures tooltip behavior.\n*/\nfunction tooltips(config = {}) {\n    return tooltipConfig.of(config);\n}\nfunction windowSpace(view) {\n    let { win } = view;\n    return { top: 0, left: 0, bottom: win.innerHeight, right: win.innerWidth };\n}\nconst tooltipConfig = /*@__PURE__*/Facet.define({\n    combine: values => {\n        var _a, _b, _c;\n        return ({\n            position: browser.ios ? \"absolute\" : ((_a = values.find(conf => conf.position)) === null || _a === void 0 ? void 0 : _a.position) || \"fixed\",\n            parent: ((_b = values.find(conf => conf.parent)) === null || _b === void 0 ? void 0 : _b.parent) || null,\n            tooltipSpace: ((_c = values.find(conf => conf.tooltipSpace)) === null || _c === void 0 ? void 0 : _c.tooltipSpace) || windowSpace,\n        });\n    }\n});\nconst knownHeight = /*@__PURE__*/new WeakMap();\nconst tooltipPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.above = [];\n        this.inView = true;\n        this.madeAbsolute = false;\n        this.lastTransaction = 0;\n        this.measureTimeout = -1;\n        let config = view.state.facet(tooltipConfig);\n        this.position = config.position;\n        this.parent = config.parent;\n        this.classes = view.themeClasses;\n        this.createContainer();\n        this.measureReq = { read: this.readMeasure.bind(this), write: this.writeMeasure.bind(this), key: this };\n        this.resizeObserver = typeof ResizeObserver == \"function\" ? new ResizeObserver(() => this.measureSoon()) : null;\n        this.manager = new TooltipViewManager(view, showTooltip, (t, p) => this.createTooltip(t, p), t => {\n            if (this.resizeObserver)\n                this.resizeObserver.unobserve(t.dom);\n            t.dom.remove();\n        });\n        this.above = this.manager.tooltips.map(t => !!t.above);\n        this.intersectionObserver = typeof IntersectionObserver == \"function\" ? new IntersectionObserver(entries => {\n            if (Date.now() > this.lastTransaction - 50 &&\n                entries.length > 0 && entries[entries.length - 1].intersectionRatio < 1)\n                this.measureSoon();\n        }, { threshold: [1] }) : null;\n        this.observeIntersection();\n        view.win.addEventListener(\"resize\", this.measureSoon = this.measureSoon.bind(this));\n        this.maybeMeasure();\n    }\n    createContainer() {\n        if (this.parent) {\n            this.container = document.createElement(\"div\");\n            this.container.style.position = \"relative\";\n            this.container.className = this.view.themeClasses;\n            this.parent.appendChild(this.container);\n        }\n        else {\n            this.container = this.view.dom;\n        }\n    }\n    observeIntersection() {\n        if (this.intersectionObserver) {\n            this.intersectionObserver.disconnect();\n            for (let tooltip of this.manager.tooltipViews)\n                this.intersectionObserver.observe(tooltip.dom);\n        }\n    }\n    measureSoon() {\n        if (this.measureTimeout < 0)\n            this.measureTimeout = setTimeout(() => {\n                this.measureTimeout = -1;\n                this.maybeMeasure();\n            }, 50);\n    }\n    update(update) {\n        if (update.transactions.length)\n            this.lastTransaction = Date.now();\n        let updated = this.manager.update(update, this.above);\n        if (updated)\n            this.observeIntersection();\n        let shouldMeasure = updated || update.geometryChanged;\n        let newConfig = update.state.facet(tooltipConfig);\n        if (newConfig.position != this.position && !this.madeAbsolute) {\n            this.position = newConfig.position;\n            for (let t of this.manager.tooltipViews)\n                t.dom.style.position = this.position;\n            shouldMeasure = true;\n        }\n        if (newConfig.parent != this.parent) {\n            if (this.parent)\n                this.container.remove();\n            this.parent = newConfig.parent;\n            this.createContainer();\n            for (let t of this.manager.tooltipViews)\n                this.container.appendChild(t.dom);\n            shouldMeasure = true;\n        }\n        else if (this.parent && this.view.themeClasses != this.classes) {\n            this.classes = this.container.className = this.view.themeClasses;\n        }\n        if (shouldMeasure)\n            this.maybeMeasure();\n    }\n    createTooltip(tooltip, prev) {\n        let tooltipView = tooltip.create(this.view);\n        let before = prev ? prev.dom : null;\n        tooltipView.dom.classList.add(\"cm-tooltip\");\n        if (tooltip.arrow && !tooltipView.dom.querySelector(\".cm-tooltip > .cm-tooltip-arrow\")) {\n            let arrow = document.createElement(\"div\");\n            arrow.className = \"cm-tooltip-arrow\";\n            tooltipView.dom.appendChild(arrow);\n        }\n        tooltipView.dom.style.position = this.position;\n        tooltipView.dom.style.top = Outside;\n        tooltipView.dom.style.left = \"0px\";\n        this.container.insertBefore(tooltipView.dom, before);\n        if (tooltipView.mount)\n            tooltipView.mount(this.view);\n        if (this.resizeObserver)\n            this.resizeObserver.observe(tooltipView.dom);\n        return tooltipView;\n    }\n    destroy() {\n        var _a, _b, _c;\n        this.view.win.removeEventListener(\"resize\", this.measureSoon);\n        for (let tooltipView of this.manager.tooltipViews) {\n            tooltipView.dom.remove();\n            (_a = tooltipView.destroy) === null || _a === void 0 ? void 0 : _a.call(tooltipView);\n        }\n        if (this.parent)\n            this.container.remove();\n        (_b = this.resizeObserver) === null || _b === void 0 ? void 0 : _b.disconnect();\n        (_c = this.intersectionObserver) === null || _c === void 0 ? void 0 : _c.disconnect();\n        clearTimeout(this.measureTimeout);\n    }\n    readMeasure() {\n        let editor = this.view.dom.getBoundingClientRect();\n        let scaleX = 1, scaleY = 1, makeAbsolute = false;\n        if (this.position == \"fixed\" && this.manager.tooltipViews.length) {\n            let { dom } = this.manager.tooltipViews[0];\n            if (browser.gecko) {\n                // Firefox sets the element's `offsetParent` to the\n                // transformed element when a transform interferes with fixed\n                // positioning.\n                makeAbsolute = dom.offsetParent != this.container.ownerDocument.body;\n            }\n            else if (dom.style.top == Outside && dom.style.left == \"0px\") {\n                // On other browsers, we have to awkwardly try and use other\n                // information to detect a transform.\n                let rect = dom.getBoundingClientRect();\n                makeAbsolute = Math.abs(rect.top + 10000) > 1 || Math.abs(rect.left) > 1;\n            }\n        }\n        if (makeAbsolute || this.position == \"absolute\") {\n            if (this.parent) {\n                let rect = this.parent.getBoundingClientRect();\n                if (rect.width && rect.height) {\n                    scaleX = rect.width / this.parent.offsetWidth;\n                    scaleY = rect.height / this.parent.offsetHeight;\n                }\n            }\n            else {\n                ({ scaleX, scaleY } = this.view.viewState);\n            }\n        }\n        return {\n            editor,\n            parent: this.parent ? this.container.getBoundingClientRect() : editor,\n            pos: this.manager.tooltips.map((t, i) => {\n                let tv = this.manager.tooltipViews[i];\n                return tv.getCoords ? tv.getCoords(t.pos) : this.view.coordsAtPos(t.pos);\n            }),\n            size: this.manager.tooltipViews.map(({ dom }) => dom.getBoundingClientRect()),\n            space: this.view.state.facet(tooltipConfig).tooltipSpace(this.view),\n            scaleX, scaleY, makeAbsolute\n        };\n    }\n    writeMeasure(measured) {\n        var _a;\n        if (measured.makeAbsolute) {\n            this.madeAbsolute = true;\n            this.position = \"absolute\";\n            for (let t of this.manager.tooltipViews)\n                t.dom.style.position = \"absolute\";\n        }\n        let { editor, space, scaleX, scaleY } = measured;\n        let others = [];\n        for (let i = 0; i < this.manager.tooltips.length; i++) {\n            let tooltip = this.manager.tooltips[i], tView = this.manager.tooltipViews[i], { dom } = tView;\n            let pos = measured.pos[i], size = measured.size[i];\n            // Hide tooltips that are outside of the editor.\n            if (!pos || pos.bottom <= Math.max(editor.top, space.top) ||\n                pos.top >= Math.min(editor.bottom, space.bottom) ||\n                pos.right < Math.max(editor.left, space.left) - .1 ||\n                pos.left > Math.min(editor.right, space.right) + .1) {\n                dom.style.top = Outside;\n                continue;\n            }\n            let arrow = tooltip.arrow ? tView.dom.querySelector(\".cm-tooltip-arrow\") : null;\n            let arrowHeight = arrow ? 7 /* Arrow.Size */ : 0;\n            let width = size.right - size.left, height = (_a = knownHeight.get(tView)) !== null && _a !== void 0 ? _a : size.bottom - size.top;\n            let offset = tView.offset || noOffset, ltr = this.view.textDirection == Direction.LTR;\n            let left = size.width > space.right - space.left ? (ltr ? space.left : space.right - size.width)\n                : ltr ? Math.min(pos.left - (arrow ? 14 /* Arrow.Offset */ : 0) + offset.x, space.right - width)\n                    : Math.max(space.left, pos.left - width + (arrow ? 14 /* Arrow.Offset */ : 0) - offset.x);\n            let above = this.above[i];\n            if (!tooltip.strictSide && (above\n                ? pos.top - (size.bottom - size.top) - offset.y < space.top\n                : pos.bottom + (size.bottom - size.top) + offset.y > space.bottom) &&\n                above == (space.bottom - pos.bottom > pos.top - space.top))\n                above = this.above[i] = !above;\n            let spaceVert = (above ? pos.top - space.top : space.bottom - pos.bottom) - arrowHeight;\n            if (spaceVert < height && tView.resize !== false) {\n                if (spaceVert < this.view.defaultLineHeight) {\n                    dom.style.top = Outside;\n                    continue;\n                }\n                knownHeight.set(tView, height);\n                dom.style.height = (height = spaceVert) / scaleY + \"px\";\n            }\n            else if (dom.style.height) {\n                dom.style.height = \"\";\n            }\n            let top = above ? pos.top - height - arrowHeight - offset.y : pos.bottom + arrowHeight + offset.y;\n            let right = left + width;\n            if (tView.overlap !== true)\n                for (let r of others)\n                    if (r.left < right && r.right > left && r.top < top + height && r.bottom > top)\n                        top = above ? r.top - height - 2 - arrowHeight : r.bottom + arrowHeight + 2;\n            if (this.position == \"absolute\") {\n                dom.style.top = (top - measured.parent.top) / scaleY + \"px\";\n                dom.style.left = (left - measured.parent.left) / scaleX + \"px\";\n            }\n            else {\n                dom.style.top = top / scaleY + \"px\";\n                dom.style.left = left / scaleX + \"px\";\n            }\n            if (arrow) {\n                let arrowLeft = pos.left + (ltr ? offset.x : -offset.x) - (left + 14 /* Arrow.Offset */ - 7 /* Arrow.Size */);\n                arrow.style.left = arrowLeft / scaleX + \"px\";\n            }\n            if (tView.overlap !== true)\n                others.push({ left, top, right, bottom: top + height });\n            dom.classList.toggle(\"cm-tooltip-above\", above);\n            dom.classList.toggle(\"cm-tooltip-below\", !above);\n            if (tView.positioned)\n                tView.positioned(measured.space);\n        }\n    }\n    maybeMeasure() {\n        if (this.manager.tooltips.length) {\n            if (this.view.inView)\n                this.view.requestMeasure(this.measureReq);\n            if (this.inView != this.view.inView) {\n                this.inView = this.view.inView;\n                if (!this.inView)\n                    for (let tv of this.manager.tooltipViews)\n                        tv.dom.style.top = Outside;\n            }\n        }\n    }\n}, {\n    eventObservers: {\n        scroll() { this.maybeMeasure(); }\n    }\n});\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-tooltip\": {\n        zIndex: 100,\n        boxSizing: \"border-box\"\n    },\n    \"&light .cm-tooltip\": {\n        border: \"1px solid #bbb\",\n        backgroundColor: \"#f5f5f5\"\n    },\n    \"&light .cm-tooltip-section:not(:first-child)\": {\n        borderTop: \"1px solid #bbb\",\n    },\n    \"&dark .cm-tooltip\": {\n        backgroundColor: \"#333338\",\n        color: \"white\"\n    },\n    \".cm-tooltip-arrow\": {\n        height: `${7 /* Arrow.Size */}px`,\n        width: `${7 /* Arrow.Size */ * 2}px`,\n        position: \"absolute\",\n        zIndex: -1,\n        overflow: \"hidden\",\n        \"&:before, &:after\": {\n            content: \"''\",\n            position: \"absolute\",\n            width: 0,\n            height: 0,\n            borderLeft: `${7 /* Arrow.Size */}px solid transparent`,\n            borderRight: `${7 /* Arrow.Size */}px solid transparent`,\n        },\n        \".cm-tooltip-above &\": {\n            bottom: `-${7 /* Arrow.Size */}px`,\n            \"&:before\": {\n                borderTop: `${7 /* Arrow.Size */}px solid #bbb`,\n            },\n            \"&:after\": {\n                borderTop: `${7 /* Arrow.Size */}px solid #f5f5f5`,\n                bottom: \"1px\"\n            }\n        },\n        \".cm-tooltip-below &\": {\n            top: `-${7 /* Arrow.Size */}px`,\n            \"&:before\": {\n                borderBottom: `${7 /* Arrow.Size */}px solid #bbb`,\n            },\n            \"&:after\": {\n                borderBottom: `${7 /* Arrow.Size */}px solid #f5f5f5`,\n                top: \"1px\"\n            }\n        },\n    },\n    \"&dark .cm-tooltip .cm-tooltip-arrow\": {\n        \"&:before\": {\n            borderTopColor: \"#333338\",\n            borderBottomColor: \"#333338\"\n        },\n        \"&:after\": {\n            borderTopColor: \"transparent\",\n            borderBottomColor: \"transparent\"\n        }\n    }\n});\nconst noOffset = { x: 0, y: 0 };\n/**\nFacet to which an extension can add a value to show a tooltip.\n*/\nconst showTooltip = /*@__PURE__*/Facet.define({\n    enables: [tooltipPlugin, baseTheme]\n});\nconst showHoverTooltip = /*@__PURE__*/Facet.define({\n    combine: inputs => inputs.reduce((a, i) => a.concat(i), [])\n});\nclass HoverTooltipHost {\n    // Needs to be static so that host tooltip instances always match\n    static create(view) {\n        return new HoverTooltipHost(view);\n    }\n    constructor(view) {\n        this.view = view;\n        this.mounted = false;\n        this.dom = document.createElement(\"div\");\n        this.dom.classList.add(\"cm-tooltip-hover\");\n        this.manager = new TooltipViewManager(view, showHoverTooltip, (t, p) => this.createHostedView(t, p), t => t.dom.remove());\n    }\n    createHostedView(tooltip, prev) {\n        let hostedView = tooltip.create(this.view);\n        hostedView.dom.classList.add(\"cm-tooltip-section\");\n        this.dom.insertBefore(hostedView.dom, prev ? prev.dom.nextSibling : this.dom.firstChild);\n        if (this.mounted && hostedView.mount)\n            hostedView.mount(this.view);\n        return hostedView;\n    }\n    mount(view) {\n        for (let hostedView of this.manager.tooltipViews) {\n            if (hostedView.mount)\n                hostedView.mount(view);\n        }\n        this.mounted = true;\n    }\n    positioned(space) {\n        for (let hostedView of this.manager.tooltipViews) {\n            if (hostedView.positioned)\n                hostedView.positioned(space);\n        }\n    }\n    update(update) {\n        this.manager.update(update);\n    }\n    destroy() {\n        var _a;\n        for (let t of this.manager.tooltipViews)\n            (_a = t.destroy) === null || _a === void 0 ? void 0 : _a.call(t);\n    }\n    passProp(name) {\n        let value = undefined;\n        for (let view of this.manager.tooltipViews) {\n            let given = view[name];\n            if (given !== undefined) {\n                if (value === undefined)\n                    value = given;\n                else if (value !== given)\n                    return undefined;\n            }\n        }\n        return value;\n    }\n    get offset() { return this.passProp(\"offset\"); }\n    get getCoords() { return this.passProp(\"getCoords\"); }\n    get overlap() { return this.passProp(\"overlap\"); }\n    get resize() { return this.passProp(\"resize\"); }\n}\nconst showHoverTooltipHost = /*@__PURE__*/showTooltip.compute([showHoverTooltip], state => {\n    let tooltips = state.facet(showHoverTooltip);\n    if (tooltips.length === 0)\n        return null;\n    return {\n        pos: Math.min(...tooltips.map(t => t.pos)),\n        end: Math.max(...tooltips.map(t => { var _a; return (_a = t.end) !== null && _a !== void 0 ? _a : t.pos; })),\n        create: HoverTooltipHost.create,\n        above: tooltips[0].above,\n        arrow: tooltips.some(t => t.arrow),\n    };\n});\nclass HoverPlugin {\n    constructor(view, source, field, setHover, hoverTime) {\n        this.view = view;\n        this.source = source;\n        this.field = field;\n        this.setHover = setHover;\n        this.hoverTime = hoverTime;\n        this.hoverTimeout = -1;\n        this.restartTimeout = -1;\n        this.pending = null;\n        this.lastMove = { x: 0, y: 0, target: view.dom, time: 0 };\n        this.checkHover = this.checkHover.bind(this);\n        view.dom.addEventListener(\"mouseleave\", this.mouseleave = this.mouseleave.bind(this));\n        view.dom.addEventListener(\"mousemove\", this.mousemove = this.mousemove.bind(this));\n    }\n    update() {\n        if (this.pending) {\n            this.pending = null;\n            clearTimeout(this.restartTimeout);\n            this.restartTimeout = setTimeout(() => this.startHover(), 20);\n        }\n    }\n    get active() {\n        return this.view.state.field(this.field);\n    }\n    checkHover() {\n        this.hoverTimeout = -1;\n        if (this.active.length)\n            return;\n        let hovered = Date.now() - this.lastMove.time;\n        if (hovered < this.hoverTime)\n            this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime - hovered);\n        else\n            this.startHover();\n    }\n    startHover() {\n        clearTimeout(this.restartTimeout);\n        let { view, lastMove } = this;\n        let desc = view.docView.nearest(lastMove.target);\n        if (!desc)\n            return;\n        let pos, side = 1;\n        if (desc instanceof WidgetView) {\n            pos = desc.posAtStart;\n        }\n        else {\n            pos = view.posAtCoords(lastMove);\n            if (pos == null)\n                return;\n            let posCoords = view.coordsAtPos(pos);\n            if (!posCoords ||\n                lastMove.y < posCoords.top || lastMove.y > posCoords.bottom ||\n                lastMove.x < posCoords.left - view.defaultCharacterWidth ||\n                lastMove.x > posCoords.right + view.defaultCharacterWidth)\n                return;\n            let bidi = view.bidiSpans(view.state.doc.lineAt(pos)).find(s => s.from <= pos && s.to >= pos);\n            let rtl = bidi && bidi.dir == Direction.RTL ? -1 : 1;\n            side = (lastMove.x < posCoords.left ? -rtl : rtl);\n        }\n        let open = this.source(view, pos, side);\n        if (open === null || open === void 0 ? void 0 : open.then) {\n            let pending = this.pending = { pos };\n            open.then(result => {\n                if (this.pending == pending) {\n                    this.pending = null;\n                    if (result && !(Array.isArray(result) && !result.length))\n                        view.dispatch({ effects: this.setHover.of(Array.isArray(result) ? result : [result]) });\n                }\n            }, e => logException(view.state, e, \"hover tooltip\"));\n        }\n        else if (open && !(Array.isArray(open) && !open.length)) {\n            view.dispatch({ effects: this.setHover.of(Array.isArray(open) ? open : [open]) });\n        }\n    }\n    get tooltip() {\n        let plugin = this.view.plugin(tooltipPlugin);\n        let index = plugin ? plugin.manager.tooltips.findIndex(t => t.create == HoverTooltipHost.create) : -1;\n        return index > -1 ? plugin.manager.tooltipViews[index] : null;\n    }\n    mousemove(event) {\n        var _a, _b;\n        this.lastMove = { x: event.clientX, y: event.clientY, target: event.target, time: Date.now() };\n        if (this.hoverTimeout < 0)\n            this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime);\n        let { active, tooltip } = this;\n        if (active.length && tooltip && !isInTooltip(tooltip.dom, event) || this.pending) {\n            let { pos } = active[0] || this.pending, end = (_b = (_a = active[0]) === null || _a === void 0 ? void 0 : _a.end) !== null && _b !== void 0 ? _b : pos;\n            if ((pos == end ? this.view.posAtCoords(this.lastMove) != pos\n                : !isOverRange(this.view, pos, end, event.clientX, event.clientY))) {\n                this.view.dispatch({ effects: this.setHover.of([]) });\n                this.pending = null;\n            }\n        }\n    }\n    mouseleave(event) {\n        clearTimeout(this.hoverTimeout);\n        this.hoverTimeout = -1;\n        let { active } = this;\n        if (active.length) {\n            let { tooltip } = this;\n            let inTooltip = tooltip && tooltip.dom.contains(event.relatedTarget);\n            if (!inTooltip)\n                this.view.dispatch({ effects: this.setHover.of([]) });\n            else\n                this.watchTooltipLeave(tooltip.dom);\n        }\n    }\n    watchTooltipLeave(tooltip) {\n        let watch = (event) => {\n            tooltip.removeEventListener(\"mouseleave\", watch);\n            if (this.active.length && !this.view.dom.contains(event.relatedTarget))\n                this.view.dispatch({ effects: this.setHover.of([]) });\n        };\n        tooltip.addEventListener(\"mouseleave\", watch);\n    }\n    destroy() {\n        clearTimeout(this.hoverTimeout);\n        this.view.dom.removeEventListener(\"mouseleave\", this.mouseleave);\n        this.view.dom.removeEventListener(\"mousemove\", this.mousemove);\n    }\n}\nconst tooltipMargin = 4;\nfunction isInTooltip(tooltip, event) {\n    let rect = tooltip.getBoundingClientRect();\n    return event.clientX >= rect.left - tooltipMargin && event.clientX <= rect.right + tooltipMargin &&\n        event.clientY >= rect.top - tooltipMargin && event.clientY <= rect.bottom + tooltipMargin;\n}\nfunction isOverRange(view, from, to, x, y, margin) {\n    let rect = view.scrollDOM.getBoundingClientRect();\n    let docBottom = view.documentTop + view.documentPadding.top + view.contentHeight;\n    if (rect.left > x || rect.right < x || rect.top > y || Math.min(rect.bottom, docBottom) < y)\n        return false;\n    let pos = view.posAtCoords({ x, y }, false);\n    return pos >= from && pos <= to;\n}\n/**\nSet up a hover tooltip, which shows up when the pointer hovers\nover ranges of text. The callback is called when the mouse hovers\nover the document text. It should, if there is a tooltip\nassociated with position `pos`, return the tooltip description\n(either directly or in a promise). The `side` argument indicates\non which side of the position the pointer is—it will be -1 if the\npointer is before the position, 1 if after the position.\n\nNote that all hover tooltips are hosted within a single tooltip\ncontainer element. This allows multiple tooltips over the same\nrange to be \"merged\" together without overlapping.\n*/\nfunction hoverTooltip(source, options = {}) {\n    let setHover = StateEffect.define();\n    let hoverState = StateField.define({\n        create() { return []; },\n        update(value, tr) {\n            if (value.length) {\n                if (options.hideOnChange && (tr.docChanged || tr.selection))\n                    value = [];\n                else if (options.hideOn)\n                    value = value.filter(v => !options.hideOn(tr, v));\n                if (tr.docChanged) {\n                    let mapped = [];\n                    for (let tooltip of value) {\n                        let newPos = tr.changes.mapPos(tooltip.pos, -1, MapMode.TrackDel);\n                        if (newPos != null) {\n                            let copy = Object.assign(Object.create(null), tooltip);\n                            copy.pos = newPos;\n                            if (copy.end != null)\n                                copy.end = tr.changes.mapPos(copy.end);\n                            mapped.push(copy);\n                        }\n                    }\n                    value = mapped;\n                }\n            }\n            for (let effect of tr.effects) {\n                if (effect.is(setHover))\n                    value = effect.value;\n                if (effect.is(closeHoverTooltipEffect))\n                    value = [];\n            }\n            return value;\n        },\n        provide: f => showHoverTooltip.from(f)\n    });\n    return [\n        hoverState,\n        ViewPlugin.define(view => new HoverPlugin(view, source, hoverState, setHover, options.hoverTime || 300 /* Hover.Time */)),\n        showHoverTooltipHost\n    ];\n}\n/**\nGet the active tooltip view for a given tooltip, if available.\n*/\nfunction getTooltip(view, tooltip) {\n    let plugin = view.plugin(tooltipPlugin);\n    if (!plugin)\n        return null;\n    let found = plugin.manager.tooltips.indexOf(tooltip);\n    return found < 0 ? null : plugin.manager.tooltipViews[found];\n}\n/**\nReturns true if any hover tooltips are currently active.\n*/\nfunction hasHoverTooltips(state) {\n    return state.facet(showHoverTooltip).some(x => x);\n}\nconst closeHoverTooltipEffect = /*@__PURE__*/StateEffect.define();\n/**\nTransaction effect that closes all hover tooltips.\n*/\nconst closeHoverTooltips = /*@__PURE__*/closeHoverTooltipEffect.of(null);\n/**\nTell the tooltip extension to recompute the position of the active\ntooltips. This can be useful when something happens (such as a\nre-positioning or CSS change affecting the editor) that could\ninvalidate the existing tooltip positions.\n*/\nfunction repositionTooltips(view) {\n    let plugin = view.plugin(tooltipPlugin);\n    if (plugin)\n        plugin.maybeMeasure();\n}\n\nconst panelConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        let topContainer, bottomContainer;\n        for (let c of configs) {\n            topContainer = topContainer || c.topContainer;\n            bottomContainer = bottomContainer || c.bottomContainer;\n        }\n        return { topContainer, bottomContainer };\n    }\n});\n/**\nConfigures the panel-managing extension.\n*/\nfunction panels(config) {\n    return config ? [panelConfig.of(config)] : [];\n}\n/**\nGet the active panel created by the given constructor, if any.\nThis can be useful when you need access to your panels' DOM\nstructure.\n*/\nfunction getPanel(view, panel) {\n    let plugin = view.plugin(panelPlugin);\n    let index = plugin ? plugin.specs.indexOf(panel) : -1;\n    return index > -1 ? plugin.panels[index] : null;\n}\nconst panelPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.input = view.state.facet(showPanel);\n        this.specs = this.input.filter(s => s);\n        this.panels = this.specs.map(spec => spec(view));\n        let conf = view.state.facet(panelConfig);\n        this.top = new PanelGroup(view, true, conf.topContainer);\n        this.bottom = new PanelGroup(view, false, conf.bottomContainer);\n        this.top.sync(this.panels.filter(p => p.top));\n        this.bottom.sync(this.panels.filter(p => !p.top));\n        for (let p of this.panels) {\n            p.dom.classList.add(\"cm-panel\");\n            if (p.mount)\n                p.mount();\n        }\n    }\n    update(update) {\n        let conf = update.state.facet(panelConfig);\n        if (this.top.container != conf.topContainer) {\n            this.top.sync([]);\n            this.top = new PanelGroup(update.view, true, conf.topContainer);\n        }\n        if (this.bottom.container != conf.bottomContainer) {\n            this.bottom.sync([]);\n            this.bottom = new PanelGroup(update.view, false, conf.bottomContainer);\n        }\n        this.top.syncClasses();\n        this.bottom.syncClasses();\n        let input = update.state.facet(showPanel);\n        if (input != this.input) {\n            let specs = input.filter(x => x);\n            let panels = [], top = [], bottom = [], mount = [];\n            for (let spec of specs) {\n                let known = this.specs.indexOf(spec), panel;\n                if (known < 0) {\n                    panel = spec(update.view);\n                    mount.push(panel);\n                }\n                else {\n                    panel = this.panels[known];\n                    if (panel.update)\n                        panel.update(update);\n                }\n                panels.push(panel);\n                (panel.top ? top : bottom).push(panel);\n            }\n            this.specs = specs;\n            this.panels = panels;\n            this.top.sync(top);\n            this.bottom.sync(bottom);\n            for (let p of mount) {\n                p.dom.classList.add(\"cm-panel\");\n                if (p.mount)\n                    p.mount();\n            }\n        }\n        else {\n            for (let p of this.panels)\n                if (p.update)\n                    p.update(update);\n        }\n    }\n    destroy() {\n        this.top.sync([]);\n        this.bottom.sync([]);\n    }\n}, {\n    provide: plugin => EditorView.scrollMargins.of(view => {\n        let value = view.plugin(plugin);\n        return value && { top: value.top.scrollMargin(), bottom: value.bottom.scrollMargin() };\n    })\n});\nclass PanelGroup {\n    constructor(view, top, container) {\n        this.view = view;\n        this.top = top;\n        this.container = container;\n        this.dom = undefined;\n        this.classes = \"\";\n        this.panels = [];\n        this.syncClasses();\n    }\n    sync(panels) {\n        for (let p of this.panels)\n            if (p.destroy && panels.indexOf(p) < 0)\n                p.destroy();\n        this.panels = panels;\n        this.syncDOM();\n    }\n    syncDOM() {\n        if (this.panels.length == 0) {\n            if (this.dom) {\n                this.dom.remove();\n                this.dom = undefined;\n            }\n            return;\n        }\n        if (!this.dom) {\n            this.dom = document.createElement(\"div\");\n            this.dom.className = this.top ? \"cm-panels cm-panels-top\" : \"cm-panels cm-panels-bottom\";\n            this.dom.style[this.top ? \"top\" : \"bottom\"] = \"0\";\n            let parent = this.container || this.view.dom;\n            parent.insertBefore(this.dom, this.top ? parent.firstChild : null);\n        }\n        let curDOM = this.dom.firstChild;\n        for (let panel of this.panels) {\n            if (panel.dom.parentNode == this.dom) {\n                while (curDOM != panel.dom)\n                    curDOM = rm(curDOM);\n                curDOM = curDOM.nextSibling;\n            }\n            else {\n                this.dom.insertBefore(panel.dom, curDOM);\n            }\n        }\n        while (curDOM)\n            curDOM = rm(curDOM);\n    }\n    scrollMargin() {\n        return !this.dom || this.container ? 0\n            : Math.max(0, this.top ?\n                this.dom.getBoundingClientRect().bottom - Math.max(0, this.view.scrollDOM.getBoundingClientRect().top) :\n                Math.min(innerHeight, this.view.scrollDOM.getBoundingClientRect().bottom) - this.dom.getBoundingClientRect().top);\n    }\n    syncClasses() {\n        if (!this.container || this.classes == this.view.themeClasses)\n            return;\n        for (let cls of this.classes.split(\" \"))\n            if (cls)\n                this.container.classList.remove(cls);\n        for (let cls of (this.classes = this.view.themeClasses).split(\" \"))\n            if (cls)\n                this.container.classList.add(cls);\n    }\n}\nfunction rm(node) {\n    let next = node.nextSibling;\n    node.remove();\n    return next;\n}\n/**\nOpening a panel is done by providing a constructor function for\nthe panel through this facet. (The panel is closed again when its\nconstructor is no longer provided.) Values of `null` are ignored.\n*/\nconst showPanel = /*@__PURE__*/Facet.define({\n    enables: panelPlugin\n});\n\n/**\nA gutter marker represents a bit of information attached to a line\nin a specific gutter. Your own custom markers have to extend this\nclass.\n*/\nclass GutterMarker extends RangeValue {\n    /**\n    @internal\n    */\n    compare(other) {\n        return this == other || this.constructor == other.constructor && this.eq(other);\n    }\n    /**\n    Compare this marker to another marker of the same type.\n    */\n    eq(other) { return false; }\n    /**\n    Called if the marker has a `toDOM` method and its representation\n    was removed from a gutter.\n    */\n    destroy(dom) { }\n}\nGutterMarker.prototype.elementClass = \"\";\nGutterMarker.prototype.toDOM = undefined;\nGutterMarker.prototype.mapMode = MapMode.TrackBefore;\nGutterMarker.prototype.startSide = GutterMarker.prototype.endSide = -1;\nGutterMarker.prototype.point = true;\n/**\nFacet used to add a class to all gutter elements for a given line.\nMarkers given to this facet should _only_ define an\n[`elementclass`](https://codemirror.net/6/docs/ref/#view.GutterMarker.elementClass), not a\n[`toDOM`](https://codemirror.net/6/docs/ref/#view.GutterMarker.toDOM) (or the marker will appear\nin all gutters for the line).\n*/\nconst gutterLineClass = /*@__PURE__*/Facet.define();\nconst defaults = {\n    class: \"\",\n    renderEmptyElements: false,\n    elementStyle: \"\",\n    markers: () => RangeSet.empty,\n    lineMarker: () => null,\n    widgetMarker: () => null,\n    lineMarkerChange: null,\n    initialSpacer: null,\n    updateSpacer: null,\n    domEventHandlers: {}\n};\nconst activeGutters = /*@__PURE__*/Facet.define();\n/**\nDefine an editor gutter. The order in which the gutters appear is\ndetermined by their extension priority.\n*/\nfunction gutter(config) {\n    return [gutters(), activeGutters.of(Object.assign(Object.assign({}, defaults), config))];\n}\nconst unfixGutters = /*@__PURE__*/Facet.define({\n    combine: values => values.some(x => x)\n});\n/**\nThe gutter-drawing plugin is automatically enabled when you add a\ngutter, but you can use this function to explicitly configure it.\n\nUnless `fixed` is explicitly set to `false`, the gutters are\nfixed, meaning they don't scroll along with the content\nhorizontally (except on Internet Explorer, which doesn't support\nCSS [`position:\nsticky`](https://developer.mozilla.org/en-US/docs/Web/CSS/position#sticky)).\n*/\nfunction gutters(config) {\n    let result = [\n        gutterView,\n    ];\n    if (config && config.fixed === false)\n        result.push(unfixGutters.of(true));\n    return result;\n}\nconst gutterView = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.prevViewport = view.viewport;\n        this.dom = document.createElement(\"div\");\n        this.dom.className = \"cm-gutters\";\n        this.dom.setAttribute(\"aria-hidden\", \"true\");\n        this.dom.style.minHeight = (this.view.contentHeight / this.view.scaleY) + \"px\";\n        this.gutters = view.state.facet(activeGutters).map(conf => new SingleGutterView(view, conf));\n        for (let gutter of this.gutters)\n            this.dom.appendChild(gutter.dom);\n        this.fixed = !view.state.facet(unfixGutters);\n        if (this.fixed) {\n            // FIXME IE11 fallback, which doesn't support position: sticky,\n            // by using position: relative + event handlers that realign the\n            // gutter (or just force fixed=false on IE11?)\n            this.dom.style.position = \"sticky\";\n        }\n        this.syncGutters(false);\n        view.scrollDOM.insertBefore(this.dom, view.contentDOM);\n    }\n    update(update) {\n        if (this.updateGutters(update)) {\n            // Detach during sync when the viewport changed significantly\n            // (such as during scrolling), since for large updates that is\n            // faster.\n            let vpA = this.prevViewport, vpB = update.view.viewport;\n            let vpOverlap = Math.min(vpA.to, vpB.to) - Math.max(vpA.from, vpB.from);\n            this.syncGutters(vpOverlap < (vpB.to - vpB.from) * 0.8);\n        }\n        if (update.geometryChanged) {\n            this.dom.style.minHeight = (this.view.contentHeight / this.view.scaleY) + \"px\";\n        }\n        if (this.view.state.facet(unfixGutters) != !this.fixed) {\n            this.fixed = !this.fixed;\n            this.dom.style.position = this.fixed ? \"sticky\" : \"\";\n        }\n        this.prevViewport = update.view.viewport;\n    }\n    syncGutters(detach) {\n        let after = this.dom.nextSibling;\n        if (detach)\n            this.dom.remove();\n        let lineClasses = RangeSet.iter(this.view.state.facet(gutterLineClass), this.view.viewport.from);\n        let classSet = [];\n        let contexts = this.gutters.map(gutter => new UpdateContext(gutter, this.view.viewport, -this.view.documentPadding.top));\n        for (let line of this.view.viewportLineBlocks) {\n            if (classSet.length)\n                classSet = [];\n            if (Array.isArray(line.type)) {\n                let first = true;\n                for (let b of line.type) {\n                    if (b.type == BlockType.Text && first) {\n                        advanceCursor(lineClasses, classSet, b.from);\n                        for (let cx of contexts)\n                            cx.line(this.view, b, classSet);\n                        first = false;\n                    }\n                    else if (b.widget) {\n                        for (let cx of contexts)\n                            cx.widget(this.view, b);\n                    }\n                }\n            }\n            else if (line.type == BlockType.Text) {\n                advanceCursor(lineClasses, classSet, line.from);\n                for (let cx of contexts)\n                    cx.line(this.view, line, classSet);\n            }\n            else if (line.widget) {\n                for (let cx of contexts)\n                    cx.widget(this.view, line);\n            }\n        }\n        for (let cx of contexts)\n            cx.finish();\n        if (detach)\n            this.view.scrollDOM.insertBefore(this.dom, after);\n    }\n    updateGutters(update) {\n        let prev = update.startState.facet(activeGutters), cur = update.state.facet(activeGutters);\n        let change = update.docChanged || update.heightChanged || update.viewportChanged ||\n            !RangeSet.eq(update.startState.facet(gutterLineClass), update.state.facet(gutterLineClass), update.view.viewport.from, update.view.viewport.to);\n        if (prev == cur) {\n            for (let gutter of this.gutters)\n                if (gutter.update(update))\n                    change = true;\n        }\n        else {\n            change = true;\n            let gutters = [];\n            for (let conf of cur) {\n                let known = prev.indexOf(conf);\n                if (known < 0) {\n                    gutters.push(new SingleGutterView(this.view, conf));\n                }\n                else {\n                    this.gutters[known].update(update);\n                    gutters.push(this.gutters[known]);\n                }\n            }\n            for (let g of this.gutters) {\n                g.dom.remove();\n                if (gutters.indexOf(g) < 0)\n                    g.destroy();\n            }\n            for (let g of gutters)\n                this.dom.appendChild(g.dom);\n            this.gutters = gutters;\n        }\n        return change;\n    }\n    destroy() {\n        for (let view of this.gutters)\n            view.destroy();\n        this.dom.remove();\n    }\n}, {\n    provide: plugin => EditorView.scrollMargins.of(view => {\n        let value = view.plugin(plugin);\n        if (!value || value.gutters.length == 0 || !value.fixed)\n            return null;\n        return view.textDirection == Direction.LTR\n            ? { left: value.dom.offsetWidth * view.scaleX }\n            : { right: value.dom.offsetWidth * view.scaleX };\n    })\n});\nfunction asArray(val) { return (Array.isArray(val) ? val : [val]); }\nfunction advanceCursor(cursor, collect, pos) {\n    while (cursor.value && cursor.from <= pos) {\n        if (cursor.from == pos)\n            collect.push(cursor.value);\n        cursor.next();\n    }\n}\nclass UpdateContext {\n    constructor(gutter, viewport, height) {\n        this.gutter = gutter;\n        this.height = height;\n        this.i = 0;\n        this.cursor = RangeSet.iter(gutter.markers, viewport.from);\n    }\n    addElement(view, block, markers) {\n        let { gutter } = this, above = (block.top - this.height) / view.scaleY, height = block.height / view.scaleY;\n        if (this.i == gutter.elements.length) {\n            let newElt = new GutterElement(view, height, above, markers);\n            gutter.elements.push(newElt);\n            gutter.dom.appendChild(newElt.dom);\n        }\n        else {\n            gutter.elements[this.i].update(view, height, above, markers);\n        }\n        this.height = block.bottom;\n        this.i++;\n    }\n    line(view, line, extraMarkers) {\n        let localMarkers = [];\n        advanceCursor(this.cursor, localMarkers, line.from);\n        if (extraMarkers.length)\n            localMarkers = localMarkers.concat(extraMarkers);\n        let forLine = this.gutter.config.lineMarker(view, line, localMarkers);\n        if (forLine)\n            localMarkers.unshift(forLine);\n        let gutter = this.gutter;\n        if (localMarkers.length == 0 && !gutter.config.renderEmptyElements)\n            return;\n        this.addElement(view, line, localMarkers);\n    }\n    widget(view, block) {\n        let marker = this.gutter.config.widgetMarker(view, block.widget, block);\n        if (marker)\n            this.addElement(view, block, [marker]);\n    }\n    finish() {\n        let gutter = this.gutter;\n        while (gutter.elements.length > this.i) {\n            let last = gutter.elements.pop();\n            gutter.dom.removeChild(last.dom);\n            last.destroy();\n        }\n    }\n}\nclass SingleGutterView {\n    constructor(view, config) {\n        this.view = view;\n        this.config = config;\n        this.elements = [];\n        this.spacer = null;\n        this.dom = document.createElement(\"div\");\n        this.dom.className = \"cm-gutter\" + (this.config.class ? \" \" + this.config.class : \"\");\n        for (let prop in config.domEventHandlers) {\n            this.dom.addEventListener(prop, (event) => {\n                let target = event.target, y;\n                if (target != this.dom && this.dom.contains(target)) {\n                    while (target.parentNode != this.dom)\n                        target = target.parentNode;\n                    let rect = target.getBoundingClientRect();\n                    y = (rect.top + rect.bottom) / 2;\n                }\n                else {\n                    y = event.clientY;\n                }\n                let line = view.lineBlockAtHeight(y - view.documentTop);\n                if (config.domEventHandlers[prop](view, line, event))\n                    event.preventDefault();\n            });\n        }\n        this.markers = asArray(config.markers(view));\n        if (config.initialSpacer) {\n            this.spacer = new GutterElement(view, 0, 0, [config.initialSpacer(view)]);\n            this.dom.appendChild(this.spacer.dom);\n            this.spacer.dom.style.cssText += \"visibility: hidden; pointer-events: none\";\n        }\n    }\n    update(update) {\n        let prevMarkers = this.markers;\n        this.markers = asArray(this.config.markers(update.view));\n        if (this.spacer && this.config.updateSpacer) {\n            let updated = this.config.updateSpacer(this.spacer.markers[0], update);\n            if (updated != this.spacer.markers[0])\n                this.spacer.update(update.view, 0, 0, [updated]);\n        }\n        let vp = update.view.viewport;\n        return !RangeSet.eq(this.markers, prevMarkers, vp.from, vp.to) ||\n            (this.config.lineMarkerChange ? this.config.lineMarkerChange(update) : false);\n    }\n    destroy() {\n        for (let elt of this.elements)\n            elt.destroy();\n    }\n}\nclass GutterElement {\n    constructor(view, height, above, markers) {\n        this.height = -1;\n        this.above = 0;\n        this.markers = [];\n        this.dom = document.createElement(\"div\");\n        this.dom.className = \"cm-gutterElement\";\n        this.update(view, height, above, markers);\n    }\n    update(view, height, above, markers) {\n        if (this.height != height) {\n            this.height = height;\n            this.dom.style.height = height + \"px\";\n        }\n        if (this.above != above)\n            this.dom.style.marginTop = (this.above = above) ? above + \"px\" : \"\";\n        if (!sameMarkers(this.markers, markers))\n            this.setMarkers(view, markers);\n    }\n    setMarkers(view, markers) {\n        let cls = \"cm-gutterElement\", domPos = this.dom.firstChild;\n        for (let iNew = 0, iOld = 0;;) {\n            let skipTo = iOld, marker = iNew < markers.length ? markers[iNew++] : null, matched = false;\n            if (marker) {\n                let c = marker.elementClass;\n                if (c)\n                    cls += \" \" + c;\n                for (let i = iOld; i < this.markers.length; i++)\n                    if (this.markers[i].compare(marker)) {\n                        skipTo = i;\n                        matched = true;\n                        break;\n                    }\n            }\n            else {\n                skipTo = this.markers.length;\n            }\n            while (iOld < skipTo) {\n                let next = this.markers[iOld++];\n                if (next.toDOM) {\n                    next.destroy(domPos);\n                    let after = domPos.nextSibling;\n                    domPos.remove();\n                    domPos = after;\n                }\n            }\n            if (!marker)\n                break;\n            if (marker.toDOM) {\n                if (matched)\n                    domPos = domPos.nextSibling;\n                else\n                    this.dom.insertBefore(marker.toDOM(view), domPos);\n            }\n            if (matched)\n                iOld++;\n        }\n        this.dom.className = cls;\n        this.markers = markers;\n    }\n    destroy() {\n        this.setMarkers(null, []); // First argument not used unless creating markers\n    }\n}\nfunction sameMarkers(a, b) {\n    if (a.length != b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (!a[i].compare(b[i]))\n            return false;\n    return true;\n}\n/**\nFacet used to provide markers to the line number gutter.\n*/\nconst lineNumberMarkers = /*@__PURE__*/Facet.define();\nconst lineNumberConfig = /*@__PURE__*/Facet.define({\n    combine(values) {\n        return combineConfig(values, { formatNumber: String, domEventHandlers: {} }, {\n            domEventHandlers(a, b) {\n                let result = Object.assign({}, a);\n                for (let event in b) {\n                    let exists = result[event], add = b[event];\n                    result[event] = exists ? (view, line, event) => exists(view, line, event) || add(view, line, event) : add;\n                }\n                return result;\n            }\n        });\n    }\n});\nclass NumberMarker extends GutterMarker {\n    constructor(number) {\n        super();\n        this.number = number;\n    }\n    eq(other) { return this.number == other.number; }\n    toDOM() { return document.createTextNode(this.number); }\n}\nfunction formatNumber(view, number) {\n    return view.state.facet(lineNumberConfig).formatNumber(number, view.state);\n}\nconst lineNumberGutter = /*@__PURE__*/activeGutters.compute([lineNumberConfig], state => ({\n    class: \"cm-lineNumbers\",\n    renderEmptyElements: false,\n    markers(view) { return view.state.facet(lineNumberMarkers); },\n    lineMarker(view, line, others) {\n        if (others.some(m => m.toDOM))\n            return null;\n        return new NumberMarker(formatNumber(view, view.state.doc.lineAt(line.from).number));\n    },\n    widgetMarker: () => null,\n    lineMarkerChange: update => update.startState.facet(lineNumberConfig) != update.state.facet(lineNumberConfig),\n    initialSpacer(view) {\n        return new NumberMarker(formatNumber(view, maxLineNumber(view.state.doc.lines)));\n    },\n    updateSpacer(spacer, update) {\n        let max = formatNumber(update.view, maxLineNumber(update.view.state.doc.lines));\n        return max == spacer.number ? spacer : new NumberMarker(max);\n    },\n    domEventHandlers: state.facet(lineNumberConfig).domEventHandlers\n}));\n/**\nCreate a line number gutter extension.\n*/\nfunction lineNumbers(config = {}) {\n    return [\n        lineNumberConfig.of(config),\n        gutters(),\n        lineNumberGutter\n    ];\n}\nfunction maxLineNumber(lines) {\n    let last = 9;\n    while (last < lines)\n        last = last * 10 + 9;\n    return last;\n}\nconst activeLineGutterMarker = /*@__PURE__*/new class extends GutterMarker {\n    constructor() {\n        super(...arguments);\n        this.elementClass = \"cm-activeLineGutter\";\n    }\n};\nconst activeLineGutterHighlighter = /*@__PURE__*/gutterLineClass.compute([\"selection\"], state => {\n    let marks = [], last = -1;\n    for (let range of state.selection.ranges) {\n        let linePos = state.doc.lineAt(range.head).from;\n        if (linePos > last) {\n            last = linePos;\n            marks.push(activeLineGutterMarker.range(linePos));\n        }\n    }\n    return RangeSet.of(marks);\n});\n/**\nReturns an extension that adds a `cm-activeLineGutter` class to\nall gutter elements on the [active\nline](https://codemirror.net/6/docs/ref/#view.highlightActiveLine).\n*/\nfunction highlightActiveLineGutter() {\n    return activeLineGutterHighlighter;\n}\n\nconst WhitespaceDeco = /*@__PURE__*/new Map();\nfunction getWhitespaceDeco(space) {\n    let deco = WhitespaceDeco.get(space);\n    if (!deco)\n        WhitespaceDeco.set(space, deco = Decoration.mark({\n            attributes: space === \"\\t\" ? {\n                class: \"cm-highlightTab\",\n            } : {\n                class: \"cm-highlightSpace\",\n                \"data-display\": space.replace(/ /g, \"·\")\n            }\n        }));\n    return deco;\n}\nfunction matcher(decorator) {\n    return ViewPlugin.define(view => ({\n        decorations: decorator.createDeco(view),\n        update(u) {\n            this.decorations = decorator.updateDeco(u, this.decorations);\n        },\n    }), {\n        decorations: v => v.decorations\n    });\n}\nconst whitespaceHighlighter = /*@__PURE__*/matcher(/*@__PURE__*/new MatchDecorator({\n    regexp: /\\t| +/g,\n    decoration: match => getWhitespaceDeco(match[0]),\n    boundary: /\\S/,\n}));\n/**\nReturns an extension that highlights whitespace, adding a\n`cm-highlightSpace` class to stretches of spaces, and a\n`cm-highlightTab` class to individual tab characters. By default,\nthe former are shown as faint dots, and the latter as arrows.\n*/\nfunction highlightWhitespace() {\n    return whitespaceHighlighter;\n}\nconst trailingHighlighter = /*@__PURE__*/matcher(/*@__PURE__*/new MatchDecorator({\n    regexp: /\\s+$/g,\n    decoration: /*@__PURE__*/Decoration.mark({ class: \"cm-trailingSpace\" }),\n    boundary: /\\S/,\n}));\n/**\nReturns an extension that adds a `cm-trailingSpace` class to all\ntrailing whitespace.\n*/\nfunction highlightTrailingWhitespace() {\n    return trailingHighlighter;\n}\n\n/**\n@internal\n*/\nconst __test = { HeightMap, HeightOracle, MeasuredHeights, QueryType, ChangedRange, computeOrder, moveVisually };\n\nexport { BidiSpan, BlockInfo, BlockType, Decoration, Direction, EditorView, GutterMarker, MatchDecorator, RectangleMarker, ViewPlugin, ViewUpdate, WidgetType, __test, closeHoverTooltips, crosshairCursor, drawSelection, dropCursor, getDrawSelectionConfig, getPanel, getTooltip, gutter, gutterLineClass, gutters, hasHoverTooltips, highlightActiveLine, highlightActiveLineGutter, highlightSpecialChars, highlightTrailingWhitespace, highlightWhitespace, hoverTooltip, keymap, layer, lineNumberMarkers, lineNumbers, logException, panels, placeholder, rectangularSelection, repositionTooltips, runScopeHandlers, scrollPastEnd, showPanel, showTooltip, tooltips };\n","import { NodeProp } from '@lezer/common';\n\nlet nextTagID = 0;\n/**\nHighlighting tags are markers that denote a highlighting category.\nThey are [associated](#highlight.styleTags) with parts of a syntax\ntree by a language mode, and then mapped to an actual CSS style by\na [highlighter](#highlight.Highlighter).\n\nBecause syntax tree node types and highlight styles have to be\nable to talk the same language, CodeMirror uses a mostly _closed_\n[vocabulary](#highlight.tags) of syntax tags (as opposed to\ntraditional open string-based systems, which make it hard for\nhighlighting themes to cover all the tokens produced by the\nvarious languages).\n\nIt _is_ possible to [define](#highlight.Tag^define) your own\nhighlighting tags for system-internal use (where you control both\nthe language package and the highlighter), but such tags will not\nbe picked up by regular highlighters (though you can derive them\nfrom standard tags to allow highlighters to fall back to those).\n*/\nclass Tag {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The set of this tag and all its parent tags, starting with\n    this one itself and sorted in order of decreasing specificity.\n    */\n    set, \n    /**\n    The base unmodified tag that this one is based on, if it's\n    modified @internal\n    */\n    base, \n    /**\n    The modifiers applied to this.base @internal\n    */\n    modified) {\n        this.set = set;\n        this.base = base;\n        this.modified = modified;\n        /**\n        @internal\n        */\n        this.id = nextTagID++;\n    }\n    /**\n    Define a new tag. If `parent` is given, the tag is treated as a\n    sub-tag of that parent, and\n    [highlighters](#highlight.tagHighlighter) that don't mention\n    this tag will try to fall back to the parent tag (or grandparent\n    tag, etc).\n    */\n    static define(parent) {\n        if (parent === null || parent === void 0 ? void 0 : parent.base)\n            throw new Error(\"Can not derive from a modified tag\");\n        let tag = new Tag([], null, []);\n        tag.set.push(tag);\n        if (parent)\n            for (let t of parent.set)\n                tag.set.push(t);\n        return tag;\n    }\n    /**\n    Define a tag _modifier_, which is a function that, given a tag,\n    will return a tag that is a subtag of the original. Applying the\n    same modifier to a twice tag will return the same value (`m1(t1)\n    == m1(t1)`) and applying multiple modifiers will, regardless or\n    order, produce the same tag (`m1(m2(t1)) == m2(m1(t1))`).\n    \n    When multiple modifiers are applied to a given base tag, each\n    smaller set of modifiers is registered as a parent, so that for\n    example `m1(m2(m3(t1)))` is a subtype of `m1(m2(t1))`,\n    `m1(m3(t1)`, and so on.\n    */\n    static defineModifier() {\n        let mod = new Modifier;\n        return (tag) => {\n            if (tag.modified.indexOf(mod) > -1)\n                return tag;\n            return Modifier.get(tag.base || tag, tag.modified.concat(mod).sort((a, b) => a.id - b.id));\n        };\n    }\n}\nlet nextModifierID = 0;\nclass Modifier {\n    constructor() {\n        this.instances = [];\n        this.id = nextModifierID++;\n    }\n    static get(base, mods) {\n        if (!mods.length)\n            return base;\n        let exists = mods[0].instances.find(t => t.base == base && sameArray(mods, t.modified));\n        if (exists)\n            return exists;\n        let set = [], tag = new Tag(set, base, mods);\n        for (let m of mods)\n            m.instances.push(tag);\n        let configs = powerSet(mods);\n        for (let parent of base.set)\n            if (!parent.modified.length)\n                for (let config of configs)\n                    set.push(Modifier.get(parent, config));\n        return tag;\n    }\n}\nfunction sameArray(a, b) {\n    return a.length == b.length && a.every((x, i) => x == b[i]);\n}\nfunction powerSet(array) {\n    let sets = [[]];\n    for (let i = 0; i < array.length; i++) {\n        for (let j = 0, e = sets.length; j < e; j++) {\n            sets.push(sets[j].concat(array[i]));\n        }\n    }\n    return sets.sort((a, b) => b.length - a.length);\n}\n/**\nThis function is used to add a set of tags to a language syntax\nvia [`NodeSet.extend`](#common.NodeSet.extend) or\n[`LRParser.configure`](#lr.LRParser.configure).\n\nThe argument object maps node selectors to [highlighting\ntags](#highlight.Tag) or arrays of tags.\n\nNode selectors may hold one or more (space-separated) node paths.\nSuch a path can be a [node name](#common.NodeType.name), or\nmultiple node names (or `*` wildcards) separated by slash\ncharacters, as in `\"Block/Declaration/VariableName\"`. Such a path\nmatches the final node but only if its direct parent nodes are the\nother nodes mentioned. A `*` in such a path matches any parent,\nbut only a single level—wildcards that match multiple parents\naren't supported, both for efficiency reasons and because Lezer\ntrees make it rather hard to reason about what they would match.)\n\nA path can be ended with `/...` to indicate that the tag assigned\nto the node should also apply to all child nodes, even if they\nmatch their own style (by default, only the innermost style is\nused).\n\nWhen a path ends in `!`, as in `Attribute!`, no further matching\nhappens for the node's child nodes, and the entire node gets the\ngiven style.\n\nIn this notation, node names that contain `/`, `!`, `*`, or `...`\nmust be quoted as JSON strings.\n\nFor example:\n\n```javascript\nparser.withProps(\n  styleTags({\n    // Style Number and BigNumber nodes\n    \"Number BigNumber\": tags.number,\n    // Style Escape nodes whose parent is String\n    \"String/Escape\": tags.escape,\n    // Style anything inside Attributes nodes\n    \"Attributes!\": tags.meta,\n    // Add a style to all content inside Italic nodes\n    \"Italic/...\": tags.emphasis,\n    // Style InvalidString nodes as both `string` and `invalid`\n    \"InvalidString\": [tags.string, tags.invalid],\n    // Style the node named \"/\" as punctuation\n    '\"/\"': tags.punctuation\n  })\n)\n```\n*/\nfunction styleTags(spec) {\n    let byName = Object.create(null);\n    for (let prop in spec) {\n        let tags = spec[prop];\n        if (!Array.isArray(tags))\n            tags = [tags];\n        for (let part of prop.split(\" \"))\n            if (part) {\n                let pieces = [], mode = 2 /* Mode.Normal */, rest = part;\n                for (let pos = 0;;) {\n                    if (rest == \"...\" && pos > 0 && pos + 3 == part.length) {\n                        mode = 1 /* Mode.Inherit */;\n                        break;\n                    }\n                    let m = /^\"(?:[^\"\\\\]|\\\\.)*?\"|[^\\/!]+/.exec(rest);\n                    if (!m)\n                        throw new RangeError(\"Invalid path: \" + part);\n                    pieces.push(m[0] == \"*\" ? \"\" : m[0][0] == '\"' ? JSON.parse(m[0]) : m[0]);\n                    pos += m[0].length;\n                    if (pos == part.length)\n                        break;\n                    let next = part[pos++];\n                    if (pos == part.length && next == \"!\") {\n                        mode = 0 /* Mode.Opaque */;\n                        break;\n                    }\n                    if (next != \"/\")\n                        throw new RangeError(\"Invalid path: \" + part);\n                    rest = part.slice(pos);\n                }\n                let last = pieces.length - 1, inner = pieces[last];\n                if (!inner)\n                    throw new RangeError(\"Invalid path: \" + part);\n                let rule = new Rule(tags, mode, last > 0 ? pieces.slice(0, last) : null);\n                byName[inner] = rule.sort(byName[inner]);\n            }\n    }\n    return ruleNodeProp.add(byName);\n}\nconst ruleNodeProp = new NodeProp();\nclass Rule {\n    constructor(tags, mode, context, next) {\n        this.tags = tags;\n        this.mode = mode;\n        this.context = context;\n        this.next = next;\n    }\n    get opaque() { return this.mode == 0 /* Mode.Opaque */; }\n    get inherit() { return this.mode == 1 /* Mode.Inherit */; }\n    sort(other) {\n        if (!other || other.depth < this.depth) {\n            this.next = other;\n            return this;\n        }\n        other.next = this.sort(other.next);\n        return other;\n    }\n    get depth() { return this.context ? this.context.length : 0; }\n}\nRule.empty = new Rule([], 2 /* Mode.Normal */, null);\n/**\nDefine a [highlighter](#highlight.Highlighter) from an array of\ntag/class pairs. Classes associated with more specific tags will\ntake precedence.\n*/\nfunction tagHighlighter(tags, options) {\n    let map = Object.create(null);\n    for (let style of tags) {\n        if (!Array.isArray(style.tag))\n            map[style.tag.id] = style.class;\n        else\n            for (let tag of style.tag)\n                map[tag.id] = style.class;\n    }\n    let { scope, all = null } = options || {};\n    return {\n        style: (tags) => {\n            let cls = all;\n            for (let tag of tags) {\n                for (let sub of tag.set) {\n                    let tagClass = map[sub.id];\n                    if (tagClass) {\n                        cls = cls ? cls + \" \" + tagClass : tagClass;\n                        break;\n                    }\n                }\n            }\n            return cls;\n        },\n        scope\n    };\n}\nfunction highlightTags(highlighters, tags) {\n    let result = null;\n    for (let highlighter of highlighters) {\n        let value = highlighter.style(tags);\n        if (value)\n            result = result ? result + \" \" + value : value;\n    }\n    return result;\n}\n/**\nHighlight the given [tree](#common.Tree) with the given\n[highlighter](#highlight.Highlighter). Often, the higher-level\n[`highlightCode`](#highlight.highlightCode) function is easier to\nuse.\n*/\nfunction highlightTree(tree, highlighter, \n/**\nAssign styling to a region of the text. Will be called, in order\nof position, for any ranges where more than zero classes apply.\n`classes` is a space separated string of CSS classes.\n*/\nputStyle, \n/**\nThe start of the range to highlight.\n*/\nfrom = 0, \n/**\nThe end of the range.\n*/\nto = tree.length) {\n    let builder = new HighlightBuilder(from, Array.isArray(highlighter) ? highlighter : [highlighter], putStyle);\n    builder.highlightRange(tree.cursor(), from, to, \"\", builder.highlighters);\n    builder.flush(to);\n}\n/**\nHighlight the given tree with the given highlighter, calling\n`putText` for every piece of text, either with a set of classes or\nwith the empty string when unstyled, and `putBreak` for every line\nbreak.\n*/\nfunction highlightCode(code, tree, highlighter, putText, putBreak, from = 0, to = code.length) {\n    let pos = from;\n    function writeTo(p, classes) {\n        if (p <= pos)\n            return;\n        for (let text = code.slice(pos, p), i = 0;;) {\n            let nextBreak = text.indexOf(\"\\n\", i);\n            let upto = nextBreak < 0 ? text.length : nextBreak;\n            if (upto > i)\n                putText(text.slice(i, upto), classes);\n            if (nextBreak < 0)\n                break;\n            putBreak();\n            i = nextBreak + 1;\n        }\n        pos = p;\n    }\n    highlightTree(tree, highlighter, (from, to, classes) => {\n        writeTo(from, \"\");\n        writeTo(to, classes);\n    }, from, to);\n    writeTo(to, \"\");\n}\nclass HighlightBuilder {\n    constructor(at, highlighters, span) {\n        this.at = at;\n        this.highlighters = highlighters;\n        this.span = span;\n        this.class = \"\";\n    }\n    startSpan(at, cls) {\n        if (cls != this.class) {\n            this.flush(at);\n            if (at > this.at)\n                this.at = at;\n            this.class = cls;\n        }\n    }\n    flush(to) {\n        if (to > this.at && this.class)\n            this.span(this.at, to, this.class);\n    }\n    highlightRange(cursor, from, to, inheritedClass, highlighters) {\n        let { type, from: start, to: end } = cursor;\n        if (start >= to || end <= from)\n            return;\n        if (type.isTop)\n            highlighters = this.highlighters.filter(h => !h.scope || h.scope(type));\n        let cls = inheritedClass;\n        let rule = getStyleTags(cursor) || Rule.empty;\n        let tagCls = highlightTags(highlighters, rule.tags);\n        if (tagCls) {\n            if (cls)\n                cls += \" \";\n            cls += tagCls;\n            if (rule.mode == 1 /* Mode.Inherit */)\n                inheritedClass += (inheritedClass ? \" \" : \"\") + tagCls;\n        }\n        this.startSpan(Math.max(from, start), cls);\n        if (rule.opaque)\n            return;\n        let mounted = cursor.tree && cursor.tree.prop(NodeProp.mounted);\n        if (mounted && mounted.overlay) {\n            let inner = cursor.node.enter(mounted.overlay[0].from + start, 1);\n            let innerHighlighters = this.highlighters.filter(h => !h.scope || h.scope(mounted.tree.type));\n            let hasChild = cursor.firstChild();\n            for (let i = 0, pos = start;; i++) {\n                let next = i < mounted.overlay.length ? mounted.overlay[i] : null;\n                let nextPos = next ? next.from + start : end;\n                let rangeFrom = Math.max(from, pos), rangeTo = Math.min(to, nextPos);\n                if (rangeFrom < rangeTo && hasChild) {\n                    while (cursor.from < rangeTo) {\n                        this.highlightRange(cursor, rangeFrom, rangeTo, inheritedClass, highlighters);\n                        this.startSpan(Math.min(rangeTo, cursor.to), cls);\n                        if (cursor.to >= nextPos || !cursor.nextSibling())\n                            break;\n                    }\n                }\n                if (!next || nextPos > to)\n                    break;\n                pos = next.to + start;\n                if (pos > from) {\n                    this.highlightRange(inner.cursor(), Math.max(from, next.from + start), Math.min(to, pos), \"\", innerHighlighters);\n                    this.startSpan(Math.min(to, pos), cls);\n                }\n            }\n            if (hasChild)\n                cursor.parent();\n        }\n        else if (cursor.firstChild()) {\n            if (mounted)\n                inheritedClass = \"\";\n            do {\n                if (cursor.to <= from)\n                    continue;\n                if (cursor.from >= to)\n                    break;\n                this.highlightRange(cursor, from, to, inheritedClass, highlighters);\n                this.startSpan(Math.min(to, cursor.to), cls);\n            } while (cursor.nextSibling());\n            cursor.parent();\n        }\n    }\n}\n/**\nMatch a syntax node's [highlight rules](#highlight.styleTags). If\nthere's a match, return its set of tags, and whether it is\nopaque (uses a `!`) or applies to all child nodes (`/...`).\n*/\nfunction getStyleTags(node) {\n    let rule = node.type.prop(ruleNodeProp);\n    while (rule && rule.context && !node.matchContext(rule.context))\n        rule = rule.next;\n    return rule || null;\n}\nconst t = Tag.define;\nconst comment = t(), name = t(), typeName = t(name), propertyName = t(name), literal = t(), string = t(literal), number = t(literal), content = t(), heading = t(content), keyword = t(), operator = t(), punctuation = t(), bracket = t(punctuation), meta = t();\n/**\nThe default set of highlighting [tags](#highlight.Tag).\n\nThis collection is heavily biased towards programming languages,\nand necessarily incomplete. A full ontology of syntactic\nconstructs would fill a stack of books, and be impractical to\nwrite themes for. So try to make do with this set. If all else\nfails, [open an\nissue](https://github.com/codemirror/codemirror.next) to propose a\nnew tag, or [define](#highlight.Tag^define) a local custom tag for\nyour use case.\n\nNote that it is not obligatory to always attach the most specific\ntag possible to an element—if your grammar can't easily\ndistinguish a certain type of element (such as a local variable),\nit is okay to style it as its more general variant (a variable).\n\nFor tags that extend some parent tag, the documentation links to\nthe parent.\n*/\nconst tags = {\n    /**\n    A comment.\n    */\n    comment,\n    /**\n    A line [comment](#highlight.tags.comment).\n    */\n    lineComment: t(comment),\n    /**\n    A block [comment](#highlight.tags.comment).\n    */\n    blockComment: t(comment),\n    /**\n    A documentation [comment](#highlight.tags.comment).\n    */\n    docComment: t(comment),\n    /**\n    Any kind of identifier.\n    */\n    name,\n    /**\n    The [name](#highlight.tags.name) of a variable.\n    */\n    variableName: t(name),\n    /**\n    A type [name](#highlight.tags.name).\n    */\n    typeName: typeName,\n    /**\n    A tag name (subtag of [`typeName`](#highlight.tags.typeName)).\n    */\n    tagName: t(typeName),\n    /**\n    A property or field [name](#highlight.tags.name).\n    */\n    propertyName: propertyName,\n    /**\n    An attribute name (subtag of [`propertyName`](#highlight.tags.propertyName)).\n    */\n    attributeName: t(propertyName),\n    /**\n    The [name](#highlight.tags.name) of a class.\n    */\n    className: t(name),\n    /**\n    A label [name](#highlight.tags.name).\n    */\n    labelName: t(name),\n    /**\n    A namespace [name](#highlight.tags.name).\n    */\n    namespace: t(name),\n    /**\n    The [name](#highlight.tags.name) of a macro.\n    */\n    macroName: t(name),\n    /**\n    A literal value.\n    */\n    literal,\n    /**\n    A string [literal](#highlight.tags.literal).\n    */\n    string,\n    /**\n    A documentation [string](#highlight.tags.string).\n    */\n    docString: t(string),\n    /**\n    A character literal (subtag of [string](#highlight.tags.string)).\n    */\n    character: t(string),\n    /**\n    An attribute value (subtag of [string](#highlight.tags.string)).\n    */\n    attributeValue: t(string),\n    /**\n    A number [literal](#highlight.tags.literal).\n    */\n    number,\n    /**\n    An integer [number](#highlight.tags.number) literal.\n    */\n    integer: t(number),\n    /**\n    A floating-point [number](#highlight.tags.number) literal.\n    */\n    float: t(number),\n    /**\n    A boolean [literal](#highlight.tags.literal).\n    */\n    bool: t(literal),\n    /**\n    Regular expression [literal](#highlight.tags.literal).\n    */\n    regexp: t(literal),\n    /**\n    An escape [literal](#highlight.tags.literal), for example a\n    backslash escape in a string.\n    */\n    escape: t(literal),\n    /**\n    A color [literal](#highlight.tags.literal).\n    */\n    color: t(literal),\n    /**\n    A URL [literal](#highlight.tags.literal).\n    */\n    url: t(literal),\n    /**\n    A language keyword.\n    */\n    keyword,\n    /**\n    The [keyword](#highlight.tags.keyword) for the self or this\n    object.\n    */\n    self: t(keyword),\n    /**\n    The [keyword](#highlight.tags.keyword) for null.\n    */\n    null: t(keyword),\n    /**\n    A [keyword](#highlight.tags.keyword) denoting some atomic value.\n    */\n    atom: t(keyword),\n    /**\n    A [keyword](#highlight.tags.keyword) that represents a unit.\n    */\n    unit: t(keyword),\n    /**\n    A modifier [keyword](#highlight.tags.keyword).\n    */\n    modifier: t(keyword),\n    /**\n    A [keyword](#highlight.tags.keyword) that acts as an operator.\n    */\n    operatorKeyword: t(keyword),\n    /**\n    A control-flow related [keyword](#highlight.tags.keyword).\n    */\n    controlKeyword: t(keyword),\n    /**\n    A [keyword](#highlight.tags.keyword) that defines something.\n    */\n    definitionKeyword: t(keyword),\n    /**\n    A [keyword](#highlight.tags.keyword) related to defining or\n    interfacing with modules.\n    */\n    moduleKeyword: t(keyword),\n    /**\n    An operator.\n    */\n    operator,\n    /**\n    An [operator](#highlight.tags.operator) that dereferences something.\n    */\n    derefOperator: t(operator),\n    /**\n    Arithmetic-related [operator](#highlight.tags.operator).\n    */\n    arithmeticOperator: t(operator),\n    /**\n    Logical [operator](#highlight.tags.operator).\n    */\n    logicOperator: t(operator),\n    /**\n    Bit [operator](#highlight.tags.operator).\n    */\n    bitwiseOperator: t(operator),\n    /**\n    Comparison [operator](#highlight.tags.operator).\n    */\n    compareOperator: t(operator),\n    /**\n    [Operator](#highlight.tags.operator) that updates its operand.\n    */\n    updateOperator: t(operator),\n    /**\n    [Operator](#highlight.tags.operator) that defines something.\n    */\n    definitionOperator: t(operator),\n    /**\n    Type-related [operator](#highlight.tags.operator).\n    */\n    typeOperator: t(operator),\n    /**\n    Control-flow [operator](#highlight.tags.operator).\n    */\n    controlOperator: t(operator),\n    /**\n    Program or markup punctuation.\n    */\n    punctuation,\n    /**\n    [Punctuation](#highlight.tags.punctuation) that separates\n    things.\n    */\n    separator: t(punctuation),\n    /**\n    Bracket-style [punctuation](#highlight.tags.punctuation).\n    */\n    bracket,\n    /**\n    Angle [brackets](#highlight.tags.bracket) (usually `<` and `>`\n    tokens).\n    */\n    angleBracket: t(bracket),\n    /**\n    Square [brackets](#highlight.tags.bracket) (usually `[` and `]`\n    tokens).\n    */\n    squareBracket: t(bracket),\n    /**\n    Parentheses (usually `(` and `)` tokens). Subtag of\n    [bracket](#highlight.tags.bracket).\n    */\n    paren: t(bracket),\n    /**\n    Braces (usually `{` and `}` tokens). Subtag of\n    [bracket](#highlight.tags.bracket).\n    */\n    brace: t(bracket),\n    /**\n    Content, for example plain text in XML or markup documents.\n    */\n    content,\n    /**\n    [Content](#highlight.tags.content) that represents a heading.\n    */\n    heading,\n    /**\n    A level 1 [heading](#highlight.tags.heading).\n    */\n    heading1: t(heading),\n    /**\n    A level 2 [heading](#highlight.tags.heading).\n    */\n    heading2: t(heading),\n    /**\n    A level 3 [heading](#highlight.tags.heading).\n    */\n    heading3: t(heading),\n    /**\n    A level 4 [heading](#highlight.tags.heading).\n    */\n    heading4: t(heading),\n    /**\n    A level 5 [heading](#highlight.tags.heading).\n    */\n    heading5: t(heading),\n    /**\n    A level 6 [heading](#highlight.tags.heading).\n    */\n    heading6: t(heading),\n    /**\n    A prose separator (such as a horizontal rule).\n    */\n    contentSeparator: t(content),\n    /**\n    [Content](#highlight.tags.content) that represents a list.\n    */\n    list: t(content),\n    /**\n    [Content](#highlight.tags.content) that represents a quote.\n    */\n    quote: t(content),\n    /**\n    [Content](#highlight.tags.content) that is emphasized.\n    */\n    emphasis: t(content),\n    /**\n    [Content](#highlight.tags.content) that is styled strong.\n    */\n    strong: t(content),\n    /**\n    [Content](#highlight.tags.content) that is part of a link.\n    */\n    link: t(content),\n    /**\n    [Content](#highlight.tags.content) that is styled as code or\n    monospace.\n    */\n    monospace: t(content),\n    /**\n    [Content](#highlight.tags.content) that has a strike-through\n    style.\n    */\n    strikethrough: t(content),\n    /**\n    Inserted text in a change-tracking format.\n    */\n    inserted: t(),\n    /**\n    Deleted text.\n    */\n    deleted: t(),\n    /**\n    Changed text.\n    */\n    changed: t(),\n    /**\n    An invalid or unsyntactic element.\n    */\n    invalid: t(),\n    /**\n    Metadata or meta-instruction.\n    */\n    meta,\n    /**\n    [Metadata](#highlight.tags.meta) that applies to the entire\n    document.\n    */\n    documentMeta: t(meta),\n    /**\n    [Metadata](#highlight.tags.meta) that annotates or adds\n    attributes to a given syntactic element.\n    */\n    annotation: t(meta),\n    /**\n    Processing instruction or preprocessor directive. Subtag of\n    [meta](#highlight.tags.meta).\n    */\n    processingInstruction: t(meta),\n    /**\n    [Modifier](#highlight.Tag^defineModifier) that indicates that a\n    given element is being defined. Expected to be used with the\n    various [name](#highlight.tags.name) tags.\n    */\n    definition: Tag.defineModifier(),\n    /**\n    [Modifier](#highlight.Tag^defineModifier) that indicates that\n    something is constant. Mostly expected to be used with\n    [variable names](#highlight.tags.variableName).\n    */\n    constant: Tag.defineModifier(),\n    /**\n    [Modifier](#highlight.Tag^defineModifier) used to indicate that\n    a [variable](#highlight.tags.variableName) or [property\n    name](#highlight.tags.propertyName) is being called or defined\n    as a function.\n    */\n    function: Tag.defineModifier(),\n    /**\n    [Modifier](#highlight.Tag^defineModifier) that can be applied to\n    [names](#highlight.tags.name) to indicate that they belong to\n    the language's standard environment.\n    */\n    standard: Tag.defineModifier(),\n    /**\n    [Modifier](#highlight.Tag^defineModifier) that indicates a given\n    [names](#highlight.tags.name) is local to some scope.\n    */\n    local: Tag.defineModifier(),\n    /**\n    A generic variant [modifier](#highlight.Tag^defineModifier) that\n    can be used to tag language-specific alternative variants of\n    some common tag. It is recommended for themes to define special\n    forms of at least the [string](#highlight.tags.string) and\n    [variable name](#highlight.tags.variableName) tags, since those\n    come up a lot.\n    */\n    special: Tag.defineModifier()\n};\n/**\nThis is a highlighter that adds stable, predictable classes to\ntokens, for styling with external CSS.\n\nThe following tags are mapped to their name prefixed with `\"tok-\"`\n(for example `\"tok-comment\"`):\n\n* [`link`](#highlight.tags.link)\n* [`heading`](#highlight.tags.heading)\n* [`emphasis`](#highlight.tags.emphasis)\n* [`strong`](#highlight.tags.strong)\n* [`keyword`](#highlight.tags.keyword)\n* [`atom`](#highlight.tags.atom)\n* [`bool`](#highlight.tags.bool)\n* [`url`](#highlight.tags.url)\n* [`labelName`](#highlight.tags.labelName)\n* [`inserted`](#highlight.tags.inserted)\n* [`deleted`](#highlight.tags.deleted)\n* [`literal`](#highlight.tags.literal)\n* [`string`](#highlight.tags.string)\n* [`number`](#highlight.tags.number)\n* [`variableName`](#highlight.tags.variableName)\n* [`typeName`](#highlight.tags.typeName)\n* [`namespace`](#highlight.tags.namespace)\n* [`className`](#highlight.tags.className)\n* [`macroName`](#highlight.tags.macroName)\n* [`propertyName`](#highlight.tags.propertyName)\n* [`operator`](#highlight.tags.operator)\n* [`comment`](#highlight.tags.comment)\n* [`meta`](#highlight.tags.meta)\n* [`punctuation`](#highlight.tags.punctuation)\n* [`invalid`](#highlight.tags.invalid)\n\nIn addition, these mappings are provided:\n\n* [`regexp`](#highlight.tags.regexp),\n  [`escape`](#highlight.tags.escape), and\n  [`special`](#highlight.tags.special)[`(string)`](#highlight.tags.string)\n  are mapped to `\"tok-string2\"`\n* [`special`](#highlight.tags.special)[`(variableName)`](#highlight.tags.variableName)\n  to `\"tok-variableName2\"`\n* [`local`](#highlight.tags.local)[`(variableName)`](#highlight.tags.variableName)\n  to `\"tok-variableName tok-local\"`\n* [`definition`](#highlight.tags.definition)[`(variableName)`](#highlight.tags.variableName)\n  to `\"tok-variableName tok-definition\"`\n* [`definition`](#highlight.tags.definition)[`(propertyName)`](#highlight.tags.propertyName)\n  to `\"tok-propertyName tok-definition\"`\n*/\nconst classHighlighter = tagHighlighter([\n    { tag: tags.link, class: \"tok-link\" },\n    { tag: tags.heading, class: \"tok-heading\" },\n    { tag: tags.emphasis, class: \"tok-emphasis\" },\n    { tag: tags.strong, class: \"tok-strong\" },\n    { tag: tags.keyword, class: \"tok-keyword\" },\n    { tag: tags.atom, class: \"tok-atom\" },\n    { tag: tags.bool, class: \"tok-bool\" },\n    { tag: tags.url, class: \"tok-url\" },\n    { tag: tags.labelName, class: \"tok-labelName\" },\n    { tag: tags.inserted, class: \"tok-inserted\" },\n    { tag: tags.deleted, class: \"tok-deleted\" },\n    { tag: tags.literal, class: \"tok-literal\" },\n    { tag: tags.string, class: \"tok-string\" },\n    { tag: tags.number, class: \"tok-number\" },\n    { tag: [tags.regexp, tags.escape, tags.special(tags.string)], class: \"tok-string2\" },\n    { tag: tags.variableName, class: \"tok-variableName\" },\n    { tag: tags.local(tags.variableName), class: \"tok-variableName tok-local\" },\n    { tag: tags.definition(tags.variableName), class: \"tok-variableName tok-definition\" },\n    { tag: tags.special(tags.variableName), class: \"tok-variableName2\" },\n    { tag: tags.definition(tags.propertyName), class: \"tok-propertyName tok-definition\" },\n    { tag: tags.typeName, class: \"tok-typeName\" },\n    { tag: tags.namespace, class: \"tok-namespace\" },\n    { tag: tags.className, class: \"tok-className\" },\n    { tag: tags.macroName, class: \"tok-macroName\" },\n    { tag: tags.propertyName, class: \"tok-propertyName\" },\n    { tag: tags.operator, class: \"tok-operator\" },\n    { tag: tags.comment, class: \"tok-comment\" },\n    { tag: tags.meta, class: \"tok-meta\" },\n    { tag: tags.invalid, class: \"tok-invalid\" },\n    { tag: tags.punctuation, class: \"tok-punctuation\" }\n]);\n\nexport { Tag, classHighlighter, getStyleTags, highlightCode, highlightTree, styleTags, tagHighlighter, tags };\n","import { NodeProp, IterMode, Tree, TreeFragment, Parser, NodeType, NodeSet } from '@lezer/common';\nimport { StateEffect, StateField, Facet, EditorState, countColumn, combineConfig, RangeSet, RangeSetBuilder, Prec } from '@codemirror/state';\nimport { ViewPlugin, logException, EditorView, Decoration, WidgetType, gutter, GutterMarker, Direction } from '@codemirror/view';\nimport { tags, tagHighlighter, highlightTree, styleTags } from '@lezer/highlight';\nimport { StyleModule } from 'style-mod';\n\nvar _a;\n/**\nNode prop stored in a parser's top syntax node to provide the\nfacet that stores language-specific data for that language.\n*/\nconst languageDataProp = /*@__PURE__*/new NodeProp();\n/**\nHelper function to define a facet (to be added to the top syntax\nnode(s) for a language via\n[`languageDataProp`](https://codemirror.net/6/docs/ref/#language.languageDataProp)), that will be\nused to associate language data with the language. You\nprobably only need this when subclassing\n[`Language`](https://codemirror.net/6/docs/ref/#language.Language).\n*/\nfunction defineLanguageFacet(baseData) {\n    return Facet.define({\n        combine: baseData ? values => values.concat(baseData) : undefined\n    });\n}\n/**\nSyntax node prop used to register sublanguages. Should be added to\nthe top level node type for the language.\n*/\nconst sublanguageProp = /*@__PURE__*/new NodeProp();\n/**\nA language object manages parsing and per-language\n[metadata](https://codemirror.net/6/docs/ref/#state.EditorState.languageDataAt). Parse data is\nmanaged as a [Lezer](https://lezer.codemirror.net) tree. The class\ncan be used directly, via the [`LRLanguage`](https://codemirror.net/6/docs/ref/#language.LRLanguage)\nsubclass for [Lezer](https://lezer.codemirror.net/) LR parsers, or\nvia the [`StreamLanguage`](https://codemirror.net/6/docs/ref/#language.StreamLanguage) subclass\nfor stream parsers.\n*/\nclass Language {\n    /**\n    Construct a language object. If you need to invoke this\n    directly, first define a data facet with\n    [`defineLanguageFacet`](https://codemirror.net/6/docs/ref/#language.defineLanguageFacet), and then\n    configure your parser to [attach](https://codemirror.net/6/docs/ref/#language.languageDataProp) it\n    to the language's outer syntax node.\n    */\n    constructor(\n    /**\n    The [language data](https://codemirror.net/6/docs/ref/#state.EditorState.languageDataAt) facet\n    used for this language.\n    */\n    data, parser, extraExtensions = [], \n    /**\n    A language name.\n    */\n    name = \"\") {\n        this.data = data;\n        this.name = name;\n        // Kludge to define EditorState.tree as a debugging helper,\n        // without the EditorState package actually knowing about\n        // languages and lezer trees.\n        if (!EditorState.prototype.hasOwnProperty(\"tree\"))\n            Object.defineProperty(EditorState.prototype, \"tree\", { get() { return syntaxTree(this); } });\n        this.parser = parser;\n        this.extension = [\n            language.of(this),\n            EditorState.languageData.of((state, pos, side) => {\n                let top = topNodeAt(state, pos, side), data = top.type.prop(languageDataProp);\n                if (!data)\n                    return [];\n                let base = state.facet(data), sub = top.type.prop(sublanguageProp);\n                if (sub) {\n                    let innerNode = top.resolve(pos - top.from, side);\n                    for (let sublang of sub)\n                        if (sublang.test(innerNode, state)) {\n                            let data = state.facet(sublang.facet);\n                            return sublang.type == \"replace\" ? data : data.concat(base);\n                        }\n                }\n                return base;\n            })\n        ].concat(extraExtensions);\n    }\n    /**\n    Query whether this language is active at the given position.\n    */\n    isActiveAt(state, pos, side = -1) {\n        return topNodeAt(state, pos, side).type.prop(languageDataProp) == this.data;\n    }\n    /**\n    Find the document regions that were parsed using this language.\n    The returned regions will _include_ any nested languages rooted\n    in this language, when those exist.\n    */\n    findRegions(state) {\n        let lang = state.facet(language);\n        if ((lang === null || lang === void 0 ? void 0 : lang.data) == this.data)\n            return [{ from: 0, to: state.doc.length }];\n        if (!lang || !lang.allowsNesting)\n            return [];\n        let result = [];\n        let explore = (tree, from) => {\n            if (tree.prop(languageDataProp) == this.data) {\n                result.push({ from, to: from + tree.length });\n                return;\n            }\n            let mount = tree.prop(NodeProp.mounted);\n            if (mount) {\n                if (mount.tree.prop(languageDataProp) == this.data) {\n                    if (mount.overlay)\n                        for (let r of mount.overlay)\n                            result.push({ from: r.from + from, to: r.to + from });\n                    else\n                        result.push({ from: from, to: from + tree.length });\n                    return;\n                }\n                else if (mount.overlay) {\n                    let size = result.length;\n                    explore(mount.tree, mount.overlay[0].from + from);\n                    if (result.length > size)\n                        return;\n                }\n            }\n            for (let i = 0; i < tree.children.length; i++) {\n                let ch = tree.children[i];\n                if (ch instanceof Tree)\n                    explore(ch, tree.positions[i] + from);\n            }\n        };\n        explore(syntaxTree(state), 0);\n        return result;\n    }\n    /**\n    Indicates whether this language allows nested languages. The\n    default implementation returns true.\n    */\n    get allowsNesting() { return true; }\n}\n/**\n@internal\n*/\nLanguage.setState = /*@__PURE__*/StateEffect.define();\nfunction topNodeAt(state, pos, side) {\n    let topLang = state.facet(language), tree = syntaxTree(state).topNode;\n    if (!topLang || topLang.allowsNesting) {\n        for (let node = tree; node; node = node.enter(pos, side, IterMode.ExcludeBuffers))\n            if (node.type.isTop)\n                tree = node;\n    }\n    return tree;\n}\n/**\nA subclass of [`Language`](https://codemirror.net/6/docs/ref/#language.Language) for use with Lezer\n[LR parsers](https://lezer.codemirror.net/docs/ref#lr.LRParser)\nparsers.\n*/\nclass LRLanguage extends Language {\n    constructor(data, parser, name) {\n        super(data, parser, [], name);\n        this.parser = parser;\n    }\n    /**\n    Define a language from a parser.\n    */\n    static define(spec) {\n        let data = defineLanguageFacet(spec.languageData);\n        return new LRLanguage(data, spec.parser.configure({\n            props: [languageDataProp.add(type => type.isTop ? data : undefined)]\n        }), spec.name);\n    }\n    /**\n    Create a new instance of this language with a reconfigured\n    version of its parser and optionally a new name.\n    */\n    configure(options, name) {\n        return new LRLanguage(this.data, this.parser.configure(options), name || this.name);\n    }\n    get allowsNesting() { return this.parser.hasWrappers(); }\n}\n/**\nGet the syntax tree for a state, which is the current (possibly\nincomplete) parse tree of the active\n[language](https://codemirror.net/6/docs/ref/#language.Language), or the empty tree if there is no\nlanguage available.\n*/\nfunction syntaxTree(state) {\n    let field = state.field(Language.state, false);\n    return field ? field.tree : Tree.empty;\n}\n/**\nTry to get a parse tree that spans at least up to `upto`. The\nmethod will do at most `timeout` milliseconds of work to parse\nup to that point if the tree isn't already available.\n*/\nfunction ensureSyntaxTree(state, upto, timeout = 50) {\n    var _a;\n    let parse = (_a = state.field(Language.state, false)) === null || _a === void 0 ? void 0 : _a.context;\n    if (!parse)\n        return null;\n    let oldVieport = parse.viewport;\n    parse.updateViewport({ from: 0, to: upto });\n    let result = parse.isDone(upto) || parse.work(timeout, upto) ? parse.tree : null;\n    parse.updateViewport(oldVieport);\n    return result;\n}\n/**\nQueries whether there is a full syntax tree available up to the\ngiven document position. If there isn't, the background parse\nprocess _might_ still be working and update the tree further, but\nthere is no guarantee of that—the parser will [stop\nworking](https://codemirror.net/6/docs/ref/#language.syntaxParserRunning) when it has spent a\ncertain amount of time or has moved beyond the visible viewport.\nAlways returns false if no language has been enabled.\n*/\nfunction syntaxTreeAvailable(state, upto = state.doc.length) {\n    var _a;\n    return ((_a = state.field(Language.state, false)) === null || _a === void 0 ? void 0 : _a.context.isDone(upto)) || false;\n}\n/**\nMove parsing forward, and update the editor state afterwards to\nreflect the new tree. Will work for at most `timeout`\nmilliseconds. Returns true if the parser managed get to the given\nposition in that time.\n*/\nfunction forceParsing(view, upto = view.viewport.to, timeout = 100) {\n    let success = ensureSyntaxTree(view.state, upto, timeout);\n    if (success != syntaxTree(view.state))\n        view.dispatch({});\n    return !!success;\n}\n/**\nTells you whether the language parser is planning to do more\nparsing work (in a `requestIdleCallback` pseudo-thread) or has\nstopped running, either because it parsed the entire document,\nbecause it spent too much time and was cut off, or because there\nis no language parser enabled.\n*/\nfunction syntaxParserRunning(view) {\n    var _a;\n    return ((_a = view.plugin(parseWorker)) === null || _a === void 0 ? void 0 : _a.isWorking()) || false;\n}\n/**\nLezer-style\n[`Input`](https://lezer.codemirror.net/docs/ref#common.Input)\nobject for a [`Text`](https://codemirror.net/6/docs/ref/#state.Text) object.\n*/\nclass DocInput {\n    /**\n    Create an input object for the given document.\n    */\n    constructor(doc) {\n        this.doc = doc;\n        this.cursorPos = 0;\n        this.string = \"\";\n        this.cursor = doc.iter();\n    }\n    get length() { return this.doc.length; }\n    syncTo(pos) {\n        this.string = this.cursor.next(pos - this.cursorPos).value;\n        this.cursorPos = pos + this.string.length;\n        return this.cursorPos - this.string.length;\n    }\n    chunk(pos) {\n        this.syncTo(pos);\n        return this.string;\n    }\n    get lineChunks() { return true; }\n    read(from, to) {\n        let stringStart = this.cursorPos - this.string.length;\n        if (from < stringStart || to >= this.cursorPos)\n            return this.doc.sliceString(from, to);\n        else\n            return this.string.slice(from - stringStart, to - stringStart);\n    }\n}\nlet currentContext = null;\n/**\nA parse context provided to parsers working on the editor content.\n*/\nclass ParseContext {\n    constructor(parser, \n    /**\n    The current editor state.\n    */\n    state, \n    /**\n    Tree fragments that can be reused by incremental re-parses.\n    */\n    fragments = [], \n    /**\n    @internal\n    */\n    tree, \n    /**\n    @internal\n    */\n    treeLen, \n    /**\n    The current editor viewport (or some overapproximation\n    thereof). Intended to be used for opportunistically avoiding\n    work (in which case\n    [`skipUntilInView`](https://codemirror.net/6/docs/ref/#language.ParseContext.skipUntilInView)\n    should be called to make sure the parser is restarted when the\n    skipped region becomes visible).\n    */\n    viewport, \n    /**\n    @internal\n    */\n    skipped, \n    /**\n    This is where skipping parsers can register a promise that,\n    when resolved, will schedule a new parse. It is cleared when\n    the parse worker picks up the promise. @internal\n    */\n    scheduleOn) {\n        this.parser = parser;\n        this.state = state;\n        this.fragments = fragments;\n        this.tree = tree;\n        this.treeLen = treeLen;\n        this.viewport = viewport;\n        this.skipped = skipped;\n        this.scheduleOn = scheduleOn;\n        this.parse = null;\n        /**\n        @internal\n        */\n        this.tempSkipped = [];\n    }\n    /**\n    @internal\n    */\n    static create(parser, state, viewport) {\n        return new ParseContext(parser, state, [], Tree.empty, 0, viewport, [], null);\n    }\n    startParse() {\n        return this.parser.startParse(new DocInput(this.state.doc), this.fragments);\n    }\n    /**\n    @internal\n    */\n    work(until, upto) {\n        if (upto != null && upto >= this.state.doc.length)\n            upto = undefined;\n        if (this.tree != Tree.empty && this.isDone(upto !== null && upto !== void 0 ? upto : this.state.doc.length)) {\n            this.takeTree();\n            return true;\n        }\n        return this.withContext(() => {\n            var _a;\n            if (typeof until == \"number\") {\n                let endTime = Date.now() + until;\n                until = () => Date.now() > endTime;\n            }\n            if (!this.parse)\n                this.parse = this.startParse();\n            if (upto != null && (this.parse.stoppedAt == null || this.parse.stoppedAt > upto) &&\n                upto < this.state.doc.length)\n                this.parse.stopAt(upto);\n            for (;;) {\n                let done = this.parse.advance();\n                if (done) {\n                    this.fragments = this.withoutTempSkipped(TreeFragment.addTree(done, this.fragments, this.parse.stoppedAt != null));\n                    this.treeLen = (_a = this.parse.stoppedAt) !== null && _a !== void 0 ? _a : this.state.doc.length;\n                    this.tree = done;\n                    this.parse = null;\n                    if (this.treeLen < (upto !== null && upto !== void 0 ? upto : this.state.doc.length))\n                        this.parse = this.startParse();\n                    else\n                        return true;\n                }\n                if (until())\n                    return false;\n            }\n        });\n    }\n    /**\n    @internal\n    */\n    takeTree() {\n        let pos, tree;\n        if (this.parse && (pos = this.parse.parsedPos) >= this.treeLen) {\n            if (this.parse.stoppedAt == null || this.parse.stoppedAt > pos)\n                this.parse.stopAt(pos);\n            this.withContext(() => { while (!(tree = this.parse.advance())) { } });\n            this.treeLen = pos;\n            this.tree = tree;\n            this.fragments = this.withoutTempSkipped(TreeFragment.addTree(this.tree, this.fragments, true));\n            this.parse = null;\n        }\n    }\n    withContext(f) {\n        let prev = currentContext;\n        currentContext = this;\n        try {\n            return f();\n        }\n        finally {\n            currentContext = prev;\n        }\n    }\n    withoutTempSkipped(fragments) {\n        for (let r; r = this.tempSkipped.pop();)\n            fragments = cutFragments(fragments, r.from, r.to);\n        return fragments;\n    }\n    /**\n    @internal\n    */\n    changes(changes, newState) {\n        let { fragments, tree, treeLen, viewport, skipped } = this;\n        this.takeTree();\n        if (!changes.empty) {\n            let ranges = [];\n            changes.iterChangedRanges((fromA, toA, fromB, toB) => ranges.push({ fromA, toA, fromB, toB }));\n            fragments = TreeFragment.applyChanges(fragments, ranges);\n            tree = Tree.empty;\n            treeLen = 0;\n            viewport = { from: changes.mapPos(viewport.from, -1), to: changes.mapPos(viewport.to, 1) };\n            if (this.skipped.length) {\n                skipped = [];\n                for (let r of this.skipped) {\n                    let from = changes.mapPos(r.from, 1), to = changes.mapPos(r.to, -1);\n                    if (from < to)\n                        skipped.push({ from, to });\n                }\n            }\n        }\n        return new ParseContext(this.parser, newState, fragments, tree, treeLen, viewport, skipped, this.scheduleOn);\n    }\n    /**\n    @internal\n    */\n    updateViewport(viewport) {\n        if (this.viewport.from == viewport.from && this.viewport.to == viewport.to)\n            return false;\n        this.viewport = viewport;\n        let startLen = this.skipped.length;\n        for (let i = 0; i < this.skipped.length; i++) {\n            let { from, to } = this.skipped[i];\n            if (from < viewport.to && to > viewport.from) {\n                this.fragments = cutFragments(this.fragments, from, to);\n                this.skipped.splice(i--, 1);\n            }\n        }\n        if (this.skipped.length >= startLen)\n            return false;\n        this.reset();\n        return true;\n    }\n    /**\n    @internal\n    */\n    reset() {\n        if (this.parse) {\n            this.takeTree();\n            this.parse = null;\n        }\n    }\n    /**\n    Notify the parse scheduler that the given region was skipped\n    because it wasn't in view, and the parse should be restarted\n    when it comes into view.\n    */\n    skipUntilInView(from, to) {\n        this.skipped.push({ from, to });\n    }\n    /**\n    Returns a parser intended to be used as placeholder when\n    asynchronously loading a nested parser. It'll skip its input and\n    mark it as not-really-parsed, so that the next update will parse\n    it again.\n    \n    When `until` is given, a reparse will be scheduled when that\n    promise resolves.\n    */\n    static getSkippingParser(until) {\n        return new class extends Parser {\n            createParse(input, fragments, ranges) {\n                let from = ranges[0].from, to = ranges[ranges.length - 1].to;\n                let parser = {\n                    parsedPos: from,\n                    advance() {\n                        let cx = currentContext;\n                        if (cx) {\n                            for (let r of ranges)\n                                cx.tempSkipped.push(r);\n                            if (until)\n                                cx.scheduleOn = cx.scheduleOn ? Promise.all([cx.scheduleOn, until]) : until;\n                        }\n                        this.parsedPos = to;\n                        return new Tree(NodeType.none, [], [], to - from);\n                    },\n                    stoppedAt: null,\n                    stopAt() { }\n                };\n                return parser;\n            }\n        };\n    }\n    /**\n    @internal\n    */\n    isDone(upto) {\n        upto = Math.min(upto, this.state.doc.length);\n        let frags = this.fragments;\n        return this.treeLen >= upto && frags.length && frags[0].from == 0 && frags[0].to >= upto;\n    }\n    /**\n    Get the context for the current parse, or `null` if no editor\n    parse is in progress.\n    */\n    static get() { return currentContext; }\n}\nfunction cutFragments(fragments, from, to) {\n    return TreeFragment.applyChanges(fragments, [{ fromA: from, toA: to, fromB: from, toB: to }]);\n}\nclass LanguageState {\n    constructor(\n    // A mutable parse state that is used to preserve work done during\n    // the lifetime of a state when moving to the next state.\n    context) {\n        this.context = context;\n        this.tree = context.tree;\n    }\n    apply(tr) {\n        if (!tr.docChanged && this.tree == this.context.tree)\n            return this;\n        let newCx = this.context.changes(tr.changes, tr.state);\n        // If the previous parse wasn't done, go forward only up to its\n        // end position or the end of the viewport, to avoid slowing down\n        // state updates with parse work beyond the viewport.\n        let upto = this.context.treeLen == tr.startState.doc.length ? undefined\n            : Math.max(tr.changes.mapPos(this.context.treeLen), newCx.viewport.to);\n        if (!newCx.work(20 /* Work.Apply */, upto))\n            newCx.takeTree();\n        return new LanguageState(newCx);\n    }\n    static init(state) {\n        let vpTo = Math.min(3000 /* Work.InitViewport */, state.doc.length);\n        let parseState = ParseContext.create(state.facet(language).parser, state, { from: 0, to: vpTo });\n        if (!parseState.work(20 /* Work.Apply */, vpTo))\n            parseState.takeTree();\n        return new LanguageState(parseState);\n    }\n}\nLanguage.state = /*@__PURE__*/StateField.define({\n    create: LanguageState.init,\n    update(value, tr) {\n        for (let e of tr.effects)\n            if (e.is(Language.setState))\n                return e.value;\n        if (tr.startState.facet(language) != tr.state.facet(language))\n            return LanguageState.init(tr.state);\n        return value.apply(tr);\n    }\n});\nlet requestIdle = (callback) => {\n    let timeout = setTimeout(() => callback(), 500 /* Work.MaxPause */);\n    return () => clearTimeout(timeout);\n};\nif (typeof requestIdleCallback != \"undefined\")\n    requestIdle = (callback) => {\n        let idle = -1, timeout = setTimeout(() => {\n            idle = requestIdleCallback(callback, { timeout: 500 /* Work.MaxPause */ - 100 /* Work.MinPause */ });\n        }, 100 /* Work.MinPause */);\n        return () => idle < 0 ? clearTimeout(timeout) : cancelIdleCallback(idle);\n    };\nconst isInputPending = typeof navigator != \"undefined\" && ((_a = navigator.scheduling) === null || _a === void 0 ? void 0 : _a.isInputPending)\n    ? () => navigator.scheduling.isInputPending() : null;\nconst parseWorker = /*@__PURE__*/ViewPlugin.fromClass(class ParseWorker {\n    constructor(view) {\n        this.view = view;\n        this.working = null;\n        this.workScheduled = 0;\n        // End of the current time chunk\n        this.chunkEnd = -1;\n        // Milliseconds of budget left for this chunk\n        this.chunkBudget = -1;\n        this.work = this.work.bind(this);\n        this.scheduleWork();\n    }\n    update(update) {\n        let cx = this.view.state.field(Language.state).context;\n        if (cx.updateViewport(update.view.viewport) || this.view.viewport.to > cx.treeLen)\n            this.scheduleWork();\n        if (update.docChanged || update.selectionSet) {\n            if (this.view.hasFocus)\n                this.chunkBudget += 50 /* Work.ChangeBonus */;\n            this.scheduleWork();\n        }\n        this.checkAsyncSchedule(cx);\n    }\n    scheduleWork() {\n        if (this.working)\n            return;\n        let { state } = this.view, field = state.field(Language.state);\n        if (field.tree != field.context.tree || !field.context.isDone(state.doc.length))\n            this.working = requestIdle(this.work);\n    }\n    work(deadline) {\n        this.working = null;\n        let now = Date.now();\n        if (this.chunkEnd < now && (this.chunkEnd < 0 || this.view.hasFocus)) { // Start a new chunk\n            this.chunkEnd = now + 30000 /* Work.ChunkTime */;\n            this.chunkBudget = 3000 /* Work.ChunkBudget */;\n        }\n        if (this.chunkBudget <= 0)\n            return; // No more budget\n        let { state, viewport: { to: vpTo } } = this.view, field = state.field(Language.state);\n        if (field.tree == field.context.tree && field.context.isDone(vpTo + 100000 /* Work.MaxParseAhead */))\n            return;\n        let endTime = Date.now() + Math.min(this.chunkBudget, 100 /* Work.Slice */, deadline && !isInputPending ? Math.max(25 /* Work.MinSlice */, deadline.timeRemaining() - 5) : 1e9);\n        let viewportFirst = field.context.treeLen < vpTo && state.doc.length > vpTo + 1000;\n        let done = field.context.work(() => {\n            return isInputPending && isInputPending() || Date.now() > endTime;\n        }, vpTo + (viewportFirst ? 0 : 100000 /* Work.MaxParseAhead */));\n        this.chunkBudget -= Date.now() - now;\n        if (done || this.chunkBudget <= 0) {\n            field.context.takeTree();\n            this.view.dispatch({ effects: Language.setState.of(new LanguageState(field.context)) });\n        }\n        if (this.chunkBudget > 0 && !(done && !viewportFirst))\n            this.scheduleWork();\n        this.checkAsyncSchedule(field.context);\n    }\n    checkAsyncSchedule(cx) {\n        if (cx.scheduleOn) {\n            this.workScheduled++;\n            cx.scheduleOn\n                .then(() => this.scheduleWork())\n                .catch(err => logException(this.view.state, err))\n                .then(() => this.workScheduled--);\n            cx.scheduleOn = null;\n        }\n    }\n    destroy() {\n        if (this.working)\n            this.working();\n    }\n    isWorking() {\n        return !!(this.working || this.workScheduled > 0);\n    }\n}, {\n    eventHandlers: { focus() { this.scheduleWork(); } }\n});\n/**\nThe facet used to associate a language with an editor state. Used\nby `Language` object's `extension` property (so you don't need to\nmanually wrap your languages in this). Can be used to access the\ncurrent language on a state.\n*/\nconst language = /*@__PURE__*/Facet.define({\n    combine(languages) { return languages.length ? languages[0] : null; },\n    enables: language => [\n        Language.state,\n        parseWorker,\n        EditorView.contentAttributes.compute([language], state => {\n            let lang = state.facet(language);\n            return lang && lang.name ? { \"data-language\": lang.name } : {};\n        })\n    ]\n});\n/**\nThis class bundles a [language](https://codemirror.net/6/docs/ref/#language.Language) with an\noptional set of supporting extensions. Language packages are\nencouraged to export a function that optionally takes a\nconfiguration object and returns a `LanguageSupport` instance, as\nthe main way for client code to use the package.\n*/\nclass LanguageSupport {\n    /**\n    Create a language support object.\n    */\n    constructor(\n    /**\n    The language object.\n    */\n    language, \n    /**\n    An optional set of supporting extensions. When nesting a\n    language in another language, the outer language is encouraged\n    to include the supporting extensions for its inner languages\n    in its own set of support extensions.\n    */\n    support = []) {\n        this.language = language;\n        this.support = support;\n        this.extension = [language, support];\n    }\n}\n/**\nLanguage descriptions are used to store metadata about languages\nand to dynamically load them. Their main role is finding the\nappropriate language for a filename or dynamically loading nested\nparsers.\n*/\nclass LanguageDescription {\n    constructor(\n    /**\n    The name of this language.\n    */\n    name, \n    /**\n    Alternative names for the mode (lowercased, includes `this.name`).\n    */\n    alias, \n    /**\n    File extensions associated with this language.\n    */\n    extensions, \n    /**\n    Optional filename pattern that should be associated with this\n    language.\n    */\n    filename, loadFunc, \n    /**\n    If the language has been loaded, this will hold its value.\n    */\n    support = undefined) {\n        this.name = name;\n        this.alias = alias;\n        this.extensions = extensions;\n        this.filename = filename;\n        this.loadFunc = loadFunc;\n        this.support = support;\n        this.loading = null;\n    }\n    /**\n    Start loading the the language. Will return a promise that\n    resolves to a [`LanguageSupport`](https://codemirror.net/6/docs/ref/#language.LanguageSupport)\n    object when the language successfully loads.\n    */\n    load() {\n        return this.loading || (this.loading = this.loadFunc().then(support => this.support = support, err => { this.loading = null; throw err; }));\n    }\n    /**\n    Create a language description.\n    */\n    static of(spec) {\n        let { load, support } = spec;\n        if (!load) {\n            if (!support)\n                throw new RangeError(\"Must pass either 'load' or 'support' to LanguageDescription.of\");\n            load = () => Promise.resolve(support);\n        }\n        return new LanguageDescription(spec.name, (spec.alias || []).concat(spec.name).map(s => s.toLowerCase()), spec.extensions || [], spec.filename, load, support);\n    }\n    /**\n    Look for a language in the given array of descriptions that\n    matches the filename. Will first match\n    [`filename`](https://codemirror.net/6/docs/ref/#language.LanguageDescription.filename) patterns,\n    and then [extensions](https://codemirror.net/6/docs/ref/#language.LanguageDescription.extensions),\n    and return the first language that matches.\n    */\n    static matchFilename(descs, filename) {\n        for (let d of descs)\n            if (d.filename && d.filename.test(filename))\n                return d;\n        let ext = /\\.([^.]+)$/.exec(filename);\n        if (ext)\n            for (let d of descs)\n                if (d.extensions.indexOf(ext[1]) > -1)\n                    return d;\n        return null;\n    }\n    /**\n    Look for a language whose name or alias matches the the given\n    name (case-insensitively). If `fuzzy` is true, and no direct\n    matchs is found, this'll also search for a language whose name\n    or alias occurs in the string (for names shorter than three\n    characters, only when surrounded by non-word characters).\n    */\n    static matchLanguageName(descs, name, fuzzy = true) {\n        name = name.toLowerCase();\n        for (let d of descs)\n            if (d.alias.some(a => a == name))\n                return d;\n        if (fuzzy)\n            for (let d of descs)\n                for (let a of d.alias) {\n                    let found = name.indexOf(a);\n                    if (found > -1 && (a.length > 2 || !/\\w/.test(name[found - 1]) && !/\\w/.test(name[found + a.length])))\n                        return d;\n                }\n        return null;\n    }\n}\n\n/**\nFacet that defines a way to provide a function that computes the\nappropriate indentation depth, as a column number (see\n[`indentString`](https://codemirror.net/6/docs/ref/#language.indentString)), at the start of a given\nline. A return value of `null` indicates no indentation can be\ndetermined, and the line should inherit the indentation of the one\nabove it. A return value of `undefined` defers to the next indent\nservice.\n*/\nconst indentService = /*@__PURE__*/Facet.define();\n/**\nFacet for overriding the unit by which indentation happens. Should\nbe a string consisting either entirely of the same whitespace\ncharacter. When not set, this defaults to 2 spaces.\n*/\nconst indentUnit = /*@__PURE__*/Facet.define({\n    combine: values => {\n        if (!values.length)\n            return \"  \";\n        let unit = values[0];\n        if (!unit || /\\S/.test(unit) || Array.from(unit).some(e => e != unit[0]))\n            throw new Error(\"Invalid indent unit: \" + JSON.stringify(values[0]));\n        return unit;\n    }\n});\n/**\nReturn the _column width_ of an indent unit in the state.\nDetermined by the [`indentUnit`](https://codemirror.net/6/docs/ref/#language.indentUnit)\nfacet, and [`tabSize`](https://codemirror.net/6/docs/ref/#state.EditorState^tabSize) when that\ncontains tabs.\n*/\nfunction getIndentUnit(state) {\n    let unit = state.facet(indentUnit);\n    return unit.charCodeAt(0) == 9 ? state.tabSize * unit.length : unit.length;\n}\n/**\nCreate an indentation string that covers columns 0 to `cols`.\nWill use tabs for as much of the columns as possible when the\n[`indentUnit`](https://codemirror.net/6/docs/ref/#language.indentUnit) facet contains\ntabs.\n*/\nfunction indentString(state, cols) {\n    let result = \"\", ts = state.tabSize, ch = state.facet(indentUnit)[0];\n    if (ch == \"\\t\") {\n        while (cols >= ts) {\n            result += \"\\t\";\n            cols -= ts;\n        }\n        ch = \" \";\n    }\n    for (let i = 0; i < cols; i++)\n        result += ch;\n    return result;\n}\n/**\nGet the indentation, as a column number, at the given position.\nWill first consult any [indent services](https://codemirror.net/6/docs/ref/#language.indentService)\nthat are registered, and if none of those return an indentation,\nthis will check the syntax tree for the [indent node\nprop](https://codemirror.net/6/docs/ref/#language.indentNodeProp) and use that if found. Returns a\nnumber when an indentation could be determined, and null\notherwise.\n*/\nfunction getIndentation(context, pos) {\n    if (context instanceof EditorState)\n        context = new IndentContext(context);\n    for (let service of context.state.facet(indentService)) {\n        let result = service(context, pos);\n        if (result !== undefined)\n            return result;\n    }\n    let tree = syntaxTree(context.state);\n    return tree.length >= pos ? syntaxIndentation(context, tree, pos) : null;\n}\n/**\nCreate a change set that auto-indents all lines touched by the\ngiven document range.\n*/\nfunction indentRange(state, from, to) {\n    let updated = Object.create(null);\n    let context = new IndentContext(state, { overrideIndentation: start => { var _a; return (_a = updated[start]) !== null && _a !== void 0 ? _a : -1; } });\n    let changes = [];\n    for (let pos = from; pos <= to;) {\n        let line = state.doc.lineAt(pos);\n        pos = line.to + 1;\n        let indent = getIndentation(context, line.from);\n        if (indent == null)\n            continue;\n        if (!/\\S/.test(line.text))\n            indent = 0;\n        let cur = /^\\s*/.exec(line.text)[0];\n        let norm = indentString(state, indent);\n        if (cur != norm) {\n            updated[line.from] = indent;\n            changes.push({ from: line.from, to: line.from + cur.length, insert: norm });\n        }\n    }\n    return state.changes(changes);\n}\n/**\nIndentation contexts are used when calling [indentation\nservices](https://codemirror.net/6/docs/ref/#language.indentService). They provide helper utilities\nuseful in indentation logic, and can selectively override the\nindentation reported for some lines.\n*/\nclass IndentContext {\n    /**\n    Create an indent context.\n    */\n    constructor(\n    /**\n    The editor state.\n    */\n    state, \n    /**\n    @internal\n    */\n    options = {}) {\n        this.state = state;\n        this.options = options;\n        this.unit = getIndentUnit(state);\n    }\n    /**\n    Get a description of the line at the given position, taking\n    [simulated line\n    breaks](https://codemirror.net/6/docs/ref/#language.IndentContext.constructor^options.simulateBreak)\n    into account. If there is such a break at `pos`, the `bias`\n    argument determines whether the part of the line line before or\n    after the break is used.\n    */\n    lineAt(pos, bias = 1) {\n        let line = this.state.doc.lineAt(pos);\n        let { simulateBreak, simulateDoubleBreak } = this.options;\n        if (simulateBreak != null && simulateBreak >= line.from && simulateBreak <= line.to) {\n            if (simulateDoubleBreak && simulateBreak == pos)\n                return { text: \"\", from: pos };\n            else if (bias < 0 ? simulateBreak < pos : simulateBreak <= pos)\n                return { text: line.text.slice(simulateBreak - line.from), from: simulateBreak };\n            else\n                return { text: line.text.slice(0, simulateBreak - line.from), from: line.from };\n        }\n        return line;\n    }\n    /**\n    Get the text directly after `pos`, either the entire line\n    or the next 100 characters, whichever is shorter.\n    */\n    textAfterPos(pos, bias = 1) {\n        if (this.options.simulateDoubleBreak && pos == this.options.simulateBreak)\n            return \"\";\n        let { text, from } = this.lineAt(pos, bias);\n        return text.slice(pos - from, Math.min(text.length, pos + 100 - from));\n    }\n    /**\n    Find the column for the given position.\n    */\n    column(pos, bias = 1) {\n        let { text, from } = this.lineAt(pos, bias);\n        let result = this.countColumn(text, pos - from);\n        let override = this.options.overrideIndentation ? this.options.overrideIndentation(from) : -1;\n        if (override > -1)\n            result += override - this.countColumn(text, text.search(/\\S|$/));\n        return result;\n    }\n    /**\n    Find the column position (taking tabs into account) of the given\n    position in the given string.\n    */\n    countColumn(line, pos = line.length) {\n        return countColumn(line, this.state.tabSize, pos);\n    }\n    /**\n    Find the indentation column of the line at the given point.\n    */\n    lineIndent(pos, bias = 1) {\n        let { text, from } = this.lineAt(pos, bias);\n        let override = this.options.overrideIndentation;\n        if (override) {\n            let overriden = override(from);\n            if (overriden > -1)\n                return overriden;\n        }\n        return this.countColumn(text, text.search(/\\S|$/));\n    }\n    /**\n    Returns the [simulated line\n    break](https://codemirror.net/6/docs/ref/#language.IndentContext.constructor^options.simulateBreak)\n    for this context, if any.\n    */\n    get simulatedBreak() {\n        return this.options.simulateBreak || null;\n    }\n}\n/**\nA syntax tree node prop used to associate indentation strategies\nwith node types. Such a strategy is a function from an indentation\ncontext to a column number (see also\n[`indentString`](https://codemirror.net/6/docs/ref/#language.indentString)) or null, where null\nindicates that no definitive indentation can be determined.\n*/\nconst indentNodeProp = /*@__PURE__*/new NodeProp();\n// Compute the indentation for a given position from the syntax tree.\nfunction syntaxIndentation(cx, ast, pos) {\n    let stack = ast.resolveStack(pos);\n    let inner = stack.node.enterUnfinishedNodesBefore(pos);\n    if (inner != stack.node) {\n        let add = [];\n        for (let cur = inner; cur != stack.node; cur = cur.parent)\n            add.push(cur);\n        for (let i = add.length - 1; i >= 0; i--)\n            stack = { node: add[i], next: stack };\n    }\n    return indentFor(stack, cx, pos);\n}\nfunction indentFor(stack, cx, pos) {\n    for (let cur = stack; cur; cur = cur.next) {\n        let strategy = indentStrategy(cur.node);\n        if (strategy)\n            return strategy(TreeIndentContext.create(cx, pos, cur));\n    }\n    return 0;\n}\nfunction ignoreClosed(cx) {\n    return cx.pos == cx.options.simulateBreak && cx.options.simulateDoubleBreak;\n}\nfunction indentStrategy(tree) {\n    let strategy = tree.type.prop(indentNodeProp);\n    if (strategy)\n        return strategy;\n    let first = tree.firstChild, close;\n    if (first && (close = first.type.prop(NodeProp.closedBy))) {\n        let last = tree.lastChild, closed = last && close.indexOf(last.name) > -1;\n        return cx => delimitedStrategy(cx, true, 1, undefined, closed && !ignoreClosed(cx) ? last.from : undefined);\n    }\n    return tree.parent == null ? topIndent : null;\n}\nfunction topIndent() { return 0; }\n/**\nObjects of this type provide context information and helper\nmethods to indentation functions registered on syntax nodes.\n*/\nclass TreeIndentContext extends IndentContext {\n    constructor(base, \n    /**\n    The position at which indentation is being computed.\n    */\n    pos, \n    /**\n    @internal\n    */\n    context) {\n        super(base.state, base.options);\n        this.base = base;\n        this.pos = pos;\n        this.context = context;\n    }\n    /**\n    The syntax tree node to which the indentation strategy\n    applies.\n    */\n    get node() { return this.context.node; }\n    /**\n    @internal\n    */\n    static create(base, pos, context) {\n        return new TreeIndentContext(base, pos, context);\n    }\n    /**\n    Get the text directly after `this.pos`, either the entire line\n    or the next 100 characters, whichever is shorter.\n    */\n    get textAfter() {\n        return this.textAfterPos(this.pos);\n    }\n    /**\n    Get the indentation at the reference line for `this.node`, which\n    is the line on which it starts, unless there is a node that is\n    _not_ a parent of this node covering the start of that line. If\n    so, the line at the start of that node is tried, again skipping\n    on if it is covered by another such node.\n    */\n    get baseIndent() {\n        return this.baseIndentFor(this.node);\n    }\n    /**\n    Get the indentation for the reference line of the given node\n    (see [`baseIndent`](https://codemirror.net/6/docs/ref/#language.TreeIndentContext.baseIndent)).\n    */\n    baseIndentFor(node) {\n        let line = this.state.doc.lineAt(node.from);\n        // Skip line starts that are covered by a sibling (or cousin, etc)\n        for (;;) {\n            let atBreak = node.resolve(line.from);\n            while (atBreak.parent && atBreak.parent.from == atBreak.from)\n                atBreak = atBreak.parent;\n            if (isParent(atBreak, node))\n                break;\n            line = this.state.doc.lineAt(atBreak.from);\n        }\n        return this.lineIndent(line.from);\n    }\n    /**\n    Continue looking for indentations in the node's parent nodes,\n    and return the result of that.\n    */\n    continue() {\n        return indentFor(this.context.next, this.base, this.pos);\n    }\n}\nfunction isParent(parent, of) {\n    for (let cur = of; cur; cur = cur.parent)\n        if (parent == cur)\n            return true;\n    return false;\n}\n// Check whether a delimited node is aligned (meaning there are\n// non-skipped nodes on the same line as the opening delimiter). And\n// if so, return the opening token.\nfunction bracketedAligned(context) {\n    let tree = context.node;\n    let openToken = tree.childAfter(tree.from), last = tree.lastChild;\n    if (!openToken)\n        return null;\n    let sim = context.options.simulateBreak;\n    let openLine = context.state.doc.lineAt(openToken.from);\n    let lineEnd = sim == null || sim <= openLine.from ? openLine.to : Math.min(openLine.to, sim);\n    for (let pos = openToken.to;;) {\n        let next = tree.childAfter(pos);\n        if (!next || next == last)\n            return null;\n        if (!next.type.isSkipped)\n            return next.from < lineEnd ? openToken : null;\n        pos = next.to;\n    }\n}\n/**\nAn indentation strategy for delimited (usually bracketed) nodes.\nWill, by default, indent one unit more than the parent's base\nindent unless the line starts with a closing token. When `align`\nis true and there are non-skipped nodes on the node's opening\nline, the content of the node will be aligned with the end of the\nopening node, like this:\n\n    foo(bar,\n        baz)\n*/\nfunction delimitedIndent({ closing, align = true, units = 1 }) {\n    return (context) => delimitedStrategy(context, align, units, closing);\n}\nfunction delimitedStrategy(context, align, units, closing, closedAt) {\n    let after = context.textAfter, space = after.match(/^\\s*/)[0].length;\n    let closed = closing && after.slice(space, space + closing.length) == closing || closedAt == context.pos + space;\n    let aligned = align ? bracketedAligned(context) : null;\n    if (aligned)\n        return closed ? context.column(aligned.from) : context.column(aligned.to);\n    return context.baseIndent + (closed ? 0 : context.unit * units);\n}\n/**\nAn indentation strategy that aligns a node's content to its base\nindentation.\n*/\nconst flatIndent = (context) => context.baseIndent;\n/**\nCreates an indentation strategy that, by default, indents\ncontinued lines one unit more than the node's base indentation.\nYou can provide `except` to prevent indentation of lines that\nmatch a pattern (for example `/^else\\b/` in `if`/`else`\nconstructs), and you can change the amount of units used with the\n`units` option.\n*/\nfunction continuedIndent({ except, units = 1 } = {}) {\n    return (context) => {\n        let matchExcept = except && except.test(context.textAfter);\n        return context.baseIndent + (matchExcept ? 0 : units * context.unit);\n    };\n}\nconst DontIndentBeyond = 200;\n/**\nEnables reindentation on input. When a language defines an\n`indentOnInput` field in its [language\ndata](https://codemirror.net/6/docs/ref/#state.EditorState.languageDataAt), which must hold a regular\nexpression, the line at the cursor will be reindented whenever new\ntext is typed and the input from the start of the line up to the\ncursor matches that regexp.\n\nTo avoid unneccesary reindents, it is recommended to start the\nregexp with `^` (usually followed by `\\s*`), and end it with `$`.\nFor example, `/^\\s*\\}$/` will reindent when a closing brace is\nadded at the start of a line.\n*/\nfunction indentOnInput() {\n    return EditorState.transactionFilter.of(tr => {\n        if (!tr.docChanged || !tr.isUserEvent(\"input.type\") && !tr.isUserEvent(\"input.complete\"))\n            return tr;\n        let rules = tr.startState.languageDataAt(\"indentOnInput\", tr.startState.selection.main.head);\n        if (!rules.length)\n            return tr;\n        let doc = tr.newDoc, { head } = tr.newSelection.main, line = doc.lineAt(head);\n        if (head > line.from + DontIndentBeyond)\n            return tr;\n        let lineStart = doc.sliceString(line.from, head);\n        if (!rules.some(r => r.test(lineStart)))\n            return tr;\n        let { state } = tr, last = -1, changes = [];\n        for (let { head } of state.selection.ranges) {\n            let line = state.doc.lineAt(head);\n            if (line.from == last)\n                continue;\n            last = line.from;\n            let indent = getIndentation(state, line.from);\n            if (indent == null)\n                continue;\n            let cur = /^\\s*/.exec(line.text)[0];\n            let norm = indentString(state, indent);\n            if (cur != norm)\n                changes.push({ from: line.from, to: line.from + cur.length, insert: norm });\n        }\n        return changes.length ? [tr, { changes, sequential: true }] : tr;\n    });\n}\n\n/**\nA facet that registers a code folding service. When called with\nthe extent of a line, such a function should return a foldable\nrange that starts on that line (but continues beyond it), if one\ncan be found.\n*/\nconst foldService = /*@__PURE__*/Facet.define();\n/**\nThis node prop is used to associate folding information with\nsyntax node types. Given a syntax node, it should check whether\nthat tree is foldable and return the range that can be collapsed\nwhen it is.\n*/\nconst foldNodeProp = /*@__PURE__*/new NodeProp();\n/**\n[Fold](https://codemirror.net/6/docs/ref/#language.foldNodeProp) function that folds everything but\nthe first and the last child of a syntax node. Useful for nodes\nthat start and end with delimiters.\n*/\nfunction foldInside(node) {\n    let first = node.firstChild, last = node.lastChild;\n    return first && first.to < last.from ? { from: first.to, to: last.type.isError ? node.to : last.from } : null;\n}\nfunction syntaxFolding(state, start, end) {\n    let tree = syntaxTree(state);\n    if (tree.length < end)\n        return null;\n    let stack = tree.resolveStack(end, 1);\n    let found = null;\n    for (let iter = stack; iter; iter = iter.next) {\n        let cur = iter.node;\n        if (cur.to <= end || cur.from > end)\n            continue;\n        if (found && cur.from < start)\n            break;\n        let prop = cur.type.prop(foldNodeProp);\n        if (prop && (cur.to < tree.length - 50 || tree.length == state.doc.length || !isUnfinished(cur))) {\n            let value = prop(cur, state);\n            if (value && value.from <= end && value.from >= start && value.to > end)\n                found = value;\n        }\n    }\n    return found;\n}\nfunction isUnfinished(node) {\n    let ch = node.lastChild;\n    return ch && ch.to == node.to && ch.type.isError;\n}\n/**\nCheck whether the given line is foldable. First asks any fold\nservices registered through\n[`foldService`](https://codemirror.net/6/docs/ref/#language.foldService), and if none of them return\na result, tries to query the [fold node\nprop](https://codemirror.net/6/docs/ref/#language.foldNodeProp) of syntax nodes that cover the end\nof the line.\n*/\nfunction foldable(state, lineStart, lineEnd) {\n    for (let service of state.facet(foldService)) {\n        let result = service(state, lineStart, lineEnd);\n        if (result)\n            return result;\n    }\n    return syntaxFolding(state, lineStart, lineEnd);\n}\nfunction mapRange(range, mapping) {\n    let from = mapping.mapPos(range.from, 1), to = mapping.mapPos(range.to, -1);\n    return from >= to ? undefined : { from, to };\n}\n/**\nState effect that can be attached to a transaction to fold the\ngiven range. (You probably only need this in exceptional\ncircumstances—usually you'll just want to let\n[`foldCode`](https://codemirror.net/6/docs/ref/#language.foldCode) and the [fold\ngutter](https://codemirror.net/6/docs/ref/#language.foldGutter) create the transactions.)\n*/\nconst foldEffect = /*@__PURE__*/StateEffect.define({ map: mapRange });\n/**\nState effect that unfolds the given range (if it was folded).\n*/\nconst unfoldEffect = /*@__PURE__*/StateEffect.define({ map: mapRange });\nfunction selectedLines(view) {\n    let lines = [];\n    for (let { head } of view.state.selection.ranges) {\n        if (lines.some(l => l.from <= head && l.to >= head))\n            continue;\n        lines.push(view.lineBlockAt(head));\n    }\n    return lines;\n}\n/**\nThe state field that stores the folded ranges (as a [decoration\nset](https://codemirror.net/6/docs/ref/#view.DecorationSet)). Can be passed to\n[`EditorState.toJSON`](https://codemirror.net/6/docs/ref/#state.EditorState.toJSON) and\n[`fromJSON`](https://codemirror.net/6/docs/ref/#state.EditorState^fromJSON) to serialize the fold\nstate.\n*/\nconst foldState = /*@__PURE__*/StateField.define({\n    create() {\n        return Decoration.none;\n    },\n    update(folded, tr) {\n        folded = folded.map(tr.changes);\n        for (let e of tr.effects) {\n            if (e.is(foldEffect) && !foldExists(folded, e.value.from, e.value.to)) {\n                let { preparePlaceholder } = tr.state.facet(foldConfig);\n                let widget = !preparePlaceholder ? foldWidget :\n                    Decoration.replace({ widget: new PreparedFoldWidget(preparePlaceholder(tr.state, e.value)) });\n                folded = folded.update({ add: [widget.range(e.value.from, e.value.to)] });\n            }\n            else if (e.is(unfoldEffect)) {\n                folded = folded.update({ filter: (from, to) => e.value.from != from || e.value.to != to,\n                    filterFrom: e.value.from, filterTo: e.value.to });\n            }\n        }\n        // Clear folded ranges that cover the selection head\n        if (tr.selection) {\n            let onSelection = false, { head } = tr.selection.main;\n            folded.between(head, head, (a, b) => { if (a < head && b > head)\n                onSelection = true; });\n            if (onSelection)\n                folded = folded.update({\n                    filterFrom: head,\n                    filterTo: head,\n                    filter: (a, b) => b <= head || a >= head\n                });\n        }\n        return folded;\n    },\n    provide: f => EditorView.decorations.from(f),\n    toJSON(folded, state) {\n        let ranges = [];\n        folded.between(0, state.doc.length, (from, to) => { ranges.push(from, to); });\n        return ranges;\n    },\n    fromJSON(value) {\n        if (!Array.isArray(value) || value.length % 2)\n            throw new RangeError(\"Invalid JSON for fold state\");\n        let ranges = [];\n        for (let i = 0; i < value.length;) {\n            let from = value[i++], to = value[i++];\n            if (typeof from != \"number\" || typeof to != \"number\")\n                throw new RangeError(\"Invalid JSON for fold state\");\n            ranges.push(foldWidget.range(from, to));\n        }\n        return Decoration.set(ranges, true);\n    }\n});\n/**\nGet a [range set](https://codemirror.net/6/docs/ref/#state.RangeSet) containing the folded ranges\nin the given state.\n*/\nfunction foldedRanges(state) {\n    return state.field(foldState, false) || RangeSet.empty;\n}\nfunction findFold(state, from, to) {\n    var _a;\n    let found = null;\n    (_a = state.field(foldState, false)) === null || _a === void 0 ? void 0 : _a.between(from, to, (from, to) => {\n        if (!found || found.from > from)\n            found = { from, to };\n    });\n    return found;\n}\nfunction foldExists(folded, from, to) {\n    let found = false;\n    folded.between(from, from, (a, b) => { if (a == from && b == to)\n        found = true; });\n    return found;\n}\nfunction maybeEnable(state, other) {\n    return state.field(foldState, false) ? other : other.concat(StateEffect.appendConfig.of(codeFolding()));\n}\n/**\nFold the lines that are selected, if possible.\n*/\nconst foldCode = view => {\n    for (let line of selectedLines(view)) {\n        let range = foldable(view.state, line.from, line.to);\n        if (range) {\n            view.dispatch({ effects: maybeEnable(view.state, [foldEffect.of(range), announceFold(view, range)]) });\n            return true;\n        }\n    }\n    return false;\n};\n/**\nUnfold folded ranges on selected lines.\n*/\nconst unfoldCode = view => {\n    if (!view.state.field(foldState, false))\n        return false;\n    let effects = [];\n    for (let line of selectedLines(view)) {\n        let folded = findFold(view.state, line.from, line.to);\n        if (folded)\n            effects.push(unfoldEffect.of(folded), announceFold(view, folded, false));\n    }\n    if (effects.length)\n        view.dispatch({ effects });\n    return effects.length > 0;\n};\nfunction announceFold(view, range, fold = true) {\n    let lineFrom = view.state.doc.lineAt(range.from).number, lineTo = view.state.doc.lineAt(range.to).number;\n    return EditorView.announce.of(`${view.state.phrase(fold ? \"Folded lines\" : \"Unfolded lines\")} ${lineFrom} ${view.state.phrase(\"to\")} ${lineTo}.`);\n}\n/**\nFold all top-level foldable ranges. Note that, in most cases,\nfolding information will depend on the [syntax\ntree](https://codemirror.net/6/docs/ref/#language.syntaxTree), and folding everything may not work\nreliably when the document hasn't been fully parsed (either\nbecause the editor state was only just initialized, or because the\ndocument is so big that the parser decided not to parse it\nentirely).\n*/\nconst foldAll = view => {\n    let { state } = view, effects = [];\n    for (let pos = 0; pos < state.doc.length;) {\n        let line = view.lineBlockAt(pos), range = foldable(state, line.from, line.to);\n        if (range)\n            effects.push(foldEffect.of(range));\n        pos = (range ? view.lineBlockAt(range.to) : line).to + 1;\n    }\n    if (effects.length)\n        view.dispatch({ effects: maybeEnable(view.state, effects) });\n    return !!effects.length;\n};\n/**\nUnfold all folded code.\n*/\nconst unfoldAll = view => {\n    let field = view.state.field(foldState, false);\n    if (!field || !field.size)\n        return false;\n    let effects = [];\n    field.between(0, view.state.doc.length, (from, to) => { effects.push(unfoldEffect.of({ from, to })); });\n    view.dispatch({ effects });\n    return true;\n};\n// Find the foldable region containing the given line, if one exists\nfunction foldableContainer(view, lineBlock) {\n    // Look backwards through line blocks until we find a foldable region that\n    // intersects with the line\n    for (let line = lineBlock;;) {\n        let foldableRegion = foldable(view.state, line.from, line.to);\n        if (foldableRegion && foldableRegion.to > lineBlock.from)\n            return foldableRegion;\n        if (!line.from)\n            return null;\n        line = view.lineBlockAt(line.from - 1);\n    }\n}\n/**\nToggle folding at cursors. Unfolds if there is an existing fold\nstarting in that line, tries to find a foldable range around it\notherwise.\n*/\nconst toggleFold = (view) => {\n    let effects = [];\n    for (let line of selectedLines(view)) {\n        let folded = findFold(view.state, line.from, line.to);\n        if (folded) {\n            effects.push(unfoldEffect.of(folded), announceFold(view, folded, false));\n        }\n        else {\n            let foldRange = foldableContainer(view, line);\n            if (foldRange)\n                effects.push(foldEffect.of(foldRange), announceFold(view, foldRange));\n        }\n    }\n    if (effects.length > 0)\n        view.dispatch({ effects: maybeEnable(view.state, effects) });\n    return !!effects.length;\n};\n/**\nDefault fold-related key bindings.\n\n - Ctrl-Shift-[ (Cmd-Alt-[ on macOS): [`foldCode`](https://codemirror.net/6/docs/ref/#language.foldCode).\n - Ctrl-Shift-] (Cmd-Alt-] on macOS): [`unfoldCode`](https://codemirror.net/6/docs/ref/#language.unfoldCode).\n - Ctrl-Alt-[: [`foldAll`](https://codemirror.net/6/docs/ref/#language.foldAll).\n - Ctrl-Alt-]: [`unfoldAll`](https://codemirror.net/6/docs/ref/#language.unfoldAll).\n*/\nconst foldKeymap = [\n    { key: \"Ctrl-Shift-[\", mac: \"Cmd-Alt-[\", run: foldCode },\n    { key: \"Ctrl-Shift-]\", mac: \"Cmd-Alt-]\", run: unfoldCode },\n    { key: \"Ctrl-Alt-[\", run: foldAll },\n    { key: \"Ctrl-Alt-]\", run: unfoldAll }\n];\nconst defaultConfig = {\n    placeholderDOM: null,\n    preparePlaceholder: null,\n    placeholderText: \"…\"\n};\nconst foldConfig = /*@__PURE__*/Facet.define({\n    combine(values) { return combineConfig(values, defaultConfig); }\n});\n/**\nCreate an extension that configures code folding.\n*/\nfunction codeFolding(config) {\n    let result = [foldState, baseTheme$1];\n    if (config)\n        result.push(foldConfig.of(config));\n    return result;\n}\nfunction widgetToDOM(view, prepared) {\n    let { state } = view, conf = state.facet(foldConfig);\n    let onclick = (event) => {\n        let line = view.lineBlockAt(view.posAtDOM(event.target));\n        let folded = findFold(view.state, line.from, line.to);\n        if (folded)\n            view.dispatch({ effects: unfoldEffect.of(folded) });\n        event.preventDefault();\n    };\n    if (conf.placeholderDOM)\n        return conf.placeholderDOM(view, onclick, prepared);\n    let element = document.createElement(\"span\");\n    element.textContent = conf.placeholderText;\n    element.setAttribute(\"aria-label\", state.phrase(\"folded code\"));\n    element.title = state.phrase(\"unfold\");\n    element.className = \"cm-foldPlaceholder\";\n    element.onclick = onclick;\n    return element;\n}\nconst foldWidget = /*@__PURE__*/Decoration.replace({ widget: /*@__PURE__*/new class extends WidgetType {\n        toDOM(view) { return widgetToDOM(view, null); }\n    } });\nclass PreparedFoldWidget extends WidgetType {\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    eq(other) { return this.value == other.value; }\n    toDOM(view) { return widgetToDOM(view, this.value); }\n}\nconst foldGutterDefaults = {\n    openText: \"⌄\",\n    closedText: \"›\",\n    markerDOM: null,\n    domEventHandlers: {},\n    foldingChanged: () => false\n};\nclass FoldMarker extends GutterMarker {\n    constructor(config, open) {\n        super();\n        this.config = config;\n        this.open = open;\n    }\n    eq(other) { return this.config == other.config && this.open == other.open; }\n    toDOM(view) {\n        if (this.config.markerDOM)\n            return this.config.markerDOM(this.open);\n        let span = document.createElement(\"span\");\n        span.textContent = this.open ? this.config.openText : this.config.closedText;\n        span.title = view.state.phrase(this.open ? \"Fold line\" : \"Unfold line\");\n        return span;\n    }\n}\n/**\nCreate an extension that registers a fold gutter, which shows a\nfold status indicator before foldable lines (which can be clicked\nto fold or unfold the line).\n*/\nfunction foldGutter(config = {}) {\n    let fullConfig = Object.assign(Object.assign({}, foldGutterDefaults), config);\n    let canFold = new FoldMarker(fullConfig, true), canUnfold = new FoldMarker(fullConfig, false);\n    let markers = ViewPlugin.fromClass(class {\n        constructor(view) {\n            this.from = view.viewport.from;\n            this.markers = this.buildMarkers(view);\n        }\n        update(update) {\n            if (update.docChanged || update.viewportChanged ||\n                update.startState.facet(language) != update.state.facet(language) ||\n                update.startState.field(foldState, false) != update.state.field(foldState, false) ||\n                syntaxTree(update.startState) != syntaxTree(update.state) ||\n                fullConfig.foldingChanged(update))\n                this.markers = this.buildMarkers(update.view);\n        }\n        buildMarkers(view) {\n            let builder = new RangeSetBuilder();\n            for (let line of view.viewportLineBlocks) {\n                let mark = findFold(view.state, line.from, line.to) ? canUnfold\n                    : foldable(view.state, line.from, line.to) ? canFold : null;\n                if (mark)\n                    builder.add(line.from, line.from, mark);\n            }\n            return builder.finish();\n        }\n    });\n    let { domEventHandlers } = fullConfig;\n    return [\n        markers,\n        gutter({\n            class: \"cm-foldGutter\",\n            markers(view) { var _a; return ((_a = view.plugin(markers)) === null || _a === void 0 ? void 0 : _a.markers) || RangeSet.empty; },\n            initialSpacer() {\n                return new FoldMarker(fullConfig, false);\n            },\n            domEventHandlers: Object.assign(Object.assign({}, domEventHandlers), { click: (view, line, event) => {\n                    if (domEventHandlers.click && domEventHandlers.click(view, line, event))\n                        return true;\n                    let folded = findFold(view.state, line.from, line.to);\n                    if (folded) {\n                        view.dispatch({ effects: unfoldEffect.of(folded) });\n                        return true;\n                    }\n                    let range = foldable(view.state, line.from, line.to);\n                    if (range) {\n                        view.dispatch({ effects: foldEffect.of(range) });\n                        return true;\n                    }\n                    return false;\n                } })\n        }),\n        codeFolding()\n    ];\n}\nconst baseTheme$1 = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-foldPlaceholder\": {\n        backgroundColor: \"#eee\",\n        border: \"1px solid #ddd\",\n        color: \"#888\",\n        borderRadius: \".2em\",\n        margin: \"0 1px\",\n        padding: \"0 1px\",\n        cursor: \"pointer\"\n    },\n    \".cm-foldGutter span\": {\n        padding: \"0 1px\",\n        cursor: \"pointer\"\n    }\n});\n\n/**\nA highlight style associates CSS styles with higlighting\n[tags](https://lezer.codemirror.net/docs/ref#highlight.Tag).\n*/\nclass HighlightStyle {\n    constructor(\n    /**\n    The tag styles used to create this highlight style.\n    */\n    specs, options) {\n        this.specs = specs;\n        let modSpec;\n        function def(spec) {\n            let cls = StyleModule.newName();\n            (modSpec || (modSpec = Object.create(null)))[\".\" + cls] = spec;\n            return cls;\n        }\n        const all = typeof options.all == \"string\" ? options.all : options.all ? def(options.all) : undefined;\n        const scopeOpt = options.scope;\n        this.scope = scopeOpt instanceof Language ? (type) => type.prop(languageDataProp) == scopeOpt.data\n            : scopeOpt ? (type) => type == scopeOpt : undefined;\n        this.style = tagHighlighter(specs.map(style => ({\n            tag: style.tag,\n            class: style.class || def(Object.assign({}, style, { tag: null }))\n        })), {\n            all,\n        }).style;\n        this.module = modSpec ? new StyleModule(modSpec) : null;\n        this.themeType = options.themeType;\n    }\n    /**\n    Create a highlighter style that associates the given styles to\n    the given tags. The specs must be objects that hold a style tag\n    or array of tags in their `tag` property, and either a single\n    `class` property providing a static CSS class (for highlighter\n    that rely on external styling), or a\n    [`style-mod`](https://github.com/marijnh/style-mod#documentation)-style\n    set of CSS properties (which define the styling for those tags).\n    \n    The CSS rules created for a highlighter will be emitted in the\n    order of the spec's properties. That means that for elements that\n    have multiple tags associated with them, styles defined further\n    down in the list will have a higher CSS precedence than styles\n    defined earlier.\n    */\n    static define(specs, options) {\n        return new HighlightStyle(specs, options || {});\n    }\n}\nconst highlighterFacet = /*@__PURE__*/Facet.define();\nconst fallbackHighlighter = /*@__PURE__*/Facet.define({\n    combine(values) { return values.length ? [values[0]] : null; }\n});\nfunction getHighlighters(state) {\n    let main = state.facet(highlighterFacet);\n    return main.length ? main : state.facet(fallbackHighlighter);\n}\n/**\nWrap a highlighter in an editor extension that uses it to apply\nsyntax highlighting to the editor content.\n\nWhen multiple (non-fallback) styles are provided, the styling\napplied is the union of the classes they emit.\n*/\nfunction syntaxHighlighting(highlighter, options) {\n    let ext = [treeHighlighter], themeType;\n    if (highlighter instanceof HighlightStyle) {\n        if (highlighter.module)\n            ext.push(EditorView.styleModule.of(highlighter.module));\n        themeType = highlighter.themeType;\n    }\n    if (options === null || options === void 0 ? void 0 : options.fallback)\n        ext.push(fallbackHighlighter.of(highlighter));\n    else if (themeType)\n        ext.push(highlighterFacet.computeN([EditorView.darkTheme], state => {\n            return state.facet(EditorView.darkTheme) == (themeType == \"dark\") ? [highlighter] : [];\n        }));\n    else\n        ext.push(highlighterFacet.of(highlighter));\n    return ext;\n}\n/**\nReturns the CSS classes (if any) that the highlighters active in\nthe state would assign to the given style\n[tags](https://lezer.codemirror.net/docs/ref#highlight.Tag) and\n(optional) language\n[scope](https://codemirror.net/6/docs/ref/#language.HighlightStyle^define^options.scope).\n*/\nfunction highlightingFor(state, tags, scope) {\n    let highlighters = getHighlighters(state);\n    let result = null;\n    if (highlighters)\n        for (let highlighter of highlighters) {\n            if (!highlighter.scope || scope && highlighter.scope(scope)) {\n                let cls = highlighter.style(tags);\n                if (cls)\n                    result = result ? result + \" \" + cls : cls;\n            }\n        }\n    return result;\n}\nclass TreeHighlighter {\n    constructor(view) {\n        this.markCache = Object.create(null);\n        this.tree = syntaxTree(view.state);\n        this.decorations = this.buildDeco(view, getHighlighters(view.state));\n        this.decoratedTo = view.viewport.to;\n    }\n    update(update) {\n        let tree = syntaxTree(update.state), highlighters = getHighlighters(update.state);\n        let styleChange = highlighters != getHighlighters(update.startState);\n        let { viewport } = update.view, decoratedToMapped = update.changes.mapPos(this.decoratedTo, 1);\n        if (tree.length < viewport.to && !styleChange && tree.type == this.tree.type && decoratedToMapped >= viewport.to) {\n            this.decorations = this.decorations.map(update.changes);\n            this.decoratedTo = decoratedToMapped;\n        }\n        else if (tree != this.tree || update.viewportChanged || styleChange) {\n            this.tree = tree;\n            this.decorations = this.buildDeco(update.view, highlighters);\n            this.decoratedTo = viewport.to;\n        }\n    }\n    buildDeco(view, highlighters) {\n        if (!highlighters || !this.tree.length)\n            return Decoration.none;\n        let builder = new RangeSetBuilder();\n        for (let { from, to } of view.visibleRanges) {\n            highlightTree(this.tree, highlighters, (from, to, style) => {\n                builder.add(from, to, this.markCache[style] || (this.markCache[style] = Decoration.mark({ class: style })));\n            }, from, to);\n        }\n        return builder.finish();\n    }\n}\nconst treeHighlighter = /*@__PURE__*/Prec.high(/*@__PURE__*/ViewPlugin.fromClass(TreeHighlighter, {\n    decorations: v => v.decorations\n}));\n/**\nA default highlight style (works well with light themes).\n*/\nconst defaultHighlightStyle = /*@__PURE__*/HighlightStyle.define([\n    { tag: tags.meta,\n        color: \"#404740\" },\n    { tag: tags.link,\n        textDecoration: \"underline\" },\n    { tag: tags.heading,\n        textDecoration: \"underline\",\n        fontWeight: \"bold\" },\n    { tag: tags.emphasis,\n        fontStyle: \"italic\" },\n    { tag: tags.strong,\n        fontWeight: \"bold\" },\n    { tag: tags.strikethrough,\n        textDecoration: \"line-through\" },\n    { tag: tags.keyword,\n        color: \"#708\" },\n    { tag: [tags.atom, tags.bool, tags.url, tags.contentSeparator, tags.labelName],\n        color: \"#219\" },\n    { tag: [tags.literal, tags.inserted],\n        color: \"#164\" },\n    { tag: [tags.string, tags.deleted],\n        color: \"#a11\" },\n    { tag: [tags.regexp, tags.escape, /*@__PURE__*/tags.special(tags.string)],\n        color: \"#e40\" },\n    { tag: /*@__PURE__*/tags.definition(tags.variableName),\n        color: \"#00f\" },\n    { tag: /*@__PURE__*/tags.local(tags.variableName),\n        color: \"#30a\" },\n    { tag: [tags.typeName, tags.namespace],\n        color: \"#085\" },\n    { tag: tags.className,\n        color: \"#167\" },\n    { tag: [/*@__PURE__*/tags.special(tags.variableName), tags.macroName],\n        color: \"#256\" },\n    { tag: /*@__PURE__*/tags.definition(tags.propertyName),\n        color: \"#00c\" },\n    { tag: tags.comment,\n        color: \"#940\" },\n    { tag: tags.invalid,\n        color: \"#f00\" }\n]);\n\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \"&.cm-focused .cm-matchingBracket\": { backgroundColor: \"#328c8252\" },\n    \"&.cm-focused .cm-nonmatchingBracket\": { backgroundColor: \"#bb555544\" }\n});\nconst DefaultScanDist = 10000, DefaultBrackets = \"()[]{}\";\nconst bracketMatchingConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            afterCursor: true,\n            brackets: DefaultBrackets,\n            maxScanDistance: DefaultScanDist,\n            renderMatch: defaultRenderMatch\n        });\n    }\n});\nconst matchingMark = /*@__PURE__*/Decoration.mark({ class: \"cm-matchingBracket\" }), nonmatchingMark = /*@__PURE__*/Decoration.mark({ class: \"cm-nonmatchingBracket\" });\nfunction defaultRenderMatch(match) {\n    let decorations = [];\n    let mark = match.matched ? matchingMark : nonmatchingMark;\n    decorations.push(mark.range(match.start.from, match.start.to));\n    if (match.end)\n        decorations.push(mark.range(match.end.from, match.end.to));\n    return decorations;\n}\nconst bracketMatchingState = /*@__PURE__*/StateField.define({\n    create() { return Decoration.none; },\n    update(deco, tr) {\n        if (!tr.docChanged && !tr.selection)\n            return deco;\n        let decorations = [];\n        let config = tr.state.facet(bracketMatchingConfig);\n        for (let range of tr.state.selection.ranges) {\n            if (!range.empty)\n                continue;\n            let match = matchBrackets(tr.state, range.head, -1, config)\n                || (range.head > 0 && matchBrackets(tr.state, range.head - 1, 1, config))\n                || (config.afterCursor &&\n                    (matchBrackets(tr.state, range.head, 1, config) ||\n                        (range.head < tr.state.doc.length && matchBrackets(tr.state, range.head + 1, -1, config))));\n            if (match)\n                decorations = decorations.concat(config.renderMatch(match, tr.state));\n        }\n        return Decoration.set(decorations, true);\n    },\n    provide: f => EditorView.decorations.from(f)\n});\nconst bracketMatchingUnique = [\n    bracketMatchingState,\n    baseTheme\n];\n/**\nCreate an extension that enables bracket matching. Whenever the\ncursor is next to a bracket, that bracket and the one it matches\nare highlighted. Or, when no matching bracket is found, another\nhighlighting style is used to indicate this.\n*/\nfunction bracketMatching(config = {}) {\n    return [bracketMatchingConfig.of(config), bracketMatchingUnique];\n}\n/**\nWhen larger syntax nodes, such as HTML tags, are marked as\nopening/closing, it can be a bit messy to treat the whole node as\na matchable bracket. This node prop allows you to define, for such\na node, a ‘handle’—the part of the node that is highlighted, and\nthat the cursor must be on to activate highlighting in the first\nplace.\n*/\nconst bracketMatchingHandle = /*@__PURE__*/new NodeProp();\nfunction matchingNodes(node, dir, brackets) {\n    let byProp = node.prop(dir < 0 ? NodeProp.openedBy : NodeProp.closedBy);\n    if (byProp)\n        return byProp;\n    if (node.name.length == 1) {\n        let index = brackets.indexOf(node.name);\n        if (index > -1 && index % 2 == (dir < 0 ? 1 : 0))\n            return [brackets[index + dir]];\n    }\n    return null;\n}\nfunction findHandle(node) {\n    let hasHandle = node.type.prop(bracketMatchingHandle);\n    return hasHandle ? hasHandle(node.node) : node;\n}\n/**\nFind the matching bracket for the token at `pos`, scanning\ndirection `dir`. Only the `brackets` and `maxScanDistance`\nproperties are used from `config`, if given. Returns null if no\nbracket was found at `pos`, or a match result otherwise.\n*/\nfunction matchBrackets(state, pos, dir, config = {}) {\n    let maxScanDistance = config.maxScanDistance || DefaultScanDist, brackets = config.brackets || DefaultBrackets;\n    let tree = syntaxTree(state), node = tree.resolveInner(pos, dir);\n    for (let cur = node; cur; cur = cur.parent) {\n        let matches = matchingNodes(cur.type, dir, brackets);\n        if (matches && cur.from < cur.to) {\n            let handle = findHandle(cur);\n            if (handle && (dir > 0 ? pos >= handle.from && pos < handle.to : pos > handle.from && pos <= handle.to))\n                return matchMarkedBrackets(state, pos, dir, cur, handle, matches, brackets);\n        }\n    }\n    return matchPlainBrackets(state, pos, dir, tree, node.type, maxScanDistance, brackets);\n}\nfunction matchMarkedBrackets(_state, _pos, dir, token, handle, matching, brackets) {\n    let parent = token.parent, firstToken = { from: handle.from, to: handle.to };\n    let depth = 0, cursor = parent === null || parent === void 0 ? void 0 : parent.cursor();\n    if (cursor && (dir < 0 ? cursor.childBefore(token.from) : cursor.childAfter(token.to)))\n        do {\n            if (dir < 0 ? cursor.to <= token.from : cursor.from >= token.to) {\n                if (depth == 0 && matching.indexOf(cursor.type.name) > -1 && cursor.from < cursor.to) {\n                    let endHandle = findHandle(cursor);\n                    return { start: firstToken, end: endHandle ? { from: endHandle.from, to: endHandle.to } : undefined, matched: true };\n                }\n                else if (matchingNodes(cursor.type, dir, brackets)) {\n                    depth++;\n                }\n                else if (matchingNodes(cursor.type, -dir, brackets)) {\n                    if (depth == 0) {\n                        let endHandle = findHandle(cursor);\n                        return {\n                            start: firstToken,\n                            end: endHandle && endHandle.from < endHandle.to ? { from: endHandle.from, to: endHandle.to } : undefined,\n                            matched: false\n                        };\n                    }\n                    depth--;\n                }\n            }\n        } while (dir < 0 ? cursor.prevSibling() : cursor.nextSibling());\n    return { start: firstToken, matched: false };\n}\nfunction matchPlainBrackets(state, pos, dir, tree, tokenType, maxScanDistance, brackets) {\n    let startCh = dir < 0 ? state.sliceDoc(pos - 1, pos) : state.sliceDoc(pos, pos + 1);\n    let bracket = brackets.indexOf(startCh);\n    if (bracket < 0 || (bracket % 2 == 0) != (dir > 0))\n        return null;\n    let startToken = { from: dir < 0 ? pos - 1 : pos, to: dir > 0 ? pos + 1 : pos };\n    let iter = state.doc.iterRange(pos, dir > 0 ? state.doc.length : 0), depth = 0;\n    for (let distance = 0; !(iter.next()).done && distance <= maxScanDistance;) {\n        let text = iter.value;\n        if (dir < 0)\n            distance += text.length;\n        let basePos = pos + distance * dir;\n        for (let pos = dir > 0 ? 0 : text.length - 1, end = dir > 0 ? text.length : -1; pos != end; pos += dir) {\n            let found = brackets.indexOf(text[pos]);\n            if (found < 0 || tree.resolveInner(basePos + pos, 1).type != tokenType)\n                continue;\n            if ((found % 2 == 0) == (dir > 0)) {\n                depth++;\n            }\n            else if (depth == 1) { // Closing\n                return { start: startToken, end: { from: basePos + pos, to: basePos + pos + 1 }, matched: (found >> 1) == (bracket >> 1) };\n            }\n            else {\n                depth--;\n            }\n        }\n        if (dir > 0)\n            distance += text.length;\n    }\n    return iter.done ? { start: startToken, matched: false } : null;\n}\n\n// Counts the column offset in a string, taking tabs into account.\n// Used mostly to find indentation.\nfunction countCol(string, end, tabSize, startIndex = 0, startValue = 0) {\n    if (end == null) {\n        end = string.search(/[^\\s\\u00a0]/);\n        if (end == -1)\n            end = string.length;\n    }\n    let n = startValue;\n    for (let i = startIndex; i < end; i++) {\n        if (string.charCodeAt(i) == 9)\n            n += tabSize - (n % tabSize);\n        else\n            n++;\n    }\n    return n;\n}\n/**\nEncapsulates a single line of input. Given to stream syntax code,\nwhich uses it to tokenize the content.\n*/\nclass StringStream {\n    /**\n    Create a stream.\n    */\n    constructor(\n    /**\n    The line.\n    */\n    string, tabSize, \n    /**\n    The current indent unit size.\n    */\n    indentUnit, overrideIndent) {\n        this.string = string;\n        this.tabSize = tabSize;\n        this.indentUnit = indentUnit;\n        this.overrideIndent = overrideIndent;\n        /**\n        The current position on the line.\n        */\n        this.pos = 0;\n        /**\n        The start position of the current token.\n        */\n        this.start = 0;\n        this.lastColumnPos = 0;\n        this.lastColumnValue = 0;\n    }\n    /**\n    True if we are at the end of the line.\n    */\n    eol() { return this.pos >= this.string.length; }\n    /**\n    True if we are at the start of the line.\n    */\n    sol() { return this.pos == 0; }\n    /**\n    Get the next code unit after the current position, or undefined\n    if we're at the end of the line.\n    */\n    peek() { return this.string.charAt(this.pos) || undefined; }\n    /**\n    Read the next code unit and advance `this.pos`.\n    */\n    next() {\n        if (this.pos < this.string.length)\n            return this.string.charAt(this.pos++);\n    }\n    /**\n    Match the next character against the given string, regular\n    expression, or predicate. Consume and return it if it matches.\n    */\n    eat(match) {\n        let ch = this.string.charAt(this.pos);\n        let ok;\n        if (typeof match == \"string\")\n            ok = ch == match;\n        else\n            ok = ch && (match instanceof RegExp ? match.test(ch) : match(ch));\n        if (ok) {\n            ++this.pos;\n            return ch;\n        }\n    }\n    /**\n    Continue matching characters that match the given string,\n    regular expression, or predicate function. Return true if any\n    characters were consumed.\n    */\n    eatWhile(match) {\n        let start = this.pos;\n        while (this.eat(match)) { }\n        return this.pos > start;\n    }\n    /**\n    Consume whitespace ahead of `this.pos`. Return true if any was\n    found.\n    */\n    eatSpace() {\n        let start = this.pos;\n        while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos)))\n            ++this.pos;\n        return this.pos > start;\n    }\n    /**\n    Move to the end of the line.\n    */\n    skipToEnd() { this.pos = this.string.length; }\n    /**\n    Move to directly before the given character, if found on the\n    current line.\n    */\n    skipTo(ch) {\n        let found = this.string.indexOf(ch, this.pos);\n        if (found > -1) {\n            this.pos = found;\n            return true;\n        }\n    }\n    /**\n    Move back `n` characters.\n    */\n    backUp(n) { this.pos -= n; }\n    /**\n    Get the column position at `this.pos`.\n    */\n    column() {\n        if (this.lastColumnPos < this.start) {\n            this.lastColumnValue = countCol(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n            this.lastColumnPos = this.start;\n        }\n        return this.lastColumnValue;\n    }\n    /**\n    Get the indentation column of the current line.\n    */\n    indentation() {\n        var _a;\n        return (_a = this.overrideIndent) !== null && _a !== void 0 ? _a : countCol(this.string, null, this.tabSize);\n    }\n    /**\n    Match the input against the given string or regular expression\n    (which should start with a `^`). Return true or the regexp match\n    if it matches.\n    \n    Unless `consume` is set to `false`, this will move `this.pos`\n    past the matched text.\n    \n    When matching a string `caseInsensitive` can be set to true to\n    make the match case-insensitive.\n    */\n    match(pattern, consume, caseInsensitive) {\n        if (typeof pattern == \"string\") {\n            let cased = (str) => caseInsensitive ? str.toLowerCase() : str;\n            let substr = this.string.substr(this.pos, pattern.length);\n            if (cased(substr) == cased(pattern)) {\n                if (consume !== false)\n                    this.pos += pattern.length;\n                return true;\n            }\n            else\n                return null;\n        }\n        else {\n            let match = this.string.slice(this.pos).match(pattern);\n            if (match && match.index > 0)\n                return null;\n            if (match && consume !== false)\n                this.pos += match[0].length;\n            return match;\n        }\n    }\n    /**\n    Get the current token.\n    */\n    current() { return this.string.slice(this.start, this.pos); }\n}\n\nfunction fullParser(spec) {\n    return {\n        name: spec.name || \"\",\n        token: spec.token,\n        blankLine: spec.blankLine || (() => { }),\n        startState: spec.startState || (() => true),\n        copyState: spec.copyState || defaultCopyState,\n        indent: spec.indent || (() => null),\n        languageData: spec.languageData || {},\n        tokenTable: spec.tokenTable || noTokens\n    };\n}\nfunction defaultCopyState(state) {\n    if (typeof state != \"object\")\n        return state;\n    let newState = {};\n    for (let prop in state) {\n        let val = state[prop];\n        newState[prop] = (val instanceof Array ? val.slice() : val);\n    }\n    return newState;\n}\nconst IndentedFrom = /*@__PURE__*/new WeakMap();\n/**\nA [language](https://codemirror.net/6/docs/ref/#language.Language) class based on a CodeMirror\n5-style [streaming parser](https://codemirror.net/6/docs/ref/#language.StreamParser).\n*/\nclass StreamLanguage extends Language {\n    constructor(parser) {\n        let data = defineLanguageFacet(parser.languageData);\n        let p = fullParser(parser), self;\n        let impl = new class extends Parser {\n            createParse(input, fragments, ranges) {\n                return new Parse(self, input, fragments, ranges);\n            }\n        };\n        super(data, impl, [indentService.of((cx, pos) => this.getIndent(cx, pos))], parser.name);\n        this.topNode = docID(data);\n        self = this;\n        this.streamParser = p;\n        this.stateAfter = new NodeProp({ perNode: true });\n        this.tokenTable = parser.tokenTable ? new TokenTable(p.tokenTable) : defaultTokenTable;\n    }\n    /**\n    Define a stream language.\n    */\n    static define(spec) { return new StreamLanguage(spec); }\n    getIndent(cx, pos) {\n        let tree = syntaxTree(cx.state), at = tree.resolve(pos);\n        while (at && at.type != this.topNode)\n            at = at.parent;\n        if (!at)\n            return null;\n        let from = undefined;\n        let { overrideIndentation } = cx.options;\n        if (overrideIndentation) {\n            from = IndentedFrom.get(cx.state);\n            if (from != null && from < pos - 1e4)\n                from = undefined;\n        }\n        let start = findState(this, tree, 0, at.from, from !== null && from !== void 0 ? from : pos), statePos, state;\n        if (start) {\n            state = start.state;\n            statePos = start.pos + 1;\n        }\n        else {\n            state = this.streamParser.startState(cx.unit);\n            statePos = 0;\n        }\n        if (pos - statePos > 10000 /* C.MaxIndentScanDist */)\n            return null;\n        while (statePos < pos) {\n            let line = cx.state.doc.lineAt(statePos), end = Math.min(pos, line.to);\n            if (line.length) {\n                let indentation = overrideIndentation ? overrideIndentation(line.from) : -1;\n                let stream = new StringStream(line.text, cx.state.tabSize, cx.unit, indentation < 0 ? undefined : indentation);\n                while (stream.pos < end - line.from)\n                    readToken(this.streamParser.token, stream, state);\n            }\n            else {\n                this.streamParser.blankLine(state, cx.unit);\n            }\n            if (end == pos)\n                break;\n            statePos = line.to + 1;\n        }\n        let line = cx.lineAt(pos);\n        if (overrideIndentation && from == null)\n            IndentedFrom.set(cx.state, line.from);\n        return this.streamParser.indent(state, /^\\s*(.*)/.exec(line.text)[1], cx);\n    }\n    get allowsNesting() { return false; }\n}\nfunction findState(lang, tree, off, startPos, before) {\n    let state = off >= startPos && off + tree.length <= before && tree.prop(lang.stateAfter);\n    if (state)\n        return { state: lang.streamParser.copyState(state), pos: off + tree.length };\n    for (let i = tree.children.length - 1; i >= 0; i--) {\n        let child = tree.children[i], pos = off + tree.positions[i];\n        let found = child instanceof Tree && pos < before && findState(lang, child, pos, startPos, before);\n        if (found)\n            return found;\n    }\n    return null;\n}\nfunction cutTree(lang, tree, from, to, inside) {\n    if (inside && from <= 0 && to >= tree.length)\n        return tree;\n    if (!inside && tree.type == lang.topNode)\n        inside = true;\n    for (let i = tree.children.length - 1; i >= 0; i--) {\n        let pos = tree.positions[i], child = tree.children[i], inner;\n        if (pos < to && child instanceof Tree) {\n            if (!(inner = cutTree(lang, child, from - pos, to - pos, inside)))\n                break;\n            return !inside ? inner\n                : new Tree(tree.type, tree.children.slice(0, i).concat(inner), tree.positions.slice(0, i + 1), pos + inner.length);\n        }\n    }\n    return null;\n}\nfunction findStartInFragments(lang, fragments, startPos, editorState) {\n    for (let f of fragments) {\n        let from = f.from + (f.openStart ? 25 : 0), to = f.to - (f.openEnd ? 25 : 0);\n        let found = from <= startPos && to > startPos && findState(lang, f.tree, 0 - f.offset, startPos, to), tree;\n        if (found && (tree = cutTree(lang, f.tree, startPos + f.offset, found.pos + f.offset, false)))\n            return { state: found.state, tree };\n    }\n    return { state: lang.streamParser.startState(editorState ? getIndentUnit(editorState) : 4), tree: Tree.empty };\n}\nclass Parse {\n    constructor(lang, input, fragments, ranges) {\n        this.lang = lang;\n        this.input = input;\n        this.fragments = fragments;\n        this.ranges = ranges;\n        this.stoppedAt = null;\n        this.chunks = [];\n        this.chunkPos = [];\n        this.chunk = [];\n        this.chunkReused = undefined;\n        this.rangeIndex = 0;\n        this.to = ranges[ranges.length - 1].to;\n        let context = ParseContext.get(), from = ranges[0].from;\n        let { state, tree } = findStartInFragments(lang, fragments, from, context === null || context === void 0 ? void 0 : context.state);\n        this.state = state;\n        this.parsedPos = this.chunkStart = from + tree.length;\n        for (let i = 0; i < tree.children.length; i++) {\n            this.chunks.push(tree.children[i]);\n            this.chunkPos.push(tree.positions[i]);\n        }\n        if (context && this.parsedPos < context.viewport.from - 100000 /* C.MaxDistanceBeforeViewport */) {\n            this.state = this.lang.streamParser.startState(getIndentUnit(context.state));\n            context.skipUntilInView(this.parsedPos, context.viewport.from);\n            this.parsedPos = context.viewport.from;\n        }\n        this.moveRangeIndex();\n    }\n    advance() {\n        let context = ParseContext.get();\n        let parseEnd = this.stoppedAt == null ? this.to : Math.min(this.to, this.stoppedAt);\n        let end = Math.min(parseEnd, this.chunkStart + 2048 /* C.ChunkSize */);\n        if (context)\n            end = Math.min(end, context.viewport.to);\n        while (this.parsedPos < end)\n            this.parseLine(context);\n        if (this.chunkStart < this.parsedPos)\n            this.finishChunk();\n        if (this.parsedPos >= parseEnd)\n            return this.finish();\n        if (context && this.parsedPos >= context.viewport.to) {\n            context.skipUntilInView(this.parsedPos, parseEnd);\n            return this.finish();\n        }\n        return null;\n    }\n    stopAt(pos) {\n        this.stoppedAt = pos;\n    }\n    lineAfter(pos) {\n        let chunk = this.input.chunk(pos);\n        if (!this.input.lineChunks) {\n            let eol = chunk.indexOf(\"\\n\");\n            if (eol > -1)\n                chunk = chunk.slice(0, eol);\n        }\n        else if (chunk == \"\\n\") {\n            chunk = \"\";\n        }\n        return pos + chunk.length <= this.to ? chunk : chunk.slice(0, this.to - pos);\n    }\n    nextLine() {\n        let from = this.parsedPos, line = this.lineAfter(from), end = from + line.length;\n        for (let index = this.rangeIndex;;) {\n            let rangeEnd = this.ranges[index].to;\n            if (rangeEnd >= end)\n                break;\n            line = line.slice(0, rangeEnd - (end - line.length));\n            index++;\n            if (index == this.ranges.length)\n                break;\n            let rangeStart = this.ranges[index].from;\n            let after = this.lineAfter(rangeStart);\n            line += after;\n            end = rangeStart + after.length;\n        }\n        return { line, end };\n    }\n    skipGapsTo(pos, offset, side) {\n        for (;;) {\n            let end = this.ranges[this.rangeIndex].to, offPos = pos + offset;\n            if (side > 0 ? end > offPos : end >= offPos)\n                break;\n            let start = this.ranges[++this.rangeIndex].from;\n            offset += start - end;\n        }\n        return offset;\n    }\n    moveRangeIndex() {\n        while (this.ranges[this.rangeIndex].to < this.parsedPos)\n            this.rangeIndex++;\n    }\n    emitToken(id, from, to, size, offset) {\n        if (this.ranges.length > 1) {\n            offset = this.skipGapsTo(from, offset, 1);\n            from += offset;\n            let len0 = this.chunk.length;\n            offset = this.skipGapsTo(to, offset, -1);\n            to += offset;\n            size += this.chunk.length - len0;\n        }\n        this.chunk.push(id, from, to, size);\n        return offset;\n    }\n    parseLine(context) {\n        let { line, end } = this.nextLine(), offset = 0, { streamParser } = this.lang;\n        let stream = new StringStream(line, context ? context.state.tabSize : 4, context ? getIndentUnit(context.state) : 2);\n        if (stream.eol()) {\n            streamParser.blankLine(this.state, stream.indentUnit);\n        }\n        else {\n            while (!stream.eol()) {\n                let token = readToken(streamParser.token, stream, this.state);\n                if (token)\n                    offset = this.emitToken(this.lang.tokenTable.resolve(token), this.parsedPos + stream.start, this.parsedPos + stream.pos, 4, offset);\n                if (stream.start > 10000 /* C.MaxLineLength */)\n                    break;\n            }\n        }\n        this.parsedPos = end;\n        this.moveRangeIndex();\n        if (this.parsedPos < this.to)\n            this.parsedPos++;\n    }\n    finishChunk() {\n        let tree = Tree.build({\n            buffer: this.chunk,\n            start: this.chunkStart,\n            length: this.parsedPos - this.chunkStart,\n            nodeSet,\n            topID: 0,\n            maxBufferLength: 2048 /* C.ChunkSize */,\n            reused: this.chunkReused\n        });\n        tree = new Tree(tree.type, tree.children, tree.positions, tree.length, [[this.lang.stateAfter, this.lang.streamParser.copyState(this.state)]]);\n        this.chunks.push(tree);\n        this.chunkPos.push(this.chunkStart - this.ranges[0].from);\n        this.chunk = [];\n        this.chunkReused = undefined;\n        this.chunkStart = this.parsedPos;\n    }\n    finish() {\n        return new Tree(this.lang.topNode, this.chunks, this.chunkPos, this.parsedPos - this.ranges[0].from).balance();\n    }\n}\nfunction readToken(token, stream, state) {\n    stream.start = stream.pos;\n    for (let i = 0; i < 10; i++) {\n        let result = token(stream, state);\n        if (stream.pos > stream.start)\n            return result;\n    }\n    throw new Error(\"Stream parser failed to advance stream.\");\n}\nconst noTokens = /*@__PURE__*/Object.create(null);\nconst typeArray = [NodeType.none];\nconst nodeSet = /*@__PURE__*/new NodeSet(typeArray);\nconst warned = [];\n// Cache of node types by name and tags\nconst byTag = /*@__PURE__*/Object.create(null);\nconst defaultTable = /*@__PURE__*/Object.create(null);\nfor (let [legacyName, name] of [\n    [\"variable\", \"variableName\"],\n    [\"variable-2\", \"variableName.special\"],\n    [\"string-2\", \"string.special\"],\n    [\"def\", \"variableName.definition\"],\n    [\"tag\", \"tagName\"],\n    [\"attribute\", \"attributeName\"],\n    [\"type\", \"typeName\"],\n    [\"builtin\", \"variableName.standard\"],\n    [\"qualifier\", \"modifier\"],\n    [\"error\", \"invalid\"],\n    [\"header\", \"heading\"],\n    [\"property\", \"propertyName\"]\n])\n    defaultTable[legacyName] = /*@__PURE__*/createTokenType(noTokens, name);\nclass TokenTable {\n    constructor(extra) {\n        this.extra = extra;\n        this.table = Object.assign(Object.create(null), defaultTable);\n    }\n    resolve(tag) {\n        return !tag ? 0 : this.table[tag] || (this.table[tag] = createTokenType(this.extra, tag));\n    }\n}\nconst defaultTokenTable = /*@__PURE__*/new TokenTable(noTokens);\nfunction warnForPart(part, msg) {\n    if (warned.indexOf(part) > -1)\n        return;\n    warned.push(part);\n    console.warn(msg);\n}\nfunction createTokenType(extra, tagStr) {\n    let tags$1 = [];\n    for (let name of tagStr.split(\" \")) {\n        let found = [];\n        for (let part of name.split(\".\")) {\n            let value = (extra[part] || tags[part]);\n            if (!value) {\n                warnForPart(part, `Unknown highlighting tag ${part}`);\n            }\n            else if (typeof value == \"function\") {\n                if (!found.length)\n                    warnForPart(part, `Modifier ${part} used at start of tag`);\n                else\n                    found = found.map(value);\n            }\n            else {\n                if (found.length)\n                    warnForPart(part, `Tag ${part} used as modifier`);\n                else\n                    found = Array.isArray(value) ? value : [value];\n            }\n        }\n        for (let tag of found)\n            tags$1.push(tag);\n    }\n    if (!tags$1.length)\n        return 0;\n    let name = tagStr.replace(/ /g, \"_\"), key = name + \" \" + tags$1.map(t => t.id);\n    let known = byTag[key];\n    if (known)\n        return known.id;\n    let type = byTag[key] = NodeType.define({\n        id: typeArray.length,\n        name,\n        props: [styleTags({ [name]: tags$1 })]\n    });\n    typeArray.push(type);\n    return type.id;\n}\nfunction docID(data) {\n    let type = NodeType.define({ id: typeArray.length, name: \"Document\", props: [languageDataProp.add(() => data)], top: true });\n    typeArray.push(type);\n    return type;\n}\n\nfunction buildForLine(line) {\n    return line.length <= 4096 && /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac\\ufb50-\\ufdff]/.test(line);\n}\nfunction textHasRTL(text) {\n    for (let i = text.iter(); !i.next().done;)\n        if (buildForLine(i.value))\n            return true;\n    return false;\n}\nfunction changeAddsRTL(change) {\n    let added = false;\n    change.iterChanges((fA, tA, fB, tB, ins) => {\n        if (!added && textHasRTL(ins))\n            added = true;\n    });\n    return added;\n}\nconst alwaysIsolate = /*@__PURE__*/Facet.define({ combine: values => values.some(x => x) });\n/**\nMake sure nodes\n[marked](https://lezer.codemirror.net/docs/ref/#common.NodeProp^isolate)\nas isolating for bidirectional text are rendered in a way that\nisolates them from the surrounding text.\n*/\nfunction bidiIsolates(options = {}) {\n    let extensions = [isolateMarks];\n    if (options.alwaysIsolate)\n        extensions.push(alwaysIsolate.of(true));\n    return extensions;\n}\nconst isolateMarks = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.always = view.state.facet(alwaysIsolate) ||\n            view.textDirection != Direction.LTR ||\n            view.state.facet(EditorView.perLineTextDirection);\n        this.hasRTL = !this.always && textHasRTL(view.state.doc);\n        this.tree = syntaxTree(view.state);\n        this.decorations = this.always || this.hasRTL ? buildDeco(view, this.tree, this.always) : Decoration.none;\n    }\n    update(update) {\n        let always = update.state.facet(alwaysIsolate) ||\n            update.view.textDirection != Direction.LTR ||\n            update.state.facet(EditorView.perLineTextDirection);\n        if (!always && !this.hasRTL && changeAddsRTL(update.changes))\n            this.hasRTL = true;\n        if (!always && !this.hasRTL)\n            return;\n        let tree = syntaxTree(update.state);\n        if (always != this.always || tree != this.tree || update.docChanged || update.viewportChanged) {\n            this.tree = tree;\n            this.always = always;\n            this.decorations = buildDeco(update.view, tree, always);\n        }\n    }\n}, {\n    provide: plugin => {\n        function access(view) {\n            var _a, _b;\n            return (_b = (_a = view.plugin(plugin)) === null || _a === void 0 ? void 0 : _a.decorations) !== null && _b !== void 0 ? _b : Decoration.none;\n        }\n        return [EditorView.outerDecorations.of(access),\n            Prec.lowest(EditorView.bidiIsolatedRanges.of(access))];\n    }\n});\nfunction buildDeco(view, tree, always) {\n    let deco = new RangeSetBuilder();\n    let ranges = view.visibleRanges;\n    if (!always)\n        ranges = clipRTLLines(ranges, view.state.doc);\n    for (let { from, to } of ranges) {\n        tree.iterate({\n            enter: node => {\n                let iso = node.type.prop(NodeProp.isolate);\n                if (iso)\n                    deco.add(node.from, node.to, marks[iso]);\n            },\n            from, to\n        });\n    }\n    return deco.finish();\n}\nfunction clipRTLLines(ranges, doc) {\n    let cur = doc.iter(), pos = 0, result = [], last = null;\n    for (let { from, to } of ranges) {\n        if (last && last.to > from) {\n            from = last.to;\n            if (from >= to)\n                continue;\n        }\n        if (pos + cur.value.length < from) {\n            cur.next(from - (pos + cur.value.length));\n            pos = from;\n        }\n        for (;;) {\n            let start = pos, end = pos + cur.value.length;\n            if (!cur.lineBreak && buildForLine(cur.value)) {\n                if (last && last.to > start - 10)\n                    last.to = Math.min(to, end);\n                else\n                    result.push(last = { from: start, to: Math.min(to, end) });\n            }\n            if (end >= to)\n                break;\n            pos = end;\n            cur.next();\n        }\n    }\n    return result;\n}\nconst marks = {\n    rtl: /*@__PURE__*/Decoration.mark({ class: \"cm-iso\", inclusive: true, attributes: { dir: \"rtl\" }, bidiIsolate: Direction.RTL }),\n    ltr: /*@__PURE__*/Decoration.mark({ class: \"cm-iso\", inclusive: true, attributes: { dir: \"ltr\" }, bidiIsolate: Direction.LTR }),\n    auto: /*@__PURE__*/Decoration.mark({ class: \"cm-iso\", inclusive: true, attributes: { dir: \"auto\" }, bidiIsolate: null })\n};\n\nexport { DocInput, HighlightStyle, IndentContext, LRLanguage, Language, LanguageDescription, LanguageSupport, ParseContext, StreamLanguage, StringStream, TreeIndentContext, bidiIsolates, bracketMatching, bracketMatchingHandle, codeFolding, continuedIndent, defaultHighlightStyle, defineLanguageFacet, delimitedIndent, ensureSyntaxTree, flatIndent, foldAll, foldCode, foldEffect, foldGutter, foldInside, foldKeymap, foldNodeProp, foldService, foldState, foldable, foldedRanges, forceParsing, getIndentUnit, getIndentation, highlightingFor, indentNodeProp, indentOnInput, indentRange, indentService, indentString, indentUnit, language, languageDataProp, matchBrackets, sublanguageProp, syntaxHighlighting, syntaxParserRunning, syntaxTree, syntaxTreeAvailable, toggleFold, unfoldAll, unfoldCode, unfoldEffect };\n","var cons = ['true', 'false', 'on', 'off', 'yes', 'no'];\nvar keywordRegex = new RegExp(\"\\\\b((\"+cons.join(\")|(\")+\"))$\", 'i');\n\nexport const yaml = {\n  name: \"yaml\",\n  token: function(stream, state) {\n    var ch = stream.peek();\n    var esc = state.escaped;\n    state.escaped = false;\n    /* comments */\n    if (ch == \"#\" && (stream.pos == 0 || /\\s/.test(stream.string.charAt(stream.pos - 1)))) {\n      stream.skipToEnd();\n      return \"comment\";\n    }\n\n    if (stream.match(/^('([^']|\\\\.)*'?|\"([^\"]|\\\\.)*\"?)/))\n      return \"string\";\n\n    if (state.literal && stream.indentation() > state.keyCol) {\n      stream.skipToEnd(); return \"string\";\n    } else if (state.literal) { state.literal = false; }\n    if (stream.sol()) {\n      state.keyCol = 0;\n      state.pair = false;\n      state.pairStart = false;\n      /* document start */\n      if(stream.match('---')) { return \"def\"; }\n      /* document end */\n      if (stream.match('...')) { return \"def\"; }\n      /* array list item */\n      if (stream.match(/^\\s*-\\s+/)) { return 'meta'; }\n    }\n    /* inline pairs/lists */\n    if (stream.match(/^(\\{|\\}|\\[|\\])/)) {\n      if (ch == '{')\n        state.inlinePairs++;\n      else if (ch == '}')\n        state.inlinePairs--;\n      else if (ch == '[')\n        state.inlineList++;\n      else\n        state.inlineList--;\n      return 'meta';\n    }\n\n    /* list separator */\n    if (state.inlineList > 0 && !esc && ch == ',') {\n      stream.next();\n      return 'meta';\n    }\n    /* pairs separator */\n    if (state.inlinePairs > 0 && !esc && ch == ',') {\n      state.keyCol = 0;\n      state.pair = false;\n      state.pairStart = false;\n      stream.next();\n      return 'meta';\n    }\n\n    /* start of value of a pair */\n    if (state.pairStart) {\n      /* block literals */\n      if (stream.match(/^\\s*(\\||\\>)\\s*/)) { state.literal = true; return 'meta'; };\n      /* references */\n      if (stream.match(/^\\s*(\\&|\\*)[a-z0-9\\._-]+\\b/i)) { return 'variable'; }\n      /* numbers */\n      if (state.inlinePairs == 0 && stream.match(/^\\s*-?[0-9\\.\\,]+\\s?$/)) { return 'number'; }\n      if (state.inlinePairs > 0 && stream.match(/^\\s*-?[0-9\\.\\,]+\\s?(?=(,|}))/)) { return 'number'; }\n      /* keywords */\n      if (stream.match(keywordRegex)) { return 'keyword'; }\n    }\n\n    /* pairs (associative arrays) -> key */\n    if (!state.pair && stream.match(/^\\s*(?:[,\\[\\]{}&*!|>'\"%@`][^\\s'\":]|[^,\\[\\]{}#&*!|>'\"%@`])[^#]*?(?=\\s*:($|\\s))/)) {\n      state.pair = true;\n      state.keyCol = stream.indentation();\n      return \"atom\";\n    }\n    if (state.pair && stream.match(/^:\\s*/)) { state.pairStart = true; return 'meta'; }\n\n    /* nothing found, continue */\n    state.pairStart = false;\n    state.escaped = (ch == '\\\\');\n    stream.next();\n    return null;\n  },\n  startState: function() {\n    return {\n      pair: false,\n      pairStart: false,\n      keyCol: 0,\n      inlinePairs: 0,\n      inlineList: 0,\n      literal: false,\n      escaped: false\n    };\n  },\n  languageData: {\n    commentTokens: {line: \"#\"}\n  }\n};\n","import { Annotation, Facet, combineConfig, StateField, Transaction, ChangeSet, ChangeDesc, EditorSelection, StateEffect, Text, findClusterBreak, countColumn, CharCategory } from '@codemirror/state';\nimport { EditorView, Direction } from '@codemirror/view';\nimport { IndentContext, getIndentation, indentString, matchBrackets, syntaxTree, getIndentUnit, indentUnit } from '@codemirror/language';\nimport { NodeProp } from '@lezer/common';\n\n/**\nComment or uncomment the current selection. Will use line comments\nif available, otherwise falling back to block comments.\n*/\nconst toggleComment = target => {\n    let { state } = target, line = state.doc.lineAt(state.selection.main.from), config = getConfig(target.state, line.from);\n    return config.line ? toggleLineComment(target) : config.block ? toggleBlockCommentByLine(target) : false;\n};\nfunction command(f, option) {\n    return ({ state, dispatch }) => {\n        if (state.readOnly)\n            return false;\n        let tr = f(option, state);\n        if (!tr)\n            return false;\n        dispatch(state.update(tr));\n        return true;\n    };\n}\n/**\nComment or uncomment the current selection using line comments.\nThe line comment syntax is taken from the\n[`commentTokens`](https://codemirror.net/6/docs/ref/#commands.CommentTokens) [language\ndata](https://codemirror.net/6/docs/ref/#state.EditorState.languageDataAt).\n*/\nconst toggleLineComment = /*@__PURE__*/command(changeLineComment, 0 /* CommentOption.Toggle */);\n/**\nComment the current selection using line comments.\n*/\nconst lineComment = /*@__PURE__*/command(changeLineComment, 1 /* CommentOption.Comment */);\n/**\nUncomment the current selection using line comments.\n*/\nconst lineUncomment = /*@__PURE__*/command(changeLineComment, 2 /* CommentOption.Uncomment */);\n/**\nComment or uncomment the current selection using block comments.\nThe block comment syntax is taken from the\n[`commentTokens`](https://codemirror.net/6/docs/ref/#commands.CommentTokens) [language\ndata](https://codemirror.net/6/docs/ref/#state.EditorState.languageDataAt).\n*/\nconst toggleBlockComment = /*@__PURE__*/command(changeBlockComment, 0 /* CommentOption.Toggle */);\n/**\nComment the current selection using block comments.\n*/\nconst blockComment = /*@__PURE__*/command(changeBlockComment, 1 /* CommentOption.Comment */);\n/**\nUncomment the current selection using block comments.\n*/\nconst blockUncomment = /*@__PURE__*/command(changeBlockComment, 2 /* CommentOption.Uncomment */);\n/**\nComment or uncomment the lines around the current selection using\nblock comments.\n*/\nconst toggleBlockCommentByLine = /*@__PURE__*/command((o, s) => changeBlockComment(o, s, selectedLineRanges(s)), 0 /* CommentOption.Toggle */);\nfunction getConfig(state, pos) {\n    let data = state.languageDataAt(\"commentTokens\", pos);\n    return data.length ? data[0] : {};\n}\nconst SearchMargin = 50;\n/**\nDetermines if the given range is block-commented in the given\nstate.\n*/\nfunction findBlockComment(state, { open, close }, from, to) {\n    let textBefore = state.sliceDoc(from - SearchMargin, from);\n    let textAfter = state.sliceDoc(to, to + SearchMargin);\n    let spaceBefore = /\\s*$/.exec(textBefore)[0].length, spaceAfter = /^\\s*/.exec(textAfter)[0].length;\n    let beforeOff = textBefore.length - spaceBefore;\n    if (textBefore.slice(beforeOff - open.length, beforeOff) == open &&\n        textAfter.slice(spaceAfter, spaceAfter + close.length) == close) {\n        return { open: { pos: from - spaceBefore, margin: spaceBefore && 1 },\n            close: { pos: to + spaceAfter, margin: spaceAfter && 1 } };\n    }\n    let startText, endText;\n    if (to - from <= 2 * SearchMargin) {\n        startText = endText = state.sliceDoc(from, to);\n    }\n    else {\n        startText = state.sliceDoc(from, from + SearchMargin);\n        endText = state.sliceDoc(to - SearchMargin, to);\n    }\n    let startSpace = /^\\s*/.exec(startText)[0].length, endSpace = /\\s*$/.exec(endText)[0].length;\n    let endOff = endText.length - endSpace - close.length;\n    if (startText.slice(startSpace, startSpace + open.length) == open &&\n        endText.slice(endOff, endOff + close.length) == close) {\n        return { open: { pos: from + startSpace + open.length,\n                margin: /\\s/.test(startText.charAt(startSpace + open.length)) ? 1 : 0 },\n            close: { pos: to - endSpace - close.length,\n                margin: /\\s/.test(endText.charAt(endOff - 1)) ? 1 : 0 } };\n    }\n    return null;\n}\nfunction selectedLineRanges(state) {\n    let ranges = [];\n    for (let r of state.selection.ranges) {\n        let fromLine = state.doc.lineAt(r.from);\n        let toLine = r.to <= fromLine.to ? fromLine : state.doc.lineAt(r.to);\n        let last = ranges.length - 1;\n        if (last >= 0 && ranges[last].to > fromLine.from)\n            ranges[last].to = toLine.to;\n        else\n            ranges.push({ from: fromLine.from + /^\\s*/.exec(fromLine.text)[0].length, to: toLine.to });\n    }\n    return ranges;\n}\n// Performs toggle, comment and uncomment of block comments in\n// languages that support them.\nfunction changeBlockComment(option, state, ranges = state.selection.ranges) {\n    let tokens = ranges.map(r => getConfig(state, r.from).block);\n    if (!tokens.every(c => c))\n        return null;\n    let comments = ranges.map((r, i) => findBlockComment(state, tokens[i], r.from, r.to));\n    if (option != 2 /* CommentOption.Uncomment */ && !comments.every(c => c)) {\n        return { changes: state.changes(ranges.map((range, i) => {\n                if (comments[i])\n                    return [];\n                return [{ from: range.from, insert: tokens[i].open + \" \" }, { from: range.to, insert: \" \" + tokens[i].close }];\n            })) };\n    }\n    else if (option != 1 /* CommentOption.Comment */ && comments.some(c => c)) {\n        let changes = [];\n        for (let i = 0, comment; i < comments.length; i++)\n            if (comment = comments[i]) {\n                let token = tokens[i], { open, close } = comment;\n                changes.push({ from: open.pos - token.open.length, to: open.pos + open.margin }, { from: close.pos - close.margin, to: close.pos + token.close.length });\n            }\n        return { changes };\n    }\n    return null;\n}\n// Performs toggle, comment and uncomment of line comments.\nfunction changeLineComment(option, state, ranges = state.selection.ranges) {\n    let lines = [];\n    let prevLine = -1;\n    for (let { from, to } of ranges) {\n        let startI = lines.length, minIndent = 1e9;\n        let token = getConfig(state, from).line;\n        if (!token)\n            continue;\n        for (let pos = from; pos <= to;) {\n            let line = state.doc.lineAt(pos);\n            if (line.from > prevLine && (from == to || to > line.from)) {\n                prevLine = line.from;\n                let indent = /^\\s*/.exec(line.text)[0].length;\n                let empty = indent == line.length;\n                let comment = line.text.slice(indent, indent + token.length) == token ? indent : -1;\n                if (indent < line.text.length && indent < minIndent)\n                    minIndent = indent;\n                lines.push({ line, comment, token, indent, empty, single: false });\n            }\n            pos = line.to + 1;\n        }\n        if (minIndent < 1e9)\n            for (let i = startI; i < lines.length; i++)\n                if (lines[i].indent < lines[i].line.text.length)\n                    lines[i].indent = minIndent;\n        if (lines.length == startI + 1)\n            lines[startI].single = true;\n    }\n    if (option != 2 /* CommentOption.Uncomment */ && lines.some(l => l.comment < 0 && (!l.empty || l.single))) {\n        let changes = [];\n        for (let { line, token, indent, empty, single } of lines)\n            if (single || !empty)\n                changes.push({ from: line.from + indent, insert: token + \" \" });\n        let changeSet = state.changes(changes);\n        return { changes: changeSet, selection: state.selection.map(changeSet, 1) };\n    }\n    else if (option != 1 /* CommentOption.Comment */ && lines.some(l => l.comment >= 0)) {\n        let changes = [];\n        for (let { line, comment, token } of lines)\n            if (comment >= 0) {\n                let from = line.from + comment, to = from + token.length;\n                if (line.text[to - line.from] == \" \")\n                    to++;\n                changes.push({ from, to });\n            }\n        return { changes };\n    }\n    return null;\n}\n\nconst fromHistory = /*@__PURE__*/Annotation.define();\n/**\nTransaction annotation that will prevent that transaction from\nbeing combined with other transactions in the undo history. Given\n`\"before\"`, it'll prevent merging with previous transactions. With\n`\"after\"`, subsequent transactions won't be combined with this\none. With `\"full\"`, the transaction is isolated on both sides.\n*/\nconst isolateHistory = /*@__PURE__*/Annotation.define();\n/**\nThis facet provides a way to register functions that, given a\ntransaction, provide a set of effects that the history should\nstore when inverting the transaction. This can be used to\nintegrate some kinds of effects in the history, so that they can\nbe undone (and redone again).\n*/\nconst invertedEffects = /*@__PURE__*/Facet.define();\nconst historyConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            minDepth: 100,\n            newGroupDelay: 500,\n            joinToEvent: (_t, isAdjacent) => isAdjacent,\n        }, {\n            minDepth: Math.max,\n            newGroupDelay: Math.min,\n            joinToEvent: (a, b) => (tr, adj) => a(tr, adj) || b(tr, adj)\n        });\n    }\n});\nconst historyField_ = /*@__PURE__*/StateField.define({\n    create() {\n        return HistoryState.empty;\n    },\n    update(state, tr) {\n        let config = tr.state.facet(historyConfig);\n        let fromHist = tr.annotation(fromHistory);\n        if (fromHist) {\n            let item = HistEvent.fromTransaction(tr, fromHist.selection), from = fromHist.side;\n            let other = from == 0 /* BranchName.Done */ ? state.undone : state.done;\n            if (item)\n                other = updateBranch(other, other.length, config.minDepth, item);\n            else\n                other = addSelection(other, tr.startState.selection);\n            return new HistoryState(from == 0 /* BranchName.Done */ ? fromHist.rest : other, from == 0 /* BranchName.Done */ ? other : fromHist.rest);\n        }\n        let isolate = tr.annotation(isolateHistory);\n        if (isolate == \"full\" || isolate == \"before\")\n            state = state.isolate();\n        if (tr.annotation(Transaction.addToHistory) === false)\n            return !tr.changes.empty ? state.addMapping(tr.changes.desc) : state;\n        let event = HistEvent.fromTransaction(tr);\n        let time = tr.annotation(Transaction.time), userEvent = tr.annotation(Transaction.userEvent);\n        if (event)\n            state = state.addChanges(event, time, userEvent, config, tr);\n        else if (tr.selection)\n            state = state.addSelection(tr.startState.selection, time, userEvent, config.newGroupDelay);\n        if (isolate == \"full\" || isolate == \"after\")\n            state = state.isolate();\n        return state;\n    },\n    toJSON(value) {\n        return { done: value.done.map(e => e.toJSON()), undone: value.undone.map(e => e.toJSON()) };\n    },\n    fromJSON(json) {\n        return new HistoryState(json.done.map(HistEvent.fromJSON), json.undone.map(HistEvent.fromJSON));\n    }\n});\n/**\nCreate a history extension with the given configuration.\n*/\nfunction history(config = {}) {\n    return [\n        historyField_,\n        historyConfig.of(config),\n        EditorView.domEventHandlers({\n            beforeinput(e, view) {\n                let command = e.inputType == \"historyUndo\" ? undo : e.inputType == \"historyRedo\" ? redo : null;\n                if (!command)\n                    return false;\n                e.preventDefault();\n                return command(view);\n            }\n        })\n    ];\n}\n/**\nThe state field used to store the history data. Should probably\nonly be used when you want to\n[serialize](https://codemirror.net/6/docs/ref/#state.EditorState.toJSON) or\n[deserialize](https://codemirror.net/6/docs/ref/#state.EditorState^fromJSON) state objects in a way\nthat preserves history.\n*/\nconst historyField = historyField_;\nfunction cmd(side, selection) {\n    return function ({ state, dispatch }) {\n        if (!selection && state.readOnly)\n            return false;\n        let historyState = state.field(historyField_, false);\n        if (!historyState)\n            return false;\n        let tr = historyState.pop(side, state, selection);\n        if (!tr)\n            return false;\n        dispatch(tr);\n        return true;\n    };\n}\n/**\nUndo a single group of history events. Returns false if no group\nwas available.\n*/\nconst undo = /*@__PURE__*/cmd(0 /* BranchName.Done */, false);\n/**\nRedo a group of history events. Returns false if no group was\navailable.\n*/\nconst redo = /*@__PURE__*/cmd(1 /* BranchName.Undone */, false);\n/**\nUndo a change or selection change.\n*/\nconst undoSelection = /*@__PURE__*/cmd(0 /* BranchName.Done */, true);\n/**\nRedo a change or selection change.\n*/\nconst redoSelection = /*@__PURE__*/cmd(1 /* BranchName.Undone */, true);\nfunction depth(side) {\n    return function (state) {\n        let histState = state.field(historyField_, false);\n        if (!histState)\n            return 0;\n        let branch = side == 0 /* BranchName.Done */ ? histState.done : histState.undone;\n        return branch.length - (branch.length && !branch[0].changes ? 1 : 0);\n    };\n}\n/**\nThe amount of undoable change events available in a given state.\n*/\nconst undoDepth = /*@__PURE__*/depth(0 /* BranchName.Done */);\n/**\nThe amount of redoable change events available in a given state.\n*/\nconst redoDepth = /*@__PURE__*/depth(1 /* BranchName.Undone */);\n// History events store groups of changes or effects that need to be\n// undone/redone together.\nclass HistEvent {\n    constructor(\n    // The changes in this event. Normal events hold at least one\n    // change or effect. But it may be necessary to store selection\n    // events before the first change, in which case a special type of\n    // instance is created which doesn't hold any changes, with\n    // changes == startSelection == undefined\n    changes, \n    // The effects associated with this event\n    effects, \n    // Accumulated mapping (from addToHistory==false) that should be\n    // applied to events below this one.\n    mapped, \n    // The selection before this event\n    startSelection, \n    // Stores selection changes after this event, to be used for\n    // selection undo/redo.\n    selectionsAfter) {\n        this.changes = changes;\n        this.effects = effects;\n        this.mapped = mapped;\n        this.startSelection = startSelection;\n        this.selectionsAfter = selectionsAfter;\n    }\n    setSelAfter(after) {\n        return new HistEvent(this.changes, this.effects, this.mapped, this.startSelection, after);\n    }\n    toJSON() {\n        var _a, _b, _c;\n        return {\n            changes: (_a = this.changes) === null || _a === void 0 ? void 0 : _a.toJSON(),\n            mapped: (_b = this.mapped) === null || _b === void 0 ? void 0 : _b.toJSON(),\n            startSelection: (_c = this.startSelection) === null || _c === void 0 ? void 0 : _c.toJSON(),\n            selectionsAfter: this.selectionsAfter.map(s => s.toJSON())\n        };\n    }\n    static fromJSON(json) {\n        return new HistEvent(json.changes && ChangeSet.fromJSON(json.changes), [], json.mapped && ChangeDesc.fromJSON(json.mapped), json.startSelection && EditorSelection.fromJSON(json.startSelection), json.selectionsAfter.map(EditorSelection.fromJSON));\n    }\n    // This does not check `addToHistory` and such, it assumes the\n    // transaction needs to be converted to an item. Returns null when\n    // there are no changes or effects in the transaction.\n    static fromTransaction(tr, selection) {\n        let effects = none;\n        for (let invert of tr.startState.facet(invertedEffects)) {\n            let result = invert(tr);\n            if (result.length)\n                effects = effects.concat(result);\n        }\n        if (!effects.length && tr.changes.empty)\n            return null;\n        return new HistEvent(tr.changes.invert(tr.startState.doc), effects, undefined, selection || tr.startState.selection, none);\n    }\n    static selection(selections) {\n        return new HistEvent(undefined, none, undefined, undefined, selections);\n    }\n}\nfunction updateBranch(branch, to, maxLen, newEvent) {\n    let start = to + 1 > maxLen + 20 ? to - maxLen - 1 : 0;\n    let newBranch = branch.slice(start, to);\n    newBranch.push(newEvent);\n    return newBranch;\n}\nfunction isAdjacent(a, b) {\n    let ranges = [], isAdjacent = false;\n    a.iterChangedRanges((f, t) => ranges.push(f, t));\n    b.iterChangedRanges((_f, _t, f, t) => {\n        for (let i = 0; i < ranges.length;) {\n            let from = ranges[i++], to = ranges[i++];\n            if (t >= from && f <= to)\n                isAdjacent = true;\n        }\n    });\n    return isAdjacent;\n}\nfunction eqSelectionShape(a, b) {\n    return a.ranges.length == b.ranges.length &&\n        a.ranges.filter((r, i) => r.empty != b.ranges[i].empty).length === 0;\n}\nfunction conc(a, b) {\n    return !a.length ? b : !b.length ? a : a.concat(b);\n}\nconst none = [];\nconst MaxSelectionsPerEvent = 200;\nfunction addSelection(branch, selection) {\n    if (!branch.length) {\n        return [HistEvent.selection([selection])];\n    }\n    else {\n        let lastEvent = branch[branch.length - 1];\n        let sels = lastEvent.selectionsAfter.slice(Math.max(0, lastEvent.selectionsAfter.length - MaxSelectionsPerEvent));\n        if (sels.length && sels[sels.length - 1].eq(selection))\n            return branch;\n        sels.push(selection);\n        return updateBranch(branch, branch.length - 1, 1e9, lastEvent.setSelAfter(sels));\n    }\n}\n// Assumes the top item has one or more selectionAfter values\nfunction popSelection(branch) {\n    let last = branch[branch.length - 1];\n    let newBranch = branch.slice();\n    newBranch[branch.length - 1] = last.setSelAfter(last.selectionsAfter.slice(0, last.selectionsAfter.length - 1));\n    return newBranch;\n}\n// Add a mapping to the top event in the given branch. If this maps\n// away all the changes and effects in that item, drop it and\n// propagate the mapping to the next item.\nfunction addMappingToBranch(branch, mapping) {\n    if (!branch.length)\n        return branch;\n    let length = branch.length, selections = none;\n    while (length) {\n        let event = mapEvent(branch[length - 1], mapping, selections);\n        if (event.changes && !event.changes.empty || event.effects.length) { // Event survived mapping\n            let result = branch.slice(0, length);\n            result[length - 1] = event;\n            return result;\n        }\n        else { // Drop this event, since there's no changes or effects left\n            mapping = event.mapped;\n            length--;\n            selections = event.selectionsAfter;\n        }\n    }\n    return selections.length ? [HistEvent.selection(selections)] : none;\n}\nfunction mapEvent(event, mapping, extraSelections) {\n    let selections = conc(event.selectionsAfter.length ? event.selectionsAfter.map(s => s.map(mapping)) : none, extraSelections);\n    // Change-less events don't store mappings (they are always the last event in a branch)\n    if (!event.changes)\n        return HistEvent.selection(selections);\n    let mappedChanges = event.changes.map(mapping), before = mapping.mapDesc(event.changes, true);\n    let fullMapping = event.mapped ? event.mapped.composeDesc(before) : before;\n    return new HistEvent(mappedChanges, StateEffect.mapEffects(event.effects, mapping), fullMapping, event.startSelection.map(before), selections);\n}\nconst joinableUserEvent = /^(input\\.type|delete)($|\\.)/;\nclass HistoryState {\n    constructor(done, undone, prevTime = 0, prevUserEvent = undefined) {\n        this.done = done;\n        this.undone = undone;\n        this.prevTime = prevTime;\n        this.prevUserEvent = prevUserEvent;\n    }\n    isolate() {\n        return this.prevTime ? new HistoryState(this.done, this.undone) : this;\n    }\n    addChanges(event, time, userEvent, config, tr) {\n        let done = this.done, lastEvent = done[done.length - 1];\n        if (lastEvent && lastEvent.changes && !lastEvent.changes.empty && event.changes &&\n            (!userEvent || joinableUserEvent.test(userEvent)) &&\n            ((!lastEvent.selectionsAfter.length &&\n                time - this.prevTime < config.newGroupDelay &&\n                config.joinToEvent(tr, isAdjacent(lastEvent.changes, event.changes))) ||\n                // For compose (but not compose.start) events, always join with previous event\n                userEvent == \"input.type.compose\")) {\n            done = updateBranch(done, done.length - 1, config.minDepth, new HistEvent(event.changes.compose(lastEvent.changes), conc(event.effects, lastEvent.effects), lastEvent.mapped, lastEvent.startSelection, none));\n        }\n        else {\n            done = updateBranch(done, done.length, config.minDepth, event);\n        }\n        return new HistoryState(done, none, time, userEvent);\n    }\n    addSelection(selection, time, userEvent, newGroupDelay) {\n        let last = this.done.length ? this.done[this.done.length - 1].selectionsAfter : none;\n        if (last.length > 0 &&\n            time - this.prevTime < newGroupDelay &&\n            userEvent == this.prevUserEvent && userEvent && /^select($|\\.)/.test(userEvent) &&\n            eqSelectionShape(last[last.length - 1], selection))\n            return this;\n        return new HistoryState(addSelection(this.done, selection), this.undone, time, userEvent);\n    }\n    addMapping(mapping) {\n        return new HistoryState(addMappingToBranch(this.done, mapping), addMappingToBranch(this.undone, mapping), this.prevTime, this.prevUserEvent);\n    }\n    pop(side, state, onlySelection) {\n        let branch = side == 0 /* BranchName.Done */ ? this.done : this.undone;\n        if (branch.length == 0)\n            return null;\n        let event = branch[branch.length - 1], selection = event.selectionsAfter[0] || state.selection;\n        if (onlySelection && event.selectionsAfter.length) {\n            return state.update({\n                selection: event.selectionsAfter[event.selectionsAfter.length - 1],\n                annotations: fromHistory.of({ side, rest: popSelection(branch), selection }),\n                userEvent: side == 0 /* BranchName.Done */ ? \"select.undo\" : \"select.redo\",\n                scrollIntoView: true\n            });\n        }\n        else if (!event.changes) {\n            return null;\n        }\n        else {\n            let rest = branch.length == 1 ? none : branch.slice(0, branch.length - 1);\n            if (event.mapped)\n                rest = addMappingToBranch(rest, event.mapped);\n            return state.update({\n                changes: event.changes,\n                selection: event.startSelection,\n                effects: event.effects,\n                annotations: fromHistory.of({ side, rest, selection }),\n                filter: false,\n                userEvent: side == 0 /* BranchName.Done */ ? \"undo\" : \"redo\",\n                scrollIntoView: true\n            });\n        }\n    }\n}\nHistoryState.empty = /*@__PURE__*/new HistoryState(none, none);\n/**\nDefault key bindings for the undo history.\n\n- Mod-z: [`undo`](https://codemirror.net/6/docs/ref/#commands.undo).\n- Mod-y (Mod-Shift-z on macOS) + Ctrl-Shift-z on Linux: [`redo`](https://codemirror.net/6/docs/ref/#commands.redo).\n- Mod-u: [`undoSelection`](https://codemirror.net/6/docs/ref/#commands.undoSelection).\n- Alt-u (Mod-Shift-u on macOS): [`redoSelection`](https://codemirror.net/6/docs/ref/#commands.redoSelection).\n*/\nconst historyKeymap = [\n    { key: \"Mod-z\", run: undo, preventDefault: true },\n    { key: \"Mod-y\", mac: \"Mod-Shift-z\", run: redo, preventDefault: true },\n    { linux: \"Ctrl-Shift-z\", run: redo, preventDefault: true },\n    { key: \"Mod-u\", run: undoSelection, preventDefault: true },\n    { key: \"Alt-u\", mac: \"Mod-Shift-u\", run: redoSelection, preventDefault: true }\n];\n\nfunction updateSel(sel, by) {\n    return EditorSelection.create(sel.ranges.map(by), sel.mainIndex);\n}\nfunction setSel(state, selection) {\n    return state.update({ selection, scrollIntoView: true, userEvent: \"select\" });\n}\nfunction moveSel({ state, dispatch }, how) {\n    let selection = updateSel(state.selection, how);\n    if (selection.eq(state.selection, true))\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n}\nfunction rangeEnd(range, forward) {\n    return EditorSelection.cursor(forward ? range.to : range.from);\n}\nfunction cursorByChar(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveByChar(range, forward) : rangeEnd(range, forward));\n}\nfunction ltrAtCursor(view) {\n    return view.textDirectionAt(view.state.selection.main.head) == Direction.LTR;\n}\n/**\nMove the selection one character to the left (which is backward in\nleft-to-right text, forward in right-to-left text).\n*/\nconst cursorCharLeft = view => cursorByChar(view, !ltrAtCursor(view));\n/**\nMove the selection one character to the right.\n*/\nconst cursorCharRight = view => cursorByChar(view, ltrAtCursor(view));\n/**\nMove the selection one character forward.\n*/\nconst cursorCharForward = view => cursorByChar(view, true);\n/**\nMove the selection one character backward.\n*/\nconst cursorCharBackward = view => cursorByChar(view, false);\nfunction cursorByGroup(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveByGroup(range, forward) : rangeEnd(range, forward));\n}\n/**\nMove the selection to the left across one group of word or\nnon-word (but also non-space) characters.\n*/\nconst cursorGroupLeft = view => cursorByGroup(view, !ltrAtCursor(view));\n/**\nMove the selection one group to the right.\n*/\nconst cursorGroupRight = view => cursorByGroup(view, ltrAtCursor(view));\n/**\nMove the selection one group forward.\n*/\nconst cursorGroupForward = view => cursorByGroup(view, true);\n/**\nMove the selection one group backward.\n*/\nconst cursorGroupBackward = view => cursorByGroup(view, false);\nconst segmenter = typeof Intl != \"undefined\" && Intl.Segmenter ?\n    /*@__PURE__*/new (Intl.Segmenter)(undefined, { granularity: \"word\" }) : null;\nfunction moveBySubword(view, range, forward) {\n    let categorize = view.state.charCategorizer(range.from);\n    let cat = CharCategory.Space, pos = range.from, steps = 0;\n    let done = false, sawUpper = false, sawLower = false;\n    let step = (next) => {\n        if (done)\n            return false;\n        pos += forward ? next.length : -next.length;\n        let nextCat = categorize(next), ahead;\n        if (nextCat == CharCategory.Word && next.charCodeAt(0) < 128 && /[\\W_]/.test(next))\n            nextCat = -1; // Treat word punctuation specially\n        if (cat == CharCategory.Space)\n            cat = nextCat;\n        if (cat != nextCat)\n            return false;\n        if (cat == CharCategory.Word) {\n            if (next.toLowerCase() == next) {\n                if (!forward && sawUpper)\n                    return false;\n                sawLower = true;\n            }\n            else if (sawLower) {\n                if (forward)\n                    return false;\n                done = true;\n            }\n            else {\n                if (sawUpper && forward && categorize(ahead = view.state.sliceDoc(pos, pos + 1)) == CharCategory.Word &&\n                    ahead.toLowerCase() == ahead)\n                    return false;\n                sawUpper = true;\n            }\n        }\n        steps++;\n        return true;\n    };\n    let end = view.moveByChar(range, forward, start => {\n        step(start);\n        return step;\n    });\n    if (segmenter && cat == CharCategory.Word && end.from == range.from + steps * (forward ? 1 : -1)) {\n        let from = Math.min(range.head, end.head), to = Math.max(range.head, end.head);\n        let skipped = view.state.sliceDoc(from, to);\n        if (skipped.length > 1 && /[\\u4E00-\\uffff]/.test(skipped)) {\n            let segments = Array.from(segmenter.segment(skipped));\n            if (segments.length > 1) {\n                if (forward)\n                    return EditorSelection.cursor(range.head + segments[1].index, -1);\n                return EditorSelection.cursor(end.head + segments[segments.length - 1].index, 1);\n            }\n        }\n    }\n    return end;\n}\nfunction cursorBySubword(view, forward) {\n    return moveSel(view, range => range.empty ? moveBySubword(view, range, forward) : rangeEnd(range, forward));\n}\n/**\nMove the selection one group or camel-case subword forward.\n*/\nconst cursorSubwordForward = view => cursorBySubword(view, true);\n/**\nMove the selection one group or camel-case subword backward.\n*/\nconst cursorSubwordBackward = view => cursorBySubword(view, false);\nfunction interestingNode(state, node, bracketProp) {\n    if (node.type.prop(bracketProp))\n        return true;\n    let len = node.to - node.from;\n    return len && (len > 2 || /[^\\s,.;:]/.test(state.sliceDoc(node.from, node.to))) || node.firstChild;\n}\nfunction moveBySyntax(state, start, forward) {\n    let pos = syntaxTree(state).resolveInner(start.head);\n    let bracketProp = forward ? NodeProp.closedBy : NodeProp.openedBy;\n    // Scan forward through child nodes to see if there's an interesting\n    // node ahead.\n    for (let at = start.head;;) {\n        let next = forward ? pos.childAfter(at) : pos.childBefore(at);\n        if (!next)\n            break;\n        if (interestingNode(state, next, bracketProp))\n            pos = next;\n        else\n            at = forward ? next.to : next.from;\n    }\n    let bracket = pos.type.prop(bracketProp), match, newPos;\n    if (bracket && (match = forward ? matchBrackets(state, pos.from, 1) : matchBrackets(state, pos.to, -1)) && match.matched)\n        newPos = forward ? match.end.to : match.end.from;\n    else\n        newPos = forward ? pos.to : pos.from;\n    return EditorSelection.cursor(newPos, forward ? -1 : 1);\n}\n/**\nMove the cursor over the next syntactic element to the left.\n*/\nconst cursorSyntaxLeft = view => moveSel(view, range => moveBySyntax(view.state, range, !ltrAtCursor(view)));\n/**\nMove the cursor over the next syntactic element to the right.\n*/\nconst cursorSyntaxRight = view => moveSel(view, range => moveBySyntax(view.state, range, ltrAtCursor(view)));\nfunction cursorByLine(view, forward) {\n    return moveSel(view, range => {\n        if (!range.empty)\n            return rangeEnd(range, forward);\n        let moved = view.moveVertically(range, forward);\n        return moved.head != range.head ? moved : view.moveToLineBoundary(range, forward);\n    });\n}\n/**\nMove the selection one line up.\n*/\nconst cursorLineUp = view => cursorByLine(view, false);\n/**\nMove the selection one line down.\n*/\nconst cursorLineDown = view => cursorByLine(view, true);\nfunction pageInfo(view) {\n    let selfScroll = view.scrollDOM.clientHeight < view.scrollDOM.scrollHeight - 2;\n    let marginTop = 0, marginBottom = 0, height;\n    if (selfScroll) {\n        for (let source of view.state.facet(EditorView.scrollMargins)) {\n            let margins = source(view);\n            if (margins === null || margins === void 0 ? void 0 : margins.top)\n                marginTop = Math.max(margins === null || margins === void 0 ? void 0 : margins.top, marginTop);\n            if (margins === null || margins === void 0 ? void 0 : margins.bottom)\n                marginBottom = Math.max(margins === null || margins === void 0 ? void 0 : margins.bottom, marginBottom);\n        }\n        height = view.scrollDOM.clientHeight - marginTop - marginBottom;\n    }\n    else {\n        height = (view.dom.ownerDocument.defaultView || window).innerHeight;\n    }\n    return { marginTop, marginBottom, selfScroll,\n        height: Math.max(view.defaultLineHeight, height - 5) };\n}\nfunction cursorByPage(view, forward) {\n    let page = pageInfo(view);\n    let { state } = view, selection = updateSel(state.selection, range => {\n        return range.empty ? view.moveVertically(range, forward, page.height)\n            : rangeEnd(range, forward);\n    });\n    if (selection.eq(state.selection))\n        return false;\n    let effect;\n    if (page.selfScroll) {\n        let startPos = view.coordsAtPos(state.selection.main.head);\n        let scrollRect = view.scrollDOM.getBoundingClientRect();\n        let scrollTop = scrollRect.top + page.marginTop, scrollBottom = scrollRect.bottom - page.marginBottom;\n        if (startPos && startPos.top > scrollTop && startPos.bottom < scrollBottom)\n            effect = EditorView.scrollIntoView(selection.main.head, { y: \"start\", yMargin: startPos.top - scrollTop });\n    }\n    view.dispatch(setSel(state, selection), { effects: effect });\n    return true;\n}\n/**\nMove the selection one page up.\n*/\nconst cursorPageUp = view => cursorByPage(view, false);\n/**\nMove the selection one page down.\n*/\nconst cursorPageDown = view => cursorByPage(view, true);\nfunction moveByLineBoundary(view, start, forward) {\n    let line = view.lineBlockAt(start.head), moved = view.moveToLineBoundary(start, forward);\n    if (moved.head == start.head && moved.head != (forward ? line.to : line.from))\n        moved = view.moveToLineBoundary(start, forward, false);\n    if (!forward && moved.head == line.from && line.length) {\n        let space = /^\\s*/.exec(view.state.sliceDoc(line.from, Math.min(line.from + 100, line.to)))[0].length;\n        if (space && start.head != line.from + space)\n            moved = EditorSelection.cursor(line.from + space);\n    }\n    return moved;\n}\n/**\nMove the selection to the next line wrap point, or to the end of\nthe line if there isn't one left on this line.\n*/\nconst cursorLineBoundaryForward = view => moveSel(view, range => moveByLineBoundary(view, range, true));\n/**\nMove the selection to previous line wrap point, or failing that to\nthe start of the line. If the line is indented, and the cursor\nisn't already at the end of the indentation, this will move to the\nend of the indentation instead of the start of the line.\n*/\nconst cursorLineBoundaryBackward = view => moveSel(view, range => moveByLineBoundary(view, range, false));\n/**\nMove the selection one line wrap point to the left.\n*/\nconst cursorLineBoundaryLeft = view => moveSel(view, range => moveByLineBoundary(view, range, !ltrAtCursor(view)));\n/**\nMove the selection one line wrap point to the right.\n*/\nconst cursorLineBoundaryRight = view => moveSel(view, range => moveByLineBoundary(view, range, ltrAtCursor(view)));\n/**\nMove the selection to the start of the line.\n*/\nconst cursorLineStart = view => moveSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).from, 1));\n/**\nMove the selection to the end of the line.\n*/\nconst cursorLineEnd = view => moveSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).to, -1));\nfunction toMatchingBracket(state, dispatch, extend) {\n    let found = false, selection = updateSel(state.selection, range => {\n        let matching = matchBrackets(state, range.head, -1)\n            || matchBrackets(state, range.head, 1)\n            || (range.head > 0 && matchBrackets(state, range.head - 1, 1))\n            || (range.head < state.doc.length && matchBrackets(state, range.head + 1, -1));\n        if (!matching || !matching.end)\n            return range;\n        found = true;\n        let head = matching.start.from == range.head ? matching.end.to : matching.end.from;\n        return extend ? EditorSelection.range(range.anchor, head) : EditorSelection.cursor(head);\n    });\n    if (!found)\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n}\n/**\nMove the selection to the bracket matching the one it is currently\non, if any.\n*/\nconst cursorMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, false);\n/**\nExtend the selection to the bracket matching the one the selection\nhead is currently on, if any.\n*/\nconst selectMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, true);\nfunction extendSel(view, how) {\n    let selection = updateSel(view.state.selection, range => {\n        let head = how(range);\n        return EditorSelection.range(range.anchor, head.head, head.goalColumn, head.bidiLevel || undefined);\n    });\n    if (selection.eq(view.state.selection))\n        return false;\n    view.dispatch(setSel(view.state, selection));\n    return true;\n}\nfunction selectByChar(view, forward) {\n    return extendSel(view, range => view.moveByChar(range, forward));\n}\n/**\nMove the selection head one character to the left, while leaving\nthe anchor in place.\n*/\nconst selectCharLeft = view => selectByChar(view, !ltrAtCursor(view));\n/**\nMove the selection head one character to the right.\n*/\nconst selectCharRight = view => selectByChar(view, ltrAtCursor(view));\n/**\nMove the selection head one character forward.\n*/\nconst selectCharForward = view => selectByChar(view, true);\n/**\nMove the selection head one character backward.\n*/\nconst selectCharBackward = view => selectByChar(view, false);\nfunction selectByGroup(view, forward) {\n    return extendSel(view, range => view.moveByGroup(range, forward));\n}\n/**\nMove the selection head one [group](https://codemirror.net/6/docs/ref/#commands.cursorGroupLeft) to\nthe left.\n*/\nconst selectGroupLeft = view => selectByGroup(view, !ltrAtCursor(view));\n/**\nMove the selection head one group to the right.\n*/\nconst selectGroupRight = view => selectByGroup(view, ltrAtCursor(view));\n/**\nMove the selection head one group forward.\n*/\nconst selectGroupForward = view => selectByGroup(view, true);\n/**\nMove the selection head one group backward.\n*/\nconst selectGroupBackward = view => selectByGroup(view, false);\nfunction selectBySubword(view, forward) {\n    return extendSel(view, range => moveBySubword(view, range, forward));\n}\n/**\nMove the selection head one group or camel-case subword forward.\n*/\nconst selectSubwordForward = view => selectBySubword(view, true);\n/**\nMove the selection head one group or subword backward.\n*/\nconst selectSubwordBackward = view => selectBySubword(view, false);\n/**\nMove the selection head over the next syntactic element to the left.\n*/\nconst selectSyntaxLeft = view => extendSel(view, range => moveBySyntax(view.state, range, !ltrAtCursor(view)));\n/**\nMove the selection head over the next syntactic element to the right.\n*/\nconst selectSyntaxRight = view => extendSel(view, range => moveBySyntax(view.state, range, ltrAtCursor(view)));\nfunction selectByLine(view, forward) {\n    return extendSel(view, range => view.moveVertically(range, forward));\n}\n/**\nMove the selection head one line up.\n*/\nconst selectLineUp = view => selectByLine(view, false);\n/**\nMove the selection head one line down.\n*/\nconst selectLineDown = view => selectByLine(view, true);\nfunction selectByPage(view, forward) {\n    return extendSel(view, range => view.moveVertically(range, forward, pageInfo(view).height));\n}\n/**\nMove the selection head one page up.\n*/\nconst selectPageUp = view => selectByPage(view, false);\n/**\nMove the selection head one page down.\n*/\nconst selectPageDown = view => selectByPage(view, true);\n/**\nMove the selection head to the next line boundary.\n*/\nconst selectLineBoundaryForward = view => extendSel(view, range => moveByLineBoundary(view, range, true));\n/**\nMove the selection head to the previous line boundary.\n*/\nconst selectLineBoundaryBackward = view => extendSel(view, range => moveByLineBoundary(view, range, false));\n/**\nMove the selection head one line boundary to the left.\n*/\nconst selectLineBoundaryLeft = view => extendSel(view, range => moveByLineBoundary(view, range, !ltrAtCursor(view)));\n/**\nMove the selection head one line boundary to the right.\n*/\nconst selectLineBoundaryRight = view => extendSel(view, range => moveByLineBoundary(view, range, ltrAtCursor(view)));\n/**\nMove the selection head to the start of the line.\n*/\nconst selectLineStart = view => extendSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).from));\n/**\nMove the selection head to the end of the line.\n*/\nconst selectLineEnd = view => extendSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).to));\n/**\nMove the selection to the start of the document.\n*/\nconst cursorDocStart = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: 0 }));\n    return true;\n};\n/**\nMove the selection to the end of the document.\n*/\nconst cursorDocEnd = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.doc.length }));\n    return true;\n};\n/**\nMove the selection head to the start of the document.\n*/\nconst selectDocStart = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.selection.main.anchor, head: 0 }));\n    return true;\n};\n/**\nMove the selection head to the end of the document.\n*/\nconst selectDocEnd = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.selection.main.anchor, head: state.doc.length }));\n    return true;\n};\n/**\nSelect the entire document.\n*/\nconst selectAll = ({ state, dispatch }) => {\n    dispatch(state.update({ selection: { anchor: 0, head: state.doc.length }, userEvent: \"select\" }));\n    return true;\n};\n/**\nExpand the selection to cover entire lines.\n*/\nconst selectLine = ({ state, dispatch }) => {\n    let ranges = selectedLineBlocks(state).map(({ from, to }) => EditorSelection.range(from, Math.min(to + 1, state.doc.length)));\n    dispatch(state.update({ selection: EditorSelection.create(ranges), userEvent: \"select\" }));\n    return true;\n};\n/**\nSelect the next syntactic construct that is larger than the\nselection. Note that this will only work insofar as the language\n[provider](https://codemirror.net/6/docs/ref/#language.language) you use builds up a full\nsyntax tree.\n*/\nconst selectParentSyntax = ({ state, dispatch }) => {\n    let selection = updateSel(state.selection, range => {\n        var _a;\n        let stack = syntaxTree(state).resolveStack(range.from, 1);\n        for (let cur = stack; cur; cur = cur.next) {\n            let { node } = cur;\n            if (((node.from < range.from && node.to >= range.to) ||\n                (node.to > range.to && node.from <= range.from)) &&\n                ((_a = node.parent) === null || _a === void 0 ? void 0 : _a.parent))\n                return EditorSelection.range(node.to, node.from);\n        }\n        return range;\n    });\n    dispatch(setSel(state, selection));\n    return true;\n};\n/**\nSimplify the current selection. When multiple ranges are selected,\nreduce it to its main range. Otherwise, if the selection is\nnon-empty, convert it to a cursor selection.\n*/\nconst simplifySelection = ({ state, dispatch }) => {\n    let cur = state.selection, selection = null;\n    if (cur.ranges.length > 1)\n        selection = EditorSelection.create([cur.main]);\n    else if (!cur.main.empty)\n        selection = EditorSelection.create([EditorSelection.cursor(cur.main.head)]);\n    if (!selection)\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n};\nfunction deleteBy(target, by) {\n    if (target.state.readOnly)\n        return false;\n    let event = \"delete.selection\", { state } = target;\n    let changes = state.changeByRange(range => {\n        let { from, to } = range;\n        if (from == to) {\n            let towards = by(range);\n            if (towards < from) {\n                event = \"delete.backward\";\n                towards = skipAtomic(target, towards, false);\n            }\n            else if (towards > from) {\n                event = \"delete.forward\";\n                towards = skipAtomic(target, towards, true);\n            }\n            from = Math.min(from, towards);\n            to = Math.max(to, towards);\n        }\n        else {\n            from = skipAtomic(target, from, false);\n            to = skipAtomic(target, to, true);\n        }\n        return from == to ? { range } : { changes: { from, to }, range: EditorSelection.cursor(from, from < range.head ? -1 : 1) };\n    });\n    if (changes.changes.empty)\n        return false;\n    target.dispatch(state.update(changes, {\n        scrollIntoView: true,\n        userEvent: event,\n        effects: event == \"delete.selection\" ? EditorView.announce.of(state.phrase(\"Selection deleted\")) : undefined\n    }));\n    return true;\n}\nfunction skipAtomic(target, pos, forward) {\n    if (target instanceof EditorView)\n        for (let ranges of target.state.facet(EditorView.atomicRanges).map(f => f(target)))\n            ranges.between(pos, pos, (from, to) => {\n                if (from < pos && to > pos)\n                    pos = forward ? to : from;\n            });\n    return pos;\n}\nconst deleteByChar = (target, forward, byIndentUnit) => deleteBy(target, range => {\n    let pos = range.from, { state } = target, line = state.doc.lineAt(pos), before, targetPos;\n    if (byIndentUnit && !forward && pos > line.from && pos < line.from + 200 &&\n        !/[^ \\t]/.test(before = line.text.slice(0, pos - line.from))) {\n        if (before[before.length - 1] == \"\\t\")\n            return pos - 1;\n        let col = countColumn(before, state.tabSize), drop = col % getIndentUnit(state) || getIndentUnit(state);\n        for (let i = 0; i < drop && before[before.length - 1 - i] == \" \"; i++)\n            pos--;\n        targetPos = pos;\n    }\n    else {\n        targetPos = findClusterBreak(line.text, pos - line.from, forward, forward) + line.from;\n        if (targetPos == pos && line.number != (forward ? state.doc.lines : 1))\n            targetPos += forward ? 1 : -1;\n        else if (!forward && /[\\ufe00-\\ufe0f]/.test(line.text.slice(targetPos - line.from, pos - line.from)))\n            targetPos = findClusterBreak(line.text, targetPos - line.from, false, false) + line.from;\n    }\n    return targetPos;\n});\n/**\nDelete the selection, or, for cursor selections, the character or\nindentation unit before the cursor.\n*/\nconst deleteCharBackward = view => deleteByChar(view, false, true);\n/**\nDelete the selection or the character before the cursor. Does not\nimplement any extended behavior like deleting whole indentation\nunits in one go.\n*/\nconst deleteCharBackwardStrict = view => deleteByChar(view, false, false);\n/**\nDelete the selection or the character after the cursor.\n*/\nconst deleteCharForward = view => deleteByChar(view, true, false);\nconst deleteByGroup = (target, forward) => deleteBy(target, range => {\n    let pos = range.head, { state } = target, line = state.doc.lineAt(pos);\n    let categorize = state.charCategorizer(pos);\n    for (let cat = null;;) {\n        if (pos == (forward ? line.to : line.from)) {\n            if (pos == range.head && line.number != (forward ? state.doc.lines : 1))\n                pos += forward ? 1 : -1;\n            break;\n        }\n        let next = findClusterBreak(line.text, pos - line.from, forward) + line.from;\n        let nextChar = line.text.slice(Math.min(pos, next) - line.from, Math.max(pos, next) - line.from);\n        let nextCat = categorize(nextChar);\n        if (cat != null && nextCat != cat)\n            break;\n        if (nextChar != \" \" || pos != range.head)\n            cat = nextCat;\n        pos = next;\n    }\n    return pos;\n});\n/**\nDelete the selection or backward until the end of the next\n[group](https://codemirror.net/6/docs/ref/#view.EditorView.moveByGroup), only skipping groups of\nwhitespace when they consist of a single space.\n*/\nconst deleteGroupBackward = target => deleteByGroup(target, false);\n/**\nDelete the selection or forward until the end of the next group.\n*/\nconst deleteGroupForward = target => deleteByGroup(target, true);\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe end of the line. If the cursor is directly at the end of the\nline, delete the line break after it.\n*/\nconst deleteToLineEnd = view => deleteBy(view, range => {\n    let lineEnd = view.lineBlockAt(range.head).to;\n    return range.head < lineEnd ? lineEnd : Math.min(view.state.doc.length, range.head + 1);\n});\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe start of the line. If the cursor is directly at the start of the\nline, delete the line break before it.\n*/\nconst deleteToLineStart = view => deleteBy(view, range => {\n    let lineStart = view.lineBlockAt(range.head).from;\n    return range.head > lineStart ? lineStart : Math.max(0, range.head - 1);\n});\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe start of the line or the next line wrap before the cursor.\n*/\nconst deleteLineBoundaryBackward = view => deleteBy(view, range => {\n    let lineStart = view.moveToLineBoundary(range, false).head;\n    return range.head > lineStart ? lineStart : Math.max(0, range.head - 1);\n});\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe end of the line or the next line wrap after the cursor.\n*/\nconst deleteLineBoundaryForward = view => deleteBy(view, range => {\n    let lineStart = view.moveToLineBoundary(range, true).head;\n    return range.head < lineStart ? lineStart : Math.min(view.state.doc.length, range.head + 1);\n});\n/**\nDelete all whitespace directly before a line end from the\ndocument.\n*/\nconst deleteTrailingWhitespace = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let changes = [];\n    for (let pos = 0, prev = \"\", iter = state.doc.iter();;) {\n        iter.next();\n        if (iter.lineBreak || iter.done) {\n            let trailing = prev.search(/\\s+$/);\n            if (trailing > -1)\n                changes.push({ from: pos - (prev.length - trailing), to: pos });\n            if (iter.done)\n                break;\n            prev = \"\";\n        }\n        else {\n            prev = iter.value;\n        }\n        pos += iter.value.length;\n    }\n    if (!changes.length)\n        return false;\n    dispatch(state.update({ changes, userEvent: \"delete\" }));\n    return true;\n};\n/**\nReplace each selection range with a line break, leaving the cursor\non the line before the break.\n*/\nconst splitLine = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let changes = state.changeByRange(range => {\n        return { changes: { from: range.from, to: range.to, insert: Text.of([\"\", \"\"]) },\n            range: EditorSelection.cursor(range.from) };\n    });\n    dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\n/**\nFlip the characters before and after the cursor(s).\n*/\nconst transposeChars = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let changes = state.changeByRange(range => {\n        if (!range.empty || range.from == 0 || range.from == state.doc.length)\n            return { range };\n        let pos = range.from, line = state.doc.lineAt(pos);\n        let from = pos == line.from ? pos - 1 : findClusterBreak(line.text, pos - line.from, false) + line.from;\n        let to = pos == line.to ? pos + 1 : findClusterBreak(line.text, pos - line.from, true) + line.from;\n        return { changes: { from, to, insert: state.doc.slice(pos, to).append(state.doc.slice(from, pos)) },\n            range: EditorSelection.cursor(to) };\n    });\n    if (changes.changes.empty)\n        return false;\n    dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"move.character\" }));\n    return true;\n};\nfunction selectedLineBlocks(state) {\n    let blocks = [], upto = -1;\n    for (let range of state.selection.ranges) {\n        let startLine = state.doc.lineAt(range.from), endLine = state.doc.lineAt(range.to);\n        if (!range.empty && range.to == endLine.from)\n            endLine = state.doc.lineAt(range.to - 1);\n        if (upto >= startLine.number) {\n            let prev = blocks[blocks.length - 1];\n            prev.to = endLine.to;\n            prev.ranges.push(range);\n        }\n        else {\n            blocks.push({ from: startLine.from, to: endLine.to, ranges: [range] });\n        }\n        upto = endLine.number + 1;\n    }\n    return blocks;\n}\nfunction moveLine(state, dispatch, forward) {\n    if (state.readOnly)\n        return false;\n    let changes = [], ranges = [];\n    for (let block of selectedLineBlocks(state)) {\n        if (forward ? block.to == state.doc.length : block.from == 0)\n            continue;\n        let nextLine = state.doc.lineAt(forward ? block.to + 1 : block.from - 1);\n        let size = nextLine.length + 1;\n        if (forward) {\n            changes.push({ from: block.to, to: nextLine.to }, { from: block.from, insert: nextLine.text + state.lineBreak });\n            for (let r of block.ranges)\n                ranges.push(EditorSelection.range(Math.min(state.doc.length, r.anchor + size), Math.min(state.doc.length, r.head + size)));\n        }\n        else {\n            changes.push({ from: nextLine.from, to: block.from }, { from: block.to, insert: state.lineBreak + nextLine.text });\n            for (let r of block.ranges)\n                ranges.push(EditorSelection.range(r.anchor - size, r.head - size));\n        }\n    }\n    if (!changes.length)\n        return false;\n    dispatch(state.update({\n        changes,\n        scrollIntoView: true,\n        selection: EditorSelection.create(ranges, state.selection.mainIndex),\n        userEvent: \"move.line\"\n    }));\n    return true;\n}\n/**\nMove the selected lines up one line.\n*/\nconst moveLineUp = ({ state, dispatch }) => moveLine(state, dispatch, false);\n/**\nMove the selected lines down one line.\n*/\nconst moveLineDown = ({ state, dispatch }) => moveLine(state, dispatch, true);\nfunction copyLine(state, dispatch, forward) {\n    if (state.readOnly)\n        return false;\n    let changes = [];\n    for (let block of selectedLineBlocks(state)) {\n        if (forward)\n            changes.push({ from: block.from, insert: state.doc.slice(block.from, block.to) + state.lineBreak });\n        else\n            changes.push({ from: block.to, insert: state.lineBreak + state.doc.slice(block.from, block.to) });\n    }\n    dispatch(state.update({ changes, scrollIntoView: true, userEvent: \"input.copyline\" }));\n    return true;\n}\n/**\nCreate a copy of the selected lines. Keep the selection in the top copy.\n*/\nconst copyLineUp = ({ state, dispatch }) => copyLine(state, dispatch, false);\n/**\nCreate a copy of the selected lines. Keep the selection in the bottom copy.\n*/\nconst copyLineDown = ({ state, dispatch }) => copyLine(state, dispatch, true);\n/**\nDelete selected lines.\n*/\nconst deleteLine = view => {\n    if (view.state.readOnly)\n        return false;\n    let { state } = view, changes = state.changes(selectedLineBlocks(state).map(({ from, to }) => {\n        if (from > 0)\n            from--;\n        else if (to < state.doc.length)\n            to++;\n        return { from, to };\n    }));\n    let selection = updateSel(state.selection, range => {\n        let dist = undefined;\n        if (view.lineWrapping) {\n            let block = view.lineBlockAt(range.head), pos = view.coordsAtPos(range.head, range.assoc || 1);\n            if (pos)\n                dist = (block.bottom + view.documentTop) - pos.bottom + view.defaultLineHeight / 2;\n        }\n        return view.moveVertically(range, true, dist);\n    }).map(changes);\n    view.dispatch({ changes, selection, scrollIntoView: true, userEvent: \"delete.line\" });\n    return true;\n};\n/**\nReplace the selection with a newline.\n*/\nconst insertNewline = ({ state, dispatch }) => {\n    dispatch(state.update(state.replaceSelection(state.lineBreak), { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\n/**\nReplace the selection with a newline and the same amount of\nindentation as the line above.\n*/\nconst insertNewlineKeepIndent = ({ state, dispatch }) => {\n    dispatch(state.update(state.changeByRange(range => {\n        let indent = /^\\s*/.exec(state.doc.lineAt(range.from).text)[0];\n        return {\n            changes: { from: range.from, to: range.to, insert: state.lineBreak + indent },\n            range: EditorSelection.cursor(range.from + indent.length + 1)\n        };\n    }), { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\nfunction isBetweenBrackets(state, pos) {\n    if (/\\(\\)|\\[\\]|\\{\\}/.test(state.sliceDoc(pos - 1, pos + 1)))\n        return { from: pos, to: pos };\n    let context = syntaxTree(state).resolveInner(pos);\n    let before = context.childBefore(pos), after = context.childAfter(pos), closedBy;\n    if (before && after && before.to <= pos && after.from >= pos &&\n        (closedBy = before.type.prop(NodeProp.closedBy)) && closedBy.indexOf(after.name) > -1 &&\n        state.doc.lineAt(before.to).from == state.doc.lineAt(after.from).from &&\n        !/\\S/.test(state.sliceDoc(before.to, after.from)))\n        return { from: before.to, to: after.from };\n    return null;\n}\n/**\nReplace the selection with a newline and indent the newly created\nline(s). If the current line consists only of whitespace, this\nwill also delete that whitespace. When the cursor is between\nmatching brackets, an additional newline will be inserted after\nthe cursor.\n*/\nconst insertNewlineAndIndent = /*@__PURE__*/newlineAndIndent(false);\n/**\nCreate a blank, indented line below the current line.\n*/\nconst insertBlankLine = /*@__PURE__*/newlineAndIndent(true);\nfunction newlineAndIndent(atEof) {\n    return ({ state, dispatch }) => {\n        if (state.readOnly)\n            return false;\n        let changes = state.changeByRange(range => {\n            let { from, to } = range, line = state.doc.lineAt(from);\n            let explode = !atEof && from == to && isBetweenBrackets(state, from);\n            if (atEof)\n                from = to = (to <= line.to ? line : state.doc.lineAt(to)).to;\n            let cx = new IndentContext(state, { simulateBreak: from, simulateDoubleBreak: !!explode });\n            let indent = getIndentation(cx, from);\n            if (indent == null)\n                indent = countColumn(/^\\s*/.exec(state.doc.lineAt(from).text)[0], state.tabSize);\n            while (to < line.to && /\\s/.test(line.text[to - line.from]))\n                to++;\n            if (explode)\n                ({ from, to } = explode);\n            else if (from > line.from && from < line.from + 100 && !/\\S/.test(line.text.slice(0, from)))\n                from = line.from;\n            let insert = [\"\", indentString(state, indent)];\n            if (explode)\n                insert.push(indentString(state, cx.lineIndent(line.from, -1)));\n            return { changes: { from, to, insert: Text.of(insert) },\n                range: EditorSelection.cursor(from + 1 + insert[1].length) };\n        });\n        dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"input\" }));\n        return true;\n    };\n}\nfunction changeBySelectedLine(state, f) {\n    let atLine = -1;\n    return state.changeByRange(range => {\n        let changes = [];\n        for (let pos = range.from; pos <= range.to;) {\n            let line = state.doc.lineAt(pos);\n            if (line.number > atLine && (range.empty || range.to > line.from)) {\n                f(line, changes, range);\n                atLine = line.number;\n            }\n            pos = line.to + 1;\n        }\n        let changeSet = state.changes(changes);\n        return { changes,\n            range: EditorSelection.range(changeSet.mapPos(range.anchor, 1), changeSet.mapPos(range.head, 1)) };\n    });\n}\n/**\nAuto-indent the selected lines. This uses the [indentation service\nfacet](https://codemirror.net/6/docs/ref/#language.indentService) as source for auto-indent\ninformation.\n*/\nconst indentSelection = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let updated = Object.create(null);\n    let context = new IndentContext(state, { overrideIndentation: start => {\n            let found = updated[start];\n            return found == null ? -1 : found;\n        } });\n    let changes = changeBySelectedLine(state, (line, changes, range) => {\n        let indent = getIndentation(context, line.from);\n        if (indent == null)\n            return;\n        if (!/\\S/.test(line.text))\n            indent = 0;\n        let cur = /^\\s*/.exec(line.text)[0];\n        let norm = indentString(state, indent);\n        if (cur != norm || range.from < line.from + cur.length) {\n            updated[line.from] = indent;\n            changes.push({ from: line.from, to: line.from + cur.length, insert: norm });\n        }\n    });\n    if (!changes.changes.empty)\n        dispatch(state.update(changes, { userEvent: \"indent\" }));\n    return true;\n};\n/**\nAdd a [unit](https://codemirror.net/6/docs/ref/#language.indentUnit) of indentation to all selected\nlines.\n*/\nconst indentMore = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {\n        changes.push({ from: line.from, insert: state.facet(indentUnit) });\n    }), { userEvent: \"input.indent\" }));\n    return true;\n};\n/**\nRemove a [unit](https://codemirror.net/6/docs/ref/#language.indentUnit) of indentation from all\nselected lines.\n*/\nconst indentLess = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {\n        let space = /^\\s*/.exec(line.text)[0];\n        if (!space)\n            return;\n        let col = countColumn(space, state.tabSize), keep = 0;\n        let insert = indentString(state, Math.max(0, col - getIndentUnit(state)));\n        while (keep < space.length && keep < insert.length && space.charCodeAt(keep) == insert.charCodeAt(keep))\n            keep++;\n        changes.push({ from: line.from + keep, to: line.from + space.length, insert: insert.slice(keep) });\n    }), { userEvent: \"delete.dedent\" }));\n    return true;\n};\n/**\nEnables or disables\n[tab-focus mode](https://codemirror.net/6/docs/ref/#view.EditorView.setTabFocusMode). While on, this\nprevents the editor's key bindings from capturing Tab or\nShift-Tab, making it possible for the user to move focus out of\nthe editor with the keyboard.\n*/\nconst toggleTabFocusMode = view => {\n    view.setTabFocusMode();\n    return true;\n};\n/**\nTemporarily enables [tab-focus\nmode](https://codemirror.net/6/docs/ref/#view.EditorView.setTabFocusMode) for two seconds or until\nanother key is pressed.\n*/\nconst temporarilySetTabFocusMode = view => {\n    view.setTabFocusMode(2000);\n    return true;\n};\n/**\nInsert a tab character at the cursor or, if something is selected,\nuse [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore) to indent the entire\nselection.\n*/\nconst insertTab = ({ state, dispatch }) => {\n    if (state.selection.ranges.some(r => !r.empty))\n        return indentMore({ state, dispatch });\n    dispatch(state.update(state.replaceSelection(\"\\t\"), { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\n/**\nArray of key bindings containing the Emacs-style bindings that are\navailable on macOS by default.\n\n - Ctrl-b: [`cursorCharLeft`](https://codemirror.net/6/docs/ref/#commands.cursorCharLeft) ([`selectCharLeft`](https://codemirror.net/6/docs/ref/#commands.selectCharLeft) with Shift)\n - Ctrl-f: [`cursorCharRight`](https://codemirror.net/6/docs/ref/#commands.cursorCharRight) ([`selectCharRight`](https://codemirror.net/6/docs/ref/#commands.selectCharRight) with Shift)\n - Ctrl-p: [`cursorLineUp`](https://codemirror.net/6/docs/ref/#commands.cursorLineUp) ([`selectLineUp`](https://codemirror.net/6/docs/ref/#commands.selectLineUp) with Shift)\n - Ctrl-n: [`cursorLineDown`](https://codemirror.net/6/docs/ref/#commands.cursorLineDown) ([`selectLineDown`](https://codemirror.net/6/docs/ref/#commands.selectLineDown) with Shift)\n - Ctrl-a: [`cursorLineStart`](https://codemirror.net/6/docs/ref/#commands.cursorLineStart) ([`selectLineStart`](https://codemirror.net/6/docs/ref/#commands.selectLineStart) with Shift)\n - Ctrl-e: [`cursorLineEnd`](https://codemirror.net/6/docs/ref/#commands.cursorLineEnd) ([`selectLineEnd`](https://codemirror.net/6/docs/ref/#commands.selectLineEnd) with Shift)\n - Ctrl-d: [`deleteCharForward`](https://codemirror.net/6/docs/ref/#commands.deleteCharForward)\n - Ctrl-h: [`deleteCharBackward`](https://codemirror.net/6/docs/ref/#commands.deleteCharBackward)\n - Ctrl-k: [`deleteToLineEnd`](https://codemirror.net/6/docs/ref/#commands.deleteToLineEnd)\n - Ctrl-Alt-h: [`deleteGroupBackward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupBackward)\n - Ctrl-o: [`splitLine`](https://codemirror.net/6/docs/ref/#commands.splitLine)\n - Ctrl-t: [`transposeChars`](https://codemirror.net/6/docs/ref/#commands.transposeChars)\n - Ctrl-v: [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown)\n - Alt-v: [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp)\n*/\nconst emacsStyleKeymap = [\n    { key: \"Ctrl-b\", run: cursorCharLeft, shift: selectCharLeft, preventDefault: true },\n    { key: \"Ctrl-f\", run: cursorCharRight, shift: selectCharRight },\n    { key: \"Ctrl-p\", run: cursorLineUp, shift: selectLineUp },\n    { key: \"Ctrl-n\", run: cursorLineDown, shift: selectLineDown },\n    { key: \"Ctrl-a\", run: cursorLineStart, shift: selectLineStart },\n    { key: \"Ctrl-e\", run: cursorLineEnd, shift: selectLineEnd },\n    { key: \"Ctrl-d\", run: deleteCharForward },\n    { key: \"Ctrl-h\", run: deleteCharBackward },\n    { key: \"Ctrl-k\", run: deleteToLineEnd },\n    { key: \"Ctrl-Alt-h\", run: deleteGroupBackward },\n    { key: \"Ctrl-o\", run: splitLine },\n    { key: \"Ctrl-t\", run: transposeChars },\n    { key: \"Ctrl-v\", run: cursorPageDown },\n];\n/**\nAn array of key bindings closely sticking to platform-standard or\nwidely used bindings. (This includes the bindings from\n[`emacsStyleKeymap`](https://codemirror.net/6/docs/ref/#commands.emacsStyleKeymap), with their `key`\nproperty changed to `mac`.)\n\n - ArrowLeft: [`cursorCharLeft`](https://codemirror.net/6/docs/ref/#commands.cursorCharLeft) ([`selectCharLeft`](https://codemirror.net/6/docs/ref/#commands.selectCharLeft) with Shift)\n - ArrowRight: [`cursorCharRight`](https://codemirror.net/6/docs/ref/#commands.cursorCharRight) ([`selectCharRight`](https://codemirror.net/6/docs/ref/#commands.selectCharRight) with Shift)\n - Ctrl-ArrowLeft (Alt-ArrowLeft on macOS): [`cursorGroupLeft`](https://codemirror.net/6/docs/ref/#commands.cursorGroupLeft) ([`selectGroupLeft`](https://codemirror.net/6/docs/ref/#commands.selectGroupLeft) with Shift)\n - Ctrl-ArrowRight (Alt-ArrowRight on macOS): [`cursorGroupRight`](https://codemirror.net/6/docs/ref/#commands.cursorGroupRight) ([`selectGroupRight`](https://codemirror.net/6/docs/ref/#commands.selectGroupRight) with Shift)\n - Cmd-ArrowLeft (on macOS): [`cursorLineStart`](https://codemirror.net/6/docs/ref/#commands.cursorLineStart) ([`selectLineStart`](https://codemirror.net/6/docs/ref/#commands.selectLineStart) with Shift)\n - Cmd-ArrowRight (on macOS): [`cursorLineEnd`](https://codemirror.net/6/docs/ref/#commands.cursorLineEnd) ([`selectLineEnd`](https://codemirror.net/6/docs/ref/#commands.selectLineEnd) with Shift)\n - ArrowUp: [`cursorLineUp`](https://codemirror.net/6/docs/ref/#commands.cursorLineUp) ([`selectLineUp`](https://codemirror.net/6/docs/ref/#commands.selectLineUp) with Shift)\n - ArrowDown: [`cursorLineDown`](https://codemirror.net/6/docs/ref/#commands.cursorLineDown) ([`selectLineDown`](https://codemirror.net/6/docs/ref/#commands.selectLineDown) with Shift)\n - Cmd-ArrowUp (on macOS): [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart) ([`selectDocStart`](https://codemirror.net/6/docs/ref/#commands.selectDocStart) with Shift)\n - Cmd-ArrowDown (on macOS): [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd) ([`selectDocEnd`](https://codemirror.net/6/docs/ref/#commands.selectDocEnd) with Shift)\n - Ctrl-ArrowUp (on macOS): [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp) ([`selectPageUp`](https://codemirror.net/6/docs/ref/#commands.selectPageUp) with Shift)\n - Ctrl-ArrowDown (on macOS): [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown) ([`selectPageDown`](https://codemirror.net/6/docs/ref/#commands.selectPageDown) with Shift)\n - PageUp: [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp) ([`selectPageUp`](https://codemirror.net/6/docs/ref/#commands.selectPageUp) with Shift)\n - PageDown: [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown) ([`selectPageDown`](https://codemirror.net/6/docs/ref/#commands.selectPageDown) with Shift)\n - Home: [`cursorLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.cursorLineBoundaryBackward) ([`selectLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.selectLineBoundaryBackward) with Shift)\n - End: [`cursorLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.cursorLineBoundaryForward) ([`selectLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.selectLineBoundaryForward) with Shift)\n - Ctrl-Home (Cmd-Home on macOS): [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart) ([`selectDocStart`](https://codemirror.net/6/docs/ref/#commands.selectDocStart) with Shift)\n - Ctrl-End (Cmd-Home on macOS): [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd) ([`selectDocEnd`](https://codemirror.net/6/docs/ref/#commands.selectDocEnd) with Shift)\n - Enter: [`insertNewlineAndIndent`](https://codemirror.net/6/docs/ref/#commands.insertNewlineAndIndent)\n - Ctrl-a (Cmd-a on macOS): [`selectAll`](https://codemirror.net/6/docs/ref/#commands.selectAll)\n - Backspace: [`deleteCharBackward`](https://codemirror.net/6/docs/ref/#commands.deleteCharBackward)\n - Delete: [`deleteCharForward`](https://codemirror.net/6/docs/ref/#commands.deleteCharForward)\n - Ctrl-Backspace (Alt-Backspace on macOS): [`deleteGroupBackward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupBackward)\n - Ctrl-Delete (Alt-Delete on macOS): [`deleteGroupForward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupForward)\n - Cmd-Backspace (macOS): [`deleteLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.deleteLineBoundaryBackward).\n - Cmd-Delete (macOS): [`deleteLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.deleteLineBoundaryForward).\n*/\nconst standardKeymap = /*@__PURE__*/[\n    { key: \"ArrowLeft\", run: cursorCharLeft, shift: selectCharLeft, preventDefault: true },\n    { key: \"Mod-ArrowLeft\", mac: \"Alt-ArrowLeft\", run: cursorGroupLeft, shift: selectGroupLeft, preventDefault: true },\n    { mac: \"Cmd-ArrowLeft\", run: cursorLineBoundaryLeft, shift: selectLineBoundaryLeft, preventDefault: true },\n    { key: \"ArrowRight\", run: cursorCharRight, shift: selectCharRight, preventDefault: true },\n    { key: \"Mod-ArrowRight\", mac: \"Alt-ArrowRight\", run: cursorGroupRight, shift: selectGroupRight, preventDefault: true },\n    { mac: \"Cmd-ArrowRight\", run: cursorLineBoundaryRight, shift: selectLineBoundaryRight, preventDefault: true },\n    { key: \"ArrowUp\", run: cursorLineUp, shift: selectLineUp, preventDefault: true },\n    { mac: \"Cmd-ArrowUp\", run: cursorDocStart, shift: selectDocStart },\n    { mac: \"Ctrl-ArrowUp\", run: cursorPageUp, shift: selectPageUp },\n    { key: \"ArrowDown\", run: cursorLineDown, shift: selectLineDown, preventDefault: true },\n    { mac: \"Cmd-ArrowDown\", run: cursorDocEnd, shift: selectDocEnd },\n    { mac: \"Ctrl-ArrowDown\", run: cursorPageDown, shift: selectPageDown },\n    { key: \"PageUp\", run: cursorPageUp, shift: selectPageUp },\n    { key: \"PageDown\", run: cursorPageDown, shift: selectPageDown },\n    { key: \"Home\", run: cursorLineBoundaryBackward, shift: selectLineBoundaryBackward, preventDefault: true },\n    { key: \"Mod-Home\", run: cursorDocStart, shift: selectDocStart },\n    { key: \"End\", run: cursorLineBoundaryForward, shift: selectLineBoundaryForward, preventDefault: true },\n    { key: \"Mod-End\", run: cursorDocEnd, shift: selectDocEnd },\n    { key: \"Enter\", run: insertNewlineAndIndent },\n    { key: \"Mod-a\", run: selectAll },\n    { key: \"Backspace\", run: deleteCharBackward, shift: deleteCharBackward },\n    { key: \"Delete\", run: deleteCharForward },\n    { key: \"Mod-Backspace\", mac: \"Alt-Backspace\", run: deleteGroupBackward },\n    { key: \"Mod-Delete\", mac: \"Alt-Delete\", run: deleteGroupForward },\n    { mac: \"Mod-Backspace\", run: deleteLineBoundaryBackward },\n    { mac: \"Mod-Delete\", run: deleteLineBoundaryForward }\n].concat(/*@__PURE__*/emacsStyleKeymap.map(b => ({ mac: b.key, run: b.run, shift: b.shift })));\n/**\nThe default keymap. Includes all bindings from\n[`standardKeymap`](https://codemirror.net/6/docs/ref/#commands.standardKeymap) plus the following:\n\n- Alt-ArrowLeft (Ctrl-ArrowLeft on macOS): [`cursorSyntaxLeft`](https://codemirror.net/6/docs/ref/#commands.cursorSyntaxLeft) ([`selectSyntaxLeft`](https://codemirror.net/6/docs/ref/#commands.selectSyntaxLeft) with Shift)\n- Alt-ArrowRight (Ctrl-ArrowRight on macOS): [`cursorSyntaxRight`](https://codemirror.net/6/docs/ref/#commands.cursorSyntaxRight) ([`selectSyntaxRight`](https://codemirror.net/6/docs/ref/#commands.selectSyntaxRight) with Shift)\n- Alt-ArrowUp: [`moveLineUp`](https://codemirror.net/6/docs/ref/#commands.moveLineUp)\n- Alt-ArrowDown: [`moveLineDown`](https://codemirror.net/6/docs/ref/#commands.moveLineDown)\n- Shift-Alt-ArrowUp: [`copyLineUp`](https://codemirror.net/6/docs/ref/#commands.copyLineUp)\n- Shift-Alt-ArrowDown: [`copyLineDown`](https://codemirror.net/6/docs/ref/#commands.copyLineDown)\n- Escape: [`simplifySelection`](https://codemirror.net/6/docs/ref/#commands.simplifySelection)\n- Ctrl-Enter (Cmd-Enter on macOS): [`insertBlankLine`](https://codemirror.net/6/docs/ref/#commands.insertBlankLine)\n- Alt-l (Ctrl-l on macOS): [`selectLine`](https://codemirror.net/6/docs/ref/#commands.selectLine)\n- Ctrl-i (Cmd-i on macOS): [`selectParentSyntax`](https://codemirror.net/6/docs/ref/#commands.selectParentSyntax)\n- Ctrl-[ (Cmd-[ on macOS): [`indentLess`](https://codemirror.net/6/docs/ref/#commands.indentLess)\n- Ctrl-] (Cmd-] on macOS): [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore)\n- Ctrl-Alt-\\\\ (Cmd-Alt-\\\\ on macOS): [`indentSelection`](https://codemirror.net/6/docs/ref/#commands.indentSelection)\n- Shift-Ctrl-k (Shift-Cmd-k on macOS): [`deleteLine`](https://codemirror.net/6/docs/ref/#commands.deleteLine)\n- Shift-Ctrl-\\\\ (Shift-Cmd-\\\\ on macOS): [`cursorMatchingBracket`](https://codemirror.net/6/docs/ref/#commands.cursorMatchingBracket)\n- Ctrl-/ (Cmd-/ on macOS): [`toggleComment`](https://codemirror.net/6/docs/ref/#commands.toggleComment).\n- Shift-Alt-a: [`toggleBlockComment`](https://codemirror.net/6/docs/ref/#commands.toggleBlockComment).\n- Ctrl-m (Alt-Shift-m on macOS): [`toggleTabFocusMode`](https://codemirror.net/6/docs/ref/#commands.toggleTabFocusMode).\n*/\nconst defaultKeymap = /*@__PURE__*/[\n    { key: \"Alt-ArrowLeft\", mac: \"Ctrl-ArrowLeft\", run: cursorSyntaxLeft, shift: selectSyntaxLeft },\n    { key: \"Alt-ArrowRight\", mac: \"Ctrl-ArrowRight\", run: cursorSyntaxRight, shift: selectSyntaxRight },\n    { key: \"Alt-ArrowUp\", run: moveLineUp },\n    { key: \"Shift-Alt-ArrowUp\", run: copyLineUp },\n    { key: \"Alt-ArrowDown\", run: moveLineDown },\n    { key: \"Shift-Alt-ArrowDown\", run: copyLineDown },\n    { key: \"Escape\", run: simplifySelection },\n    { key: \"Mod-Enter\", run: insertBlankLine },\n    { key: \"Alt-l\", mac: \"Ctrl-l\", run: selectLine },\n    { key: \"Mod-i\", run: selectParentSyntax, preventDefault: true },\n    { key: \"Mod-[\", run: indentLess },\n    { key: \"Mod-]\", run: indentMore },\n    { key: \"Mod-Alt-\\\\\", run: indentSelection },\n    { key: \"Shift-Mod-k\", run: deleteLine },\n    { key: \"Shift-Mod-\\\\\", run: cursorMatchingBracket },\n    { key: \"Mod-/\", run: toggleComment },\n    { key: \"Alt-A\", run: toggleBlockComment },\n    { key: \"Ctrl-m\", mac: \"Shift-Alt-m\", run: toggleTabFocusMode },\n].concat(standardKeymap);\n/**\nA binding that binds Tab to [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore) and\nShift-Tab to [`indentLess`](https://codemirror.net/6/docs/ref/#commands.indentLess).\nPlease see the [Tab example](../../examples/tab/) before using\nthis.\n*/\nconst indentWithTab = { key: \"Tab\", run: indentMore, shift: indentLess };\n\nexport { blockComment, blockUncomment, copyLineDown, copyLineUp, cursorCharBackward, cursorCharForward, cursorCharLeft, cursorCharRight, cursorDocEnd, cursorDocStart, cursorGroupBackward, cursorGroupForward, cursorGroupLeft, cursorGroupRight, cursorLineBoundaryBackward, cursorLineBoundaryForward, cursorLineBoundaryLeft, cursorLineBoundaryRight, cursorLineDown, cursorLineEnd, cursorLineStart, cursorLineUp, cursorMatchingBracket, cursorPageDown, cursorPageUp, cursorSubwordBackward, cursorSubwordForward, cursorSyntaxLeft, cursorSyntaxRight, defaultKeymap, deleteCharBackward, deleteCharBackwardStrict, deleteCharForward, deleteGroupBackward, deleteGroupForward, deleteLine, deleteLineBoundaryBackward, deleteLineBoundaryForward, deleteToLineEnd, deleteToLineStart, deleteTrailingWhitespace, emacsStyleKeymap, history, historyField, historyKeymap, indentLess, indentMore, indentSelection, indentWithTab, insertBlankLine, insertNewline, insertNewlineAndIndent, insertNewlineKeepIndent, insertTab, invertedEffects, isolateHistory, lineComment, lineUncomment, moveLineDown, moveLineUp, redo, redoDepth, redoSelection, selectAll, selectCharBackward, selectCharForward, selectCharLeft, selectCharRight, selectDocEnd, selectDocStart, selectGroupBackward, selectGroupForward, selectGroupLeft, selectGroupRight, selectLine, selectLineBoundaryBackward, selectLineBoundaryForward, selectLineBoundaryLeft, selectLineBoundaryRight, selectLineDown, selectLineEnd, selectLineStart, selectLineUp, selectMatchingBracket, selectPageDown, selectPageUp, selectParentSyntax, selectSubwordBackward, selectSubwordForward, selectSyntaxLeft, selectSyntaxRight, simplifySelection, splitLine, standardKeymap, temporarilySetTabFocusMode, toggleBlockComment, toggleBlockCommentByLine, toggleComment, toggleLineComment, toggleTabFocusMode, transposeChars, undo, undoDepth, undoSelection };\n","export default function crelt() {\n  var elt = arguments[0]\n  if (typeof elt == \"string\") elt = document.createElement(elt)\n  var i = 1, next = arguments[1]\n  if (next && typeof next == \"object\" && next.nodeType == null && !Array.isArray(next)) {\n    for (var name in next) if (Object.prototype.hasOwnProperty.call(next, name)) {\n      var value = next[name]\n      if (typeof value == \"string\") elt.setAttribute(name, value)\n      else if (value != null) elt[name] = value\n    }\n    i++\n  }\n  for (; i < arguments.length; i++) add(elt, arguments[i])\n  return elt\n}\n\nfunction add(elt, child) {\n  if (typeof child == \"string\") {\n    elt.appendChild(document.createTextNode(child))\n  } else if (child == null) {\n  } else if (child.nodeType != null) {\n    elt.appendChild(child)\n  } else if (Array.isArray(child)) {\n    for (var i = 0; i < child.length; i++) add(elt, child[i])\n  } else {\n    throw new RangeError(\"Unsupported child node: \" + child)\n  }\n}\n","import { showPanel, EditorView, getPanel, Decoration, ViewPlugin, runScopeHandlers } from '@codemirror/view';\nimport { codePointAt, fromCodePoint, codePointSize, StateEffect, StateField, EditorSelection, Facet, combineConfig, CharCategory, RangeSetBuilder, Prec, EditorState, findClusterBreak } from '@codemirror/state';\nimport elt from 'crelt';\n\nconst basicNormalize = typeof String.prototype.normalize == \"function\"\n    ? x => x.normalize(\"NFKD\") : x => x;\n/**\nA search cursor provides an iterator over text matches in a\ndocument.\n*/\nclass SearchCursor {\n    /**\n    Create a text cursor. The query is the search string, `from` to\n    `to` provides the region to search.\n    \n    When `normalize` is given, it will be called, on both the query\n    string and the content it is matched against, before comparing.\n    You can, for example, create a case-insensitive search by\n    passing `s => s.toLowerCase()`.\n    \n    Text is always normalized with\n    [`.normalize(\"NFKD\")`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize)\n    (when supported).\n    */\n    constructor(text, query, from = 0, to = text.length, normalize, test) {\n        this.test = test;\n        /**\n        The current match (only holds a meaningful value after\n        [`next`](https://codemirror.net/6/docs/ref/#search.SearchCursor.next) has been called and when\n        `done` is false).\n        */\n        this.value = { from: 0, to: 0 };\n        /**\n        Whether the end of the iterated region has been reached.\n        */\n        this.done = false;\n        this.matches = [];\n        this.buffer = \"\";\n        this.bufferPos = 0;\n        this.iter = text.iterRange(from, to);\n        this.bufferStart = from;\n        this.normalize = normalize ? x => normalize(basicNormalize(x)) : basicNormalize;\n        this.query = this.normalize(query);\n    }\n    peek() {\n        if (this.bufferPos == this.buffer.length) {\n            this.bufferStart += this.buffer.length;\n            this.iter.next();\n            if (this.iter.done)\n                return -1;\n            this.bufferPos = 0;\n            this.buffer = this.iter.value;\n        }\n        return codePointAt(this.buffer, this.bufferPos);\n    }\n    /**\n    Look for the next match. Updates the iterator's\n    [`value`](https://codemirror.net/6/docs/ref/#search.SearchCursor.value) and\n    [`done`](https://codemirror.net/6/docs/ref/#search.SearchCursor.done) properties. Should be called\n    at least once before using the cursor.\n    */\n    next() {\n        while (this.matches.length)\n            this.matches.pop();\n        return this.nextOverlapping();\n    }\n    /**\n    The `next` method will ignore matches that partially overlap a\n    previous match. This method behaves like `next`, but includes\n    such matches.\n    */\n    nextOverlapping() {\n        for (;;) {\n            let next = this.peek();\n            if (next < 0) {\n                this.done = true;\n                return this;\n            }\n            let str = fromCodePoint(next), start = this.bufferStart + this.bufferPos;\n            this.bufferPos += codePointSize(next);\n            let norm = this.normalize(str);\n            for (let i = 0, pos = start;; i++) {\n                let code = norm.charCodeAt(i);\n                let match = this.match(code, pos, this.bufferPos + this.bufferStart);\n                if (i == norm.length - 1) {\n                    if (match) {\n                        this.value = match;\n                        return this;\n                    }\n                    break;\n                }\n                if (pos == start && i < str.length && str.charCodeAt(i) == code)\n                    pos++;\n            }\n        }\n    }\n    match(code, pos, end) {\n        let match = null;\n        for (let i = 0; i < this.matches.length; i += 2) {\n            let index = this.matches[i], keep = false;\n            if (this.query.charCodeAt(index) == code) {\n                if (index == this.query.length - 1) {\n                    match = { from: this.matches[i + 1], to: end };\n                }\n                else {\n                    this.matches[i]++;\n                    keep = true;\n                }\n            }\n            if (!keep) {\n                this.matches.splice(i, 2);\n                i -= 2;\n            }\n        }\n        if (this.query.charCodeAt(0) == code) {\n            if (this.query.length == 1)\n                match = { from: pos, to: end };\n            else\n                this.matches.push(1, pos);\n        }\n        if (match && this.test && !this.test(match.from, match.to, this.buffer, this.bufferStart))\n            match = null;\n        return match;\n    }\n}\nif (typeof Symbol != \"undefined\")\n    SearchCursor.prototype[Symbol.iterator] = function () { return this; };\n\nconst empty = { from: -1, to: -1, match: /*@__PURE__*//.*/.exec(\"\") };\nconst baseFlags = \"gm\" + (/x/.unicode == null ? \"\" : \"u\");\n/**\nThis class is similar to [`SearchCursor`](https://codemirror.net/6/docs/ref/#search.SearchCursor)\nbut searches for a regular expression pattern instead of a plain\nstring.\n*/\nclass RegExpCursor {\n    /**\n    Create a cursor that will search the given range in the given\n    document. `query` should be the raw pattern (as you'd pass it to\n    `new RegExp`).\n    */\n    constructor(text, query, options, from = 0, to = text.length) {\n        this.text = text;\n        this.to = to;\n        this.curLine = \"\";\n        /**\n        Set to `true` when the cursor has reached the end of the search\n        range.\n        */\n        this.done = false;\n        /**\n        Will contain an object with the extent of the match and the\n        match object when [`next`](https://codemirror.net/6/docs/ref/#search.RegExpCursor.next)\n        sucessfully finds a match.\n        */\n        this.value = empty;\n        if (/\\\\[sWDnr]|\\n|\\r|\\[\\^/.test(query))\n            return new MultilineRegExpCursor(text, query, options, from, to);\n        this.re = new RegExp(query, baseFlags + ((options === null || options === void 0 ? void 0 : options.ignoreCase) ? \"i\" : \"\"));\n        this.test = options === null || options === void 0 ? void 0 : options.test;\n        this.iter = text.iter();\n        let startLine = text.lineAt(from);\n        this.curLineStart = startLine.from;\n        this.matchPos = toCharEnd(text, from);\n        this.getLine(this.curLineStart);\n    }\n    getLine(skip) {\n        this.iter.next(skip);\n        if (this.iter.lineBreak) {\n            this.curLine = \"\";\n        }\n        else {\n            this.curLine = this.iter.value;\n            if (this.curLineStart + this.curLine.length > this.to)\n                this.curLine = this.curLine.slice(0, this.to - this.curLineStart);\n            this.iter.next();\n        }\n    }\n    nextLine() {\n        this.curLineStart = this.curLineStart + this.curLine.length + 1;\n        if (this.curLineStart > this.to)\n            this.curLine = \"\";\n        else\n            this.getLine(0);\n    }\n    /**\n    Move to the next match, if there is one.\n    */\n    next() {\n        for (let off = this.matchPos - this.curLineStart;;) {\n            this.re.lastIndex = off;\n            let match = this.matchPos <= this.to && this.re.exec(this.curLine);\n            if (match) {\n                let from = this.curLineStart + match.index, to = from + match[0].length;\n                this.matchPos = toCharEnd(this.text, to + (from == to ? 1 : 0));\n                if (from == this.curLineStart + this.curLine.length)\n                    this.nextLine();\n                if ((from < to || from > this.value.to) && (!this.test || this.test(from, to, match))) {\n                    this.value = { from, to, match };\n                    return this;\n                }\n                off = this.matchPos - this.curLineStart;\n            }\n            else if (this.curLineStart + this.curLine.length < this.to) {\n                this.nextLine();\n                off = 0;\n            }\n            else {\n                this.done = true;\n                return this;\n            }\n        }\n    }\n}\nconst flattened = /*@__PURE__*/new WeakMap();\n// Reusable (partially) flattened document strings\nclass FlattenedDoc {\n    constructor(from, text) {\n        this.from = from;\n        this.text = text;\n    }\n    get to() { return this.from + this.text.length; }\n    static get(doc, from, to) {\n        let cached = flattened.get(doc);\n        if (!cached || cached.from >= to || cached.to <= from) {\n            let flat = new FlattenedDoc(from, doc.sliceString(from, to));\n            flattened.set(doc, flat);\n            return flat;\n        }\n        if (cached.from == from && cached.to == to)\n            return cached;\n        let { text, from: cachedFrom } = cached;\n        if (cachedFrom > from) {\n            text = doc.sliceString(from, cachedFrom) + text;\n            cachedFrom = from;\n        }\n        if (cached.to < to)\n            text += doc.sliceString(cached.to, to);\n        flattened.set(doc, new FlattenedDoc(cachedFrom, text));\n        return new FlattenedDoc(from, text.slice(from - cachedFrom, to - cachedFrom));\n    }\n}\nclass MultilineRegExpCursor {\n    constructor(text, query, options, from, to) {\n        this.text = text;\n        this.to = to;\n        this.done = false;\n        this.value = empty;\n        this.matchPos = toCharEnd(text, from);\n        this.re = new RegExp(query, baseFlags + ((options === null || options === void 0 ? void 0 : options.ignoreCase) ? \"i\" : \"\"));\n        this.test = options === null || options === void 0 ? void 0 : options.test;\n        this.flat = FlattenedDoc.get(text, from, this.chunkEnd(from + 5000 /* Chunk.Base */));\n    }\n    chunkEnd(pos) {\n        return pos >= this.to ? this.to : this.text.lineAt(pos).to;\n    }\n    next() {\n        for (;;) {\n            let off = this.re.lastIndex = this.matchPos - this.flat.from;\n            let match = this.re.exec(this.flat.text);\n            // Skip empty matches directly after the last match\n            if (match && !match[0] && match.index == off) {\n                this.re.lastIndex = off + 1;\n                match = this.re.exec(this.flat.text);\n            }\n            if (match) {\n                let from = this.flat.from + match.index, to = from + match[0].length;\n                // If a match goes almost to the end of a noncomplete chunk, try\n                // again, since it'll likely be able to match more\n                if ((this.flat.to >= this.to || match.index + match[0].length <= this.flat.text.length - 10) &&\n                    (!this.test || this.test(from, to, match))) {\n                    this.value = { from, to, match };\n                    this.matchPos = toCharEnd(this.text, to + (from == to ? 1 : 0));\n                    return this;\n                }\n            }\n            if (this.flat.to == this.to) {\n                this.done = true;\n                return this;\n            }\n            // Grow the flattened doc\n            this.flat = FlattenedDoc.get(this.text, this.flat.from, this.chunkEnd(this.flat.from + this.flat.text.length * 2));\n        }\n    }\n}\nif (typeof Symbol != \"undefined\") {\n    RegExpCursor.prototype[Symbol.iterator] = MultilineRegExpCursor.prototype[Symbol.iterator] =\n        function () { return this; };\n}\nfunction validRegExp(source) {\n    try {\n        new RegExp(source, baseFlags);\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}\nfunction toCharEnd(text, pos) {\n    if (pos >= text.length)\n        return pos;\n    let line = text.lineAt(pos), next;\n    while (pos < line.to && (next = line.text.charCodeAt(pos - line.from)) >= 0xDC00 && next < 0xE000)\n        pos++;\n    return pos;\n}\n\nfunction createLineDialog(view) {\n    let line = String(view.state.doc.lineAt(view.state.selection.main.head).number);\n    let input = elt(\"input\", { class: \"cm-textfield\", name: \"line\", value: line });\n    let dom = elt(\"form\", {\n        class: \"cm-gotoLine\",\n        onkeydown: (event) => {\n            if (event.keyCode == 27) { // Escape\n                event.preventDefault();\n                view.dispatch({ effects: dialogEffect.of(false) });\n                view.focus();\n            }\n            else if (event.keyCode == 13) { // Enter\n                event.preventDefault();\n                go();\n            }\n        },\n        onsubmit: (event) => {\n            event.preventDefault();\n            go();\n        }\n    }, elt(\"label\", view.state.phrase(\"Go to line\"), \": \", input), \" \", elt(\"button\", { class: \"cm-button\", type: \"submit\" }, view.state.phrase(\"go\")));\n    function go() {\n        let match = /^([+-])?(\\d+)?(:\\d+)?(%)?$/.exec(input.value);\n        if (!match)\n            return;\n        let { state } = view, startLine = state.doc.lineAt(state.selection.main.head);\n        let [, sign, ln, cl, percent] = match;\n        let col = cl ? +cl.slice(1) : 0;\n        let line = ln ? +ln : startLine.number;\n        if (ln && percent) {\n            let pc = line / 100;\n            if (sign)\n                pc = pc * (sign == \"-\" ? -1 : 1) + (startLine.number / state.doc.lines);\n            line = Math.round(state.doc.lines * pc);\n        }\n        else if (ln && sign) {\n            line = line * (sign == \"-\" ? -1 : 1) + startLine.number;\n        }\n        let docLine = state.doc.line(Math.max(1, Math.min(state.doc.lines, line)));\n        let selection = EditorSelection.cursor(docLine.from + Math.max(0, Math.min(col, docLine.length)));\n        view.dispatch({\n            effects: [dialogEffect.of(false), EditorView.scrollIntoView(selection.from, { y: 'center' })],\n            selection,\n        });\n        view.focus();\n    }\n    return { dom };\n}\nconst dialogEffect = /*@__PURE__*/StateEffect.define();\nconst dialogField = /*@__PURE__*/StateField.define({\n    create() { return true; },\n    update(value, tr) {\n        for (let e of tr.effects)\n            if (e.is(dialogEffect))\n                value = e.value;\n        return value;\n    },\n    provide: f => showPanel.from(f, val => val ? createLineDialog : null)\n});\n/**\nCommand that shows a dialog asking the user for a line number, and\nwhen a valid position is provided, moves the cursor to that line.\n\nSupports line numbers, relative line offsets prefixed with `+` or\n`-`, document percentages suffixed with `%`, and an optional\ncolumn position by adding `:` and a second number after the line\nnumber.\n*/\nconst gotoLine = view => {\n    let panel = getPanel(view, createLineDialog);\n    if (!panel) {\n        let effects = [dialogEffect.of(true)];\n        if (view.state.field(dialogField, false) == null)\n            effects.push(StateEffect.appendConfig.of([dialogField, baseTheme$1]));\n        view.dispatch({ effects });\n        panel = getPanel(view, createLineDialog);\n    }\n    if (panel)\n        panel.dom.querySelector(\"input\").select();\n    return true;\n};\nconst baseTheme$1 = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-panel.cm-gotoLine\": {\n        padding: \"2px 6px 4px\",\n        \"& label\": { fontSize: \"80%\" }\n    }\n});\n\nconst defaultHighlightOptions = {\n    highlightWordAroundCursor: false,\n    minSelectionLength: 1,\n    maxMatches: 100,\n    wholeWords: false\n};\nconst highlightConfig = /*@__PURE__*/Facet.define({\n    combine(options) {\n        return combineConfig(options, defaultHighlightOptions, {\n            highlightWordAroundCursor: (a, b) => a || b,\n            minSelectionLength: Math.min,\n            maxMatches: Math.min\n        });\n    }\n});\n/**\nThis extension highlights text that matches the selection. It uses\nthe `\"cm-selectionMatch\"` class for the highlighting. When\n`highlightWordAroundCursor` is enabled, the word at the cursor\nitself will be highlighted with `\"cm-selectionMatch-main\"`.\n*/\nfunction highlightSelectionMatches(options) {\n    let ext = [defaultTheme, matchHighlighter];\n    if (options)\n        ext.push(highlightConfig.of(options));\n    return ext;\n}\nconst matchDeco = /*@__PURE__*/Decoration.mark({ class: \"cm-selectionMatch\" });\nconst mainMatchDeco = /*@__PURE__*/Decoration.mark({ class: \"cm-selectionMatch cm-selectionMatch-main\" });\n// Whether the characters directly outside the given positions are non-word characters\nfunction insideWordBoundaries(check, state, from, to) {\n    return (from == 0 || check(state.sliceDoc(from - 1, from)) != CharCategory.Word) &&\n        (to == state.doc.length || check(state.sliceDoc(to, to + 1)) != CharCategory.Word);\n}\n// Whether the characters directly at the given positions are word characters\nfunction insideWord(check, state, from, to) {\n    return check(state.sliceDoc(from, from + 1)) == CharCategory.Word\n        && check(state.sliceDoc(to - 1, to)) == CharCategory.Word;\n}\nconst matchHighlighter = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.decorations = this.getDeco(view);\n    }\n    update(update) {\n        if (update.selectionSet || update.docChanged || update.viewportChanged)\n            this.decorations = this.getDeco(update.view);\n    }\n    getDeco(view) {\n        let conf = view.state.facet(highlightConfig);\n        let { state } = view, sel = state.selection;\n        if (sel.ranges.length > 1)\n            return Decoration.none;\n        let range = sel.main, query, check = null;\n        if (range.empty) {\n            if (!conf.highlightWordAroundCursor)\n                return Decoration.none;\n            let word = state.wordAt(range.head);\n            if (!word)\n                return Decoration.none;\n            check = state.charCategorizer(range.head);\n            query = state.sliceDoc(word.from, word.to);\n        }\n        else {\n            let len = range.to - range.from;\n            if (len < conf.minSelectionLength || len > 200)\n                return Decoration.none;\n            if (conf.wholeWords) {\n                query = state.sliceDoc(range.from, range.to); // TODO: allow and include leading/trailing space?\n                check = state.charCategorizer(range.head);\n                if (!(insideWordBoundaries(check, state, range.from, range.to) &&\n                    insideWord(check, state, range.from, range.to)))\n                    return Decoration.none;\n            }\n            else {\n                query = state.sliceDoc(range.from, range.to);\n                if (!query)\n                    return Decoration.none;\n            }\n        }\n        let deco = [];\n        for (let part of view.visibleRanges) {\n            let cursor = new SearchCursor(state.doc, query, part.from, part.to);\n            while (!cursor.next().done) {\n                let { from, to } = cursor.value;\n                if (!check || insideWordBoundaries(check, state, from, to)) {\n                    if (range.empty && from <= range.from && to >= range.to)\n                        deco.push(mainMatchDeco.range(from, to));\n                    else if (from >= range.to || to <= range.from)\n                        deco.push(matchDeco.range(from, to));\n                    if (deco.length > conf.maxMatches)\n                        return Decoration.none;\n                }\n            }\n        }\n        return Decoration.set(deco);\n    }\n}, {\n    decorations: v => v.decorations\n});\nconst defaultTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-selectionMatch\": { backgroundColor: \"#99ff7780\" },\n    \".cm-searchMatch .cm-selectionMatch\": { backgroundColor: \"transparent\" }\n});\n// Select the words around the cursors.\nconst selectWord = ({ state, dispatch }) => {\n    let { selection } = state;\n    let newSel = EditorSelection.create(selection.ranges.map(range => state.wordAt(range.head) || EditorSelection.cursor(range.head)), selection.mainIndex);\n    if (newSel.eq(selection))\n        return false;\n    dispatch(state.update({ selection: newSel }));\n    return true;\n};\n// Find next occurrence of query relative to last cursor. Wrap around\n// the document if there are no more matches.\nfunction findNextOccurrence(state, query) {\n    let { main, ranges } = state.selection;\n    let word = state.wordAt(main.head), fullWord = word && word.from == main.from && word.to == main.to;\n    for (let cycled = false, cursor = new SearchCursor(state.doc, query, ranges[ranges.length - 1].to);;) {\n        cursor.next();\n        if (cursor.done) {\n            if (cycled)\n                return null;\n            cursor = new SearchCursor(state.doc, query, 0, Math.max(0, ranges[ranges.length - 1].from - 1));\n            cycled = true;\n        }\n        else {\n            if (cycled && ranges.some(r => r.from == cursor.value.from))\n                continue;\n            if (fullWord) {\n                let word = state.wordAt(cursor.value.from);\n                if (!word || word.from != cursor.value.from || word.to != cursor.value.to)\n                    continue;\n            }\n            return cursor.value;\n        }\n    }\n}\n/**\nSelect next occurrence of the current selection. Expand selection\nto the surrounding word when the selection is empty.\n*/\nconst selectNextOccurrence = ({ state, dispatch }) => {\n    let { ranges } = state.selection;\n    if (ranges.some(sel => sel.from === sel.to))\n        return selectWord({ state, dispatch });\n    let searchedText = state.sliceDoc(ranges[0].from, ranges[0].to);\n    if (state.selection.ranges.some(r => state.sliceDoc(r.from, r.to) != searchedText))\n        return false;\n    let range = findNextOccurrence(state, searchedText);\n    if (!range)\n        return false;\n    dispatch(state.update({\n        selection: state.selection.addRange(EditorSelection.range(range.from, range.to), false),\n        effects: EditorView.scrollIntoView(range.to)\n    }));\n    return true;\n};\n\nconst searchConfigFacet = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            top: false,\n            caseSensitive: false,\n            literal: false,\n            regexp: false,\n            wholeWord: false,\n            createPanel: view => new SearchPanel(view),\n            scrollToMatch: range => EditorView.scrollIntoView(range)\n        });\n    }\n});\n/**\nAdd search state to the editor configuration, and optionally\nconfigure the search extension.\n([`openSearchPanel`](https://codemirror.net/6/docs/ref/#search.openSearchPanel) will automatically\nenable this if it isn't already on).\n*/\nfunction search(config) {\n    return config ? [searchConfigFacet.of(config), searchExtensions] : searchExtensions;\n}\n/**\nA search query. Part of the editor's search state.\n*/\nclass SearchQuery {\n    /**\n    Create a query object.\n    */\n    constructor(config) {\n        this.search = config.search;\n        this.caseSensitive = !!config.caseSensitive;\n        this.literal = !!config.literal;\n        this.regexp = !!config.regexp;\n        this.replace = config.replace || \"\";\n        this.valid = !!this.search && (!this.regexp || validRegExp(this.search));\n        this.unquoted = this.unquote(this.search);\n        this.wholeWord = !!config.wholeWord;\n    }\n    /**\n    @internal\n    */\n    unquote(text) {\n        return this.literal ? text :\n            text.replace(/\\\\([nrt\\\\])/g, (_, ch) => ch == \"n\" ? \"\\n\" : ch == \"r\" ? \"\\r\" : ch == \"t\" ? \"\\t\" : \"\\\\\");\n    }\n    /**\n    Compare this query to another query.\n    */\n    eq(other) {\n        return this.search == other.search && this.replace == other.replace &&\n            this.caseSensitive == other.caseSensitive && this.regexp == other.regexp &&\n            this.wholeWord == other.wholeWord;\n    }\n    /**\n    @internal\n    */\n    create() {\n        return this.regexp ? new RegExpQuery(this) : new StringQuery(this);\n    }\n    /**\n    Get a search cursor for this query, searching through the given\n    range in the given state.\n    */\n    getCursor(state, from = 0, to) {\n        let st = state.doc ? state : EditorState.create({ doc: state });\n        if (to == null)\n            to = st.doc.length;\n        return this.regexp ? regexpCursor(this, st, from, to) : stringCursor(this, st, from, to);\n    }\n}\nclass QueryType {\n    constructor(spec) {\n        this.spec = spec;\n    }\n}\nfunction stringCursor(spec, state, from, to) {\n    return new SearchCursor(state.doc, spec.unquoted, from, to, spec.caseSensitive ? undefined : x => x.toLowerCase(), spec.wholeWord ? stringWordTest(state.doc, state.charCategorizer(state.selection.main.head)) : undefined);\n}\nfunction stringWordTest(doc, categorizer) {\n    return (from, to, buf, bufPos) => {\n        if (bufPos > from || bufPos + buf.length < to) {\n            bufPos = Math.max(0, from - 2);\n            buf = doc.sliceString(bufPos, Math.min(doc.length, to + 2));\n        }\n        return (categorizer(charBefore(buf, from - bufPos)) != CharCategory.Word ||\n            categorizer(charAfter(buf, from - bufPos)) != CharCategory.Word) &&\n            (categorizer(charAfter(buf, to - bufPos)) != CharCategory.Word ||\n                categorizer(charBefore(buf, to - bufPos)) != CharCategory.Word);\n    };\n}\nclass StringQuery extends QueryType {\n    constructor(spec) {\n        super(spec);\n    }\n    nextMatch(state, curFrom, curTo) {\n        let cursor = stringCursor(this.spec, state, curTo, state.doc.length).nextOverlapping();\n        if (cursor.done)\n            cursor = stringCursor(this.spec, state, 0, curFrom).nextOverlapping();\n        return cursor.done ? null : cursor.value;\n    }\n    // Searching in reverse is, rather than implementing an inverted search\n    // cursor, done by scanning chunk after chunk forward.\n    prevMatchInRange(state, from, to) {\n        for (let pos = to;;) {\n            let start = Math.max(from, pos - 10000 /* FindPrev.ChunkSize */ - this.spec.unquoted.length);\n            let cursor = stringCursor(this.spec, state, start, pos), range = null;\n            while (!cursor.nextOverlapping().done)\n                range = cursor.value;\n            if (range)\n                return range;\n            if (start == from)\n                return null;\n            pos -= 10000 /* FindPrev.ChunkSize */;\n        }\n    }\n    prevMatch(state, curFrom, curTo) {\n        return this.prevMatchInRange(state, 0, curFrom) ||\n            this.prevMatchInRange(state, curTo, state.doc.length);\n    }\n    getReplacement(_result) { return this.spec.unquote(this.spec.replace); }\n    matchAll(state, limit) {\n        let cursor = stringCursor(this.spec, state, 0, state.doc.length), ranges = [];\n        while (!cursor.next().done) {\n            if (ranges.length >= limit)\n                return null;\n            ranges.push(cursor.value);\n        }\n        return ranges;\n    }\n    highlight(state, from, to, add) {\n        let cursor = stringCursor(this.spec, state, Math.max(0, from - this.spec.unquoted.length), Math.min(to + this.spec.unquoted.length, state.doc.length));\n        while (!cursor.next().done)\n            add(cursor.value.from, cursor.value.to);\n    }\n}\nfunction regexpCursor(spec, state, from, to) {\n    return new RegExpCursor(state.doc, spec.search, {\n        ignoreCase: !spec.caseSensitive,\n        test: spec.wholeWord ? regexpWordTest(state.charCategorizer(state.selection.main.head)) : undefined\n    }, from, to);\n}\nfunction charBefore(str, index) {\n    return str.slice(findClusterBreak(str, index, false), index);\n}\nfunction charAfter(str, index) {\n    return str.slice(index, findClusterBreak(str, index));\n}\nfunction regexpWordTest(categorizer) {\n    return (_from, _to, match) => !match[0].length ||\n        (categorizer(charBefore(match.input, match.index)) != CharCategory.Word ||\n            categorizer(charAfter(match.input, match.index)) != CharCategory.Word) &&\n            (categorizer(charAfter(match.input, match.index + match[0].length)) != CharCategory.Word ||\n                categorizer(charBefore(match.input, match.index + match[0].length)) != CharCategory.Word);\n}\nclass RegExpQuery extends QueryType {\n    nextMatch(state, curFrom, curTo) {\n        let cursor = regexpCursor(this.spec, state, curTo, state.doc.length).next();\n        if (cursor.done)\n            cursor = regexpCursor(this.spec, state, 0, curFrom).next();\n        return cursor.done ? null : cursor.value;\n    }\n    prevMatchInRange(state, from, to) {\n        for (let size = 1;; size++) {\n            let start = Math.max(from, to - size * 10000 /* FindPrev.ChunkSize */);\n            let cursor = regexpCursor(this.spec, state, start, to), range = null;\n            while (!cursor.next().done)\n                range = cursor.value;\n            if (range && (start == from || range.from > start + 10))\n                return range;\n            if (start == from)\n                return null;\n        }\n    }\n    prevMatch(state, curFrom, curTo) {\n        return this.prevMatchInRange(state, 0, curFrom) ||\n            this.prevMatchInRange(state, curTo, state.doc.length);\n    }\n    getReplacement(result) {\n        return this.spec.unquote(this.spec.replace).replace(/\\$([$&\\d+])/g, (m, i) => i == \"$\" ? \"$\"\n            : i == \"&\" ? result.match[0]\n                : i != \"0\" && +i < result.match.length ? result.match[i]\n                    : m);\n    }\n    matchAll(state, limit) {\n        let cursor = regexpCursor(this.spec, state, 0, state.doc.length), ranges = [];\n        while (!cursor.next().done) {\n            if (ranges.length >= limit)\n                return null;\n            ranges.push(cursor.value);\n        }\n        return ranges;\n    }\n    highlight(state, from, to, add) {\n        let cursor = regexpCursor(this.spec, state, Math.max(0, from - 250 /* RegExp.HighlightMargin */), Math.min(to + 250 /* RegExp.HighlightMargin */, state.doc.length));\n        while (!cursor.next().done)\n            add(cursor.value.from, cursor.value.to);\n    }\n}\n/**\nA state effect that updates the current search query. Note that\nthis only has an effect if the search state has been initialized\n(by including [`search`](https://codemirror.net/6/docs/ref/#search.search) in your configuration or\nby running [`openSearchPanel`](https://codemirror.net/6/docs/ref/#search.openSearchPanel) at least\nonce).\n*/\nconst setSearchQuery = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst searchState = /*@__PURE__*/StateField.define({\n    create(state) {\n        return new SearchState(defaultQuery(state).create(), null);\n    },\n    update(value, tr) {\n        for (let effect of tr.effects) {\n            if (effect.is(setSearchQuery))\n                value = new SearchState(effect.value.create(), value.panel);\n            else if (effect.is(togglePanel))\n                value = new SearchState(value.query, effect.value ? createSearchPanel : null);\n        }\n        return value;\n    },\n    provide: f => showPanel.from(f, val => val.panel)\n});\n/**\nGet the current search query from an editor state.\n*/\nfunction getSearchQuery(state) {\n    let curState = state.field(searchState, false);\n    return curState ? curState.query.spec : defaultQuery(state);\n}\n/**\nQuery whether the search panel is open in the given editor state.\n*/\nfunction searchPanelOpen(state) {\n    var _a;\n    return ((_a = state.field(searchState, false)) === null || _a === void 0 ? void 0 : _a.panel) != null;\n}\nclass SearchState {\n    constructor(query, panel) {\n        this.query = query;\n        this.panel = panel;\n    }\n}\nconst matchMark = /*@__PURE__*/Decoration.mark({ class: \"cm-searchMatch\" }), selectedMatchMark = /*@__PURE__*/Decoration.mark({ class: \"cm-searchMatch cm-searchMatch-selected\" });\nconst searchHighlighter = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.decorations = this.highlight(view.state.field(searchState));\n    }\n    update(update) {\n        let state = update.state.field(searchState);\n        if (state != update.startState.field(searchState) || update.docChanged || update.selectionSet || update.viewportChanged)\n            this.decorations = this.highlight(state);\n    }\n    highlight({ query, panel }) {\n        if (!panel || !query.spec.valid)\n            return Decoration.none;\n        let { view } = this;\n        let builder = new RangeSetBuilder();\n        for (let i = 0, ranges = view.visibleRanges, l = ranges.length; i < l; i++) {\n            let { from, to } = ranges[i];\n            while (i < l - 1 && to > ranges[i + 1].from - 2 * 250 /* RegExp.HighlightMargin */)\n                to = ranges[++i].to;\n            query.highlight(view.state, from, to, (from, to) => {\n                let selected = view.state.selection.ranges.some(r => r.from == from && r.to == to);\n                builder.add(from, to, selected ? selectedMatchMark : matchMark);\n            });\n        }\n        return builder.finish();\n    }\n}, {\n    decorations: v => v.decorations\n});\nfunction searchCommand(f) {\n    return view => {\n        let state = view.state.field(searchState, false);\n        return state && state.query.spec.valid ? f(view, state) : openSearchPanel(view);\n    };\n}\n/**\nOpen the search panel if it isn't already open, and move the\nselection to the first match after the current main selection.\nWill wrap around to the start of the document when it reaches the\nend.\n*/\nconst findNext = /*@__PURE__*/searchCommand((view, { query }) => {\n    let { to } = view.state.selection.main;\n    let next = query.nextMatch(view.state, to, to);\n    if (!next)\n        return false;\n    let selection = EditorSelection.single(next.from, next.to);\n    let config = view.state.facet(searchConfigFacet);\n    view.dispatch({\n        selection,\n        effects: [announceMatch(view, next), config.scrollToMatch(selection.main, view)],\n        userEvent: \"select.search\"\n    });\n    selectSearchInput(view);\n    return true;\n});\n/**\nMove the selection to the previous instance of the search query,\nbefore the current main selection. Will wrap past the start\nof the document to start searching at the end again.\n*/\nconst findPrevious = /*@__PURE__*/searchCommand((view, { query }) => {\n    let { state } = view, { from } = state.selection.main;\n    let prev = query.prevMatch(state, from, from);\n    if (!prev)\n        return false;\n    let selection = EditorSelection.single(prev.from, prev.to);\n    let config = view.state.facet(searchConfigFacet);\n    view.dispatch({\n        selection,\n        effects: [announceMatch(view, prev), config.scrollToMatch(selection.main, view)],\n        userEvent: \"select.search\"\n    });\n    selectSearchInput(view);\n    return true;\n});\n/**\nSelect all instances of the search query.\n*/\nconst selectMatches = /*@__PURE__*/searchCommand((view, { query }) => {\n    let ranges = query.matchAll(view.state, 1000);\n    if (!ranges || !ranges.length)\n        return false;\n    view.dispatch({\n        selection: EditorSelection.create(ranges.map(r => EditorSelection.range(r.from, r.to))),\n        userEvent: \"select.search.matches\"\n    });\n    return true;\n});\n/**\nSelect all instances of the currently selected text.\n*/\nconst selectSelectionMatches = ({ state, dispatch }) => {\n    let sel = state.selection;\n    if (sel.ranges.length > 1 || sel.main.empty)\n        return false;\n    let { from, to } = sel.main;\n    let ranges = [], main = 0;\n    for (let cur = new SearchCursor(state.doc, state.sliceDoc(from, to)); !cur.next().done;) {\n        if (ranges.length > 1000)\n            return false;\n        if (cur.value.from == from)\n            main = ranges.length;\n        ranges.push(EditorSelection.range(cur.value.from, cur.value.to));\n    }\n    dispatch(state.update({\n        selection: EditorSelection.create(ranges, main),\n        userEvent: \"select.search.matches\"\n    }));\n    return true;\n};\n/**\nReplace the current match of the search query.\n*/\nconst replaceNext = /*@__PURE__*/searchCommand((view, { query }) => {\n    let { state } = view, { from, to } = state.selection.main;\n    if (state.readOnly)\n        return false;\n    let next = query.nextMatch(state, from, from);\n    if (!next)\n        return false;\n    let changes = [], selection, replacement;\n    let effects = [];\n    if (next.from == from && next.to == to) {\n        replacement = state.toText(query.getReplacement(next));\n        changes.push({ from: next.from, to: next.to, insert: replacement });\n        next = query.nextMatch(state, next.from, next.to);\n        effects.push(EditorView.announce.of(state.phrase(\"replaced match on line $\", state.doc.lineAt(from).number) + \".\"));\n    }\n    if (next) {\n        let off = changes.length == 0 || changes[0].from >= next.to ? 0 : next.to - next.from - replacement.length;\n        selection = EditorSelection.single(next.from - off, next.to - off);\n        effects.push(announceMatch(view, next));\n        effects.push(state.facet(searchConfigFacet).scrollToMatch(selection.main, view));\n    }\n    view.dispatch({\n        changes, selection, effects,\n        userEvent: \"input.replace\"\n    });\n    return true;\n});\n/**\nReplace all instances of the search query with the given\nreplacement.\n*/\nconst replaceAll = /*@__PURE__*/searchCommand((view, { query }) => {\n    if (view.state.readOnly)\n        return false;\n    let changes = query.matchAll(view.state, 1e9).map(match => {\n        let { from, to } = match;\n        return { from, to, insert: query.getReplacement(match) };\n    });\n    if (!changes.length)\n        return false;\n    let announceText = view.state.phrase(\"replaced $ matches\", changes.length) + \".\";\n    view.dispatch({\n        changes,\n        effects: EditorView.announce.of(announceText),\n        userEvent: \"input.replace.all\"\n    });\n    return true;\n});\nfunction createSearchPanel(view) {\n    return view.state.facet(searchConfigFacet).createPanel(view);\n}\nfunction defaultQuery(state, fallback) {\n    var _a, _b, _c, _d, _e;\n    let sel = state.selection.main;\n    let selText = sel.empty || sel.to > sel.from + 100 ? \"\" : state.sliceDoc(sel.from, sel.to);\n    if (fallback && !selText)\n        return fallback;\n    let config = state.facet(searchConfigFacet);\n    return new SearchQuery({\n        search: ((_a = fallback === null || fallback === void 0 ? void 0 : fallback.literal) !== null && _a !== void 0 ? _a : config.literal) ? selText : selText.replace(/\\n/g, \"\\\\n\"),\n        caseSensitive: (_b = fallback === null || fallback === void 0 ? void 0 : fallback.caseSensitive) !== null && _b !== void 0 ? _b : config.caseSensitive,\n        literal: (_c = fallback === null || fallback === void 0 ? void 0 : fallback.literal) !== null && _c !== void 0 ? _c : config.literal,\n        regexp: (_d = fallback === null || fallback === void 0 ? void 0 : fallback.regexp) !== null && _d !== void 0 ? _d : config.regexp,\n        wholeWord: (_e = fallback === null || fallback === void 0 ? void 0 : fallback.wholeWord) !== null && _e !== void 0 ? _e : config.wholeWord\n    });\n}\nfunction getSearchInput(view) {\n    let panel = getPanel(view, createSearchPanel);\n    return panel && panel.dom.querySelector(\"[main-field]\");\n}\nfunction selectSearchInput(view) {\n    let input = getSearchInput(view);\n    if (input && input == view.root.activeElement)\n        input.select();\n}\n/**\nMake sure the search panel is open and focused.\n*/\nconst openSearchPanel = view => {\n    let state = view.state.field(searchState, false);\n    if (state && state.panel) {\n        let searchInput = getSearchInput(view);\n        if (searchInput && searchInput != view.root.activeElement) {\n            let query = defaultQuery(view.state, state.query.spec);\n            if (query.valid)\n                view.dispatch({ effects: setSearchQuery.of(query) });\n            searchInput.focus();\n            searchInput.select();\n        }\n    }\n    else {\n        view.dispatch({ effects: [\n                togglePanel.of(true),\n                state ? setSearchQuery.of(defaultQuery(view.state, state.query.spec)) : StateEffect.appendConfig.of(searchExtensions)\n            ] });\n    }\n    return true;\n};\n/**\nClose the search panel.\n*/\nconst closeSearchPanel = view => {\n    let state = view.state.field(searchState, false);\n    if (!state || !state.panel)\n        return false;\n    let panel = getPanel(view, createSearchPanel);\n    if (panel && panel.dom.contains(view.root.activeElement))\n        view.focus();\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/**\nDefault search-related key bindings.\n\n - Mod-f: [`openSearchPanel`](https://codemirror.net/6/docs/ref/#search.openSearchPanel)\n - F3, Mod-g: [`findNext`](https://codemirror.net/6/docs/ref/#search.findNext)\n - Shift-F3, Shift-Mod-g: [`findPrevious`](https://codemirror.net/6/docs/ref/#search.findPrevious)\n - Mod-Alt-g: [`gotoLine`](https://codemirror.net/6/docs/ref/#search.gotoLine)\n - Mod-d: [`selectNextOccurrence`](https://codemirror.net/6/docs/ref/#search.selectNextOccurrence)\n*/\nconst searchKeymap = [\n    { key: \"Mod-f\", run: openSearchPanel, scope: \"editor search-panel\" },\n    { key: \"F3\", run: findNext, shift: findPrevious, scope: \"editor search-panel\", preventDefault: true },\n    { key: \"Mod-g\", run: findNext, shift: findPrevious, scope: \"editor search-panel\", preventDefault: true },\n    { key: \"Escape\", run: closeSearchPanel, scope: \"editor search-panel\" },\n    { key: \"Mod-Shift-l\", run: selectSelectionMatches },\n    { key: \"Mod-Alt-g\", run: gotoLine },\n    { key: \"Mod-d\", run: selectNextOccurrence, preventDefault: true },\n];\nclass SearchPanel {\n    constructor(view) {\n        this.view = view;\n        let query = this.query = view.state.field(searchState).query.spec;\n        this.commit = this.commit.bind(this);\n        this.searchField = elt(\"input\", {\n            value: query.search,\n            placeholder: phrase(view, \"Find\"),\n            \"aria-label\": phrase(view, \"Find\"),\n            class: \"cm-textfield\",\n            name: \"search\",\n            form: \"\",\n            \"main-field\": \"true\",\n            onchange: this.commit,\n            onkeyup: this.commit\n        });\n        this.replaceField = elt(\"input\", {\n            value: query.replace,\n            placeholder: phrase(view, \"Replace\"),\n            \"aria-label\": phrase(view, \"Replace\"),\n            class: \"cm-textfield\",\n            name: \"replace\",\n            form: \"\",\n            onchange: this.commit,\n            onkeyup: this.commit\n        });\n        this.caseField = elt(\"input\", {\n            type: \"checkbox\",\n            name: \"case\",\n            form: \"\",\n            checked: query.caseSensitive,\n            onchange: this.commit\n        });\n        this.reField = elt(\"input\", {\n            type: \"checkbox\",\n            name: \"re\",\n            form: \"\",\n            checked: query.regexp,\n            onchange: this.commit\n        });\n        this.wordField = elt(\"input\", {\n            type: \"checkbox\",\n            name: \"word\",\n            form: \"\",\n            checked: query.wholeWord,\n            onchange: this.commit\n        });\n        function button(name, onclick, content) {\n            return elt(\"button\", { class: \"cm-button\", name, onclick, type: \"button\" }, content);\n        }\n        this.dom = elt(\"div\", { onkeydown: (e) => this.keydown(e), class: \"cm-search\" }, [\n            this.searchField,\n            button(\"next\", () => findNext(view), [phrase(view, \"next\")]),\n            button(\"prev\", () => findPrevious(view), [phrase(view, \"previous\")]),\n            button(\"select\", () => selectMatches(view), [phrase(view, \"all\")]),\n            elt(\"label\", null, [this.caseField, phrase(view, \"match case\")]),\n            elt(\"label\", null, [this.reField, phrase(view, \"regexp\")]),\n            elt(\"label\", null, [this.wordField, phrase(view, \"by word\")]),\n            ...view.state.readOnly ? [] : [\n                elt(\"br\"),\n                this.replaceField,\n                button(\"replace\", () => replaceNext(view), [phrase(view, \"replace\")]),\n                button(\"replaceAll\", () => replaceAll(view), [phrase(view, \"replace all\")])\n            ],\n            elt(\"button\", {\n                name: \"close\",\n                onclick: () => closeSearchPanel(view),\n                \"aria-label\": phrase(view, \"close\"),\n                type: \"button\"\n            }, [\"×\"])\n        ]);\n    }\n    commit() {\n        let query = new SearchQuery({\n            search: this.searchField.value,\n            caseSensitive: this.caseField.checked,\n            regexp: this.reField.checked,\n            wholeWord: this.wordField.checked,\n            replace: this.replaceField.value,\n        });\n        if (!query.eq(this.query)) {\n            this.query = query;\n            this.view.dispatch({ effects: setSearchQuery.of(query) });\n        }\n    }\n    keydown(e) {\n        if (runScopeHandlers(this.view, e, \"search-panel\")) {\n            e.preventDefault();\n        }\n        else if (e.keyCode == 13 && e.target == this.searchField) {\n            e.preventDefault();\n            (e.shiftKey ? findPrevious : findNext)(this.view);\n        }\n        else if (e.keyCode == 13 && e.target == this.replaceField) {\n            e.preventDefault();\n            replaceNext(this.view);\n        }\n    }\n    update(update) {\n        for (let tr of update.transactions)\n            for (let effect of tr.effects) {\n                if (effect.is(setSearchQuery) && !effect.value.eq(this.query))\n                    this.setQuery(effect.value);\n            }\n    }\n    setQuery(query) {\n        this.query = query;\n        this.searchField.value = query.search;\n        this.replaceField.value = query.replace;\n        this.caseField.checked = query.caseSensitive;\n        this.reField.checked = query.regexp;\n        this.wordField.checked = query.wholeWord;\n    }\n    mount() {\n        this.searchField.select();\n    }\n    get pos() { return 80; }\n    get top() { return this.view.state.facet(searchConfigFacet).top; }\n}\nfunction phrase(view, phrase) { return view.state.phrase(phrase); }\nconst AnnounceMargin = 30;\nconst Break = /[\\s\\.,:;?!]/;\nfunction announceMatch(view, { from, to }) {\n    let line = view.state.doc.lineAt(from), lineEnd = view.state.doc.lineAt(to).to;\n    let start = Math.max(line.from, from - AnnounceMargin), end = Math.min(lineEnd, to + AnnounceMargin);\n    let text = view.state.sliceDoc(start, end);\n    if (start != line.from) {\n        for (let i = 0; i < AnnounceMargin; i++)\n            if (!Break.test(text[i + 1]) && Break.test(text[i])) {\n                text = text.slice(i);\n                break;\n            }\n    }\n    if (end != lineEnd) {\n        for (let i = text.length - 1; i > text.length - AnnounceMargin; i--)\n            if (!Break.test(text[i - 1]) && Break.test(text[i])) {\n                text = text.slice(0, i);\n                break;\n            }\n    }\n    return EditorView.announce.of(`${view.state.phrase(\"current match\")}. ${text} ${view.state.phrase(\"on line\")} ${line.number}.`);\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-panel.cm-search\": {\n        padding: \"2px 6px 4px\",\n        position: \"relative\",\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"4px\",\n            backgroundColor: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        },\n        \"& input, & button, & label\": {\n            margin: \".2em .6em .2em 0\"\n        },\n        \"& input[type=checkbox]\": {\n            marginRight: \".2em\"\n        },\n        \"& label\": {\n            fontSize: \"80%\",\n            whiteSpace: \"pre\"\n        }\n    },\n    \"&light .cm-searchMatch\": { backgroundColor: \"#ffff0054\" },\n    \"&dark .cm-searchMatch\": { backgroundColor: \"#00ffff8a\" },\n    \"&light .cm-searchMatch-selected\": { backgroundColor: \"#ff6a0054\" },\n    \"&dark .cm-searchMatch-selected\": { backgroundColor: \"#ff00ff8a\" }\n});\nconst searchExtensions = [\n    searchState,\n    /*@__PURE__*/Prec.low(searchHighlighter),\n    baseTheme\n];\n\nexport { RegExpCursor, SearchCursor, SearchQuery, closeSearchPanel, findNext, findPrevious, getSearchQuery, gotoLine, highlightSelectionMatches, openSearchPanel, replaceAll, replaceNext, search, searchKeymap, searchPanelOpen, selectMatches, selectNextOccurrence, selectSelectionMatches, setSearchQuery };\n","import { Annotation, StateEffect, EditorSelection, codePointAt, codePointSize, fromCodePoint, Facet, combineConfig, StateField, Prec, Text, Transaction, MapMode, RangeValue, RangeSet, CharCategory } from '@codemirror/state';\nimport { Direction, logException, showTooltip, EditorView, ViewPlugin, getTooltip, Decoration, WidgetType, keymap } from '@codemirror/view';\nimport { syntaxTree, indentUnit } from '@codemirror/language';\n\n/**\nAn instance of this is passed to completion source functions.\n*/\nclass CompletionContext {\n    /**\n    Create a new completion context. (Mostly useful for testing\n    completion sources—in the editor, the extension will create\n    these for you.)\n    */\n    constructor(\n    /**\n    The editor state that the completion happens in.\n    */\n    state, \n    /**\n    The position at which the completion is happening.\n    */\n    pos, \n    /**\n    Indicates whether completion was activated explicitly, or\n    implicitly by typing. The usual way to respond to this is to\n    only return completions when either there is part of a\n    completable entity before the cursor, or `explicit` is true.\n    */\n    explicit, \n    /**\n    The editor view. May be undefined if the context was created\n    in a situation where there is no such view available, such as\n    in synchronous updates via\n    [`CompletionResult.update`](https://codemirror.net/6/docs/ref/#autocomplete.CompletionResult.update)\n    or when called by test code.\n    */\n    view) {\n        this.state = state;\n        this.pos = pos;\n        this.explicit = explicit;\n        this.view = view;\n        /**\n        @internal\n        */\n        this.abortListeners = [];\n    }\n    /**\n    Get the extent, content, and (if there is a token) type of the\n    token before `this.pos`.\n    */\n    tokenBefore(types) {\n        let token = syntaxTree(this.state).resolveInner(this.pos, -1);\n        while (token && types.indexOf(token.name) < 0)\n            token = token.parent;\n        return token ? { from: token.from, to: this.pos,\n            text: this.state.sliceDoc(token.from, this.pos),\n            type: token.type } : null;\n    }\n    /**\n    Get the match of the given expression directly before the\n    cursor.\n    */\n    matchBefore(expr) {\n        let line = this.state.doc.lineAt(this.pos);\n        let start = Math.max(line.from, this.pos - 250);\n        let str = line.text.slice(start - line.from, this.pos - line.from);\n        let found = str.search(ensureAnchor(expr, false));\n        return found < 0 ? null : { from: start + found, to: this.pos, text: str.slice(found) };\n    }\n    /**\n    Yields true when the query has been aborted. Can be useful in\n    asynchronous queries to avoid doing work that will be ignored.\n    */\n    get aborted() { return this.abortListeners == null; }\n    /**\n    Allows you to register abort handlers, which will be called when\n    the query is\n    [aborted](https://codemirror.net/6/docs/ref/#autocomplete.CompletionContext.aborted).\n    */\n    addEventListener(type, listener) {\n        if (type == \"abort\" && this.abortListeners)\n            this.abortListeners.push(listener);\n    }\n}\nfunction toSet(chars) {\n    let flat = Object.keys(chars).join(\"\");\n    let words = /\\w/.test(flat);\n    if (words)\n        flat = flat.replace(/\\w/g, \"\");\n    return `[${words ? \"\\\\w\" : \"\"}${flat.replace(/[^\\w\\s]/g, \"\\\\$&\")}]`;\n}\nfunction prefixMatch(options) {\n    let first = Object.create(null), rest = Object.create(null);\n    for (let { label } of options) {\n        first[label[0]] = true;\n        for (let i = 1; i < label.length; i++)\n            rest[label[i]] = true;\n    }\n    let source = toSet(first) + toSet(rest) + \"*$\";\n    return [new RegExp(\"^\" + source), new RegExp(source)];\n}\n/**\nGiven a a fixed array of options, return an autocompleter that\ncompletes them.\n*/\nfunction completeFromList(list) {\n    let options = list.map(o => typeof o == \"string\" ? { label: o } : o);\n    let [validFor, match] = options.every(o => /^\\w+$/.test(o.label)) ? [/\\w*$/, /\\w+$/] : prefixMatch(options);\n    return (context) => {\n        let token = context.matchBefore(match);\n        return token || context.explicit ? { from: token ? token.from : context.pos, options, validFor } : null;\n    };\n}\n/**\nWrap the given completion source so that it will only fire when the\ncursor is in a syntax node with one of the given names.\n*/\nfunction ifIn(nodes, source) {\n    return (context) => {\n        for (let pos = syntaxTree(context.state).resolveInner(context.pos, -1); pos; pos = pos.parent) {\n            if (nodes.indexOf(pos.name) > -1)\n                return source(context);\n            if (pos.type.isTop)\n                break;\n        }\n        return null;\n    };\n}\n/**\nWrap the given completion source so that it will not fire when the\ncursor is in a syntax node with one of the given names.\n*/\nfunction ifNotIn(nodes, source) {\n    return (context) => {\n        for (let pos = syntaxTree(context.state).resolveInner(context.pos, -1); pos; pos = pos.parent) {\n            if (nodes.indexOf(pos.name) > -1)\n                return null;\n            if (pos.type.isTop)\n                break;\n        }\n        return source(context);\n    };\n}\nclass Option {\n    constructor(completion, source, match, score) {\n        this.completion = completion;\n        this.source = source;\n        this.match = match;\n        this.score = score;\n    }\n}\nfunction cur(state) { return state.selection.main.from; }\n// Make sure the given regexp has a $ at its end and, if `start` is\n// true, a ^ at its start.\nfunction ensureAnchor(expr, start) {\n    var _a;\n    let { source } = expr;\n    let addStart = start && source[0] != \"^\", addEnd = source[source.length - 1] != \"$\";\n    if (!addStart && !addEnd)\n        return expr;\n    return new RegExp(`${addStart ? \"^\" : \"\"}(?:${source})${addEnd ? \"$\" : \"\"}`, (_a = expr.flags) !== null && _a !== void 0 ? _a : (expr.ignoreCase ? \"i\" : \"\"));\n}\n/**\nThis annotation is added to transactions that are produced by\npicking a completion.\n*/\nconst pickedCompletion = /*@__PURE__*/Annotation.define();\n/**\nHelper function that returns a transaction spec which inserts a\ncompletion's text in the main selection range, and any other\nselection range that has the same text in front of it.\n*/\nfunction insertCompletionText(state, text, from, to) {\n    let { main } = state.selection, fromOff = from - main.from, toOff = to - main.from;\n    return Object.assign(Object.assign({}, state.changeByRange(range => {\n        if (range != main && from != to &&\n            state.sliceDoc(range.from + fromOff, range.from + toOff) != state.sliceDoc(from, to))\n            return { range };\n        return {\n            changes: { from: range.from + fromOff, to: to == main.from ? range.to : range.from + toOff, insert: text },\n            range: EditorSelection.cursor(range.from + fromOff + text.length)\n        };\n    })), { scrollIntoView: true, userEvent: \"input.complete\" });\n}\nconst SourceCache = /*@__PURE__*/new WeakMap();\nfunction asSource(source) {\n    if (!Array.isArray(source))\n        return source;\n    let known = SourceCache.get(source);\n    if (!known)\n        SourceCache.set(source, known = completeFromList(source));\n    return known;\n}\nconst startCompletionEffect = /*@__PURE__*/StateEffect.define();\nconst closeCompletionEffect = /*@__PURE__*/StateEffect.define();\n\n// A pattern matcher for fuzzy completion matching. Create an instance\n// once for a pattern, and then use that to match any number of\n// completions.\nclass FuzzyMatcher {\n    constructor(pattern) {\n        this.pattern = pattern;\n        this.chars = [];\n        this.folded = [];\n        // Buffers reused by calls to `match` to track matched character\n        // positions.\n        this.any = [];\n        this.precise = [];\n        this.byWord = [];\n        this.score = 0;\n        this.matched = [];\n        for (let p = 0; p < pattern.length;) {\n            let char = codePointAt(pattern, p), size = codePointSize(char);\n            this.chars.push(char);\n            let part = pattern.slice(p, p + size), upper = part.toUpperCase();\n            this.folded.push(codePointAt(upper == part ? part.toLowerCase() : upper, 0));\n            p += size;\n        }\n        this.astral = pattern.length != this.chars.length;\n    }\n    ret(score, matched) {\n        this.score = score;\n        this.matched = matched;\n        return this;\n    }\n    // Matches a given word (completion) against the pattern (input).\n    // Will return a boolean indicating whether there was a match and,\n    // on success, set `this.score` to the score, `this.matched` to an\n    // array of `from, to` pairs indicating the matched parts of `word`.\n    //\n    // The score is a number that is more negative the worse the match\n    // is. See `Penalty` above.\n    match(word) {\n        if (this.pattern.length == 0)\n            return this.ret(-100 /* Penalty.NotFull */, []);\n        if (word.length < this.pattern.length)\n            return null;\n        let { chars, folded, any, precise, byWord } = this;\n        // For single-character queries, only match when they occur right\n        // at the start\n        if (chars.length == 1) {\n            let first = codePointAt(word, 0), firstSize = codePointSize(first);\n            let score = firstSize == word.length ? 0 : -100 /* Penalty.NotFull */;\n            if (first == chars[0]) ;\n            else if (first == folded[0])\n                score += -200 /* Penalty.CaseFold */;\n            else\n                return null;\n            return this.ret(score, [0, firstSize]);\n        }\n        let direct = word.indexOf(this.pattern);\n        if (direct == 0)\n            return this.ret(word.length == this.pattern.length ? 0 : -100 /* Penalty.NotFull */, [0, this.pattern.length]);\n        let len = chars.length, anyTo = 0;\n        if (direct < 0) {\n            for (let i = 0, e = Math.min(word.length, 200); i < e && anyTo < len;) {\n                let next = codePointAt(word, i);\n                if (next == chars[anyTo] || next == folded[anyTo])\n                    any[anyTo++] = i;\n                i += codePointSize(next);\n            }\n            // No match, exit immediately\n            if (anyTo < len)\n                return null;\n        }\n        // This tracks the extent of the precise (non-folded, not\n        // necessarily adjacent) match\n        let preciseTo = 0;\n        // Tracks whether there is a match that hits only characters that\n        // appear to be starting words. `byWordFolded` is set to true when\n        // a case folded character is encountered in such a match\n        let byWordTo = 0, byWordFolded = false;\n        // If we've found a partial adjacent match, these track its state\n        let adjacentTo = 0, adjacentStart = -1, adjacentEnd = -1;\n        let hasLower = /[a-z]/.test(word), wordAdjacent = true;\n        // Go over the option's text, scanning for the various kinds of matches\n        for (let i = 0, e = Math.min(word.length, 200), prevType = 0 /* Tp.NonWord */; i < e && byWordTo < len;) {\n            let next = codePointAt(word, i);\n            if (direct < 0) {\n                if (preciseTo < len && next == chars[preciseTo])\n                    precise[preciseTo++] = i;\n                if (adjacentTo < len) {\n                    if (next == chars[adjacentTo] || next == folded[adjacentTo]) {\n                        if (adjacentTo == 0)\n                            adjacentStart = i;\n                        adjacentEnd = i + 1;\n                        adjacentTo++;\n                    }\n                    else {\n                        adjacentTo = 0;\n                    }\n                }\n            }\n            let ch, type = next < 0xff\n                ? (next >= 48 && next <= 57 || next >= 97 && next <= 122 ? 2 /* Tp.Lower */ : next >= 65 && next <= 90 ? 1 /* Tp.Upper */ : 0 /* Tp.NonWord */)\n                : ((ch = fromCodePoint(next)) != ch.toLowerCase() ? 1 /* Tp.Upper */ : ch != ch.toUpperCase() ? 2 /* Tp.Lower */ : 0 /* Tp.NonWord */);\n            if (!i || type == 1 /* Tp.Upper */ && hasLower || prevType == 0 /* Tp.NonWord */ && type != 0 /* Tp.NonWord */) {\n                if (chars[byWordTo] == next || (folded[byWordTo] == next && (byWordFolded = true)))\n                    byWord[byWordTo++] = i;\n                else if (byWord.length)\n                    wordAdjacent = false;\n            }\n            prevType = type;\n            i += codePointSize(next);\n        }\n        if (byWordTo == len && byWord[0] == 0 && wordAdjacent)\n            return this.result(-100 /* Penalty.ByWord */ + (byWordFolded ? -200 /* Penalty.CaseFold */ : 0), byWord, word);\n        if (adjacentTo == len && adjacentStart == 0)\n            return this.ret(-200 /* Penalty.CaseFold */ - word.length + (adjacentEnd == word.length ? 0 : -100 /* Penalty.NotFull */), [0, adjacentEnd]);\n        if (direct > -1)\n            return this.ret(-700 /* Penalty.NotStart */ - word.length, [direct, direct + this.pattern.length]);\n        if (adjacentTo == len)\n            return this.ret(-200 /* Penalty.CaseFold */ + -700 /* Penalty.NotStart */ - word.length, [adjacentStart, adjacentEnd]);\n        if (byWordTo == len)\n            return this.result(-100 /* Penalty.ByWord */ + (byWordFolded ? -200 /* Penalty.CaseFold */ : 0) + -700 /* Penalty.NotStart */ +\n                (wordAdjacent ? 0 : -1100 /* Penalty.Gap */), byWord, word);\n        return chars.length == 2 ? null\n            : this.result((any[0] ? -700 /* Penalty.NotStart */ : 0) + -200 /* Penalty.CaseFold */ + -1100 /* Penalty.Gap */, any, word);\n    }\n    result(score, positions, word) {\n        let result = [], i = 0;\n        for (let pos of positions) {\n            let to = pos + (this.astral ? codePointSize(codePointAt(word, pos)) : 1);\n            if (i && result[i - 1] == pos)\n                result[i - 1] = to;\n            else {\n                result[i++] = pos;\n                result[i++] = to;\n            }\n        }\n        return this.ret(score - word.length, result);\n    }\n}\nclass StrictMatcher {\n    constructor(pattern) {\n        this.pattern = pattern;\n        this.matched = [];\n        this.score = 0;\n        this.folded = pattern.toLowerCase();\n    }\n    match(word) {\n        if (word.length < this.pattern.length)\n            return null;\n        let start = word.slice(0, this.pattern.length);\n        let match = start == this.pattern ? 0 : start.toLowerCase() == this.folded ? -200 /* Penalty.CaseFold */ : null;\n        if (match == null)\n            return null;\n        this.matched = [0, start.length];\n        this.score = match + (word.length == this.pattern.length ? 0 : -100 /* Penalty.NotFull */);\n        return this;\n    }\n}\n\nconst completionConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            activateOnTyping: true,\n            activateOnCompletion: () => false,\n            activateOnTypingDelay: 100,\n            selectOnOpen: true,\n            override: null,\n            closeOnBlur: true,\n            maxRenderedOptions: 100,\n            defaultKeymap: true,\n            tooltipClass: () => \"\",\n            optionClass: () => \"\",\n            aboveCursor: false,\n            icons: true,\n            addToOptions: [],\n            positionInfo: defaultPositionInfo,\n            filterStrict: false,\n            compareCompletions: (a, b) => a.label.localeCompare(b.label),\n            interactionDelay: 75,\n            updateSyncTime: 100\n        }, {\n            defaultKeymap: (a, b) => a && b,\n            closeOnBlur: (a, b) => a && b,\n            icons: (a, b) => a && b,\n            tooltipClass: (a, b) => c => joinClass(a(c), b(c)),\n            optionClass: (a, b) => c => joinClass(a(c), b(c)),\n            addToOptions: (a, b) => a.concat(b),\n            filterStrict: (a, b) => a || b,\n        });\n    }\n});\nfunction joinClass(a, b) {\n    return a ? b ? a + \" \" + b : a : b;\n}\nfunction defaultPositionInfo(view, list, option, info, space, tooltip) {\n    let rtl = view.textDirection == Direction.RTL, left = rtl, narrow = false;\n    let side = \"top\", offset, maxWidth;\n    let spaceLeft = list.left - space.left, spaceRight = space.right - list.right;\n    let infoWidth = info.right - info.left, infoHeight = info.bottom - info.top;\n    if (left && spaceLeft < Math.min(infoWidth, spaceRight))\n        left = false;\n    else if (!left && spaceRight < Math.min(infoWidth, spaceLeft))\n        left = true;\n    if (infoWidth <= (left ? spaceLeft : spaceRight)) {\n        offset = Math.max(space.top, Math.min(option.top, space.bottom - infoHeight)) - list.top;\n        maxWidth = Math.min(400 /* Info.Width */, left ? spaceLeft : spaceRight);\n    }\n    else {\n        narrow = true;\n        maxWidth = Math.min(400 /* Info.Width */, (rtl ? list.right : space.right - list.left) - 30 /* Info.Margin */);\n        let spaceBelow = space.bottom - list.bottom;\n        if (spaceBelow >= infoHeight || spaceBelow > list.top) { // Below the completion\n            offset = option.bottom - list.top;\n        }\n        else { // Above it\n            side = \"bottom\";\n            offset = list.bottom - option.top;\n        }\n    }\n    let scaleY = (list.bottom - list.top) / tooltip.offsetHeight;\n    let scaleX = (list.right - list.left) / tooltip.offsetWidth;\n    return {\n        style: `${side}: ${offset / scaleY}px; max-width: ${maxWidth / scaleX}px`,\n        class: \"cm-completionInfo-\" + (narrow ? (rtl ? \"left-narrow\" : \"right-narrow\") : left ? \"left\" : \"right\")\n    };\n}\n\nfunction optionContent(config) {\n    let content = config.addToOptions.slice();\n    if (config.icons)\n        content.push({\n            render(completion) {\n                let icon = document.createElement(\"div\");\n                icon.classList.add(\"cm-completionIcon\");\n                if (completion.type)\n                    icon.classList.add(...completion.type.split(/\\s+/g).map(cls => \"cm-completionIcon-\" + cls));\n                icon.setAttribute(\"aria-hidden\", \"true\");\n                return icon;\n            },\n            position: 20\n        });\n    content.push({\n        render(completion, _s, _v, match) {\n            let labelElt = document.createElement(\"span\");\n            labelElt.className = \"cm-completionLabel\";\n            let label = completion.displayLabel || completion.label, off = 0;\n            for (let j = 0; j < match.length;) {\n                let from = match[j++], to = match[j++];\n                if (from > off)\n                    labelElt.appendChild(document.createTextNode(label.slice(off, from)));\n                let span = labelElt.appendChild(document.createElement(\"span\"));\n                span.appendChild(document.createTextNode(label.slice(from, to)));\n                span.className = \"cm-completionMatchedText\";\n                off = to;\n            }\n            if (off < label.length)\n                labelElt.appendChild(document.createTextNode(label.slice(off)));\n            return labelElt;\n        },\n        position: 50\n    }, {\n        render(completion) {\n            if (!completion.detail)\n                return null;\n            let detailElt = document.createElement(\"span\");\n            detailElt.className = \"cm-completionDetail\";\n            detailElt.textContent = completion.detail;\n            return detailElt;\n        },\n        position: 80\n    });\n    return content.sort((a, b) => a.position - b.position).map(a => a.render);\n}\nfunction rangeAroundSelected(total, selected, max) {\n    if (total <= max)\n        return { from: 0, to: total };\n    if (selected < 0)\n        selected = 0;\n    if (selected <= (total >> 1)) {\n        let off = Math.floor(selected / max);\n        return { from: off * max, to: (off + 1) * max };\n    }\n    let off = Math.floor((total - selected) / max);\n    return { from: total - (off + 1) * max, to: total - off * max };\n}\nclass CompletionTooltip {\n    constructor(view, stateField, applyCompletion) {\n        this.view = view;\n        this.stateField = stateField;\n        this.applyCompletion = applyCompletion;\n        this.info = null;\n        this.infoDestroy = null;\n        this.placeInfoReq = {\n            read: () => this.measureInfo(),\n            write: (pos) => this.placeInfo(pos),\n            key: this\n        };\n        this.space = null;\n        this.currentClass = \"\";\n        let cState = view.state.field(stateField);\n        let { options, selected } = cState.open;\n        let config = view.state.facet(completionConfig);\n        this.optionContent = optionContent(config);\n        this.optionClass = config.optionClass;\n        this.tooltipClass = config.tooltipClass;\n        this.range = rangeAroundSelected(options.length, selected, config.maxRenderedOptions);\n        this.dom = document.createElement(\"div\");\n        this.dom.className = \"cm-tooltip-autocomplete\";\n        this.updateTooltipClass(view.state);\n        this.dom.addEventListener(\"mousedown\", (e) => {\n            let { options } = view.state.field(stateField).open;\n            for (let dom = e.target, match; dom && dom != this.dom; dom = dom.parentNode) {\n                if (dom.nodeName == \"LI\" && (match = /-(\\d+)$/.exec(dom.id)) && +match[1] < options.length) {\n                    this.applyCompletion(view, options[+match[1]]);\n                    e.preventDefault();\n                    return;\n                }\n            }\n        });\n        this.dom.addEventListener(\"focusout\", (e) => {\n            let state = view.state.field(this.stateField, false);\n            if (state && state.tooltip && view.state.facet(completionConfig).closeOnBlur &&\n                e.relatedTarget != view.contentDOM)\n                view.dispatch({ effects: closeCompletionEffect.of(null) });\n        });\n        this.showOptions(options, cState.id);\n    }\n    mount() { this.updateSel(); }\n    showOptions(options, id) {\n        if (this.list)\n            this.list.remove();\n        this.list = this.dom.appendChild(this.createListBox(options, id, this.range));\n        this.list.addEventListener(\"scroll\", () => {\n            if (this.info)\n                this.view.requestMeasure(this.placeInfoReq);\n        });\n    }\n    update(update) {\n        var _a;\n        let cState = update.state.field(this.stateField);\n        let prevState = update.startState.field(this.stateField);\n        this.updateTooltipClass(update.state);\n        if (cState != prevState) {\n            let { options, selected, disabled } = cState.open;\n            if (!prevState.open || prevState.open.options != options) {\n                this.range = rangeAroundSelected(options.length, selected, update.state.facet(completionConfig).maxRenderedOptions);\n                this.showOptions(options, cState.id);\n            }\n            this.updateSel();\n            if (disabled != ((_a = prevState.open) === null || _a === void 0 ? void 0 : _a.disabled))\n                this.dom.classList.toggle(\"cm-tooltip-autocomplete-disabled\", !!disabled);\n        }\n    }\n    updateTooltipClass(state) {\n        let cls = this.tooltipClass(state);\n        if (cls != this.currentClass) {\n            for (let c of this.currentClass.split(\" \"))\n                if (c)\n                    this.dom.classList.remove(c);\n            for (let c of cls.split(\" \"))\n                if (c)\n                    this.dom.classList.add(c);\n            this.currentClass = cls;\n        }\n    }\n    positioned(space) {\n        this.space = space;\n        if (this.info)\n            this.view.requestMeasure(this.placeInfoReq);\n    }\n    updateSel() {\n        let cState = this.view.state.field(this.stateField), open = cState.open;\n        if (open.selected > -1 && open.selected < this.range.from || open.selected >= this.range.to) {\n            this.range = rangeAroundSelected(open.options.length, open.selected, this.view.state.facet(completionConfig).maxRenderedOptions);\n            this.showOptions(open.options, cState.id);\n        }\n        if (this.updateSelectedOption(open.selected)) {\n            this.destroyInfo();\n            let { completion } = open.options[open.selected];\n            let { info } = completion;\n            if (!info)\n                return;\n            let infoResult = typeof info === \"string\" ? document.createTextNode(info) : info(completion);\n            if (!infoResult)\n                return;\n            if (\"then\" in infoResult) {\n                infoResult.then(obj => {\n                    if (obj && this.view.state.field(this.stateField, false) == cState)\n                        this.addInfoPane(obj, completion);\n                }).catch(e => logException(this.view.state, e, \"completion info\"));\n            }\n            else {\n                this.addInfoPane(infoResult, completion);\n            }\n        }\n    }\n    addInfoPane(content, completion) {\n        this.destroyInfo();\n        let wrap = this.info = document.createElement(\"div\");\n        wrap.className = \"cm-tooltip cm-completionInfo\";\n        if (content.nodeType != null) {\n            wrap.appendChild(content);\n            this.infoDestroy = null;\n        }\n        else {\n            let { dom, destroy } = content;\n            wrap.appendChild(dom);\n            this.infoDestroy = destroy || null;\n        }\n        this.dom.appendChild(wrap);\n        this.view.requestMeasure(this.placeInfoReq);\n    }\n    updateSelectedOption(selected) {\n        let set = null;\n        for (let opt = this.list.firstChild, i = this.range.from; opt; opt = opt.nextSibling, i++) {\n            if (opt.nodeName != \"LI\" || !opt.id) {\n                i--; // A section header\n            }\n            else if (i == selected) {\n                if (!opt.hasAttribute(\"aria-selected\")) {\n                    opt.setAttribute(\"aria-selected\", \"true\");\n                    set = opt;\n                }\n            }\n            else {\n                if (opt.hasAttribute(\"aria-selected\"))\n                    opt.removeAttribute(\"aria-selected\");\n            }\n        }\n        if (set)\n            scrollIntoView(this.list, set);\n        return set;\n    }\n    measureInfo() {\n        let sel = this.dom.querySelector(\"[aria-selected]\");\n        if (!sel || !this.info)\n            return null;\n        let listRect = this.dom.getBoundingClientRect();\n        let infoRect = this.info.getBoundingClientRect();\n        let selRect = sel.getBoundingClientRect();\n        let space = this.space;\n        if (!space) {\n            let win = this.dom.ownerDocument.defaultView || window;\n            space = { left: 0, top: 0, right: win.innerWidth, bottom: win.innerHeight };\n        }\n        if (selRect.top > Math.min(space.bottom, listRect.bottom) - 10 ||\n            selRect.bottom < Math.max(space.top, listRect.top) + 10)\n            return null;\n        return this.view.state.facet(completionConfig).positionInfo(this.view, listRect, selRect, infoRect, space, this.dom);\n    }\n    placeInfo(pos) {\n        if (this.info) {\n            if (pos) {\n                if (pos.style)\n                    this.info.style.cssText = pos.style;\n                this.info.className = \"cm-tooltip cm-completionInfo \" + (pos.class || \"\");\n            }\n            else {\n                this.info.style.cssText = \"top: -1e6px\";\n            }\n        }\n    }\n    createListBox(options, id, range) {\n        const ul = document.createElement(\"ul\");\n        ul.id = id;\n        ul.setAttribute(\"role\", \"listbox\");\n        ul.setAttribute(\"aria-expanded\", \"true\");\n        ul.setAttribute(\"aria-label\", this.view.state.phrase(\"Completions\"));\n        let curSection = null;\n        for (let i = range.from; i < range.to; i++) {\n            let { completion, match } = options[i], { section } = completion;\n            if (section) {\n                let name = typeof section == \"string\" ? section : section.name;\n                if (name != curSection && (i > range.from || range.from == 0)) {\n                    curSection = name;\n                    if (typeof section != \"string\" && section.header) {\n                        ul.appendChild(section.header(section));\n                    }\n                    else {\n                        let header = ul.appendChild(document.createElement(\"completion-section\"));\n                        header.textContent = name;\n                    }\n                }\n            }\n            const li = ul.appendChild(document.createElement(\"li\"));\n            li.id = id + \"-\" + i;\n            li.setAttribute(\"role\", \"option\");\n            let cls = this.optionClass(completion);\n            if (cls)\n                li.className = cls;\n            for (let source of this.optionContent) {\n                let node = source(completion, this.view.state, this.view, match);\n                if (node)\n                    li.appendChild(node);\n            }\n        }\n        if (range.from)\n            ul.classList.add(\"cm-completionListIncompleteTop\");\n        if (range.to < options.length)\n            ul.classList.add(\"cm-completionListIncompleteBottom\");\n        return ul;\n    }\n    destroyInfo() {\n        if (this.info) {\n            if (this.infoDestroy)\n                this.infoDestroy();\n            this.info.remove();\n            this.info = null;\n        }\n    }\n    destroy() {\n        this.destroyInfo();\n    }\n}\nfunction completionTooltip(stateField, applyCompletion) {\n    return (view) => new CompletionTooltip(view, stateField, applyCompletion);\n}\nfunction scrollIntoView(container, element) {\n    let parent = container.getBoundingClientRect();\n    let self = element.getBoundingClientRect();\n    let scaleY = parent.height / container.offsetHeight;\n    if (self.top < parent.top)\n        container.scrollTop -= (parent.top - self.top) / scaleY;\n    else if (self.bottom > parent.bottom)\n        container.scrollTop += (self.bottom - parent.bottom) / scaleY;\n}\n\n// Used to pick a preferred option when two options with the same\n// label occur in the result.\nfunction score(option) {\n    return (option.boost || 0) * 100 + (option.apply ? 10 : 0) + (option.info ? 5 : 0) +\n        (option.type ? 1 : 0);\n}\nfunction sortOptions(active, state) {\n    let options = [];\n    let sections = null;\n    let addOption = (option) => {\n        options.push(option);\n        let { section } = option.completion;\n        if (section) {\n            if (!sections)\n                sections = [];\n            let name = typeof section == \"string\" ? section : section.name;\n            if (!sections.some(s => s.name == name))\n                sections.push(typeof section == \"string\" ? { name } : section);\n        }\n    };\n    let conf = state.facet(completionConfig);\n    for (let a of active)\n        if (a.hasResult()) {\n            let getMatch = a.result.getMatch;\n            if (a.result.filter === false) {\n                for (let option of a.result.options) {\n                    addOption(new Option(option, a.source, getMatch ? getMatch(option) : [], 1e9 - options.length));\n                }\n            }\n            else {\n                let pattern = state.sliceDoc(a.from, a.to), match;\n                let matcher = conf.filterStrict ? new StrictMatcher(pattern) : new FuzzyMatcher(pattern);\n                for (let option of a.result.options)\n                    if (match = matcher.match(option.label)) {\n                        let matched = !option.displayLabel ? match.matched : getMatch ? getMatch(option, match.matched) : [];\n                        addOption(new Option(option, a.source, matched, match.score + (option.boost || 0)));\n                    }\n            }\n        }\n    if (sections) {\n        let sectionOrder = Object.create(null), pos = 0;\n        let cmp = (a, b) => { var _a, _b; return ((_a = a.rank) !== null && _a !== void 0 ? _a : 1e9) - ((_b = b.rank) !== null && _b !== void 0 ? _b : 1e9) || (a.name < b.name ? -1 : 1); };\n        for (let s of sections.sort(cmp)) {\n            pos -= 1e5;\n            sectionOrder[s.name] = pos;\n        }\n        for (let option of options) {\n            let { section } = option.completion;\n            if (section)\n                option.score += sectionOrder[typeof section == \"string\" ? section : section.name];\n        }\n    }\n    let result = [], prev = null;\n    let compare = conf.compareCompletions;\n    for (let opt of options.sort((a, b) => (b.score - a.score) || compare(a.completion, b.completion))) {\n        let cur = opt.completion;\n        if (!prev || prev.label != cur.label || prev.detail != cur.detail ||\n            (prev.type != null && cur.type != null && prev.type != cur.type) ||\n            prev.apply != cur.apply || prev.boost != cur.boost)\n            result.push(opt);\n        else if (score(opt.completion) > score(prev))\n            result[result.length - 1] = opt;\n        prev = opt.completion;\n    }\n    return result;\n}\nclass CompletionDialog {\n    constructor(options, attrs, tooltip, timestamp, selected, disabled) {\n        this.options = options;\n        this.attrs = attrs;\n        this.tooltip = tooltip;\n        this.timestamp = timestamp;\n        this.selected = selected;\n        this.disabled = disabled;\n    }\n    setSelected(selected, id) {\n        return selected == this.selected || selected >= this.options.length ? this\n            : new CompletionDialog(this.options, makeAttrs(id, selected), this.tooltip, this.timestamp, selected, this.disabled);\n    }\n    static build(active, state, id, prev, conf) {\n        let options = sortOptions(active, state);\n        if (!options.length) {\n            return prev && active.some(a => a.state == 1 /* State.Pending */) ?\n                new CompletionDialog(prev.options, prev.attrs, prev.tooltip, prev.timestamp, prev.selected, true) : null;\n        }\n        let selected = state.facet(completionConfig).selectOnOpen ? 0 : -1;\n        if (prev && prev.selected != selected && prev.selected != -1) {\n            let selectedValue = prev.options[prev.selected].completion;\n            for (let i = 0; i < options.length; i++)\n                if (options[i].completion == selectedValue) {\n                    selected = i;\n                    break;\n                }\n        }\n        return new CompletionDialog(options, makeAttrs(id, selected), {\n            pos: active.reduce((a, b) => b.hasResult() ? Math.min(a, b.from) : a, 1e8),\n            create: createTooltip,\n            above: conf.aboveCursor,\n        }, prev ? prev.timestamp : Date.now(), selected, false);\n    }\n    map(changes) {\n        return new CompletionDialog(this.options, this.attrs, Object.assign(Object.assign({}, this.tooltip), { pos: changes.mapPos(this.tooltip.pos) }), this.timestamp, this.selected, this.disabled);\n    }\n}\nclass CompletionState {\n    constructor(active, id, open) {\n        this.active = active;\n        this.id = id;\n        this.open = open;\n    }\n    static start() {\n        return new CompletionState(none, \"cm-ac-\" + Math.floor(Math.random() * 2e6).toString(36), null);\n    }\n    update(tr) {\n        let { state } = tr, conf = state.facet(completionConfig);\n        let sources = conf.override ||\n            state.languageDataAt(\"autocomplete\", cur(state)).map(asSource);\n        let active = sources.map(source => {\n            let value = this.active.find(s => s.source == source) ||\n                new ActiveSource(source, this.active.some(a => a.state != 0 /* State.Inactive */) ? 1 /* State.Pending */ : 0 /* State.Inactive */);\n            return value.update(tr, conf);\n        });\n        if (active.length == this.active.length && active.every((a, i) => a == this.active[i]))\n            active = this.active;\n        let open = this.open;\n        if (open && tr.docChanged)\n            open = open.map(tr.changes);\n        if (tr.selection || active.some(a => a.hasResult() && tr.changes.touchesRange(a.from, a.to)) ||\n            !sameResults(active, this.active))\n            open = CompletionDialog.build(active, state, this.id, open, conf);\n        else if (open && open.disabled && !active.some(a => a.state == 1 /* State.Pending */))\n            open = null;\n        if (!open && active.every(a => a.state != 1 /* State.Pending */) && active.some(a => a.hasResult()))\n            active = active.map(a => a.hasResult() ? new ActiveSource(a.source, 0 /* State.Inactive */) : a);\n        for (let effect of tr.effects)\n            if (effect.is(setSelectedEffect))\n                open = open && open.setSelected(effect.value, this.id);\n        return active == this.active && open == this.open ? this : new CompletionState(active, this.id, open);\n    }\n    get tooltip() { return this.open ? this.open.tooltip : null; }\n    get attrs() { return this.open ? this.open.attrs : this.active.length ? baseAttrs : noAttrs; }\n}\nfunction sameResults(a, b) {\n    if (a == b)\n        return true;\n    for (let iA = 0, iB = 0;;) {\n        while (iA < a.length && !a[iA].hasResult)\n            iA++;\n        while (iB < b.length && !b[iB].hasResult)\n            iB++;\n        let endA = iA == a.length, endB = iB == b.length;\n        if (endA || endB)\n            return endA == endB;\n        if (a[iA++].result != b[iB++].result)\n            return false;\n    }\n}\nconst baseAttrs = {\n    \"aria-autocomplete\": \"list\"\n};\nconst noAttrs = {};\nfunction makeAttrs(id, selected) {\n    let result = {\n        \"aria-autocomplete\": \"list\",\n        \"aria-haspopup\": \"listbox\",\n        \"aria-controls\": id\n    };\n    if (selected > -1)\n        result[\"aria-activedescendant\"] = id + \"-\" + selected;\n    return result;\n}\nconst none = [];\nfunction getUpdateType(tr, conf) {\n    if (tr.isUserEvent(\"input.complete\")) {\n        let completion = tr.annotation(pickedCompletion);\n        if (completion && conf.activateOnCompletion(completion))\n            return 4 /* UpdateType.Activate */ | 8 /* UpdateType.Reset */;\n    }\n    let typing = tr.isUserEvent(\"input.type\");\n    return typing && conf.activateOnTyping ? 4 /* UpdateType.Activate */ | 1 /* UpdateType.Typing */\n        : typing ? 1 /* UpdateType.Typing */\n            : tr.isUserEvent(\"delete.backward\") ? 2 /* UpdateType.Backspacing */\n                : tr.selection ? 8 /* UpdateType.Reset */\n                    : tr.docChanged ? 16 /* UpdateType.ResetIfTouching */ : 0 /* UpdateType.None */;\n}\nclass ActiveSource {\n    constructor(source, state, explicitPos = -1) {\n        this.source = source;\n        this.state = state;\n        this.explicitPos = explicitPos;\n    }\n    hasResult() { return false; }\n    update(tr, conf) {\n        let type = getUpdateType(tr, conf), value = this;\n        if ((type & 8 /* UpdateType.Reset */) || (type & 16 /* UpdateType.ResetIfTouching */) && this.touches(tr))\n            value = new ActiveSource(value.source, 0 /* State.Inactive */);\n        if ((type & 4 /* UpdateType.Activate */) && value.state == 0 /* State.Inactive */)\n            value = new ActiveSource(this.source, 1 /* State.Pending */);\n        value = value.updateFor(tr, type);\n        for (let effect of tr.effects) {\n            if (effect.is(startCompletionEffect))\n                value = new ActiveSource(value.source, 1 /* State.Pending */, effect.value ? cur(tr.state) : -1);\n            else if (effect.is(closeCompletionEffect))\n                value = new ActiveSource(value.source, 0 /* State.Inactive */);\n            else if (effect.is(setActiveEffect))\n                for (let active of effect.value)\n                    if (active.source == value.source)\n                        value = active;\n        }\n        return value;\n    }\n    updateFor(tr, type) { return this.map(tr.changes); }\n    map(changes) {\n        return changes.empty || this.explicitPos < 0 ? this : new ActiveSource(this.source, this.state, changes.mapPos(this.explicitPos));\n    }\n    touches(tr) {\n        return tr.changes.touchesRange(cur(tr.state));\n    }\n}\nclass ActiveResult extends ActiveSource {\n    constructor(source, explicitPos, result, from, to) {\n        super(source, 2 /* State.Result */, explicitPos);\n        this.result = result;\n        this.from = from;\n        this.to = to;\n    }\n    hasResult() { return true; }\n    updateFor(tr, type) {\n        var _a;\n        if (!(type & 3 /* UpdateType.SimpleInteraction */))\n            return this.map(tr.changes);\n        let result = this.result;\n        if (result.map && !tr.changes.empty)\n            result = result.map(result, tr.changes);\n        let from = tr.changes.mapPos(this.from), to = tr.changes.mapPos(this.to, 1);\n        let pos = cur(tr.state);\n        if ((this.explicitPos < 0 ? pos <= from : pos < this.from) ||\n            pos > to || !result ||\n            (type & 2 /* UpdateType.Backspacing */) && cur(tr.startState) == this.from)\n            return new ActiveSource(this.source, type & 4 /* UpdateType.Activate */ ? 1 /* State.Pending */ : 0 /* State.Inactive */);\n        let explicitPos = this.explicitPos < 0 ? -1 : tr.changes.mapPos(this.explicitPos);\n        if (checkValid(result.validFor, tr.state, from, to))\n            return new ActiveResult(this.source, explicitPos, result, from, to);\n        if (result.update &&\n            (result = result.update(result, from, to, new CompletionContext(tr.state, pos, explicitPos >= 0))))\n            return new ActiveResult(this.source, explicitPos, result, result.from, (_a = result.to) !== null && _a !== void 0 ? _a : cur(tr.state));\n        return new ActiveSource(this.source, 1 /* State.Pending */, explicitPos);\n    }\n    map(mapping) {\n        if (mapping.empty)\n            return this;\n        let result = this.result.map ? this.result.map(this.result, mapping) : this.result;\n        if (!result)\n            return new ActiveSource(this.source, 0 /* State.Inactive */);\n        return new ActiveResult(this.source, this.explicitPos < 0 ? -1 : mapping.mapPos(this.explicitPos), this.result, mapping.mapPos(this.from), mapping.mapPos(this.to, 1));\n    }\n    touches(tr) {\n        return tr.changes.touchesRange(this.from, this.to);\n    }\n}\nfunction checkValid(validFor, state, from, to) {\n    if (!validFor)\n        return false;\n    let text = state.sliceDoc(from, to);\n    return typeof validFor == \"function\" ? validFor(text, from, to, state) : ensureAnchor(validFor, true).test(text);\n}\nconst setActiveEffect = /*@__PURE__*/StateEffect.define({\n    map(sources, mapping) { return sources.map(s => s.map(mapping)); }\n});\nconst setSelectedEffect = /*@__PURE__*/StateEffect.define();\nconst completionState = /*@__PURE__*/StateField.define({\n    create() { return CompletionState.start(); },\n    update(value, tr) { return value.update(tr); },\n    provide: f => [\n        showTooltip.from(f, val => val.tooltip),\n        EditorView.contentAttributes.from(f, state => state.attrs)\n    ]\n});\nfunction applyCompletion(view, option) {\n    const apply = option.completion.apply || option.completion.label;\n    let result = view.state.field(completionState).active.find(a => a.source == option.source);\n    if (!(result instanceof ActiveResult))\n        return false;\n    if (typeof apply == \"string\")\n        view.dispatch(Object.assign(Object.assign({}, insertCompletionText(view.state, apply, result.from, result.to)), { annotations: pickedCompletion.of(option.completion) }));\n    else\n        apply(view, option.completion, result.from, result.to);\n    return true;\n}\nconst createTooltip = /*@__PURE__*/completionTooltip(completionState, applyCompletion);\n\n/**\nReturns a command that moves the completion selection forward or\nbackward by the given amount.\n*/\nfunction moveCompletionSelection(forward, by = \"option\") {\n    return (view) => {\n        let cState = view.state.field(completionState, false);\n        if (!cState || !cState.open || cState.open.disabled ||\n            Date.now() - cState.open.timestamp < view.state.facet(completionConfig).interactionDelay)\n            return false;\n        let step = 1, tooltip;\n        if (by == \"page\" && (tooltip = getTooltip(view, cState.open.tooltip)))\n            step = Math.max(2, Math.floor(tooltip.dom.offsetHeight /\n                tooltip.dom.querySelector(\"li\").offsetHeight) - 1);\n        let { length } = cState.open.options;\n        let selected = cState.open.selected > -1 ? cState.open.selected + step * (forward ? 1 : -1) : forward ? 0 : length - 1;\n        if (selected < 0)\n            selected = by == \"page\" ? 0 : length - 1;\n        else if (selected >= length)\n            selected = by == \"page\" ? length - 1 : 0;\n        view.dispatch({ effects: setSelectedEffect.of(selected) });\n        return true;\n    };\n}\n/**\nAccept the current completion.\n*/\nconst acceptCompletion = (view) => {\n    let cState = view.state.field(completionState, false);\n    if (view.state.readOnly || !cState || !cState.open || cState.open.selected < 0 || cState.open.disabled ||\n        Date.now() - cState.open.timestamp < view.state.facet(completionConfig).interactionDelay)\n        return false;\n    return applyCompletion(view, cState.open.options[cState.open.selected]);\n};\n/**\nExplicitly start autocompletion.\n*/\nconst startCompletion = (view) => {\n    let cState = view.state.field(completionState, false);\n    if (!cState)\n        return false;\n    view.dispatch({ effects: startCompletionEffect.of(true) });\n    return true;\n};\n/**\nClose the currently active completion.\n*/\nconst closeCompletion = (view) => {\n    let cState = view.state.field(completionState, false);\n    if (!cState || !cState.active.some(a => a.state != 0 /* State.Inactive */))\n        return false;\n    view.dispatch({ effects: closeCompletionEffect.of(null) });\n    return true;\n};\nclass RunningQuery {\n    constructor(active, context) {\n        this.active = active;\n        this.context = context;\n        this.time = Date.now();\n        this.updates = [];\n        // Note that 'undefined' means 'not done yet', whereas 'null' means\n        // 'query returned null'.\n        this.done = undefined;\n    }\n}\nconst MaxUpdateCount = 50, MinAbortTime = 1000;\nconst completionPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.debounceUpdate = -1;\n        this.running = [];\n        this.debounceAccept = -1;\n        this.pendingStart = false;\n        this.composing = 0 /* CompositionState.None */;\n        for (let active of view.state.field(completionState).active)\n            if (active.state == 1 /* State.Pending */)\n                this.startQuery(active);\n    }\n    update(update) {\n        let cState = update.state.field(completionState);\n        let conf = update.state.facet(completionConfig);\n        if (!update.selectionSet && !update.docChanged && update.startState.field(completionState) == cState)\n            return;\n        let doesReset = update.transactions.some(tr => {\n            let type = getUpdateType(tr, conf);\n            return (type & 8 /* UpdateType.Reset */) || (tr.selection || tr.docChanged) && !(type & 3 /* UpdateType.SimpleInteraction */);\n        });\n        for (let i = 0; i < this.running.length; i++) {\n            let query = this.running[i];\n            if (doesReset ||\n                query.updates.length + update.transactions.length > MaxUpdateCount && Date.now() - query.time > MinAbortTime) {\n                for (let handler of query.context.abortListeners) {\n                    try {\n                        handler();\n                    }\n                    catch (e) {\n                        logException(this.view.state, e);\n                    }\n                }\n                query.context.abortListeners = null;\n                this.running.splice(i--, 1);\n            }\n            else {\n                query.updates.push(...update.transactions);\n            }\n        }\n        if (this.debounceUpdate > -1)\n            clearTimeout(this.debounceUpdate);\n        if (update.transactions.some(tr => tr.effects.some(e => e.is(startCompletionEffect))))\n            this.pendingStart = true;\n        let delay = this.pendingStart ? 50 : conf.activateOnTypingDelay;\n        this.debounceUpdate = cState.active.some(a => a.state == 1 /* State.Pending */ && !this.running.some(q => q.active.source == a.source))\n            ? setTimeout(() => this.startUpdate(), delay) : -1;\n        if (this.composing != 0 /* CompositionState.None */)\n            for (let tr of update.transactions) {\n                if (tr.isUserEvent(\"input.type\"))\n                    this.composing = 2 /* CompositionState.Changed */;\n                else if (this.composing == 2 /* CompositionState.Changed */ && tr.selection)\n                    this.composing = 3 /* CompositionState.ChangedAndMoved */;\n            }\n    }\n    startUpdate() {\n        this.debounceUpdate = -1;\n        this.pendingStart = false;\n        let { state } = this.view, cState = state.field(completionState);\n        for (let active of cState.active) {\n            if (active.state == 1 /* State.Pending */ && !this.running.some(r => r.active.source == active.source))\n                this.startQuery(active);\n        }\n    }\n    startQuery(active) {\n        let { state } = this.view, pos = cur(state);\n        let context = new CompletionContext(state, pos, active.explicitPos == pos, this.view);\n        let pending = new RunningQuery(active, context);\n        this.running.push(pending);\n        Promise.resolve(active.source(context)).then(result => {\n            if (!pending.context.aborted) {\n                pending.done = result || null;\n                this.scheduleAccept();\n            }\n        }, err => {\n            this.view.dispatch({ effects: closeCompletionEffect.of(null) });\n            logException(this.view.state, err);\n        });\n    }\n    scheduleAccept() {\n        if (this.running.every(q => q.done !== undefined))\n            this.accept();\n        else if (this.debounceAccept < 0)\n            this.debounceAccept = setTimeout(() => this.accept(), this.view.state.facet(completionConfig).updateSyncTime);\n    }\n    // For each finished query in this.running, try to create a result\n    // or, if appropriate, restart the query.\n    accept() {\n        var _a;\n        if (this.debounceAccept > -1)\n            clearTimeout(this.debounceAccept);\n        this.debounceAccept = -1;\n        let updated = [];\n        let conf = this.view.state.facet(completionConfig);\n        for (let i = 0; i < this.running.length; i++) {\n            let query = this.running[i];\n            if (query.done === undefined)\n                continue;\n            this.running.splice(i--, 1);\n            if (query.done) {\n                let active = new ActiveResult(query.active.source, query.active.explicitPos, query.done, query.done.from, (_a = query.done.to) !== null && _a !== void 0 ? _a : cur(query.updates.length ? query.updates[0].startState : this.view.state));\n                // Replay the transactions that happened since the start of\n                // the request and see if that preserves the result\n                for (let tr of query.updates)\n                    active = active.update(tr, conf);\n                if (active.hasResult()) {\n                    updated.push(active);\n                    continue;\n                }\n            }\n            let current = this.view.state.field(completionState).active.find(a => a.source == query.active.source);\n            if (current && current.state == 1 /* State.Pending */) {\n                if (query.done == null) {\n                    // Explicitly failed. Should clear the pending status if it\n                    // hasn't been re-set in the meantime.\n                    let active = new ActiveSource(query.active.source, 0 /* State.Inactive */);\n                    for (let tr of query.updates)\n                        active = active.update(tr, conf);\n                    if (active.state != 1 /* State.Pending */)\n                        updated.push(active);\n                }\n                else {\n                    // Cleared by subsequent transactions. Restart.\n                    this.startQuery(current);\n                }\n            }\n        }\n        if (updated.length)\n            this.view.dispatch({ effects: setActiveEffect.of(updated) });\n    }\n}, {\n    eventHandlers: {\n        blur(event) {\n            let state = this.view.state.field(completionState, false);\n            if (state && state.tooltip && this.view.state.facet(completionConfig).closeOnBlur) {\n                let dialog = state.open && getTooltip(this.view, state.open.tooltip);\n                if (!dialog || !dialog.dom.contains(event.relatedTarget))\n                    setTimeout(() => this.view.dispatch({ effects: closeCompletionEffect.of(null) }), 10);\n            }\n        },\n        compositionstart() {\n            this.composing = 1 /* CompositionState.Started */;\n        },\n        compositionend() {\n            if (this.composing == 3 /* CompositionState.ChangedAndMoved */) {\n                // Safari fires compositionend events synchronously, possibly\n                // from inside an update, so dispatch asynchronously to avoid reentrancy\n                setTimeout(() => this.view.dispatch({ effects: startCompletionEffect.of(false) }), 20);\n            }\n            this.composing = 0 /* CompositionState.None */;\n        }\n    }\n});\nconst windows = typeof navigator == \"object\" && /*@__PURE__*//Win/.test(navigator.platform);\nconst commitCharacters = /*@__PURE__*/Prec.highest(/*@__PURE__*/EditorView.domEventHandlers({\n    keydown(event, view) {\n        let field = view.state.field(completionState, false);\n        if (!field || !field.open || field.open.disabled || field.open.selected < 0 ||\n            event.key.length > 1 || event.ctrlKey && !(windows && event.altKey) || event.metaKey)\n            return false;\n        let option = field.open.options[field.open.selected];\n        let result = field.active.find(a => a.source == option.source);\n        let commitChars = option.completion.commitCharacters || result.result.commitCharacters;\n        if (commitChars && commitChars.indexOf(event.key) > -1)\n            applyCompletion(view, option);\n        return false;\n    }\n}));\n\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-tooltip.cm-tooltip-autocomplete\": {\n        \"& > ul\": {\n            fontFamily: \"monospace\",\n            whiteSpace: \"nowrap\",\n            overflow: \"hidden auto\",\n            maxWidth_fallback: \"700px\",\n            maxWidth: \"min(700px, 95vw)\",\n            minWidth: \"250px\",\n            maxHeight: \"10em\",\n            height: \"100%\",\n            listStyle: \"none\",\n            margin: 0,\n            padding: 0,\n            \"& > li, & > completion-section\": {\n                padding: \"1px 3px\",\n                lineHeight: 1.2\n            },\n            \"& > li\": {\n                overflowX: \"hidden\",\n                textOverflow: \"ellipsis\",\n                cursor: \"pointer\"\n            },\n            \"& > completion-section\": {\n                display: \"list-item\",\n                borderBottom: \"1px solid silver\",\n                paddingLeft: \"0.5em\",\n                opacity: 0.7\n            }\n        }\n    },\n    \"&light .cm-tooltip-autocomplete ul li[aria-selected]\": {\n        background: \"#17c\",\n        color: \"white\",\n    },\n    \"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]\": {\n        background: \"#777\",\n    },\n    \"&dark .cm-tooltip-autocomplete ul li[aria-selected]\": {\n        background: \"#347\",\n        color: \"white\",\n    },\n    \"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]\": {\n        background: \"#444\",\n    },\n    \".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after\": {\n        content: '\"···\"',\n        opacity: 0.5,\n        display: \"block\",\n        textAlign: \"center\"\n    },\n    \".cm-tooltip.cm-completionInfo\": {\n        position: \"absolute\",\n        padding: \"3px 9px\",\n        width: \"max-content\",\n        maxWidth: `${400 /* Info.Width */}px`,\n        boxSizing: \"border-box\"\n    },\n    \".cm-completionInfo.cm-completionInfo-left\": { right: \"100%\" },\n    \".cm-completionInfo.cm-completionInfo-right\": { left: \"100%\" },\n    \".cm-completionInfo.cm-completionInfo-left-narrow\": { right: `${30 /* Info.Margin */}px` },\n    \".cm-completionInfo.cm-completionInfo-right-narrow\": { left: `${30 /* Info.Margin */}px` },\n    \"&light .cm-snippetField\": { backgroundColor: \"#00000022\" },\n    \"&dark .cm-snippetField\": { backgroundColor: \"#ffffff22\" },\n    \".cm-snippetFieldPosition\": {\n        verticalAlign: \"text-top\",\n        width: 0,\n        height: \"1.15em\",\n        display: \"inline-block\",\n        margin: \"0 -0.7px -.7em\",\n        borderLeft: \"1.4px dotted #888\"\n    },\n    \".cm-completionMatchedText\": {\n        textDecoration: \"underline\"\n    },\n    \".cm-completionDetail\": {\n        marginLeft: \"0.5em\",\n        fontStyle: \"italic\"\n    },\n    \".cm-completionIcon\": {\n        fontSize: \"90%\",\n        width: \".8em\",\n        display: \"inline-block\",\n        textAlign: \"center\",\n        paddingRight: \".6em\",\n        opacity: \"0.6\",\n        boxSizing: \"content-box\"\n    },\n    \".cm-completionIcon-function, .cm-completionIcon-method\": {\n        \"&:after\": { content: \"'ƒ'\" }\n    },\n    \".cm-completionIcon-class\": {\n        \"&:after\": { content: \"'○'\" }\n    },\n    \".cm-completionIcon-interface\": {\n        \"&:after\": { content: \"'◌'\" }\n    },\n    \".cm-completionIcon-variable\": {\n        \"&:after\": { content: \"'𝑥'\" }\n    },\n    \".cm-completionIcon-constant\": {\n        \"&:after\": { content: \"'𝐶'\" }\n    },\n    \".cm-completionIcon-type\": {\n        \"&:after\": { content: \"'𝑡'\" }\n    },\n    \".cm-completionIcon-enum\": {\n        \"&:after\": { content: \"'∪'\" }\n    },\n    \".cm-completionIcon-property\": {\n        \"&:after\": { content: \"'□'\" }\n    },\n    \".cm-completionIcon-keyword\": {\n        \"&:after\": { content: \"'🔑\\uFE0E'\" } // Disable emoji rendering\n    },\n    \".cm-completionIcon-namespace\": {\n        \"&:after\": { content: \"'▢'\" }\n    },\n    \".cm-completionIcon-text\": {\n        \"&:after\": { content: \"'abc'\", fontSize: \"50%\", verticalAlign: \"middle\" }\n    }\n});\n\nclass FieldPos {\n    constructor(field, line, from, to) {\n        this.field = field;\n        this.line = line;\n        this.from = from;\n        this.to = to;\n    }\n}\nclass FieldRange {\n    constructor(field, from, to) {\n        this.field = field;\n        this.from = from;\n        this.to = to;\n    }\n    map(changes) {\n        let from = changes.mapPos(this.from, -1, MapMode.TrackDel);\n        let to = changes.mapPos(this.to, 1, MapMode.TrackDel);\n        return from == null || to == null ? null : new FieldRange(this.field, from, to);\n    }\n}\nclass Snippet {\n    constructor(lines, fieldPositions) {\n        this.lines = lines;\n        this.fieldPositions = fieldPositions;\n    }\n    instantiate(state, pos) {\n        let text = [], lineStart = [pos];\n        let lineObj = state.doc.lineAt(pos), baseIndent = /^\\s*/.exec(lineObj.text)[0];\n        for (let line of this.lines) {\n            if (text.length) {\n                let indent = baseIndent, tabs = /^\\t*/.exec(line)[0].length;\n                for (let i = 0; i < tabs; i++)\n                    indent += state.facet(indentUnit);\n                lineStart.push(pos + indent.length - tabs);\n                line = indent + line.slice(tabs);\n            }\n            text.push(line);\n            pos += line.length + 1;\n        }\n        let ranges = this.fieldPositions.map(pos => new FieldRange(pos.field, lineStart[pos.line] + pos.from, lineStart[pos.line] + pos.to));\n        return { text, ranges };\n    }\n    static parse(template) {\n        let fields = [];\n        let lines = [], positions = [], m;\n        for (let line of template.split(/\\r\\n?|\\n/)) {\n            while (m = /[#$]\\{(?:(\\d+)(?::([^}]*))?|((?:\\\\[{}]|[^}])*))\\}/.exec(line)) {\n                let seq = m[1] ? +m[1] : null, rawName = m[2] || m[3] || \"\", found = -1;\n                let name = rawName.replace(/\\\\[{}]/g, m => m[1]);\n                for (let i = 0; i < fields.length; i++) {\n                    if (seq != null ? fields[i].seq == seq : name ? fields[i].name == name : false)\n                        found = i;\n                }\n                if (found < 0) {\n                    let i = 0;\n                    while (i < fields.length && (seq == null || (fields[i].seq != null && fields[i].seq < seq)))\n                        i++;\n                    fields.splice(i, 0, { seq, name });\n                    found = i;\n                    for (let pos of positions)\n                        if (pos.field >= found)\n                            pos.field++;\n                }\n                positions.push(new FieldPos(found, lines.length, m.index, m.index + name.length));\n                line = line.slice(0, m.index) + rawName + line.slice(m.index + m[0].length);\n            }\n            line = line.replace(/\\\\([{}])/g, (_, brace, index) => {\n                for (let pos of positions)\n                    if (pos.line == lines.length && pos.from > index) {\n                        pos.from--;\n                        pos.to--;\n                    }\n                return brace;\n            });\n            lines.push(line);\n        }\n        return new Snippet(lines, positions);\n    }\n}\nlet fieldMarker = /*@__PURE__*/Decoration.widget({ widget: /*@__PURE__*/new class extends WidgetType {\n        toDOM() {\n            let span = document.createElement(\"span\");\n            span.className = \"cm-snippetFieldPosition\";\n            return span;\n        }\n        ignoreEvent() { return false; }\n    } });\nlet fieldRange = /*@__PURE__*/Decoration.mark({ class: \"cm-snippetField\" });\nclass ActiveSnippet {\n    constructor(ranges, active) {\n        this.ranges = ranges;\n        this.active = active;\n        this.deco = Decoration.set(ranges.map(r => (r.from == r.to ? fieldMarker : fieldRange).range(r.from, r.to)));\n    }\n    map(changes) {\n        let ranges = [];\n        for (let r of this.ranges) {\n            let mapped = r.map(changes);\n            if (!mapped)\n                return null;\n            ranges.push(mapped);\n        }\n        return new ActiveSnippet(ranges, this.active);\n    }\n    selectionInsideField(sel) {\n        return sel.ranges.every(range => this.ranges.some(r => r.field == this.active && r.from <= range.from && r.to >= range.to));\n    }\n}\nconst setActive = /*@__PURE__*/StateEffect.define({\n    map(value, changes) { return value && value.map(changes); }\n});\nconst moveToField = /*@__PURE__*/StateEffect.define();\nconst snippetState = /*@__PURE__*/StateField.define({\n    create() { return null; },\n    update(value, tr) {\n        for (let effect of tr.effects) {\n            if (effect.is(setActive))\n                return effect.value;\n            if (effect.is(moveToField) && value)\n                return new ActiveSnippet(value.ranges, effect.value);\n        }\n        if (value && tr.docChanged)\n            value = value.map(tr.changes);\n        if (value && tr.selection && !value.selectionInsideField(tr.selection))\n            value = null;\n        return value;\n    },\n    provide: f => EditorView.decorations.from(f, val => val ? val.deco : Decoration.none)\n});\nfunction fieldSelection(ranges, field) {\n    return EditorSelection.create(ranges.filter(r => r.field == field).map(r => EditorSelection.range(r.from, r.to)));\n}\n/**\nConvert a snippet template to a function that can\n[apply](https://codemirror.net/6/docs/ref/#autocomplete.Completion.apply) it. Snippets are written\nusing syntax like this:\n\n    \"for (let ${index} = 0; ${index} < ${end}; ${index}++) {\\n\\t${}\\n}\"\n\nEach `${}` placeholder (you may also use `#{}`) indicates a field\nthat the user can fill in. Its name, if any, will be the default\ncontent for the field.\n\nWhen the snippet is activated by calling the returned function,\nthe code is inserted at the given position. Newlines in the\ntemplate are indented by the indentation of the start line, plus\none [indent unit](https://codemirror.net/6/docs/ref/#language.indentUnit) per tab character after\nthe newline.\n\nOn activation, (all instances of) the first field are selected.\nThe user can move between fields with Tab and Shift-Tab as long as\nthe fields are active. Moving to the last field or moving the\ncursor out of the current field deactivates the fields.\n\nThe order of fields defaults to textual order, but you can add\nnumbers to placeholders (`${1}` or `${1:defaultText}`) to provide\na custom order.\n\nTo include a literal `{` or `}` in your template, put a backslash\nin front of it. This will be removed and the brace will not be\ninterpreted as indicating a placeholder.\n*/\nfunction snippet(template) {\n    let snippet = Snippet.parse(template);\n    return (editor, completion, from, to) => {\n        let { text, ranges } = snippet.instantiate(editor.state, from);\n        let spec = {\n            changes: { from, to, insert: Text.of(text) },\n            scrollIntoView: true,\n            annotations: completion ? [pickedCompletion.of(completion), Transaction.userEvent.of(\"input.complete\")] : undefined\n        };\n        if (ranges.length)\n            spec.selection = fieldSelection(ranges, 0);\n        if (ranges.some(r => r.field > 0)) {\n            let active = new ActiveSnippet(ranges, 0);\n            let effects = spec.effects = [setActive.of(active)];\n            if (editor.state.field(snippetState, false) === undefined)\n                effects.push(StateEffect.appendConfig.of([snippetState, addSnippetKeymap, snippetPointerHandler, baseTheme]));\n        }\n        editor.dispatch(editor.state.update(spec));\n    };\n}\nfunction moveField(dir) {\n    return ({ state, dispatch }) => {\n        let active = state.field(snippetState, false);\n        if (!active || dir < 0 && active.active == 0)\n            return false;\n        let next = active.active + dir, last = dir > 0 && !active.ranges.some(r => r.field == next + dir);\n        dispatch(state.update({\n            selection: fieldSelection(active.ranges, next),\n            effects: setActive.of(last ? null : new ActiveSnippet(active.ranges, next)),\n            scrollIntoView: true\n        }));\n        return true;\n    };\n}\n/**\nA command that clears the active snippet, if any.\n*/\nconst clearSnippet = ({ state, dispatch }) => {\n    let active = state.field(snippetState, false);\n    if (!active)\n        return false;\n    dispatch(state.update({ effects: setActive.of(null) }));\n    return true;\n};\n/**\nMove to the next snippet field, if available.\n*/\nconst nextSnippetField = /*@__PURE__*/moveField(1);\n/**\nMove to the previous snippet field, if available.\n*/\nconst prevSnippetField = /*@__PURE__*/moveField(-1);\n/**\nCheck if there is an active snippet with a next field for\n`nextSnippetField` to move to.\n*/\nfunction hasNextSnippetField(state) {\n    let active = state.field(snippetState, false);\n    return !!(active && active.ranges.some(r => r.field == active.active + 1));\n}\n/**\nReturns true if there is an active snippet and a previous field\nfor `prevSnippetField` to move to.\n*/\nfunction hasPrevSnippetField(state) {\n    let active = state.field(snippetState, false);\n    return !!(active && active.active > 0);\n}\nconst defaultSnippetKeymap = [\n    { key: \"Tab\", run: nextSnippetField, shift: prevSnippetField },\n    { key: \"Escape\", run: clearSnippet }\n];\n/**\nA facet that can be used to configure the key bindings used by\nsnippets. The default binds Tab to\n[`nextSnippetField`](https://codemirror.net/6/docs/ref/#autocomplete.nextSnippetField), Shift-Tab to\n[`prevSnippetField`](https://codemirror.net/6/docs/ref/#autocomplete.prevSnippetField), and Escape\nto [`clearSnippet`](https://codemirror.net/6/docs/ref/#autocomplete.clearSnippet).\n*/\nconst snippetKeymap = /*@__PURE__*/Facet.define({\n    combine(maps) { return maps.length ? maps[0] : defaultSnippetKeymap; }\n});\nconst addSnippetKeymap = /*@__PURE__*/Prec.highest(/*@__PURE__*/keymap.compute([snippetKeymap], state => state.facet(snippetKeymap)));\n/**\nCreate a completion from a snippet. Returns an object with the\nproperties from `completion`, plus an `apply` function that\napplies the snippet.\n*/\nfunction snippetCompletion(template, completion) {\n    return Object.assign(Object.assign({}, completion), { apply: snippet(template) });\n}\nconst snippetPointerHandler = /*@__PURE__*/EditorView.domEventHandlers({\n    mousedown(event, view) {\n        let active = view.state.field(snippetState, false), pos;\n        if (!active || (pos = view.posAtCoords({ x: event.clientX, y: event.clientY })) == null)\n            return false;\n        let match = active.ranges.find(r => r.from <= pos && r.to >= pos);\n        if (!match || match.field == active.active)\n            return false;\n        view.dispatch({\n            selection: fieldSelection(active.ranges, match.field),\n            effects: setActive.of(active.ranges.some(r => r.field > match.field)\n                ? new ActiveSnippet(active.ranges, match.field) : null),\n            scrollIntoView: true\n        });\n        return true;\n    }\n});\n\nfunction wordRE(wordChars) {\n    let escaped = wordChars.replace(/[\\]\\-\\\\]/g, \"\\\\$&\");\n    try {\n        return new RegExp(`[\\\\p{Alphabetic}\\\\p{Number}_${escaped}]+`, \"ug\");\n    }\n    catch (_a) {\n        return new RegExp(`[\\w${escaped}]`, \"g\");\n    }\n}\nfunction mapRE(re, f) {\n    return new RegExp(f(re.source), re.unicode ? \"u\" : \"\");\n}\nconst wordCaches = /*@__PURE__*/Object.create(null);\nfunction wordCache(wordChars) {\n    return wordCaches[wordChars] || (wordCaches[wordChars] = new WeakMap);\n}\nfunction storeWords(doc, wordRE, result, seen, ignoreAt) {\n    for (let lines = doc.iterLines(), pos = 0; !lines.next().done;) {\n        let { value } = lines, m;\n        wordRE.lastIndex = 0;\n        while (m = wordRE.exec(value)) {\n            if (!seen[m[0]] && pos + m.index != ignoreAt) {\n                result.push({ type: \"text\", label: m[0] });\n                seen[m[0]] = true;\n                if (result.length >= 2000 /* C.MaxList */)\n                    return;\n            }\n        }\n        pos += value.length + 1;\n    }\n}\nfunction collectWords(doc, cache, wordRE, to, ignoreAt) {\n    let big = doc.length >= 1000 /* C.MinCacheLen */;\n    let cached = big && cache.get(doc);\n    if (cached)\n        return cached;\n    let result = [], seen = Object.create(null);\n    if (doc.children) {\n        let pos = 0;\n        for (let ch of doc.children) {\n            if (ch.length >= 1000 /* C.MinCacheLen */) {\n                for (let c of collectWords(ch, cache, wordRE, to - pos, ignoreAt - pos)) {\n                    if (!seen[c.label]) {\n                        seen[c.label] = true;\n                        result.push(c);\n                    }\n                }\n            }\n            else {\n                storeWords(ch, wordRE, result, seen, ignoreAt - pos);\n            }\n            pos += ch.length + 1;\n        }\n    }\n    else {\n        storeWords(doc, wordRE, result, seen, ignoreAt);\n    }\n    if (big && result.length < 2000 /* C.MaxList */)\n        cache.set(doc, result);\n    return result;\n}\n/**\nA completion source that will scan the document for words (using a\n[character categorizer](https://codemirror.net/6/docs/ref/#state.EditorState.charCategorizer)), and\nreturn those as completions.\n*/\nconst completeAnyWord = context => {\n    let wordChars = context.state.languageDataAt(\"wordChars\", context.pos).join(\"\");\n    let re = wordRE(wordChars);\n    let token = context.matchBefore(mapRE(re, s => s + \"$\"));\n    if (!token && !context.explicit)\n        return null;\n    let from = token ? token.from : context.pos;\n    let options = collectWords(context.state.doc, wordCache(wordChars), re, 50000 /* C.Range */, from);\n    return { from, options, validFor: mapRE(re, s => \"^\" + s) };\n};\n\nconst defaults = {\n    brackets: [\"(\", \"[\", \"{\", \"'\", '\"'],\n    before: \")]}:;>\",\n    stringPrefixes: []\n};\nconst closeBracketEffect = /*@__PURE__*/StateEffect.define({\n    map(value, mapping) {\n        let mapped = mapping.mapPos(value, -1, MapMode.TrackAfter);\n        return mapped == null ? undefined : mapped;\n    }\n});\nconst closedBracket = /*@__PURE__*/new class extends RangeValue {\n};\nclosedBracket.startSide = 1;\nclosedBracket.endSide = -1;\nconst bracketState = /*@__PURE__*/StateField.define({\n    create() { return RangeSet.empty; },\n    update(value, tr) {\n        value = value.map(tr.changes);\n        if (tr.selection) {\n            let line = tr.state.doc.lineAt(tr.selection.main.head);\n            value = value.update({ filter: from => from >= line.from && from <= line.to });\n        }\n        for (let effect of tr.effects)\n            if (effect.is(closeBracketEffect))\n                value = value.update({ add: [closedBracket.range(effect.value, effect.value + 1)] });\n        return value;\n    }\n});\n/**\nExtension to enable bracket-closing behavior. When a closeable\nbracket is typed, its closing bracket is immediately inserted\nafter the cursor. When closing a bracket directly in front of a\nclosing bracket inserted by the extension, the cursor moves over\nthat bracket.\n*/\nfunction closeBrackets() {\n    return [inputHandler, bracketState];\n}\nconst definedClosing = \"()[]{}<>\";\nfunction closing(ch) {\n    for (let i = 0; i < definedClosing.length; i += 2)\n        if (definedClosing.charCodeAt(i) == ch)\n            return definedClosing.charAt(i + 1);\n    return fromCodePoint(ch < 128 ? ch : ch + 1);\n}\nfunction config(state, pos) {\n    return state.languageDataAt(\"closeBrackets\", pos)[0] || defaults;\n}\nconst android = typeof navigator == \"object\" && /*@__PURE__*//Android\\b/.test(navigator.userAgent);\nconst inputHandler = /*@__PURE__*/EditorView.inputHandler.of((view, from, to, insert) => {\n    if ((android ? view.composing : view.compositionStarted) || view.state.readOnly)\n        return false;\n    let sel = view.state.selection.main;\n    if (insert.length > 2 || insert.length == 2 && codePointSize(codePointAt(insert, 0)) == 1 ||\n        from != sel.from || to != sel.to)\n        return false;\n    let tr = insertBracket(view.state, insert);\n    if (!tr)\n        return false;\n    view.dispatch(tr);\n    return true;\n});\n/**\nCommand that implements deleting a pair of matching brackets when\nthe cursor is between them.\n*/\nconst deleteBracketPair = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let conf = config(state, state.selection.main.head);\n    let tokens = conf.brackets || defaults.brackets;\n    let dont = null, changes = state.changeByRange(range => {\n        if (range.empty) {\n            let before = prevChar(state.doc, range.head);\n            for (let token of tokens) {\n                if (token == before && nextChar(state.doc, range.head) == closing(codePointAt(token, 0)))\n                    return { changes: { from: range.head - token.length, to: range.head + token.length },\n                        range: EditorSelection.cursor(range.head - token.length) };\n            }\n        }\n        return { range: dont = range };\n    });\n    if (!dont)\n        dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"delete.backward\" }));\n    return !dont;\n};\n/**\nClose-brackets related key bindings. Binds Backspace to\n[`deleteBracketPair`](https://codemirror.net/6/docs/ref/#autocomplete.deleteBracketPair).\n*/\nconst closeBracketsKeymap = [\n    { key: \"Backspace\", run: deleteBracketPair }\n];\n/**\nImplements the extension's behavior on text insertion. If the\ngiven string counts as a bracket in the language around the\nselection, and replacing the selection with it requires custom\nbehavior (inserting a closing version or skipping past a\npreviously-closed bracket), this function returns a transaction\nrepresenting that custom behavior. (You only need this if you want\nto programmatically insert brackets—the\n[`closeBrackets`](https://codemirror.net/6/docs/ref/#autocomplete.closeBrackets) extension will\ntake care of running this for user input.)\n*/\nfunction insertBracket(state, bracket) {\n    let conf = config(state, state.selection.main.head);\n    let tokens = conf.brackets || defaults.brackets;\n    for (let tok of tokens) {\n        let closed = closing(codePointAt(tok, 0));\n        if (bracket == tok)\n            return closed == tok ? handleSame(state, tok, tokens.indexOf(tok + tok + tok) > -1, conf)\n                : handleOpen(state, tok, closed, conf.before || defaults.before);\n        if (bracket == closed && closedBracketAt(state, state.selection.main.from))\n            return handleClose(state, tok, closed);\n    }\n    return null;\n}\nfunction closedBracketAt(state, pos) {\n    let found = false;\n    state.field(bracketState).between(0, state.doc.length, from => {\n        if (from == pos)\n            found = true;\n    });\n    return found;\n}\nfunction nextChar(doc, pos) {\n    let next = doc.sliceString(pos, pos + 2);\n    return next.slice(0, codePointSize(codePointAt(next, 0)));\n}\nfunction prevChar(doc, pos) {\n    let prev = doc.sliceString(pos - 2, pos);\n    return codePointSize(codePointAt(prev, 0)) == prev.length ? prev : prev.slice(1);\n}\nfunction handleOpen(state, open, close, closeBefore) {\n    let dont = null, changes = state.changeByRange(range => {\n        if (!range.empty)\n            return { changes: [{ insert: open, from: range.from }, { insert: close, from: range.to }],\n                effects: closeBracketEffect.of(range.to + open.length),\n                range: EditorSelection.range(range.anchor + open.length, range.head + open.length) };\n        let next = nextChar(state.doc, range.head);\n        if (!next || /\\s/.test(next) || closeBefore.indexOf(next) > -1)\n            return { changes: { insert: open + close, from: range.head },\n                effects: closeBracketEffect.of(range.head + open.length),\n                range: EditorSelection.cursor(range.head + open.length) };\n        return { range: dont = range };\n    });\n    return dont ? null : state.update(changes, {\n        scrollIntoView: true,\n        userEvent: \"input.type\"\n    });\n}\nfunction handleClose(state, _open, close) {\n    let dont = null, changes = state.changeByRange(range => {\n        if (range.empty && nextChar(state.doc, range.head) == close)\n            return { changes: { from: range.head, to: range.head + close.length, insert: close },\n                range: EditorSelection.cursor(range.head + close.length) };\n        return dont = { range };\n    });\n    return dont ? null : state.update(changes, {\n        scrollIntoView: true,\n        userEvent: \"input.type\"\n    });\n}\n// Handles cases where the open and close token are the same, and\n// possibly triple quotes (as in `\"\"\"abc\"\"\"`-style quoting).\nfunction handleSame(state, token, allowTriple, config) {\n    let stringPrefixes = config.stringPrefixes || defaults.stringPrefixes;\n    let dont = null, changes = state.changeByRange(range => {\n        if (!range.empty)\n            return { changes: [{ insert: token, from: range.from }, { insert: token, from: range.to }],\n                effects: closeBracketEffect.of(range.to + token.length),\n                range: EditorSelection.range(range.anchor + token.length, range.head + token.length) };\n        let pos = range.head, next = nextChar(state.doc, pos), start;\n        if (next == token) {\n            if (nodeStart(state, pos)) {\n                return { changes: { insert: token + token, from: pos },\n                    effects: closeBracketEffect.of(pos + token.length),\n                    range: EditorSelection.cursor(pos + token.length) };\n            }\n            else if (closedBracketAt(state, pos)) {\n                let isTriple = allowTriple && state.sliceDoc(pos, pos + token.length * 3) == token + token + token;\n                let content = isTriple ? token + token + token : token;\n                return { changes: { from: pos, to: pos + content.length, insert: content },\n                    range: EditorSelection.cursor(pos + content.length) };\n            }\n        }\n        else if (allowTriple && state.sliceDoc(pos - 2 * token.length, pos) == token + token &&\n            (start = canStartStringAt(state, pos - 2 * token.length, stringPrefixes)) > -1 &&\n            nodeStart(state, start)) {\n            return { changes: { insert: token + token + token + token, from: pos },\n                effects: closeBracketEffect.of(pos + token.length),\n                range: EditorSelection.cursor(pos + token.length) };\n        }\n        else if (state.charCategorizer(pos)(next) != CharCategory.Word) {\n            if (canStartStringAt(state, pos, stringPrefixes) > -1 && !probablyInString(state, pos, token, stringPrefixes))\n                return { changes: { insert: token + token, from: pos },\n                    effects: closeBracketEffect.of(pos + token.length),\n                    range: EditorSelection.cursor(pos + token.length) };\n        }\n        return { range: dont = range };\n    });\n    return dont ? null : state.update(changes, {\n        scrollIntoView: true,\n        userEvent: \"input.type\"\n    });\n}\nfunction nodeStart(state, pos) {\n    let tree = syntaxTree(state).resolveInner(pos + 1);\n    return tree.parent && tree.from == pos;\n}\nfunction probablyInString(state, pos, quoteToken, prefixes) {\n    let node = syntaxTree(state).resolveInner(pos, -1);\n    let maxPrefix = prefixes.reduce((m, p) => Math.max(m, p.length), 0);\n    for (let i = 0; i < 5; i++) {\n        let start = state.sliceDoc(node.from, Math.min(node.to, node.from + quoteToken.length + maxPrefix));\n        let quotePos = start.indexOf(quoteToken);\n        if (!quotePos || quotePos > -1 && prefixes.indexOf(start.slice(0, quotePos)) > -1) {\n            let first = node.firstChild;\n            while (first && first.from == node.from && first.to - first.from > quoteToken.length + quotePos) {\n                if (state.sliceDoc(first.to - quoteToken.length, first.to) == quoteToken)\n                    return false;\n                first = first.firstChild;\n            }\n            return true;\n        }\n        let parent = node.to == pos && node.parent;\n        if (!parent)\n            break;\n        node = parent;\n    }\n    return false;\n}\nfunction canStartStringAt(state, pos, prefixes) {\n    let charCat = state.charCategorizer(pos);\n    if (charCat(state.sliceDoc(pos - 1, pos)) != CharCategory.Word)\n        return pos;\n    for (let prefix of prefixes) {\n        let start = pos - prefix.length;\n        if (state.sliceDoc(start, pos) == prefix && charCat(state.sliceDoc(start - 1, start)) != CharCategory.Word)\n            return start;\n    }\n    return -1;\n}\n\n/**\nReturns an extension that enables autocompletion.\n*/\nfunction autocompletion(config = {}) {\n    return [\n        commitCharacters,\n        completionState,\n        completionConfig.of(config),\n        completionPlugin,\n        completionKeymapExt,\n        baseTheme\n    ];\n}\n/**\nBasic keybindings for autocompletion.\n\n - Ctrl-Space: [`startCompletion`](https://codemirror.net/6/docs/ref/#autocomplete.startCompletion)\n - Escape: [`closeCompletion`](https://codemirror.net/6/docs/ref/#autocomplete.closeCompletion)\n - ArrowDown: [`moveCompletionSelection`](https://codemirror.net/6/docs/ref/#autocomplete.moveCompletionSelection)`(true)`\n - ArrowUp: [`moveCompletionSelection`](https://codemirror.net/6/docs/ref/#autocomplete.moveCompletionSelection)`(false)`\n - PageDown: [`moveCompletionSelection`](https://codemirror.net/6/docs/ref/#autocomplete.moveCompletionSelection)`(true, \"page\")`\n - PageDown: [`moveCompletionSelection`](https://codemirror.net/6/docs/ref/#autocomplete.moveCompletionSelection)`(true, \"page\")`\n - Enter: [`acceptCompletion`](https://codemirror.net/6/docs/ref/#autocomplete.acceptCompletion)\n*/\nconst completionKeymap = [\n    { key: \"Ctrl-Space\", run: startCompletion },\n    { key: \"Escape\", run: closeCompletion },\n    { key: \"ArrowDown\", run: /*@__PURE__*/moveCompletionSelection(true) },\n    { key: \"ArrowUp\", run: /*@__PURE__*/moveCompletionSelection(false) },\n    { key: \"PageDown\", run: /*@__PURE__*/moveCompletionSelection(true, \"page\") },\n    { key: \"PageUp\", run: /*@__PURE__*/moveCompletionSelection(false, \"page\") },\n    { key: \"Enter\", run: acceptCompletion }\n];\nconst completionKeymapExt = /*@__PURE__*/Prec.highest(/*@__PURE__*/keymap.computeN([completionConfig], state => state.facet(completionConfig).defaultKeymap ? [completionKeymap] : []));\n/**\nGet the current completion status. When completions are available,\nthis will return `\"active\"`. When completions are pending (in the\nprocess of being queried), this returns `\"pending\"`. Otherwise, it\nreturns `null`.\n*/\nfunction completionStatus(state) {\n    let cState = state.field(completionState, false);\n    return cState && cState.active.some(a => a.state == 1 /* State.Pending */) ? \"pending\"\n        : cState && cState.active.some(a => a.state != 0 /* State.Inactive */) ? \"active\" : null;\n}\nconst completionArrayCache = /*@__PURE__*/new WeakMap;\n/**\nReturns the available completions as an array.\n*/\nfunction currentCompletions(state) {\n    var _a;\n    let open = (_a = state.field(completionState, false)) === null || _a === void 0 ? void 0 : _a.open;\n    if (!open || open.disabled)\n        return [];\n    let completions = completionArrayCache.get(open.options);\n    if (!completions)\n        completionArrayCache.set(open.options, completions = open.options.map(o => o.completion));\n    return completions;\n}\n/**\nReturn the currently selected completion, if any.\n*/\nfunction selectedCompletion(state) {\n    var _a;\n    let open = (_a = state.field(completionState, false)) === null || _a === void 0 ? void 0 : _a.open;\n    return open && !open.disabled && open.selected >= 0 ? open.options[open.selected].completion : null;\n}\n/**\nReturns the currently selected position in the active completion\nlist, or null if no completions are active.\n*/\nfunction selectedCompletionIndex(state) {\n    var _a;\n    let open = (_a = state.field(completionState, false)) === null || _a === void 0 ? void 0 : _a.open;\n    return open && !open.disabled && open.selected >= 0 ? open.selected : null;\n}\n/**\nCreate an effect that can be attached to a transaction to change\nthe currently selected completion.\n*/\nfunction setSelectedCompletion(index) {\n    return setSelectedEffect.of(index);\n}\n\nexport { CompletionContext, acceptCompletion, autocompletion, clearSnippet, closeBrackets, closeBracketsKeymap, closeCompletion, completeAnyWord, completeFromList, completionKeymap, completionStatus, currentCompletions, deleteBracketPair, hasNextSnippetField, hasPrevSnippetField, ifIn, ifNotIn, insertBracket, insertCompletionText, moveCompletionSelection, nextSnippetField, pickedCompletion, prevSnippetField, selectedCompletion, selectedCompletionIndex, setSelectedCompletion, snippet, snippetCompletion, snippetKeymap, startCompletion };\n","import { Decoration, showPanel, EditorView, ViewPlugin, logException, gutter, showTooltip, hoverTooltip, getPanel, WidgetType, GutterMarker } from '@codemirror/view';\nimport { StateEffect, StateField, Facet, combineConfig, RangeSet } from '@codemirror/state';\nimport elt from 'crelt';\n\nclass SelectedDiagnostic {\n    constructor(from, to, diagnostic) {\n        this.from = from;\n        this.to = to;\n        this.diagnostic = diagnostic;\n    }\n}\nclass LintState {\n    constructor(diagnostics, panel, selected) {\n        this.diagnostics = diagnostics;\n        this.panel = panel;\n        this.selected = selected;\n    }\n    static init(diagnostics, panel, state) {\n        // Filter the list of diagnostics for which to create markers\n        let markedDiagnostics = diagnostics;\n        let diagnosticFilter = state.facet(lintConfig).markerFilter;\n        if (diagnosticFilter)\n            markedDiagnostics = diagnosticFilter(markedDiagnostics, state);\n        let ranges = Decoration.set(markedDiagnostics.map((d) => {\n            // For zero-length ranges or ranges covering only a line break, create a widget\n            return d.from == d.to || (d.from == d.to - 1 && state.doc.lineAt(d.from).to == d.from)\n                ? Decoration.widget({\n                    widget: new DiagnosticWidget(d),\n                    diagnostic: d\n                }).range(d.from)\n                : Decoration.mark({\n                    attributes: { class: \"cm-lintRange cm-lintRange-\" + d.severity + (d.markClass ? \" \" + d.markClass : \"\") },\n                    diagnostic: d\n                }).range(d.from, d.to);\n        }), true);\n        return new LintState(ranges, panel, findDiagnostic(ranges));\n    }\n}\nfunction findDiagnostic(diagnostics, diagnostic = null, after = 0) {\n    let found = null;\n    diagnostics.between(after, 1e9, (from, to, { spec }) => {\n        if (diagnostic && spec.diagnostic != diagnostic)\n            return;\n        found = new SelectedDiagnostic(from, to, spec.diagnostic);\n        return false;\n    });\n    return found;\n}\nfunction hideTooltip(tr, tooltip) {\n    let from = tooltip.pos, to = tooltip.end || from;\n    let result = tr.state.facet(lintConfig).hideOn(tr, from, to);\n    if (result != null)\n        return result;\n    let line = tr.startState.doc.lineAt(tooltip.pos);\n    return !!(tr.effects.some(e => e.is(setDiagnosticsEffect)) || tr.changes.touchesRange(line.from, Math.max(line.to, to)));\n}\nfunction maybeEnableLint(state, effects) {\n    return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of(lintExtensions));\n}\n/**\nReturns a transaction spec which updates the current set of\ndiagnostics, and enables the lint extension if if wasn't already\nactive.\n*/\nfunction setDiagnostics(state, diagnostics) {\n    return {\n        effects: maybeEnableLint(state, [setDiagnosticsEffect.of(diagnostics)])\n    };\n}\n/**\nThe state effect that updates the set of active diagnostics. Can\nbe useful when writing an extension that needs to track these.\n*/\nconst setDiagnosticsEffect = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst movePanelSelection = /*@__PURE__*/StateEffect.define();\nconst lintState = /*@__PURE__*/StateField.define({\n    create() {\n        return new LintState(Decoration.none, null, null);\n    },\n    update(value, tr) {\n        if (tr.docChanged && value.diagnostics.size) {\n            let mapped = value.diagnostics.map(tr.changes), selected = null, panel = value.panel;\n            if (value.selected) {\n                let selPos = tr.changes.mapPos(value.selected.from, 1);\n                selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\n            }\n            if (!mapped.size && panel && tr.state.facet(lintConfig).autoPanel)\n                panel = null;\n            value = new LintState(mapped, panel, selected);\n        }\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let panel = !tr.state.facet(lintConfig).autoPanel ? value.panel : effect.value.length ? LintPanel.open : null;\n                value = LintState.init(effect.value, panel, tr.state);\n            }\n            else if (effect.is(togglePanel)) {\n                value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\n            }\n            else if (effect.is(movePanelSelection)) {\n                value = new LintState(value.diagnostics, value.panel, effect.value);\n            }\n        }\n        return value;\n    },\n    provide: f => [showPanel.from(f, val => val.panel),\n        EditorView.decorations.from(f, s => s.diagnostics)]\n});\n/**\nReturns the number of active lint diagnostics in the given state.\n*/\nfunction diagnosticCount(state) {\n    let lint = state.field(lintState, false);\n    return lint ? lint.diagnostics.size : 0;\n}\nconst activeMark = /*@__PURE__*/Decoration.mark({ class: \"cm-lintRange cm-lintRange-active\" });\nfunction lintTooltip(view, pos, side) {\n    let { diagnostics } = view.state.field(lintState);\n    let found = [], stackStart = 2e8, stackEnd = 0;\n    diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), (from, to, { spec }) => {\n        if (pos >= from && pos <= to &&\n            (from == to || ((pos > from || side > 0) && (pos < to || side < 0)))) {\n            found.push(spec.diagnostic);\n            stackStart = Math.min(from, stackStart);\n            stackEnd = Math.max(to, stackEnd);\n        }\n    });\n    let diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;\n    if (diagnosticFilter)\n        found = diagnosticFilter(found, view.state);\n    if (!found.length)\n        return null;\n    return {\n        pos: stackStart,\n        end: stackEnd,\n        above: view.state.doc.lineAt(stackStart).to < stackEnd,\n        create() {\n            return { dom: diagnosticsTooltip(view, found) };\n        }\n    };\n}\nfunction diagnosticsTooltip(view, diagnostics) {\n    return elt(\"ul\", { class: \"cm-tooltip-lint\" }, diagnostics.map(d => renderDiagnostic(view, d, false)));\n}\n/**\nCommand to open and focus the lint panel.\n*/\nconst openLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        view.dispatch({ effects: maybeEnableLint(view.state, [togglePanel.of(true)]) });\n    let panel = getPanel(view, LintPanel.open);\n    if (panel)\n        panel.dom.querySelector(\".cm-panel-lint ul\").focus();\n    return true;\n};\n/**\nCommand to close the lint panel, when open.\n*/\nconst closeLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        return false;\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/**\nMove the selection to the next diagnostic.\n*/\nconst nextDiagnostic = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = view.state.selection.main, next = field.diagnostics.iter(sel.to + 1);\n    if (!next.value) {\n        next = field.diagnostics.iter(0);\n        if (!next.value || next.from == sel.from && next.to == sel.to)\n            return false;\n    }\n    view.dispatch({ selection: { anchor: next.from, head: next.to }, scrollIntoView: true });\n    return true;\n};\n/**\nMove the selection to the previous diagnostic.\n*/\nconst previousDiagnostic = (view) => {\n    let { state } = view, field = state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = state.selection.main;\n    let prevFrom, prevTo, lastFrom, lastTo;\n    field.diagnostics.between(0, state.doc.length, (from, to) => {\n        if (to < sel.to && (prevFrom == null || prevFrom < from)) {\n            prevFrom = from;\n            prevTo = to;\n        }\n        if (lastFrom == null || from > lastFrom) {\n            lastFrom = from;\n            lastTo = to;\n        }\n    });\n    if (lastFrom == null || prevFrom == null && lastFrom == sel.from)\n        return false;\n    view.dispatch({ selection: { anchor: prevFrom !== null && prevFrom !== void 0 ? prevFrom : lastFrom, head: prevTo !== null && prevTo !== void 0 ? prevTo : lastTo }, scrollIntoView: true });\n    return true;\n};\n/**\nA set of default key bindings for the lint functionality.\n\n- Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](https://codemirror.net/6/docs/ref/#lint.openLintPanel)\n- F8: [`nextDiagnostic`](https://codemirror.net/6/docs/ref/#lint.nextDiagnostic)\n*/\nconst lintKeymap = [\n    { key: \"Mod-Shift-m\", run: openLintPanel, preventDefault: true },\n    { key: \"F8\", run: nextDiagnostic }\n];\nconst lintPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.timeout = -1;\n        this.set = true;\n        let { delay } = view.state.facet(lintConfig);\n        this.lintTime = Date.now() + delay;\n        this.run = this.run.bind(this);\n        this.timeout = setTimeout(this.run, delay);\n    }\n    run() {\n        clearTimeout(this.timeout);\n        let now = Date.now();\n        if (now < this.lintTime - 10) {\n            this.timeout = setTimeout(this.run, this.lintTime - now);\n        }\n        else {\n            this.set = false;\n            let { state } = this.view, { sources } = state.facet(lintConfig);\n            if (sources.length)\n                Promise.all(sources.map(source => Promise.resolve(source(this.view)))).then(annotations => {\n                    let all = annotations.reduce((a, b) => a.concat(b));\n                    if (this.view.state.doc == state.doc)\n                        this.view.dispatch(setDiagnostics(this.view.state, all));\n                }, error => { logException(this.view.state, error); });\n        }\n    }\n    update(update) {\n        let config = update.state.facet(lintConfig);\n        if (update.docChanged || config != update.startState.facet(lintConfig) ||\n            config.needsRefresh && config.needsRefresh(update)) {\n            this.lintTime = Date.now() + config.delay;\n            if (!this.set) {\n                this.set = true;\n                this.timeout = setTimeout(this.run, config.delay);\n            }\n        }\n    }\n    force() {\n        if (this.set) {\n            this.lintTime = Date.now();\n            this.run();\n        }\n    }\n    destroy() {\n        clearTimeout(this.timeout);\n    }\n});\nconst lintConfig = /*@__PURE__*/Facet.define({\n    combine(input) {\n        return Object.assign({ sources: input.map(i => i.source).filter(x => x != null) }, combineConfig(input.map(i => i.config), {\n            delay: 750,\n            markerFilter: null,\n            tooltipFilter: null,\n            needsRefresh: null,\n            hideOn: () => null,\n        }, {\n            needsRefresh: (a, b) => !a ? b : !b ? a : u => a(u) || b(u)\n        }));\n    }\n});\n/**\nGiven a diagnostic source, this function returns an extension that\nenables linting with that source. It will be called whenever the\neditor is idle (after its content changed). If `null` is given as\nsource, this only configures the lint extension.\n*/\nfunction linter(source, config = {}) {\n    return [\n        lintConfig.of({ source, config }),\n        lintPlugin,\n        lintExtensions\n    ];\n}\n/**\nForces any linters [configured](https://codemirror.net/6/docs/ref/#lint.linter) to run when the\neditor is idle to run right away.\n*/\nfunction forceLinting(view) {\n    let plugin = view.plugin(lintPlugin);\n    if (plugin)\n        plugin.force();\n}\nfunction assignKeys(actions) {\n    let assigned = [];\n    if (actions)\n        actions: for (let { name } of actions) {\n            for (let i = 0; i < name.length; i++) {\n                let ch = name[i];\n                if (/[a-zA-Z]/.test(ch) && !assigned.some(c => c.toLowerCase() == ch.toLowerCase())) {\n                    assigned.push(ch);\n                    continue actions;\n                }\n            }\n            assigned.push(\"\");\n        }\n    return assigned;\n}\nfunction renderDiagnostic(view, diagnostic, inPanel) {\n    var _a;\n    let keys = inPanel ? assignKeys(diagnostic.actions) : [];\n    return elt(\"li\", { class: \"cm-diagnostic cm-diagnostic-\" + diagnostic.severity }, elt(\"span\", { class: \"cm-diagnosticText\" }, diagnostic.renderMessage ? diagnostic.renderMessage(view) : diagnostic.message), (_a = diagnostic.actions) === null || _a === void 0 ? void 0 : _a.map((action, i) => {\n        let fired = false, click = (e) => {\n            e.preventDefault();\n            if (fired)\n                return;\n            fired = true;\n            let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\n            if (found)\n                action.apply(view, found.from, found.to);\n        };\n        let { name } = action, keyIndex = keys[i] ? name.indexOf(keys[i]) : -1;\n        let nameElt = keyIndex < 0 ? name : [name.slice(0, keyIndex),\n            elt(\"u\", name.slice(keyIndex, keyIndex + 1)),\n            name.slice(keyIndex + 1)];\n        return elt(\"button\", {\n            type: \"button\",\n            class: \"cm-diagnosticAction\",\n            onclick: click,\n            onmousedown: click,\n            \"aria-label\": ` Action: ${name}${keyIndex < 0 ? \"\" : ` (access key \"${keys[i]})\"`}.`\n        }, nameElt);\n    }), diagnostic.source && elt(\"div\", { class: \"cm-diagnosticSource\" }, diagnostic.source));\n}\nclass DiagnosticWidget extends WidgetType {\n    constructor(diagnostic) {\n        super();\n        this.diagnostic = diagnostic;\n    }\n    eq(other) { return other.diagnostic == this.diagnostic; }\n    toDOM() {\n        return elt(\"span\", { class: \"cm-lintPoint cm-lintPoint-\" + this.diagnostic.severity });\n    }\n}\nclass PanelItem {\n    constructor(view, diagnostic) {\n        this.diagnostic = diagnostic;\n        this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\n        this.dom = renderDiagnostic(view, diagnostic, true);\n        this.dom.id = this.id;\n        this.dom.setAttribute(\"role\", \"option\");\n    }\n}\nclass LintPanel {\n    constructor(view) {\n        this.view = view;\n        this.items = [];\n        let onkeydown = (event) => {\n            if (event.keyCode == 27) { // Escape\n                closeLintPanel(this.view);\n                this.view.focus();\n            }\n            else if (event.keyCode == 38 || event.keyCode == 33) { // ArrowUp, PageUp\n                this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);\n            }\n            else if (event.keyCode == 40 || event.keyCode == 34) { // ArrowDown, PageDown\n                this.moveSelection((this.selectedIndex + 1) % this.items.length);\n            }\n            else if (event.keyCode == 36) { // Home\n                this.moveSelection(0);\n            }\n            else if (event.keyCode == 35) { // End\n                this.moveSelection(this.items.length - 1);\n            }\n            else if (event.keyCode == 13) { // Enter\n                this.view.focus();\n            }\n            else if (event.keyCode >= 65 && event.keyCode <= 90 && this.selectedIndex >= 0) { // A-Z\n                let { diagnostic } = this.items[this.selectedIndex], keys = assignKeys(diagnostic.actions);\n                for (let i = 0; i < keys.length; i++)\n                    if (keys[i].toUpperCase().charCodeAt(0) == event.keyCode) {\n                        let found = findDiagnostic(this.view.state.field(lintState).diagnostics, diagnostic);\n                        if (found)\n                            diagnostic.actions[i].apply(view, found.from, found.to);\n                    }\n            }\n            else {\n                return;\n            }\n            event.preventDefault();\n        };\n        let onclick = (event) => {\n            for (let i = 0; i < this.items.length; i++) {\n                if (this.items[i].dom.contains(event.target))\n                    this.moveSelection(i);\n            }\n        };\n        this.list = elt(\"ul\", {\n            tabIndex: 0,\n            role: \"listbox\",\n            \"aria-label\": this.view.state.phrase(\"Diagnostics\"),\n            onkeydown,\n            onclick\n        });\n        this.dom = elt(\"div\", { class: \"cm-panel-lint\" }, this.list, elt(\"button\", {\n            type: \"button\",\n            name: \"close\",\n            \"aria-label\": this.view.state.phrase(\"close\"),\n            onclick: () => closeLintPanel(this.view)\n        }, \"×\"));\n        this.update();\n    }\n    get selectedIndex() {\n        let selected = this.view.state.field(lintState).selected;\n        if (!selected)\n            return -1;\n        for (let i = 0; i < this.items.length; i++)\n            if (this.items[i].diagnostic == selected.diagnostic)\n                return i;\n        return -1;\n    }\n    update() {\n        let { diagnostics, selected } = this.view.state.field(lintState);\n        let i = 0, needsSync = false, newSelectedItem = null;\n        diagnostics.between(0, this.view.state.doc.length, (_start, _end, { spec }) => {\n            let found = -1, item;\n            for (let j = i; j < this.items.length; j++)\n                if (this.items[j].diagnostic == spec.diagnostic) {\n                    found = j;\n                    break;\n                }\n            if (found < 0) {\n                item = new PanelItem(this.view, spec.diagnostic);\n                this.items.splice(i, 0, item);\n                needsSync = true;\n            }\n            else {\n                item = this.items[found];\n                if (found > i) {\n                    this.items.splice(i, found - i);\n                    needsSync = true;\n                }\n            }\n            if (selected && item.diagnostic == selected.diagnostic) {\n                if (!item.dom.hasAttribute(\"aria-selected\")) {\n                    item.dom.setAttribute(\"aria-selected\", \"true\");\n                    newSelectedItem = item;\n                }\n            }\n            else if (item.dom.hasAttribute(\"aria-selected\")) {\n                item.dom.removeAttribute(\"aria-selected\");\n            }\n            i++;\n        });\n        while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\n            needsSync = true;\n            this.items.pop();\n        }\n        if (this.items.length == 0) {\n            this.items.push(new PanelItem(this.view, {\n                from: -1, to: -1,\n                severity: \"info\",\n                message: this.view.state.phrase(\"No diagnostics\")\n            }));\n            needsSync = true;\n        }\n        if (newSelectedItem) {\n            this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\n            this.view.requestMeasure({\n                key: this,\n                read: () => ({ sel: newSelectedItem.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),\n                write: ({ sel, panel }) => {\n                    let scaleY = panel.height / this.list.offsetHeight;\n                    if (sel.top < panel.top)\n                        this.list.scrollTop -= (panel.top - sel.top) / scaleY;\n                    else if (sel.bottom > panel.bottom)\n                        this.list.scrollTop += (sel.bottom - panel.bottom) / scaleY;\n                }\n            });\n        }\n        else if (this.selectedIndex < 0) {\n            this.list.removeAttribute(\"aria-activedescendant\");\n        }\n        if (needsSync)\n            this.sync();\n    }\n    sync() {\n        let domPos = this.list.firstChild;\n        function rm() {\n            let prev = domPos;\n            domPos = prev.nextSibling;\n            prev.remove();\n        }\n        for (let item of this.items) {\n            if (item.dom.parentNode == this.list) {\n                while (domPos != item.dom)\n                    rm();\n                domPos = item.dom.nextSibling;\n            }\n            else {\n                this.list.insertBefore(item.dom, domPos);\n            }\n        }\n        while (domPos)\n            rm();\n    }\n    moveSelection(selectedIndex) {\n        if (this.selectedIndex < 0)\n            return;\n        let field = this.view.state.field(lintState);\n        let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\n        if (!selection)\n            return;\n        this.view.dispatch({\n            selection: { anchor: selection.from, head: selection.to },\n            scrollIntoView: true,\n            effects: movePanelSelection.of(selection)\n        });\n    }\n    static open(view) { return new LintPanel(view); }\n}\nfunction svg(content, attrs = `viewBox=\"0 0 40 40\"`) {\n    return `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ${attrs}>${encodeURIComponent(content)}</svg>')`;\n}\nfunction underline(color) {\n    return svg(`<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>`, `width=\"6\" height=\"3\"`);\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-diagnostic\": {\n        padding: \"3px 6px 3px 8px\",\n        marginLeft: \"-1px\",\n        display: \"block\",\n        whiteSpace: \"pre-wrap\"\n    },\n    \".cm-diagnostic-error\": { borderLeft: \"5px solid #d11\" },\n    \".cm-diagnostic-warning\": { borderLeft: \"5px solid orange\" },\n    \".cm-diagnostic-info\": { borderLeft: \"5px solid #999\" },\n    \".cm-diagnostic-hint\": { borderLeft: \"5px solid #66d\" },\n    \".cm-diagnosticAction\": {\n        font: \"inherit\",\n        border: \"none\",\n        padding: \"2px 4px\",\n        backgroundColor: \"#444\",\n        color: \"white\",\n        borderRadius: \"3px\",\n        marginLeft: \"8px\",\n        cursor: \"pointer\"\n    },\n    \".cm-diagnosticSource\": {\n        fontSize: \"70%\",\n        opacity: .7\n    },\n    \".cm-lintRange\": {\n        backgroundPosition: \"left bottom\",\n        backgroundRepeat: \"repeat-x\",\n        paddingBottom: \"0.7px\",\n    },\n    \".cm-lintRange-error\": { backgroundImage: /*@__PURE__*/underline(\"#d11\") },\n    \".cm-lintRange-warning\": { backgroundImage: /*@__PURE__*/underline(\"orange\") },\n    \".cm-lintRange-info\": { backgroundImage: /*@__PURE__*/underline(\"#999\") },\n    \".cm-lintRange-hint\": { backgroundImage: /*@__PURE__*/underline(\"#66d\") },\n    \".cm-lintRange-active\": { backgroundColor: \"#ffdd9980\" },\n    \".cm-tooltip-lint\": {\n        padding: 0,\n        margin: 0\n    },\n    \".cm-lintPoint\": {\n        position: \"relative\",\n        \"&:after\": {\n            content: '\"\"',\n            position: \"absolute\",\n            bottom: 0,\n            left: \"-2px\",\n            borderLeft: \"3px solid transparent\",\n            borderRight: \"3px solid transparent\",\n            borderBottom: \"4px solid #d11\"\n        }\n    },\n    \".cm-lintPoint-warning\": {\n        \"&:after\": { borderBottomColor: \"orange\" }\n    },\n    \".cm-lintPoint-info\": {\n        \"&:after\": { borderBottomColor: \"#999\" }\n    },\n    \".cm-lintPoint-hint\": {\n        \"&:after\": { borderBottomColor: \"#66d\" }\n    },\n    \".cm-panel.cm-panel-lint\": {\n        position: \"relative\",\n        \"& ul\": {\n            maxHeight: \"100px\",\n            overflowY: \"auto\",\n            \"& [aria-selected]\": {\n                backgroundColor: \"#ddd\",\n                \"& u\": { textDecoration: \"underline\" }\n            },\n            \"&:focus [aria-selected]\": {\n                background_fallback: \"#bdf\",\n                backgroundColor: \"Highlight\",\n                color_fallback: \"white\",\n                color: \"HighlightText\"\n            },\n            \"& u\": { textDecoration: \"none\" },\n            padding: 0,\n            margin: 0\n        },\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"2px\",\n            background: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        }\n    }\n});\nfunction severityWeight(sev) {\n    return sev == \"error\" ? 4 : sev == \"warning\" ? 3 : sev == \"info\" ? 2 : 1;\n}\nclass LintGutterMarker extends GutterMarker {\n    constructor(diagnostics) {\n        super();\n        this.diagnostics = diagnostics;\n        this.severity = diagnostics.reduce((max, d) => severityWeight(max) < severityWeight(d.severity) ? d.severity : max, \"hint\");\n    }\n    toDOM(view) {\n        let elt = document.createElement(\"div\");\n        elt.className = \"cm-lint-marker cm-lint-marker-\" + this.severity;\n        let diagnostics = this.diagnostics;\n        let diagnosticsFilter = view.state.facet(lintGutterConfig).tooltipFilter;\n        if (diagnosticsFilter)\n            diagnostics = diagnosticsFilter(diagnostics, view.state);\n        if (diagnostics.length)\n            elt.onmouseover = () => gutterMarkerMouseOver(view, elt, diagnostics);\n        return elt;\n    }\n}\nfunction trackHoverOn(view, marker) {\n    let mousemove = (event) => {\n        let rect = marker.getBoundingClientRect();\n        if (event.clientX > rect.left - 10 /* Hover.Margin */ && event.clientX < rect.right + 10 /* Hover.Margin */ &&\n            event.clientY > rect.top - 10 /* Hover.Margin */ && event.clientY < rect.bottom + 10 /* Hover.Margin */)\n            return;\n        for (let target = event.target; target; target = target.parentNode) {\n            if (target.nodeType == 1 && target.classList.contains(\"cm-tooltip-lint\"))\n                return;\n        }\n        window.removeEventListener(\"mousemove\", mousemove);\n        if (view.state.field(lintGutterTooltip))\n            view.dispatch({ effects: setLintGutterTooltip.of(null) });\n    };\n    window.addEventListener(\"mousemove\", mousemove);\n}\nfunction gutterMarkerMouseOver(view, marker, diagnostics) {\n    function hovered() {\n        let line = view.elementAtHeight(marker.getBoundingClientRect().top + 5 - view.documentTop);\n        const linePos = view.coordsAtPos(line.from);\n        if (linePos) {\n            view.dispatch({ effects: setLintGutterTooltip.of({\n                    pos: line.from,\n                    above: false,\n                    create() {\n                        return {\n                            dom: diagnosticsTooltip(view, diagnostics),\n                            getCoords: () => marker.getBoundingClientRect()\n                        };\n                    }\n                }) });\n        }\n        marker.onmouseout = marker.onmousemove = null;\n        trackHoverOn(view, marker);\n    }\n    let { hoverTime } = view.state.facet(lintGutterConfig);\n    let hoverTimeout = setTimeout(hovered, hoverTime);\n    marker.onmouseout = () => {\n        clearTimeout(hoverTimeout);\n        marker.onmouseout = marker.onmousemove = null;\n    };\n    marker.onmousemove = () => {\n        clearTimeout(hoverTimeout);\n        hoverTimeout = setTimeout(hovered, hoverTime);\n    };\n}\nfunction markersForDiagnostics(doc, diagnostics) {\n    let byLine = Object.create(null);\n    for (let diagnostic of diagnostics) {\n        let line = doc.lineAt(diagnostic.from);\n        (byLine[line.from] || (byLine[line.from] = [])).push(diagnostic);\n    }\n    let markers = [];\n    for (let line in byLine) {\n        markers.push(new LintGutterMarker(byLine[line]).range(+line));\n    }\n    return RangeSet.of(markers, true);\n}\nconst lintGutterExtension = /*@__PURE__*/gutter({\n    class: \"cm-gutter-lint\",\n    markers: view => view.state.field(lintGutterMarkers),\n});\nconst lintGutterMarkers = /*@__PURE__*/StateField.define({\n    create() {\n        return RangeSet.empty;\n    },\n    update(markers, tr) {\n        markers = markers.map(tr.changes);\n        let diagnosticFilter = tr.state.facet(lintGutterConfig).markerFilter;\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let diagnostics = effect.value;\n                if (diagnosticFilter)\n                    diagnostics = diagnosticFilter(diagnostics || [], tr.state);\n                markers = markersForDiagnostics(tr.state.doc, diagnostics.slice(0));\n            }\n        }\n        return markers;\n    }\n});\nconst setLintGutterTooltip = /*@__PURE__*/StateEffect.define();\nconst lintGutterTooltip = /*@__PURE__*/StateField.define({\n    create() { return null; },\n    update(tooltip, tr) {\n        if (tooltip && tr.docChanged)\n            tooltip = hideTooltip(tr, tooltip) ? null : Object.assign(Object.assign({}, tooltip), { pos: tr.changes.mapPos(tooltip.pos) });\n        return tr.effects.reduce((t, e) => e.is(setLintGutterTooltip) ? e.value : t, tooltip);\n    },\n    provide: field => showTooltip.from(field)\n});\nconst lintGutterTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-gutter-lint\": {\n        width: \"1.4em\",\n        \"& .cm-gutterElement\": {\n            padding: \".2em\"\n        }\n    },\n    \".cm-lint-marker\": {\n        width: \"1em\",\n        height: \"1em\"\n    },\n    \".cm-lint-marker-info\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#aaf\" stroke=\"#77e\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M5 5L35 5L35 35L5 35Z\"/>`)\n    },\n    \".cm-lint-marker-warning\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#fe8\" stroke=\"#fd7\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M20 6L37 35L3 35Z\"/>`),\n    },\n    \".cm-lint-marker-error\": {\n        content: /*@__PURE__*/svg(`<circle cx=\"20\" cy=\"20\" r=\"15\" fill=\"#f87\" stroke=\"#f43\" stroke-width=\"6\"/>`)\n    },\n});\nconst lintExtensions = [\n    lintState,\n    /*@__PURE__*/EditorView.decorations.compute([lintState], state => {\n        let { selected, panel } = state.field(lintState);\n        return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([\n            activeMark.range(selected.from, selected.to)\n        ]);\n    }),\n    /*@__PURE__*/hoverTooltip(lintTooltip, { hideOn: hideTooltip }),\n    baseTheme\n];\nconst lintGutterConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            hoverTime: 300 /* Hover.Time */,\n            markerFilter: null,\n            tooltipFilter: null\n        });\n    }\n});\n/**\nReturns an extension that installs a gutter showing markers for\neach line that has diagnostics, which can be hovered over to see\nthe diagnostics.\n*/\nfunction lintGutter(config = {}) {\n    return [lintGutterConfig.of(config), lintGutterMarkers, lintGutterExtension, lintGutterTheme, lintGutterTooltip];\n}\n/**\nIterate over the marked diagnostics for the given editor state,\ncalling `f` for each of them. Note that, if the document changed\nsince the diagnostics were created, the `Diagnostic` object will\nhold the original outdated position, whereas the `to` and `from`\narguments hold the diagnostic's current position.\n*/\nfunction forEachDiagnostic(state, f) {\n    let lState = state.field(lintState, false);\n    if (lState && lState.diagnostics.size)\n        for (let iter = RangeSet.iter([lState.diagnostics]); iter.value; iter.next())\n            f(iter.value.spec.diagnostic, iter.from, iter.to);\n}\n\nexport { closeLintPanel, diagnosticCount, forEachDiagnostic, forceLinting, lintGutter, lintKeymap, linter, nextDiagnostic, openLintPanel, previousDiagnostic, setDiagnostics, setDiagnosticsEffect };\n","import { lineNumbers, highlightActiveLineGutter, highlightSpecialChars, drawSelection, dropCursor, rectangularSelection, crosshairCursor, highlightActiveLine, keymap } from '@codemirror/view';\nimport { EditorState } from '@codemirror/state';\nimport { history, defaultKeymap, historyKeymap } from '@codemirror/commands';\nimport { highlightSelectionMatches, searchKeymap } from '@codemirror/search';\nimport { closeBrackets, autocompletion, closeBracketsKeymap, completionKeymap } from '@codemirror/autocomplete';\nimport { foldGutter, indentOnInput, syntaxHighlighting, defaultHighlightStyle, bracketMatching, indentUnit, foldKeymap } from '@codemirror/language';\nimport { lintKeymap } from '@codemirror/lint';\n/**\nThis is an extension value that just pulls together a number of\nextensions that you might want in a basic editor. It is meant as a\nconvenient helper to quickly set up CodeMirror without installing\nand importing a lot of separate packages.\n\nSpecifically, it includes...\n\n - [the default command bindings](https://codemirror.net/6/docs/ref/#commands.defaultKeymap)\n - [line numbers](https://codemirror.net/6/docs/ref/#view.lineNumbers)\n - [special character highlighting](https://codemirror.net/6/docs/ref/#view.highlightSpecialChars)\n - [the undo history](https://codemirror.net/6/docs/ref/#commands.history)\n - [a fold gutter](https://codemirror.net/6/docs/ref/#language.foldGutter)\n - [custom selection drawing](https://codemirror.net/6/docs/ref/#view.drawSelection)\n - [drop cursor](https://codemirror.net/6/docs/ref/#view.dropCursor)\n - [multiple selections](https://codemirror.net/6/docs/ref/#state.EditorState^allowMultipleSelections)\n - [reindentation on input](https://codemirror.net/6/docs/ref/#language.indentOnInput)\n - [the default highlight style](https://codemirror.net/6/docs/ref/#language.defaultHighlightStyle) (as fallback)\n - [bracket matching](https://codemirror.net/6/docs/ref/#language.bracketMatching)\n - [bracket closing](https://codemirror.net/6/docs/ref/#autocomplete.closeBrackets)\n - [autocompletion](https://codemirror.net/6/docs/ref/#autocomplete.autocompletion)\n - [rectangular selection](https://codemirror.net/6/docs/ref/#view.rectangularSelection) and [crosshair cursor](https://codemirror.net/6/docs/ref/#view.crosshairCursor)\n - [active line highlighting](https://codemirror.net/6/docs/ref/#view.highlightActiveLine)\n - [active line gutter highlighting](https://codemirror.net/6/docs/ref/#view.highlightActiveLineGutter)\n - [selection match highlighting](https://codemirror.net/6/docs/ref/#search.highlightSelectionMatches)\n - [search](https://codemirror.net/6/docs/ref/#search.searchKeymap)\n - [linting](https://codemirror.net/6/docs/ref/#lint.lintKeymap)\n\n(You'll probably want to add some language package to your setup\ntoo.)\n\nThis extension does not allow customization. The idea is that,\nonce you decide you want to configure your editor more precisely,\nyou take this package's source (which is just a bunch of imports\nand an array literal), copy it into your own code, and adjust it\nas desired.\n*/\nexport var basicSetup = function basicSetup(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var {\n    crosshairCursor: initCrosshairCursor = false\n  } = options;\n  var keymaps = [];\n  if (options.closeBracketsKeymap !== false) {\n    keymaps = keymaps.concat(closeBracketsKeymap);\n  }\n  if (options.defaultKeymap !== false) {\n    keymaps = keymaps.concat(defaultKeymap);\n  }\n  if (options.searchKeymap !== false) {\n    keymaps = keymaps.concat(searchKeymap);\n  }\n  if (options.historyKeymap !== false) {\n    keymaps = keymaps.concat(historyKeymap);\n  }\n  if (options.foldKeymap !== false) {\n    keymaps = keymaps.concat(foldKeymap);\n  }\n  if (options.completionKeymap !== false) {\n    keymaps = keymaps.concat(completionKeymap);\n  }\n  if (options.lintKeymap !== false) {\n    keymaps = keymaps.concat(lintKeymap);\n  }\n  var extensions = [];\n  if (options.lineNumbers !== false) extensions.push(lineNumbers());\n  if (options.highlightActiveLineGutter !== false) extensions.push(highlightActiveLineGutter());\n  if (options.highlightSpecialChars !== false) extensions.push(highlightSpecialChars());\n  if (options.history !== false) extensions.push(history());\n  if (options.foldGutter !== false) extensions.push(foldGutter());\n  if (options.drawSelection !== false) extensions.push(drawSelection());\n  if (options.dropCursor !== false) extensions.push(dropCursor());\n  if (options.allowMultipleSelections !== false) extensions.push(EditorState.allowMultipleSelections.of(true));\n  if (options.indentOnInput !== false) extensions.push(indentOnInput());\n  if (options.syntaxHighlighting !== false) extensions.push(syntaxHighlighting(defaultHighlightStyle, {\n    fallback: true\n  }));\n  if (options.bracketMatching !== false) extensions.push(bracketMatching());\n  if (options.closeBrackets !== false) extensions.push(closeBrackets());\n  if (options.autocompletion !== false) extensions.push(autocompletion());\n  if (options.rectangularSelection !== false) extensions.push(rectangularSelection());\n  if (initCrosshairCursor !== false) extensions.push(crosshairCursor());\n  if (options.highlightActiveLine !== false) extensions.push(highlightActiveLine());\n  if (options.highlightSelectionMatches !== false) extensions.push(highlightSelectionMatches());\n  if (options.tabSize && typeof options.tabSize === 'number') extensions.push(indentUnit.of(' '.repeat(options.tabSize)));\n  return extensions.concat([keymap.of(keymaps.flat())]).filter(Boolean);\n};\n/**\nA minimal set of extensions to create a functional editor. Only\nincludes [the default keymap](https://codemirror.net/6/docs/ref/#commands.defaultKeymap), [undo\nhistory](https://codemirror.net/6/docs/ref/#commands.history), [special character\nhighlighting](https://codemirror.net/6/docs/ref/#view.highlightSpecialChars), [custom selection\ndrawing](https://codemirror.net/6/docs/ref/#view.drawSelection), and [default highlight\nstyle](https://codemirror.net/6/docs/ref/#language.defaultHighlightStyle).\n*/\nexport var minimalSetup = function minimalSetup(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var keymaps = [];\n  if (options.defaultKeymap !== false) {\n    keymaps = keymaps.concat(defaultKeymap);\n  }\n  if (options.historyKeymap !== false) {\n    keymaps = keymaps.concat(historyKeymap);\n  }\n  var extensions = [];\n  if (options.highlightSpecialChars !== false) extensions.push(highlightSpecialChars());\n  if (options.history !== false) extensions.push(history());\n  if (options.drawSelection !== false) extensions.push(drawSelection());\n  if (options.syntaxHighlighting !== false) extensions.push(syntaxHighlighting(defaultHighlightStyle, {\n    fallback: true\n  }));\n  return extensions.concat([keymap.of(keymaps.flat())]).filter(Boolean);\n};","import { EditorView } from '@codemirror/view';\nimport { HighlightStyle, syntaxHighlighting } from '@codemirror/language';\nimport { tags } from '@lezer/highlight';\n\n// Using https://github.com/one-dark/vscode-one-dark-theme/ as reference for the colors\nconst chalky = \"#e5c07b\", coral = \"#e06c75\", cyan = \"#56b6c2\", invalid = \"#ffffff\", ivory = \"#abb2bf\", stone = \"#7d8799\", // Brightened compared to original to increase contrast\nmalibu = \"#61afef\", sage = \"#98c379\", whiskey = \"#d19a66\", violet = \"#c678dd\", darkBackground = \"#21252b\", highlightBackground = \"#2c313a\", background = \"#282c34\", tooltipBackground = \"#353a42\", selection = \"#3E4451\", cursor = \"#528bff\";\n/**\nThe colors used in the theme, as CSS color strings.\n*/\nconst color = {\n    chalky,\n    coral,\n    cyan,\n    invalid,\n    ivory,\n    stone,\n    malibu,\n    sage,\n    whiskey,\n    violet,\n    darkBackground,\n    highlightBackground,\n    background,\n    tooltipBackground,\n    selection,\n    cursor\n};\n/**\nThe editor theme styles for One Dark.\n*/\nconst oneDarkTheme = /*@__PURE__*/EditorView.theme({\n    \"&\": {\n        color: ivory,\n        backgroundColor: background\n    },\n    \".cm-content\": {\n        caretColor: cursor\n    },\n    \".cm-cursor, .cm-dropCursor\": { borderLeftColor: cursor },\n    \"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection\": { backgroundColor: selection },\n    \".cm-panels\": { backgroundColor: darkBackground, color: ivory },\n    \".cm-panels.cm-panels-top\": { borderBottom: \"2px solid black\" },\n    \".cm-panels.cm-panels-bottom\": { borderTop: \"2px solid black\" },\n    \".cm-searchMatch\": {\n        backgroundColor: \"#72a1ff59\",\n        outline: \"1px solid #457dff\"\n    },\n    \".cm-searchMatch.cm-searchMatch-selected\": {\n        backgroundColor: \"#6199ff2f\"\n    },\n    \".cm-activeLine\": { backgroundColor: \"#6699ff0b\" },\n    \".cm-selectionMatch\": { backgroundColor: \"#aafe661a\" },\n    \"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket\": {\n        backgroundColor: \"#bad0f847\"\n    },\n    \".cm-gutters\": {\n        backgroundColor: background,\n        color: stone,\n        border: \"none\"\n    },\n    \".cm-activeLineGutter\": {\n        backgroundColor: highlightBackground\n    },\n    \".cm-foldPlaceholder\": {\n        backgroundColor: \"transparent\",\n        border: \"none\",\n        color: \"#ddd\"\n    },\n    \".cm-tooltip\": {\n        border: \"none\",\n        backgroundColor: tooltipBackground\n    },\n    \".cm-tooltip .cm-tooltip-arrow:before\": {\n        borderTopColor: \"transparent\",\n        borderBottomColor: \"transparent\"\n    },\n    \".cm-tooltip .cm-tooltip-arrow:after\": {\n        borderTopColor: tooltipBackground,\n        borderBottomColor: tooltipBackground\n    },\n    \".cm-tooltip-autocomplete\": {\n        \"& > ul > li[aria-selected]\": {\n            backgroundColor: highlightBackground,\n            color: ivory\n        }\n    }\n}, { dark: true });\n/**\nThe highlighting style for code in the One Dark theme.\n*/\nconst oneDarkHighlightStyle = /*@__PURE__*/HighlightStyle.define([\n    { tag: tags.keyword,\n        color: violet },\n    { tag: [tags.name, tags.deleted, tags.character, tags.propertyName, tags.macroName],\n        color: coral },\n    { tag: [/*@__PURE__*/tags.function(tags.variableName), tags.labelName],\n        color: malibu },\n    { tag: [tags.color, /*@__PURE__*/tags.constant(tags.name), /*@__PURE__*/tags.standard(tags.name)],\n        color: whiskey },\n    { tag: [/*@__PURE__*/tags.definition(tags.name), tags.separator],\n        color: ivory },\n    { tag: [tags.typeName, tags.className, tags.number, tags.changed, tags.annotation, tags.modifier, tags.self, tags.namespace],\n        color: chalky },\n    { tag: [tags.operator, tags.operatorKeyword, tags.url, tags.escape, tags.regexp, tags.link, /*@__PURE__*/tags.special(tags.string)],\n        color: cyan },\n    { tag: [tags.meta, tags.comment],\n        color: stone },\n    { tag: tags.strong,\n        fontWeight: \"bold\" },\n    { tag: tags.emphasis,\n        fontStyle: \"italic\" },\n    { tag: tags.strikethrough,\n        textDecoration: \"line-through\" },\n    { tag: tags.link,\n        color: stone,\n        textDecoration: \"underline\" },\n    { tag: tags.heading,\n        fontWeight: \"bold\",\n        color: coral },\n    { tag: [tags.atom, tags.bool, /*@__PURE__*/tags.special(tags.variableName)],\n        color: whiskey },\n    { tag: [tags.processingInstruction, tags.string, tags.inserted],\n        color: sage },\n    { tag: tags.invalid,\n        color: invalid },\n]);\n/**\nExtension to enable the One Dark theme (both the editor theme and\nthe highlight style).\n*/\nconst oneDark = [oneDarkTheme, /*@__PURE__*/syntaxHighlighting(oneDarkHighlightStyle)];\n\nexport { color, oneDark, oneDarkHighlightStyle, oneDarkTheme };\n","import { EditorView } from '@codemirror/view';\nexport var defaultLightThemeOption = EditorView.theme({\n  '&': {\n    backgroundColor: '#fff'\n  }\n}, {\n  dark: false\n});","import { indentWithTab } from '@codemirror/commands';\nimport { basicSetup } from '@uiw/codemirror-extensions-basic-setup';\nimport { EditorView, keymap, placeholder } from '@codemirror/view';\nimport { oneDark } from '@codemirror/theme-one-dark';\nimport { EditorState } from '@codemirror/state';\nimport { defaultLightThemeOption } from './theme/light';\nexport * from '@codemirror/theme-one-dark';\nexport * from './theme/light';\nexport var getDefaultExtensions = function getDefaultExtensions(optios) {\n  if (optios === void 0) {\n    optios = {};\n  }\n  var {\n    indentWithTab: defaultIndentWithTab = true,\n    editable = true,\n    readOnly = false,\n    theme = 'light',\n    placeholder: placeholderStr = '',\n    basicSetup: defaultBasicSetup = true\n  } = optios;\n  var getExtensions = [];\n  if (defaultIndentWithTab) {\n    getExtensions.unshift(keymap.of([indentWithTab]));\n  }\n  if (defaultBasicSetup) {\n    if (typeof defaultBasicSetup === 'boolean') {\n      getExtensions.unshift(basicSetup());\n    } else {\n      getExtensions.unshift(basicSetup(defaultBasicSetup));\n    }\n  }\n  if (placeholderStr) {\n    getExtensions.unshift(placeholder(placeholderStr));\n  }\n  switch (theme) {\n    case 'light':\n      getExtensions.push(defaultLightThemeOption);\n      break;\n    case 'dark':\n      getExtensions.push(oneDark);\n      break;\n    case 'none':\n      break;\n    default:\n      getExtensions.push(theme);\n      break;\n  }\n  if (editable === false) {\n    getExtensions.push(EditorView.editable.of(false));\n  }\n  if (readOnly) {\n    getExtensions.push(EditorState.readOnly.of(true));\n  }\n  return [...getExtensions];\n};","export var getStatistics = view => {\n  return {\n    line: view.state.doc.lineAt(view.state.selection.main.from),\n    lineCount: view.state.doc.lines,\n    lineBreak: view.state.lineBreak,\n    length: view.state.doc.length,\n    readOnly: view.state.readOnly,\n    tabSize: view.state.tabSize,\n    selection: view.state.selection,\n    selectionAsSingle: view.state.selection.asSingle().main,\n    ranges: view.state.selection.ranges,\n    selectionCode: view.state.sliceDoc(view.state.selection.main.from, view.state.selection.main.to),\n    selections: view.state.selection.ranges.map(r => view.state.sliceDoc(r.from, r.to)),\n    selectedText: view.state.selection.ranges.some(r => !r.empty)\n  };\n};","import { useEffect, useState } from 'react';\nimport { Annotation, EditorState, StateEffect } from '@codemirror/state';\nimport { EditorView } from '@codemirror/view';\nimport { getDefaultExtensions } from './getDefaultExtensions';\nimport { getStatistics } from './utils';\nvar External = Annotation.define();\nvar emptyExtensions = [];\nexport function useCodeMirror(props) {\n  var {\n    value,\n    selection,\n    onChange,\n    onStatistics,\n    onCreateEditor,\n    onUpdate,\n    extensions = emptyExtensions,\n    autoFocus,\n    theme = 'light',\n    height = null,\n    minHeight = null,\n    maxHeight = null,\n    width = null,\n    minWidth = null,\n    maxWidth = null,\n    placeholder: placeholderStr = '',\n    editable = true,\n    readOnly = false,\n    indentWithTab: defaultIndentWithTab = true,\n    basicSetup: defaultBasicSetup = true,\n    root,\n    initialState\n  } = props;\n  var [container, setContainer] = useState();\n  var [view, setView] = useState();\n  var [state, setState] = useState();\n  var defaultThemeOption = EditorView.theme({\n    '&': {\n      height,\n      minHeight,\n      maxHeight,\n      width,\n      minWidth,\n      maxWidth\n    },\n    '& .cm-scroller': {\n      height: '100% !important'\n    }\n  });\n  var updateListener = EditorView.updateListener.of(vu => {\n    if (vu.docChanged && typeof onChange === 'function' &&\n    // Fix echoing of the remote changes:\n    // If transaction is market as remote we don't have to call `onChange` handler again\n    !vu.transactions.some(tr => tr.annotation(External))) {\n      var doc = vu.state.doc;\n      var _value = doc.toString();\n      onChange(_value, vu);\n    }\n    onStatistics && onStatistics(getStatistics(vu));\n  });\n  var defaultExtensions = getDefaultExtensions({\n    theme,\n    editable,\n    readOnly,\n    placeholder: placeholderStr,\n    indentWithTab: defaultIndentWithTab,\n    basicSetup: defaultBasicSetup\n  });\n  var getExtensions = [updateListener, defaultThemeOption, ...defaultExtensions];\n  if (onUpdate && typeof onUpdate === 'function') {\n    getExtensions.push(EditorView.updateListener.of(onUpdate));\n  }\n  getExtensions = getExtensions.concat(extensions);\n  useEffect(() => {\n    if (container && !state) {\n      var config = {\n        doc: value,\n        selection,\n        extensions: getExtensions\n      };\n      var stateCurrent = initialState ? EditorState.fromJSON(initialState.json, config, initialState.fields) : EditorState.create(config);\n      setState(stateCurrent);\n      if (!view) {\n        var viewCurrent = new EditorView({\n          state: stateCurrent,\n          parent: container,\n          root\n        });\n        setView(viewCurrent);\n        onCreateEditor && onCreateEditor(viewCurrent, stateCurrent);\n      }\n    }\n    return () => {\n      if (view) {\n        setState(undefined);\n        setView(undefined);\n      }\n    };\n  }, [container, state]);\n  useEffect(() => setContainer(props.container), [props.container]);\n  useEffect(() => () => {\n    if (view) {\n      view.destroy();\n      setView(undefined);\n    }\n  }, [view]);\n  useEffect(() => {\n    if (autoFocus && view) {\n      view.focus();\n    }\n  }, [autoFocus, view]);\n  useEffect(() => {\n    if (view) {\n      view.dispatch({\n        effects: StateEffect.reconfigure.of(getExtensions)\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [theme, extensions, height, minHeight, maxHeight, width, minWidth, maxWidth, placeholderStr, editable, readOnly, defaultIndentWithTab, defaultBasicSetup, onChange, onUpdate]);\n  useEffect(() => {\n    if (value === undefined) {\n      return;\n    }\n    var currentValue = view ? view.state.doc.toString() : '';\n    if (view && value !== currentValue) {\n      view.dispatch({\n        changes: {\n          from: 0,\n          to: currentValue.length,\n          insert: value || ''\n        },\n        annotations: [External.of(true)]\n      });\n    }\n  }, [value, view]);\n  return {\n    state,\n    setState,\n    view,\n    setView,\n    container,\n    setContainer\n  };\n}","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"value\", \"selection\", \"extensions\", \"onChange\", \"onStatistics\", \"onCreateEditor\", \"onUpdate\", \"autoFocus\", \"theme\", \"height\", \"minHeight\", \"maxHeight\", \"width\", \"minWidth\", \"maxWidth\", \"basicSetup\", \"placeholder\", \"indentWithTab\", \"editable\", \"readOnly\", \"root\", \"initialState\"];\nimport React, { useRef, forwardRef, useImperativeHandle } from 'react';\nimport { useCodeMirror } from './useCodeMirror';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport * from '@codemirror/view';\nexport * from '@codemirror/state';\nexport * from '@uiw/codemirror-extensions-basic-setup';\nexport * from './useCodeMirror';\nexport * from './getDefaultExtensions';\nexport * from './utils';\nvar ReactCodeMirror = /*#__PURE__*/forwardRef((props, ref) => {\n  var {\n      className,\n      value = '',\n      selection,\n      extensions = [],\n      onChange,\n      onStatistics,\n      onCreateEditor,\n      onUpdate,\n      autoFocus,\n      theme = 'light',\n      height,\n      minHeight,\n      maxHeight,\n      width,\n      minWidth,\n      maxWidth,\n      basicSetup,\n      placeholder,\n      indentWithTab,\n      editable,\n      readOnly,\n      root,\n      initialState\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  var editor = useRef(null);\n  var {\n    state,\n    view,\n    container\n  } = useCodeMirror({\n    container: editor.current,\n    root,\n    value,\n    autoFocus,\n    theme,\n    height,\n    minHeight,\n    maxHeight,\n    width,\n    minWidth,\n    maxWidth,\n    basicSetup,\n    placeholder,\n    indentWithTab,\n    editable,\n    readOnly,\n    selection,\n    onChange,\n    onStatistics,\n    onCreateEditor,\n    onUpdate,\n    extensions,\n    initialState\n  });\n  useImperativeHandle(ref, () => ({\n    editor: editor.current,\n    state: state,\n    view: view\n  }), [editor, container, state, view]);\n\n  // check type of value\n  if (typeof value !== 'string') {\n    throw new Error(\"value must be typeof string but got \" + typeof value);\n  }\n  var defaultClassNames = typeof theme === 'string' ? \"cm-theme-\" + theme : 'cm-theme';\n  return /*#__PURE__*/_jsx(\"div\", _extends({\n    ref: editor,\n    className: \"\" + defaultClassNames + (className ? \" \" + className : '')\n  }, other));\n});\nReactCodeMirror.displayName = 'CodeMirror';\nexport default ReactCodeMirror;","import yaml from 'yaml';\nimport { useApi } from '@backstage/core-plugin-api';\nimport React, { createContext, useState, useRef, useCallback, useMemo, useContext } from 'react';\nimport { scaffolderApiRef } from '@backstage/plugin-scaffolder-react';\n\nconst MAX_CONTENT_SIZE = 64 * 1024;\nconst CHUNK_SIZE = 32 * 1024;\nconst DryRunContext = createContext(void 0);\nfunction base64EncodeContent(content) {\n  if (content.length > MAX_CONTENT_SIZE) {\n    return window.btoa(\"<file too large>\");\n  }\n  try {\n    return window.btoa(content);\n  } catch {\n    const decoder = new TextEncoder();\n    const buffer = decoder.encode(content);\n    const chunks = new Array();\n    for (let offset = 0; offset < buffer.length; offset += CHUNK_SIZE) {\n      chunks.push(\n        String.fromCharCode(...buffer.slice(offset, offset + CHUNK_SIZE))\n      );\n    }\n    return window.btoa(chunks.join(\"\"));\n  }\n}\nfunction DryRunProvider(props) {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const [state, setState] = useState({\n    results: [],\n    selectedResult: void 0\n  });\n  const idRef = useRef(1);\n  const selectResult = useCallback((id) => {\n    setState((prevState) => {\n      const result = prevState.results.find((r) => r.id === id);\n      if (result === prevState.selectedResult) {\n        return prevState;\n      }\n      return {\n        results: prevState.results,\n        selectedResult: result\n      };\n    });\n  }, []);\n  const deleteResult = useCallback((id) => {\n    setState((prevState) => {\n      const index = prevState.results.findIndex((r) => r.id === id);\n      if (index === -1) {\n        return prevState;\n      }\n      const newResults = prevState.results.slice();\n      const [deleted] = newResults.splice(index, 1);\n      return {\n        results: newResults,\n        selectedResult: prevState.selectedResult?.id === deleted.id ? newResults[0] : prevState.selectedResult\n      };\n    });\n  }, []);\n  const execute = useCallback(\n    async (options) => {\n      if (!scaffolderApi.dryRun) {\n        throw new Error(\"Scaffolder API does not support dry-run\");\n      }\n      const parsed = yaml.parse(options.templateContent);\n      const response = await scaffolderApi.dryRun({\n        template: parsed,\n        values: options.values,\n        secrets: {},\n        directoryContents: options.files.map((file) => ({\n          path: file.path,\n          base64Content: base64EncodeContent(file.content)\n        }))\n      });\n      const result = {\n        ...response,\n        id: idRef.current++\n      };\n      setState((prevState) => ({\n        results: [...prevState.results, result],\n        selectedResult: prevState.selectedResult ?? result\n      }));\n    },\n    [scaffolderApi]\n  );\n  const dryRun = useMemo(\n    () => ({\n      ...state,\n      selectResult,\n      deleteResult,\n      execute\n    }),\n    [state, selectResult, deleteResult, execute]\n  );\n  return /* @__PURE__ */ React.createElement(DryRunContext.Provider, { value: dryRun }, props.children);\n}\nfunction useDryRun() {\n  const value = useContext(DryRunContext);\n  if (!value) {\n    throw new Error(\"must be used within a DryRunProvider\");\n  }\n  return value;\n}\n\nexport { DryRunProvider, base64EncodeContent, useDryRun };\n//# sourceMappingURL=DryRunContext.esm.js.map\n","import { useCallback, useState } from 'react';\nconst stateChanger = (state) => (state + 1) % Number.MAX_SAFE_INTEGER;\nexport function useRerender() {\n    const [, setState] = useState(0);\n    return useCallback(() => {\n        setState(stateChanger);\n    }, []);\n}\n","import { ErrorPanel, Progress } from '@backstage/core-components';\nimport { useAsync, useRerender } from '@react-hookz/web';\nimport React, { createContext, useEffect, useContext } from 'react';\n\nconst MAX_SIZE = 1024 * 1024;\nconst MAX_SIZE_MESSAGE = \"This file is too large to be displayed\";\nclass DirectoryEditorFileManager {\n  #access;\n  #signalUpdate;\n  #content;\n  #savedContent;\n  constructor(access, signalUpdate) {\n    this.#access = access;\n    this.#signalUpdate = signalUpdate;\n  }\n  get path() {\n    return this.#access.path;\n  }\n  get content() {\n    return this.#content ?? MAX_SIZE_MESSAGE;\n  }\n  updateContent(content) {\n    if (this.#content === void 0) {\n      return;\n    }\n    this.#content = content;\n    this.#signalUpdate();\n  }\n  get dirty() {\n    return this.#content !== this.#savedContent;\n  }\n  async save() {\n    if (this.#content !== void 0) {\n      await this.#access.save(this.#content);\n      this.#savedContent = this.#content;\n      this.#signalUpdate();\n    }\n  }\n  async reload() {\n    const file = await this.#access.file();\n    if (file.size > MAX_SIZE) {\n      if (this.#content !== void 0) {\n        this.#content = void 0;\n        this.#savedContent = void 0;\n        this.#signalUpdate();\n      }\n      return;\n    }\n    const content = await file.text();\n    if (this.#content !== content) {\n      this.#content = content;\n      this.#savedContent = content;\n      this.#signalUpdate();\n    }\n  }\n}\nclass DirectoryEditorManager {\n  #access;\n  #listeners = /* @__PURE__ */ new Set();\n  #files = [];\n  #selectedFile;\n  constructor(access) {\n    this.#access = access;\n  }\n  get files() {\n    return this.#files;\n  }\n  get selectedFile() {\n    return this.#selectedFile;\n  }\n  setSelectedFile = (path) => {\n    const prev = this.#selectedFile;\n    const next = this.#files.find((file) => file.path === path);\n    if (prev !== next) {\n      this.#selectedFile = next;\n      this.#signalUpdate();\n    }\n  };\n  get dirty() {\n    return this.#files.some((file) => file.dirty);\n  }\n  async save() {\n    await Promise.all(this.#files.map((file) => file.save()));\n  }\n  async reload() {\n    const selectedPath = this.#selectedFile?.path;\n    const files = await this.#access.listFiles();\n    const fileManagers = await Promise.all(\n      files.map(async (file) => {\n        const manager = new DirectoryEditorFileManager(\n          file,\n          this.#signalUpdate\n        );\n        await manager.reload();\n        return manager;\n      })\n    );\n    this.#files.length = 0;\n    this.#files.push(...fileManagers);\n    this.setSelectedFile(selectedPath);\n    this.#signalUpdate();\n  }\n  subscribe(listener) {\n    this.#listeners.add(listener);\n    return () => {\n      this.#listeners.delete(listener);\n    };\n  }\n  #signalUpdate = () => {\n    this.#listeners.forEach((listener) => listener());\n  };\n}\nconst DirectoryEditorContext = createContext(\n  void 0\n);\nfunction useDirectoryEditor() {\n  const value = useContext(DirectoryEditorContext);\n  const rerender = useRerender();\n  useEffect(() => value?.subscribe(rerender), [value, rerender]);\n  if (!value) {\n    throw new Error(\"must be used within a DirectoryEditorProvider\");\n  }\n  return value;\n}\nfunction DirectoryEditorProvider(props) {\n  const { directory } = props;\n  const [{ result, error }, { execute }] = useAsync(\n    async (dir) => {\n      const manager = new DirectoryEditorManager(dir);\n      await manager.reload();\n      const firstYaml = manager.files.find((file) => file.path.match(/\\.ya?ml$/));\n      if (firstYaml) {\n        manager.setSelectedFile(firstYaml.path);\n      }\n      return manager;\n    }\n  );\n  useEffect(() => {\n    execute(directory);\n  }, [execute, directory]);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { error });\n  } else if (!result) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(DirectoryEditorContext.Provider, { value: result }, props.children);\n}\n\nexport { DirectoryEditorProvider, useDirectoryEditor };\n//# sourceMappingURL=DirectoryEditorContext.esm.js.map\n","import { useApiHolder } from '@backstage/core-plugin-api';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useState, useMemo, Component } from 'react';\nimport useDebounce from 'react-use/esm/useDebounce';\nimport yaml from 'yaml';\nimport { createAsyncValidators, Stepper } from '@backstage/plugin-scaffolder-react/alpha';\nimport { useDryRun } from './DryRunContext.esm.js';\nimport { useDirectoryEditor } from './DirectoryEditorContext.esm.js';\n\nconst useStyles = makeStyles({\n  containerWrapper: {\n    position: \"relative\",\n    width: \"100%\",\n    height: \"100%\"\n  },\n  container: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    overflow: \"auto\"\n  }\n});\nclass ErrorBoundary extends Component {\n  state = {\n    shouldRender: true\n  };\n  componentDidUpdate(prevProps) {\n    if (prevProps.invalidator !== this.props.invalidator) {\n      this.setState({ shouldRender: true });\n    }\n  }\n  componentDidCatch(error) {\n    this.props.setErrorText(error.message);\n    this.setState({ shouldRender: false });\n  }\n  render() {\n    return this.state.shouldRender ? this.props.children : null;\n  }\n}\nfunction isJsonObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction TemplateEditorForm(props) {\n  const {\n    content,\n    contentIsSpec,\n    onDryRun,\n    setErrorText,\n    fieldExtensions = [],\n    layouts = []\n  } = props;\n  const classes = useStyles();\n  const apiHolder = useApiHolder();\n  const [steps, setSteps] = useState();\n  const fields = useMemo(() => {\n    return Object.fromEntries(\n      fieldExtensions.map(({ name, component }) => [name, component])\n    );\n  }, [fieldExtensions]);\n  useDebounce(\n    () => {\n      try {\n        if (!content) {\n          setSteps(void 0);\n          return;\n        }\n        const parsed = yaml.parseAllDocuments(content).filter((c) => c).map((c) => c.toJSON())[0];\n        if (!isJsonObject(parsed)) {\n          setSteps(void 0);\n          return;\n        }\n        let rootObj = parsed;\n        if (!contentIsSpec) {\n          const isTemplate = String(parsed.kind).toLocaleLowerCase(\"en-US\") === \"template\";\n          if (!isTemplate) {\n            setSteps(void 0);\n            return;\n          }\n          rootObj = isJsonObject(parsed.spec) ? parsed.spec : {};\n        }\n        const { parameters } = rootObj;\n        if (!Array.isArray(parameters)) {\n          setErrorText(\"Template parameters must be an array\");\n          setSteps(void 0);\n          return;\n        }\n        const fieldValidators = Object.fromEntries(\n          fieldExtensions.map(({ name, validation }) => [name, validation])\n        );\n        setErrorText();\n        setSteps(\n          parameters.flatMap(\n            (param) => isJsonObject(param) ? [\n              {\n                title: String(param.title),\n                schema: param,\n                validate: createAsyncValidators(param, fieldValidators, {\n                  apiHolder\n                })\n              }\n            ] : []\n          )\n        );\n      } catch (e) {\n        setErrorText(e.message);\n      }\n    },\n    250,\n    [contentIsSpec, content, apiHolder]\n  );\n  if (!steps) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.containerWrapper }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.container }, /* @__PURE__ */ React.createElement(ErrorBoundary, { invalidator: steps, setErrorText }, /* @__PURE__ */ React.createElement(\n    Stepper,\n    {\n      manifest: { steps, title: \"Template Editor\" },\n      extensions: fieldExtensions,\n      components: fields,\n      onCreate: async (options) => {\n        await onDryRun?.(options);\n      },\n      layouts\n    }\n  ))));\n}\nfunction TemplateEditorFormDirectoryEditorDryRun(props) {\n  const { setErrorText, fieldExtensions = [], layouts } = props;\n  const dryRun = useDryRun();\n  const directoryEditor = useDirectoryEditor();\n  const { selectedFile } = directoryEditor;\n  const handleDryRun = async (data) => {\n    if (!selectedFile) {\n      return;\n    }\n    try {\n      await dryRun.execute({\n        templateContent: selectedFile.content,\n        values: data,\n        files: directoryEditor.files\n      });\n      setErrorText();\n    } catch (e) {\n      setErrorText(String(e.cause || e));\n      throw e;\n    }\n  };\n  const content = selectedFile && selectedFile.path.match(/\\.ya?ml$/) ? selectedFile.content : void 0;\n  return /* @__PURE__ */ React.createElement(\n    TemplateEditorForm,\n    {\n      onDryRun: handleDryRun,\n      fieldExtensions,\n      setErrorText,\n      content,\n      layouts\n    }\n  );\n}\nTemplateEditorForm.DirectoryEditorDryRun = TemplateEditorFormDirectoryEditorDryRun;\n\nexport { TemplateEditorForm, TemplateEditorFormDirectoryEditorDryRun };\n//# sourceMappingURL=TemplateEditorForm.esm.js.map\n","import { StreamLanguage } from '@codemirror/language';\nimport { yaml as yaml$1 } from '@codemirror/legacy-modes/mode/yaml';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport FormControl from '@material-ui/core/FormControl';\nimport IconButton from '@material-ui/core/IconButton';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CodeMirror from '@uiw/react-codemirror';\nimport React, { useState, useMemo, useCallback } from 'react';\nimport yaml from 'yaml';\nimport { Form } from '@backstage/plugin-scaffolder-react/alpha';\nimport { TemplateEditorForm } from './TemplateEditorForm.esm.js';\nimport validator from '@rjsf/validator-ajv8';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    gridArea: \"pageContent\",\n    display: \"grid\",\n    gridTemplateAreas: `\n      \"controls controls\"\n      \"fieldForm preview\"\n    `,\n    gridTemplateRows: \"auto 1fr\",\n    gridTemplateColumns: \"1fr 1fr\"\n  },\n  controls: {\n    gridArea: \"controls\",\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    alignItems: \"center\",\n    margin: theme.spacing(1)\n  },\n  fieldForm: {\n    gridArea: \"fieldForm\"\n  },\n  preview: {\n    gridArea: \"preview\"\n  }\n}));\nconst CustomFieldExplorer = ({\n  customFieldExtensions = [],\n  onClose\n}) => {\n  const classes = useStyles();\n  const fieldOptions = customFieldExtensions.filter((field) => !!field.schema);\n  const [selectedField, setSelectedField] = useState(fieldOptions[0]);\n  const [fieldFormState, setFieldFormState] = useState({});\n  const [refreshKey, setRefreshKey] = useState(Date.now());\n  const sampleFieldTemplate = useMemo(\n    () => yaml.stringify({\n      parameters: [\n        {\n          title: `${selectedField.name} Example`,\n          properties: {\n            [selectedField.name]: {\n              type: selectedField.schema?.returnValue?.type,\n              \"ui:field\": selectedField.name,\n              \"ui:options\": fieldFormState\n            }\n          }\n        }\n      ]\n    }),\n    [fieldFormState, selectedField]\n  );\n  const fieldComponents = useMemo(() => {\n    return Object.fromEntries(\n      customFieldExtensions.map(({ name, component }) => [name, component])\n    );\n  }, [customFieldExtensions]);\n  const handleSelectionChange = useCallback(\n    (selection) => {\n      setSelectedField(selection);\n      setFieldFormState({});\n    },\n    [setFieldFormState, setSelectedField]\n  );\n  const handleFieldConfigChange = useCallback(\n    (state) => {\n      setFieldFormState(state);\n      setRefreshKey(Date.now());\n    },\n    [setFieldFormState, setRefreshKey]\n  );\n  return /* @__PURE__ */ React.createElement(\"main\", { className: classes.root }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.controls }, /* @__PURE__ */ React.createElement(FormControl, { variant: \"outlined\", size: \"small\", fullWidth: true }, /* @__PURE__ */ React.createElement(InputLabel, { id: \"select-field-label\" }, \"Choose Custom Field Extension\"), /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      value: selectedField,\n      label: \"Choose Custom Field Extension\",\n      labelId: \"select-field-label\",\n      onChange: (e) => handleSelectionChange(e.target.value)\n    },\n    fieldOptions.map((option, idx) => /* @__PURE__ */ React.createElement(MenuItem, { key: idx, value: option }, option.name))\n  )), /* @__PURE__ */ React.createElement(IconButton, { size: \"medium\", onClick: onClose, \"aria-label\": \"Close\" }, /* @__PURE__ */ React.createElement(CloseIcon, null))), /* @__PURE__ */ React.createElement(\"div\", { className: classes.fieldForm }, /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardHeader, { title: \"Field Options\" }), /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(\n    Form,\n    {\n      showErrorList: false,\n      fields: { ...fieldComponents },\n      noHtml5Validate: true,\n      formData: fieldFormState,\n      formContext: { fieldFormState },\n      onSubmit: (e) => handleFieldConfigChange(e.formData),\n      validator,\n      schema: selectedField.schema?.uiOptions || {},\n      experimental_defaultFormStateBehavior: {\n        allOf: \"populateDefaults\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        type: \"submit\",\n        disabled: !selectedField.schema?.uiOptions\n      },\n      \"Apply\"\n    )\n  )))), /* @__PURE__ */ React.createElement(\"div\", { className: classes.preview }, /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardHeader, { title: \"Example Template Spec\" }), /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(\n    CodeMirror,\n    {\n      readOnly: true,\n      theme: \"dark\",\n      height: \"100%\",\n      extensions: [StreamLanguage.define(yaml$1)],\n      value: sampleFieldTemplate\n    }\n  ))), /* @__PURE__ */ React.createElement(\n    TemplateEditorForm,\n    {\n      key: refreshKey,\n      content: sampleFieldTemplate,\n      contentIsSpec: true,\n      fieldExtensions: customFieldExtensions,\n      setErrorText: () => null\n    }\n  )));\n};\n\nexport { CustomFieldExplorer };\n//# sourceMappingURL=CustomFieldExplorer.esm.js.map\n","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\n\nvar TreeViewContext = React.createContext({});\n\nif (process.env.NODE_ENV !== 'production') {\n  TreeViewContext.displayName = 'TreeViewContext';\n}\n\nexport default TreeViewContext;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useControlled } from '@material-ui/core/utils';\nimport TreeViewContext from './TreeViewContext';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    padding: 0,\n    margin: 0,\n    listStyle: 'none'\n  }\n};\n\nfunction arrayDiff(arr1, arr2) {\n  if (arr1.length !== arr2.length) return true;\n\n  for (var i = 0; i < arr1.length; i += 1) {\n    if (arr1[i] !== arr2[i]) return true;\n  }\n\n  return false;\n}\n\nvar findNextFirstChar = function findNextFirstChar(firstChars, startIndex, char) {\n  for (var i = startIndex; i < firstChars.length; i += 1) {\n    if (char === firstChars[i]) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar defaultExpandedDefault = [];\nvar defaultSelectedDefault = [];\nvar TreeView = /*#__PURE__*/React.forwardRef(function TreeView(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      defaultCollapseIcon = props.defaultCollapseIcon,\n      defaultEndIcon = props.defaultEndIcon,\n      _props$defaultExpande = props.defaultExpanded,\n      defaultExpanded = _props$defaultExpande === void 0 ? defaultExpandedDefault : _props$defaultExpande,\n      defaultExpandIcon = props.defaultExpandIcon,\n      defaultParentIcon = props.defaultParentIcon,\n      _props$defaultSelecte = props.defaultSelected,\n      defaultSelected = _props$defaultSelecte === void 0 ? defaultSelectedDefault : _props$defaultSelecte,\n      _props$disableSelecti = props.disableSelection,\n      disableSelection = _props$disableSelecti === void 0 ? false : _props$disableSelecti,\n      _props$multiSelect = props.multiSelect,\n      multiSelect = _props$multiSelect === void 0 ? false : _props$multiSelect,\n      expandedProp = props.expanded,\n      onNodeSelect = props.onNodeSelect,\n      onNodeToggle = props.onNodeToggle,\n      selectedProp = props.selected,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"defaultCollapseIcon\", \"defaultEndIcon\", \"defaultExpanded\", \"defaultExpandIcon\", \"defaultParentIcon\", \"defaultSelected\", \"disableSelection\", \"multiSelect\", \"expanded\", \"onNodeSelect\", \"onNodeToggle\", \"selected\"]);\n\n  var _React$useState = React.useState(null),\n      tabbable = _React$useState[0],\n      setTabbable = _React$useState[1];\n\n  var _React$useState2 = React.useState(null),\n      focusedNodeId = _React$useState2[0],\n      setFocusedNodeId = _React$useState2[1];\n\n  var nodeMap = React.useRef({});\n  var firstCharMap = React.useRef({});\n  var visibleNodes = React.useRef([]);\n\n  var _useControlled = useControlled({\n    controlled: expandedProp,\n    default: defaultExpanded,\n    name: 'TreeView',\n    state: 'expanded'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      expanded = _useControlled2[0],\n      setExpandedState = _useControlled2[1];\n\n  var _useControlled3 = useControlled({\n    controlled: selectedProp,\n    default: defaultSelected,\n    name: 'TreeView',\n    state: 'selected'\n  }),\n      _useControlled4 = _slicedToArray(_useControlled3, 2),\n      selected = _useControlled4[0],\n      setSelectedState = _useControlled4[1];\n  /*\n   * Status Helpers\n   */\n\n\n  var isExpanded = React.useCallback(function (id) {\n    return Array.isArray(expanded) ? expanded.indexOf(id) !== -1 : false;\n  }, [expanded]);\n  var isSelected = React.useCallback(function (id) {\n    return Array.isArray(selected) ? selected.indexOf(id) !== -1 : selected === id;\n  }, [selected]);\n\n  var isTabbable = function isTabbable(id) {\n    return tabbable === id;\n  };\n\n  var isFocused = function isFocused(id) {\n    return focusedNodeId === id;\n  };\n  /*\n   * Node Helpers\n   */\n\n\n  var getNextNode = function getNextNode(id) {\n    var nodeIndex = visibleNodes.current.indexOf(id);\n\n    if (nodeIndex !== -1 && nodeIndex + 1 < visibleNodes.current.length) {\n      return visibleNodes.current[nodeIndex + 1];\n    }\n\n    return null;\n  };\n\n  var getPreviousNode = function getPreviousNode(id) {\n    var nodeIndex = visibleNodes.current.indexOf(id);\n\n    if (nodeIndex !== -1 && nodeIndex - 1 >= 0) {\n      return visibleNodes.current[nodeIndex - 1];\n    }\n\n    return null;\n  };\n\n  var getLastNode = function getLastNode() {\n    return visibleNodes.current[visibleNodes.current.length - 1];\n  };\n\n  var getFirstNode = function getFirstNode() {\n    return visibleNodes.current[0];\n  };\n\n  var getParent = function getParent(id) {\n    return nodeMap.current[id].parent;\n  };\n\n  var getNodesInRange = function getNodesInRange(a, b) {\n    var aIndex = visibleNodes.current.indexOf(a);\n    var bIndex = visibleNodes.current.indexOf(b);\n    var start = Math.min(aIndex, bIndex);\n    var end = Math.max(aIndex, bIndex);\n    return visibleNodes.current.slice(start, end + 1);\n  };\n  /*\n   * Focus Helpers\n   */\n\n\n  var focus = function focus(id) {\n    if (id) {\n      setTabbable(id);\n      setFocusedNodeId(id);\n    }\n  };\n\n  var focusNextNode = function focusNextNode(id) {\n    return focus(getNextNode(id));\n  };\n\n  var focusPreviousNode = function focusPreviousNode(id) {\n    return focus(getPreviousNode(id));\n  };\n\n  var focusFirstNode = function focusFirstNode() {\n    return focus(getFirstNode());\n  };\n\n  var focusLastNode = function focusLastNode() {\n    return focus(getLastNode());\n  };\n\n  var focusByFirstCharacter = function focusByFirstCharacter(id, char) {\n    var start;\n    var index;\n    var lowercaseChar = char.toLowerCase();\n    var firstCharIds = [];\n    var firstChars = []; // This really only works since the ids are strings\n\n    Object.keys(firstCharMap.current).forEach(function (nodeId) {\n      var firstChar = firstCharMap.current[nodeId];\n      var map = nodeMap.current[nodeId];\n      var visible = map.parent ? isExpanded(map.parent) : true;\n\n      if (visible) {\n        firstCharIds.push(nodeId);\n        firstChars.push(firstChar);\n      }\n    }); // Get start index for search based on position of currentItem\n\n    start = firstCharIds.indexOf(id) + 1;\n\n    if (start === nodeMap.current.length) {\n      start = 0;\n    } // Check remaining slots in the menu\n\n\n    index = findNextFirstChar(firstChars, start, lowercaseChar); // If not found in remaining slots, check from beginning\n\n    if (index === -1) {\n      index = findNextFirstChar(firstChars, 0, lowercaseChar);\n    } // If match was found...\n\n\n    if (index > -1) {\n      focus(firstCharIds[index]);\n    }\n  };\n  /*\n   * Expansion Helpers\n   */\n\n\n  var toggleExpansion = function toggleExpansion(event) {\n    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : focusedNodeId;\n    var newExpanded;\n\n    if (expanded.indexOf(value) !== -1) {\n      newExpanded = expanded.filter(function (id) {\n        return id !== value;\n      });\n      setTabbable(function (oldTabbable) {\n        var map = nodeMap.current[oldTabbable];\n\n        if (oldTabbable && (map && map.parent ? map.parent.id : null) === value) {\n          return value;\n        }\n\n        return oldTabbable;\n      });\n    } else {\n      newExpanded = [value].concat(expanded);\n    }\n\n    if (onNodeToggle) {\n      onNodeToggle(event, newExpanded);\n    }\n\n    setExpandedState(newExpanded);\n  };\n\n  var expandAllSiblings = function expandAllSiblings(event, id) {\n    var map = nodeMap.current[id];\n    var parent = nodeMap.current[map.parent];\n    var diff;\n\n    if (parent) {\n      diff = parent.children.filter(function (child) {\n        return !isExpanded(child);\n      });\n    } else {\n      var topLevelNodes = nodeMap.current[-1].children;\n      diff = topLevelNodes.filter(function (node) {\n        return !isExpanded(node);\n      });\n    }\n\n    var newExpanded = expanded.concat(diff);\n\n    if (diff.length > 0) {\n      setExpandedState(newExpanded);\n\n      if (onNodeToggle) {\n        onNodeToggle(event, newExpanded);\n      }\n    }\n  };\n  /*\n   * Selection Helpers\n   */\n\n\n  var lastSelectedNode = React.useRef(null);\n  var lastSelectionWasRange = React.useRef(false);\n  var currentRangeSelection = React.useRef([]);\n\n  var handleRangeArrowSelect = function handleRangeArrowSelect(event, nodes) {\n    var base = selected;\n    var start = nodes.start,\n        next = nodes.next,\n        current = nodes.current;\n\n    if (!next || !current) {\n      return;\n    }\n\n    if (currentRangeSelection.current.indexOf(current) === -1) {\n      currentRangeSelection.current = [];\n    }\n\n    if (lastSelectionWasRange.current) {\n      if (currentRangeSelection.current.indexOf(next) !== -1) {\n        base = base.filter(function (id) {\n          return id === start || id !== current;\n        });\n        currentRangeSelection.current = currentRangeSelection.current.filter(function (id) {\n          return id === start || id !== current;\n        });\n      } else {\n        base.push(next);\n        currentRangeSelection.current.push(next);\n      }\n    } else {\n      base.push(next);\n      currentRangeSelection.current.push(current, next);\n    }\n\n    if (onNodeSelect) {\n      onNodeSelect(event, base);\n    }\n\n    setSelectedState(base);\n  };\n\n  var handleRangeSelect = function handleRangeSelect(event, nodes) {\n    var base = selected;\n    var start = nodes.start,\n        end = nodes.end; // If last selection was a range selection ignore nodes that were selected.\n\n    if (lastSelectionWasRange.current) {\n      base = selected.filter(function (id) {\n        return currentRangeSelection.current.indexOf(id) === -1;\n      });\n    }\n\n    var range = getNodesInRange(start, end);\n    currentRangeSelection.current = range;\n    var newSelected = base.concat(range);\n    newSelected = newSelected.filter(function (id, i) {\n      return newSelected.indexOf(id) === i;\n    });\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var handleMultipleSelect = function handleMultipleSelect(event, value) {\n    var newSelected = [];\n\n    if (selected.indexOf(value) !== -1) {\n      newSelected = selected.filter(function (id) {\n        return id !== value;\n      });\n    } else {\n      newSelected = [value].concat(selected);\n    }\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var handleSingleSelect = function handleSingleSelect(event, value) {\n    var newSelected = multiSelect ? [value] : value;\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var selectNode = function selectNode(event, id) {\n    var multiple = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (id) {\n      if (multiple) {\n        handleMultipleSelect(event, id);\n      } else {\n        handleSingleSelect(event, id);\n      }\n\n      lastSelectedNode.current = id;\n      lastSelectionWasRange.current = false;\n      currentRangeSelection.current = [];\n      return true;\n    }\n\n    return false;\n  };\n\n  var selectRange = function selectRange(event, nodes) {\n    var stacked = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var _nodes$start = nodes.start,\n        start = _nodes$start === void 0 ? lastSelectedNode.current : _nodes$start,\n        end = nodes.end,\n        current = nodes.current;\n\n    if (stacked) {\n      handleRangeArrowSelect(event, {\n        start: start,\n        next: end,\n        current: current\n      });\n    } else {\n      handleRangeSelect(event, {\n        start: start,\n        end: end\n      });\n    }\n\n    lastSelectionWasRange.current = true;\n    return true;\n  };\n\n  var rangeSelectToFirst = function rangeSelectToFirst(event, id) {\n    if (!lastSelectedNode.current) {\n      lastSelectedNode.current = id;\n    }\n\n    var start = lastSelectionWasRange.current ? lastSelectedNode.current : id;\n    return selectRange(event, {\n      start: start,\n      end: getFirstNode()\n    });\n  };\n\n  var rangeSelectToLast = function rangeSelectToLast(event, id) {\n    if (!lastSelectedNode.current) {\n      lastSelectedNode.current = id;\n    }\n\n    var start = lastSelectionWasRange.current ? lastSelectedNode.current : id;\n    return selectRange(event, {\n      start: start,\n      end: getLastNode()\n    });\n  };\n\n  var selectNextNode = function selectNextNode(event, id) {\n    return selectRange(event, {\n      end: getNextNode(id),\n      current: id\n    }, true);\n  };\n\n  var selectPreviousNode = function selectPreviousNode(event, id) {\n    return selectRange(event, {\n      end: getPreviousNode(id),\n      current: id\n    }, true);\n  };\n\n  var selectAllNodes = function selectAllNodes(event) {\n    return selectRange(event, {\n      start: getFirstNode(),\n      end: getLastNode()\n    });\n  };\n  /*\n   * Mapping Helpers\n   */\n\n\n  var addNodeToNodeMap = function addNodeToNodeMap(id, childrenIds) {\n    var currentMap = nodeMap.current[id];\n    nodeMap.current[id] = _extends({}, currentMap, {\n      children: childrenIds,\n      id: id\n    });\n    childrenIds.forEach(function (childId) {\n      var currentChildMap = nodeMap.current[childId];\n      nodeMap.current[childId] = _extends({}, currentChildMap, {\n        parent: id,\n        id: childId\n      });\n    });\n  };\n\n  var getNodesToRemove = React.useCallback(function (id) {\n    var map = nodeMap.current[id];\n    var nodes = [];\n\n    if (map) {\n      nodes.push(id);\n\n      if (map.children) {\n        nodes.concat(map.children);\n        map.children.forEach(function (node) {\n          nodes.concat(getNodesToRemove(node));\n        });\n      }\n    }\n\n    return nodes;\n  }, []);\n  var cleanUpFirstCharMap = React.useCallback(function (nodes) {\n    var newMap = _extends({}, firstCharMap.current);\n\n    nodes.forEach(function (node) {\n      if (newMap[node]) {\n        delete newMap[node];\n      }\n    });\n    firstCharMap.current = newMap;\n  }, []);\n  var removeNodeFromNodeMap = React.useCallback(function (id) {\n    var nodes = getNodesToRemove(id);\n    cleanUpFirstCharMap(nodes);\n\n    var newMap = _extends({}, nodeMap.current);\n\n    nodes.forEach(function (node) {\n      var map = newMap[node];\n\n      if (map) {\n        if (map.parent) {\n          var parentMap = newMap[map.parent];\n\n          if (parentMap && parentMap.children) {\n            var parentChildren = parentMap.children.filter(function (c) {\n              return c !== node;\n            });\n            newMap[map.parent] = _extends({}, parentMap, {\n              children: parentChildren\n            });\n          }\n        }\n\n        delete newMap[node];\n      }\n    });\n    nodeMap.current = newMap;\n    setFocusedNodeId(function (oldFocusedNodeId) {\n      if (oldFocusedNodeId === id) {\n        return null;\n      }\n\n      return oldFocusedNodeId;\n    });\n  }, [getNodesToRemove, cleanUpFirstCharMap]);\n\n  var mapFirstChar = function mapFirstChar(id, firstChar) {\n    firstCharMap.current[id] = firstChar;\n  };\n\n  var prevChildIds = React.useRef([]);\n\n  var _React$useState3 = React.useState(false),\n      childrenCalculated = _React$useState3[0],\n      setChildrenCalculated = _React$useState3[1];\n\n  React.useEffect(function () {\n    var childIds = [];\n    React.Children.forEach(children, function (child) {\n      if ( /*#__PURE__*/React.isValidElement(child) && child.props.nodeId) {\n        childIds.push(child.props.nodeId);\n      }\n    });\n\n    if (arrayDiff(prevChildIds.current, childIds)) {\n      nodeMap.current[-1] = {\n        parent: null,\n        children: childIds\n      };\n      childIds.forEach(function (id, index) {\n        if (index === 0) {\n          setTabbable(id);\n        }\n      });\n      visibleNodes.current = nodeMap.current[-1].children;\n      prevChildIds.current = childIds;\n      setChildrenCalculated(true);\n    }\n  }, [children]);\n  React.useEffect(function () {\n    var buildVisible = function buildVisible(nodes) {\n      var list = [];\n\n      for (var i = 0; i < nodes.length; i += 1) {\n        var item = nodes[i];\n        list.push(item);\n        var childs = nodeMap.current[item].children;\n\n        if (isExpanded(item) && childs) {\n          list = list.concat(buildVisible(childs));\n        }\n      }\n\n      return list;\n    };\n\n    if (childrenCalculated) {\n      visibleNodes.current = buildVisible(nodeMap.current[-1].children);\n    }\n  }, [expanded, childrenCalculated, isExpanded, children]);\n\n  var noopSelection = function noopSelection() {\n    return false;\n  };\n\n  return /*#__PURE__*/React.createElement(TreeViewContext.Provider, {\n    value: {\n      icons: {\n        defaultCollapseIcon: defaultCollapseIcon,\n        defaultExpandIcon: defaultExpandIcon,\n        defaultParentIcon: defaultParentIcon,\n        defaultEndIcon: defaultEndIcon\n      },\n      focus: focus,\n      focusFirstNode: focusFirstNode,\n      focusLastNode: focusLastNode,\n      focusNextNode: focusNextNode,\n      focusPreviousNode: focusPreviousNode,\n      focusByFirstCharacter: focusByFirstCharacter,\n      expandAllSiblings: expandAllSiblings,\n      toggleExpansion: toggleExpansion,\n      isExpanded: isExpanded,\n      isFocused: isFocused,\n      isSelected: isSelected,\n      selectNode: disableSelection ? noopSelection : selectNode,\n      selectRange: disableSelection ? noopSelection : selectRange,\n      selectNextNode: disableSelection ? noopSelection : selectNextNode,\n      selectPreviousNode: disableSelection ? noopSelection : selectPreviousNode,\n      rangeSelectToFirst: disableSelection ? noopSelection : rangeSelectToFirst,\n      rangeSelectToLast: disableSelection ? noopSelection : rangeSelectToLast,\n      selectAllNodes: disableSelection ? noopSelection : selectAllNodes,\n      isTabbable: isTabbable,\n      multiSelect: multiSelect,\n      getParent: getParent,\n      mapFirstChar: mapFirstChar,\n      addNodeToNodeMap: addNodeToNodeMap,\n      removeNodeFromNodeMap: removeNodeFromNodeMap\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", _extends({\n    role: \"tree\",\n    \"aria-multiselectable\": multiSelect,\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), children));\n});\nprocess.env.NODE_ENV !== \"production\" ? TreeView.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The default icon used to collapse the node.\n   */\n  defaultCollapseIcon: PropTypes.node,\n\n  /**\n   * The default icon displayed next to a end node. This is applied to all\n   * tree nodes and can be overridden by the TreeItem `icon` prop.\n   */\n  defaultEndIcon: PropTypes.node,\n\n  /**\n   * Expanded node ids. (Uncontrolled)\n   */\n  defaultExpanded: PropTypes.arrayOf(PropTypes.string),\n\n  /**\n   * The default icon used to expand the node.\n   */\n  defaultExpandIcon: PropTypes.node,\n\n  /**\n   * The default icon displayed next to a parent node. This is applied to all\n   * parent nodes and can be overridden by the TreeItem `icon` prop.\n   */\n  defaultParentIcon: PropTypes.node,\n\n  /**\n   * Selected node ids. (Uncontrolled)\n   * When `multiSelect` is true this takes an array of strings; when false (default) a string.\n   */\n  defaultSelected: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]),\n\n  /**\n   * If `true` selection is disabled.\n   */\n  disableSelection: PropTypes.bool,\n\n  /**\n   * Expanded node ids. (Controlled)\n   */\n  expanded: PropTypes.arrayOf(PropTypes.string),\n\n  /**\n   * If true `ctrl` and `shift` will trigger multiselect.\n   */\n  multiSelect: PropTypes.bool,\n\n  /**\n   * Callback fired when tree items are selected/unselected.\n   *\n   * @param {object} event The event source of the callback\n   * @param {(array|string)} value of the selected nodes. When `multiSelect` is true\n   * this is an array of strings; when false (default) a string.\n   */\n  onNodeSelect: PropTypes.func,\n\n  /**\n   * Callback fired when tree items are expanded/collapsed.\n   *\n   * @param {object} event The event source of the callback.\n   * @param {array} nodeIds The ids of the expanded nodes.\n   */\n  onNodeToggle: PropTypes.func,\n\n  /**\n   * Selected node ids. (Controlled)\n   * When `multiSelect` is true this takes an array of strings; when false (default) a string.\n   */\n  selected: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTreeView'\n})(TreeView);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\n/* eslint-disable jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions  */\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport { alpha, withStyles, useTheme } from '@material-ui/core/styles';\nimport { useForkRef } from '@material-ui/core/utils';\nimport TreeViewContext from '../TreeView/TreeViewContext';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      listStyle: 'none',\n      margin: 0,\n      padding: 0,\n      outline: 0,\n      WebkitTapHighlightColor: 'transparent',\n      '&:focus > $content $label': {\n        backgroundColor: theme.palette.action.hover\n      },\n      '&$selected > $content $label': {\n        backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity)\n      },\n      '&$selected > $content $label:hover, &$selected:focus > $content $label': {\n        backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.hoverOpacity),\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    },\n\n    /* Pseudo-class applied to the root element when expanded. */\n    expanded: {},\n\n    /* Pseudo-class applied to the root element when selected. */\n    selected: {},\n\n    /* Styles applied to the `role=\"group\"` element. */\n    group: {\n      margin: 0,\n      padding: 0,\n      marginLeft: 17\n    },\n\n    /* Styles applied to the tree node content. */\n    content: {\n      width: '100%',\n      display: 'flex',\n      alignItems: 'center',\n      cursor: 'pointer'\n    },\n\n    /* Styles applied to the tree node icon and collapse/expand icon. */\n    iconContainer: {\n      marginRight: 4,\n      width: 15,\n      display: 'flex',\n      flexShrink: 0,\n      justifyContent: 'center',\n      '& svg': {\n        fontSize: 18\n      }\n    },\n\n    /* Styles applied to the label element. */\n    label: {\n      width: '100%',\n      paddingLeft: 4,\n      position: 'relative',\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    }\n  };\n};\n\nvar isPrintableCharacter = function isPrintableCharacter(str) {\n  return str && str.length === 1 && str.match(/\\S/);\n};\n\nvar TreeItem = /*#__PURE__*/React.forwardRef(function TreeItem(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      collapseIcon = props.collapseIcon,\n      endIcon = props.endIcon,\n      expandIcon = props.expandIcon,\n      iconProp = props.icon,\n      label = props.label,\n      nodeId = props.nodeId,\n      onClick = props.onClick,\n      onLabelClick = props.onLabelClick,\n      onIconClick = props.onIconClick,\n      onFocus = props.onFocus,\n      onKeyDown = props.onKeyDown,\n      onMouseDown = props.onMouseDown,\n      _props$TransitionComp = props.TransitionComponent,\n      TransitionComponent = _props$TransitionComp === void 0 ? Collapse : _props$TransitionComp,\n      TransitionProps = props.TransitionProps,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"collapseIcon\", \"endIcon\", \"expandIcon\", \"icon\", \"label\", \"nodeId\", \"onClick\", \"onLabelClick\", \"onIconClick\", \"onFocus\", \"onKeyDown\", \"onMouseDown\", \"TransitionComponent\", \"TransitionProps\"]);\n\n  var _React$useContext = React.useContext(TreeViewContext),\n      contextIcons = _React$useContext.icons,\n      focus = _React$useContext.focus,\n      focusFirstNode = _React$useContext.focusFirstNode,\n      focusLastNode = _React$useContext.focusLastNode,\n      focusNextNode = _React$useContext.focusNextNode,\n      focusPreviousNode = _React$useContext.focusPreviousNode,\n      focusByFirstCharacter = _React$useContext.focusByFirstCharacter,\n      selectNode = _React$useContext.selectNode,\n      selectRange = _React$useContext.selectRange,\n      selectNextNode = _React$useContext.selectNextNode,\n      selectPreviousNode = _React$useContext.selectPreviousNode,\n      rangeSelectToFirst = _React$useContext.rangeSelectToFirst,\n      rangeSelectToLast = _React$useContext.rangeSelectToLast,\n      selectAllNodes = _React$useContext.selectAllNodes,\n      expandAllSiblings = _React$useContext.expandAllSiblings,\n      toggleExpansion = _React$useContext.toggleExpansion,\n      isExpanded = _React$useContext.isExpanded,\n      isFocused = _React$useContext.isFocused,\n      isSelected = _React$useContext.isSelected,\n      isTabbable = _React$useContext.isTabbable,\n      multiSelect = _React$useContext.multiSelect,\n      getParent = _React$useContext.getParent,\n      mapFirstChar = _React$useContext.mapFirstChar,\n      addNodeToNodeMap = _React$useContext.addNodeToNodeMap,\n      removeNodeFromNodeMap = _React$useContext.removeNodeFromNodeMap;\n\n  var nodeRef = React.useRef(null);\n  var contentRef = React.useRef(null);\n  var handleRef = useForkRef(nodeRef, ref);\n  var icon = iconProp;\n  var expandable = Boolean(Array.isArray(children) ? children.length : children);\n  var expanded = isExpanded ? isExpanded(nodeId) : false;\n  var focused = isFocused ? isFocused(nodeId) : false;\n  var tabbable = isTabbable ? isTabbable(nodeId) : false;\n  var selected = isSelected ? isSelected(nodeId) : false;\n  var icons = contextIcons || {};\n  var theme = useTheme();\n\n  if (!icon) {\n    if (expandable) {\n      if (!expanded) {\n        icon = expandIcon || icons.defaultExpandIcon;\n      } else {\n        icon = collapseIcon || icons.defaultCollapseIcon;\n      }\n\n      if (!icon) {\n        icon = icons.defaultParentIcon;\n      }\n    } else {\n      icon = endIcon || icons.defaultEndIcon;\n    }\n  }\n\n  var handleClick = function handleClick(event) {\n    if (!focused) {\n      focus(nodeId);\n    }\n\n    var multiple = multiSelect && (event.shiftKey || event.ctrlKey || event.metaKey); // If already expanded and trying to toggle selection don't close\n\n    if (expandable && !event.defaultPrevented && !(multiple && isExpanded(nodeId))) {\n      toggleExpansion(event, nodeId);\n    }\n\n    if (multiple) {\n      if (event.shiftKey) {\n        selectRange(event, {\n          end: nodeId\n        });\n      } else {\n        selectNode(event, nodeId, true);\n      }\n    } else {\n      selectNode(event, nodeId);\n    }\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  var handleMouseDown = function handleMouseDown(event) {\n    if (event.shiftKey || event.ctrlKey || event.metaKey) {\n      event.preventDefault();\n    }\n\n    if (onMouseDown) {\n      onMouseDown(event);\n    }\n  };\n\n  var handleNextArrow = function handleNextArrow(event) {\n    if (expandable) {\n      if (expanded) {\n        focusNextNode(nodeId);\n      } else {\n        toggleExpansion(event);\n      }\n    }\n\n    return true;\n  };\n\n  var handlePreviousArrow = function handlePreviousArrow(event) {\n    if (expanded) {\n      toggleExpansion(event, nodeId);\n      return true;\n    }\n\n    var parent = getParent(nodeId);\n\n    if (parent) {\n      focus(parent);\n      return true;\n    }\n\n    return false;\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var flag = false;\n    var key = event.key;\n\n    if (event.altKey || event.currentTarget !== event.target) {\n      return;\n    }\n\n    var ctrlPressed = event.ctrlKey || event.metaKey;\n\n    switch (key) {\n      case ' ':\n        if (nodeRef.current === event.currentTarget) {\n          if (multiSelect && event.shiftKey) {\n            flag = selectRange(event, {\n              end: nodeId\n            });\n          } else if (multiSelect) {\n            flag = selectNode(event, nodeId, true);\n          } else {\n            flag = selectNode(event, nodeId);\n          }\n        }\n\n        event.stopPropagation();\n        break;\n\n      case 'Enter':\n        if (nodeRef.current === event.currentTarget && expandable) {\n          toggleExpansion(event);\n          flag = true;\n        }\n\n        event.stopPropagation();\n        break;\n\n      case 'ArrowDown':\n        if (multiSelect && event.shiftKey) {\n          selectNextNode(event, nodeId);\n        }\n\n        focusNextNode(nodeId);\n        flag = true;\n        break;\n\n      case 'ArrowUp':\n        if (multiSelect && event.shiftKey) {\n          selectPreviousNode(event, nodeId);\n        }\n\n        focusPreviousNode(nodeId);\n        flag = true;\n        break;\n\n      case 'ArrowRight':\n        if (theme.direction === 'rtl') {\n          flag = handlePreviousArrow(event);\n        } else {\n          flag = handleNextArrow(event);\n        }\n\n        break;\n\n      case 'ArrowLeft':\n        if (theme.direction === 'rtl') {\n          flag = handleNextArrow(event);\n        } else {\n          flag = handlePreviousArrow(event);\n        }\n\n        break;\n\n      case 'Home':\n        if (multiSelect && ctrlPressed && event.shiftKey) {\n          rangeSelectToFirst(event, nodeId);\n        }\n\n        focusFirstNode();\n        flag = true;\n        break;\n\n      case 'End':\n        if (multiSelect && ctrlPressed && event.shiftKey) {\n          rangeSelectToLast(event, nodeId);\n        }\n\n        focusLastNode();\n        flag = true;\n        break;\n\n      default:\n        if (key === '*') {\n          expandAllSiblings(event, nodeId);\n          flag = true;\n        } else if (multiSelect && ctrlPressed && key.toLowerCase() === 'a') {\n          flag = selectAllNodes(event);\n        } else if (!ctrlPressed && !event.shiftKey && isPrintableCharacter(key)) {\n          focusByFirstCharacter(nodeId, key);\n          flag = true;\n        }\n\n    }\n\n    if (flag) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  };\n\n  var handleFocus = function handleFocus(event) {\n    if (!focused && event.currentTarget === event.target) {\n      focus(nodeId);\n    }\n\n    if (onFocus) {\n      onFocus(event);\n    }\n  };\n\n  React.useEffect(function () {\n    if (addNodeToNodeMap) {\n      var childIds = [];\n      React.Children.forEach(children, function (child) {\n        if ( /*#__PURE__*/React.isValidElement(child) && child.props.nodeId) {\n          childIds.push(child.props.nodeId);\n        }\n      });\n      addNodeToNodeMap(nodeId, childIds);\n    }\n  }, [children, nodeId, addNodeToNodeMap]);\n  React.useEffect(function () {\n    if (removeNodeFromNodeMap) {\n      return function () {\n        removeNodeFromNodeMap(nodeId);\n      };\n    }\n\n    return undefined;\n  }, [nodeId, removeNodeFromNodeMap]);\n  React.useEffect(function () {\n    if (mapFirstChar && label) {\n      mapFirstChar(nodeId, contentRef.current.textContent.substring(0, 1).toLowerCase());\n    }\n  }, [mapFirstChar, nodeId, label]);\n  React.useEffect(function () {\n    if (focused) {\n      nodeRef.current.focus();\n    }\n  }, [focused]);\n  var ariaSelected;\n\n  if (multiSelect) {\n    ariaSelected = selected;\n  } else if (selected) {\n    // single-selection trees unset aria-selected\n    ariaSelected = true;\n  }\n\n  return /*#__PURE__*/React.createElement(\"li\", _extends({\n    className: clsx(classes.root, className, expanded && classes.expanded, selected && classes.selected),\n    role: \"treeitem\",\n    onKeyDown: handleKeyDown,\n    onFocus: handleFocus,\n    \"aria-expanded\": expandable ? expanded : null,\n    \"aria-selected\": ariaSelected,\n    ref: handleRef,\n    tabIndex: tabbable ? 0 : -1\n  }, other), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content,\n    onClick: handleClick,\n    onMouseDown: handleMouseDown,\n    ref: contentRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: onIconClick,\n    className: classes.iconContainer\n  }, icon), /*#__PURE__*/React.createElement(Typography, {\n    onClick: onLabelClick,\n    component: \"div\",\n    className: classes.label\n  }, label)), children && /*#__PURE__*/React.createElement(TransitionComponent, _extends({\n    unmountOnExit: true,\n    className: classes.group,\n    in: expanded,\n    component: \"ul\",\n    role: \"group\"\n  }, TransitionProps), children));\n});\nprocess.env.NODE_ENV !== \"production\" ? TreeItem.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The icon used to collapse the node.\n   */\n  collapseIcon: PropTypes.node,\n\n  /**\n   * The icon displayed next to a end node.\n   */\n  endIcon: PropTypes.node,\n\n  /**\n   * The icon used to expand the node.\n   */\n  expandIcon: PropTypes.node,\n\n  /**\n   * The icon to display next to the tree node's label.\n   */\n  icon: PropTypes.node,\n\n  /**\n   * The tree node label.\n   */\n  label: PropTypes.node,\n\n  /**\n   * The id of the node.\n   */\n  nodeId: PropTypes.string.isRequired,\n\n  /**\n   * @ignore\n   */\n  onClick: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onFocus: PropTypes.func,\n\n  /**\n   * `onClick` handler for the icon container. Call `event.preventDefault()` to prevent `onNodeToggle` from being called.\n   */\n  onIconClick: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onKeyDown: PropTypes.func,\n\n  /**\n   * `onClick` handler for the label container. Call `event.preventDefault()` to prevent `onNodeToggle` from being called.\n   */\n  onLabelClick: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onMouseDown: PropTypes.func,\n\n  /**\n   * The component used for the transition.\n   * [Follow this guide](/components/transitions/#transitioncomponent-prop) to learn more about the requirements for this component.\n   */\n  TransitionComponent: PropTypes.elementType,\n\n  /**\n   * Props applied to the [`Transition`](http://reactcommunity.org/react-transition-group/transition#Transition-props) element.\n   */\n  TransitionProps: PropTypes.object\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTreeItem'\n})(TreeItem);","import React, { useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TreeView from '@material-ui/lab/TreeView';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport TreeItem from '@material-ui/lab/TreeItem';\n\nconst useStyles = makeStyles({\n  root: {\n    whiteSpace: \"nowrap\",\n    overflowY: \"auto\"\n  }\n});\nfunction parseFileEntires(paths) {\n  const root = {\n    type: \"directory\",\n    name: \"\",\n    path: \"\",\n    children: []\n  };\n  for (const path of paths.slice().sort()) {\n    const parts = path.split(\"/\");\n    let current = root;\n    for (let i = 0; i < parts.length; i++) {\n      const part = parts[i];\n      if (part === \"\") {\n        throw new Error(`Invalid path part: ''`);\n      }\n      const entryPath = parts.slice(0, i + 1).join(\"/\");\n      const existing = current.children.find((child) => child.name === part);\n      if (existing?.type === \"file\") {\n        throw new Error(`Duplicate filename at '${entryPath}'`);\n      } else if (existing) {\n        current = existing;\n      } else {\n        if (i < parts.length - 1) {\n          const newEntry = {\n            type: \"directory\",\n            name: part,\n            path: entryPath,\n            children: []\n          };\n          const firstFileIndex = current.children.findIndex(\n            (child) => child.type === \"file\"\n          );\n          current.children.splice(firstFileIndex, 0, newEntry);\n          current = newEntry;\n        } else {\n          current.children.push({\n            type: \"file\",\n            name: part,\n            path: entryPath\n          });\n        }\n      }\n    }\n  }\n  return root.children;\n}\nfunction FileTreeItem({ entry }) {\n  if (entry.type === \"file\") {\n    return /* @__PURE__ */ React.createElement(TreeItem, { nodeId: entry.path, label: entry.name });\n  }\n  return /* @__PURE__ */ React.createElement(TreeItem, { nodeId: entry.path, label: entry.name }, entry.children.map((child) => /* @__PURE__ */ React.createElement(FileTreeItem, { key: child.path, entry: child })));\n}\nfunction FileBrowser(props) {\n  const classes = useStyles();\n  const fileTree = useMemo(\n    () => parseFileEntires(props.filePaths),\n    [props.filePaths]\n  );\n  return /* @__PURE__ */ React.createElement(\n    TreeView,\n    {\n      selected: props.selected,\n      className: classes.root,\n      defaultCollapseIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n      defaultExpandIcon: /* @__PURE__ */ React.createElement(ChevronRightIcon, null),\n      onNodeSelect: (_e, nodeId) => {\n        if (props.onSelect && props.filePaths.includes(nodeId)) {\n          props.onSelect(nodeId);\n        }\n      }\n    },\n    fileTree.map((entry) => /* @__PURE__ */ React.createElement(FileTreeItem, { key: entry.path, entry }))\n  );\n}\n\nexport { FileBrowser, parseFileEntires };\n//# sourceMappingURL=FileBrowser.esm.js.map\n","import Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport SaveIcon from '@material-ui/icons/Save';\nimport React from 'react';\nimport { useDirectoryEditor } from './DirectoryEditorContext.esm.js';\nimport { FileBrowser } from '../../components/FileBrowser/FileBrowser.esm.js';\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    padding: theme.spacing(1)\n  },\n  buttons: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    alignItems: \"center\",\n    justifyContent: \"flex-start\"\n  },\n  buttonsGap: {\n    flex: \"1 1 auto\"\n  },\n  buttonsDivider: {\n    marginBottom: theme.spacing(1)\n  }\n}));\nfunction TemplateEditorBrowser(props) {\n  const classes = useStyles();\n  const directoryEditor = useDirectoryEditor();\n  const changedFiles = directoryEditor.files.filter((file) => file.dirty);\n  const handleClose = () => {\n    if (!props.onClose) {\n      return;\n    }\n    if (changedFiles.length > 0) {\n      const accepted = window.confirm(\n        \"Are you sure? Unsaved changes will be lost\"\n      );\n      if (!accepted) {\n        return;\n      }\n    }\n    props.onClose();\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", { className: classes.buttons }, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Save all files\" }, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      className: classes.button,\n      disabled: directoryEditor.files.every((file) => !file.dirty),\n      onClick: () => directoryEditor.save()\n    },\n    /* @__PURE__ */ React.createElement(SaveIcon, null)\n  )), /* @__PURE__ */ React.createElement(Tooltip, { title: \"Reload directory\" }, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      className: classes.button,\n      onClick: () => directoryEditor.reload()\n    },\n    /* @__PURE__ */ React.createElement(RefreshIcon, null)\n  )), /* @__PURE__ */ React.createElement(\"div\", { className: classes.buttonsGap }), /* @__PURE__ */ React.createElement(Tooltip, { title: \"Close directory\" }, /* @__PURE__ */ React.createElement(IconButton, { className: classes.button, onClick: handleClose }, /* @__PURE__ */ React.createElement(CloseIcon, null)))), /* @__PURE__ */ React.createElement(Divider, { className: classes.buttonsDivider }), /* @__PURE__ */ React.createElement(\n    FileBrowser,\n    {\n      selected: directoryEditor.selectedFile?.path ?? \"\",\n      onSelect: directoryEditor.setSelectedFile,\n      filePaths: directoryEditor.files.map((file) => file.path)\n    }\n  ));\n}\n\nexport { TemplateEditorBrowser };\n//# sourceMappingURL=TemplateEditorBrowser.esm.js.map\n","import { useCallback, useEffect, useRef } from 'react';\nexport function useIsMounted(initialValue = false) {\n    const isMounted = useRef(initialValue);\n    const get = useCallback(() => isMounted.current, []);\n    useEffect(() => {\n        isMounted.current = true;\n        return () => {\n            isMounted.current = false;\n        };\n    }, []);\n    return get;\n}\n","import { useEffect, useMemo } from 'react';\nimport { useIsMounted } from '../useIsMounted/index.js';\nimport { useSyncedRef } from '../useSyncedRef/index.js';\nimport { hasOwnProperty, off, on } from '../util/misc.js';\nexport function useEventListener(target, ...params) {\n    const isMounted = useIsMounted();\n    const listenerRef = useSyncedRef(params[1]);\n    const eventListener = useMemo(() => function (...args) {\n        if (!isMounted())\n            return;\n        if (typeof listenerRef.current === 'function') {\n            listenerRef.current.apply(this, args);\n        }\n        else if (typeof listenerRef.current.handleEvent === 'function') {\n            listenerRef.current.handleEvent.apply(this, args);\n        }\n    }, []);\n    useEffect(() => {\n        const tgt = isRefObject(target) ? target.current : target;\n        if (!tgt)\n            return;\n        const restParams = params.slice(2);\n        on(tgt, params[0], eventListener, ...restParams);\n        return () => {\n            off(tgt, params[0], eventListener, ...restParams);\n        };\n    }, [target, params[0]]);\n}\nfunction isRefObject(target) {\n    return target !== null && typeof target === 'object' && hasOwnProperty(target, 'current');\n}\n","import { useMemo } from 'react';\nimport { useEventListener } from '../useEventListener/index.js';\nimport { useSyncedRef } from '../useSyncedRef/index.js';\nimport { isBrowser } from '../util/const.js';\nimport { yieldFalse, yieldTrue } from '../util/misc.js';\nconst createKeyPredicate = (keyFilter) => {\n    if (typeof keyFilter === 'function')\n        return keyFilter;\n    if (typeof keyFilter === 'string')\n        return (ev) => ev.key === keyFilter;\n    return keyFilter ? yieldTrue : yieldFalse;\n};\nconst WINDOW_OR_NULL = isBrowser ? window : null;\nexport function useKeyboardEvent(keyOrPredicate, callback, deps = [], options = {}) {\n    const { event = 'keydown', target = WINDOW_OR_NULL, eventOptions } = options;\n    const cbRef = useSyncedRef(callback);\n    const handler = useMemo(() => {\n        const predicate = createKeyPredicate(keyOrPredicate);\n        return function (ev) {\n            if (predicate(ev)) {\n                cbRef.current.call(this, ev);\n            }\n        };\n    }, deps);\n    useEventListener(target, event, handler, eventOptions);\n}\n","import { StreamLanguage } from '@codemirror/language';\nimport { yaml } from '@codemirror/legacy-modes/mode/yaml';\nimport { showPanel } from '@codemirror/view';\nimport IconButton from '@material-ui/core/IconButton';\nimport Paper from '@material-ui/core/Paper';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { useKeyboardEvent } from '@react-hookz/web';\nimport CodeMirror from '@uiw/react-codemirror';\nimport React, { useMemo } from 'react';\nimport { useDirectoryEditor } from './DirectoryEditorContext.esm.js';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    position: \"relative\",\n    width: \"100%\",\n    height: \"100%\"\n  },\n  codeMirror: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n  },\n  errorPanel: {\n    color: theme.palette.error.main,\n    lineHeight: 2,\n    margin: theme.spacing(0, 1)\n  },\n  floatingButtons: {\n    position: \"absolute\",\n    top: theme.spacing(1),\n    right: theme.spacing(3)\n  },\n  floatingButton: {\n    padding: theme.spacing(1)\n  }\n}));\nfunction TemplateEditorTextArea(props) {\n  const { errorText } = props;\n  const classes = useStyles();\n  const panelExtension = useMemo(() => {\n    if (!errorText) {\n      return showPanel.of(null);\n    }\n    const dom = document.createElement(\"div\");\n    dom.classList.add(classes.errorPanel);\n    dom.textContent = errorText;\n    return showPanel.of(() => ({ dom, bottom: true }));\n  }, [classes, errorText]);\n  useKeyboardEvent(\n    (e) => e.key === \"s\" && (e.ctrlKey || e.metaKey),\n    (e) => {\n      e.preventDefault();\n      if (props.onSave) {\n        props.onSave();\n      }\n    }\n  );\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.container }, /* @__PURE__ */ React.createElement(\n    CodeMirror,\n    {\n      className: classes.codeMirror,\n      theme: \"dark\",\n      height: \"100%\",\n      extensions: [StreamLanguage.define(yaml), panelExtension],\n      value: props.content,\n      onChange: props.onUpdate\n    }\n  ), (props.onSave || props.onReload) && /* @__PURE__ */ React.createElement(\"div\", { className: classes.floatingButtons }, /* @__PURE__ */ React.createElement(Paper, null, props.onSave && /* @__PURE__ */ React.createElement(Tooltip, { title: \"Save file\" }, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      className: classes.floatingButton,\n      onClick: () => props.onSave?.()\n    },\n    /* @__PURE__ */ React.createElement(SaveIcon, null)\n  )), props.onReload && /* @__PURE__ */ React.createElement(Tooltip, { title: \"Reload file\" }, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      className: classes.floatingButton,\n      onClick: () => props.onReload?.()\n    },\n    /* @__PURE__ */ React.createElement(RefreshIcon, null)\n  )))));\n}\nfunction TemplateEditorDirectoryEditorTextArea(props) {\n  const directoryEditor = useDirectoryEditor();\n  const actions = directoryEditor.selectedFile?.dirty ? {\n    onSave: () => directoryEditor.save(),\n    onReload: () => directoryEditor.reload()\n  } : {\n    onReload: () => directoryEditor.reload()\n  };\n  return /* @__PURE__ */ React.createElement(\n    TemplateEditorTextArea,\n    {\n      errorText: props.errorText,\n      content: directoryEditor.selectedFile?.content,\n      onUpdate: (content) => directoryEditor.selectedFile?.updateContent(content),\n      ...actions\n    }\n  );\n}\nTemplateEditorTextArea.DirectoryEditor = TemplateEditorDirectoryEditorTextArea;\n\nexport { TemplateEditorDirectoryEditorTextArea, TemplateEditorTextArea };\n//# sourceMappingURL=TemplateEditorTextArea.esm.js.map\n","import { useEffect, useRef } from 'react';\nexport function usePrevious(value) {\n    const previous = useRef();\n    useEffect(() => {\n        previous.current = value;\n    });\n    return previous.current;\n}\n","function downloadBlob(blob, name) {\n  const a = document.createElement(\"a\");\n  a.href = URL.createObjectURL(blob);\n  a.download = name;\n  a.click();\n  URL.revokeObjectURL(a.href);\n  a.remove();\n}\n\nexport { downloadBlob };\n//# sourceMappingURL=helpers.esm.js.map\n","import IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Cancel from '@material-ui/icons/Cancel';\nimport CheckIcon from '@material-ui/icons/Check';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport DownloadIcon from '@material-ui/icons/GetApp';\nimport React from 'react';\nimport { useDryRun } from '../DryRunContext.esm.js';\nimport { downloadBlob } from '../../../lib/download/helpers.esm.js';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    overflowY: \"auto\",\n    background: theme.palette.background.default\n  },\n  iconSuccess: {\n    minWidth: 0,\n    marginRight: theme.spacing(1),\n    color: theme.palette.status.ok\n  },\n  iconFailure: {\n    minWidth: 0,\n    marginRight: theme.spacing(1),\n    color: theme.palette.status.error\n  }\n}));\nfunction DryRunResultsList() {\n  const classes = useStyles();\n  const dryRun = useDryRun();\n  return /* @__PURE__ */ React.createElement(List, { className: classes.root, dense: true }, dryRun.results.map((result) => {\n    const failed = result.log.some((l) => l.body.status === \"failed\");\n    let isLoading = false;\n    async function downloadResult() {\n      isLoading = true;\n      await downloadDirectoryContents(\n        result.directoryContents,\n        `dry-run-result-${result.id}.zip`\n      );\n      isLoading = false;\n    }\n    return /* @__PURE__ */ React.createElement(\n      ListItem,\n      {\n        button: true,\n        key: result.id,\n        selected: dryRun.selectedResult?.id === result.id,\n        onClick: () => dryRun.selectResult(result.id)\n      },\n      /* @__PURE__ */ React.createElement(\n        ListItemIcon,\n        {\n          className: failed ? classes.iconFailure : classes.iconSuccess\n        },\n        failed ? /* @__PURE__ */ React.createElement(Cancel, null) : /* @__PURE__ */ React.createElement(CheckIcon, null)\n      ),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: `Result ${result.id}` }),\n      /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          edge: \"end\",\n          \"aria-label\": \"download\",\n          title: \"Download as .zip\",\n          disabled: isLoading,\n          onClick: () => downloadResult()\n        },\n        /* @__PURE__ */ React.createElement(DownloadIcon, null)\n      ), /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          edge: \"end\",\n          \"aria-label\": \"delete\",\n          title: \"Delete result\",\n          onClick: () => dryRun.deleteResult(result.id)\n        },\n        /* @__PURE__ */ React.createElement(DeleteIcon, null)\n      ))\n    );\n  }));\n}\nasync function downloadDirectoryContents(directoryContents, name) {\n  const { default: JSZip } = await import('jszip');\n  const zip = new JSZip();\n  for (const d of directoryContents) {\n    const converted = atob(d.base64Content);\n    await zip.file(d.path, converted);\n  }\n  const blob = await zip.generateAsync({ type: \"blob\" });\n  downloadBlob(blob, name);\n}\n\nexport { DryRunResultsList };\n//# sourceMappingURL=DryRunResultsList.esm.js.map\n","import { makeStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider';\nimport React, { Children } from 'react';\nimport classNames from 'classnames';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: \"280px auto 3fr\",\n    gridTemplateRows: \"1fr\"\n  },\n  child: {\n    overflowY: \"auto\",\n    height: \"100%\",\n    minHeight: 0\n  },\n  firstChild: {\n    background: theme.palette.background.paper\n  }\n}));\nfunction DryRunResultsSplitView(props) {\n  const classes = useStyles();\n  const childArray = Children.toArray(props.children);\n  if (childArray.length !== 2) {\n    throw new Error(\"must have exactly 2 children\");\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(\"div\", { className: classNames(classes.child, classes.firstChild) }, childArray[0]), /* @__PURE__ */ React.createElement(Divider, { orientation: \"horizontal\" }), /* @__PURE__ */ React.createElement(\"div\", { className: classes.child }, childArray[1]));\n}\n\nexport { DryRunResultsSplitView };\n//# sourceMappingURL=DryRunResultsSplitView.esm.js.map\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport { Link } from '@backstage/core-components';\n\nconst useStyles = makeStyles({\n  svgIcon: {\n    display: \"inline-block\",\n    \"& svg\": {\n      display: \"inline-block\",\n      fontSize: \"inherit\",\n      verticalAlign: \"baseline\"\n    }\n  }\n});\nconst IconLink = (props) => {\n  const { href, text, Icon, ...linkProps } = props;\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, direction: \"row\", spacing: 1 }, /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(Typography, { component: \"div\", className: classes.svgIcon }, Icon ? /* @__PURE__ */ React.createElement(Icon, null) : /* @__PURE__ */ React.createElement(LanguageIcon, null))), /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(Link, { to: href, ...linkProps }, text || href)));\n};\n\nexport { IconLink };\n//# sourceMappingURL=IconLink.esm.js.map\n","import { parseEntityRef } from '@backstage/catalog-model';\nimport { entityRouteRef } from '@backstage/plugin-catalog-react';\nimport Box from '@material-ui/core/Box';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport React from 'react';\nimport { IconLink } from './IconLink.esm.js';\nimport { useApp, useRouteRef } from '@backstage/core-plugin-api';\n\nconst TaskPageLinks = ({ output }) => {\n  const { links = [] } = output;\n  const app = useApp();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const iconResolver = (key) => key ? app.getSystemIcon(key) ?? LanguageIcon : LanguageIcon;\n  return /* @__PURE__ */ React.createElement(Box, { px: 3, pb: 3 }, links.filter(({ url, entityRef }) => url || entityRef).map(({ url, entityRef, title, icon }) => {\n    if (entityRef) {\n      const entityName = parseEntityRef(entityRef, {\n        defaultKind: \"<unknown>\",\n        defaultNamespace: \"<unknown>\"\n      });\n      const target = entityRoute(entityName);\n      return { title, icon, url: target };\n    }\n    return { title, icon, url };\n  }).map(({ url, title, icon }, i) => /* @__PURE__ */ React.createElement(\n    IconLink,\n    {\n      key: `output-link-${i}`,\n      href: url,\n      text: title ?? url,\n      Icon: iconResolver(icon),\n      target: \"_blank\"\n    }\n  )));\n};\n\nexport { TaskPageLinks };\n//# sourceMappingURL=TaskPageLinks.esm.js.map\n","import React, { memo, useState } from 'react';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Stepper from '@material-ui/core/Stepper';\nimport StepButton from '@material-ui/core/StepButton';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Cancel from '@material-ui/icons/Cancel';\nimport CheckIcon from '@material-ui/icons/Check';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\nimport Typography from '@material-ui/core/Typography';\nimport { DateTime, Interval } from 'luxon';\nimport useInterval from 'react-use/esm/useInterval';\nimport humanizeDuration from 'humanize-duration';\nimport classNames from 'classnames';\n\nconst useStyles = makeStyles(\n  (theme) => createStyles({\n    root: {\n      width: \"100%\"\n    },\n    button: {\n      marginBottom: theme.spacing(2),\n      marginLeft: theme.spacing(2)\n    },\n    actionsContainer: {\n      marginBottom: theme.spacing(2)\n    },\n    resetContainer: {\n      padding: theme.spacing(3)\n    },\n    labelWrapper: {\n      display: \"flex\",\n      flex: 1,\n      flexDirection: \"row\",\n      justifyContent: \"space-between\"\n    },\n    stepWrapper: {\n      width: \"100%\"\n    }\n  })\n);\nconst useStepIconStyles = makeStyles(\n  (theme) => createStyles({\n    root: {\n      color: theme.palette.text.disabled,\n      display: \"flex\",\n      height: 22,\n      alignItems: \"center\"\n    },\n    completed: {\n      color: theme.palette.status.ok\n    },\n    error: {\n      color: theme.palette.status.error\n    }\n  })\n);\nconst StepTimeTicker = ({ step }) => {\n  const [time, setTime] = useState(\"\");\n  useInterval(() => {\n    if (!step.startedAt) {\n      setTime(\"\");\n      return;\n    }\n    const end = step.endedAt ? DateTime.fromISO(step.endedAt) : DateTime.local();\n    const startedAt = DateTime.fromISO(step.startedAt);\n    const formatted = Interval.fromDateTimes(startedAt, end).toDuration().valueOf();\n    setTime(humanizeDuration(formatted, { round: true }));\n  }, 1e3);\n  return /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\" }, time);\n};\nfunction TaskStepIconComponent(props) {\n  const classes = useStepIconStyles();\n  const { active, completed, error } = props;\n  const getMiddle = () => {\n    if (active) {\n      return /* @__PURE__ */ React.createElement(CircularProgress, { size: \"24px\" });\n    }\n    if (completed) {\n      return /* @__PURE__ */ React.createElement(CheckIcon, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(Cancel, null);\n    }\n    return /* @__PURE__ */ React.createElement(FiberManualRecordIcon, null);\n  };\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      className: classNames(classes.root, {\n        [classes.completed]: completed,\n        [classes.error]: error\n      })\n    },\n    getMiddle()\n  );\n}\nconst TaskStatusStepper = memo(\n  (props) => {\n    const { steps, currentStepId, onUserStepChange } = props;\n    const classes = useStyles(props);\n    return /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(\n      Stepper,\n      {\n        activeStep: steps.findIndex((s) => s.id === currentStepId),\n        orientation: \"vertical\",\n        nonLinear: true\n      },\n      steps.map((step, index) => {\n        const isCancelled = step.status === \"cancelled\";\n        const isActive = step.status === \"processing\";\n        const isCompleted = step.status === \"completed\";\n        const isFailed = step.status === \"failed\";\n        const isSkipped = step.status === \"skipped\";\n        return /* @__PURE__ */ React.createElement(Step, { key: String(index), expanded: true }, /* @__PURE__ */ React.createElement(StepButton, { onClick: () => onUserStepChange(step.id) }, /* @__PURE__ */ React.createElement(\n          StepLabel,\n          {\n            StepIconProps: {\n              completed: isCompleted,\n              error: isFailed || isCancelled,\n              active: isActive\n            },\n            StepIconComponent: TaskStepIconComponent,\n            className: classes.stepWrapper\n          },\n          /* @__PURE__ */ React.createElement(\"div\", { className: classes.labelWrapper }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\" }, step.name), isSkipped ? /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\" }, \"Skipped\") : /* @__PURE__ */ React.createElement(StepTimeTicker, { step }))\n        )));\n      })\n    ));\n  }\n);\n\nexport { TaskStatusStepper };\n//# sourceMappingURL=TaskStatusStepper.esm.js.map\n","import { LogViewer } from '@backstage/core-components';\nimport { StreamLanguage } from '@codemirror/language';\nimport { yaml } from '@codemirror/legacy-modes/mode/yaml';\nimport Box from '@material-ui/core/Box';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport CodeMirror from '@uiw/react-codemirror';\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { useDryRun } from '../DryRunContext.esm.js';\nimport { DryRunResultsSplitView } from './DryRunResultsSplitView.esm.js';\nimport { FileBrowser } from '../../../components/FileBrowser/FileBrowser.esm.js';\nimport { TaskPageLinks } from './TaskPageLinks.esm.js';\nimport { TaskStatusStepper } from './TaskStatusStepper.esm.js';\n\nconst useStyles = makeStyles({\n  root: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\"\n  },\n  contentWrapper: {\n    flex: 1,\n    position: \"relative\"\n  },\n  content: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    display: \"flex\",\n    \"& > *\": {\n      flex: 1\n    }\n  },\n  codeMirror: {\n    height: \"100%\",\n    overflowY: \"auto\"\n  }\n});\nfunction FilesContent() {\n  const classes = useStyles();\n  const { selectedResult } = useDryRun();\n  const [selectedPath, setSelectedPath] = useState(\"\");\n  const selectedFile = selectedResult?.directoryContents.find(\n    (f) => f.path === selectedPath\n  );\n  useEffect(() => {\n    if (selectedResult) {\n      const [firstFile] = selectedResult.directoryContents;\n      if (firstFile) {\n        setSelectedPath(firstFile.path);\n      } else {\n        setSelectedPath(\"\");\n      }\n    }\n    return void 0;\n  }, [selectedResult]);\n  if (!selectedResult) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(DryRunResultsSplitView, null, /* @__PURE__ */ React.createElement(\n    FileBrowser,\n    {\n      selected: selectedPath,\n      onSelect: setSelectedPath,\n      filePaths: selectedResult.directoryContents.map((file) => file.path)\n    }\n  ), /* @__PURE__ */ React.createElement(\n    CodeMirror,\n    {\n      className: classes.codeMirror,\n      theme: \"dark\",\n      height: \"100%\",\n      extensions: [StreamLanguage.define(yaml)],\n      readOnly: true,\n      value: selectedFile?.base64Content ? atob(selectedFile.base64Content) : \"\"\n    }\n  ));\n}\nfunction LogContent() {\n  const { selectedResult } = useDryRun();\n  const [currentStepId, setUserSelectedStepId] = useState();\n  const steps = useMemo(() => {\n    if (!selectedResult) {\n      return [];\n    }\n    return selectedResult.steps.map((step) => {\n      const stepLog = selectedResult.log.filter(\n        (l) => l.body.stepId === step.id\n      );\n      return {\n        id: step.id,\n        name: step.name,\n        logString: stepLog.map((l) => l.body.message).join(\"\\n\"),\n        status: stepLog[stepLog.length - 1]?.body.status ?? \"completed\"\n      };\n    }) ?? [];\n  }, [selectedResult]);\n  if (!selectedResult) {\n    return null;\n  }\n  const selectedStep = steps.find((s) => s.id === currentStepId) ?? steps[0];\n  return /* @__PURE__ */ React.createElement(DryRunResultsSplitView, null, /* @__PURE__ */ React.createElement(\n    TaskStatusStepper,\n    {\n      steps,\n      currentStepId: selectedStep.id,\n      onUserStepChange: setUserSelectedStepId\n    }\n  ), /* @__PURE__ */ React.createElement(LogViewer, { text: selectedStep?.logString ?? \"\" }));\n}\nfunction OutputContent() {\n  const classes = useStyles();\n  const { selectedResult } = useDryRun();\n  if (!selectedResult) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(DryRunResultsSplitView, null, /* @__PURE__ */ React.createElement(Box, { pt: 2 }, selectedResult.output?.links?.length && /* @__PURE__ */ React.createElement(TaskPageLinks, { output: selectedResult.output })), /* @__PURE__ */ React.createElement(\n    CodeMirror,\n    {\n      className: classes.codeMirror,\n      theme: \"dark\",\n      height: \"100%\",\n      extensions: [StreamLanguage.define(yaml)],\n      readOnly: true,\n      value: JSON.stringify(selectedResult.output, null, 2)\n    }\n  ));\n}\nfunction DryRunResultsView() {\n  const classes = useStyles();\n  const [selectedTab, setSelectedTab] = useState(\n    \"files\"\n  );\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Tabs, { value: selectedTab, onChange: (_, v) => setSelectedTab(v) }, /* @__PURE__ */ React.createElement(Tab, { value: \"files\", label: \"Files\" }), /* @__PURE__ */ React.createElement(Tab, { value: \"log\", label: \"Log\" }), /* @__PURE__ */ React.createElement(Tab, { value: \"output\", label: \"Output\" })), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\"div\", { className: classes.contentWrapper }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.content }, selectedTab === \"files\" && /* @__PURE__ */ React.createElement(FilesContent, null), selectedTab === \"log\" && /* @__PURE__ */ React.createElement(LogContent, null), selectedTab === \"output\" && /* @__PURE__ */ React.createElement(OutputContent, null))));\n}\n\nexport { DryRunResultsView };\n//# sourceMappingURL=DryRunResultsView.esm.js.map\n","import Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport { usePrevious } from '@react-hookz/web';\nimport React, { useState, useEffect } from 'react';\nimport { useDryRun } from '../DryRunContext.esm.js';\nimport { DryRunResultsList } from './DryRunResultsList.esm.js';\nimport { DryRunResultsView } from './DryRunResultsView.esm.js';\n\nconst useStyles = makeStyles((theme) => ({\n  header: {\n    height: 48,\n    minHeight: 0,\n    \"&.Mui-expanded\": {\n      height: 48,\n      minHeight: 0\n    }\n  },\n  content: {\n    display: \"grid\",\n    background: theme.palette.background.default,\n    gridTemplateColumns: \"180px auto 1fr\",\n    gridTemplateRows: \"1fr\",\n    padding: 0,\n    height: 400\n  }\n}));\nfunction DryRunResults() {\n  const classes = useStyles();\n  const dryRun = useDryRun();\n  const [expanded, setExpanded] = useState(false);\n  const [hidden, setHidden] = useState(true);\n  const resultsLength = dryRun.results.length;\n  const prevResultsLength = usePrevious(resultsLength);\n  useEffect(() => {\n    if (prevResultsLength === 0 && resultsLength === 1) {\n      setHidden(false);\n      setExpanded(true);\n    } else if (prevResultsLength === 1 && resultsLength === 0) {\n      setExpanded(false);\n    }\n  }, [prevResultsLength, resultsLength]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    Accordion,\n    {\n      variant: \"outlined\",\n      expanded,\n      hidden: resultsLength === 0 && hidden,\n      onChange: (_, exp) => setExpanded(exp),\n      onTransitionEnd: () => resultsLength === 0 && setHidden(true)\n    },\n    /* @__PURE__ */ React.createElement(\n      AccordionSummary,\n      {\n        className: classes.header,\n        expandIcon: /* @__PURE__ */ React.createElement(ExpandLessIcon, null)\n      },\n      /* @__PURE__ */ React.createElement(Typography, null, \"Dry-run results\")\n    ),\n    /* @__PURE__ */ React.createElement(Divider, { orientation: \"horizontal\" }),\n    /* @__PURE__ */ React.createElement(AccordionDetails, { className: classes.content }, /* @__PURE__ */ React.createElement(DryRunResultsList, null), /* @__PURE__ */ React.createElement(Divider, { orientation: \"horizontal\" }), /* @__PURE__ */ React.createElement(DryRunResultsView, null))\n  ));\n}\n\nexport { DryRunResults };\n//# sourceMappingURL=DryRunResults.esm.js.map\n","import { makeStyles } from '@material-ui/core/styles';\nimport React, { useState } from 'react';\nimport { DirectoryEditorProvider } from './DirectoryEditorContext.esm.js';\nimport { TemplateEditorBrowser } from './TemplateEditorBrowser.esm.js';\nimport { DryRunProvider } from './DryRunContext.esm.js';\nimport { TemplateEditorTextArea } from './TemplateEditorTextArea.esm.js';\nimport { TemplateEditorForm } from './TemplateEditorForm.esm.js';\nimport { DryRunResults } from './DryRunResults/DryRunResults.esm.js';\n\nconst useStyles = makeStyles({\n  // Reset and fix sizing to make sure scrolling behaves correctly\n  root: {\n    gridArea: \"pageContent\",\n    display: \"grid\",\n    gridTemplateAreas: `\n      \"browser editor preview\"\n      \"results results results\"\n    `,\n    gridTemplateColumns: \"1fr 3fr 2fr\",\n    gridTemplateRows: \"1fr auto\"\n  },\n  browser: {\n    gridArea: \"browser\",\n    overflow: \"auto\"\n  },\n  editor: {\n    gridArea: \"editor\",\n    overflow: \"auto\"\n  },\n  preview: {\n    gridArea: \"preview\",\n    overflow: \"auto\"\n  },\n  results: {\n    gridArea: \"results\"\n  }\n});\nconst TemplateEditor = (props) => {\n  const classes = useStyles();\n  const [errorText, setErrorText] = useState();\n  return /* @__PURE__ */ React.createElement(DirectoryEditorProvider, { directory: props.directory }, /* @__PURE__ */ React.createElement(DryRunProvider, null, /* @__PURE__ */ React.createElement(\"main\", { className: classes.root }, /* @__PURE__ */ React.createElement(\"section\", { className: classes.browser }, /* @__PURE__ */ React.createElement(TemplateEditorBrowser, { onClose: props.onClose })), /* @__PURE__ */ React.createElement(\"section\", { className: classes.editor }, /* @__PURE__ */ React.createElement(TemplateEditorTextArea.DirectoryEditor, { errorText })), /* @__PURE__ */ React.createElement(\"section\", { className: classes.preview }, /* @__PURE__ */ React.createElement(\n    TemplateEditorForm.DirectoryEditorDryRun,\n    {\n      setErrorText,\n      fieldExtensions: props.fieldExtensions,\n      layouts: props.layouts\n    }\n  )), /* @__PURE__ */ React.createElement(\"section\", { className: classes.results }, /* @__PURE__ */ React.createElement(DryRunResults, null)))));\n};\n\nexport { TemplateEditor };\n//# sourceMappingURL=TemplateEditor.esm.js.map\n","import { useApi, alertApiRef } from '@backstage/core-plugin-api';\nimport { catalogApiRef, humanizeEntityRef } from '@backstage/plugin-catalog-react';\nimport FormControl from '@material-ui/core/FormControl';\nimport IconButton from '@material-ui/core/IconButton';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React, { useState, useCallback } from 'react';\nimport useAsync from 'react-use/esm/useAsync';\nimport yaml from 'yaml';\nimport { TemplateEditorForm } from './TemplateEditorForm.esm.js';\nimport { TemplateEditorTextArea } from './TemplateEditorTextArea.esm.js';\n\nconst EXAMPLE_TEMPLATE_PARAMS_YAML = `# Edit the template parameters below to see how they will render in the scaffolder form UI\nparameters:\n  - title: Fill in some steps\n    required:\n      - name\n    properties:\n      name:\n        title: Name\n        type: string\n        description: Unique name of the component\n      owner:\n        title: Owner\n        type: string\n        description: Owner of the component\n        ui:field: OwnerPicker\n        ui:options:\n          catalogFilter:\n            kind: Group\n  - title: Choose a location\n    required:\n      - repoUrl\n    properties:\n      repoUrl:\n        title: Repository Location\n        type: string\n        ui:field: RepoUrlPicker\n        ui:options:\n          allowedHosts:\n            - github.com\nsteps:\n  - id: fetch-base\n    name: Fetch Base\n    action: fetch:template\n    input:\n      url: ./template\n      values:\n        name: \\${{parameters.name}}\n`;\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    gridArea: \"pageContent\",\n    display: \"grid\",\n    gridTemplateAreas: `\n      \"controls controls\"\n      \"textArea preview\"\n    `,\n    gridTemplateRows: \"auto 1fr\",\n    gridTemplateColumns: \"1fr 1fr\"\n  },\n  controls: {\n    gridArea: \"controls\",\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    alignItems: \"center\",\n    margin: theme.spacing(1)\n  },\n  textArea: {\n    gridArea: \"textArea\"\n  },\n  preview: {\n    gridArea: \"preview\"\n  }\n}));\nconst TemplateFormPreviewer = ({\n  defaultPreviewTemplate = EXAMPLE_TEMPLATE_PARAMS_YAML,\n  customFieldExtensions = [],\n  onClose,\n  layouts = []\n}) => {\n  const classes = useStyles();\n  const alertApi = useApi(alertApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const [selectedTemplate, setSelectedTemplate] = useState(\"\");\n  const [errorText, setErrorText] = useState();\n  const [templateOptions, setTemplateOptions] = useState([]);\n  const [templateYaml, setTemplateYaml] = useState(defaultPreviewTemplate);\n  const { loading } = useAsync(\n    () => catalogApi.getEntities({\n      filter: { kind: \"template\" },\n      fields: [\n        \"kind\",\n        \"metadata.namespace\",\n        \"metadata.name\",\n        \"metadata.title\",\n        \"spec.parameters\",\n        \"spec.steps\",\n        \"spec.output\"\n      ]\n    }).then(\n      ({ items }) => setTemplateOptions(\n        items.map((template) => ({\n          label: template.metadata.title ?? humanizeEntityRef(template, { defaultKind: \"template\" }),\n          value: template\n        }))\n      )\n    ).catch(\n      (e) => alertApi.post({\n        message: `Error loading exisiting templates: ${e.message}`,\n        severity: \"error\"\n      })\n    ),\n    [catalogApi]\n  );\n  const handleSelectChange = useCallback(\n    // TODO(Rugvip): Afaik this should be Entity, but didn't want to make runtime changes while fixing types\n    (selected) => {\n      setSelectedTemplate(selected);\n      setTemplateYaml(yaml.stringify(selected.spec));\n    },\n    [setTemplateYaml]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading && /* @__PURE__ */ React.createElement(LinearProgress, null), /* @__PURE__ */ React.createElement(\"main\", { className: classes.root }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.controls }, /* @__PURE__ */ React.createElement(FormControl, { variant: \"outlined\", size: \"small\", fullWidth: true }, /* @__PURE__ */ React.createElement(InputLabel, { id: \"select-template-label\" }, \"Load Existing Template\"), /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      value: selectedTemplate,\n      label: \"Load Existing Template\",\n      labelId: \"select-template-label\",\n      onChange: (e) => handleSelectChange(e.target.value)\n    },\n    templateOptions.map((option, idx) => /* @__PURE__ */ React.createElement(MenuItem, { key: idx, value: option.value }, option.label))\n  )), /* @__PURE__ */ React.createElement(IconButton, { size: \"medium\", onClick: onClose }, /* @__PURE__ */ React.createElement(CloseIcon, null))), /* @__PURE__ */ React.createElement(\"div\", { className: classes.textArea }, /* @__PURE__ */ React.createElement(\n    TemplateEditorTextArea,\n    {\n      content: templateYaml,\n      onUpdate: setTemplateYaml,\n      errorText\n    }\n  )), /* @__PURE__ */ React.createElement(\"div\", { className: classes.preview }, /* @__PURE__ */ React.createElement(\n    TemplateEditorForm,\n    {\n      content: templateYaml,\n      contentIsSpec: true,\n      fieldExtensions: customFieldExtensions,\n      setErrorText,\n      layouts\n    }\n  ))));\n};\n\nexport { TemplateFormPreviewer };\n//# sourceMappingURL=TemplateFormPreviewer.esm.js.map\n","import React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { WebFileSystemAccess } from '../../lib/filesystem/WebFileSystemAccess.esm.js';\n\nconst useStyles = makeStyles((theme) => ({\n  introText: {\n    textAlign: \"center\",\n    marginTop: theme.spacing(2)\n  },\n  card: {\n    position: \"relative\",\n    maxWidth: 340,\n    marginTop: theme.spacing(4),\n    margin: theme.spacing(0, 2)\n  },\n  infoIcon: {\n    position: \"absolute\",\n    top: theme.spacing(1),\n    right: theme.spacing(1)\n  }\n}));\nfunction TemplateEditorIntro(props) {\n  const classes = useStyles();\n  const supportsLoad = WebFileSystemAccess.isSupported();\n  const cardLoadLocal = /* @__PURE__ */ React.createElement(Card, { className: classes.card, elevation: 4 }, /* @__PURE__ */ React.createElement(\n    CardActionArea,\n    {\n      disabled: !supportsLoad,\n      onClick: () => props.onSelect?.(\"local\")\n    },\n    /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"h4\",\n        component: \"h3\",\n        gutterBottom: true,\n        color: supportsLoad ? void 0 : \"textSecondary\",\n        style: { display: \"flex\", flexFlow: \"row nowrap\" }\n      },\n      \"Load Template Directory\"\n    ), /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"body1\",\n        color: supportsLoad ? void 0 : \"textSecondary\"\n      },\n      \"Load a local template directory, allowing you to both edit and try executing your own template.\"\n    ))\n  ), !supportsLoad && /* @__PURE__ */ React.createElement(\"div\", { className: classes.infoIcon }, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      placement: \"top\",\n      title: \"Only supported in some Chromium-based browsers\"\n    },\n    /* @__PURE__ */ React.createElement(InfoOutlinedIcon, null)\n  )));\n  const cardFormEditor = /* @__PURE__ */ React.createElement(Card, { className: classes.card, elevation: 4 }, /* @__PURE__ */ React.createElement(CardActionArea, { onClick: () => props.onSelect?.(\"form\") }, /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h4\", component: \"h3\", gutterBottom: true }, \"Edit Template Form\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Preview and edit a template form, either using a sample template or by loading a template from the catalog.\"))));\n  const cardFieldExplorer = /* @__PURE__ */ React.createElement(Card, { className: classes.card, elevation: 4 }, /* @__PURE__ */ React.createElement(CardActionArea, { onClick: () => props.onSelect?.(\"field-explorer\") }, /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h4\", component: \"h3\", gutterBottom: true }, \"Custom Field Explorer\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"View and play around with available installed custom field extensions.\"))));\n  return /* @__PURE__ */ React.createElement(\"div\", { style: props.style }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h4\", component: \"h2\", className: classes.introText }, \"Get started by choosing one of the options below\"), /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      style: {\n        display: \"flex\",\n        flexFlow: \"row wrap\",\n        alignItems: \"flex-start\",\n        justifyContent: \"center\",\n        alignContent: \"flex-start\"\n      }\n    },\n    supportsLoad && cardLoadLocal,\n    cardFormEditor,\n    !supportsLoad && cardLoadLocal,\n    cardFieldExplorer\n  ));\n}\n\nexport { TemplateEditorIntro };\n//# sourceMappingURL=TemplateEditorIntro.esm.js.map\n","import React, { useState } from 'react';\nimport { Page, Header, Content } from '@backstage/core-components';\nimport { WebFileSystemAccess } from '../../lib/filesystem/WebFileSystemAccess.esm.js';\nimport { CustomFieldExplorer } from './CustomFieldExplorer.esm.js';\nimport { TemplateEditor } from './TemplateEditor.esm.js';\nimport { TemplateFormPreviewer } from './TemplateFormPreviewer.esm.js';\nimport { TemplateEditorIntro } from './TemplateEditorIntro.esm.js';\nimport { ScaffolderPageContextMenu } from '@backstage/plugin-scaffolder-react/alpha';\nimport { useNavigate } from 'react-router-dom';\nimport { useRouteRef } from '@backstage/core-plugin-api';\nimport { actionsRouteRef, scaffolderListTaskRouteRef, rootRouteRef } from '../../routes.esm.js';\n\nfunction TemplateEditorPage(props) {\n  const [selection, setSelection] = useState();\n  const navigate = useNavigate();\n  const actionsLink = useRouteRef(actionsRouteRef);\n  const tasksLink = useRouteRef(scaffolderListTaskRouteRef);\n  const createLink = useRouteRef(rootRouteRef);\n  const scaffolderPageContextMenuProps = {\n    onEditorClicked: void 0,\n    onActionsClicked: () => navigate(actionsLink()),\n    onTasksClicked: () => navigate(tasksLink()),\n    onCreateClicked: () => navigate(createLink())\n  };\n  let content = null;\n  if (selection?.type === \"local\") {\n    content = /* @__PURE__ */ React.createElement(\n      TemplateEditor,\n      {\n        directory: selection.directory,\n        fieldExtensions: props.customFieldExtensions,\n        onClose: () => setSelection(void 0),\n        layouts: props.layouts\n      }\n    );\n  } else if (selection?.type === \"form\") {\n    content = /* @__PURE__ */ React.createElement(\n      TemplateFormPreviewer,\n      {\n        defaultPreviewTemplate: props.defaultPreviewTemplate,\n        customFieldExtensions: props.customFieldExtensions,\n        onClose: () => setSelection(void 0),\n        layouts: props.layouts\n      }\n    );\n  } else if (selection?.type === \"field-explorer\") {\n    content = /* @__PURE__ */ React.createElement(\n      CustomFieldExplorer,\n      {\n        customFieldExtensions: props.customFieldExtensions,\n        onClose: () => setSelection(void 0)\n      }\n    );\n  } else {\n    content = /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(\n      TemplateEditorIntro,\n      {\n        onSelect: (option) => {\n          if (option === \"local\") {\n            WebFileSystemAccess.requestDirectoryAccess().then((directory) => setSelection({ type: \"local\", directory })).catch(() => {\n            });\n          } else if (option === \"form\") {\n            setSelection({ type: \"form\" });\n          } else if (option === \"field-explorer\") {\n            setSelection({ type: \"field-explorer\" });\n          }\n        }\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      title: \"Template Editor\",\n      subtitle: \"Edit, preview, and try out templates and template forms\"\n    },\n    /* @__PURE__ */ React.createElement(ScaffolderPageContextMenu, { ...scaffolderPageContextMenuProps })\n  ), content);\n}\n\nexport { TemplateEditorPage };\n//# sourceMappingURL=TemplateEditorPage.esm.js.map\n","import React from 'react';\nimport { useOutlet, Routes, Route } from 'react-router-dom';\nimport { useCustomFieldExtensions, useCustomLayouts, SecretsContextProvider } from '@backstage/plugin-scaffolder-react';\nimport { DEFAULT_SCAFFOLDER_FIELD_EXTENSIONS } from '../../extensions/default.esm.js';\nimport { selectedTemplateRouteRef, scaffolderTaskRouteRef, editRouteRef, actionsRouteRef, scaffolderListTaskRouteRef } from '../../routes.esm.js';\nimport { ErrorPage } from '@backstage/core-components';\nimport { ActionsPage } from '../ActionsPage/ActionsPage.esm.js';\nimport { ListTasksPage } from '../ListTasksPage/ListTasksPage.esm.js';\nimport { TemplateListPage } from '../../next/TemplateListPage/TemplateListPage.esm.js';\nimport { TemplateWizardPage } from '../../next/TemplateWizardPage/TemplateWizardPage.esm.js';\nimport { OngoingTask } from '../OngoingTask/OngoingTask.esm.js';\nimport { TemplateEditorPage } from '../../next/TemplateEditorPage/TemplateEditorPage.esm.js';\n\nconst Router = (props) => {\n  const {\n    components: {\n      TemplateCardComponent,\n      TaskPageComponent = OngoingTask,\n      ReviewStepComponent,\n      EXPERIMENTAL_TemplateOutputsComponent: TemplateOutputsComponent,\n      EXPERIMENTAL_TemplateListPageComponent: TemplateListPageComponent = TemplateListPage,\n      EXPERIMENTAL_TemplateWizardPageComponent: TemplateWizardPageComponent = TemplateWizardPage\n    } = {}\n  } = props;\n  const outlet = useOutlet() || props.children;\n  const customFieldExtensions = useCustomFieldExtensions(outlet);\n  const fieldExtensions = [\n    ...customFieldExtensions,\n    ...DEFAULT_SCAFFOLDER_FIELD_EXTENSIONS.filter(\n      ({ name }) => !customFieldExtensions.some(\n        (customFieldExtension) => customFieldExtension.name === name\n      )\n    )\n  ];\n  const customLayouts = useCustomLayouts(outlet);\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: \"/\",\n      element: /* @__PURE__ */ React.createElement(\n        TemplateListPageComponent,\n        {\n          TemplateCardComponent,\n          contextMenu: props.contextMenu,\n          groups: props.groups,\n          templateFilter: props.templateFilter,\n          headerOptions: props.headerOptions\n        }\n      )\n    }\n  ), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: selectedTemplateRouteRef.path,\n      element: /* @__PURE__ */ React.createElement(SecretsContextProvider, null, /* @__PURE__ */ React.createElement(\n        TemplateWizardPageComponent,\n        {\n          headerOptions: props.headerOptions,\n          customFieldExtensions: fieldExtensions,\n          layouts: customLayouts,\n          components: { ReviewStepComponent },\n          formProps: props.formProps\n        }\n      ))\n    }\n  ), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: scaffolderTaskRouteRef.path,\n      element: /* @__PURE__ */ React.createElement(\n        TaskPageComponent,\n        {\n          TemplateOutputsComponent\n        }\n      )\n    }\n  ), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: editRouteRef.path,\n      element: /* @__PURE__ */ React.createElement(SecretsContextProvider, null, /* @__PURE__ */ React.createElement(\n        TemplateEditorPage,\n        {\n          customFieldExtensions: fieldExtensions,\n          layouts: customLayouts\n        }\n      ))\n    }\n  ), /* @__PURE__ */ React.createElement(Route, { path: actionsRouteRef.path, element: /* @__PURE__ */ React.createElement(ActionsPage, null) }), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: scaffolderListTaskRouteRef.path,\n      element: /* @__PURE__ */ React.createElement(ListTasksPage, null)\n    }\n  ), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: \"*\",\n      element: /* @__PURE__ */ React.createElement(ErrorPage, { status: \"404\", statusMessage: \"Page not found\" })\n    }\n  ));\n};\n\nexport { Router };\n//# sourceMappingURL=Router.esm.js.map\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\"\n}), 'ArrowDownward');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'CheckCircleOutline');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n}), 'ControlPoint');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"\n}), 'Error');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z\"\n}), 'ExpandLess');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"8\"\n}), 'FiberManualRecord');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n}), 'GetApp');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n}), 'InfoOutlined');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z\"\n}), 'List');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n}), 'PanoramaFishEye');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n}), 'Refresh');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n}), 'RemoveCircleOutline');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z\"\n}), 'Repeat');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"\n}), 'Save');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z\"\n}), 'Toc');\n\nexports.default = _default;","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"jsonPointer\",[],t):\"object\"==typeof exports?exports.jsonPointer=t():e.jsonPointer=t()}(\"undefined\"!=typeof self?self:this,(()=>(()=>{\"use strict\";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},t={};function n(e){return\"#\"===e||\"\"===e||Array.isArray(e)&&0===e.length||!1}e.r(t),e.d(t,{default:()=>S,get:()=>c,isRoot:()=>n,join:()=>_,remove:()=>j,removeUndefinedItems:()=>v,set:()=>y,split:()=>s,splitLast:()=>x});const r=/~1/g,o=/~0/g,i=/\\/+/g,l=/(^[#/]*|\\/+$)/g;function u(e){return e.replace(r,\"/\").replace(o,\"~\")}function f(e){return u(decodeURIComponent(e))}function s(e){if(null==e||\"string\"!=typeof e||n(e))return Array.isArray(e)?e:[];const t=e.indexOf(\"#\")>=0?f:u,r=(e=(e=e.replace(i,\"/\")).replace(l,\"\")).split(\"/\");for(let e=0,n=r.length;e<n;e+=1)r[e]=t(r[e]);return r}function c(e,t,r=void 0){if(null==t||null==e)return r;if(n(t))return e;const o=p(e,s(t));return void 0===o?r:o}function p(e,t){const n=t.shift();if(void 0!==e)return void 0!==n?p(e[n],t):e}const a=/^\\[.*\\]$/,d=/^\\[(.+)\\]$/;function g(e,t){return\"__proto__\"===e||\"constructor\"==e&&t.length>0&&\"prototype\"==t[0]}function y(e,t,n){if(null==t)return e;const r=s(t);if(0===r.length)return e;null==e&&(e=a.test(r[0])?[]:{});let o,i,l=e;for(;r.length>1;)o=r.shift(),i=a.test(r[0]),g(o,r)||(l=m(l,o,i));return o=r.pop(),h(l,o,n),e}function h(e,t,n){let r;const o=t.match(d);\"[]\"===t&&Array.isArray(e)?e.push(n):o?(r=o.pop(),e[r]=n):e[t]=n}function m(e,t,n){if(null!=e[t])return e[t];const r=n?[]:{};return h(e,t,r),r}function v(e){let t=0,n=0;for(;t+n<e.length;)void 0===e[t+n]&&(n+=1),e[t]=e[t+n],t+=1;return e.length=e.length-n,e}function j(e,t,n){const r=s(t),o=r.pop(),i=c(e,r);return i&&delete i[o],Array.isArray(i)&&!0!==n&&v(i),e}const b=/\\/+/g,A=/~/g,P=/\\//g;function O(e,t){if(0===e.length)return t?\"#\":\"\";for(let n=0,r=e.length;n<r;n+=1)e[n]=e[n].replace(A,\"~0\").replace(P,\"~1\"),t&&(e[n]=encodeURIComponent(e[n]));return((t?\"#/\":\"/\")+e.join(\"/\")).replace(b,\"/\")}function _(e,...t){const n=[];if(Array.isArray(e))return O(e,!0===arguments[1]);const r=arguments[arguments.length-1],o=\"boolean\"==typeof r?r:e&&\"#\"===e[0];for(let e=0,t=arguments.length;e<t;e+=1)n.push.apply(n,s(arguments[e]));const i=[];for(let e=0,t=n.length;e<t;e+=1)if(\"..\"===n[e]){if(0===i.length)return o?\"#\":\"\";i.pop()}else i.push(n[e]);return O(i,o)}function x(e){const t=s(e);if(0===t.length)return\"string\"==typeof e&&\"#\"===e[0]?[\"#\",t[0]]:[\"\",void 0];if(1===t.length)return\"#\"===e[0]?[\"#\",t[0]]:[\"\",t[0]];const n=t.pop();return[_(t,\"#\"===e[0]),n]}const S={get:c,set:y,remove:j,join:_,split:s,splitLast:x,isRoot:n,removeUndefinedItems:v};return t})()));","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatNames = exports.fastFormats = exports.fullFormats = void 0;\nfunction fmtDef(validate, compare) {\n    return { validate, compare };\n}\nexports.fullFormats = {\n    // date: http://tools.ietf.org/html/rfc3339#section-5.6\n    date: fmtDef(date, compareDate),\n    // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n    time: fmtDef(time, compareTime),\n    \"date-time\": fmtDef(date_time, compareDateTime),\n    // duration: https://tools.ietf.org/html/rfc3339#appendix-A\n    duration: /^P(?!$)((\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+S)?)?|(\\d+W)?)$/,\n    uri,\n    \"uri-reference\": /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,\n    // uri-template: https://tools.ietf.org/html/rfc6570\n    \"uri-template\": /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i,\n    // For the source: https://gist.github.com/dperini/729294\n    // For test cases: https://mathiasbynens.be/demo/url-regex\n    url: /^(?:https?|ftp):\\/\\/(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)(?:\\.(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu,\n    email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n    hostname: /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i,\n    // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n    ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n    ipv6: /^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))$/i,\n    regex,\n    // uuid: http://tools.ietf.org/html/rfc4122\n    uuid: /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,\n    // JSON-pointer: https://tools.ietf.org/html/rfc6901\n    // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n    \"json-pointer\": /^(?:\\/(?:[^~/]|~0|~1)*)*$/,\n    \"json-pointer-uri-fragment\": /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,\n    // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n    \"relative-json-pointer\": /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/,\n    // the following formats are used by the openapi specification: https://spec.openapis.org/oas/v3.0.0#data-types\n    // byte: https://github.com/miguelmota/is-base64\n    byte,\n    // signed 32 bit integer\n    int32: { type: \"number\", validate: validateInt32 },\n    // signed 64 bit integer\n    int64: { type: \"number\", validate: validateInt64 },\n    // C-type float\n    float: { type: \"number\", validate: validateNumber },\n    // C-type double\n    double: { type: \"number\", validate: validateNumber },\n    // hint to the UI to hide input strings\n    password: true,\n    // unchecked string payload\n    binary: true,\n};\nexports.fastFormats = {\n    ...exports.fullFormats,\n    date: fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/, compareDate),\n    time: fmtDef(/^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i, compareTime),\n    \"date-time\": fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i, compareDateTime),\n    // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n    uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n    \"uri-reference\": /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n    // email (sources from jsen validator):\n    // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n    // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'wilful violation')\n    email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n};\nexports.formatNames = Object.keys(exports.fullFormats);\nfunction isLeapYear(year) {\n    // https://tools.ietf.org/html/rfc3339#appendix-C\n    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\nconst DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nconst DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nfunction date(str) {\n    // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n    const matches = DATE.exec(str);\n    if (!matches)\n        return false;\n    const year = +matches[1];\n    const month = +matches[2];\n    const day = +matches[3];\n    return (month >= 1 &&\n        month <= 12 &&\n        day >= 1 &&\n        day <= (month === 2 && isLeapYear(year) ? 29 : DAYS[month]));\n}\nfunction compareDate(d1, d2) {\n    if (!(d1 && d2))\n        return undefined;\n    if (d1 > d2)\n        return 1;\n    if (d1 < d2)\n        return -1;\n    return 0;\n}\nconst TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nfunction time(str, withTimeZone) {\n    const matches = TIME.exec(str);\n    if (!matches)\n        return false;\n    const hour = +matches[1];\n    const minute = +matches[2];\n    const second = +matches[3];\n    const timeZone = matches[5];\n    return (((hour <= 23 && minute <= 59 && second <= 59) ||\n        (hour === 23 && minute === 59 && second === 60)) &&\n        (!withTimeZone || timeZone !== \"\"));\n}\nfunction compareTime(t1, t2) {\n    if (!(t1 && t2))\n        return undefined;\n    const a1 = TIME.exec(t1);\n    const a2 = TIME.exec(t2);\n    if (!(a1 && a2))\n        return undefined;\n    t1 = a1[1] + a1[2] + a1[3] + (a1[4] || \"\");\n    t2 = a2[1] + a2[2] + a2[3] + (a2[4] || \"\");\n    if (t1 > t2)\n        return 1;\n    if (t1 < t2)\n        return -1;\n    return 0;\n}\nconst DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n    // http://tools.ietf.org/html/rfc3339#section-5.6\n    const dateTime = str.split(DATE_TIME_SEPARATOR);\n    return dateTime.length === 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\nfunction compareDateTime(dt1, dt2) {\n    if (!(dt1 && dt2))\n        return undefined;\n    const [d1, t1] = dt1.split(DATE_TIME_SEPARATOR);\n    const [d2, t2] = dt2.split(DATE_TIME_SEPARATOR);\n    const res = compareDate(d1, d2);\n    if (res === undefined)\n        return undefined;\n    return res || compareTime(t1, t2);\n}\nconst NOT_URI_FRAGMENT = /\\/|:/;\nconst URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nfunction uri(str) {\n    // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n    return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\nconst BYTE = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;\nfunction byte(str) {\n    BYTE.lastIndex = 0;\n    return BYTE.test(str);\n}\nconst MIN_INT32 = -(2 ** 31);\nconst MAX_INT32 = 2 ** 31 - 1;\nfunction validateInt32(value) {\n    return Number.isInteger(value) && value <= MAX_INT32 && value >= MIN_INT32;\n}\nfunction validateInt64(value) {\n    // JSON and javascript max Int is 2**53, so any int that passes isInteger is valid for Int64\n    return Number.isInteger(value);\n}\nfunction validateNumber() {\n    return true;\n}\nconst Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n    if (Z_ANCHOR.test(str))\n        return false;\n    try {\n        new RegExp(str);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n//# sourceMappingURL=formats.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst formats_1 = require(\"./formats\");\nconst limit_1 = require(\"./limit\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst fullName = new codegen_1.Name(\"fullFormats\");\nconst fastName = new codegen_1.Name(\"fastFormats\");\nconst formatsPlugin = (ajv, opts = { keywords: true }) => {\n    if (Array.isArray(opts)) {\n        addFormats(ajv, opts, formats_1.fullFormats, fullName);\n        return ajv;\n    }\n    const [formats, exportName] = opts.mode === \"fast\" ? [formats_1.fastFormats, fastName] : [formats_1.fullFormats, fullName];\n    const list = opts.formats || formats_1.formatNames;\n    addFormats(ajv, list, formats, exportName);\n    if (opts.keywords)\n        limit_1.default(ajv);\n    return ajv;\n};\nformatsPlugin.get = (name, mode = \"full\") => {\n    const formats = mode === \"fast\" ? formats_1.fastFormats : formats_1.fullFormats;\n    const f = formats[name];\n    if (!f)\n        throw new Error(`Unknown format \"${name}\"`);\n    return f;\n};\nfunction addFormats(ajv, list, fs, exportName) {\n    var _a;\n    var _b;\n    (_a = (_b = ajv.opts.code).formats) !== null && _a !== void 0 ? _a : (_b.formats = codegen_1._ `require(\"ajv-formats/dist/formats\").${exportName}`);\n    for (const f of list)\n        ajv.addFormat(f, fs[f]);\n}\nmodule.exports = exports = formatsPlugin;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = formatsPlugin;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatLimitDefinition = void 0;\nconst ajv_1 = require(\"ajv\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    formatMaximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    formatMinimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    formatExclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    formatExclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => codegen_1.str `should be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => codegen_1._ `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nexports.formatLimitDefinition = {\n    keyword: Object.keys(KWDs),\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, keyword, it } = cxt;\n        const { opts, self } = it;\n        if (!opts.validateFormats)\n            return;\n        const fCxt = new ajv_1.KeywordCxt(it, self.RULES.all.format.definition, \"format\");\n        if (fCxt.$data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fmt = gen.const(\"fmt\", codegen_1._ `${fmts}[${fCxt.schemaCode}]`);\n            cxt.fail$data(codegen_1.or(codegen_1._ `typeof ${fmt} != \"object\"`, codegen_1._ `${fmt} instanceof RegExp`, codegen_1._ `typeof ${fmt}.compare != \"function\"`, compareCode(fmt)));\n        }\n        function validateFormat() {\n            const format = fCxt.schema;\n            const fmtDef = self.formats[format];\n            if (!fmtDef || fmtDef === true)\n                return;\n            if (typeof fmtDef != \"object\" ||\n                fmtDef instanceof RegExp ||\n                typeof fmtDef.compare != \"function\") {\n                throw new Error(`\"${keyword}\": format \"${format}\" does not define \"compare\" function`);\n            }\n            const fmt = gen.scopeValue(\"formats\", {\n                key: format,\n                ref: fmtDef,\n                code: opts.code.formats ? codegen_1._ `${opts.code.formats}${codegen_1.getProperty(format)}` : undefined,\n            });\n            cxt.fail$data(compareCode(fmt));\n        }\n        function compareCode(fmt) {\n            return codegen_1._ `${fmt}.compare(${data}, ${schemaCode}) ${KWDs[keyword].fail} 0`;\n        }\n    },\n    dependencies: [\"format\"],\n};\nconst formatLimitPlugin = (ajv) => {\n    ajv.addKeyword(exports.formatLimitDefinition);\n    return ajv;\n};\nexports.default = formatLimitPlugin;\n//# sourceMappingURL=limit.js.map","'use strict';\n\n// MODULES //\n\nvar isArray = require( 'validate.io-array' ),\n\tisIntegerArray = require( 'validate.io-integer-array' ),\n\tisFunction = require( 'validate.io-function' );\n\n\n// VARIABLES //\n\nvar MAXINT = Math.pow( 2, 31 ) - 1;\n\n\n// FUNCTIONS //\n\n/**\n* FUNCTION: gcd( a, b )\n*\tComputes the greatest common divisor of two integers `a` and `b`, using the binary GCD algorithm.\n*\n* @param {Number} a - integer\n* @param {Number} b - integer\n* @returns {Number} greatest common divisor\n*/\nfunction gcd( a, b ) {\n\tvar k = 1,\n\t\tt;\n\t// Simple cases:\n\tif ( a === 0 ) {\n\t\treturn b;\n\t}\n\tif ( b === 0 ) {\n\t\treturn a;\n\t}\n\t// Reduce `a` and/or `b` to odd numbers and keep track of the greatest power of 2 dividing both `a` and `b`...\n\twhile ( a%2 === 0 && b%2 === 0 ) {\n\t\ta = a / 2; // right shift\n\t\tb = b / 2; // right shift\n\t\tk = k * 2; // left shift\n\t}\n\t// Reduce `a` to an odd number...\n\twhile ( a%2 === 0 ) {\n\t\ta = a / 2; // right shift\n\t}\n\t// Henceforth, `a` is always odd...\n\twhile ( b ) {\n\t\t// Remove all factors of 2 in `b`, as they are not common...\n\t\twhile ( b%2 === 0 ) {\n\t\t\tb = b / 2; // right shift\n\t\t}\n\t\t// `a` and `b` are both odd. Swap values such that `b` is the larger of the two values, and then set `b` to the difference (which is even)...\n\t\tif ( a > b ) {\n\t\t\tt = b;\n\t\t\tb = a;\n\t\t\ta = t;\n\t\t}\n\t\tb = b - a; // b=0 iff b=a\n\t}\n\t// Restore common factors of 2...\n\treturn k * a;\n} // end FUNCTION gcd()\n\n/**\n* FUNCTION: bitwise( a, b )\n*\tComputes the greatest common divisor of two integers `a` and `b`, using the binary GCD algorithm and bitwise operations.\n*\n* @param {Number} a - safe integer\n* @param {Number} b - safe integer\n* @returns {Number} greatest common divisor\n*/\nfunction bitwise( a, b ) {\n\tvar k = 0,\n\t\tt;\n\t// Simple cases:\n\tif ( a === 0 ) {\n\t\treturn b;\n\t}\n\tif ( b === 0 ) {\n\t\treturn a;\n\t}\n\t// Reduce `a` and/or `b` to odd numbers and keep track of the greatest power of 2 dividing both `a` and `b`...\n\twhile ( (a & 1) === 0 && (b & 1) === 0 ) {\n\t\ta >>>= 1; // right shift\n\t\tb >>>= 1; // right shift\n\t\tk++;\n\t}\n\t// Reduce `a` to an odd number...\n\twhile ( (a & 1) === 0 ) {\n\t\ta >>>= 1; // right shift\n\t}\n\t// Henceforth, `a` is always odd...\n\twhile ( b ) {\n\t\t// Remove all factors of 2 in `b`, as they are not common...\n\t\twhile ( (b & 1) === 0 ) {\n\t\t\tb >>>= 1; // right shift\n\t\t}\n\t\t// `a` and `b` are both odd. Swap values such that `b` is the larger of the two values, and then set `b` to the difference (which is even)...\n\t\tif ( a > b ) {\n\t\t\tt = b;\n\t\t\tb = a;\n\t\t\ta = t;\n\t\t}\n\t\tb = b - a; // b=0 iff b=a\n\t}\n\t// Restore common factors of 2...\n\treturn a << k;\n} // end FUNCTION bitwise()\n\n\n// GREATEST COMMON DIVISOR //\n\n/**\n* FUNCTION: compute( arr[, clbk] )\n*\tComputes the greatest common divisor.\n*\n* @param {Number[]|Number} arr - input array of integers\n* @param {Function|Number} [clbk] - accessor function for accessing array values\n* @returns {Number|Null} greatest common divisor or null\n*/\nfunction compute() {\n\tvar nargs = arguments.length,\n\t\targs,\n\t\tclbk,\n\t\tarr,\n\t\tlen,\n\t\ta, b,\n\t\ti;\n\n\t// Copy the input arguments to an array...\n\targs = new Array( nargs );\n\tfor ( i = 0; i < nargs; i++ ) {\n\t\targs[ i ] = arguments[ i ];\n\t}\n\t// Have we been provided with integer arguments?\n\tif ( isIntegerArray( args ) ) {\n\t\tif ( nargs === 2 ) {\n\t\t\ta = args[ 0 ];\n\t\t\tb = args[ 1 ];\n\t\t\tif ( a < 0 ) {\n\t\t\t\ta = -a;\n\t\t\t}\n\t\t\tif ( b < 0 ) {\n\t\t\t\tb = -b;\n\t\t\t}\n\t\t\tif ( a <= MAXINT && b <= MAXINT ) {\n\t\t\t\treturn bitwise( a, b );\n\t\t\t} else {\n\t\t\t\treturn gcd( a, b );\n\t\t\t}\n\t\t}\n\t\tarr = args;\n\t}\n\t// If not integers, ensure the first argument is an array...\n\telse if ( !isArray( args[ 0 ] ) ) {\n\t\tthrow new TypeError( 'gcd()::invalid input argument. Must provide an array of integers. Value: `' + args[ 0 ] + '`.' );\n\t}\n\t// Have we been provided with more than one argument? If so, ensure that the accessor argument is a function...\n\telse if ( nargs > 1 ) {\n\t\tarr = args[ 0 ];\n\t\tclbk = args[ 1 ];\n\t\tif ( !isFunction( clbk ) ) {\n\t\t\tthrow new TypeError( 'gcd()::invalid input argument. Accessor must be a function. Value: `' + clbk + '`.' );\n\t\t}\n\t}\n\t// We have been provided an array...\n\telse {\n\t\tarr = args[ 0 ];\n\t}\n\tlen = arr.length;\n\n\t// Check if a sufficient number of values have been provided...\n\tif ( len < 2 ) {\n\t\treturn null;\n\t}\n\t// If an accessor is provided, extract the array values...\n\tif ( clbk ) {\n\t\ta = new Array( len );\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\ta[ i ] = clbk( arr[ i ], i );\n\t\t}\n\t\tarr = a;\n\t}\n\t// Given an input array, ensure all array values are integers...\n\tif ( nargs < 3 ) {\n\t\tif ( !isIntegerArray( arr ) ) {\n\t\t\tthrow new TypeError( 'gcd()::invalid input argument. Accessed array values must be integers. Value: `' + arr + '`.' );\n\t\t}\n\t}\n\t// Convert any negative integers to positive integers...\n\tfor ( i = 0; i < len; i++ ) {\n\t\ta = arr[ i ];\n\t\tif ( a < 0 ) {\n\t\t\tarr[ i ] = -a;\n\t\t}\n\t}\n\t// Exploit the fact that the gcd is an associative function...\n\ta = arr[ 0 ];\n\tfor ( i = 1; i < len; i++ ) {\n\t\tb = arr[ i ];\n\t\tif ( b <= MAXINT && a <= MAXINT ) {\n\t\t\ta = bitwise( a, b );\n\t\t} else {\n\t\t\ta = gcd( a, b );\n\t\t}\n\t}\n\treturn a;\n} // end FUNCTION compute()\n\n\n// EXPORTS //\n\nmodule.exports = compute;\n","'use strict';\n\n// MODULES //\n\nvar gcd = require( 'compute-gcd' ),\n\tisArray = require( 'validate.io-array' ),\n\tisIntegerArray = require( 'validate.io-integer-array' ),\n\tisFunction = require( 'validate.io-function' );\n\n\n// LEAST COMMON MULTIPLE //\n\n/**\n* FUNCTION: lcm( arr[, clbk] )\n*\tComputes the least common multiple (lcm).\n*\n* @param {Number[]|Number} arr - input array of integers\n* @param {Function|Number} [accessor] - accessor function for accessing array values\n* @returns {Number|Null} least common multiple or null\n*/\nfunction lcm() {\n\tvar nargs = arguments.length,\n\t\targs,\n\t\tclbk,\n\t\tarr,\n\t\tlen,\n\t\ta, b,\n\t\ti;\n\n\t// Copy the input arguments to an array...\n\targs = new Array( nargs );\n\tfor ( i = 0; i < nargs; i++ ) {\n\t\targs[ i ] = arguments[ i ];\n\t}\n\t// Have we been provided with integer arguments?\n\tif ( isIntegerArray( args ) ) {\n\t\tif ( nargs === 2 ) {\n\t\t\ta = args[ 0 ];\n\t\t\tb = args[ 1 ];\n\t\t\tif ( a < 0 ) {\n\t\t\t\ta = -a;\n\t\t\t}\n\t\t\tif ( b < 0 ) {\n\t\t\t\tb = -b;\n\t\t\t}\n\t\t\tif ( a === 0 || b === 0 ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn ( a/gcd(a,b) ) * b;\n\t\t}\n\t\tarr = args;\n\t}\n\t// If not integers, ensure that the first argument is an array...\n\telse if ( !isArray( args[ 0 ] ) ) {\n\t\tthrow new TypeError( 'lcm()::invalid input argument. Must provide an array of integers. Value: `' + args[ 0 ] + '`.' );\n\t}\n\t// Have we been provided with more than one argument? If so, ensure that the accessor argument is a function...\n\telse if ( nargs > 1 ) {\n\t\tarr = args[ 0 ];\n\t\tclbk = args[ 1 ];\n\t\tif ( !isFunction( clbk ) ) {\n\t\t\tthrow new TypeError( 'lcm()::invalid input argument. Accessor must be a function. Value: `' + clbk + '`.' );\n\t\t}\n\t}\n\t// We have been provided an array...\n\telse {\n\t\tarr = args[ 0 ];\n\t}\n\tlen = arr.length;\n\n\t// Check if a sufficient number of values have been provided...\n\tif ( len < 2 ) {\n\t\treturn null;\n\t}\n\t// If an accessor is provided, extract the array values...\n\tif ( clbk ) {\n\t\ta = new Array( len );\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\ta[ i ] = clbk( arr[ i ], i );\n\t\t}\n\t\tarr = a;\n\t}\n\t// Given an input array, ensure all array values are integers...\n\tif ( nargs < 3 ) {\n\t\tif ( !isIntegerArray( arr ) ) {\n\t\t\tthrow new TypeError( 'lcm()::invalid input argument. Accessed array values must be integers. Value: `' + arr + '`.' );\n\t\t}\n\t}\n\t// Convert any negative integers to positive integers...\n\tfor ( i = 0; i < len; i++ ) {\n\t\ta = arr[ i ];\n\t\tif ( a < 0 ) {\n\t\t\tarr[ i ] = -a;\n\t\t}\n\t}\n\t// Exploit the fact that the lcm is an associative function...\n\ta = arr[ 0 ];\n\tfor ( i = 1; i < len; i++ ) {\n\t\tb = arr[ i ];\n\t\tif ( a === 0 || b === 0 ) {\n\t\t\treturn 0;\n\t\t}\n\t\ta = ( a/gcd(a,b) ) * b;\n\t}\n\treturn a;\n} // end FUNCTION lcm()\n\n\n// EXPORTS //\n\nmodule.exports = lcm;\n","\"use strict\";\n// https://www.w3.org/TR/REC-xml/#NT-Name\n// http://www.bottlecaps.de/rr/ui\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Grammar\t::=\tProduction*\n// Production\t::=\tNCName '::=' Choice\n// NCName\t::=\t[http://www.w3.org/TR/xml-names/#NT-NCName]\n// Choice\t::=\tSequenceOrDifference ( '|' SequenceOrDifference )*\n// SequenceOrDifference\t::=\t(Item ( '-' Item | Item* ))?\n// Item\t::=\tPrimary ( '?' | '*' | '+' )?\n// Primary\t::=\tNCName | StringLiteral | CharCode | CharClass | '(' Choice ')'\n// StringLiteral\t::=\t'\"' [^\"]* '\"' | \"'\" [^']* \"'\"\n// CharCode\t::=\t'#x' [0-9a-fA-F]+\n// CharClass\t::=\t'[' '^'? ( RULE_Char | CharCode | CharRange | CharCodeRange )+ ']'\n// RULE_Char\t::=\t[http://www.w3.org/TR/xml#NT-RULE_Char]\n// CharRange\t::=\tRULE_Char '-' ( RULE_Char - ']' )\n// CharCodeRange\t::=\tCharCode '-' CharCode\n// RULE_WHITESPACE\t::=\tRULE_S | Comment\n// RULE_S\t::=\t#x9 | #xA | #xD | #x20\n// Comment\t::=\t'/*' ( [^*] | '*'+ [^*/] )* '*'* '*/'\nconst Parser_1 = require(\"../Parser\");\nvar BNF;\n(function (BNF) {\n    BNF.RULES = [\n        {\n            name: 'Grammar',\n            bnf: [['RULE_S*', '%Atomic*', 'EOF']]\n        },\n        {\n            name: '%Atomic',\n            bnf: [['Production', 'RULE_S*']],\n            fragment: true\n        },\n        {\n            name: 'Production',\n            bnf: [['NCName', 'RULE_S*', '\"::=\"', 'RULE_WHITESPACE*', 'Choice', 'RULE_WHITESPACE*', 'RULE_EOL+', 'RULE_S*']]\n        },\n        {\n            name: 'NCName',\n            bnf: [[/[a-zA-Z][a-zA-Z_0-9]*/]]\n        },\n        {\n            name: 'Choice',\n            bnf: [['SequenceOrDifference', '%_Choice_1*']],\n            fragment: true\n        },\n        {\n            name: '%_Choice_1',\n            bnf: [['RULE_WHITESPACE*', '\"|\"', 'RULE_WHITESPACE*', 'SequenceOrDifference']],\n            fragment: true\n        },\n        {\n            name: 'SequenceOrDifference',\n            bnf: [['Item', 'RULE_WHITESPACE*', '%_Item_1?']]\n        },\n        {\n            name: '%_Item_1',\n            bnf: [['Minus', 'Item'], ['Item*']],\n            fragment: true\n        },\n        {\n            name: 'Minus',\n            bnf: [['\"-\"']]\n        },\n        {\n            name: 'Item',\n            bnf: [['RULE_WHITESPACE*', '%Primary', 'PrimaryDecoration?']],\n            fragment: true\n        },\n        {\n            name: 'PrimaryDecoration',\n            bnf: [['\"?\"'], ['\"*\"'], ['\"+\"']]\n        },\n        {\n            name: 'DecorationName',\n            bnf: [['\"ebnf://\"', /[^\\x5D#]+/]]\n        },\n        {\n            name: '%Primary',\n            bnf: [['NCName'], ['StringLiteral'], ['CharCode'], ['CharClass'], ['SubItem']],\n            fragment: true\n        },\n        {\n            name: 'SubItem',\n            bnf: [['\"(\"', 'RULE_WHITESPACE*', 'Choice', 'RULE_WHITESPACE*', '\")\"']]\n        },\n        {\n            name: 'StringLiteral',\n            bnf: [[`'\"'`, /[^\"]*/, `'\"'`], [`\"'\"`, /[^']*/, `\"'\"`]],\n            pinned: 1\n        },\n        {\n            name: 'CharCode',\n            bnf: [['\"#x\"', /[0-9a-zA-Z]+/]]\n        },\n        {\n            name: 'CharClass',\n            bnf: [[\"'['\", \"'^'?\", '%RULE_CharClass_1+', '\"]\"']]\n        },\n        {\n            name: '%RULE_CharClass_1',\n            bnf: [['CharCodeRange'], ['CharRange'], ['CharCode'], ['RULE_Char']],\n            fragment: true\n        },\n        {\n            name: 'RULE_Char',\n            bnf: [[/\\x09/], [/\\x0A/], [/\\x0D/], [/[\\x20-\\x5c]/], [/[\\x5e-\\uD7FF]/], [/[\\uE000-\\uFFFD]/]]\n        },\n        {\n            name: 'CharRange',\n            bnf: [['RULE_Char', '\"-\"', 'RULE_Char']]\n        },\n        {\n            name: 'CharCodeRange',\n            bnf: [['CharCode', '\"-\"', 'CharCode']]\n        },\n        {\n            name: 'RULE_WHITESPACE',\n            bnf: [['%RULE_WHITESPACE_CHAR*'], ['Comment', 'RULE_WHITESPACE*']]\n        },\n        {\n            name: 'RULE_S',\n            bnf: [['RULE_WHITESPACE', 'RULE_S*'], ['RULE_EOL', 'RULE_S*']]\n        },\n        {\n            name: '%RULE_WHITESPACE_CHAR',\n            bnf: [[/\\x09/], [/\\x20/]],\n            fragment: true\n        },\n        {\n            name: 'Comment',\n            bnf: [['\"/*\"', '%RULE_Comment_Body*', '\"*/\"']]\n        },\n        {\n            name: '%RULE_Comment_Body',\n            bnf: [['!\"*/\"', /[^*]/]],\n            fragment: true\n        },\n        {\n            name: 'RULE_EOL',\n            bnf: [[/\\x0D/, /\\x0A/], [/\\x0A/], [/\\x0D/]]\n        },\n        {\n            name: 'Link',\n            bnf: [[\"'['\", 'Url', \"']'\"]]\n        },\n        {\n            name: 'Url',\n            bnf: [[/[^\\x5D:/?#]/, '\"://\"', /[^\\x5D#]+/, '%Url1?']]\n        },\n        {\n            name: '%Url1',\n            bnf: [['\"#\"', 'NCName']],\n            fragment: true\n        }\n    ];\n    BNF.defaultParser = new Parser_1.Parser(BNF.RULES, { debug: false });\n    const preDecorationRE = /^(!|&)/;\n    const decorationRE = /(\\?|\\+|\\*)$/;\n    const subExpressionRE = /^%/;\n    function getBNFRule(name, parser) {\n        if (typeof name == 'string') {\n            if (preDecorationRE.test(name))\n                return '';\n            let subexpression = subExpressionRE.test(name);\n            if (subexpression) {\n                let decoration = decorationRE.exec(name);\n                let decorationText = decoration ? decoration[0] + ' ' : '';\n                let lonely = isLonelyRule(name, parser);\n                if (lonely)\n                    return getBNFBody(name, parser) + decorationText;\n                return '(' + getBNFBody(name, parser) + ')' + decorationText;\n            }\n            return name;\n        }\n        else {\n            return name.source\n                .replace(/\\\\(?:x|u)([a-zA-Z0-9]+)/g, '#x$1')\n                .replace(/\\[\\\\(?:x|u)([a-zA-Z0-9]+)-\\\\(?:x|u)([a-zA-Z0-9]+)\\]/g, '[#x$1-#x$2]');\n        }\n    }\n    /// Returns true if the rule is a string literal or regular expression without a descendant tree\n    function isLonelyRule(name, parser) {\n        let rule = Parser_1.findRuleByName(name, parser);\n        return (rule &&\n            rule.bnf.length == 1 &&\n            rule.bnf[0].length == 1 &&\n            (rule.bnf[0][0] instanceof RegExp || rule.bnf[0][0][0] == '\"' || rule.bnf[0][0][0] == \"'\"));\n    }\n    function getBNFChoice(rules, parser) {\n        return rules.map(x => getBNFRule(x, parser)).join(' ');\n    }\n    function getBNFBody(name, parser) {\n        let rule = Parser_1.findRuleByName(name, parser);\n        if (rule)\n            return rule.bnf.map(x => getBNFChoice(x, parser)).join(' | ');\n        return 'RULE_NOT_FOUND {' + name + '}';\n    }\n    function emit(parser) {\n        let acumulator = [];\n        parser.grammarRules.forEach(l => {\n            if (!/^%/.test(l.name)) {\n                let recover = l.recover ? ' /* { recoverUntil=' + l.recover + ' } */' : '';\n                acumulator.push(l.name + ' ::= ' + getBNFBody(l.name, parser) + recover);\n            }\n        });\n        return acumulator.join('\\n');\n    }\n    BNF.emit = emit;\n    let subitems = 0;\n    function restar(total, resta) {\n        console.log('reberia restar ' + resta + ' a ' + total);\n        throw new Error('Difference not supported yet');\n    }\n    function convertRegex(txt) {\n        return new RegExp(txt\n            .replace(/#x([a-zA-Z0-9]{4})/g, '\\\\u$1')\n            .replace(/#x([a-zA-Z0-9]{3})/g, '\\\\u0$1')\n            .replace(/#x([a-zA-Z0-9]{2})/g, '\\\\x$1')\n            .replace(/#x([a-zA-Z0-9]{1})/g, '\\\\x0$1'));\n    }\n    function getSubItems(tmpRules, seq, parentName) {\n        let anterior = null;\n        let bnfSeq = [];\n        seq.children.forEach((x, i) => {\n            if (x.type == 'Minus') {\n                restar(anterior, x);\n            }\n            else {\n            }\n            let decoration = seq.children[i + 1];\n            decoration = (decoration && decoration.type == 'PrimaryDecoration' && decoration.text) || '';\n            let preDecoration = '';\n            switch (x.type) {\n                case 'SubItem':\n                    let name = '%' + (parentName + subitems++);\n                    createRule(tmpRules, x, name);\n                    bnfSeq.push(preDecoration + name + decoration);\n                    break;\n                case 'NCName':\n                case 'StringLiteral':\n                    bnfSeq.push(preDecoration + x.text + decoration);\n                    break;\n                case 'CharCode':\n                case 'CharClass':\n                    if (decoration || preDecoration) {\n                        let newRule = {\n                            name: '%' + (parentName + subitems++),\n                            bnf: [[convertRegex(x.text)]]\n                        };\n                        tmpRules.push(newRule);\n                        bnfSeq.push(preDecoration + newRule.name + decoration);\n                    }\n                    else {\n                        bnfSeq.push(convertRegex(x.text));\n                    }\n                    break;\n                case 'PrimaryDecoration':\n                    break;\n                default:\n                    throw new Error(' HOW SHOULD I PARSE THIS? ' + x.type + ' -> ' + JSON.stringify(x.text));\n            }\n            anterior = x;\n        });\n        return bnfSeq;\n    }\n    function createRule(tmpRules, token, name) {\n        let bnf = token.children.filter(x => x.type == 'SequenceOrDifference').map(s => getSubItems(tmpRules, s, name));\n        let rule = {\n            name,\n            bnf\n        };\n        let recover = null;\n        bnf.forEach(x => {\n            recover = recover || x['recover'];\n            delete x['recover'];\n        });\n        if (name.indexOf('%') == 0)\n            rule.fragment = true;\n        if (recover)\n            rule.recover = recover;\n        tmpRules.push(rule);\n    }\n    function getRules(source, parser = BNF.defaultParser) {\n        let ast = parser.getAST(source);\n        if (!ast)\n            throw new Error('Could not parse ' + source);\n        if (ast.errors && ast.errors.length) {\n            throw ast.errors[0];\n        }\n        let tmpRules = [];\n        ast.children.filter(x => x.type == 'Production').map((x) => {\n            let name = x.children.filter(x => x.type == 'NCName')[0].text;\n            createRule(tmpRules, x, name);\n        });\n        return tmpRules;\n    }\n    BNF.getRules = getRules;\n    function Transform(source, subParser = BNF.defaultParser) {\n        return getRules(source.join(''), subParser);\n    }\n    BNF.Transform = Transform;\n    class Parser extends Parser_1.Parser {\n        constructor(source, options) {\n            const subParser = options && options.debugRulesParser === true ? new Parser_1.Parser(BNF.RULES, { debug: true }) : BNF.defaultParser;\n            super(getRules(source, subParser), options);\n        }\n        emitSource() {\n            return emit(this);\n        }\n    }\n    BNF.Parser = Parser;\n})(BNF || (BNF = {}));\nexports.default = BNF;\n//# sourceMappingURL=W3CEBNF.js.map","\"use strict\";\n// https://www.ics.uci.edu/~pattis/ICS-33/lectures/ebnf.pdf\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = exports.findRuleByName = exports.parseRuleName = exports.escapeRegExp = exports.readToken = void 0;\nconst UPPER_SNAKE_RE = /^[A-Z0-9_]+$/;\nconst decorationRE = /(\\?|\\+|\\*)$/;\nconst preDecorationRE = /^(@|&|!)/;\nconst WS_RULE = 'WS';\nconst TokenError_1 = require(\"./TokenError\");\nfunction readToken(txt, expr) {\n    let result = expr.exec(txt);\n    if (result && result.index == 0) {\n        if (result[0].length == 0 && expr.source.length > 0)\n            return null;\n        return {\n            type: null,\n            text: result[0],\n            rest: txt.substr(result[0].length),\n            start: 0,\n            end: result[0].length - 1,\n            fullText: result[0],\n            errors: [],\n            children: [],\n            parent: null\n        };\n    }\n    return null;\n}\nexports.readToken = readToken;\nfunction escapeRegExp(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nexports.escapeRegExp = escapeRegExp;\nfunction fixRest(token) {\n    token.rest = '';\n    token.children && token.children.forEach(c => fixRest(c));\n}\nfunction fixPositions(token, start) {\n    token.start += start;\n    token.end += start;\n    token.children && token.children.forEach(c => fixPositions(c, token.start));\n}\nfunction agregateErrors(errors, token) {\n    if (token.errors && token.errors.length)\n        token.errors.forEach(err => errors.push(err));\n    token.children && token.children.forEach(tok => agregateErrors(errors, tok));\n}\nfunction parseRuleName(name) {\n    let postDecoration = decorationRE.exec(name);\n    let preDecoration = preDecorationRE.exec(name);\n    let postDecorationText = (postDecoration && postDecoration[0]) || '';\n    let preDecorationText = (preDecoration && preDecoration[0]) || '';\n    let out = {\n        raw: name,\n        name: name.replace(decorationRE, '').replace(preDecorationRE, ''),\n        isOptional: postDecorationText == '?' || postDecorationText == '*',\n        allowRepetition: postDecorationText == '+' || postDecorationText == '*',\n        atLeastOne: postDecorationText == '+',\n        lookupPositive: preDecorationText == '&',\n        lookupNegative: preDecorationText == '!',\n        pinned: preDecorationText == '@',\n        lookup: false,\n        isLiteral: false\n    };\n    out.isLiteral = out.name[0] == \"'\" || out.name[0] == '\"';\n    out.lookup = out.lookupNegative || out.lookupPositive;\n    return out;\n}\nexports.parseRuleName = parseRuleName;\nfunction findRuleByName(name, parser) {\n    let parsed = parseRuleName(name);\n    return parser.cachedRules[parsed.name] || null;\n}\nexports.findRuleByName = findRuleByName;\n/// Removes all the nodes starting with 'RULE_'\nfunction stripRules(token, re) {\n    if (token.children) {\n        let localRules = token.children.filter(x => x.type && re.test(x.type));\n        for (let i = 0; i < localRules.length; i++) {\n            let indexOnChildren = token.children.indexOf(localRules[i]);\n            if (indexOnChildren != -1) {\n                token.children.splice(indexOnChildren, 1);\n            }\n        }\n        token.children.forEach(c => stripRules(c, re));\n    }\n}\nconst ignoreMissingRules = ['EOF'];\nclass Parser {\n    constructor(grammarRules, options) {\n        this.grammarRules = grammarRules;\n        this.options = options;\n        this.cachedRules = {};\n        this.debug = options ? options.debug === true : false;\n        let errors = [];\n        let neededRules = [];\n        grammarRules.forEach(rule => {\n            let parsedName = parseRuleName(rule.name);\n            if (parsedName.name in this.cachedRules) {\n                errors.push('Duplicated rule ' + parsedName.name);\n                return;\n            }\n            else {\n                this.cachedRules[parsedName.name] = rule;\n            }\n            if (!rule.bnf || !rule.bnf.length) {\n                let error = 'Missing rule content, rule: ' + rule.name;\n                if (errors.indexOf(error) == -1)\n                    errors.push(error);\n            }\n            else {\n                rule.bnf.forEach(options => {\n                    if (typeof options[0] === 'string') {\n                        let parsed = parseRuleName(options[0]);\n                        if (parsed.name == rule.name) {\n                            let error = 'Left recursion is not allowed, rule: ' + rule.name;\n                            if (errors.indexOf(error) == -1)\n                                errors.push(error);\n                        }\n                    }\n                    options.forEach(option => {\n                        if (typeof option == 'string') {\n                            let name = parseRuleName(option);\n                            if (!name.isLiteral &&\n                                neededRules.indexOf(name.name) == -1 &&\n                                ignoreMissingRules.indexOf(name.name) == -1)\n                                neededRules.push(name.name);\n                        }\n                    });\n                });\n            }\n            if (WS_RULE == rule.name)\n                rule.implicitWs = false;\n            if (rule.implicitWs) {\n                if (neededRules.indexOf(WS_RULE) == -1)\n                    neededRules.push(WS_RULE);\n            }\n            if (rule.recover) {\n                if (neededRules.indexOf(rule.recover) == -1)\n                    neededRules.push(rule.recover);\n            }\n        });\n        neededRules.forEach(ruleName => {\n            if (!(ruleName in this.cachedRules)) {\n                errors.push('Missing rule ' + ruleName);\n            }\n        });\n        if (errors.length)\n            throw new Error(errors.join('\\n'));\n    }\n    getAST(txt, target) {\n        if (!target) {\n            target = this.grammarRules.filter(x => !x.fragment && x.name.indexOf('%') != 0)[0].name;\n        }\n        let result = this.parse(txt, target);\n        if (result) {\n            agregateErrors(result.errors, result);\n            fixPositions(result, 0);\n            // REMOVE ALL THE TAGS MATCHING /^%/\n            stripRules(result, /^%/);\n            if (!this.options || !this.options.keepUpperRules)\n                stripRules(result, UPPER_SNAKE_RE);\n            let rest = result.rest;\n            if (rest) {\n                new TokenError_1.TokenError('Unexpected end of input: \\n' + rest, result);\n            }\n            fixRest(result);\n            result.rest = rest;\n        }\n        return result;\n    }\n    emitSource() {\n        return 'CANNOT EMIT SOURCE FROM BASE Parser';\n    }\n    parse(txt, target, recursion = 0) {\n        let out = null;\n        let type = parseRuleName(target);\n        let expr;\n        let printable = this.debug && /*!isLiteral &*/ !UPPER_SNAKE_RE.test(type.name);\n        printable &&\n            console.log(new Array(recursion).join('│  ') + 'Trying to get ' + target + ' from ' + JSON.stringify(txt.split('\\n')[0]));\n        let realType = type.name;\n        let targetLex = findRuleByName(type.name, this);\n        if (type.name == 'EOF') {\n            if (txt.length) {\n                return null;\n            }\n            else if (txt.length == 0) {\n                return {\n                    type: 'EOF',\n                    text: '',\n                    rest: '',\n                    start: 0,\n                    end: 0,\n                    fullText: '',\n                    errors: [],\n                    children: [],\n                    parent: null\n                };\n            }\n        }\n        try {\n            if (!targetLex && type.isLiteral) {\n                let src = type.name.trim();\n                if (src.startsWith('\"')) {\n                    src = JSON.parse(src);\n                }\n                else if (src.startsWith(\"'\")) {\n                    src = src.replace(/^'(.+)'$/, '$1').replace(/\\\\'/g, \"'\");\n                }\n                if (src === '') {\n                    return {\n                        type: '%%EMPTY%%',\n                        text: '',\n                        rest: txt,\n                        start: 0,\n                        end: 0,\n                        fullText: '',\n                        errors: [],\n                        children: [],\n                        parent: null\n                    };\n                }\n                expr = new RegExp(escapeRegExp(src));\n                realType = null;\n            }\n        }\n        catch (e) {\n            if (e instanceof ReferenceError) {\n                console.error(e);\n            }\n            return null;\n        }\n        if (expr) {\n            let result = readToken(txt, expr);\n            if (result) {\n                result.type = realType;\n                return result;\n            }\n        }\n        else {\n            let options = targetLex.bnf;\n            if (options instanceof Array) {\n                options.forEach(phases => {\n                    if (out)\n                        return;\n                    let pinned = null;\n                    let tmp = {\n                        type: type.name,\n                        text: '',\n                        children: [],\n                        end: 0,\n                        errors: [],\n                        fullText: '',\n                        parent: null,\n                        start: 0,\n                        rest: txt\n                    };\n                    if (targetLex.fragment)\n                        tmp.fragment = true;\n                    let tmpTxt = txt;\n                    let position = 0;\n                    let allOptional = phases.length > 0;\n                    let foundSomething = false;\n                    for (let i = 0; i < phases.length; i++) {\n                        if (typeof phases[i] == 'string') {\n                            let localTarget = parseRuleName(phases[i]);\n                            allOptional = allOptional && localTarget.isOptional;\n                            let got;\n                            let foundAtLeastOne = false;\n                            do {\n                                got = null;\n                                if (targetLex.implicitWs) {\n                                    got = this.parse(tmpTxt, localTarget.name, recursion + 1);\n                                    if (!got) {\n                                        let WS;\n                                        do {\n                                            WS = this.parse(tmpTxt, WS_RULE, recursion + 1);\n                                            if (WS) {\n                                                tmp.text = tmp.text + WS.text;\n                                                tmp.end = tmp.text.length;\n                                                WS.parent = tmp;\n                                                tmp.children.push(WS);\n                                                tmpTxt = tmpTxt.substr(WS.text.length);\n                                                position += WS.text.length;\n                                            }\n                                            else {\n                                                break;\n                                            }\n                                        } while (WS && WS.text.length);\n                                    }\n                                }\n                                got = got || this.parse(tmpTxt, localTarget.name, recursion + 1);\n                                // rule ::= \"true\" ![a-zA-Z]\n                                // negative lookup, if it does not match, we should continue\n                                if (localTarget.lookupNegative) {\n                                    if (got)\n                                        return /* cancel this path */;\n                                    break;\n                                }\n                                if (localTarget.lookupPositive) {\n                                    if (!got)\n                                        return;\n                                }\n                                if (!got) {\n                                    if (localTarget.isOptional)\n                                        break;\n                                    if (localTarget.atLeastOne && foundAtLeastOne)\n                                        break;\n                                }\n                                if (got && targetLex.pinned == i + 1) {\n                                    pinned = got;\n                                    printable && console.log(new Array(recursion + 1).join('│  ') + '└─ ' + got.type + ' PINNED');\n                                }\n                                if (!got)\n                                    got = this.parseRecovery(targetLex, tmpTxt, recursion + 1);\n                                if (!got) {\n                                    if (pinned) {\n                                        out = tmp;\n                                        got = {\n                                            type: 'SyntaxError',\n                                            text: tmpTxt,\n                                            children: [],\n                                            end: tmpTxt.length,\n                                            errors: [],\n                                            fullText: '',\n                                            parent: null,\n                                            start: 0,\n                                            rest: ''\n                                        };\n                                        if (tmpTxt.length) {\n                                            new TokenError_1.TokenError(`Unexpected end of input. Expecting ${localTarget.name} Got: ${tmpTxt}`, got);\n                                        }\n                                        else {\n                                            new TokenError_1.TokenError(`Unexpected end of input. Missing ${localTarget.name}`, got);\n                                        }\n                                        printable &&\n                                            console.log(new Array(recursion + 1).join('│  ') + '└─ ' + got.type + ' ' + JSON.stringify(got.text));\n                                    }\n                                    else {\n                                        return;\n                                    }\n                                }\n                                foundAtLeastOne = true;\n                                foundSomething = true;\n                                if (got.type == '%%EMPTY%%') {\n                                    break;\n                                }\n                                got.start += position;\n                                got.end += position;\n                                if (!localTarget.lookupPositive && got.type) {\n                                    if (got.fragment) {\n                                        got.children &&\n                                            got.children.forEach(x => {\n                                                x.start += position;\n                                                x.end += position;\n                                                x.parent = tmp;\n                                                tmp.children.push(x);\n                                            });\n                                    }\n                                    else {\n                                        got.parent = tmp;\n                                        tmp.children.push(got);\n                                    }\n                                }\n                                if (localTarget.lookup)\n                                    got.lookup = true;\n                                printable &&\n                                    console.log(new Array(recursion + 1).join('│  ') + '└─ ' + got.type + ' ' + JSON.stringify(got.text));\n                                // Eat it from the input stream, only if it is not a lookup\n                                if (!localTarget.lookup && !got.lookup) {\n                                    tmp.text = tmp.text + got.text;\n                                    tmp.end = tmp.text.length;\n                                    tmpTxt = tmpTxt.substr(got.text.length);\n                                    position += got.text.length;\n                                }\n                                tmp.rest = tmpTxt;\n                            } while (got && localTarget.allowRepetition && tmpTxt.length && !got.lookup);\n                        } /* IS A REGEXP */\n                        else {\n                            let got = readToken(tmpTxt, phases[i]);\n                            if (!got) {\n                                return;\n                            }\n                            printable &&\n                                console.log(new Array(recursion + 1).join('│  ') + '└> ' + JSON.stringify(got.text) + phases[i].source);\n                            foundSomething = true;\n                            got.start += position;\n                            got.end += position;\n                            tmp.text = tmp.text + got.text;\n                            tmp.end = tmp.text.length;\n                            tmpTxt = tmpTxt.substr(got.text.length);\n                            position += got.text.length;\n                            tmp.rest = tmpTxt;\n                        }\n                    }\n                    if (foundSomething) {\n                        out = tmp;\n                        printable &&\n                            console.log(new Array(recursion).join('│  ') + '├<─┴< PUSHING ' + out.type + ' ' + JSON.stringify(out.text));\n                    }\n                });\n            }\n            if (out && targetLex.simplifyWhenOneChildren && out.children.length == 1) {\n                out = out.children[0];\n            }\n        }\n        if (!out) {\n            printable && console.log(target + ' NOT RESOLVED FROM ' + txt);\n        }\n        return out;\n    }\n    parseRecovery(recoverableToken, tmpTxt, recursion) {\n        if (recoverableToken.recover && tmpTxt.length) {\n            let printable = this.debug;\n            printable &&\n                console.log(new Array(recursion + 1).join('│  ') +\n                    'Trying to recover until token ' +\n                    recoverableToken.recover +\n                    ' from ' +\n                    JSON.stringify(tmpTxt.split('\\n')[0] + tmpTxt.split('\\n')[1]));\n            let tmp = {\n                type: 'SyntaxError',\n                text: '',\n                children: [],\n                end: 0,\n                errors: [],\n                fullText: '',\n                parent: null,\n                start: 0,\n                rest: ''\n            };\n            let got;\n            do {\n                got = this.parse(tmpTxt, recoverableToken.recover, recursion + 1);\n                if (got) {\n                    new TokenError_1.TokenError('Unexpected input: \"' + tmp.text + `\" Expecting: ${recoverableToken.name}`, tmp);\n                    break;\n                }\n                else {\n                    tmp.text = tmp.text + tmpTxt[0];\n                    tmp.end = tmp.text.length;\n                    tmpTxt = tmpTxt.substr(1);\n                }\n            } while (!got && tmpTxt.length > 0);\n            if (tmp.text.length > 0 && got) {\n                printable && console.log(new Array(recursion + 1).join('│  ') + 'Recovered text: ' + JSON.stringify(tmp.text));\n                return tmp;\n            }\n        }\n        return null;\n    }\n}\nexports.Parser = Parser;\nexports.default = Parser;\n//# sourceMappingURL=Parser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TokenError = void 0;\nclass TokenError extends Error {\n    constructor(message, token) {\n        super(message);\n        this.message = message;\n        this.token = token;\n        if (token && token.errors)\n            token.errors.push(this);\n        else\n            throw this;\n    }\n    inspect() {\n        return 'SyntaxError: ' + this.message;\n    }\n}\nexports.TokenError = TokenError;\n//# sourceMappingURL=TokenError.js.map","// HumanizeDuration.js - https://git.io/j0HgmQ\n\n// @ts-check\n\n/**\n * @typedef {string | ((unitCount: number) => string)} Unit\n */\n\n/**\n * @typedef {(\"y\" | \"mo\" | \"w\" | \"d\" | \"h\" | \"m\" | \"s\" | \"ms\")} UnitName\n */\n\n/**\n * @typedef {Object} UnitMeasures\n * @prop {number} y\n * @prop {number} mo\n * @prop {number} w\n * @prop {number} d\n * @prop {number} h\n * @prop {number} m\n * @prop {number} s\n * @prop {number} ms\n */\n\n/**\n * @internal\n * @typedef {[string, string, string, string, string, string, string, string, string, string]} DigitReplacements\n */\n\n/**\n * @typedef {Object} Language\n * @prop {Unit} y\n * @prop {Unit} mo\n * @prop {Unit} w\n * @prop {Unit} d\n * @prop {Unit} h\n * @prop {Unit} m\n * @prop {Unit} s\n * @prop {Unit} ms\n * @prop {string} [decimal]\n * @prop {string} [delimiter]\n * @prop {DigitReplacements} [_digitReplacements]\n * @prop {boolean} [_numberFirst]\n * @prop {boolean} [_hideCountIf2]\n */\n\n/**\n * @typedef {Object} Options\n * @prop {string} [language]\n * @prop {Record<string, Language>} [languages]\n * @prop {string[]} [fallbacks]\n * @prop {string} [delimiter]\n * @prop {string} [spacer]\n * @prop {boolean} [round]\n * @prop {number} [largest]\n * @prop {UnitName[]} [units]\n * @prop {string} [decimal]\n * @prop {string} [conjunction]\n * @prop {number} [maxDecimalPoints]\n * @prop {UnitMeasures} [unitMeasures]\n * @prop {boolean} [serialComma]\n * @prop {DigitReplacements} [digitReplacements]\n */\n\n/**\n * @internal\n * @typedef {Required<Options>} NormalizedOptions\n */\n\n(function () {\n  // Fallback for `Object.assign` if relevant.\n  var assign =\n    Object.assign ||\n    /** @param {...any} destination */\n    function (destination) {\n      var source;\n      for (var i = 1; i < arguments.length; i++) {\n        source = arguments[i];\n        for (var prop in source) {\n          if (has(source, prop)) {\n            destination[prop] = source[prop];\n          }\n        }\n      }\n      return destination;\n    };\n\n  // Fallback for `Array.isArray` if relevant.\n  var isArray =\n    Array.isArray ||\n    function (arg) {\n      return Object.prototype.toString.call(arg) === \"[object Array]\";\n    };\n\n  // This has to be defined separately because of a bug: we want to alias\n  // `gr` and `el` for backwards-compatiblity. In a breaking change, we can\n  // remove `gr` entirely.\n  // See https://github.com/EvanHahn/HumanizeDuration.js/issues/143 for more.\n  var GREEK = language(\n    function (c) {\n      return c === 1 ? \"χρόνος\" : \"χρόνια\";\n    },\n    function (c) {\n      return c === 1 ? \"μήνας\" : \"μήνες\";\n    },\n    function (c) {\n      return c === 1 ? \"εβδομάδα\" : \"εβδομάδες\";\n    },\n    function (c) {\n      return c === 1 ? \"μέρα\" : \"μέρες\";\n    },\n    function (c) {\n      return c === 1 ? \"ώρα\" : \"ώρες\";\n    },\n    function (c) {\n      return c === 1 ? \"λεπτό\" : \"λεπτά\";\n    },\n    function (c) {\n      return c === 1 ? \"δευτερόλεπτο\" : \"δευτερόλεπτα\";\n    },\n    function (c) {\n      return (c === 1 ? \"χιλιοστό\" : \"χιλιοστά\") + \" του δευτερολέπτου\";\n    },\n    \",\"\n  );\n\n  /**\n   * @internal\n   * @type {Record<string, Language>}\n   */\n  var LANGUAGES = {\n    af: language(\n      \"jaar\",\n      function (c) {\n        return \"maand\" + (c === 1 ? \"\" : \"e\");\n      },\n      function (c) {\n        return c === 1 ? \"week\" : \"weke\";\n      },\n      function (c) {\n        return c === 1 ? \"dag\" : \"dae\";\n      },\n      function (c) {\n        return c === 1 ? \"uur\" : \"ure\";\n      },\n      function (c) {\n        return c === 1 ? \"minuut\" : \"minute\";\n      },\n      function (c) {\n        return \"sekonde\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"millisekonde\" + (c === 1 ? \"\" : \"s\");\n      },\n      \",\"\n    ),\n    am: language(\"ዓመት\", \"ወር\", \"ሳምንት\", \"ቀን\", \"ሰዓት\", \"ደቂቃ\", \"ሰከንድ\", \"ሚሊሰከንድ\"),\n    ar: assign(\n      language(\n        function (c) {\n          return [\"سنة\", \"سنتان\", \"سنوات\"][getArabicForm(c)];\n        },\n        function (c) {\n          return [\"شهر\", \"شهران\", \"أشهر\"][getArabicForm(c)];\n        },\n        function (c) {\n          return [\"أسبوع\", \"أسبوعين\", \"أسابيع\"][getArabicForm(c)];\n        },\n        function (c) {\n          return [\"يوم\", \"يومين\", \"أيام\"][getArabicForm(c)];\n        },\n        function (c) {\n          return [\"ساعة\", \"ساعتين\", \"ساعات\"][getArabicForm(c)];\n        },\n        function (c) {\n          return [\"دقيقة\", \"دقيقتان\", \"دقائق\"][getArabicForm(c)];\n        },\n        function (c) {\n          return [\"ثانية\", \"ثانيتان\", \"ثواني\"][getArabicForm(c)];\n        },\n        function (c) {\n          return [\"جزء من الثانية\", \"جزآن من الثانية\", \"أجزاء من الثانية\"][\n            getArabicForm(c)\n          ];\n        },\n        \",\"\n      ),\n      {\n        delimiter: \" ﻭ \",\n        _hideCountIf2: true,\n        _digitReplacements: [\"۰\", \"١\", \"٢\", \"٣\", \"٤\", \"٥\", \"٦\", \"٧\", \"٨\", \"٩\"]\n      }\n    ),\n    bg: language(\n      function (c) {\n        return [\"години\", \"година\", \"години\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"месеца\", \"месец\", \"месеца\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"седмици\", \"седмица\", \"седмици\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"дни\", \"ден\", \"дни\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"часа\", \"час\", \"часа\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"минути\", \"минута\", \"минути\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"секунди\", \"секунда\", \"секунди\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"милисекунди\", \"милисекунда\", \"милисекунди\"][getSlavicForm(c)];\n      },\n      \",\"\n    ),\n    bn: language(\n      \"বছর\",\n      \"মাস\",\n      \"সপ্তাহ\",\n      \"দিন\",\n      \"ঘন্টা\",\n      \"মিনিট\",\n      \"সেকেন্ড\",\n      \"মিলিসেকেন্ড\"\n    ),\n    ca: language(\n      function (c) {\n        return \"any\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"mes\" + (c === 1 ? \"\" : \"os\");\n      },\n      function (c) {\n        return \"setman\" + (c === 1 ? \"a\" : \"es\");\n      },\n      function (c) {\n        return \"di\" + (c === 1 ? \"a\" : \"es\");\n      },\n      function (c) {\n        return \"hor\" + (c === 1 ? \"a\" : \"es\");\n      },\n      function (c) {\n        return \"minut\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"segon\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"milisegon\" + (c === 1 ? \"\" : \"s\");\n      },\n      \",\"\n    ),\n    ckb: language(\n      \"ساڵ\",\n      \"مانگ\",\n      \"هەفتە\",\n      \"ڕۆژ\",\n      \"کاژێر\",\n      \"خولەک\",\n      \"چرکە\",\n      \"میلی چرکە\",\n      \".\"\n    ),\n    cs: language(\n      function (c) {\n        return [\"rok\", \"roku\", \"roky\", \"let\"][getCzechOrSlovakForm(c)];\n      },\n      function (c) {\n        return [\"měsíc\", \"měsíce\", \"měsíce\", \"měsíců\"][getCzechOrSlovakForm(c)];\n      },\n      function (c) {\n        return [\"týden\", \"týdne\", \"týdny\", \"týdnů\"][getCzechOrSlovakForm(c)];\n      },\n      function (c) {\n        return [\"den\", \"dne\", \"dny\", \"dní\"][getCzechOrSlovakForm(c)];\n      },\n      function (c) {\n        return [\"hodina\", \"hodiny\", \"hodiny\", \"hodin\"][getCzechOrSlovakForm(c)];\n      },\n      function (c) {\n        return [\"minuta\", \"minuty\", \"minuty\", \"minut\"][getCzechOrSlovakForm(c)];\n      },\n      function (c) {\n        return [\"sekunda\", \"sekundy\", \"sekundy\", \"sekund\"][\n          getCzechOrSlovakForm(c)\n        ];\n      },\n      function (c) {\n        return [\"milisekunda\", \"milisekundy\", \"milisekundy\", \"milisekund\"][\n          getCzechOrSlovakForm(c)\n        ];\n      },\n      \",\"\n    ),\n    cy: language(\n      \"flwyddyn\",\n      \"mis\",\n      \"wythnos\",\n      \"diwrnod\",\n      \"awr\",\n      \"munud\",\n      \"eiliad\",\n      \"milieiliad\"\n    ),\n    da: language(\n      \"år\",\n      function (c) {\n        return \"måned\" + (c === 1 ? \"\" : \"er\");\n      },\n      function (c) {\n        return \"uge\" + (c === 1 ? \"\" : \"r\");\n      },\n      function (c) {\n        return \"dag\" + (c === 1 ? \"\" : \"e\");\n      },\n      function (c) {\n        return \"time\" + (c === 1 ? \"\" : \"r\");\n      },\n      function (c) {\n        return \"minut\" + (c === 1 ? \"\" : \"ter\");\n      },\n      function (c) {\n        return \"sekund\" + (c === 1 ? \"\" : \"er\");\n      },\n      function (c) {\n        return \"millisekund\" + (c === 1 ? \"\" : \"er\");\n      },\n      \",\"\n    ),\n    de: language(\n      function (c) {\n        return \"Jahr\" + (c === 1 ? \"\" : \"e\");\n      },\n      function (c) {\n        return \"Monat\" + (c === 1 ? \"\" : \"e\");\n      },\n      function (c) {\n        return \"Woche\" + (c === 1 ? \"\" : \"n\");\n      },\n      function (c) {\n        return \"Tag\" + (c === 1 ? \"\" : \"e\");\n      },\n      function (c) {\n        return \"Stunde\" + (c === 1 ? \"\" : \"n\");\n      },\n      function (c) {\n        return \"Minute\" + (c === 1 ? \"\" : \"n\");\n      },\n      function (c) {\n        return \"Sekunde\" + (c === 1 ? \"\" : \"n\");\n      },\n      function (c) {\n        return \"Millisekunde\" + (c === 1 ? \"\" : \"n\");\n      },\n      \",\"\n    ),\n    el: GREEK,\n    en: language(\n      function (c) {\n        return \"year\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"month\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"week\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"day\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"hour\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"minute\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"second\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"millisecond\" + (c === 1 ? \"\" : \"s\");\n      }\n    ),\n    eo: language(\n      function (c) {\n        return \"jaro\" + (c === 1 ? \"\" : \"j\");\n      },\n      function (c) {\n        return \"monato\" + (c === 1 ? \"\" : \"j\");\n      },\n      function (c) {\n        return \"semajno\" + (c === 1 ? \"\" : \"j\");\n      },\n      function (c) {\n        return \"tago\" + (c === 1 ? \"\" : \"j\");\n      },\n      function (c) {\n        return \"horo\" + (c === 1 ? \"\" : \"j\");\n      },\n      function (c) {\n        return \"minuto\" + (c === 1 ? \"\" : \"j\");\n      },\n      function (c) {\n        return \"sekundo\" + (c === 1 ? \"\" : \"j\");\n      },\n      function (c) {\n        return \"milisekundo\" + (c === 1 ? \"\" : \"j\");\n      },\n      \",\"\n    ),\n    es: language(\n      function (c) {\n        return \"año\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"mes\" + (c === 1 ? \"\" : \"es\");\n      },\n      function (c) {\n        return \"semana\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"día\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"hora\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"minuto\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"segundo\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"milisegundo\" + (c === 1 ? \"\" : \"s\");\n      },\n      \",\"\n    ),\n    et: language(\n      function (c) {\n        return \"aasta\" + (c === 1 ? \"\" : \"t\");\n      },\n      function (c) {\n        return \"kuu\" + (c === 1 ? \"\" : \"d\");\n      },\n      function (c) {\n        return \"nädal\" + (c === 1 ? \"\" : \"at\");\n      },\n      function (c) {\n        return \"päev\" + (c === 1 ? \"\" : \"a\");\n      },\n      function (c) {\n        return \"tund\" + (c === 1 ? \"\" : \"i\");\n      },\n      function (c) {\n        return \"minut\" + (c === 1 ? \"\" : \"it\");\n      },\n      function (c) {\n        return \"sekund\" + (c === 1 ? \"\" : \"it\");\n      },\n      function (c) {\n        return \"millisekund\" + (c === 1 ? \"\" : \"it\");\n      },\n      \",\"\n    ),\n    eu: language(\n      \"urte\",\n      \"hilabete\",\n      \"aste\",\n      \"egun\",\n      \"ordu\",\n      \"minutu\",\n      \"segundo\",\n      \"milisegundo\",\n      \",\"\n    ),\n    fa: language(\n      \"سال\",\n      \"ماه\",\n      \"هفته\",\n      \"روز\",\n      \"ساعت\",\n      \"دقیقه\",\n      \"ثانیه\",\n      \"میلی ثانیه\"\n    ),\n    fi: language(\n      function (c) {\n        return c === 1 ? \"vuosi\" : \"vuotta\";\n      },\n      function (c) {\n        return c === 1 ? \"kuukausi\" : \"kuukautta\";\n      },\n      function (c) {\n        return \"viikko\" + (c === 1 ? \"\" : \"a\");\n      },\n      function (c) {\n        return \"päivä\" + (c === 1 ? \"\" : \"ä\");\n      },\n      function (c) {\n        return \"tunti\" + (c === 1 ? \"\" : \"a\");\n      },\n      function (c) {\n        return \"minuutti\" + (c === 1 ? \"\" : \"a\");\n      },\n      function (c) {\n        return \"sekunti\" + (c === 1 ? \"\" : \"a\");\n      },\n      function (c) {\n        return \"millisekunti\" + (c === 1 ? \"\" : \"a\");\n      },\n      \",\"\n    ),\n    fo: language(\n      \"ár\",\n      function (c) {\n        return c === 1 ? \"mánaður\" : \"mánaðir\";\n      },\n      function (c) {\n        return c === 1 ? \"vika\" : \"vikur\";\n      },\n      function (c) {\n        return c === 1 ? \"dagur\" : \"dagar\";\n      },\n      function (c) {\n        return c === 1 ? \"tími\" : \"tímar\";\n      },\n      function (c) {\n        return c === 1 ? \"minuttur\" : \"minuttir\";\n      },\n      \"sekund\",\n      \"millisekund\",\n      \",\"\n    ),\n    fr: language(\n      function (c) {\n        return \"an\" + (c >= 2 ? \"s\" : \"\");\n      },\n      \"mois\",\n      function (c) {\n        return \"semaine\" + (c >= 2 ? \"s\" : \"\");\n      },\n      function (c) {\n        return \"jour\" + (c >= 2 ? \"s\" : \"\");\n      },\n      function (c) {\n        return \"heure\" + (c >= 2 ? \"s\" : \"\");\n      },\n      function (c) {\n        return \"minute\" + (c >= 2 ? \"s\" : \"\");\n      },\n      function (c) {\n        return \"seconde\" + (c >= 2 ? \"s\" : \"\");\n      },\n      function (c) {\n        return \"milliseconde\" + (c >= 2 ? \"s\" : \"\");\n      },\n      \",\"\n    ),\n    gr: GREEK,\n    he: language(\n      function (c) {\n        return c === 1 ? \"שנה\" : \"שנים\";\n      },\n      function (c) {\n        return c === 1 ? \"חודש\" : \"חודשים\";\n      },\n      function (c) {\n        return c === 1 ? \"שבוע\" : \"שבועות\";\n      },\n      function (c) {\n        return c === 1 ? \"יום\" : \"ימים\";\n      },\n      function (c) {\n        return c === 1 ? \"שעה\" : \"שעות\";\n      },\n      function (c) {\n        return c === 1 ? \"דקה\" : \"דקות\";\n      },\n      function (c) {\n        return c === 1 ? \"שניה\" : \"שניות\";\n      },\n      function (c) {\n        return c === 1 ? \"מילישנייה\" : \"מילישניות\";\n      }\n    ),\n    hr: language(\n      function (c) {\n        if (c % 10 === 2 || c % 10 === 3 || c % 10 === 4) {\n          return \"godine\";\n        }\n        return \"godina\";\n      },\n      function (c) {\n        if (c === 1) {\n          return \"mjesec\";\n        } else if (c === 2 || c === 3 || c === 4) {\n          return \"mjeseca\";\n        }\n        return \"mjeseci\";\n      },\n      function (c) {\n        if (c % 10 === 1 && c !== 11) {\n          return \"tjedan\";\n        }\n        return \"tjedna\";\n      },\n      function (c) {\n        return c === 1 ? \"dan\" : \"dana\";\n      },\n      function (c) {\n        if (c === 1) {\n          return \"sat\";\n        } else if (c === 2 || c === 3 || c === 4) {\n          return \"sata\";\n        }\n        return \"sati\";\n      },\n      function (c) {\n        var mod10 = c % 10;\n        if ((mod10 === 2 || mod10 === 3 || mod10 === 4) && (c < 10 || c > 14)) {\n          return \"minute\";\n        }\n        return \"minuta\";\n      },\n      function (c) {\n        var mod10 = c % 10;\n        if (mod10 === 5 || (Math.floor(c) === c && c >= 10 && c <= 19)) {\n          return \"sekundi\";\n        } else if (mod10 === 1) {\n          return \"sekunda\";\n        } else if (mod10 === 2 || mod10 === 3 || mod10 === 4) {\n          return \"sekunde\";\n        }\n        return \"sekundi\";\n      },\n      function (c) {\n        if (c === 1) {\n          return \"milisekunda\";\n        } else if (c % 10 === 2 || c % 10 === 3 || c % 10 === 4) {\n          return \"milisekunde\";\n        }\n        return \"milisekundi\";\n      },\n      \",\"\n    ),\n    hi: language(\n      \"साल\",\n      function (c) {\n        return c === 1 ? \"महीना\" : \"महीने\";\n      },\n      function (c) {\n        return c === 1 ? \"हफ़्ता\" : \"हफ्ते\";\n      },\n      \"दिन\",\n      function (c) {\n        return c === 1 ? \"घंटा\" : \"घंटे\";\n      },\n      \"मिनट\",\n      \"सेकंड\",\n      \"मिलीसेकंड\"\n    ),\n    hu: language(\n      \"év\",\n      \"hónap\",\n      \"hét\",\n      \"nap\",\n      \"óra\",\n      \"perc\",\n      \"másodperc\",\n      \"ezredmásodperc\",\n      \",\"\n    ),\n    id: language(\n      \"tahun\",\n      \"bulan\",\n      \"minggu\",\n      \"hari\",\n      \"jam\",\n      \"menit\",\n      \"detik\",\n      \"milidetik\"\n    ),\n    is: language(\n      \"ár\",\n      function (c) {\n        return \"mánuð\" + (c === 1 ? \"ur\" : \"ir\");\n      },\n      function (c) {\n        return \"vik\" + (c === 1 ? \"a\" : \"ur\");\n      },\n      function (c) {\n        return \"dag\" + (c === 1 ? \"ur\" : \"ar\");\n      },\n      function (c) {\n        return \"klukkutím\" + (c === 1 ? \"i\" : \"ar\");\n      },\n      function (c) {\n        return \"mínút\" + (c === 1 ? \"a\" : \"ur\");\n      },\n      function (c) {\n        return \"sekúnd\" + (c === 1 ? \"a\" : \"ur\");\n      },\n      function (c) {\n        return \"millisekúnd\" + (c === 1 ? \"a\" : \"ur\");\n      }\n    ),\n    it: language(\n      function (c) {\n        return \"ann\" + (c === 1 ? \"o\" : \"i\");\n      },\n      function (c) {\n        return \"mes\" + (c === 1 ? \"e\" : \"i\");\n      },\n      function (c) {\n        return \"settiman\" + (c === 1 ? \"a\" : \"e\");\n      },\n      function (c) {\n        return \"giorn\" + (c === 1 ? \"o\" : \"i\");\n      },\n      function (c) {\n        return \"or\" + (c === 1 ? \"a\" : \"e\");\n      },\n      function (c) {\n        return \"minut\" + (c === 1 ? \"o\" : \"i\");\n      },\n      function (c) {\n        return \"second\" + (c === 1 ? \"o\" : \"i\");\n      },\n      function (c) {\n        return \"millisecond\" + (c === 1 ? \"o\" : \"i\");\n      },\n      \",\"\n    ),\n    ja: language(\"年\", \"ヶ月\", \"週\", \"日\", \"時間\", \"分\", \"秒\", \"ミリ秒\"),\n    km: language(\n      \"ឆ្នាំ\",\n      \"ខែ\",\n      \"សប្តាហ៍\",\n      \"ថ្ងៃ\",\n      \"ម៉ោង\",\n      \"នាទី\",\n      \"វិនាទី\",\n      \"មិល្លីវិនាទី\"\n    ),\n    kn: language(\n      function (c) {\n        return c === 1 ? \"ವರ್ಷ\" : \"ವರ್ಷಗಳು\";\n      },\n      function (c) {\n        return c === 1 ? \"ತಿಂಗಳು\" : \"ತಿಂಗಳುಗಳು\";\n      },\n      function (c) {\n        return c === 1 ? \"ವಾರ\" : \"ವಾರಗಳು\";\n      },\n      function (c) {\n        return c === 1 ? \"ದಿನ\" : \"ದಿನಗಳು\";\n      },\n      function (c) {\n        return c === 1 ? \"ಗಂಟೆ\" : \"ಗಂಟೆಗಳು\";\n      },\n      function (c) {\n        return c === 1 ? \"ನಿಮಿಷ\" : \"ನಿಮಿಷಗಳು\";\n      },\n      function (c) {\n        return c === 1 ? \"ಸೆಕೆಂಡ್\" : \"ಸೆಕೆಂಡುಗಳು\";\n      },\n      function (c) {\n        return c === 1 ? \"ಮಿಲಿಸೆಕೆಂಡ್\" : \"ಮಿಲಿಸೆಕೆಂಡುಗಳು\";\n      }\n    ),\n    ko: language(\"년\", \"개월\", \"주일\", \"일\", \"시간\", \"분\", \"초\", \"밀리 초\"),\n    ku: language(\n      \"sal\",\n      \"meh\",\n      \"hefte\",\n      \"roj\",\n      \"seet\",\n      \"deqe\",\n      \"saniye\",\n      \"mîlîçirk\",\n      \",\"\n    ),\n    lo: language(\n      \"ປີ\",\n      \"ເດືອນ\",\n      \"ອາທິດ\",\n      \"ມື້\",\n      \"ຊົ່ວໂມງ\",\n      \"ນາທີ\",\n      \"ວິນາທີ\",\n      \"ມິນລິວິນາທີ\",\n      \",\"\n    ),\n    lt: language(\n      function (c) {\n        return c % 10 === 0 || (c % 100 >= 10 && c % 100 <= 20)\n          ? \"metų\"\n          : \"metai\";\n      },\n      function (c) {\n        return [\"mėnuo\", \"mėnesiai\", \"mėnesių\"][getLithuanianForm(c)];\n      },\n      function (c) {\n        return [\"savaitė\", \"savaitės\", \"savaičių\"][getLithuanianForm(c)];\n      },\n      function (c) {\n        return [\"diena\", \"dienos\", \"dienų\"][getLithuanianForm(c)];\n      },\n      function (c) {\n        return [\"valanda\", \"valandos\", \"valandų\"][getLithuanianForm(c)];\n      },\n      function (c) {\n        return [\"minutė\", \"minutės\", \"minučių\"][getLithuanianForm(c)];\n      },\n      function (c) {\n        return [\"sekundė\", \"sekundės\", \"sekundžių\"][getLithuanianForm(c)];\n      },\n      function (c) {\n        return [\"milisekundė\", \"milisekundės\", \"milisekundžių\"][\n          getLithuanianForm(c)\n        ];\n      },\n      \",\"\n    ),\n    lv: language(\n      function (c) {\n        return getLatvianForm(c) ? \"gads\" : \"gadi\";\n      },\n      function (c) {\n        return getLatvianForm(c) ? \"mēnesis\" : \"mēneši\";\n      },\n      function (c) {\n        return getLatvianForm(c) ? \"nedēļa\" : \"nedēļas\";\n      },\n      function (c) {\n        return getLatvianForm(c) ? \"diena\" : \"dienas\";\n      },\n      function (c) {\n        return getLatvianForm(c) ? \"stunda\" : \"stundas\";\n      },\n      function (c) {\n        return getLatvianForm(c) ? \"minūte\" : \"minūtes\";\n      },\n      function (c) {\n        return getLatvianForm(c) ? \"sekunde\" : \"sekundes\";\n      },\n      function (c) {\n        return getLatvianForm(c) ? \"milisekunde\" : \"milisekundes\";\n      },\n      \",\"\n    ),\n    mk: language(\n      function (c) {\n        return c === 1 ? \"година\" : \"години\";\n      },\n      function (c) {\n        return c === 1 ? \"месец\" : \"месеци\";\n      },\n      function (c) {\n        return c === 1 ? \"недела\" : \"недели\";\n      },\n      function (c) {\n        return c === 1 ? \"ден\" : \"дена\";\n      },\n      function (c) {\n        return c === 1 ? \"час\" : \"часа\";\n      },\n      function (c) {\n        return c === 1 ? \"минута\" : \"минути\";\n      },\n      function (c) {\n        return c === 1 ? \"секунда\" : \"секунди\";\n      },\n      function (c) {\n        return c === 1 ? \"милисекунда\" : \"милисекунди\";\n      },\n      \",\"\n    ),\n    mn: language(\n      \"жил\",\n      \"сар\",\n      \"долоо хоног\",\n      \"өдөр\",\n      \"цаг\",\n      \"минут\",\n      \"секунд\",\n      \"миллисекунд\"\n    ),\n    mr: language(\n      function (c) {\n        return c === 1 ? \"वर्ष\" : \"वर्षे\";\n      },\n      function (c) {\n        return c === 1 ? \"महिना\" : \"महिने\";\n      },\n      function (c) {\n        return c === 1 ? \"आठवडा\" : \"आठवडे\";\n      },\n      \"दिवस\",\n      \"तास\",\n      function (c) {\n        return c === 1 ? \"मिनिट\" : \"मिनिटे\";\n      },\n      \"सेकंद\",\n      \"मिलिसेकंद\"\n    ),\n    ms: language(\n      \"tahun\",\n      \"bulan\",\n      \"minggu\",\n      \"hari\",\n      \"jam\",\n      \"minit\",\n      \"saat\",\n      \"milisaat\"\n    ),\n    nl: language(\n      \"jaar\",\n      function (c) {\n        return c === 1 ? \"maand\" : \"maanden\";\n      },\n      function (c) {\n        return c === 1 ? \"week\" : \"weken\";\n      },\n      function (c) {\n        return c === 1 ? \"dag\" : \"dagen\";\n      },\n      \"uur\",\n      function (c) {\n        return c === 1 ? \"minuut\" : \"minuten\";\n      },\n      function (c) {\n        return c === 1 ? \"seconde\" : \"seconden\";\n      },\n      function (c) {\n        return c === 1 ? \"milliseconde\" : \"milliseconden\";\n      },\n      \",\"\n    ),\n    no: language(\n      \"år\",\n      function (c) {\n        return \"måned\" + (c === 1 ? \"\" : \"er\");\n      },\n      function (c) {\n        return \"uke\" + (c === 1 ? \"\" : \"r\");\n      },\n      function (c) {\n        return \"dag\" + (c === 1 ? \"\" : \"er\");\n      },\n      function (c) {\n        return \"time\" + (c === 1 ? \"\" : \"r\");\n      },\n      function (c) {\n        return \"minutt\" + (c === 1 ? \"\" : \"er\");\n      },\n      function (c) {\n        return \"sekund\" + (c === 1 ? \"\" : \"er\");\n      },\n      function (c) {\n        return \"millisekund\" + (c === 1 ? \"\" : \"er\");\n      },\n      \",\"\n    ),\n    pl: language(\n      function (c) {\n        return [\"rok\", \"roku\", \"lata\", \"lat\"][getPolishForm(c)];\n      },\n      function (c) {\n        return [\"miesiąc\", \"miesiąca\", \"miesiące\", \"miesięcy\"][\n          getPolishForm(c)\n        ];\n      },\n      function (c) {\n        return [\"tydzień\", \"tygodnia\", \"tygodnie\", \"tygodni\"][getPolishForm(c)];\n      },\n      function (c) {\n        return [\"dzień\", \"dnia\", \"dni\", \"dni\"][getPolishForm(c)];\n      },\n      function (c) {\n        return [\"godzina\", \"godziny\", \"godziny\", \"godzin\"][getPolishForm(c)];\n      },\n      function (c) {\n        return [\"minuta\", \"minuty\", \"minuty\", \"minut\"][getPolishForm(c)];\n      },\n      function (c) {\n        return [\"sekunda\", \"sekundy\", \"sekundy\", \"sekund\"][getPolishForm(c)];\n      },\n      function (c) {\n        return [\"milisekunda\", \"milisekundy\", \"milisekundy\", \"milisekund\"][\n          getPolishForm(c)\n        ];\n      },\n      \",\"\n    ),\n    pt: language(\n      function (c) {\n        return \"ano\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return c === 1 ? \"mês\" : \"meses\";\n      },\n      function (c) {\n        return \"semana\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"dia\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"hora\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"minuto\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"segundo\" + (c === 1 ? \"\" : \"s\");\n      },\n      function (c) {\n        return \"milissegundo\" + (c === 1 ? \"\" : \"s\");\n      },\n      \",\"\n    ),\n    ro: language(\n      function (c) {\n        return c === 1 ? \"an\" : \"ani\";\n      },\n      function (c) {\n        return c === 1 ? \"lună\" : \"luni\";\n      },\n      function (c) {\n        return c === 1 ? \"săptămână\" : \"săptămâni\";\n      },\n      function (c) {\n        return c === 1 ? \"zi\" : \"zile\";\n      },\n      function (c) {\n        return c === 1 ? \"oră\" : \"ore\";\n      },\n      function (c) {\n        return c === 1 ? \"minut\" : \"minute\";\n      },\n      function (c) {\n        return c === 1 ? \"secundă\" : \"secunde\";\n      },\n      function (c) {\n        return c === 1 ? \"milisecundă\" : \"milisecunde\";\n      },\n      \",\"\n    ),\n    ru: language(\n      function (c) {\n        return [\"лет\", \"год\", \"года\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"месяцев\", \"месяц\", \"месяца\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"недель\", \"неделя\", \"недели\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"дней\", \"день\", \"дня\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"часов\", \"час\", \"часа\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"минут\", \"минута\", \"минуты\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"секунд\", \"секунда\", \"секунды\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"миллисекунд\", \"миллисекунда\", \"миллисекунды\"][\n          getSlavicForm(c)\n        ];\n      },\n      \",\"\n    ),\n    sq: language(\n      function (c) {\n        return c === 1 ? \"vit\" : \"vjet\";\n      },\n      \"muaj\",\n      \"javë\",\n      \"ditë\",\n      \"orë\",\n      function (c) {\n        return \"minut\" + (c === 1 ? \"ë\" : \"a\");\n      },\n      function (c) {\n        return \"sekond\" + (c === 1 ? \"ë\" : \"a\");\n      },\n      function (c) {\n        return \"milisekond\" + (c === 1 ? \"ë\" : \"a\");\n      },\n      \",\"\n    ),\n    sr: language(\n      function (c) {\n        return [\"години\", \"година\", \"године\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"месеци\", \"месец\", \"месеца\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"недељи\", \"недеља\", \"недеље\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"дани\", \"дан\", \"дана\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"сати\", \"сат\", \"сата\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"минута\", \"минут\", \"минута\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"секунди\", \"секунда\", \"секунде\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"милисекунди\", \"милисекунда\", \"милисекунде\"][getSlavicForm(c)];\n      },\n      \",\"\n    ),\n    ta: language(\n      function (c) {\n        return c === 1 ? \"வருடம்\" : \"ஆண்டுகள்\";\n      },\n      function (c) {\n        return c === 1 ? \"மாதம்\" : \"மாதங்கள்\";\n      },\n      function (c) {\n        return c === 1 ? \"வாரம்\" : \"வாரங்கள்\";\n      },\n      function (c) {\n        return c === 1 ? \"நாள்\" : \"நாட்கள்\";\n      },\n      function (c) {\n        return c === 1 ? \"மணி\" : \"மணிநேரம்\";\n      },\n      function (c) {\n        return \"நிமிட\" + (c === 1 ? \"ம்\" : \"ங்கள்\");\n      },\n      function (c) {\n        return \"வினாடி\" + (c === 1 ? \"\" : \"கள்\");\n      },\n      function (c) {\n        return \"மில்லி விநாடி\" + (c === 1 ? \"\" : \"கள்\");\n      }\n    ),\n    te: language(\n      function (c) {\n        return \"సంవత్స\" + (c === 1 ? \"రం\" : \"రాల\");\n      },\n      function (c) {\n        return \"నెల\" + (c === 1 ? \"\" : \"ల\");\n      },\n      function (c) {\n        return c === 1 ? \"వారం\" : \"వారాలు\";\n      },\n      function (c) {\n        return \"రోజు\" + (c === 1 ? \"\" : \"లు\");\n      },\n      function (c) {\n        return \"గంట\" + (c === 1 ? \"\" : \"లు\");\n      },\n      function (c) {\n        return c === 1 ? \"నిమిషం\" : \"నిమిషాలు\";\n      },\n      function (c) {\n        return c === 1 ? \"సెకను\" : \"సెకన్లు\";\n      },\n      function (c) {\n        return c === 1 ? \"మిల్లీసెకన్\" : \"మిల్లీసెకన్లు\";\n      }\n    ),\n    uk: language(\n      function (c) {\n        return [\"років\", \"рік\", \"роки\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"місяців\", \"місяць\", \"місяці\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"тижнів\", \"тиждень\", \"тижні\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"днів\", \"день\", \"дні\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"годин\", \"година\", \"години\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"хвилин\", \"хвилина\", \"хвилини\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"секунд\", \"секунда\", \"секунди\"][getSlavicForm(c)];\n      },\n      function (c) {\n        return [\"мілісекунд\", \"мілісекунда\", \"мілісекунди\"][getSlavicForm(c)];\n      },\n      \",\"\n    ),\n    ur: language(\n      \"سال\",\n      function (c) {\n        return c === 1 ? \"مہینہ\" : \"مہینے\";\n      },\n      function (c) {\n        return c === 1 ? \"ہفتہ\" : \"ہفتے\";\n      },\n      \"دن\",\n      function (c) {\n        return c === 1 ? \"گھنٹہ\" : \"گھنٹے\";\n      },\n      \"منٹ\",\n      \"سیکنڈ\",\n      \"ملی سیکنڈ\"\n    ),\n    sk: language(\n      function (c) {\n        return [\"rok\", \"roky\", \"roky\", \"rokov\"][getCzechOrSlovakForm(c)];\n      },\n      function (c) {\n        return [\"mesiac\", \"mesiace\", \"mesiace\", \"mesiacov\"][\n          getCzechOrSlovakForm(c)\n        ];\n      },\n      function (c) {\n        return [\"týždeň\", \"týždne\", \"týždne\", \"týždňov\"][\n          getCzechOrSlovakForm(c)\n        ];\n      },\n      function (c) {\n        return [\"deň\", \"dni\", \"dni\", \"dní\"][getCzechOrSlovakForm(c)];\n      },\n      function (c) {\n        return [\"hodina\", \"hodiny\", \"hodiny\", \"hodín\"][getCzechOrSlovakForm(c)];\n      },\n      function (c) {\n        return [\"minúta\", \"minúty\", \"minúty\", \"minút\"][getCzechOrSlovakForm(c)];\n      },\n      function (c) {\n        return [\"sekunda\", \"sekundy\", \"sekundy\", \"sekúnd\"][\n          getCzechOrSlovakForm(c)\n        ];\n      },\n      function (c) {\n        return [\"milisekunda\", \"milisekundy\", \"milisekundy\", \"milisekúnd\"][\n          getCzechOrSlovakForm(c)\n        ];\n      },\n      \",\"\n    ),\n    sl: language(\n      function (c) {\n        if (c % 10 === 1) {\n          return \"leto\";\n        } else if (c % 100 === 2) {\n          return \"leti\";\n        } else if (\n          c % 100 === 3 ||\n          c % 100 === 4 ||\n          (Math.floor(c) !== c && c % 100 <= 5)\n        ) {\n          return \"leta\";\n        } else {\n          return \"let\";\n        }\n      },\n      function (c) {\n        if (c % 10 === 1) {\n          return \"mesec\";\n        } else if (c % 100 === 2 || (Math.floor(c) !== c && c % 100 <= 5)) {\n          return \"meseca\";\n        } else if (c % 10 === 3 || c % 10 === 4) {\n          return \"mesece\";\n        } else {\n          return \"mesecev\";\n        }\n      },\n      function (c) {\n        if (c % 10 === 1) {\n          return \"teden\";\n        } else if (c % 10 === 2 || (Math.floor(c) !== c && c % 100 <= 4)) {\n          return \"tedna\";\n        } else if (c % 10 === 3 || c % 10 === 4) {\n          return \"tedne\";\n        } else {\n          return \"tednov\";\n        }\n      },\n      function (c) {\n        return c % 100 === 1 ? \"dan\" : \"dni\";\n      },\n      function (c) {\n        if (c % 10 === 1) {\n          return \"ura\";\n        } else if (c % 100 === 2) {\n          return \"uri\";\n        } else if (c % 10 === 3 || c % 10 === 4 || Math.floor(c) !== c) {\n          return \"ure\";\n        } else {\n          return \"ur\";\n        }\n      },\n      function (c) {\n        if (c % 10 === 1) {\n          return \"minuta\";\n        } else if (c % 10 === 2) {\n          return \"minuti\";\n        } else if (\n          c % 10 === 3 ||\n          c % 10 === 4 ||\n          (Math.floor(c) !== c && c % 100 <= 4)\n        ) {\n          return \"minute\";\n        } else {\n          return \"minut\";\n        }\n      },\n      function (c) {\n        if (c % 10 === 1) {\n          return \"sekunda\";\n        } else if (c % 100 === 2) {\n          return \"sekundi\";\n        } else if (c % 100 === 3 || c % 100 === 4 || Math.floor(c) !== c) {\n          return \"sekunde\";\n        } else {\n          return \"sekund\";\n        }\n      },\n      function (c) {\n        if (c % 10 === 1) {\n          return \"milisekunda\";\n        } else if (c % 100 === 2) {\n          return \"milisekundi\";\n        } else if (c % 100 === 3 || c % 100 === 4 || Math.floor(c) !== c) {\n          return \"milisekunde\";\n        } else {\n          return \"milisekund\";\n        }\n      },\n      \",\"\n    ),\n    sv: language(\n      \"år\",\n      function (c) {\n        return \"månad\" + (c === 1 ? \"\" : \"er\");\n      },\n      function (c) {\n        return \"veck\" + (c === 1 ? \"a\" : \"or\");\n      },\n      function (c) {\n        return \"dag\" + (c === 1 ? \"\" : \"ar\");\n      },\n      function (c) {\n        return \"timm\" + (c === 1 ? \"e\" : \"ar\");\n      },\n      function (c) {\n        return \"minut\" + (c === 1 ? \"\" : \"er\");\n      },\n      function (c) {\n        return \"sekund\" + (c === 1 ? \"\" : \"er\");\n      },\n      function (c) {\n        return \"millisekund\" + (c === 1 ? \"\" : \"er\");\n      },\n      \",\"\n    ),\n    sw: assign(\n      language(\n        function (c) {\n          return c === 1 ? \"mwaka\" : \"miaka\";\n        },\n        function (c) {\n          return c === 1 ? \"mwezi\" : \"miezi\";\n        },\n        \"wiki\",\n        function (c) {\n          return c === 1 ? \"siku\" : \"masiku\";\n        },\n        function (c) {\n          return c === 1 ? \"saa\" : \"masaa\";\n        },\n        \"dakika\",\n        \"sekunde\",\n        \"milisekunde\"\n      ),\n      { _numberFirst: true }\n    ),\n    tr: language(\n      \"yıl\",\n      \"ay\",\n      \"hafta\",\n      \"gün\",\n      \"saat\",\n      \"dakika\",\n      \"saniye\",\n      \"milisaniye\",\n      \",\"\n    ),\n    th: language(\n      \"ปี\",\n      \"เดือน\",\n      \"สัปดาห์\",\n      \"วัน\",\n      \"ชั่วโมง\",\n      \"นาที\",\n      \"วินาที\",\n      \"มิลลิวินาที\"\n    ),\n    uz: language(\n      \"yil\",\n      \"oy\",\n      \"hafta\",\n      \"kun\",\n      \"soat\",\n      \"minut\",\n      \"sekund\",\n      \"millisekund\"\n    ),\n    uz_CYR: language(\n      \"йил\",\n      \"ой\",\n      \"ҳафта\",\n      \"кун\",\n      \"соат\",\n      \"минут\",\n      \"секунд\",\n      \"миллисекунд\"\n    ),\n    vi: language(\n      \"năm\",\n      \"tháng\",\n      \"tuần\",\n      \"ngày\",\n      \"giờ\",\n      \"phút\",\n      \"giây\",\n      \"mili giây\",\n      \",\"\n    ),\n    zh_CN: language(\"年\", \"个月\", \"周\", \"天\", \"小时\", \"分钟\", \"秒\", \"毫秒\"),\n    zh_TW: language(\"年\", \"個月\", \"周\", \"天\", \"小時\", \"分鐘\", \"秒\", \"毫秒\")\n  };\n\n  /**\n   * Helper function for creating language definitions.\n   *\n   * @internal\n   * @param {Unit} y\n   * @param {Unit} mo\n   * @param {Unit} w\n   * @param {Unit} d\n   * @param {Unit} h\n   * @param {Unit} m\n   * @param {Unit} s\n   * @param {Unit} ms\n   * @param {string} [decimal]\n   * @returns {Language}\n   */\n  function language(y, mo, w, d, h, m, s, ms, decimal) {\n    /** @type {Language} */\n    var result = { y: y, mo: mo, w: w, d: d, h: h, m: m, s: s, ms: ms };\n    if (typeof decimal !== \"undefined\") {\n      result.decimal = decimal;\n    }\n    return result;\n  }\n\n  /**\n   * Helper function for Arabic.\n   *\n   * @internal\n   * @param {number} c\n   * @returns {0 | 1 | 2}\n   */\n  function getArabicForm(c) {\n    if (c === 2) {\n      return 1;\n    }\n    if (c > 2 && c < 11) {\n      return 2;\n    }\n    return 0;\n  }\n\n  /**\n   * Helper function for Polish.\n   *\n   * @internal\n   * @param {number} c\n   * @returns {0 | 1 | 2 | 3}\n   */\n  function getPolishForm(c) {\n    if (c === 1) {\n      return 0;\n    }\n    if (Math.floor(c) !== c) {\n      return 1;\n    }\n    if (c % 10 >= 2 && c % 10 <= 4 && !(c % 100 > 10 && c % 100 < 20)) {\n      return 2;\n    }\n    return 3;\n  }\n\n  /**\n   * Helper function for Slavic languages.\n   *\n   * @internal\n   * @param {number} c\n   * @returns {0 | 1 | 2 | 3}\n   */\n  function getSlavicForm(c) {\n    if (Math.floor(c) !== c) {\n      return 2;\n    }\n    if (\n      (c % 100 >= 5 && c % 100 <= 20) ||\n      (c % 10 >= 5 && c % 10 <= 9) ||\n      c % 10 === 0\n    ) {\n      return 0;\n    }\n    if (c % 10 === 1) {\n      return 1;\n    }\n    if (c > 1) {\n      return 2;\n    }\n    return 0;\n  }\n\n  /**\n   * Helper function for Czech or Slovak.\n   *\n   * @internal\n   * @param {number} c\n   * @returns {0 | 1 | 2 | 3}\n   */\n  function getCzechOrSlovakForm(c) {\n    if (c === 1) {\n      return 0;\n    }\n    if (Math.floor(c) !== c) {\n      return 1;\n    }\n    if (c % 10 >= 2 && c % 10 <= 4 && c % 100 < 10) {\n      return 2;\n    }\n    return 3;\n  }\n\n  /**\n   * Helper function for Lithuanian.\n   *\n   * @internal\n   * @param {number} c\n   * @returns {0 | 1 | 2}\n   */\n  function getLithuanianForm(c) {\n    if (c === 1 || (c % 10 === 1 && c % 100 > 20)) {\n      return 0;\n    }\n    if (\n      Math.floor(c) !== c ||\n      (c % 10 >= 2 && c % 100 > 20) ||\n      (c % 10 >= 2 && c % 100 < 10)\n    ) {\n      return 1;\n    }\n    return 2;\n  }\n\n  /**\n   * Helper function for Latvian.\n   *\n   * @internal\n   * @param {number} c\n   * @returns {boolean}\n   */\n  function getLatvianForm(c) {\n    return c % 10 === 1 && c % 100 !== 11;\n  }\n\n  /**\n   * @internal\n   * @template T\n   * @param {T} obj\n   * @param {keyof T} key\n   * @returns {boolean}\n   */\n  function has(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n  }\n\n  /**\n   * @internal\n   * @param {Pick<Required<Options>, \"language\" | \"fallbacks\" | \"languages\">} options\n   * @throws {Error} Throws an error if language is not found.\n   * @returns {Language}\n   */\n  function getLanguage(options) {\n    var possibleLanguages = [options.language];\n\n    if (has(options, \"fallbacks\")) {\n      if (isArray(options.fallbacks) && options.fallbacks.length) {\n        possibleLanguages = possibleLanguages.concat(options.fallbacks);\n      } else {\n        throw new Error(\"fallbacks must be an array with at least one element\");\n      }\n    }\n\n    for (var i = 0; i < possibleLanguages.length; i++) {\n      var languageToTry = possibleLanguages[i];\n      if (has(options.languages, languageToTry)) {\n        return options.languages[languageToTry];\n      }\n      if (has(LANGUAGES, languageToTry)) {\n        return LANGUAGES[languageToTry];\n      }\n    }\n\n    throw new Error(\"No language found.\");\n  }\n\n  /**\n   * @internal\n   * @param {Piece} piece\n   * @param {Language} language\n   * @param {Pick<Required<Options>, \"decimal\" | \"spacer\" | \"maxDecimalPoints\" | \"digitReplacements\">} options\n   */\n  function renderPiece(piece, language, options) {\n    var unitName = piece.unitName;\n    var unitCount = piece.unitCount;\n\n    var spacer = options.spacer;\n    var maxDecimalPoints = options.maxDecimalPoints;\n\n    /** @type {string} */\n    var decimal;\n    if (has(options, \"decimal\")) {\n      decimal = options.decimal;\n    } else if (has(language, \"decimal\")) {\n      decimal = language.decimal;\n    } else {\n      decimal = \".\";\n    }\n\n    /** @type {undefined | DigitReplacements} */\n    var digitReplacements;\n    if (\"digitReplacements\" in options) {\n      digitReplacements = options.digitReplacements;\n    } else if (\"_digitReplacements\" in language) {\n      digitReplacements = language._digitReplacements;\n    }\n\n    /** @type {string} */\n    var formattedCount;\n    var normalizedUnitCount =\n      maxDecimalPoints === void 0\n        ? unitCount\n        : Math.floor(unitCount * Math.pow(10, maxDecimalPoints)) /\n          Math.pow(10, maxDecimalPoints);\n    var countStr = normalizedUnitCount.toString();\n\n    if (language._hideCountIf2 && unitCount === 2) {\n      formattedCount = \"\";\n      spacer = \"\";\n    } else {\n      if (digitReplacements) {\n        formattedCount = \"\";\n        for (var i = 0; i < countStr.length; i++) {\n          var char = countStr[i];\n          if (char === \".\") {\n            formattedCount += decimal;\n          } else {\n            // @ts-ignore because `char` should always be 0-9 at this point.\n            formattedCount += digitReplacements[char];\n          }\n        }\n      } else {\n        formattedCount = countStr.replace(\".\", decimal);\n      }\n    }\n\n    var languageWord = language[unitName];\n    var word;\n    if (typeof languageWord === \"function\") {\n      word = languageWord(unitCount);\n    } else {\n      word = languageWord;\n    }\n\n    if (language._numberFirst) {\n      return word + spacer + formattedCount;\n    }\n    return formattedCount + spacer + word;\n  }\n\n  /**\n   * @internal\n   * @typedef {Object} Piece\n   * @prop {UnitName} unitName\n   * @prop {number} unitCount\n   */\n\n  /**\n   * @internal\n   * @param {number} ms\n   * @param {Pick<Required<Options>, \"units\" | \"unitMeasures\" | \"largest\" | \"round\">} options\n   * @returns {Piece[]}\n   */\n  function getPieces(ms, options) {\n    /** @type {UnitName} */\n    var unitName;\n\n    /** @type {number} */\n    var i;\n\n    /** @type {number} */\n    var unitCount;\n\n    /** @type {number} */\n    var msRemaining;\n\n    var units = options.units;\n    var unitMeasures = options.unitMeasures;\n    var largest = \"largest\" in options ? options.largest : Infinity;\n\n    if (!units.length) return [];\n\n    // Get the counts for each unit. Doesn't round or truncate anything.\n    // For example, might create an object like `{ y: 7, m: 6, w: 0, d: 5, h: 23.99 }`.\n    /** @type {Partial<Record<UnitName, number>>} */\n    var unitCounts = {};\n    msRemaining = ms;\n    for (i = 0; i < units.length; i++) {\n      unitName = units[i];\n      var unitMs = unitMeasures[unitName];\n\n      var isLast = i === units.length - 1;\n      unitCount = isLast\n        ? msRemaining / unitMs\n        : Math.floor(msRemaining / unitMs);\n      unitCounts[unitName] = unitCount;\n\n      msRemaining -= unitCount * unitMs;\n    }\n\n    if (options.round) {\n      // Update counts based on the `largest` option.\n      // For example, if `largest === 2` and `unitCount` is `{ y: 7, m: 6, w: 0, d: 5, h: 23.99 }`,\n      // updates to something like `{ y: 7, m: 6.2 }`.\n      var unitsRemainingBeforeRound = largest;\n      for (i = 0; i < units.length; i++) {\n        unitName = units[i];\n        unitCount = unitCounts[unitName];\n\n        if (unitCount === 0) continue;\n\n        unitsRemainingBeforeRound--;\n\n        // \"Take\" the rest of the units into this one.\n        if (unitsRemainingBeforeRound === 0) {\n          for (var j = i + 1; j < units.length; j++) {\n            var smallerUnitName = units[j];\n            var smallerUnitCount = unitCounts[smallerUnitName];\n            unitCounts[unitName] +=\n              (smallerUnitCount * unitMeasures[smallerUnitName]) /\n              unitMeasures[unitName];\n            unitCounts[smallerUnitName] = 0;\n          }\n          break;\n        }\n      }\n\n      // Round the last piece (which should be the only non-integer).\n      //\n      // This can be a little tricky if the last piece \"bubbles up\" to a larger\n      // unit. For example, \"3 days, 23.99 hours\" should be rounded to \"4 days\".\n      // It can also require multiple passes. For example, \"6 days, 23.99 hours\"\n      // should become \"1 week\".\n      for (i = units.length - 1; i >= 0; i--) {\n        unitName = units[i];\n        unitCount = unitCounts[unitName];\n\n        if (unitCount === 0) continue;\n\n        var rounded = Math.round(unitCount);\n        unitCounts[unitName] = rounded;\n\n        if (i === 0) break;\n\n        var previousUnitName = units[i - 1];\n        var previousUnitMs = unitMeasures[previousUnitName];\n        var amountOfPreviousUnit = Math.floor(\n          (rounded * unitMeasures[unitName]) / previousUnitMs\n        );\n        if (amountOfPreviousUnit) {\n          unitCounts[previousUnitName] += amountOfPreviousUnit;\n          unitCounts[unitName] = 0;\n        } else {\n          break;\n        }\n      }\n    }\n\n    /** @type {Piece[]} */\n    var result = [];\n    for (i = 0; i < units.length && result.length < largest; i++) {\n      unitName = units[i];\n      unitCount = unitCounts[unitName];\n      if (unitCount) {\n        result.push({ unitName: unitName, unitCount: unitCount });\n      }\n    }\n    return result;\n  }\n\n  /**\n   * @internal\n   * @param {Piece[]} pieces\n   * @param {Pick<Required<Options>, \"units\" | \"language\" | \"languages\" | \"fallbacks\" | \"delimiter\" | \"spacer\" | \"decimal\" | \"conjunction\" | \"maxDecimalPoints\" | \"serialComma\" | \"digitReplacements\">} options\n   * @returns {string}\n   */\n  function formatPieces(pieces, options) {\n    var language = getLanguage(options);\n\n    if (!pieces.length) {\n      var units = options.units;\n      var smallestUnitName = units[units.length - 1];\n      return renderPiece(\n        { unitName: smallestUnitName, unitCount: 0 },\n        language,\n        options\n      );\n    }\n\n    var conjunction = options.conjunction;\n    var serialComma = options.serialComma;\n\n    var delimiter;\n    if (has(options, \"delimiter\")) {\n      delimiter = options.delimiter;\n    } else if (has(language, \"delimiter\")) {\n      delimiter = language.delimiter;\n    } else {\n      delimiter = \", \";\n    }\n\n    /** @type {string[]} */\n    var renderedPieces = [];\n    for (var i = 0; i < pieces.length; i++) {\n      renderedPieces.push(renderPiece(pieces[i], language, options));\n    }\n\n    if (!conjunction || pieces.length === 1) {\n      return renderedPieces.join(delimiter);\n    }\n\n    if (pieces.length === 2) {\n      return renderedPieces.join(conjunction);\n    }\n\n    return (\n      renderedPieces.slice(0, -1).join(delimiter) +\n      (serialComma ? \",\" : \"\") +\n      conjunction +\n      renderedPieces.slice(-1)\n    );\n  }\n\n  /**\n   * Create a humanizer, which lets you change the default options.\n   *\n   * @param {Options} [passedOptions]\n   */\n  function humanizer(passedOptions) {\n    /**\n     * @param {number} ms\n     * @param {Options} [humanizerOptions]\n     * @returns {string}\n     */\n    var result = function humanizer(ms, humanizerOptions) {\n      // Make sure we have a positive number.\n      //\n      // Has the nice side-effect of converting things to numbers. For example,\n      // converts `\"123\"` and `Number(123)` to `123`.\n      ms = Math.abs(ms);\n\n      var options = assign({}, result, humanizerOptions || {});\n\n      var pieces = getPieces(ms, options);\n\n      return formatPieces(pieces, options);\n    };\n\n    return assign(\n      result,\n      {\n        language: \"en\",\n        spacer: \" \",\n        conjunction: \"\",\n        serialComma: true,\n        units: [\"y\", \"mo\", \"w\", \"d\", \"h\", \"m\", \"s\"],\n        languages: {},\n        round: false,\n        unitMeasures: {\n          y: 31557600000,\n          mo: 2629800000,\n          w: 604800000,\n          d: 86400000,\n          h: 3600000,\n          m: 60000,\n          s: 1000,\n          ms: 1\n        }\n      },\n      passedOptions\n    );\n  }\n\n  /**\n   * Humanize a duration.\n   *\n   * This is a wrapper around the default humanizer.\n   */\n  var humanizeDuration = assign(humanizer({}), {\n    getSupportedLanguages: function getSupportedLanguages() {\n      var result = [];\n      for (var language in LANGUAGES) {\n        if (has(LANGUAGES, language) && language !== \"gr\") {\n          result.push(language);\n        }\n      }\n      return result;\n    },\n    humanizer: humanizer\n  });\n\n  // @ts-ignore\n  if (typeof define === \"function\" && define.amd) {\n    // @ts-ignore\n    define(function () {\n      return humanizeDuration;\n    });\n  } else if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = humanizeDuration;\n  } else {\n    this.humanizeDuration = humanizeDuration;\n  }\n})();\n","var isEqual = require('lodash/isEqual')\nvar sortBy = require('lodash/sortBy')\nvar uniq = require('lodash/uniq')\nvar uniqWith = require('lodash/uniqWith')\nvar defaults = require('lodash/defaults')\nvar intersectionWith = require('lodash/intersectionWith')\nvar isPlainObject = require('lodash/isPlainObject')\nvar isBoolean = require('lodash/isBoolean')\n\nvar normalizeArray = val => Array.isArray(val)\n  ? val : [val]\nvar undef = val => val === undefined\nvar keys = obj => isPlainObject(obj) || Array.isArray(obj) ? Object.keys(obj) : []\nvar has = (obj, key) => obj.hasOwnProperty(key)\nvar stringArray = arr => sortBy(uniq(arr))\nvar undefEmpty = val => undef(val) || (Array.isArray(val) && val.length === 0)\nvar keyValEqual = (a, b, key, compare) => b && has(b, key) && a && has(a, key) && compare(a[key], b[key])\nvar undefAndZero = (a, b) => (undef(a) && b === 0) || (undef(b) && a === 0) || isEqual(a, b)\nvar falseUndefined = (a, b) => (undef(a) && b === false) || (undef(b) && a === false) || isEqual(a, b)\nvar emptySchema = schema => undef(schema) || isEqual(schema, {}) || schema === true\nvar emptyObjUndef = schema => undef(schema) || isEqual(schema, {})\nvar isSchema = val => undef(val) || isPlainObject(val) || val === true || val === false\n\nfunction undefArrayEqual(a, b) {\n  if (undefEmpty(a) && undefEmpty(b)) {\n    return true\n  } else {\n    return isEqual(stringArray(a), stringArray(b))\n  }\n}\n\nfunction unsortedNormalizedArray(a, b) {\n  a = normalizeArray(a)\n  b = normalizeArray(b)\n  return isEqual(stringArray(a), stringArray(b))\n}\n\nfunction schemaGroup(a, b, key, compare) {\n  var allProps = uniq(keys(a).concat(keys(b)))\n  if (emptyObjUndef(a) && emptyObjUndef(b)) {\n    return true\n  } else if (emptyObjUndef(a) && keys(b).length) {\n    return false\n  } else if (emptyObjUndef(b) && keys(a).length) {\n    return false\n  }\n\n  return allProps.every(function(key) {\n    var aVal = a[key]\n    var bVal = b[key]\n    if (Array.isArray(aVal) && Array.isArray(bVal)) {\n      return isEqual(stringArray(a), stringArray(b))\n    } else if (Array.isArray(aVal) && !Array.isArray(bVal)) {\n      return false\n    } else if (Array.isArray(bVal) && !Array.isArray(aVal)) {\n      return false\n    }\n    return keyValEqual(a, b, key, compare)\n  })\n}\n\nfunction items(a, b, key, compare) {\n  if (isPlainObject(a) && isPlainObject(b)) {\n    return compare(a, b)\n  } else if (Array.isArray(a) && Array.isArray(b)) {\n    return schemaGroup(a, b, key, compare)\n  } else {\n    return isEqual(a, b)\n  }\n}\n\nfunction unsortedArray(a, b, key, compare) {\n  var uniqueA = uniqWith(a, compare)\n  var uniqueB = uniqWith(b, compare)\n  var inter = intersectionWith(uniqueA, uniqueB, compare)\n  return inter.length === Math.max(uniqueA.length, uniqueB.length)\n}\n\nvar comparers = {\n  title: isEqual,\n  uniqueItems: falseUndefined,\n  minLength: undefAndZero,\n  minItems: undefAndZero,\n  minProperties: undefAndZero,\n  required: undefArrayEqual,\n  enum: undefArrayEqual,\n  type: unsortedNormalizedArray,\n  items: items,\n  anyOf: unsortedArray,\n  allOf: unsortedArray,\n  oneOf: unsortedArray,\n  properties: schemaGroup,\n  patternProperties: schemaGroup,\n  dependencies: schemaGroup\n}\n\nvar acceptsUndefined = [\n  'properties',\n  'patternProperties',\n  'dependencies',\n  'uniqueItems',\n  'minLength',\n  'minItems',\n  'minProperties',\n  'required'\n]\n\nvar schemaProps = ['additionalProperties', 'additionalItems', 'contains', 'propertyNames', 'not']\n\nfunction compare(a, b, options) {\n  options = defaults(options, {\n    ignore: []\n  })\n\n  if (emptySchema(a) && emptySchema(b)) {\n    return true\n  }\n\n  if (!isSchema(a) || !isSchema(b)) {\n    throw new Error('Either of the values are not a JSON schema.')\n  }\n  if (a === b) {\n    return true\n  }\n\n  if (isBoolean(a) && isBoolean(b)) {\n    return a === b\n  }\n\n  if ((a === undefined && b === false) || (b === undefined && a === false)) {\n    return false\n  }\n\n  if ((undef(a) && !undef(b)) || (!undef(a) && undef(b))) {\n    return false\n  }\n\n  var allKeys = uniq(Object.keys(a).concat(Object.keys(b)))\n\n  if (options.ignore.length) {\n    allKeys = allKeys.filter(k => options.ignore.indexOf(k) === -1)\n  }\n\n  if (!allKeys.length) {\n    return true\n  }\n\n  function innerCompare(a, b) {\n    return compare(a, b, options)\n  }\n\n  return allKeys.every(function(key) {\n    var aValue = a[key]\n    var bValue = b[key]\n\n    if (schemaProps.indexOf(key) !== -1) {\n      return compare(aValue, bValue, options)\n    }\n\n    var comparer = comparers[key]\n    if (!comparer) {\n      comparer = isEqual\n    }\n\n    // do simple lodash check first\n    if (isEqual(aValue, bValue)) {\n      return true\n    }\n\n    if (acceptsUndefined.indexOf(key) === -1) {\n      if ((!has(a, key) && has(b, key)) || (has(a, key) && !has(b, key))) {\n        return aValue === bValue\n      }\n    }\n\n    var result = comparer(aValue, bValue, key, innerCompare)\n    if (!isBoolean(result)) {\n      throw new Error('Comparer must return true or false')\n    }\n    return result\n  })\n}\n\nmodule.exports = compare\n","const flatten = require('lodash/flatten')\nconst flattenDeep = require('lodash/flattenDeep')\nconst isPlainObject = require('lodash/isPlainObject')\nconst uniq = require('lodash/uniq')\nconst uniqWith = require('lodash/uniqWith')\nconst without = require('lodash/without')\n\nfunction deleteUndefinedProps(returnObject) {\n  // cleanup empty\n  for (const prop in returnObject) {\n    if (has(returnObject, prop) && isEmptySchema(returnObject[prop])) {\n      delete returnObject[prop]\n    }\n  }\n  return returnObject\n}\n\nconst allUniqueKeys = (arr) => uniq(flattenDeep(arr.map(keys)))\nconst getValues = (schemas, key) => schemas.map(schema => schema && schema[key])\nconst has = (obj, propName) => Object.prototype.hasOwnProperty.call(obj, propName)\nconst keys = obj => {\n  if (isPlainObject(obj) || Array.isArray(obj)) {\n    return Object.keys(obj)\n  } else {\n    return []\n  }\n}\n\nconst notUndefined = (val) => val !== undefined\nconst isSchema = (val) => isPlainObject(val) || val === true || val === false\nconst isEmptySchema = (obj) => (!keys(obj).length) && obj !== false && obj !== true\nconst withoutArr = (arr, ...rest) => without.apply(null, [arr].concat(flatten(rest)))\n\nmodule.exports = {\n  allUniqueKeys,\n  deleteUndefinedProps,\n  getValues,\n  has,\n  isEmptySchema,\n  isSchema,\n  keys,\n  notUndefined,\n  uniqWith,\n  withoutArr\n}\n","\nconst compare = require('json-schema-compare')\nconst forEach = require('lodash/forEach')\nconst {\n  allUniqueKeys,\n  deleteUndefinedProps,\n  has,\n  isSchema,\n  notUndefined,\n  uniqWith\n} = require('../common')\n\nfunction removeFalseSchemasFromArray(target) {\n  forEach(target, function(schema, index) {\n    if (schema === false) {\n      target.splice(index, 1)\n    }\n  })\n}\n\nfunction getItemSchemas(subSchemas, key) {\n  return subSchemas.map(function(sub) {\n    if (!sub) {\n      return undefined\n    }\n\n    if (Array.isArray(sub.items)) {\n      const schemaAtPos = sub.items[key]\n      if (isSchema(schemaAtPos)) {\n        return schemaAtPos\n      } else if (has(sub, 'additionalItems')) {\n        return sub.additionalItems\n      }\n    } else {\n      return sub.items\n    }\n\n    return undefined\n  })\n}\n\nfunction getAdditionalSchemas(subSchemas) {\n  return subSchemas.map(function(sub) {\n    if (!sub) {\n      return undefined\n    }\n    if (Array.isArray(sub.items)) {\n      return sub.additionalItems\n    }\n    return sub.items\n  })\n}\n\n// Provide source when array\nfunction mergeItems(group, mergeSchemas, items) {\n  const allKeys = allUniqueKeys(items)\n  return allKeys.reduce(function(all, key) {\n    const schemas = getItemSchemas(group, key)\n    const compacted = uniqWith(schemas.filter(notUndefined), compare)\n    all[key] = mergeSchemas(compacted, key)\n    return all\n  }, [])\n}\n\nmodule.exports = {\n  keywords: ['items', 'additionalItems'],\n  resolver(values, parents, mergers) {\n    // const createSubMerger = groupKey => (schemas, key) => mergeSchemas(schemas, parents.concat(groupKey, key))\n    const items = values.map(s => s.items)\n    const itemsCompacted = items.filter(notUndefined)\n    const returnObject = {}\n\n    // if all items keyword values are schemas, we can merge them as simple schemas\n    // if not we need to merge them as mixed\n    if (itemsCompacted.every(isSchema)) {\n      returnObject.items = mergers.items(items)\n    } else {\n      returnObject.items = mergeItems(values, mergers.items, items)\n    }\n\n    let schemasAtLastPos\n    if (itemsCompacted.every(Array.isArray)) {\n      schemasAtLastPos = values.map(s => s.additionalItems)\n    } else if (itemsCompacted.some(Array.isArray)) {\n      schemasAtLastPos = getAdditionalSchemas(values)\n    }\n\n    if (schemasAtLastPos) {\n      returnObject.additionalItems = mergers.additionalItems(schemasAtLastPos)\n    }\n\n    if (returnObject.additionalItems === false && Array.isArray(returnObject.items)) {\n      removeFalseSchemasFromArray(returnObject.items)\n    }\n\n    return deleteUndefinedProps(returnObject)\n  }\n}\n","\nconst compare = require('json-schema-compare')\nconst forEach = require('lodash/forEach')\nconst {\n  allUniqueKeys,\n  deleteUndefinedProps,\n  getValues,\n  keys,\n  notUndefined,\n  uniqWith,\n  withoutArr\n} = require('../common')\n\nfunction removeFalseSchemas(target) {\n  forEach(target, function(schema, prop) {\n    if (schema === false) {\n      delete target[prop]\n    }\n  })\n}\n\nfunction mergeSchemaGroup(group, mergeSchemas) {\n  const allKeys = allUniqueKeys(group)\n  return allKeys.reduce(function(all, key) {\n    const schemas = getValues(group, key)\n    const compacted = uniqWith(schemas.filter(notUndefined), compare)\n    all[key] = mergeSchemas(compacted, key)\n    return all\n  }, {})\n}\n\nmodule.exports = {\n  keywords: ['properties', 'patternProperties', 'additionalProperties'],\n  resolver(values, parents, mergers, options) {\n    // first get rid of all non permitted properties\n    if (!options.ignoreAdditionalProperties) {\n      values.forEach(function(subSchema) {\n        const otherSubSchemas = values.filter(s => s !== subSchema)\n        const ownKeys = keys(subSchema.properties)\n        const ownPatternKeys = keys(subSchema.patternProperties)\n        const ownPatterns = ownPatternKeys.map(k => new RegExp(k))\n        otherSubSchemas.forEach(function(other) {\n          const allOtherKeys = keys(other.properties)\n          const keysMatchingPattern = allOtherKeys.filter(k => ownPatterns.some(pk => pk.test(k)))\n          const additionalKeys = withoutArr(allOtherKeys, ownKeys, keysMatchingPattern)\n          additionalKeys.forEach(function(key) {\n            other.properties[key] = mergers.properties([\n              other.properties[key], subSchema.additionalProperties\n            ], key)\n          })\n        })\n      })\n\n      // remove disallowed patternProperties\n      values.forEach(function(subSchema) {\n        const otherSubSchemas = values.filter(s => s !== subSchema)\n        const ownPatternKeys = keys(subSchema.patternProperties)\n        if (subSchema.additionalProperties === false) {\n          otherSubSchemas.forEach(function(other) {\n            const allOtherPatterns = keys(other.patternProperties)\n            const additionalPatternKeys = withoutArr(allOtherPatterns, ownPatternKeys)\n            additionalPatternKeys.forEach(key => delete other.patternProperties[key])\n          })\n        }\n      })\n    }\n\n    const returnObject = {\n      additionalProperties: mergers.additionalProperties(values.map(s => s.additionalProperties)),\n      patternProperties: mergeSchemaGroup(values.map(s => s.patternProperties), mergers.patternProperties),\n      properties: mergeSchemaGroup(values.map(s => s.properties), mergers.properties)\n    }\n\n    if (returnObject.additionalProperties === false) {\n      removeFalseSchemas(returnObject.properties)\n    }\n\n    return deleteUndefinedProps(returnObject)\n  }\n}\n","const cloneDeep = require('lodash/cloneDeep')\nconst compare = require('json-schema-compare')\nconst computeLcm = require('compute-lcm')\nconst defaultsDeep = require('lodash/defaultsDeep')\nconst flatten = require('lodash/flatten')\nconst flattenDeep = require('lodash/flattenDeep')\nconst intersection = require('lodash/intersection')\nconst intersectionWith = require('lodash/intersectionWith')\nconst isEqual = require('lodash/isEqual')\nconst isPlainObject = require('lodash/isPlainObject')\nconst pullAll = require('lodash/pullAll')\nconst sortBy = require('lodash/sortBy')\nconst uniq = require('lodash/uniq')\nconst uniqWith = require('lodash/uniqWith')\n\nconst propertiesResolver = require('./complex-resolvers/properties')\nconst itemsResolver = require('./complex-resolvers/items')\n\nconst contains = (arr, val) => arr.indexOf(val) !== -1\nconst isSchema = (val) => isPlainObject(val) || val === true || val === false\nconst isFalse = (val) => val === false\nconst isTrue = (val) => val === true\nconst schemaResolver = (compacted, key, mergeSchemas) => mergeSchemas(compacted)\nconst stringArray = (values) => sortBy(uniq(flattenDeep(values)))\nconst notUndefined = (val) => val !== undefined\nconst allUniqueKeys = (arr) => uniq(flattenDeep(arr.map(keys)))\n\n// resolvers\nconst first = compacted => compacted[0]\nconst required = compacted => stringArray(compacted)\nconst maximumValue = compacted => Math.max.apply(Math, compacted)\nconst minimumValue = compacted => Math.min.apply(Math, compacted)\nconst uniqueItems = compacted => compacted.some(isTrue)\nconst examples = compacted => uniqWith(flatten(compacted), isEqual)\n\nfunction compareProp(key) {\n  return function(a, b) {\n    return compare({\n      [key]: a\n    }, { [key]: b })\n  }\n}\n\nfunction getAllOf(schema) {\n  let { allOf = [], ...copy } = schema\n  copy = isPlainObject(schema) ? copy : schema // if schema is boolean\n  return [copy, ...allOf.map(getAllOf)]\n}\n\nfunction getValues(schemas, key) {\n  return schemas.map(schema => schema && schema[key])\n}\n\nfunction tryMergeSchemaGroups(schemaGroups, mergeSchemas) {\n  return schemaGroups.map(function(schemas, index) {\n    try {\n      return mergeSchemas(schemas, index)\n    } catch (e) {\n      return undefined\n    }\n  }).filter(notUndefined)\n}\n\nfunction keys(obj) {\n  if (isPlainObject(obj) || Array.isArray(obj)) {\n    return Object.keys(obj)\n  } else {\n    return []\n  }\n}\n\nfunction getAnyOfCombinations(arrOfArrays, combinations) {\n  combinations = combinations || []\n  if (!arrOfArrays.length) {\n    return combinations\n  }\n\n  const values = arrOfArrays.slice(0).shift()\n  const rest = arrOfArrays.slice(1)\n  if (combinations.length) {\n    return getAnyOfCombinations(rest, flatten(combinations.map(combination => values.map(item => ([item].concat(combination))))))\n  }\n  return getAnyOfCombinations(rest, values.map(item => (item)))\n}\n\nfunction throwIncompatible(values, paths) {\n  let asJSON\n  try {\n    asJSON = values.map(function(val) {\n      return JSON.stringify(val, null, 2)\n    }).join('\\n')\n  } catch (variable) {\n    asJSON = values.join(', ')\n  }\n  throw new Error('Could not resolve values for path:\"' + paths.join('.') + '\". They are probably incompatible. Values: \\n' + asJSON)\n}\n\nfunction callGroupResolver(complexKeywords, resolverName, schemas, mergeSchemas, options, parents) {\n  if (complexKeywords.length) {\n    const resolverConfig = options.complexResolvers[resolverName]\n    if (!resolverConfig || !resolverConfig.resolver) {\n      throw new Error('No resolver found for ' + resolverName)\n    }\n\n    // extract all keywords from all the schemas that have one or more\n    // then remove all undefined ones and not unique\n    const extractedKeywordsOnly = schemas.map(schema => complexKeywords.reduce((all, key) => {\n      if (schema[key] !== undefined) all[key] = schema[key]\n      return all\n    }, {}))\n    const unique = uniqWith(extractedKeywordsOnly, compare)\n\n    // create mergers that automatically add the path of the keyword for use in the complex resolver\n    const mergers = resolverConfig.keywords.reduce((all, key) => ({\n      ...all,\n      [key]: (schemas, extraKey = []) => mergeSchemas(schemas, null, parents.concat(key, extraKey))\n    }), {})\n\n    const result = resolverConfig.resolver(unique, parents.concat(resolverName), mergers, options)\n\n    if (!isPlainObject(result)) {\n      throwIncompatible(unique, parents.concat(resolverName))\n    }\n\n    return result\n  }\n}\n\nfunction createRequiredMetaArray(arr) {\n  return { required: arr }\n}\n\nconst schemaGroupProps = ['properties', 'patternProperties', 'definitions', 'dependencies']\nconst schemaArrays = ['anyOf', 'oneOf']\nconst schemaProps = [\n  'additionalProperties',\n  'additionalItems',\n  'contains',\n  'propertyNames',\n  'not',\n  'items'\n]\n\nconst defaultResolvers = {\n  type(compacted) {\n    if (compacted.some(Array.isArray)) {\n      const normalized = compacted.map(function(val) {\n        return Array.isArray(val)\n          ? val\n          : [val]\n      })\n      const common = intersection.apply(null, normalized)\n\n      if (common.length === 1) {\n        return common[0]\n      } else if (common.length > 1) {\n        return uniq(common)\n      }\n    }\n  },\n  dependencies(compacted, paths, mergeSchemas) {\n    const allChildren = allUniqueKeys(compacted)\n\n    return allChildren.reduce(function(all, childKey) {\n      const childSchemas = getValues(compacted, childKey)\n      let innerCompacted = uniqWith(childSchemas.filter(notUndefined), isEqual)\n\n      // to support dependencies\n      const innerArrays = innerCompacted.filter(Array.isArray)\n\n      if (innerArrays.length) {\n        if (innerArrays.length === innerCompacted.length) {\n          all[childKey] = stringArray(innerCompacted)\n        } else {\n          const innerSchemas = innerCompacted.filter(isSchema)\n          const arrayMetaScheams = innerArrays.map(createRequiredMetaArray)\n          all[childKey] = mergeSchemas(innerSchemas.concat(arrayMetaScheams), childKey)\n        }\n        return all\n      }\n\n      innerCompacted = uniqWith(innerCompacted, compare)\n\n      all[childKey] = mergeSchemas(innerCompacted, childKey)\n      return all\n    }, {})\n  },\n  oneOf(compacted, paths, mergeSchemas) {\n    const combinations = getAnyOfCombinations(cloneDeep(compacted))\n    const result = tryMergeSchemaGroups(combinations, mergeSchemas)\n    const unique = uniqWith(result, compare)\n\n    if (unique.length) {\n      return unique\n    }\n  },\n  not(compacted) {\n    return { anyOf: compacted }\n  },\n  pattern(compacted) {\n    return compacted.map(r => '(?=' + r + ')').join('')\n  },\n  multipleOf(compacted) {\n    let integers = compacted.slice(0)\n    let factor = 1\n    while (integers.some(n => !Number.isInteger(n))) {\n      integers = integers.map(n => n * 10)\n      factor = factor * 10\n    }\n    return computeLcm(integers) / factor\n  },\n  enum(compacted) {\n    const enums = intersectionWith.apply(null, compacted.concat(isEqual))\n    if (enums.length) {\n      return sortBy(enums)\n    }\n  }\n}\n\ndefaultResolvers.$id = first\ndefaultResolvers.$ref = first\ndefaultResolvers.$schema = first\ndefaultResolvers.additionalItems = schemaResolver\ndefaultResolvers.additionalProperties = schemaResolver\ndefaultResolvers.anyOf = defaultResolvers.oneOf\ndefaultResolvers.contains = schemaResolver\ndefaultResolvers.default = first\ndefaultResolvers.definitions = defaultResolvers.dependencies\ndefaultResolvers.description = first\ndefaultResolvers.examples = examples\ndefaultResolvers.exclusiveMaximum = minimumValue\ndefaultResolvers.exclusiveMinimum = maximumValue\ndefaultResolvers.items = itemsResolver\ndefaultResolvers.maximum = minimumValue\ndefaultResolvers.maxItems = minimumValue\ndefaultResolvers.maxLength = minimumValue\ndefaultResolvers.maxProperties = minimumValue\ndefaultResolvers.minimum = maximumValue\ndefaultResolvers.minItems = maximumValue\ndefaultResolvers.minLength = maximumValue\ndefaultResolvers.minProperties = maximumValue\ndefaultResolvers.properties = propertiesResolver\ndefaultResolvers.propertyNames = schemaResolver\ndefaultResolvers.required = required\ndefaultResolvers.title = first\ndefaultResolvers.uniqueItems = uniqueItems\n\nconst defaultComplexResolvers = {\n  properties: propertiesResolver,\n  items: itemsResolver\n}\n\nfunction merger(rootSchema, options, totalSchemas) {\n  totalSchemas = totalSchemas || []\n  options = defaultsDeep(options, {\n    ignoreAdditionalProperties: false,\n    resolvers: defaultResolvers,\n    complexResolvers: defaultComplexResolvers,\n    deep: true\n  })\n\n  const complexResolvers = Object.entries(options.complexResolvers)\n\n  function mergeSchemas(schemas, base, parents) {\n    schemas = cloneDeep(schemas.filter(notUndefined))\n    parents = parents || []\n    const merged = isPlainObject(base)\n      ? base\n      : {}\n\n    // return undefined, an empty schema\n    if (!schemas.length) {\n      return\n    }\n\n    if (schemas.some(isFalse)) {\n      return false\n    }\n\n    if (schemas.every(isTrue)) {\n      return true\n    }\n\n    // there are no false and we don't need the true ones as they accept everything\n    schemas = schemas.filter(isPlainObject)\n\n    const allKeys = allUniqueKeys(schemas)\n    if (options.deep && contains(allKeys, 'allOf')) {\n      return merger({\n        allOf: schemas\n      }, options, totalSchemas)\n    }\n\n    const complexKeysArr = complexResolvers.map(([mainKeyWord, resolverConf]) =>\n      allKeys.filter(k => resolverConf.keywords.includes(k)))\n\n    // remove all complex keys before simple resolvers\n    complexKeysArr.forEach(keys => pullAll(allKeys, keys))\n\n    // call all simple resolvers for relevant keywords\n    allKeys.forEach(function(key) {\n      const values = getValues(schemas, key)\n      const compacted = uniqWith(values.filter(notUndefined), compareProp(key))\n\n      // arrayprops like anyOf and oneOf must be merged first, as they contains schemas\n      // allOf is treated differently alltogether\n      if (compacted.length === 1 && contains(schemaArrays, key)) {\n        merged[key] = compacted[0].map(schema => mergeSchemas([schema], schema))\n        // prop groups must always be resolved\n      } else if (compacted.length === 1 && !contains(schemaGroupProps, key) && !contains(schemaProps, key)) {\n        merged[key] = compacted[0]\n      } else {\n        const resolver = options.resolvers[key] || options.resolvers.defaultResolver\n        if (!resolver) throw new Error('No resolver found for key ' + key + '. You can provide a resolver for this keyword in the options, or provide a default resolver.')\n\n        const merger = (schemas, extraKey = []) => mergeSchemas(schemas, null, parents.concat(key, extraKey))\n        merged[key] = resolver(compacted, parents.concat(key), merger, options)\n\n        if (merged[key] === undefined) {\n          throwIncompatible(compacted, parents.concat(key))\n        } else if (merged[key] === undefined) {\n          delete merged[key]\n        }\n      }\n    })\n\n    return complexResolvers.reduce((all, [resolverKeyword, config], index) => ({\n      ...all,\n      ...callGroupResolver(complexKeysArr[index], resolverKeyword, schemas, mergeSchemas, options, parents)\n    }), merged)\n  }\n\n  const allSchemas = flattenDeep(getAllOf(rootSchema))\n  const merged = mergeSchemas(allSchemas)\n\n  return merged\n}\n\nmerger.options = {\n  resolvers: defaultResolvers\n}\n\nmodule.exports = merger\n","var hasExcape = /~/\nvar escapeMatcher = /~[01]/g\nfunction escapeReplacer (m) {\n  switch (m) {\n    case '~1': return '/'\n    case '~0': return '~'\n  }\n  throw new Error('Invalid tilde escape: ' + m)\n}\n\nfunction untilde (str) {\n  if (!hasExcape.test(str)) return str\n  return str.replace(escapeMatcher, escapeReplacer)\n}\n\nfunction setter (obj, pointer, value) {\n  var part\n  var hasNextPart\n\n  for (var p = 1, len = pointer.length; p < len;) {\n    if (pointer[p] === 'constructor' || pointer[p] === 'prototype' || pointer[p] === '__proto__') return obj\n\n    part = untilde(pointer[p++])\n    hasNextPart = len > p\n\n    if (typeof obj[part] === 'undefined') {\n      // support setting of /-\n      if (Array.isArray(obj) && part === '-') {\n        part = obj.length\n      }\n\n      // support nested objects/array when setting values\n      if (hasNextPart) {\n        if ((pointer[p] !== '' && pointer[p] < Infinity) || pointer[p] === '-') obj[part] = []\n        else obj[part] = {}\n      }\n    }\n\n    if (!hasNextPart) break\n    obj = obj[part]\n  }\n\n  var oldValue = obj[part]\n  if (value === undefined) delete obj[part]\n  else obj[part] = value\n  return oldValue\n}\n\nfunction compilePointer (pointer) {\n  if (typeof pointer === 'string') {\n    pointer = pointer.split('/')\n    if (pointer[0] === '') return pointer\n    throw new Error('Invalid JSON pointer.')\n  } else if (Array.isArray(pointer)) {\n    for (const part of pointer) {\n      if (typeof part !== 'string' && typeof part !== 'number') {\n        throw new Error('Invalid JSON pointer. Must be of type string or number.')\n      }\n    }\n    return pointer\n  }\n\n  throw new Error('Invalid JSON pointer.')\n}\n\nfunction get (obj, pointer) {\n  if (typeof obj !== 'object') throw new Error('Invalid input object.')\n  pointer = compilePointer(pointer)\n  var len = pointer.length\n  if (len === 1) return obj\n\n  for (var p = 1; p < len;) {\n    obj = obj[untilde(pointer[p++])]\n    if (len === p) return obj\n    if (typeof obj !== 'object' || obj === null) return undefined\n  }\n}\n\nfunction set (obj, pointer, value) {\n  if (typeof obj !== 'object') throw new Error('Invalid input object.')\n  pointer = compilePointer(pointer)\n  if (pointer.length === 0) throw new Error('Invalid JSON pointer for set.')\n  return setter(obj, pointer, value)\n}\n\nfunction compile (pointer) {\n  var compiled = compilePointer(pointer)\n  return {\n    get: function (object) {\n      return get(object, compiled)\n    },\n    set: function (object, value) {\n      return set(object, compiled, value)\n    }\n  }\n}\n\nexports.get = get\nexports.set = set\nexports.compile = compile\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","/**\n * This function is like `baseIndexOf` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOfWith(array, value, fromIndex, comparator) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(array[index], value)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseIndexOfWith;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseIntersection;\n","var arrayMap = require('./_arrayMap'),\n    baseIndexOf = require('./_baseIndexOf'),\n    baseIndexOfWith = require('./_baseIndexOfWith'),\n    baseUnary = require('./_baseUnary'),\n    copyArray = require('./_copyArray');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAllBy` without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAll(array, values, iteratee, comparator) {\n  var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n      index = -1,\n      length = values.length,\n      seen = array;\n\n  if (array === values) {\n    values = copyArray(values);\n  }\n  if (iteratee) {\n    seen = arrayMap(array, baseUnary(iteratee));\n  }\n  while (++index < length) {\n    var fromIndex = 0,\n        value = values[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n      if (seen !== array) {\n        splice.call(seen, fromIndex, 1);\n      }\n      splice.call(array, fromIndex, 1);\n    }\n  }\n  return array;\n}\n\nmodule.exports = basePullAll;\n","var isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nmodule.exports = castArrayLikeObject;\n","var baseMerge = require('./_baseMerge'),\n    isObject = require('./isObject');\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nmodule.exports = customDefaultsMerge;\n","var apply = require('./_apply'),\n    baseRest = require('./_baseRest'),\n    customDefaultsMerge = require('./_customDefaultsMerge'),\n    mergeWith = require('./mergeWith');\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nmodule.exports = defaultsDeep;\n","var baseFlatten = require('./_baseFlatten');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Recursively flattens `array`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flattenDeep([1, [2, [3, [4]], 5]]);\n * // => [1, 2, 3, 4, 5]\n */\nfunction flattenDeep(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, INFINITY) : [];\n}\n\nmodule.exports = flattenDeep;\n","var arrayMap = require('./_arrayMap'),\n    baseIntersection = require('./_baseIntersection'),\n    baseRest = require('./_baseRest'),\n    castArrayLikeObject = require('./_castArrayLikeObject');\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nmodule.exports = intersection;\n","var arrayMap = require('./_arrayMap'),\n    baseIntersection = require('./_baseIntersection'),\n    baseRest = require('./_baseRest'),\n    castArrayLikeObject = require('./_castArrayLikeObject'),\n    last = require('./last');\n\n/**\n * This method is like `_.intersection` except that it accepts `comparator`\n * which is invoked to compare elements of `arrays`. The order and references\n * of result values are determined by the first array. The comparator is\n * invoked with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.intersectionWith(objects, others, _.isEqual);\n * // => [{ 'x': 1, 'y': 2 }]\n */\nvar intersectionWith = baseRest(function(arrays) {\n  var comparator = last(arrays),\n      mapped = arrayMap(arrays, castArrayLikeObject);\n\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  if (comparator) {\n    mapped.pop();\n  }\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped, undefined, comparator)\n    : [];\n});\n\nmodule.exports = intersectionWith;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * This method is like `_.isEqual` except that it accepts `customizer` which\n * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n * are handled by the method instead. The `customizer` is invoked with up to\n * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * function isGreeting(value) {\n *   return /^h(?:i|ello)$/.test(value);\n * }\n *\n * function customizer(objValue, othValue) {\n *   if (isGreeting(objValue) && isGreeting(othValue)) {\n *     return true;\n *   }\n * }\n *\n * var array = ['hello', 'goodbye'];\n * var other = ['hi', 'goodbye'];\n *\n * _.isEqualWith(array, other, customizer);\n * // => true\n */\nfunction isEqualWith(value, other, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  var result = customizer ? customizer(value, other) : undefined;\n  return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n}\n\nmodule.exports = isEqualWith;\n","/**\n * Checks if `value` is `null` or `undefined`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n * @example\n *\n * _.isNil(null);\n * // => true\n *\n * _.isNil(void 0);\n * // => true\n *\n * _.isNil(NaN);\n * // => false\n */\nfunction isNil(value) {\n  return value == null;\n}\n\nmodule.exports = isNil;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nmodule.exports = mergeWith;\n","var basePullAll = require('./_basePullAll');\n\n/**\n * This method is like `_.pull` except that it accepts an array of values to remove.\n *\n * **Note:** Unlike `_.difference`, this method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pullAll(array, ['a', 'c']);\n * console.log(array);\n * // => ['b', 'b']\n */\nfunction pullAll(array, values) {\n  return (array && array.length && values && values.length)\n    ? basePullAll(array, values)\n    : array;\n}\n\nmodule.exports = pullAll;\n","var baseSet = require('./_baseSet');\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nmodule.exports = set;\n","var createCompounder = require('./_createCompounder'),\n    upperFirst = require('./upperFirst');\n\n/**\n * Converts `string` to\n * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n *\n * @static\n * @memberOf _\n * @since 3.1.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the start cased string.\n * @example\n *\n * _.startCase('--foo-bar--');\n * // => 'Foo Bar'\n *\n * _.startCase('fooBar');\n * // => 'Foo Bar'\n *\n * _.startCase('__FOO_BAR__');\n * // => 'FOO BAR'\n */\nvar startCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + upperFirst(word);\n});\n\nmodule.exports = startCase;\n","var baseTimes = require('./_baseTimes'),\n    castFunction = require('./_castFunction'),\n    toInteger = require('./toInteger');\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Invokes the iteratee `n` times, returning an array of the results of\n * each invocation. The iteratee is invoked with one argument; (index).\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n * @example\n *\n * _.times(3, String);\n * // => ['0', '1', '2']\n *\n *  _.times(4, _.constant(0));\n * // => [0, 0, 0, 0]\n */\nfunction times(n, iteratee) {\n  n = toInteger(n);\n  if (n < 1 || n > MAX_SAFE_INTEGER) {\n    return [];\n  }\n  var index = MAX_ARRAY_LENGTH,\n      length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n  iteratee = castFunction(iteratee);\n  n -= MAX_ARRAY_LENGTH;\n\n  var result = baseTimes(length, iteratee);\n  while (++index < n) {\n    iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = times;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * This method is like `_.uniq` except that it accepts `comparator` which\n * is invoked to compare elements of `array`. The order of result values is\n * determined by the order they occur in the array.The comparator is invoked\n * with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.uniqWith(objects, _.isEqual);\n * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n */\nfunction uniqWith(array, comparator) {\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n}\n\nmodule.exports = uniqWith;\n","var baseUnset = require('./_baseUnset');\n\n/**\n * Removes the property at `path` of `object`.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n * _.unset(object, 'a[0].b.c');\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n *\n * _.unset(object, ['a', '0', 'b', 'c']);\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n */\nfunction unset(object, path) {\n  return object == null ? true : baseUnset(object, path);\n}\n\nmodule.exports = unset;\n","var baseDifference = require('./_baseDifference'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array excluding all given values using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.pull`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...*} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.xor\n * @example\n *\n * _.without([2, 1, 2, 3], 1, 2);\n * // => [3]\n */\nvar without = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, values)\n    : [];\n});\n\nmodule.exports = without;\n","(function(root, factory) {\n    if (typeof module === 'object' && module.exports) {\n        module.exports = factory();\n    } else {\n        root.nearley = factory();\n    }\n}(this, function() {\n\n    function Rule(name, symbols, postprocess) {\n        this.id = ++Rule.highestId;\n        this.name = name;\n        this.symbols = symbols;        // a list of literal | regex class | nonterminal\n        this.postprocess = postprocess;\n        return this;\n    }\n    Rule.highestId = 0;\n\n    Rule.prototype.toString = function(withCursorAt) {\n        var symbolSequence = (typeof withCursorAt === \"undefined\")\n                             ? this.symbols.map(getSymbolShortDisplay).join(' ')\n                             : (   this.symbols.slice(0, withCursorAt).map(getSymbolShortDisplay).join(' ')\n                                 + \" ● \"\n                                 + this.symbols.slice(withCursorAt).map(getSymbolShortDisplay).join(' ')     );\n        return this.name + \" → \" + symbolSequence;\n    }\n\n\n    // a State is a rule at a position from a given starting point in the input stream (reference)\n    function State(rule, dot, reference, wantedBy) {\n        this.rule = rule;\n        this.dot = dot;\n        this.reference = reference;\n        this.data = [];\n        this.wantedBy = wantedBy;\n        this.isComplete = this.dot === rule.symbols.length;\n    }\n\n    State.prototype.toString = function() {\n        return \"{\" + this.rule.toString(this.dot) + \"}, from: \" + (this.reference || 0);\n    };\n\n    State.prototype.nextState = function(child) {\n        var state = new State(this.rule, this.dot + 1, this.reference, this.wantedBy);\n        state.left = this;\n        state.right = child;\n        if (state.isComplete) {\n            state.data = state.build();\n            // Having right set here will prevent the right state and its children\n            // form being garbage collected\n            state.right = undefined;\n        }\n        return state;\n    };\n\n    State.prototype.build = function() {\n        var children = [];\n        var node = this;\n        do {\n            children.push(node.right.data);\n            node = node.left;\n        } while (node.left);\n        children.reverse();\n        return children;\n    };\n\n    State.prototype.finish = function() {\n        if (this.rule.postprocess) {\n            this.data = this.rule.postprocess(this.data, this.reference, Parser.fail);\n        }\n    };\n\n\n    function Column(grammar, index) {\n        this.grammar = grammar;\n        this.index = index;\n        this.states = [];\n        this.wants = {}; // states indexed by the non-terminal they expect\n        this.scannable = []; // list of states that expect a token\n        this.completed = {}; // states that are nullable\n    }\n\n\n    Column.prototype.process = function(nextColumn) {\n        var states = this.states;\n        var wants = this.wants;\n        var completed = this.completed;\n\n        for (var w = 0; w < states.length; w++) { // nb. we push() during iteration\n            var state = states[w];\n\n            if (state.isComplete) {\n                state.finish();\n                if (state.data !== Parser.fail) {\n                    // complete\n                    var wantedBy = state.wantedBy;\n                    for (var i = wantedBy.length; i--; ) { // this line is hot\n                        var left = wantedBy[i];\n                        this.complete(left, state);\n                    }\n\n                    // special-case nullables\n                    if (state.reference === this.index) {\n                        // make sure future predictors of this rule get completed.\n                        var exp = state.rule.name;\n                        (this.completed[exp] = this.completed[exp] || []).push(state);\n                    }\n                }\n\n            } else {\n                // queue scannable states\n                var exp = state.rule.symbols[state.dot];\n                if (typeof exp !== 'string') {\n                    this.scannable.push(state);\n                    continue;\n                }\n\n                // predict\n                if (wants[exp]) {\n                    wants[exp].push(state);\n\n                    if (completed.hasOwnProperty(exp)) {\n                        var nulls = completed[exp];\n                        for (var i = 0; i < nulls.length; i++) {\n                            var right = nulls[i];\n                            this.complete(state, right);\n                        }\n                    }\n                } else {\n                    wants[exp] = [state];\n                    this.predict(exp);\n                }\n            }\n        }\n    }\n\n    Column.prototype.predict = function(exp) {\n        var rules = this.grammar.byName[exp] || [];\n\n        for (var i = 0; i < rules.length; i++) {\n            var r = rules[i];\n            var wantedBy = this.wants[exp];\n            var s = new State(r, 0, this.index, wantedBy);\n            this.states.push(s);\n        }\n    }\n\n    Column.prototype.complete = function(left, right) {\n        var copy = left.nextState(right);\n        this.states.push(copy);\n    }\n\n\n    function Grammar(rules, start) {\n        this.rules = rules;\n        this.start = start || this.rules[0].name;\n        var byName = this.byName = {};\n        this.rules.forEach(function(rule) {\n            if (!byName.hasOwnProperty(rule.name)) {\n                byName[rule.name] = [];\n            }\n            byName[rule.name].push(rule);\n        });\n    }\n\n    // So we can allow passing (rules, start) directly to Parser for backwards compatibility\n    Grammar.fromCompiled = function(rules, start) {\n        var lexer = rules.Lexer;\n        if (rules.ParserStart) {\n          start = rules.ParserStart;\n          rules = rules.ParserRules;\n        }\n        var rules = rules.map(function (r) { return (new Rule(r.name, r.symbols, r.postprocess)); });\n        var g = new Grammar(rules, start);\n        g.lexer = lexer; // nb. storing lexer on Grammar is iffy, but unavoidable\n        return g;\n    }\n\n\n    function StreamLexer() {\n      this.reset(\"\");\n    }\n\n    StreamLexer.prototype.reset = function(data, state) {\n        this.buffer = data;\n        this.index = 0;\n        this.line = state ? state.line : 1;\n        this.lastLineBreak = state ? -state.col : 0;\n    }\n\n    StreamLexer.prototype.next = function() {\n        if (this.index < this.buffer.length) {\n            var ch = this.buffer[this.index++];\n            if (ch === '\\n') {\n              this.line += 1;\n              this.lastLineBreak = this.index;\n            }\n            return {value: ch};\n        }\n    }\n\n    StreamLexer.prototype.save = function() {\n      return {\n        line: this.line,\n        col: this.index - this.lastLineBreak,\n      }\n    }\n\n    StreamLexer.prototype.formatError = function(token, message) {\n        // nb. this gets called after consuming the offending token,\n        // so the culprit is index-1\n        var buffer = this.buffer;\n        if (typeof buffer === 'string') {\n            var lines = buffer\n                .split(\"\\n\")\n                .slice(\n                    Math.max(0, this.line - 5), \n                    this.line\n                );\n\n            var nextLineBreak = buffer.indexOf('\\n', this.index);\n            if (nextLineBreak === -1) nextLineBreak = buffer.length;\n            var col = this.index - this.lastLineBreak;\n            var lastLineDigits = String(this.line).length;\n            message += \" at line \" + this.line + \" col \" + col + \":\\n\\n\";\n            message += lines\n                .map(function(line, i) {\n                    return pad(this.line - lines.length + i + 1, lastLineDigits) + \" \" + line;\n                }, this)\n                .join(\"\\n\");\n            message += \"\\n\" + pad(\"\", lastLineDigits + col) + \"^\\n\";\n            return message;\n        } else {\n            return message + \" at index \" + (this.index - 1);\n        }\n\n        function pad(n, length) {\n            var s = String(n);\n            return Array(length - s.length + 1).join(\" \") + s;\n        }\n    }\n\n    function Parser(rules, start, options) {\n        if (rules instanceof Grammar) {\n            var grammar = rules;\n            var options = start;\n        } else {\n            var grammar = Grammar.fromCompiled(rules, start);\n        }\n        this.grammar = grammar;\n\n        // Read options\n        this.options = {\n            keepHistory: false,\n            lexer: grammar.lexer || new StreamLexer,\n        };\n        for (var key in (options || {})) {\n            this.options[key] = options[key];\n        }\n\n        // Setup lexer\n        this.lexer = this.options.lexer;\n        this.lexerState = undefined;\n\n        // Setup a table\n        var column = new Column(grammar, 0);\n        var table = this.table = [column];\n\n        // I could be expecting anything.\n        column.wants[grammar.start] = [];\n        column.predict(grammar.start);\n        // TODO what if start rule is nullable?\n        column.process();\n        this.current = 0; // token index\n    }\n\n    // create a reserved token for indicating a parse fail\n    Parser.fail = {};\n\n    Parser.prototype.feed = function(chunk) {\n        var lexer = this.lexer;\n        lexer.reset(chunk, this.lexerState);\n\n        var token;\n        while (true) {\n            try {\n                token = lexer.next();\n                if (!token) {\n                    break;\n                }\n            } catch (e) {\n                // Create the next column so that the error reporter\n                // can display the correctly predicted states.\n                var nextColumn = new Column(this.grammar, this.current + 1);\n                this.table.push(nextColumn);\n                var err = new Error(this.reportLexerError(e));\n                err.offset = this.current;\n                err.token = e.token;\n                throw err;\n            }\n            // We add new states to table[current+1]\n            var column = this.table[this.current];\n\n            // GC unused states\n            if (!this.options.keepHistory) {\n                delete this.table[this.current - 1];\n            }\n\n            var n = this.current + 1;\n            var nextColumn = new Column(this.grammar, n);\n            this.table.push(nextColumn);\n\n            // Advance all tokens that expect the symbol\n            var literal = token.text !== undefined ? token.text : token.value;\n            var value = lexer.constructor === StreamLexer ? token.value : token;\n            var scannable = column.scannable;\n            for (var w = scannable.length; w--; ) {\n                var state = scannable[w];\n                var expect = state.rule.symbols[state.dot];\n                // Try to consume the token\n                // either regex or literal\n                if (expect.test ? expect.test(value) :\n                    expect.type ? expect.type === token.type\n                                : expect.literal === literal) {\n                    // Add it\n                    var next = state.nextState({data: value, token: token, isToken: true, reference: n - 1});\n                    nextColumn.states.push(next);\n                }\n            }\n\n            // Next, for each of the rules, we either\n            // (a) complete it, and try to see if the reference row expected that\n            //     rule\n            // (b) predict the next nonterminal it expects by adding that\n            //     nonterminal's start state\n            // To prevent duplication, we also keep track of rules we have already\n            // added\n\n            nextColumn.process();\n\n            // If needed, throw an error:\n            if (nextColumn.states.length === 0) {\n                // No states at all! This is not good.\n                var err = new Error(this.reportError(token));\n                err.offset = this.current;\n                err.token = token;\n                throw err;\n            }\n\n            // maybe save lexer state\n            if (this.options.keepHistory) {\n              column.lexerState = lexer.save()\n            }\n\n            this.current++;\n        }\n        if (column) {\n          this.lexerState = lexer.save()\n        }\n\n        // Incrementally keep track of results\n        this.results = this.finish();\n\n        // Allow chaining, for whatever it's worth\n        return this;\n    };\n\n    Parser.prototype.reportLexerError = function(lexerError) {\n        var tokenDisplay, lexerMessage;\n        // Planning to add a token property to moo's thrown error\n        // even on erroring tokens to be used in error display below\n        var token = lexerError.token;\n        if (token) {\n            tokenDisplay = \"input \" + JSON.stringify(token.text[0]) + \" (lexer error)\";\n            lexerMessage = this.lexer.formatError(token, \"Syntax error\");\n        } else {\n            tokenDisplay = \"input (lexer error)\";\n            lexerMessage = lexerError.message;\n        }\n        return this.reportErrorCommon(lexerMessage, tokenDisplay);\n    };\n\n    Parser.prototype.reportError = function(token) {\n        var tokenDisplay = (token.type ? token.type + \" token: \" : \"\") + JSON.stringify(token.value !== undefined ? token.value : token);\n        var lexerMessage = this.lexer.formatError(token, \"Syntax error\");\n        return this.reportErrorCommon(lexerMessage, tokenDisplay);\n    };\n\n    Parser.prototype.reportErrorCommon = function(lexerMessage, tokenDisplay) {\n        var lines = [];\n        lines.push(lexerMessage);\n        var lastColumnIndex = this.table.length - 2;\n        var lastColumn = this.table[lastColumnIndex];\n        var expectantStates = lastColumn.states\n            .filter(function(state) {\n                var nextSymbol = state.rule.symbols[state.dot];\n                return nextSymbol && typeof nextSymbol !== \"string\";\n            });\n\n        if (expectantStates.length === 0) {\n            lines.push('Unexpected ' + tokenDisplay + '. I did not expect any more input. Here is the state of my parse table:\\n');\n            this.displayStateStack(lastColumn.states, lines);\n        } else {\n            lines.push('Unexpected ' + tokenDisplay + '. Instead, I was expecting to see one of the following:\\n');\n            // Display a \"state stack\" for each expectant state\n            // - which shows you how this state came to be, step by step.\n            // If there is more than one derivation, we only display the first one.\n            var stateStacks = expectantStates\n                .map(function(state) {\n                    return this.buildFirstStateStack(state, []) || [state];\n                }, this);\n            // Display each state that is expecting a terminal symbol next.\n            stateStacks.forEach(function(stateStack) {\n                var state = stateStack[0];\n                var nextSymbol = state.rule.symbols[state.dot];\n                var symbolDisplay = this.getSymbolDisplay(nextSymbol);\n                lines.push('A ' + symbolDisplay + ' based on:');\n                this.displayStateStack(stateStack, lines);\n            }, this);\n        }\n        lines.push(\"\");\n        return lines.join(\"\\n\");\n    }\n    \n    Parser.prototype.displayStateStack = function(stateStack, lines) {\n        var lastDisplay;\n        var sameDisplayCount = 0;\n        for (var j = 0; j < stateStack.length; j++) {\n            var state = stateStack[j];\n            var display = state.rule.toString(state.dot);\n            if (display === lastDisplay) {\n                sameDisplayCount++;\n            } else {\n                if (sameDisplayCount > 0) {\n                    lines.push('    ^ ' + sameDisplayCount + ' more lines identical to this');\n                }\n                sameDisplayCount = 0;\n                lines.push('    ' + display);\n            }\n            lastDisplay = display;\n        }\n    };\n\n    Parser.prototype.getSymbolDisplay = function(symbol) {\n        return getSymbolLongDisplay(symbol);\n    };\n\n    /*\n    Builds a the first state stack. You can think of a state stack as the call stack\n    of the recursive-descent parser which the Nearley parse algorithm simulates.\n    A state stack is represented as an array of state objects. Within a\n    state stack, the first item of the array will be the starting\n    state, with each successive item in the array going further back into history.\n\n    This function needs to be given a starting state and an empty array representing\n    the visited states, and it returns an single state stack.\n\n    */\n    Parser.prototype.buildFirstStateStack = function(state, visited) {\n        if (visited.indexOf(state) !== -1) {\n            // Found cycle, return null\n            // to eliminate this path from the results, because\n            // we don't know how to display it meaningfully\n            return null;\n        }\n        if (state.wantedBy.length === 0) {\n            return [state];\n        }\n        var prevState = state.wantedBy[0];\n        var childVisited = [state].concat(visited);\n        var childResult = this.buildFirstStateStack(prevState, childVisited);\n        if (childResult === null) {\n            return null;\n        }\n        return [state].concat(childResult);\n    };\n\n    Parser.prototype.save = function() {\n        var column = this.table[this.current];\n        column.lexerState = this.lexerState;\n        return column;\n    };\n\n    Parser.prototype.restore = function(column) {\n        var index = column.index;\n        this.current = index;\n        this.table[index] = column;\n        this.table.splice(index + 1);\n        this.lexerState = column.lexerState;\n\n        // Incrementally keep track of results\n        this.results = this.finish();\n    };\n\n    // nb. deprecated: use save/restore instead!\n    Parser.prototype.rewind = function(index) {\n        if (!this.options.keepHistory) {\n            throw new Error('set option `keepHistory` to enable rewinding')\n        }\n        // nb. recall column (table) indicies fall between token indicies.\n        //        col 0   --   token 0   --   col 1\n        this.restore(this.table[index]);\n    };\n\n    Parser.prototype.finish = function() {\n        // Return the possible parsings\n        var considerations = [];\n        var start = this.grammar.start;\n        var column = this.table[this.table.length - 1]\n        column.states.forEach(function (t) {\n            if (t.rule.name === start\n                    && t.dot === t.rule.symbols.length\n                    && t.reference === 0\n                    && t.data !== Parser.fail) {\n                considerations.push(t);\n            }\n        });\n        return considerations.map(function(c) {return c.data; });\n    };\n\n    function getSymbolLongDisplay(symbol) {\n        var type = typeof symbol;\n        if (type === \"string\") {\n            return symbol;\n        } else if (type === \"object\") {\n            if (symbol.literal) {\n                return JSON.stringify(symbol.literal);\n            } else if (symbol instanceof RegExp) {\n                return 'character matching ' + symbol;\n            } else if (symbol.type) {\n                return symbol.type + ' token';\n            } else if (symbol.test) {\n                return 'token matching ' + String(symbol.test);\n            } else {\n                throw new Error('Unknown symbol type: ' + symbol);\n            }\n        }\n    }\n\n    function getSymbolShortDisplay(symbol) {\n        var type = typeof symbol;\n        if (type === \"string\") {\n            return symbol;\n        } else if (type === \"object\") {\n            if (symbol.literal) {\n                return JSON.stringify(symbol.literal);\n            } else if (symbol instanceof RegExp) {\n                return symbol.toString();\n            } else if (symbol.type) {\n                return '%' + symbol.type;\n            } else if (symbol.test) {\n                return '<' + String(symbol.test) + '>';\n            } else {\n                throw new Error('Unknown symbol type: ' + symbol);\n            }\n        }\n    }\n\n    return {\n        Parser: Parser,\n        Grammar: Grammar,\n        Rule: Rule,\n    };\n\n}));\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"DraggableCore\", {\n  enumerable: true,\n  get: function () {\n    return _DraggableCore.default;\n  }\n});\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\nvar _domFns = require(\"./utils/domFns\");\nvar _positionFns = require(\"./utils/positionFns\");\nvar _shims = require(\"./utils/shims\");\nvar _DraggableCore = _interopRequireDefault(require(\"./DraggableCore\"));\nvar _log = _interopRequireDefault(require(\"./utils/log\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); } /*:: import type {ControlPosition, PositionOffsetControlPosition, DraggableCoreProps, DraggableCoreDefaultProps} from './DraggableCore';*/\n/*:: import type {Bounds, DraggableEventHandler} from './utils/types';*/\n/*:: import type {Element as ReactElement} from 'react';*/\n/*:: type DraggableState = {\n  dragging: boolean,\n  dragged: boolean,\n  x: number, y: number,\n  slackX: number, slackY: number,\n  isElementSVG: boolean,\n  prevPropsPosition: ?ControlPosition,\n};*/\n/*:: export type DraggableDefaultProps = {\n  ...DraggableCoreDefaultProps,\n  axis: 'both' | 'x' | 'y' | 'none',\n  bounds: Bounds | string | false,\n  defaultClassName: string,\n  defaultClassNameDragging: string,\n  defaultClassNameDragged: string,\n  defaultPosition: ControlPosition,\n  scale: number,\n};*/\n/*:: export type DraggableProps = {\n  ...DraggableCoreProps,\n  ...DraggableDefaultProps,\n  positionOffset: PositionOffsetControlPosition,\n  position: ControlPosition,\n};*/\n//\n// Define <Draggable>\n//\nclass Draggable extends React.Component /*:: <DraggableProps, DraggableState>*/{\n  // React 16.3+\n  // Arity (props, state)\n  static getDerivedStateFromProps(_ref /*:: */, _ref2 /*:: */) /*: ?Partial<DraggableState>*/{\n    let {\n      position\n    } /*: DraggableProps*/ = _ref /*: DraggableProps*/;\n    let {\n      prevPropsPosition\n    } /*: DraggableState*/ = _ref2 /*: DraggableState*/;\n    // Set x/y if a new position is provided in props that is different than the previous.\n    if (position && (!prevPropsPosition || position.x !== prevPropsPosition.x || position.y !== prevPropsPosition.y)) {\n      (0, _log.default)('Draggable: getDerivedStateFromProps %j', {\n        position,\n        prevPropsPosition\n      });\n      return {\n        x: position.x,\n        y: position.y,\n        prevPropsPosition: {\n          ...position\n        }\n      };\n    }\n    return null;\n  }\n  constructor(props /*: DraggableProps*/) {\n    super(props);\n    _defineProperty(this, \"onDragStart\", (e, coreData) => {\n      (0, _log.default)('Draggable: onDragStart: %j', coreData);\n\n      // Short-circuit if user's callback killed it.\n      const shouldStart = this.props.onStart(e, (0, _positionFns.createDraggableData)(this, coreData));\n      // Kills start event on core as well, so move handlers are never bound.\n      if (shouldStart === false) return false;\n      this.setState({\n        dragging: true,\n        dragged: true\n      });\n    });\n    _defineProperty(this, \"onDrag\", (e, coreData) => {\n      if (!this.state.dragging) return false;\n      (0, _log.default)('Draggable: onDrag: %j', coreData);\n      const uiData = (0, _positionFns.createDraggableData)(this, coreData);\n      const newState = {\n        x: uiData.x,\n        y: uiData.y,\n        slackX: 0,\n        slackY: 0\n      };\n\n      // Keep within bounds.\n      if (this.props.bounds) {\n        // Save original x and y.\n        const {\n          x,\n          y\n        } = newState;\n\n        // Add slack to the values used to calculate bound position. This will ensure that if\n        // we start removing slack, the element won't react to it right away until it's been\n        // completely removed.\n        newState.x += this.state.slackX;\n        newState.y += this.state.slackY;\n\n        // Get bound position. This will ceil/floor the x and y within the boundaries.\n        const [newStateX, newStateY] = (0, _positionFns.getBoundPosition)(this, newState.x, newState.y);\n        newState.x = newStateX;\n        newState.y = newStateY;\n\n        // Recalculate slack by noting how much was shaved by the boundPosition handler.\n        newState.slackX = this.state.slackX + (x - newState.x);\n        newState.slackY = this.state.slackY + (y - newState.y);\n\n        // Update the event we fire to reflect what really happened after bounds took effect.\n        uiData.x = newState.x;\n        uiData.y = newState.y;\n        uiData.deltaX = newState.x - this.state.x;\n        uiData.deltaY = newState.y - this.state.y;\n      }\n\n      // Short-circuit if user's callback killed it.\n      const shouldUpdate = this.props.onDrag(e, uiData);\n      if (shouldUpdate === false) return false;\n      this.setState(newState);\n    });\n    _defineProperty(this, \"onDragStop\", (e, coreData) => {\n      if (!this.state.dragging) return false;\n\n      // Short-circuit if user's callback killed it.\n      const shouldContinue = this.props.onStop(e, (0, _positionFns.createDraggableData)(this, coreData));\n      if (shouldContinue === false) return false;\n      (0, _log.default)('Draggable: onDragStop: %j', coreData);\n      const newState /*: Partial<DraggableState>*/ = {\n        dragging: false,\n        slackX: 0,\n        slackY: 0\n      };\n\n      // If this is a controlled component, the result of this operation will be to\n      // revert back to the old position. We expect a handler on `onDragStop`, at the least.\n      const controlled = Boolean(this.props.position);\n      if (controlled) {\n        const {\n          x,\n          y\n        } = this.props.position;\n        newState.x = x;\n        newState.y = y;\n      }\n      this.setState(newState);\n    });\n    this.state = {\n      // Whether or not we are currently dragging.\n      dragging: false,\n      // Whether or not we have been dragged before.\n      dragged: false,\n      // Current transform x and y.\n      x: props.position ? props.position.x : props.defaultPosition.x,\n      y: props.position ? props.position.y : props.defaultPosition.y,\n      prevPropsPosition: {\n        ...props.position\n      },\n      // Used for compensating for out-of-bounds drags\n      slackX: 0,\n      slackY: 0,\n      // Can only determine if SVG after mounting\n      isElementSVG: false\n    };\n    if (props.position && !(props.onDrag || props.onStop)) {\n      // eslint-disable-next-line no-console\n      console.warn('A `position` was applied to this <Draggable>, without drag handlers. This will make this ' + 'component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the ' + '`position` of this element.');\n    }\n  }\n  componentDidMount() {\n    // Check to see if the element passed is an instanceof SVGElement\n    if (typeof window.SVGElement !== 'undefined' && this.findDOMNode() instanceof window.SVGElement) {\n      this.setState({\n        isElementSVG: true\n      });\n    }\n  }\n  componentWillUnmount() {\n    this.setState({\n      dragging: false\n    }); // prevents invariant if unmounted while dragging\n  }\n\n  // React Strict Mode compatibility: if `nodeRef` is passed, we will use it instead of trying to find\n  // the underlying DOM node ourselves. See the README for more information.\n  findDOMNode() /*: ?HTMLElement*/{\n    var _this$props$nodeRef$c, _this$props;\n    return (_this$props$nodeRef$c = (_this$props = this.props) === null || _this$props === void 0 || (_this$props = _this$props.nodeRef) === null || _this$props === void 0 ? void 0 : _this$props.current) !== null && _this$props$nodeRef$c !== void 0 ? _this$props$nodeRef$c : _reactDom.default.findDOMNode(this);\n  }\n  render() /*: ReactElement<any>*/{\n    const {\n      axis,\n      bounds,\n      children,\n      defaultPosition,\n      defaultClassName,\n      defaultClassNameDragging,\n      defaultClassNameDragged,\n      position,\n      positionOffset,\n      scale,\n      ...draggableCoreProps\n    } = this.props;\n    let style = {};\n    let svgTransform = null;\n\n    // If this is controlled, we don't want to move it - unless it's dragging.\n    const controlled = Boolean(position);\n    const draggable = !controlled || this.state.dragging;\n    const validPosition = position || defaultPosition;\n    const transformOpts = {\n      // Set left if horizontal drag is enabled\n      x: (0, _positionFns.canDragX)(this) && draggable ? this.state.x : validPosition.x,\n      // Set top if vertical drag is enabled\n      y: (0, _positionFns.canDragY)(this) && draggable ? this.state.y : validPosition.y\n    };\n\n    // If this element was SVG, we use the `transform` attribute.\n    if (this.state.isElementSVG) {\n      svgTransform = (0, _domFns.createSVGTransform)(transformOpts, positionOffset);\n    } else {\n      // Add a CSS transform to move the element around. This allows us to move the element around\n      // without worrying about whether or not it is relatively or absolutely positioned.\n      // If the item you are dragging already has a transform set, wrap it in a <span> so <Draggable>\n      // has a clean slate.\n      style = (0, _domFns.createCSSTransform)(transformOpts, positionOffset);\n    }\n\n    // Mark with class while dragging\n    const className = (0, _clsx.default)(children.props.className || '', defaultClassName, {\n      [defaultClassNameDragging]: this.state.dragging,\n      [defaultClassNameDragged]: this.state.dragged\n    });\n\n    // Reuse the child provided\n    // This makes it flexible to use whatever element is wanted (div, ul, etc)\n    return /*#__PURE__*/React.createElement(_DraggableCore.default, _extends({}, draggableCoreProps, {\n      onStart: this.onDragStart,\n      onDrag: this.onDrag,\n      onStop: this.onDragStop\n    }), /*#__PURE__*/React.cloneElement(React.Children.only(children), {\n      className: className,\n      style: {\n        ...children.props.style,\n        ...style\n      },\n      transform: svgTransform\n    }));\n  }\n}\nexports.default = Draggable;\n_defineProperty(Draggable, \"displayName\", 'Draggable');\n_defineProperty(Draggable, \"propTypes\", {\n  // Accepts all props <DraggableCore> accepts.\n  ..._DraggableCore.default.propTypes,\n  /**\n   * `axis` determines which axis the draggable can move.\n   *\n   *  Note that all callbacks will still return data as normal. This only\n   *  controls flushing to the DOM.\n   *\n   * 'both' allows movement horizontally and vertically.\n   * 'x' limits movement to horizontal axis.\n   * 'y' limits movement to vertical axis.\n   * 'none' limits all movement.\n   *\n   * Defaults to 'both'.\n   */\n  axis: _propTypes.default.oneOf(['both', 'x', 'y', 'none']),\n  /**\n   * `bounds` determines the range of movement available to the element.\n   * Available values are:\n   *\n   * 'parent' restricts movement within the Draggable's parent node.\n   *\n   * Alternatively, pass an object with the following properties, all of which are optional:\n   *\n   * {left: LEFT_BOUND, right: RIGHT_BOUND, bottom: BOTTOM_BOUND, top: TOP_BOUND}\n   *\n   * All values are in px.\n   *\n   * Example:\n   *\n   * ```jsx\n   *   let App = React.createClass({\n   *       render: function () {\n   *         return (\n   *            <Draggable bounds={{right: 300, bottom: 300}}>\n   *              <div>Content</div>\n   *           </Draggable>\n   *         );\n   *       }\n   *   });\n   * ```\n   */\n  bounds: _propTypes.default.oneOfType([_propTypes.default.shape({\n    left: _propTypes.default.number,\n    right: _propTypes.default.number,\n    top: _propTypes.default.number,\n    bottom: _propTypes.default.number\n  }), _propTypes.default.string, _propTypes.default.oneOf([false])]),\n  defaultClassName: _propTypes.default.string,\n  defaultClassNameDragging: _propTypes.default.string,\n  defaultClassNameDragged: _propTypes.default.string,\n  /**\n   * `defaultPosition` specifies the x and y that the dragged item should start at\n   *\n   * Example:\n   *\n   * ```jsx\n   *      let App = React.createClass({\n   *          render: function () {\n   *              return (\n   *                  <Draggable defaultPosition={{x: 25, y: 25}}>\n   *                      <div>I start with transformX: 25px and transformY: 25px;</div>\n   *                  </Draggable>\n   *              );\n   *          }\n   *      });\n   * ```\n   */\n  defaultPosition: _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  }),\n  positionOffset: _propTypes.default.shape({\n    x: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n    y: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n  }),\n  /**\n   * `position`, if present, defines the current position of the element.\n   *\n   *  This is similar to how form elements in React work - if no `position` is supplied, the component\n   *  is uncontrolled.\n   *\n   * Example:\n   *\n   * ```jsx\n   *      let App = React.createClass({\n   *          render: function () {\n   *              return (\n   *                  <Draggable position={{x: 25, y: 25}}>\n   *                      <div>I start with transformX: 25px and transformY: 25px;</div>\n   *                  </Draggable>\n   *              );\n   *          }\n   *      });\n   * ```\n   */\n  position: _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  }),\n  /**\n   * These properties should be defined on the child, not here.\n   */\n  className: _shims.dontSetMe,\n  style: _shims.dontSetMe,\n  transform: _shims.dontSetMe\n});\n_defineProperty(Draggable, \"defaultProps\", {\n  ..._DraggableCore.default.defaultProps,\n  axis: 'both',\n  bounds: false,\n  defaultClassName: 'react-draggable',\n  defaultClassNameDragging: 'react-draggable-dragging',\n  defaultClassNameDragged: 'react-draggable-dragged',\n  defaultPosition: {\n    x: 0,\n    y: 0\n  },\n  scale: 1\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\nvar _domFns = require(\"./utils/domFns\");\nvar _positionFns = require(\"./utils/positionFns\");\nvar _shims = require(\"./utils/shims\");\nvar _log = _interopRequireDefault(require(\"./utils/log\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n/*:: import type {EventHandler, MouseTouchEvent} from './utils/types';*/\n/*:: import type {Element as ReactElement} from 'react';*/\n// Simple abstraction for dragging events names.\nconst eventsFor = {\n  touch: {\n    start: 'touchstart',\n    move: 'touchmove',\n    stop: 'touchend'\n  },\n  mouse: {\n    start: 'mousedown',\n    move: 'mousemove',\n    stop: 'mouseup'\n  }\n};\n\n// Default to mouse events.\nlet dragEventFor = eventsFor.mouse;\n/*:: export type DraggableData = {\n  node: HTMLElement,\n  x: number, y: number,\n  deltaX: number, deltaY: number,\n  lastX: number, lastY: number,\n};*/\n/*:: export type DraggableEventHandler = (e: MouseEvent, data: DraggableData) => void | false;*/\n/*:: export type ControlPosition = {x: number, y: number};*/\n/*:: export type PositionOffsetControlPosition = {x: number|string, y: number|string};*/\n/*:: export type DraggableCoreDefaultProps = {\n  allowAnyClick: boolean,\n  disabled: boolean,\n  enableUserSelectHack: boolean,\n  onStart: DraggableEventHandler,\n  onDrag: DraggableEventHandler,\n  onStop: DraggableEventHandler,\n  onMouseDown: (e: MouseEvent) => void,\n  scale: number,\n};*/\n/*:: export type DraggableCoreProps = {\n  ...DraggableCoreDefaultProps,\n  cancel: string,\n  children: ReactElement<any>,\n  offsetParent: HTMLElement,\n  grid: [number, number],\n  handle: string,\n  nodeRef?: ?React.ElementRef<any>,\n};*/\n//\n// Define <DraggableCore>.\n//\n// <DraggableCore> is for advanced usage of <Draggable>. It maintains minimal internal state so it can\n// work well with libraries that require more control over the element.\n//\n\nclass DraggableCore extends React.Component /*:: <DraggableCoreProps>*/{\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"dragging\", false);\n    // Used while dragging to determine deltas.\n    _defineProperty(this, \"lastX\", NaN);\n    _defineProperty(this, \"lastY\", NaN);\n    _defineProperty(this, \"touchIdentifier\", null);\n    _defineProperty(this, \"mounted\", false);\n    _defineProperty(this, \"handleDragStart\", e => {\n      // Make it possible to attach event handlers on top of this one.\n      this.props.onMouseDown(e);\n\n      // Only accept left-clicks.\n      if (!this.props.allowAnyClick && typeof e.button === 'number' && e.button !== 0) return false;\n\n      // Get nodes. Be sure to grab relative document (could be iframed)\n      const thisNode = this.findDOMNode();\n      if (!thisNode || !thisNode.ownerDocument || !thisNode.ownerDocument.body) {\n        throw new Error('<DraggableCore> not mounted on DragStart!');\n      }\n      const {\n        ownerDocument\n      } = thisNode;\n\n      // Short circuit if handle or cancel prop was provided and selector doesn't match.\n      if (this.props.disabled || !(e.target instanceof ownerDocument.defaultView.Node) || this.props.handle && !(0, _domFns.matchesSelectorAndParentsTo)(e.target, this.props.handle, thisNode) || this.props.cancel && (0, _domFns.matchesSelectorAndParentsTo)(e.target, this.props.cancel, thisNode)) {\n        return;\n      }\n\n      // Prevent scrolling on mobile devices, like ipad/iphone.\n      // Important that this is after handle/cancel.\n      if (e.type === 'touchstart') e.preventDefault();\n\n      // Set touch identifier in component state if this is a touch event. This allows us to\n      // distinguish between individual touches on multitouch screens by identifying which\n      // touchpoint was set to this element.\n      const touchIdentifier = (0, _domFns.getTouchIdentifier)(e);\n      this.touchIdentifier = touchIdentifier;\n\n      // Get the current drag point from the event. This is used as the offset.\n      const position = (0, _positionFns.getControlPosition)(e, touchIdentifier, this);\n      if (position == null) return; // not possible but satisfies flow\n      const {\n        x,\n        y\n      } = position;\n\n      // Create an event object with all the data parents need to make a decision here.\n      const coreEvent = (0, _positionFns.createCoreData)(this, x, y);\n      (0, _log.default)('DraggableCore: handleDragStart: %j', coreEvent);\n\n      // Call event handler. If it returns explicit false, cancel.\n      (0, _log.default)('calling', this.props.onStart);\n      const shouldUpdate = this.props.onStart(e, coreEvent);\n      if (shouldUpdate === false || this.mounted === false) return;\n\n      // Add a style to the body to disable user-select. This prevents text from\n      // being selected all over the page.\n      if (this.props.enableUserSelectHack) (0, _domFns.addUserSelectStyles)(ownerDocument);\n\n      // Initiate dragging. Set the current x and y as offsets\n      // so we know how much we've moved during the drag. This allows us\n      // to drag elements around even if they have been moved, without issue.\n      this.dragging = true;\n      this.lastX = x;\n      this.lastY = y;\n\n      // Add events to the document directly so we catch when the user's mouse/touch moves outside of\n      // this element. We use different events depending on whether or not we have detected that this\n      // is a touch-capable device.\n      (0, _domFns.addEvent)(ownerDocument, dragEventFor.move, this.handleDrag);\n      (0, _domFns.addEvent)(ownerDocument, dragEventFor.stop, this.handleDragStop);\n    });\n    _defineProperty(this, \"handleDrag\", e => {\n      // Get the current drag point from the event. This is used as the offset.\n      const position = (0, _positionFns.getControlPosition)(e, this.touchIdentifier, this);\n      if (position == null) return;\n      let {\n        x,\n        y\n      } = position;\n\n      // Snap to grid if prop has been provided\n      if (Array.isArray(this.props.grid)) {\n        let deltaX = x - this.lastX,\n          deltaY = y - this.lastY;\n        [deltaX, deltaY] = (0, _positionFns.snapToGrid)(this.props.grid, deltaX, deltaY);\n        if (!deltaX && !deltaY) return; // skip useless drag\n        x = this.lastX + deltaX, y = this.lastY + deltaY;\n      }\n      const coreEvent = (0, _positionFns.createCoreData)(this, x, y);\n      (0, _log.default)('DraggableCore: handleDrag: %j', coreEvent);\n\n      // Call event handler. If it returns explicit false, trigger end.\n      const shouldUpdate = this.props.onDrag(e, coreEvent);\n      if (shouldUpdate === false || this.mounted === false) {\n        try {\n          // $FlowIgnore\n          this.handleDragStop(new MouseEvent('mouseup'));\n        } catch (err) {\n          // Old browsers\n          const event = ((document.createEvent('MouseEvents') /*: any*/) /*: MouseTouchEvent*/);\n          // I see why this insanity was deprecated\n          // $FlowIgnore\n          event.initMouseEvent('mouseup', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n          this.handleDragStop(event);\n        }\n        return;\n      }\n      this.lastX = x;\n      this.lastY = y;\n    });\n    _defineProperty(this, \"handleDragStop\", e => {\n      if (!this.dragging) return;\n      const position = (0, _positionFns.getControlPosition)(e, this.touchIdentifier, this);\n      if (position == null) return;\n      let {\n        x,\n        y\n      } = position;\n\n      // Snap to grid if prop has been provided\n      if (Array.isArray(this.props.grid)) {\n        let deltaX = x - this.lastX || 0;\n        let deltaY = y - this.lastY || 0;\n        [deltaX, deltaY] = (0, _positionFns.snapToGrid)(this.props.grid, deltaX, deltaY);\n        x = this.lastX + deltaX, y = this.lastY + deltaY;\n      }\n      const coreEvent = (0, _positionFns.createCoreData)(this, x, y);\n\n      // Call event handler\n      const shouldContinue = this.props.onStop(e, coreEvent);\n      if (shouldContinue === false || this.mounted === false) return false;\n      const thisNode = this.findDOMNode();\n      if (thisNode) {\n        // Remove user-select hack\n        if (this.props.enableUserSelectHack) (0, _domFns.removeUserSelectStyles)(thisNode.ownerDocument);\n      }\n      (0, _log.default)('DraggableCore: handleDragStop: %j', coreEvent);\n\n      // Reset the el.\n      this.dragging = false;\n      this.lastX = NaN;\n      this.lastY = NaN;\n      if (thisNode) {\n        // Remove event handlers\n        (0, _log.default)('DraggableCore: Removing handlers');\n        (0, _domFns.removeEvent)(thisNode.ownerDocument, dragEventFor.move, this.handleDrag);\n        (0, _domFns.removeEvent)(thisNode.ownerDocument, dragEventFor.stop, this.handleDragStop);\n      }\n    });\n    _defineProperty(this, \"onMouseDown\", e => {\n      dragEventFor = eventsFor.mouse; // on touchscreen laptops we could switch back to mouse\n\n      return this.handleDragStart(e);\n    });\n    _defineProperty(this, \"onMouseUp\", e => {\n      dragEventFor = eventsFor.mouse;\n      return this.handleDragStop(e);\n    });\n    // Same as onMouseDown (start drag), but now consider this a touch device.\n    _defineProperty(this, \"onTouchStart\", e => {\n      // We're on a touch device now, so change the event handlers\n      dragEventFor = eventsFor.touch;\n      return this.handleDragStart(e);\n    });\n    _defineProperty(this, \"onTouchEnd\", e => {\n      // We're on a touch device now, so change the event handlers\n      dragEventFor = eventsFor.touch;\n      return this.handleDragStop(e);\n    });\n  }\n  componentDidMount() {\n    this.mounted = true;\n    // Touch handlers must be added with {passive: false} to be cancelable.\n    // https://developers.google.com/web/updates/2017/01/scrolling-intervention\n    const thisNode = this.findDOMNode();\n    if (thisNode) {\n      (0, _domFns.addEvent)(thisNode, eventsFor.touch.start, this.onTouchStart, {\n        passive: false\n      });\n    }\n  }\n  componentWillUnmount() {\n    this.mounted = false;\n    // Remove any leftover event handlers. Remove both touch and mouse handlers in case\n    // some browser quirk caused a touch event to fire during a mouse move, or vice versa.\n    const thisNode = this.findDOMNode();\n    if (thisNode) {\n      const {\n        ownerDocument\n      } = thisNode;\n      (0, _domFns.removeEvent)(ownerDocument, eventsFor.mouse.move, this.handleDrag);\n      (0, _domFns.removeEvent)(ownerDocument, eventsFor.touch.move, this.handleDrag);\n      (0, _domFns.removeEvent)(ownerDocument, eventsFor.mouse.stop, this.handleDragStop);\n      (0, _domFns.removeEvent)(ownerDocument, eventsFor.touch.stop, this.handleDragStop);\n      (0, _domFns.removeEvent)(thisNode, eventsFor.touch.start, this.onTouchStart, {\n        passive: false\n      });\n      if (this.props.enableUserSelectHack) (0, _domFns.removeUserSelectStyles)(ownerDocument);\n    }\n  }\n\n  // React Strict Mode compatibility: if `nodeRef` is passed, we will use it instead of trying to find\n  // the underlying DOM node ourselves. See the README for more information.\n  findDOMNode() /*: ?HTMLElement*/{\n    var _this$props, _this$props2;\n    return (_this$props = this.props) !== null && _this$props !== void 0 && _this$props.nodeRef ? (_this$props2 = this.props) === null || _this$props2 === void 0 || (_this$props2 = _this$props2.nodeRef) === null || _this$props2 === void 0 ? void 0 : _this$props2.current : _reactDom.default.findDOMNode(this);\n  }\n  render() /*: React.Element<any>*/{\n    // Reuse the child provided\n    // This makes it flexible to use whatever element is wanted (div, ul, etc)\n    return /*#__PURE__*/React.cloneElement(React.Children.only(this.props.children), {\n      // Note: mouseMove handler is attached to document so it will still function\n      // when the user drags quickly and leaves the bounds of the element.\n      onMouseDown: this.onMouseDown,\n      onMouseUp: this.onMouseUp,\n      // onTouchStart is added on `componentDidMount` so they can be added with\n      // {passive: false}, which allows it to cancel. See\n      // https://developers.google.com/web/updates/2017/01/scrolling-intervention\n      onTouchEnd: this.onTouchEnd\n    });\n  }\n}\nexports.default = DraggableCore;\n_defineProperty(DraggableCore, \"displayName\", 'DraggableCore');\n_defineProperty(DraggableCore, \"propTypes\", {\n  /**\n   * `allowAnyClick` allows dragging using any mouse button.\n   * By default, we only accept the left button.\n   *\n   * Defaults to `false`.\n   */\n  allowAnyClick: _propTypes.default.bool,\n  children: _propTypes.default.node.isRequired,\n  /**\n   * `disabled`, if true, stops the <Draggable> from dragging. All handlers,\n   * with the exception of `onMouseDown`, will not fire.\n   */\n  disabled: _propTypes.default.bool,\n  /**\n   * By default, we add 'user-select:none' attributes to the document body\n   * to prevent ugly text selection during drag. If this is causing problems\n   * for your app, set this to `false`.\n   */\n  enableUserSelectHack: _propTypes.default.bool,\n  /**\n   * `offsetParent`, if set, uses the passed DOM node to compute drag offsets\n   * instead of using the parent node.\n   */\n  offsetParent: function (props /*: DraggableCoreProps*/, propName /*: $Keys<DraggableCoreProps>*/) {\n    if (props[propName] && props[propName].nodeType !== 1) {\n      throw new Error('Draggable\\'s offsetParent must be a DOM Node.');\n    }\n  },\n  /**\n   * `grid` specifies the x and y that dragging should snap to.\n   */\n  grid: _propTypes.default.arrayOf(_propTypes.default.number),\n  /**\n   * `handle` specifies a selector to be used as the handle that initiates drag.\n   *\n   * Example:\n   *\n   * ```jsx\n   *   let App = React.createClass({\n   *       render: function () {\n   *         return (\n   *            <Draggable handle=\".handle\">\n   *              <div>\n   *                  <div className=\"handle\">Click me to drag</div>\n   *                  <div>This is some other content</div>\n   *              </div>\n   *           </Draggable>\n   *         );\n   *       }\n   *   });\n   * ```\n   */\n  handle: _propTypes.default.string,\n  /**\n   * `cancel` specifies a selector to be used to prevent drag initialization.\n   *\n   * Example:\n   *\n   * ```jsx\n   *   let App = React.createClass({\n   *       render: function () {\n   *           return(\n   *               <Draggable cancel=\".cancel\">\n   *                   <div>\n   *                     <div className=\"cancel\">You can't drag from here</div>\n   *                     <div>Dragging here works fine</div>\n   *                   </div>\n   *               </Draggable>\n   *           );\n   *       }\n   *   });\n   * ```\n   */\n  cancel: _propTypes.default.string,\n  /* If running in React Strict mode, ReactDOM.findDOMNode() is deprecated.\n   * Unfortunately, in order for <Draggable> to work properly, we need raw access\n   * to the underlying DOM node. If you want to avoid the warning, pass a `nodeRef`\n   * as in this example:\n   *\n   * function MyComponent() {\n   *   const nodeRef = React.useRef(null);\n   *   return (\n   *     <Draggable nodeRef={nodeRef}>\n   *       <div ref={nodeRef}>Example Target</div>\n   *     </Draggable>\n   *   );\n   * }\n   *\n   * This can be used for arbitrarily nested components, so long as the ref ends up\n   * pointing to the actual child DOM node and not a custom component.\n   */\n  nodeRef: _propTypes.default.object,\n  /**\n   * Called when dragging starts.\n   * If this function returns the boolean false, dragging will be canceled.\n   */\n  onStart: _propTypes.default.func,\n  /**\n   * Called while dragging.\n   * If this function returns the boolean false, dragging will be canceled.\n   */\n  onDrag: _propTypes.default.func,\n  /**\n   * Called when dragging stops.\n   * If this function returns the boolean false, the drag will remain active.\n   */\n  onStop: _propTypes.default.func,\n  /**\n   * A workaround option which can be passed if onMouseDown needs to be accessed,\n   * since it'll always be blocked (as there is internal use of onMouseDown)\n   */\n  onMouseDown: _propTypes.default.func,\n  /**\n   * `scale`, if set, applies scaling while dragging an element\n   */\n  scale: _propTypes.default.number,\n  /**\n   * These properties should be defined on the child, not here.\n   */\n  className: _shims.dontSetMe,\n  style: _shims.dontSetMe,\n  transform: _shims.dontSetMe\n});\n_defineProperty(DraggableCore, \"defaultProps\", {\n  allowAnyClick: false,\n  // by default only accept left click\n  disabled: false,\n  enableUserSelectHack: true,\n  onStart: function () {},\n  onDrag: function () {},\n  onStop: function () {},\n  onMouseDown: function () {},\n  scale: 1\n});","\"use strict\";\n\nconst {\n  default: Draggable,\n  DraggableCore\n} = require('./Draggable');\n\n// Previous versions of this lib exported <Draggable> as the root export. As to no-// them, or TypeScript, we export *both* as the root and as 'default'.\n// See https://github.com/mzabriskie/react-draggable/pull/254\n// and https://github.com/mzabriskie/react-draggable/issues/266\nmodule.exports = Draggable;\nmodule.exports.default = Draggable;\nmodule.exports.DraggableCore = DraggableCore;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addClassName = addClassName;\nexports.addEvent = addEvent;\nexports.addUserSelectStyles = addUserSelectStyles;\nexports.createCSSTransform = createCSSTransform;\nexports.createSVGTransform = createSVGTransform;\nexports.getTouch = getTouch;\nexports.getTouchIdentifier = getTouchIdentifier;\nexports.getTranslation = getTranslation;\nexports.innerHeight = innerHeight;\nexports.innerWidth = innerWidth;\nexports.matchesSelector = matchesSelector;\nexports.matchesSelectorAndParentsTo = matchesSelectorAndParentsTo;\nexports.offsetXYFromParent = offsetXYFromParent;\nexports.outerHeight = outerHeight;\nexports.outerWidth = outerWidth;\nexports.removeClassName = removeClassName;\nexports.removeEvent = removeEvent;\nexports.removeUserSelectStyles = removeUserSelectStyles;\nvar _shims = require(\"./shims\");\nvar _getPrefix = _interopRequireWildcard(require(\"./getPrefix\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n/*:: import type {ControlPosition, PositionOffsetControlPosition, MouseTouchEvent} from './types';*/\nlet matchesSelectorFunc = '';\nfunction matchesSelector(el /*: Node*/, selector /*: string*/) /*: boolean*/{\n  if (!matchesSelectorFunc) {\n    matchesSelectorFunc = (0, _shims.findInArray)(['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'], function (method) {\n      // $FlowIgnore: Doesn't think elements are indexable\n      return (0, _shims.isFunction)(el[method]);\n    });\n  }\n\n  // Might not be found entirely (not an Element?) - in that case, bail\n  // $FlowIgnore: Doesn't think elements are indexable\n  if (!(0, _shims.isFunction)(el[matchesSelectorFunc])) return false;\n\n  // $FlowIgnore: Doesn't think elements are indexable\n  return el[matchesSelectorFunc](selector);\n}\n\n// Works up the tree to the draggable itself attempting to match selector.\nfunction matchesSelectorAndParentsTo(el /*: Node*/, selector /*: string*/, baseNode /*: Node*/) /*: boolean*/{\n  let node = el;\n  do {\n    if (matchesSelector(node, selector)) return true;\n    if (node === baseNode) return false;\n    // $FlowIgnore[incompatible-type]\n    node = node.parentNode;\n  } while (node);\n  return false;\n}\nfunction addEvent(el /*: ?Node*/, event /*: string*/, handler /*: Function*/, inputOptions /*: Object*/) /*: void*/{\n  if (!el) return;\n  const options = {\n    capture: true,\n    ...inputOptions\n  };\n  // $FlowIgnore[method-unbinding]\n  if (el.addEventListener) {\n    el.addEventListener(event, handler, options);\n  } else if (el.attachEvent) {\n    el.attachEvent('on' + event, handler);\n  } else {\n    // $FlowIgnore: Doesn't think elements are indexable\n    el['on' + event] = handler;\n  }\n}\nfunction removeEvent(el /*: ?Node*/, event /*: string*/, handler /*: Function*/, inputOptions /*: Object*/) /*: void*/{\n  if (!el) return;\n  const options = {\n    capture: true,\n    ...inputOptions\n  };\n  // $FlowIgnore[method-unbinding]\n  if (el.removeEventListener) {\n    el.removeEventListener(event, handler, options);\n  } else if (el.detachEvent) {\n    el.detachEvent('on' + event, handler);\n  } else {\n    // $FlowIgnore: Doesn't think elements are indexable\n    el['on' + event] = null;\n  }\n}\nfunction outerHeight(node /*: HTMLElement*/) /*: number*/{\n  // This is deliberately excluding margin for our calculations, since we are using\n  // offsetTop which is including margin. See getBoundPosition\n  let height = node.clientHeight;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  height += (0, _shims.int)(computedStyle.borderTopWidth);\n  height += (0, _shims.int)(computedStyle.borderBottomWidth);\n  return height;\n}\nfunction outerWidth(node /*: HTMLElement*/) /*: number*/{\n  // This is deliberately excluding margin for our calculations, since we are using\n  // offsetLeft which is including margin. See getBoundPosition\n  let width = node.clientWidth;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  width += (0, _shims.int)(computedStyle.borderLeftWidth);\n  width += (0, _shims.int)(computedStyle.borderRightWidth);\n  return width;\n}\nfunction innerHeight(node /*: HTMLElement*/) /*: number*/{\n  let height = node.clientHeight;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  height -= (0, _shims.int)(computedStyle.paddingTop);\n  height -= (0, _shims.int)(computedStyle.paddingBottom);\n  return height;\n}\nfunction innerWidth(node /*: HTMLElement*/) /*: number*/{\n  let width = node.clientWidth;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  width -= (0, _shims.int)(computedStyle.paddingLeft);\n  width -= (0, _shims.int)(computedStyle.paddingRight);\n  return width;\n}\n/*:: interface EventWithOffset {\n  clientX: number, clientY: number\n}*/\n// Get from offsetParent\nfunction offsetXYFromParent(evt /*: EventWithOffset*/, offsetParent /*: HTMLElement*/, scale /*: number*/) /*: ControlPosition*/{\n  const isBody = offsetParent === offsetParent.ownerDocument.body;\n  const offsetParentRect = isBody ? {\n    left: 0,\n    top: 0\n  } : offsetParent.getBoundingClientRect();\n  const x = (evt.clientX + offsetParent.scrollLeft - offsetParentRect.left) / scale;\n  const y = (evt.clientY + offsetParent.scrollTop - offsetParentRect.top) / scale;\n  return {\n    x,\n    y\n  };\n}\nfunction createCSSTransform(controlPos /*: ControlPosition*/, positionOffset /*: PositionOffsetControlPosition*/) /*: Object*/{\n  const translation = getTranslation(controlPos, positionOffset, 'px');\n  return {\n    [(0, _getPrefix.browserPrefixToKey)('transform', _getPrefix.default)]: translation\n  };\n}\nfunction createSVGTransform(controlPos /*: ControlPosition*/, positionOffset /*: PositionOffsetControlPosition*/) /*: string*/{\n  const translation = getTranslation(controlPos, positionOffset, '');\n  return translation;\n}\nfunction getTranslation(_ref /*:: */, positionOffset /*: PositionOffsetControlPosition*/, unitSuffix /*: string*/) /*: string*/{\n  let {\n    x,\n    y\n  } /*: ControlPosition*/ = _ref /*: ControlPosition*/;\n  let translation = \"translate(\".concat(x).concat(unitSuffix, \",\").concat(y).concat(unitSuffix, \")\");\n  if (positionOffset) {\n    const defaultX = \"\".concat(typeof positionOffset.x === 'string' ? positionOffset.x : positionOffset.x + unitSuffix);\n    const defaultY = \"\".concat(typeof positionOffset.y === 'string' ? positionOffset.y : positionOffset.y + unitSuffix);\n    translation = \"translate(\".concat(defaultX, \", \").concat(defaultY, \")\") + translation;\n  }\n  return translation;\n}\nfunction getTouch(e /*: MouseTouchEvent*/, identifier /*: number*/) /*: ?{clientX: number, clientY: number}*/{\n  return e.targetTouches && (0, _shims.findInArray)(e.targetTouches, t => identifier === t.identifier) || e.changedTouches && (0, _shims.findInArray)(e.changedTouches, t => identifier === t.identifier);\n}\nfunction getTouchIdentifier(e /*: MouseTouchEvent*/) /*: ?number*/{\n  if (e.targetTouches && e.targetTouches[0]) return e.targetTouches[0].identifier;\n  if (e.changedTouches && e.changedTouches[0]) return e.changedTouches[0].identifier;\n}\n\n// User-select Hacks:\n//\n// Useful for preventing blue highlights all over everything when dragging.\n\n// Note we're passing `document` b/c we could be iframed\nfunction addUserSelectStyles(doc /*: ?Document*/) {\n  if (!doc) return;\n  let styleEl = doc.getElementById('react-draggable-style-el');\n  if (!styleEl) {\n    styleEl = doc.createElement('style');\n    styleEl.type = 'text/css';\n    styleEl.id = 'react-draggable-style-el';\n    styleEl.innerHTML = '.react-draggable-transparent-selection *::-moz-selection {all: inherit;}\\n';\n    styleEl.innerHTML += '.react-draggable-transparent-selection *::selection {all: inherit;}\\n';\n    doc.getElementsByTagName('head')[0].appendChild(styleEl);\n  }\n  if (doc.body) addClassName(doc.body, 'react-draggable-transparent-selection');\n}\nfunction removeUserSelectStyles(doc /*: ?Document*/) {\n  if (!doc) return;\n  try {\n    if (doc.body) removeClassName(doc.body, 'react-draggable-transparent-selection');\n    // $FlowIgnore: IE\n    if (doc.selection) {\n      // $FlowIgnore: IE\n      doc.selection.empty();\n    } else {\n      // Remove selection caused by scroll, unless it's a focused input\n      // (we use doc.defaultView in case we're in an iframe)\n      const selection = (doc.defaultView || window).getSelection();\n      if (selection && selection.type !== 'Caret') {\n        selection.removeAllRanges();\n      }\n    }\n  } catch (e) {\n    // probably IE\n  }\n}\nfunction addClassName(el /*: HTMLElement*/, className /*: string*/) {\n  if (el.classList) {\n    el.classList.add(className);\n  } else {\n    if (!el.className.match(new RegExp(\"(?:^|\\\\s)\".concat(className, \"(?!\\\\S)\")))) {\n      el.className += \" \".concat(className);\n    }\n  }\n}\nfunction removeClassName(el /*: HTMLElement*/, className /*: string*/) {\n  if (el.classList) {\n    el.classList.remove(className);\n  } else {\n    el.className = el.className.replace(new RegExp(\"(?:^|\\\\s)\".concat(className, \"(?!\\\\S)\"), 'g'), '');\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.browserPrefixToKey = browserPrefixToKey;\nexports.browserPrefixToStyle = browserPrefixToStyle;\nexports.default = void 0;\nexports.getPrefix = getPrefix;\nconst prefixes = ['Moz', 'Webkit', 'O', 'ms'];\nfunction getPrefix() /*: string*/{\n  var _window$document;\n  let prop /*: string*/ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'transform';\n  // Ensure we're running in an environment where there is actually a global\n  // `window` obj\n  if (typeof window === 'undefined') return '';\n\n  // If we're in a pseudo-browser server-side environment, this access\n  // path may not exist, so bail out if it doesn't.\n  const style = (_window$document = window.document) === null || _window$document === void 0 || (_window$document = _window$document.documentElement) === null || _window$document === void 0 ? void 0 : _window$document.style;\n  if (!style) return '';\n  if (prop in style) return '';\n  for (let i = 0; i < prefixes.length; i++) {\n    if (browserPrefixToKey(prop, prefixes[i]) in style) return prefixes[i];\n  }\n  return '';\n}\nfunction browserPrefixToKey(prop /*: string*/, prefix /*: string*/) /*: string*/{\n  return prefix ? \"\".concat(prefix).concat(kebabToTitleCase(prop)) : prop;\n}\nfunction browserPrefixToStyle(prop /*: string*/, prefix /*: string*/) /*: string*/{\n  return prefix ? \"-\".concat(prefix.toLowerCase(), \"-\").concat(prop) : prop;\n}\nfunction kebabToTitleCase(str /*: string*/) /*: string*/{\n  let out = '';\n  let shouldCapitalize = true;\n  for (let i = 0; i < str.length; i++) {\n    if (shouldCapitalize) {\n      out += str[i].toUpperCase();\n      shouldCapitalize = false;\n    } else if (str[i] === '-') {\n      shouldCapitalize = true;\n    } else {\n      out += str[i];\n    }\n  }\n  return out;\n}\n\n// Default export is the prefix itself, like 'Moz', 'Webkit', etc\n// Note that you may have to re-test for certain things; for instance, Chrome 50\n// can handle unprefixed `transform`, but not unprefixed `user-select`\nvar _default = exports.default = (getPrefix() /*: string*/);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = log;\n/*eslint no-console:0*/\nfunction log() {\n  if (undefined) console.log(...arguments);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canDragX = canDragX;\nexports.canDragY = canDragY;\nexports.createCoreData = createCoreData;\nexports.createDraggableData = createDraggableData;\nexports.getBoundPosition = getBoundPosition;\nexports.getControlPosition = getControlPosition;\nexports.snapToGrid = snapToGrid;\nvar _shims = require(\"./shims\");\nvar _domFns = require(\"./domFns\");\n/*:: import type Draggable from '../Draggable';*/\n/*:: import type {Bounds, ControlPosition, DraggableData, MouseTouchEvent} from './types';*/\n/*:: import type DraggableCore from '../DraggableCore';*/\nfunction getBoundPosition(draggable /*: Draggable*/, x /*: number*/, y /*: number*/) /*: [number, number]*/{\n  // If no bounds, short-circuit and move on\n  if (!draggable.props.bounds) return [x, y];\n\n  // Clone new bounds\n  let {\n    bounds\n  } = draggable.props;\n  bounds = typeof bounds === 'string' ? bounds : cloneBounds(bounds);\n  const node = findDOMNode(draggable);\n  if (typeof bounds === 'string') {\n    const {\n      ownerDocument\n    } = node;\n    const ownerWindow = ownerDocument.defaultView;\n    let boundNode;\n    if (bounds === 'parent') {\n      boundNode = node.parentNode;\n    } else {\n      boundNode = ownerDocument.querySelector(bounds);\n    }\n    if (!(boundNode instanceof ownerWindow.HTMLElement)) {\n      throw new Error('Bounds selector \"' + bounds + '\" could not find an element.');\n    }\n    const boundNodeEl /*: HTMLElement*/ = boundNode; // for Flow, can't seem to refine correctly\n    const nodeStyle = ownerWindow.getComputedStyle(node);\n    const boundNodeStyle = ownerWindow.getComputedStyle(boundNodeEl);\n    // Compute bounds. This is a pain with padding and offsets but this gets it exactly right.\n    bounds = {\n      left: -node.offsetLeft + (0, _shims.int)(boundNodeStyle.paddingLeft) + (0, _shims.int)(nodeStyle.marginLeft),\n      top: -node.offsetTop + (0, _shims.int)(boundNodeStyle.paddingTop) + (0, _shims.int)(nodeStyle.marginTop),\n      right: (0, _domFns.innerWidth)(boundNodeEl) - (0, _domFns.outerWidth)(node) - node.offsetLeft + (0, _shims.int)(boundNodeStyle.paddingRight) - (0, _shims.int)(nodeStyle.marginRight),\n      bottom: (0, _domFns.innerHeight)(boundNodeEl) - (0, _domFns.outerHeight)(node) - node.offsetTop + (0, _shims.int)(boundNodeStyle.paddingBottom) - (0, _shims.int)(nodeStyle.marginBottom)\n    };\n  }\n\n  // Keep x and y below right and bottom limits...\n  if ((0, _shims.isNum)(bounds.right)) x = Math.min(x, bounds.right);\n  if ((0, _shims.isNum)(bounds.bottom)) y = Math.min(y, bounds.bottom);\n\n  // But above left and top limits.\n  if ((0, _shims.isNum)(bounds.left)) x = Math.max(x, bounds.left);\n  if ((0, _shims.isNum)(bounds.top)) y = Math.max(y, bounds.top);\n  return [x, y];\n}\nfunction snapToGrid(grid /*: [number, number]*/, pendingX /*: number*/, pendingY /*: number*/) /*: [number, number]*/{\n  const x = Math.round(pendingX / grid[0]) * grid[0];\n  const y = Math.round(pendingY / grid[1]) * grid[1];\n  return [x, y];\n}\nfunction canDragX(draggable /*: Draggable*/) /*: boolean*/{\n  return draggable.props.axis === 'both' || draggable.props.axis === 'x';\n}\nfunction canDragY(draggable /*: Draggable*/) /*: boolean*/{\n  return draggable.props.axis === 'both' || draggable.props.axis === 'y';\n}\n\n// Get {x, y} positions from event.\nfunction getControlPosition(e /*: MouseTouchEvent*/, touchIdentifier /*: ?number*/, draggableCore /*: DraggableCore*/) /*: ?ControlPosition*/{\n  const touchObj = typeof touchIdentifier === 'number' ? (0, _domFns.getTouch)(e, touchIdentifier) : null;\n  if (typeof touchIdentifier === 'number' && !touchObj) return null; // not the right touch\n  const node = findDOMNode(draggableCore);\n  // User can provide an offsetParent if desired.\n  const offsetParent = draggableCore.props.offsetParent || node.offsetParent || node.ownerDocument.body;\n  return (0, _domFns.offsetXYFromParent)(touchObj || e, offsetParent, draggableCore.props.scale);\n}\n\n// Create an data object exposed by <DraggableCore>'s events\nfunction createCoreData(draggable /*: DraggableCore*/, x /*: number*/, y /*: number*/) /*: DraggableData*/{\n  const isStart = !(0, _shims.isNum)(draggable.lastX);\n  const node = findDOMNode(draggable);\n  if (isStart) {\n    // If this is our first move, use the x and y as last coords.\n    return {\n      node,\n      deltaX: 0,\n      deltaY: 0,\n      lastX: x,\n      lastY: y,\n      x,\n      y\n    };\n  } else {\n    // Otherwise calculate proper values.\n    return {\n      node,\n      deltaX: x - draggable.lastX,\n      deltaY: y - draggable.lastY,\n      lastX: draggable.lastX,\n      lastY: draggable.lastY,\n      x,\n      y\n    };\n  }\n}\n\n// Create an data exposed by <Draggable>'s events\nfunction createDraggableData(draggable /*: Draggable*/, coreData /*: DraggableData*/) /*: DraggableData*/{\n  const scale = draggable.props.scale;\n  return {\n    node: coreData.node,\n    x: draggable.state.x + coreData.deltaX / scale,\n    y: draggable.state.y + coreData.deltaY / scale,\n    deltaX: coreData.deltaX / scale,\n    deltaY: coreData.deltaY / scale,\n    lastX: draggable.state.x,\n    lastY: draggable.state.y\n  };\n}\n\n// A lot faster than stringify/parse\nfunction cloneBounds(bounds /*: Bounds*/) /*: Bounds*/{\n  return {\n    left: bounds.left,\n    top: bounds.top,\n    right: bounds.right,\n    bottom: bounds.bottom\n  };\n}\nfunction findDOMNode(draggable /*: Draggable | DraggableCore*/) /*: HTMLElement*/{\n  const node = draggable.findDOMNode();\n  if (!node) {\n    throw new Error('<DraggableCore>: Unmounted during event!');\n  }\n  // $FlowIgnore we can't assert on HTMLElement due to tests... FIXME\n  return node;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dontSetMe = dontSetMe;\nexports.findInArray = findInArray;\nexports.int = int;\nexports.isFunction = isFunction;\nexports.isNum = isNum;\n// @credits https://gist.github.com/rogozhnikoff/a43cfed27c41e4e68cdc\nfunction findInArray(array /*: Array<any> | TouchList*/, callback /*: Function*/) /*: any*/{\n  for (let i = 0, length = array.length; i < length; i++) {\n    if (callback.apply(callback, [array[i], i, array])) return array[i];\n  }\n}\nfunction isFunction(func /*: any*/) /*: boolean %checks*/{\n  // $FlowIgnore[method-unbinding]\n  return typeof func === 'function' || Object.prototype.toString.call(func) === '[object Function]';\n}\nfunction isNum(num /*: any*/) /*: boolean %checks*/{\n  return typeof num === 'number' && !isNaN(num);\n}\nfunction int(a /*: string*/) /*: number*/{\n  return parseInt(a, 10);\n}\nfunction dontSetMe(props /*: Object*/, propName /*: string*/, componentName /*: string*/) /*: ?Error*/{\n  if (props[propName]) {\n    return new Error(\"Invalid prop \".concat(propName, \" passed to \").concat(componentName, \" - do not set this, set it on the child.\"));\n  }\n}","\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _reactDraggable = require(\"react-draggable\");\nvar _utils = require(\"./utils\");\nvar _propTypes = require(\"./propTypes\");\nvar _excluded = [\"children\", \"className\", \"draggableOpts\", \"width\", \"height\", \"handle\", \"handleSize\", \"lockAspectRatio\", \"axis\", \"minConstraints\", \"maxConstraints\", \"onResize\", \"onResizeStop\", \"onResizeStart\", \"resizeHandles\", \"transformScale\"];\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// The base <Resizable> component.\n// This component does not have state and relies on the parent to set its props based on callback data.\nvar Resizable = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Resizable, _React$Component);\n  function Resizable() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.handleRefs = {};\n    _this.lastHandleRect = null;\n    _this.slack = null;\n    return _this;\n  }\n  var _proto = Resizable.prototype;\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.resetData();\n  };\n  _proto.resetData = function resetData() {\n    this.lastHandleRect = this.slack = null;\n  }\n\n  // Clamp width and height within provided constraints\n  ;\n  _proto.runConstraints = function runConstraints(width, height) {\n    var _this$props = this.props,\n      minConstraints = _this$props.minConstraints,\n      maxConstraints = _this$props.maxConstraints,\n      lockAspectRatio = _this$props.lockAspectRatio;\n    // short circuit\n    if (!minConstraints && !maxConstraints && !lockAspectRatio) return [width, height];\n\n    // If constraining to min and max, we need to also fit width and height to aspect ratio.\n    if (lockAspectRatio) {\n      var ratio = this.props.width / this.props.height;\n      var deltaW = width - this.props.width;\n      var deltaH = height - this.props.height;\n\n      // Find which coordinate was greater and should push the other toward it.\n      // E.g.:\n      // ratio = 1, deltaW = 10, deltaH = 5, deltaH should become 10.\n      // ratio = 2, deltaW = 10, deltaH = 6, deltaW should become 12.\n      if (Math.abs(deltaW) > Math.abs(deltaH * ratio)) {\n        height = width / ratio;\n      } else {\n        width = height * ratio;\n      }\n    }\n    var oldW = width,\n      oldH = height;\n\n    // Add slack to the values used to calculate bound position. This will ensure that if\n    // we start removing slack, the element won't react to it right away until it's been\n    // completely removed.\n    var _ref = this.slack || [0, 0],\n      slackW = _ref[0],\n      slackH = _ref[1];\n    width += slackW;\n    height += slackH;\n    if (minConstraints) {\n      width = Math.max(minConstraints[0], width);\n      height = Math.max(minConstraints[1], height);\n    }\n    if (maxConstraints) {\n      width = Math.min(maxConstraints[0], width);\n      height = Math.min(maxConstraints[1], height);\n    }\n\n    // If the width or height changed, we must have introduced some slack. Record it for the next iteration.\n    this.slack = [slackW + (oldW - width), slackH + (oldH - height)];\n    return [width, height];\n  }\n\n  /**\n   * Wrapper around drag events to provide more useful data.\n   *\n   * @param  {String} handlerName Handler name to wrap.\n   * @return {Function}           Handler function.\n   */;\n  _proto.resizeHandler = function resizeHandler(handlerName, axis) {\n    var _this2 = this;\n    return function (e, _ref2) {\n      var node = _ref2.node,\n        deltaX = _ref2.deltaX,\n        deltaY = _ref2.deltaY;\n      // Reset data in case it was left over somehow (should not be possible)\n      if (handlerName === 'onResizeStart') _this2.resetData();\n\n      // Axis restrictions\n      var canDragX = (_this2.props.axis === 'both' || _this2.props.axis === 'x') && axis !== 'n' && axis !== 's';\n      var canDragY = (_this2.props.axis === 'both' || _this2.props.axis === 'y') && axis !== 'e' && axis !== 'w';\n      // No dragging possible.\n      if (!canDragX && !canDragY) return;\n\n      // Decompose axis for later use\n      var axisV = axis[0];\n      var axisH = axis[axis.length - 1]; // intentionally not axis[1], so that this catches axis === 'w' for example\n\n      // Track the element being dragged to account for changes in position.\n      // If a handle's position is changed between callbacks, we need to factor this in to the next callback.\n      // Failure to do so will cause the element to \"skip\" when resized upwards or leftwards.\n      var handleRect = node.getBoundingClientRect();\n      if (_this2.lastHandleRect != null) {\n        // If the handle has repositioned on either axis since last render,\n        // we need to increase our callback values by this much.\n        // Only checking 'n', 'w' since resizing by 's', 'w' won't affect the overall position on page,\n        if (axisH === 'w') {\n          var deltaLeftSinceLast = handleRect.left - _this2.lastHandleRect.left;\n          deltaX += deltaLeftSinceLast;\n        }\n        if (axisV === 'n') {\n          var deltaTopSinceLast = handleRect.top - _this2.lastHandleRect.top;\n          deltaY += deltaTopSinceLast;\n        }\n      }\n      // Storage of last rect so we know how much it has really moved.\n      _this2.lastHandleRect = handleRect;\n\n      // Reverse delta if using top or left drag handles.\n      if (axisH === 'w') deltaX = -deltaX;\n      if (axisV === 'n') deltaY = -deltaY;\n\n      // Update w/h by the deltas. Also factor in transformScale.\n      var width = _this2.props.width + (canDragX ? deltaX / _this2.props.transformScale : 0);\n      var height = _this2.props.height + (canDragY ? deltaY / _this2.props.transformScale : 0);\n\n      // Run user-provided constraints.\n      var _this2$runConstraints = _this2.runConstraints(width, height);\n      width = _this2$runConstraints[0];\n      height = _this2$runConstraints[1];\n      var dimensionsChanged = width !== _this2.props.width || height !== _this2.props.height;\n\n      // Call user-supplied callback if present.\n      var cb = typeof _this2.props[handlerName] === 'function' ? _this2.props[handlerName] : null;\n      // Don't call 'onResize' if dimensions haven't changed.\n      var shouldSkipCb = handlerName === 'onResize' && !dimensionsChanged;\n      if (cb && !shouldSkipCb) {\n        e.persist == null ? void 0 : e.persist();\n        cb(e, {\n          node: node,\n          size: {\n            width: width,\n            height: height\n          },\n          handle: axis\n        });\n      }\n\n      // Reset internal data\n      if (handlerName === 'onResizeStop') _this2.resetData();\n    };\n  }\n\n  // Render a resize handle given an axis & DOM ref. Ref *must* be attached for\n  // the underlying draggable library to work properly.\n  ;\n  _proto.renderResizeHandle = function renderResizeHandle(handleAxis, ref) {\n    var handle = this.props.handle;\n    // No handle provided, make the default\n    if (!handle) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"react-resizable-handle react-resizable-handle-\" + handleAxis,\n        ref: ref\n      });\n    }\n    // Handle is a function, such as:\n    // `handle={(handleAxis) => <span className={...} />}`\n    if (typeof handle === 'function') {\n      return handle(handleAxis, ref);\n    }\n    // Handle is a React component (composite or DOM).\n    var isDOMElement = typeof handle.type === 'string';\n    var props = _objectSpread({\n      ref: ref\n    }, isDOMElement ? {} : {\n      handleAxis: handleAxis\n    });\n    return /*#__PURE__*/React.cloneElement(handle, props);\n  };\n  _proto.render = function render() {\n    var _this3 = this;\n    // Pass along only props not meant for the `<Resizable>`.`\n    // eslint-disable-next-line no-unused-vars\n    var _this$props2 = this.props,\n      children = _this$props2.children,\n      className = _this$props2.className,\n      draggableOpts = _this$props2.draggableOpts,\n      width = _this$props2.width,\n      height = _this$props2.height,\n      handle = _this$props2.handle,\n      handleSize = _this$props2.handleSize,\n      lockAspectRatio = _this$props2.lockAspectRatio,\n      axis = _this$props2.axis,\n      minConstraints = _this$props2.minConstraints,\n      maxConstraints = _this$props2.maxConstraints,\n      onResize = _this$props2.onResize,\n      onResizeStop = _this$props2.onResizeStop,\n      onResizeStart = _this$props2.onResizeStart,\n      resizeHandles = _this$props2.resizeHandles,\n      transformScale = _this$props2.transformScale,\n      p = _objectWithoutPropertiesLoose(_this$props2, _excluded);\n\n    // What we're doing here is getting the child of this element, and cloning it with this element's props.\n    // We are then defining its children as:\n    // 1. Its original children (resizable's child's children), and\n    // 2. One or more draggable handles.\n    return (0, _utils.cloneElement)(children, _objectSpread(_objectSpread({}, p), {}, {\n      className: (className ? className + \" \" : '') + \"react-resizable\",\n      children: [].concat(children.props.children, resizeHandles.map(function (handleAxis) {\n        var _this3$handleRefs$han;\n        // Create a ref to the handle so that `<DraggableCore>` doesn't have to use ReactDOM.findDOMNode().\n        var ref = (_this3$handleRefs$han = _this3.handleRefs[handleAxis]) != null ? _this3$handleRefs$han : _this3.handleRefs[handleAxis] = /*#__PURE__*/React.createRef();\n        return /*#__PURE__*/React.createElement(_reactDraggable.DraggableCore, _extends({}, draggableOpts, {\n          nodeRef: ref,\n          key: \"resizableHandle-\" + handleAxis,\n          onStop: _this3.resizeHandler('onResizeStop', handleAxis),\n          onStart: _this3.resizeHandler('onResizeStart', handleAxis),\n          onDrag: _this3.resizeHandler('onResize', handleAxis)\n        }), _this3.renderResizeHandle(handleAxis, ref));\n      }))\n    }));\n  };\n  return Resizable;\n}(React.Component);\nexports.default = Resizable;\nResizable.propTypes = _propTypes.resizableProps;\nResizable.defaultProps = {\n  axis: 'both',\n  handleSize: [20, 20],\n  lockAspectRatio: false,\n  minConstraints: [20, 20],\n  maxConstraints: [Infinity, Infinity],\n  resizeHandles: ['se'],\n  transformScale: 1\n};","\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _Resizable = _interopRequireDefault(require(\"./Resizable\"));\nvar _propTypes2 = require(\"./propTypes\");\nvar _excluded = [\"handle\", \"handleSize\", \"onResize\", \"onResizeStart\", \"onResizeStop\", \"draggableOpts\", \"minConstraints\", \"maxConstraints\", \"lockAspectRatio\", \"axis\", \"width\", \"height\", \"resizeHandles\", \"style\", \"transformScale\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar ResizableBox = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(ResizableBox, _React$Component);\n  function ResizableBox() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      width: _this.props.width,\n      height: _this.props.height,\n      propsWidth: _this.props.width,\n      propsHeight: _this.props.height\n    };\n    _this.onResize = function (e, data) {\n      var size = data.size;\n      if (_this.props.onResize) {\n        e.persist == null ? void 0 : e.persist();\n        _this.setState(size, function () {\n          return _this.props.onResize && _this.props.onResize(e, data);\n        });\n      } else {\n        _this.setState(size);\n      }\n    };\n    return _this;\n  }\n  ResizableBox.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n    // If parent changes height/width, set that in our state.\n    if (state.propsWidth !== props.width || state.propsHeight !== props.height) {\n      return {\n        width: props.width,\n        height: props.height,\n        propsWidth: props.width,\n        propsHeight: props.height\n      };\n    }\n    return null;\n  };\n  var _proto = ResizableBox.prototype;\n  _proto.render = function render() {\n    // Basic wrapper around a Resizable instance.\n    // If you use Resizable directly, you are responsible for updating the child component\n    // with a new width and height.\n    var _this$props = this.props,\n      handle = _this$props.handle,\n      handleSize = _this$props.handleSize,\n      onResize = _this$props.onResize,\n      onResizeStart = _this$props.onResizeStart,\n      onResizeStop = _this$props.onResizeStop,\n      draggableOpts = _this$props.draggableOpts,\n      minConstraints = _this$props.minConstraints,\n      maxConstraints = _this$props.maxConstraints,\n      lockAspectRatio = _this$props.lockAspectRatio,\n      axis = _this$props.axis,\n      width = _this$props.width,\n      height = _this$props.height,\n      resizeHandles = _this$props.resizeHandles,\n      style = _this$props.style,\n      transformScale = _this$props.transformScale,\n      props = _objectWithoutPropertiesLoose(_this$props, _excluded);\n    return /*#__PURE__*/React.createElement(_Resizable.default, {\n      axis: axis,\n      draggableOpts: draggableOpts,\n      handle: handle,\n      handleSize: handleSize,\n      height: this.state.height,\n      lockAspectRatio: lockAspectRatio,\n      maxConstraints: maxConstraints,\n      minConstraints: minConstraints,\n      onResizeStart: onResizeStart,\n      onResize: this.onResize,\n      onResizeStop: onResizeStop,\n      resizeHandles: resizeHandles,\n      transformScale: transformScale,\n      width: this.state.width\n    }, /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n      style: _objectSpread(_objectSpread({}, style), {}, {\n        width: this.state.width + 'px',\n        height: this.state.height + 'px'\n      })\n    })));\n  };\n  return ResizableBox;\n}(React.Component);\nexports.default = ResizableBox;\n// PropTypes are identical to <Resizable>, except that children are not strictly required to be present.\nResizableBox.propTypes = _objectSpread(_objectSpread({}, _propTypes2.resizableProps), {}, {\n  children: _propTypes.default.element\n});","\"use strict\";\n\nexports.__esModule = true;\nexports.resizableProps = void 0;\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _reactDraggable = require(\"react-draggable\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar resizableProps = {\n  /*\n  * Restricts resizing to a particular axis (default: 'both')\n  * 'both' - allows resizing by width or height\n  * 'x' - only allows the width to be changed\n  * 'y' - only allows the height to be changed\n  * 'none' - disables resizing altogether\n  * */\n  axis: _propTypes.default.oneOf(['both', 'x', 'y', 'none']),\n  className: _propTypes.default.string,\n  /*\n  * Require that one and only one child be present.\n  * */\n  children: _propTypes.default.element.isRequired,\n  /*\n  * These will be passed wholesale to react-draggable's DraggableCore\n  * */\n  draggableOpts: _propTypes.default.shape({\n    allowAnyClick: _propTypes.default.bool,\n    cancel: _propTypes.default.string,\n    children: _propTypes.default.node,\n    disabled: _propTypes.default.bool,\n    enableUserSelectHack: _propTypes.default.bool,\n    offsetParent: _propTypes.default.node,\n    grid: _propTypes.default.arrayOf(_propTypes.default.number),\n    handle: _propTypes.default.string,\n    nodeRef: _propTypes.default.object,\n    onStart: _propTypes.default.func,\n    onDrag: _propTypes.default.func,\n    onStop: _propTypes.default.func,\n    onMouseDown: _propTypes.default.func,\n    scale: _propTypes.default.number\n  }),\n  /*\n  * Initial height\n  * */\n  height: function height() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var props = args[0];\n    // Required if resizing height or both\n    if (props.axis === 'both' || props.axis === 'y') {\n      var _PropTypes$number;\n      return (_PropTypes$number = _propTypes.default.number).isRequired.apply(_PropTypes$number, args);\n    }\n    return _propTypes.default.number.apply(_propTypes.default, args);\n  },\n  /*\n  * Customize cursor resize handle\n  * */\n  handle: _propTypes.default.oneOfType([_propTypes.default.node, _propTypes.default.func]),\n  /*\n  * If you change this, be sure to update your css\n  * */\n  handleSize: _propTypes.default.arrayOf(_propTypes.default.number),\n  lockAspectRatio: _propTypes.default.bool,\n  /*\n  * Max X & Y measure\n  * */\n  maxConstraints: _propTypes.default.arrayOf(_propTypes.default.number),\n  /*\n  * Min X & Y measure\n  * */\n  minConstraints: _propTypes.default.arrayOf(_propTypes.default.number),\n  /*\n  * Called on stop resize event\n  * */\n  onResizeStop: _propTypes.default.func,\n  /*\n  * Called on start resize event\n  * */\n  onResizeStart: _propTypes.default.func,\n  /*\n  * Called on resize event\n  * */\n  onResize: _propTypes.default.func,\n  /*\n  * Defines which resize handles should be rendered (default: 'se')\n  * 's' - South handle (bottom-center)\n  * 'w' - West handle (left-center)\n  * 'e' - East handle (right-center)\n  * 'n' - North handle (top-center)\n  * 'sw' - Southwest handle (bottom-left)\n  * 'nw' - Northwest handle (top-left)\n  * 'se' - Southeast handle (bottom-right)\n  * 'ne' - Northeast handle (top-center)\n  * */\n  resizeHandles: _propTypes.default.arrayOf(_propTypes.default.oneOf(['s', 'w', 'e', 'n', 'sw', 'nw', 'se', 'ne'])),\n  /*\n  * If `transform: scale(n)` is set on the parent, this should be set to `n`.\n  * */\n  transformScale: _propTypes.default.number,\n  /*\n   * Initial width\n   */\n  width: function width() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    var props = args[0];\n    // Required if resizing width or both\n    if (props.axis === 'both' || props.axis === 'x') {\n      var _PropTypes$number2;\n      return (_PropTypes$number2 = _propTypes.default.number).isRequired.apply(_PropTypes$number2, args);\n    }\n    return _propTypes.default.number.apply(_propTypes.default, args);\n  }\n};\nexports.resizableProps = resizableProps;","\"use strict\";\n\nexports.__esModule = true;\nexports.cloneElement = cloneElement;\nvar _react = _interopRequireDefault(require(\"react\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n// React.addons.cloneWithProps look-alike that merges style & className.\nfunction cloneElement(element, props) {\n  if (props.style && element.props.style) {\n    props.style = _objectSpread(_objectSpread({}, element.props.style), props.style);\n  }\n  if (props.className && element.props.className) {\n    props.className = element.props.className + \" \" + props.className;\n  }\n  return /*#__PURE__*/_react.default.cloneElement(element, props);\n}","'use strict';\nmodule.exports = function() {\n  throw new Error(\"Don't instantiate Resizable directly! Use require('react-resizable').Resizable\");\n};\n\nmodule.exports.Resizable = require('./build/Resizable').default;\nmodule.exports.ResizableBox = require('./build/ResizableBox').default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar react_1 = require(\"react\");\nvar useTimeoutFn_1 = tslib_1.__importDefault(require(\"./useTimeoutFn\"));\nfunction useDebounce(fn, ms, deps) {\n    if (ms === void 0) { ms = 0; }\n    if (deps === void 0) { deps = []; }\n    var _a = useTimeoutFn_1.default(fn, ms), isReady = _a[0], cancel = _a[1], reset = _a[2];\n    react_1.useEffect(reset, deps);\n    return [isReady, cancel];\n}\nexports.default = useDebounce;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nfunction useTimeoutFn(fn, ms) {\n    if (ms === void 0) { ms = 0; }\n    var ready = react_1.useRef(false);\n    var timeout = react_1.useRef();\n    var callback = react_1.useRef(fn);\n    var isReady = react_1.useCallback(function () { return ready.current; }, []);\n    var set = react_1.useCallback(function () {\n        ready.current = false;\n        timeout.current && clearTimeout(timeout.current);\n        timeout.current = setTimeout(function () {\n            ready.current = true;\n            callback.current();\n        }, ms);\n    }, [ms]);\n    var clear = react_1.useCallback(function () {\n        ready.current = null;\n        timeout.current && clearTimeout(timeout.current);\n    }, []);\n    // update ref when function changes\n    react_1.useEffect(function () {\n        callback.current = fn;\n    }, [fn]);\n    // set on mount, clear on unmount\n    react_1.useEffect(function () {\n        set();\n        return clear;\n    }, [ms]);\n    return [isReady, clear, set];\n}\nexports.default = useTimeoutFn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Generated automatically by nearley, version 2.20.1\n// http://github.com/Hardmath123/nearley\n// Bypasses TS6133. Allow declared but unused functions.\n// @ts-ignore\nfunction id(d) { return d[0]; }\nconst deepFlatten = (arr) => [].concat(...arr.map((v) => (Array.isArray(v) ? deepFlatten(v) : v)));\nfunction flat_string(d) {\n    if (d) {\n        if (Array.isArray(d))\n            return deepFlatten(d).join(\"\");\n        return d;\n    }\n    return \"\";\n}\n;\n;\n;\n;\nconst grammar = {\n    Lexer: undefined,\n    ParserRules: [\n        { \"name\": \"Reverse_path\", \"symbols\": [\"Path\"] },\n        { \"name\": \"Reverse_path$string$1\", \"symbols\": [{ \"literal\": \"<\" }, { \"literal\": \">\" }], \"postprocess\": (d) => d.join('') },\n        { \"name\": \"Reverse_path\", \"symbols\": [\"Reverse_path$string$1\"] },\n        { \"name\": \"Forward_path$subexpression$1$subexpression$1\", \"symbols\": [{ \"literal\": \"<\" }, /[pP]/, /[oO]/, /[sS]/, /[tT]/, /[mM]/, /[aA]/, /[sS]/, /[tT]/, /[eE]/, /[rR]/, { \"literal\": \"@\" }], \"postprocess\": function (d) { return d.join(\"\"); } },\n        { \"name\": \"Forward_path$subexpression$1\", \"symbols\": [\"Forward_path$subexpression$1$subexpression$1\", \"Domain\", { \"literal\": \">\" }] },\n        { \"name\": \"Forward_path\", \"symbols\": [\"Forward_path$subexpression$1\"] },\n        { \"name\": \"Forward_path$subexpression$2\", \"symbols\": [{ \"literal\": \"<\" }, /[pP]/, /[oO]/, /[sS]/, /[tT]/, /[mM]/, /[aA]/, /[sS]/, /[tT]/, /[eE]/, /[rR]/, { \"literal\": \">\" }], \"postprocess\": function (d) { return d.join(\"\"); } },\n        { \"name\": \"Forward_path\", \"symbols\": [\"Forward_path$subexpression$2\"] },\n        { \"name\": \"Forward_path\", \"symbols\": [\"Path\"] },\n        { \"name\": \"Path$ebnf$1$subexpression$1\", \"symbols\": [\"A_d_l\", { \"literal\": \":\" }] },\n        { \"name\": \"Path$ebnf$1\", \"symbols\": [\"Path$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"Path$ebnf$1\", \"symbols\": [], \"postprocess\": () => null },\n        { \"name\": \"Path\", \"symbols\": [{ \"literal\": \"<\" }, \"Path$ebnf$1\", \"Mailbox\", { \"literal\": \">\" }] },\n        { \"name\": \"A_d_l$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"A_d_l$ebnf$1$subexpression$1\", \"symbols\": [{ \"literal\": \",\" }, \"At_domain\"] },\n        { \"name\": \"A_d_l$ebnf$1\", \"symbols\": [\"A_d_l$ebnf$1\", \"A_d_l$ebnf$1$subexpression$1\"], \"postprocess\": (d) => d[0].concat([d[1]]) },\n        { \"name\": \"A_d_l\", \"symbols\": [\"At_domain\", \"A_d_l$ebnf$1\"] },\n        { \"name\": \"At_domain\", \"symbols\": [{ \"literal\": \"@\" }, \"Domain\"] },\n        { \"name\": \"Domain$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"Domain$ebnf$1$subexpression$1\", \"symbols\": [{ \"literal\": \".\" }, \"sub_domain\"] },\n        { \"name\": \"Domain$ebnf$1\", \"symbols\": [\"Domain$ebnf$1\", \"Domain$ebnf$1$subexpression$1\"], \"postprocess\": (d) => d[0].concat([d[1]]) },\n        { \"name\": \"Domain\", \"symbols\": [\"sub_domain\", \"Domain$ebnf$1\"] },\n        { \"name\": \"sub_domain\", \"symbols\": [\"U_label\"] },\n        { \"name\": \"Let_dig\", \"symbols\": [\"ALPHA_DIGIT\"], \"postprocess\": id },\n        { \"name\": \"Ldh_str$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"Ldh_str$ebnf$1\", \"symbols\": [\"Ldh_str$ebnf$1\", \"ALPHA_DIG_DASH\"], \"postprocess\": (d) => d[0].concat([d[1]]) },\n        { \"name\": \"Ldh_str\", \"symbols\": [\"Ldh_str$ebnf$1\", \"Let_dig\"] },\n        { \"name\": \"U_Let_dig\", \"symbols\": [\"ALPHA_DIGIT_U\"], \"postprocess\": id },\n        { \"name\": \"U_Ldh_str$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"U_Ldh_str$ebnf$1\", \"symbols\": [\"U_Ldh_str$ebnf$1\", \"ALPHA_DIG_DASH_U\"], \"postprocess\": (d) => d[0].concat([d[1]]) },\n        { \"name\": \"U_Ldh_str\", \"symbols\": [\"U_Ldh_str$ebnf$1\", \"U_Let_dig\"] },\n        { \"name\": \"U_label$ebnf$1$subexpression$1\", \"symbols\": [\"U_Ldh_str\"] },\n        { \"name\": \"U_label$ebnf$1\", \"symbols\": [\"U_label$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"U_label$ebnf$1\", \"symbols\": [], \"postprocess\": () => null },\n        { \"name\": \"U_label\", \"symbols\": [\"U_Let_dig\", \"U_label$ebnf$1\"] },\n        { \"name\": \"address_literal$subexpression$1\", \"symbols\": [\"IPv4_address_literal\"] },\n        { \"name\": \"address_literal$subexpression$1\", \"symbols\": [\"IPv6_address_literal\"] },\n        { \"name\": \"address_literal$subexpression$1\", \"symbols\": [\"General_address_literal\"] },\n        { \"name\": \"address_literal\", \"symbols\": [{ \"literal\": \"[\" }, \"address_literal$subexpression$1\", { \"literal\": \"]\" }] },\n        { \"name\": \"non_local_part\", \"symbols\": [\"Domain\"], \"postprocess\": function (d) {\n                return { DomainName: flat_string(d[0]) };\n            }\n        },\n        { \"name\": \"non_local_part\", \"symbols\": [\"address_literal\"], \"postprocess\": function (d) {\n                return { AddressLiteral: flat_string(d[0]) };\n            }\n        },\n        { \"name\": \"Mailbox\", \"symbols\": [\"Local_part\", { \"literal\": \"@\" }, \"non_local_part\"], \"postprocess\": function (d) {\n                return { localPart: flat_string(d[0]), domainPart: flat_string(d[2]) };\n            }\n        },\n        { \"name\": \"Local_part\", \"symbols\": [\"Dot_string\"], \"postprocess\": function (d) {\n                return { DotString: flat_string(d[0]) };\n            }\n        },\n        { \"name\": \"Local_part\", \"symbols\": [\"Quoted_string\"], \"postprocess\": function (d) {\n                return { QuotedString: flat_string(d[0]) };\n            }\n        },\n        { \"name\": \"Dot_string$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"Dot_string$ebnf$1$subexpression$1\", \"symbols\": [{ \"literal\": \".\" }, \"Atom\"] },\n        { \"name\": \"Dot_string$ebnf$1\", \"symbols\": [\"Dot_string$ebnf$1\", \"Dot_string$ebnf$1$subexpression$1\"], \"postprocess\": (d) => d[0].concat([d[1]]) },\n        { \"name\": \"Dot_string\", \"symbols\": [\"Atom\", \"Dot_string$ebnf$1\"] },\n        { \"name\": \"Atom$ebnf$1\", \"symbols\": [/[0-9A-Za-z!#$%&'*+\\-/=?^_`{|}~\\u0080-\\uFFFF/]/] },\n        { \"name\": \"Atom$ebnf$1\", \"symbols\": [\"Atom$ebnf$1\", /[0-9A-Za-z!#$%&'*+\\-/=?^_`{|}~\\u0080-\\uFFFF/]/], \"postprocess\": (d) => d[0].concat([d[1]]) },\n        { \"name\": \"Atom\", \"symbols\": [\"Atom$ebnf$1\"] },\n        { \"name\": \"Quoted_string$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"Quoted_string$ebnf$1\", \"symbols\": [\"Quoted_string$ebnf$1\", \"QcontentSMTP\"], \"postprocess\": (d) => d[0].concat([d[1]]) },\n        { \"name\": \"Quoted_string\", \"symbols\": [\"DQUOTE\", \"Quoted_string$ebnf$1\", \"DQUOTE\"] },\n        { \"name\": \"QcontentSMTP\", \"symbols\": [\"qtextSMTP\"] },\n        { \"name\": \"QcontentSMTP\", \"symbols\": [\"quoted_pairSMTP\"] },\n        { \"name\": \"quoted_pairSMTP\", \"symbols\": [{ \"literal\": \"\\\\\" }, /[\\x20-\\x7e]/] },\n        { \"name\": \"qtextSMTP\", \"symbols\": [/[\\x20-\\x21\\x23-\\x5b\\x5d-\\x7e\\u0080-\\uFFFF]/], \"postprocess\": id },\n        { \"name\": \"IPv4_address_literal$macrocall$2\", \"symbols\": [{ \"literal\": \".\" }, \"Snum\"] },\n        { \"name\": \"IPv4_address_literal$macrocall$1\", \"symbols\": [\"IPv4_address_literal$macrocall$2\", \"IPv4_address_literal$macrocall$2\", \"IPv4_address_literal$macrocall$2\"] },\n        { \"name\": \"IPv4_address_literal\", \"symbols\": [\"Snum\", \"IPv4_address_literal$macrocall$1\"] },\n        { \"name\": \"IPv6_address_literal$subexpression$1\", \"symbols\": [/[iI]/, /[pP]/, /[vV]/, { \"literal\": \"6\" }, { \"literal\": \":\" }], \"postprocess\": function (d) { return d.join(\"\"); } },\n        { \"name\": \"IPv6_address_literal\", \"symbols\": [\"IPv6_address_literal$subexpression$1\", \"IPv6_addr\"] },\n        { \"name\": \"General_address_literal$ebnf$1\", \"symbols\": [\"dcontent\"] },\n        { \"name\": \"General_address_literal$ebnf$1\", \"symbols\": [\"General_address_literal$ebnf$1\", \"dcontent\"], \"postprocess\": (d) => d[0].concat([d[1]]) },\n        { \"name\": \"General_address_literal\", \"symbols\": [\"Standardized_tag\", { \"literal\": \":\" }, \"General_address_literal$ebnf$1\"] },\n        { \"name\": \"Standardized_tag\", \"symbols\": [\"Ldh_str\"] },\n        { \"name\": \"dcontent\", \"symbols\": [/[\\x21-\\x5a\\x5e-\\x7e]/], \"postprocess\": id },\n        { \"name\": \"Snum\", \"symbols\": [\"DIGIT\"] },\n        { \"name\": \"Snum$subexpression$1\", \"symbols\": [/[1-9]/, \"DIGIT\"] },\n        { \"name\": \"Snum\", \"symbols\": [\"Snum$subexpression$1\"] },\n        { \"name\": \"Snum$subexpression$2\", \"symbols\": [{ \"literal\": \"1\" }, \"DIGIT\", \"DIGIT\"] },\n        { \"name\": \"Snum\", \"symbols\": [\"Snum$subexpression$2\"] },\n        { \"name\": \"Snum$subexpression$3\", \"symbols\": [{ \"literal\": \"2\" }, /[0-4]/, \"DIGIT\"] },\n        { \"name\": \"Snum\", \"symbols\": [\"Snum$subexpression$3\"] },\n        { \"name\": \"Snum$subexpression$4\", \"symbols\": [{ \"literal\": \"2\" }, { \"literal\": \"5\" }, /[0-5]/] },\n        { \"name\": \"Snum\", \"symbols\": [\"Snum$subexpression$4\"] },\n        { \"name\": \"IPv6_addr\", \"symbols\": [\"IPv6_full\"] },\n        { \"name\": \"IPv6_addr\", \"symbols\": [\"IPv6_comp\"] },\n        { \"name\": \"IPv6_addr\", \"symbols\": [\"IPv6v4_full\"] },\n        { \"name\": \"IPv6_addr\", \"symbols\": [\"IPv6v4_comp\"] },\n        { \"name\": \"IPv6_hex\", \"symbols\": [\"HEXDIG\"] },\n        { \"name\": \"IPv6_hex$subexpression$1\", \"symbols\": [\"HEXDIG\", \"HEXDIG\"] },\n        { \"name\": \"IPv6_hex\", \"symbols\": [\"IPv6_hex$subexpression$1\"] },\n        { \"name\": \"IPv6_hex$subexpression$2\", \"symbols\": [\"HEXDIG\", \"HEXDIG\", \"HEXDIG\"] },\n        { \"name\": \"IPv6_hex\", \"symbols\": [\"IPv6_hex$subexpression$2\"] },\n        { \"name\": \"IPv6_hex$subexpression$3\", \"symbols\": [\"HEXDIG\", \"HEXDIG\", \"HEXDIG\", \"HEXDIG\"] },\n        { \"name\": \"IPv6_hex\", \"symbols\": [\"IPv6_hex$subexpression$3\"] },\n        { \"name\": \"IPv6_full$macrocall$2\", \"symbols\": [{ \"literal\": \":\" }, \"IPv6_hex\"] },\n        { \"name\": \"IPv6_full$macrocall$1\", \"symbols\": [\"IPv6_full$macrocall$2\", \"IPv6_full$macrocall$2\", \"IPv6_full$macrocall$2\", \"IPv6_full$macrocall$2\", \"IPv6_full$macrocall$2\", \"IPv6_full$macrocall$2\", \"IPv6_full$macrocall$2\"] },\n        { \"name\": \"IPv6_full\", \"symbols\": [\"IPv6_hex\", \"IPv6_full$macrocall$1\"] },\n        { \"name\": \"IPv6_comp$ebnf$1$subexpression$1$macrocall$2\", \"symbols\": [{ \"literal\": \":\" }, \"IPv6_hex\"] },\n        { \"name\": \"IPv6_comp$ebnf$1$subexpression$1$macrocall$1\", \"symbols\": [\"IPv6_comp$ebnf$1$subexpression$1$macrocall$2\", \"IPv6_comp$ebnf$1$subexpression$1$macrocall$2\", \"IPv6_comp$ebnf$1$subexpression$1$macrocall$2\", \"IPv6_comp$ebnf$1$subexpression$1$macrocall$2\", \"IPv6_comp$ebnf$1$subexpression$1$macrocall$2\"] },\n        { \"name\": \"IPv6_comp$ebnf$1$subexpression$1\", \"symbols\": [\"IPv6_hex\", \"IPv6_comp$ebnf$1$subexpression$1$macrocall$1\"] },\n        { \"name\": \"IPv6_comp$ebnf$1\", \"symbols\": [\"IPv6_comp$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"IPv6_comp$ebnf$1\", \"symbols\": [], \"postprocess\": () => null },\n        { \"name\": \"IPv6_comp$string$1\", \"symbols\": [{ \"literal\": \":\" }, { \"literal\": \":\" }], \"postprocess\": (d) => d.join('') },\n        { \"name\": \"IPv6_comp$ebnf$2$subexpression$1$macrocall$2\", \"symbols\": [{ \"literal\": \":\" }, \"IPv6_hex\"] },\n        { \"name\": \"IPv6_comp$ebnf$2$subexpression$1$macrocall$1\", \"symbols\": [\"IPv6_comp$ebnf$2$subexpression$1$macrocall$2\", \"IPv6_comp$ebnf$2$subexpression$1$macrocall$2\", \"IPv6_comp$ebnf$2$subexpression$1$macrocall$2\", \"IPv6_comp$ebnf$2$subexpression$1$macrocall$2\", \"IPv6_comp$ebnf$2$subexpression$1$macrocall$2\"] },\n        { \"name\": \"IPv6_comp$ebnf$2$subexpression$1\", \"symbols\": [\"IPv6_hex\", \"IPv6_comp$ebnf$2$subexpression$1$macrocall$1\"] },\n        { \"name\": \"IPv6_comp$ebnf$2\", \"symbols\": [\"IPv6_comp$ebnf$2$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"IPv6_comp$ebnf$2\", \"symbols\": [], \"postprocess\": () => null },\n        { \"name\": \"IPv6_comp\", \"symbols\": [\"IPv6_comp$ebnf$1\", \"IPv6_comp$string$1\", \"IPv6_comp$ebnf$2\"] },\n        { \"name\": \"IPv6v4_full$macrocall$2\", \"symbols\": [{ \"literal\": \":\" }, \"IPv6_hex\"] },\n        { \"name\": \"IPv6v4_full$macrocall$1\", \"symbols\": [\"IPv6v4_full$macrocall$2\", \"IPv6v4_full$macrocall$2\", \"IPv6v4_full$macrocall$2\", \"IPv6v4_full$macrocall$2\", \"IPv6v4_full$macrocall$2\"] },\n        { \"name\": \"IPv6v4_full\", \"symbols\": [\"IPv6_hex\", \"IPv6v4_full$macrocall$1\", { \"literal\": \":\" }, \"IPv4_address_literal\"] },\n        { \"name\": \"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2\", \"symbols\": [{ \"literal\": \":\" }, \"IPv6_hex\"] },\n        { \"name\": \"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1\", \"symbols\": [\"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2\", \"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2\", \"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2\"] },\n        { \"name\": \"IPv6v4_comp$ebnf$1$subexpression$1\", \"symbols\": [\"IPv6_hex\", \"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1\"] },\n        { \"name\": \"IPv6v4_comp$ebnf$1\", \"symbols\": [\"IPv6v4_comp$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"IPv6v4_comp$ebnf$1\", \"symbols\": [], \"postprocess\": () => null },\n        { \"name\": \"IPv6v4_comp$string$1\", \"symbols\": [{ \"literal\": \":\" }, { \"literal\": \":\" }], \"postprocess\": (d) => d.join('') },\n        { \"name\": \"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2\", \"symbols\": [{ \"literal\": \":\" }, \"IPv6_hex\"] },\n        { \"name\": \"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1\", \"symbols\": [\"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2\", \"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2\", \"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2\"] },\n        { \"name\": \"IPv6v4_comp$ebnf$2$subexpression$1\", \"symbols\": [\"IPv6_hex\", \"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1\", { \"literal\": \":\" }] },\n        { \"name\": \"IPv6v4_comp$ebnf$2\", \"symbols\": [\"IPv6v4_comp$ebnf$2$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"IPv6v4_comp$ebnf$2\", \"symbols\": [], \"postprocess\": () => null },\n        { \"name\": \"IPv6v4_comp\", \"symbols\": [\"IPv6v4_comp$ebnf$1\", \"IPv6v4_comp$string$1\", \"IPv6v4_comp$ebnf$2\", \"IPv4_address_literal\"] },\n        { \"name\": \"DIGIT\", \"symbols\": [/[0-9]/], \"postprocess\": id },\n        { \"name\": \"ALPHA_DIGIT_U\", \"symbols\": [/[0-9A-Za-z\\u0080-\\uFFFF]/], \"postprocess\": id },\n        { \"name\": \"ALPHA_DIGIT\", \"symbols\": [/[0-9A-Za-z]/], \"postprocess\": id },\n        { \"name\": \"ALPHA_DIG_DASH\", \"symbols\": [/[-0-9A-Za-z]/], \"postprocess\": id },\n        { \"name\": \"ALPHA_DIG_DASH_U\", \"symbols\": [/[-0-9A-Za-z\\u0080-\\uFFFF]/], \"postprocess\": id },\n        { \"name\": \"HEXDIG\", \"symbols\": [/[0-9A-Fa-f]/], \"postprocess\": id },\n        { \"name\": \"DQUOTE\", \"symbols\": [{ \"literal\": \"\\\"\" }], \"postprocess\": id }\n    ],\n    ParserStart: \"Reverse_path\",\n};\nexports.default = grammar;\n//# sourceMappingURL=grammar.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canonicalize = exports.canonicalize_quoted_string = exports.normalize = exports.normalize_dot_string = exports.parse = void 0;\n// const punycode = require('punycode');\nconst nearley = require(\"nearley\");\nconst grammar_1 = __importDefault(require(\"./grammar\"));\ngrammar_1.default.ParserStart = \"Mailbox\";\nconst grammar = nearley.Grammar.fromCompiled(grammar_1.default);\n// <https://tools.ietf.org/html/rfc5321#section-4.1.2>\nfunction parse(address) {\n    const parser = new nearley.Parser(grammar);\n    parser.feed(address);\n    if (parser.results.length !== 1) {\n        throw new Error(\"address parsing failed: ambiguous grammar\");\n    }\n    return parser.results[0];\n}\nexports.parse = parse;\n/** Strip +something, strip '.'s, and map to lower case.\n */\nfunction normalize_dot_string(dot_string) {\n    const tagless = (function () {\n        const plus_loc = dot_string.indexOf(\"+\");\n        if (plus_loc === -1) {\n            return dot_string;\n        }\n        return dot_string.substr(0, plus_loc);\n    })();\n    const dotless = tagless.replace(/\\./g, \"\");\n    return dotless.toLowerCase();\n}\nexports.normalize_dot_string = normalize_dot_string;\n/** The G style address normalization.\n */\nfunction normalize(address) {\n    var _a, _b;\n    const a = parse(address);\n    const domain = (_a = a.domainPart.AddressLiteral) !== null && _a !== void 0 ? _a : a.domainPart.DomainName.toLowerCase();\n    const local = (_b = a.localPart.QuotedString) !== null && _b !== void 0 ? _b : normalize_dot_string(a.localPart.DotString);\n    return `${local}@${domain}`;\n}\nexports.normalize = normalize;\nfunction canonicalize_quoted_string(quoted_string) {\n    const unquoted = quoted_string.substr(1).substr(0, quoted_string.length - 2);\n    const unescaped = unquoted.replace(/(?:\\\\(.))/g, \"$1\");\n    const reescaped = unescaped.replace(/(?:([\"\\\\]))/g, \"\\\\$1\");\n    return `\"${reescaped}\"`; // re-quote\n}\nexports.canonicalize_quoted_string = canonicalize_quoted_string;\n/**\n * Apply a canonicalization consistent with standards to support\n * comparison as a string.\n */\nfunction canonicalize(address) {\n    var _a;\n    const a = parse(address);\n    const domain = (_a = a.domainPart.AddressLiteral) !== null && _a !== void 0 ? _a : a.domainPart.DomainName.toLowerCase();\n    const local = a.localPart.QuotedString\n        ? canonicalize_quoted_string(a.localPart.QuotedString)\n        : a.localPart.DotString;\n    return `${local}@${domain}`;\n}\nexports.canonicalize = canonicalize;\n//# sourceMappingURL=index.js.map","(function(module) {\n    'use strict';\n\n    module.exports.is_uri = is_iri;\n    module.exports.is_http_uri = is_http_iri;\n    module.exports.is_https_uri = is_https_iri;\n    module.exports.is_web_uri = is_web_iri;\n    // Create aliases\n    module.exports.isUri = is_iri;\n    module.exports.isHttpUri = is_http_iri;\n    module.exports.isHttpsUri = is_https_iri;\n    module.exports.isWebUri = is_web_iri;\n\n\n    // private function\n    // internal URI spitter method - direct from RFC 3986\n    var splitUri = function(uri) {\n        var splitted = uri.match(/(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?/);\n        return splitted;\n    };\n\n    function is_iri(value) {\n        if (!value) {\n            return;\n        }\n\n        // check for illegal characters\n        if (/[^a-z0-9\\:\\/\\?\\#\\[\\]\\@\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=\\.\\-\\_\\~\\%]/i.test(value)) return;\n\n        // check for hex escapes that aren't complete\n        if (/%[^0-9a-f]/i.test(value)) return;\n        if (/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)) return;\n\n        var splitted = [];\n        var scheme = '';\n        var authority = '';\n        var path = '';\n        var query = '';\n        var fragment = '';\n        var out = '';\n\n        // from RFC 3986\n        splitted = splitUri(value);\n        scheme = splitted[1]; \n        authority = splitted[2];\n        path = splitted[3];\n        query = splitted[4];\n        fragment = splitted[5];\n\n        // scheme and path are required, though the path can be empty\n        if (!(scheme && scheme.length && path.length >= 0)) return;\n\n        // if authority is present, the path must be empty or begin with a /\n        if (authority && authority.length) {\n            if (!(path.length === 0 || /^\\//.test(path))) return;\n        } else {\n            // if authority is not present, the path must not start with //\n            if (/^\\/\\//.test(path)) return;\n        }\n\n        // scheme must begin with a letter, then consist of letters, digits, +, ., or -\n        if (!/^[a-z][a-z0-9\\+\\-\\.]*$/.test(scheme.toLowerCase()))  return;\n\n        // re-assemble the URL per section 5.3 in RFC 3986\n        out += scheme + ':';\n        if (authority && authority.length) {\n            out += '//' + authority;\n        }\n\n        out += path;\n\n        if (query && query.length) {\n            out += '?' + query;\n        }\n\n        if (fragment && fragment.length) {\n            out += '#' + fragment;\n        }\n\n        return out;\n    }\n\n    function is_http_iri(value, allowHttps) {\n        if (!is_iri(value)) {\n            return;\n        }\n\n        var splitted = [];\n        var scheme = '';\n        var authority = '';\n        var path = '';\n        var port = '';\n        var query = '';\n        var fragment = '';\n        var out = '';\n\n        // from RFC 3986\n        splitted = splitUri(value);\n        scheme = splitted[1]; \n        authority = splitted[2];\n        path = splitted[3];\n        query = splitted[4];\n        fragment = splitted[5];\n\n        if (!scheme)  return;\n\n        if(allowHttps) {\n            if (scheme.toLowerCase() != 'https') return;\n        } else {\n            if (scheme.toLowerCase() != 'http') return;\n        }\n\n        // fully-qualified URIs must have an authority section that is\n        // a valid host\n        if (!authority) {\n            return;\n        }\n\n        // enable port component\n        if (/:(\\d+)$/.test(authority)) {\n            port = authority.match(/:(\\d+)$/)[0];\n            authority = authority.replace(/:\\d+$/, '');\n        }\n\n        out += scheme + ':';\n        out += '//' + authority;\n        \n        if (port) {\n            out += port;\n        }\n        \n        out += path;\n        \n        if(query && query.length){\n            out += '?' + query;\n        }\n\n        if(fragment && fragment.length){\n            out += '#' + fragment;\n        }\n        \n        return out;\n    }\n\n    function is_https_iri(value) {\n        return is_http_iri(value, true);\n    }\n\n    function is_web_iri(value) {\n        return (is_http_iri(value) || is_https_iri(value));\n    }\n\n})(module);\n","'use strict';\n\n/**\n* FUNCTION: isArray( value )\n*\tValidates if a value is an array.\n*\n* @param {*} value - value to be validated\n* @returns {Boolean} boolean indicating whether value is an array\n*/\nfunction isArray( value ) {\n\treturn Object.prototype.toString.call( value ) === '[object Array]';\n} // end FUNCTION isArray()\n\n// EXPORTS //\n\nmodule.exports = Array.isArray || isArray;\n","/**\n*\n*\tVALIDATE: function\n*\n*\n*\tDESCRIPTION:\n*\t\t- Validates if a value is a function.\n*\n*\n*\tNOTES:\n*\t\t[1]\n*\n*\n*\tTODO:\n*\t\t[1]\n*\n*\n*\tLICENSE:\n*\t\tMIT\n*\n*\tCopyright (c) 2014. Athan Reines.\n*\n*\n*\tAUTHOR:\n*\t\tAthan Reines. kgryte@gmail.com. 2014.\n*\n*/\n\n'use strict';\n\n/**\n* FUNCTION: isFunction( value )\n*\tValidates if a value is a function.\n*\n* @param {*} value - value to be validated\n* @returns {Boolean} boolean indicating whether value is a function\n*/\nfunction isFunction( value ) {\n\treturn ( typeof value === 'function' );\n} // end FUNCTION isFunction()\n\n\n// EXPORTS //\n\nmodule.exports = isFunction;\n","/**\n*\n*\tVALIDATE: integer-array\n*\n*\n*\tDESCRIPTION:\n*\t\t- Validates if a value is an integer array.\n*\n*\n*\tNOTES:\n*\t\t[1]\n*\n*\n*\tTODO:\n*\t\t[1]\n*\n*\n*\tLICENSE:\n*\t\tMIT\n*\n*\tCopyright (c) 2015. Athan Reines.\n*\n*\n*\tAUTHOR:\n*\t\tAthan Reines. kgryte@gmail.com. 2015.\n*\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isArray = require( 'validate.io-array' ),\n\tisInteger = require( 'validate.io-integer' );\n\n\n// IS INTEGER ARRAY //\n\n/**\n* FUNCTION: isIntegerArray( value )\n*\tValidates if a value is an integer array.\n*\n* @param {*} value - value to be validated\n* @returns {Boolean} boolean indicating if a value is an integer array\n*/\nfunction isIntegerArray( value ) {\n\tvar len;\n\tif ( !isArray( value ) ) {\n\t\treturn false;\n\t}\n\tlen = value.length;\n\tif ( !len ) {\n\t\treturn false;\n\t}\n\tfor ( var i = 0; i < len; i++ ) {\n\t\tif ( !isInteger( value[i] ) ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n} // end FUNCTION isIntegerArray()\n\n\n// EXPORTS //\n\nmodule.exports = isIntegerArray;\n","/**\n*\n*\tVALIDATE: integer\n*\n*\n*\tDESCRIPTION:\n*\t\t- Validates if a value is an integer.\n*\n*\n*\tNOTES:\n*\t\t[1]\n*\n*\n*\tTODO:\n*\t\t[1]\n*\n*\n*\tLICENSE:\n*\t\tMIT\n*\n*\tCopyright (c) 2014. Athan Reines.\n*\n*\n*\tAUTHOR:\n*\t\tAthan Reines. kgryte@gmail.com. 2014.\n*\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isNumber = require( 'validate.io-number' );\n\n\n// ISINTEGER //\n\n/**\n* FUNCTION: isInteger( value )\n*\tValidates if a value is an integer.\n*\n* @param {Number} value - value to be validated\n* @returns {Boolean} boolean indicating whether value is an integer\n*/\nfunction isInteger( value ) {\n\treturn isNumber( value ) && value%1 === 0;\n} // end FUNCTION isInteger()\n\n\n// EXPORTS //\n\nmodule.exports = isInteger;\n","/**\n*\n*\tVALIDATE: number\n*\n*\n*\tDESCRIPTION:\n*\t\t- Validates if a value is a number.\n*\n*\n*\tNOTES:\n*\t\t[1]\n*\n*\n*\tTODO:\n*\t\t[1]\n*\n*\n*\tLICENSE:\n*\t\tMIT\n*\n*\tCopyright (c) 2014. Athan Reines.\n*\n*\n*\tAUTHOR:\n*\t\tAthan Reines. kgryte@gmail.com. 2014.\n*\n*/\n\n'use strict';\n\n/**\n* FUNCTION: isNumber( value )\n*\tValidates if a value is a number.\n*\n* @param {*} value - value to be validated\n* @returns {Boolean} boolean indicating whether value is a number\n*/\nfunction isNumber( value ) {\n\treturn ( typeof value === 'number' || Object.prototype.toString.call( value ) === '[object Number]' ) && value.valueOf() === value.valueOf();\n} // end FUNCTION isNumber()\n\n\n// EXPORTS //\n\nmodule.exports = isNumber;\n","import { useMemo, useRef, useState } from 'react';\nimport { useSyncedRef } from '../useSyncedRef/index.js';\nexport function useAsync(asyncFn, initialValue) {\n    const [state, setState] = useState({\n        status: 'not-executed',\n        error: undefined,\n        result: initialValue,\n    });\n    const promiseRef = useRef();\n    const argsRef = useRef();\n    const methods = useSyncedRef({\n        execute(...params) {\n            argsRef.current = params;\n            const promise = asyncFn(...params);\n            promiseRef.current = promise;\n            setState((s) => ({ ...s, status: 'loading' }));\n            promise.then((result) => {\n                if (promise === promiseRef.current) {\n                    setState((s) => ({ ...s, status: 'success', error: undefined, result }));\n                }\n            }, (error) => {\n                if (promise === promiseRef.current) {\n                    setState((s) => ({ ...s, status: 'error', error }));\n                }\n            });\n            return promise;\n        },\n        reset() {\n            setState({\n                status: 'not-executed',\n                error: undefined,\n                result: initialValue,\n            });\n            promiseRef.current = undefined;\n            argsRef.current = undefined;\n        },\n    });\n    return [\n        state,\n        useMemo(() => ({\n            reset() {\n                methods.current.reset();\n            },\n            execute: (...params) => methods.current.execute(...params),\n        }), []),\n        { promise: promiseRef.current, lastArgs: argsRef.current },\n    ];\n}\n"],"names":["RealLogViewer","m","LogViewer","props","Progress","styles","theme","useStyles","ItemCardGrid","children","otherProps","classes","ItemCardHeader","title","subtitle","useAllKinds","catalogApi","error","loading","allKinds","useAsync","response","f","filterKinds","allowedKinds","forcedKinds","availableKinds","k","a","acc","kind","useEntityKindFilter","opts","filters","kindParameter","updateFilters","queryParamKind","selectedKind","setSelectedKind","EntityKindPicker","hidden","initialFilter","t","alertApi","options","items","key","Box","value","_theme","EntitySearchBar","textParameter","queryParamTextFilter","search","setSearch","event","useEntityTypeFilter","kindFilter","typeFilter","typeParameter","flattenedQueryTypes","selectedTypes","setSelectedTypes","availableTypes","setAvailableTypes","facets","facetsRef","oldFacets","newTypes","stillValidTypes","useCustomFieldExtensions","outlet","elements","LAYOUTS_KEY","LAYOUTS_WRAPPER_KEY","useCustomLayouts","makeStyles","ScaffolderField","displayLabel","rawErrors","errors","help","rawDescription","required","disabled","FormControl","SecretWidget","setSecrets","secrets","name","onChange","InputLabel","Input","e","SecretInput","description","DEFAULT_SCAFFOLDER_FIELD_EXTENSIONS","ScaffolderPageContextMenu","onEditorClicked","onActionsClicked","onTasksClicked","onCreateClicked","anchorEl","setAnchorEl","onOpen","onClose","IconButton","MoreVert","Popover","MenuList","MenuItem","ListItemIcon","ListItemText","Edit","Description","List","ExamplesTable","Grid","example","index","ActionPageContent","api","isExpanded","setIsExpanded","renderTable","rows","TableContainer","Paper","Table","TableHead","TableRow","TableCell","TableBody","getTypes","properties","formatRows","parentId","input","entry","id","codeClassname","types","type","Chip","ExpandLess","ExpandMore","prevState","state","Collapse","renderTables","i","action","oneOf","Accordion","AccordionSummary","AccordionDetails","ActionsPage","navigate","editorLink","tasksLink","createLink","scaffolderPageContextMenuProps","getFilterGroups","Settings","OwnerListPicker","filter","onSelectOwner","filterGroups","Card","group","item","LuxonError","InvalidDateTimeError","reason","InvalidIntervalError","InvalidDurationError","ConflictingSpecificationError","InvalidUnitError","unit","InvalidArgumentError","ZoneIsAbstractError","s","l","DATE_SHORT","DATE_MED","DATE_MED_WITH_WEEKDAY","DATE_FULL","DATE_HUGE","TIME_SIMPLE","TIME_WITH_SECONDS","TIME_WITH_SHORT_OFFSET","TIME_WITH_LONG_OFFSET","TIME_24_SIMPLE","TIME_24_WITH_SECONDS","TIME_24_WITH_SHORT_OFFSET","TIME_24_WITH_LONG_OFFSET","DATETIME_SHORT","DATETIME_SHORT_WITH_SECONDS","DATETIME_MED","DATETIME_MED_WITH_SECONDS","DATETIME_MED_WITH_WEEKDAY","DATETIME_FULL","DATETIME_FULL_WITH_SECONDS","DATETIME_HUGE","DATETIME_HUGE_WITH_SECONDS","Zone","ts","format","otherZone","singleton","SystemZone","locale","parseZoneInfo","formatOffset","dtfCache","makeDTF","zone","typeToPos","hackyOffset","dtf","date","formatted","parsed","fMonth","fDay","fYear","fadOrBc","fHour","fMinute","fSecond","partsOffset","filled","pos","isUndefined","ianaZoneCache","IANAZone","year","month","day","adOrBc","hour","minute","second","asUTC","objToLocalTS","asTS","over","intlLFCache","getCachedLF","locString","intlDTCache","getCachedDTF","intlNumCache","getCachedINF","inf","intlRelCache","getCachedRTF","base","cacheKeyOpts","sysLocaleCache","systemLocale","weekInfoCache","getCachedWeekInfo","data","parseLocaleString","localeStr","xIndex","uIndex","selectedStr","smaller","numberingSystem","calendar","intlConfigString","outputCalendar","mapMonths","ms","dt","DateTime","mapWeekdays","listStuff","loc","length","englishFn","intlFn","mode","supportsFastNumbers","PolyNumberFormatter","intl","forceSimple","padTo","floor","otherOpts","intlOpts","fixed","roundTo","padStart","PolyDateFormatter","z","gmtOffset","offsetZ","parts","part","offsetName","PolyRelFormatter","isEnglish","hasRelative","count","fallbackWeekSettings","Locale","weekSettings","defaultToEN","specifiedLocale","localeR","numberingSystemR","outputCalendarR","weekSettingsR","validateWeekSettings","numbering","parsedLocale","parsedNumberingSystem","parsedOutputCalendar","isActuallyEn","hasNoWeirdness","alts","formatStr","field","df","results","matching","hasLocaleWeekInfo","other","FixedOffsetZone","offset","r","signedOffset","InvalidZone","zoneName","normalizeZone","defaultZone","isString","lowered","isNumber","now","defaultLocale","defaultNumberingSystem","defaultOutputCalendar","twoDigitCutoffYear","throwOnInvalid","defaultWeekSettings","n","cutoffYear","Invalid","explanation","nonLeapLadder","leapLadder","unitOutOfRange","dayOfWeek","d","js","computeOrdinal","isLeapYear","uncomputeOrdinal","ordinal","table","month0","isoWeekdayToLocal","isoWeekday","startOfWeek","gregorianToWeek","gregObj","minDaysInFirstWeek","weekday","weekNumber","weekYear","weeksInWeekYear","timeObject","weekToGregorian","weekData","weekdayOfJan4","yearInDays","daysInYear","gregorianToOrdinal","gregData","ordinalToGregorian","ordinalData","usesLocalWeekValues","obj","hasInvalidWeekData","validYear","isInteger","validWeek","integerBetween","validWeekday","hasInvalidOrdinalData","validOrdinal","hasInvalidGregorianData","validMonth","validDay","daysInMonth","hasInvalidTimeData","millisecond","validHour","validMinute","validSecond","validMillisecond","o","isDate","maybeArray","thing","bestBy","arr","by","compare","best","next","pair","keys","prop","settings","v","bottom","top","floorMod","x","isNeg","padded","parseInteger","string","parseFloating","parseMillis","fraction","number","digits","towardZero","factor","modMonth","modYear","firstWeekOffset","weekOffset","weekOffsetNext","untruncateYear","offsetFormat","timeZone","modified","offHourStr","offMinuteStr","offHour","offMin","offMinSigned","asNumber","numericValue","normalizeObject","normalizer","normalized","u","hours","minutes","sign","stringify","monthsLong","monthsShort","monthsNarrow","months","weekdaysLong","weekdaysShort","weekdaysNarrow","weekdays","meridiems","erasLong","erasShort","erasNarrow","eras","meridiemForDateTime","weekdayForDateTime","monthForDateTime","eraForDateTime","formatRelativeTime","numeric","narrow","units","lastable","isDay","isInPast","fmtValue","singular","lilUnits","fmtUnit","formatString","knownFormat","filtered","dateTimeHuge","stringifyTokens","splits","tokenToString","token","macroTokenToFormatOpts","Formatter","fmt","current","currentFull","bracketed","c","formatOpts","interval","p","knownEnglish","useDateTimeFormatter","extract","meridiem","standalone","maybeMacro","era","dur","tokenToField","lildur","mapped","tokens","realTokens","found","literal","val","collapsed","ianaRegex","combineRegexes","regexes","full","combineExtractors","extractors","mergedVals","mergedZone","cursor","ex","parse","patterns","regex","extractor","simpleParse","match","ret","offsetRegex","isoExtendedZone","isoTimeBaseRegex","isoTimeRegex","isoTimeExtensionRegex","isoYmdRegex","isoWeekRegex","isoOrdinalRegex","extractISOWeekData","extractISOOrdinalData","sqlYmdRegex","sqlTimeRegex","sqlTimeExtensionRegex","fallback","extractISOYmd","extractISOTime","extractISOOffset","local","fullOffset","extractIANAZone","isoTimeOnly","isoDuration","extractISODuration","yearStr","monthStr","weekStr","dayStr","hourStr","minuteStr","secondStr","millisecondsStr","hasNegativePrefix","negativeSeconds","maybeNegate","num","force","obsOffsets","fromStrings","weekdayStr","result","rfc2822","extractRFC2822","obsOffset","milOffset","preprocessRFC2822","rfc1123","rfc850","ascii","extractRFC1123Or850","extractASCII","isoYmdWithTimeExtensionRegex","isoWeekWithTimeExtensionRegex","isoOrdinalWithTimeExtensionRegex","isoTimeCombinedRegex","extractISOYmdTimeAndOffset","extractISOWeekTimeAndOffset","extractISOOrdinalDateAndTime","extractISOTimeAndOffset","parseISODate","parseRFC2822Date","parseHTTPDate","parseISODuration","extractISOTimeOnly","parseISOTimeOnly","sqlYmdWithTimeExtensionRegex","sqlTimeCombinedRegex","extractISOTimeOffsetAndIANAZone","parseSQL","INVALID","lowOrderMatrix","casualMatrix","daysInYearAccurate","daysInMonthAccurate","accurateMatrix","orderedUnits","reverseUnits","clone","clear","conf","Duration","durationToMillis","matrix","vals","sum","normalizeValues","previous","previousVal","conv","rollUp","removeZeroes","newVals","config","accurate","durationLike","text","invalid","fmtOpts","millis","duration","fn","values","mixed","conversionAccuracy","built","accumulated","lastUnit","own","ak","negated","eq","v1","v2","validateStartEnd","start","end","Interval","builtStart","friendlyDateTime","builtEnd","validateError","startIsValid","endIsValid","dateTime","dateTimes","sorted","b","added","idx","numberOfParts","intervals","final","sofar","currentCount","ends","flattened","dateFormat","separator","mapFn","Info","proto","locObj","dayDiff","earlier","later","utcDayStart","highOrderDiffs","differs","days","lowestOrder","highWater","differ","remainingMillis","lowerOrderUnits","numberingSystems","numberingSystemsUTF16","hanidecChars","parseDigits","str","code","min","max","digitRegex","append","MISSING_FTP","intUnit","post","spaceOrNBSP","spaceOrNBSPRegExp","fixListRegex","stripInsensitivities","strings","startIndex","groups","h","simple","escapeToken","unitForToken","one","two","three","four","six","oneOrTwo","oneToThree","oneToSix","oneToNine","twoToFour","fourToSix","partTypeStyleToTokenVal","tokenForPart","resolvedOpts","isSpace","style","actualType","buildRegex","handlers","matches","all","matchIndex","dateTimeFromMatches","toField","specificOffset","dummyDateTimeCache","getDummyDateTime","maybeExpandMacroToken","formatOptsToTokens","expandMacroTokens","explainFromTokens","disqualifyingUnit","regexString","rawMatches","parseFromTokens","invalidReason","MAX_DATE","unsupportedZone","possiblyCachedWeekData","possiblyCachedLocalWeekData","inst","fixOffset","localTS","tz","utcGuess","o2","o3","tsToObj","objToTS","adjustTime","oPre","millisToAdd","parseDataToDateTime","parsedZone","setZone","interpretationZone","toTechFormat","allowZ","toISODate","extended","longFormat","toISOTime","suppressSeconds","suppressMilliseconds","includeOffset","extendedZone","defaultUnitValues","defaultWeekUnitValues","defaultOrdinalUnitValues","orderedWeekUnits","orderedOrdinalUnits","normalizeUnit","normalizeUnitWithLocalWeeks","quickDT","tsNow","offsetProvis","diffRelative","round","lastOpts","argList","args","ot","zoneToUse","milliseconds","seconds","containsOrdinal","containsGregorYear","containsGregorMD","containsGregor","definiteWeekDef","useWeekData","defaultValues","objNow","foundFirst","higherOrderInvalid","gregorian","tsFinal","offsetFinal","localeToUse","localeOpts","tokenList","dayMs","minuteMs","oEarlier","oLater","o1","ts1","ts2","c1","c2","keepLocalTime","keepCalendarTime","newTS","offsetGuess","asObj","settingWeekStuff","useLocaleWeeks","normalizedUnit","q","ext","includePrefix","includeZone","includeOffsetSpace","otherDateTime","durOpts","otherIsLater","diffed","diff","inputMs","adjustedToZone","padding","dateTimeish","VERSION","CreatedAtColumn","createdAt","createdAtTime","OwnerEntityColumn","entityRef","PendingIcon","className","dataTestId","StatusOK","CheckCircleOutline","StatusWarning","StatusError","ErrorOutline","StatusPending","StatusRunning","StatusAborted","TaskStatusColumn","status","TemplateTitleColumn","scaffolder","ListTaskPageContent","initiallySelectedFilter","scaffolderApi","rootLink","ownerFilter","setOwnerFilter","row","ListTasksPage","actionsLink","icon","CheckBoxOutlineBlank","checkedIcon","CheckBox","TemplateCategoryPicker","Autocomplete","popperProps","_","option","selected","FormControlLabel","Checkbox","params","TextField","cardBackgroundImage","cardFontColor","CardHeader","getPageTheme","useTheme","themeForType","SubtitleComponent","CardLink","Icon","url","TemplateCard","onSelected","template","analytics","ownedByRelations","app","iconResolver","Language","hasTags","hasLinks","displayDefaultDivider","canCreateTask","handleChoose","CardContent","Divider","tag","CardActions","Button","TemplateGroup","templates","CardComponent","titleComponent","additionalLinks","TemplateGroups","entities","templateFilter","TemplateCardComponent","onTemplateSelected","errorApi","RegisterExistingButton","to","allowed","isXSScreen","useMediaQuery","defaultGroup","createGroupsWithOther","TemplateListPage","registerComponentLink","givenGroups","headerOptions","viewTechDocsLink","templateRoute","additionalLinksForEntity","namespace","useTemplateParameterSchema","templateRef","getTypeOf","OBJECT_TYPE","ARRAY_TYPE","render","variable","variableType","__","keyword","_a","dashCase","createError","createCustomError","flattenArray","list","createOneOfSchemaResult","schema","oneOfSchema","oneOfIndex","childSchema","isPromise","errorOrPromise","errorsOnly","DECLARATOR_ONEOF","resolveOneOf","draft","pointer","oneOfProperty","oneOfValue","oneOfPropertySchema","fuzzyObjectValue","resolveOneOfFuzzy","schemaOfItem","schemaOfIndex","fuzzyGreatest","fuzzyValue","validateOneOf","schemaOrError","overwriteMerge","destinationArray","sourceArray","mergeUniqueItems","mergeArraysUnique","mergeSchema","aType","bType","omit","object","keysToOmit","toStringFunction","create","toStringObject","LegacyCache","createCacheLegacy","createCacheModern","createCache","getCleanClone","prototype","Constructor","getRegExpFlagsLegacy","regExp","flags","getRegExpFlagsModern","getRegExpFlags","getTagLegacy","getTagModern","getTag","defineProperty","getOwnPropertyDescriptor","getOwnPropertyNames","getOwnPropertySymbols","propertyIsEnumerable","SUPPORTS_SYMBOL","getStrictPropertiesModern","getStrictProperties","copyOwnPropertiesStrict","length_1","property","descriptor","copyArrayLoose","array","length_2","copyArrayStrict","copyArrayBuffer","arrayBuffer","_state","copyBlob","blob","copyDataView","dataView","copyDate","copyMapLoose","map","copyMapStrict","copyObjectLooseLegacy","copyObjectLooseModern","symbols","length_3","symbol","copyObjectLoose","copyObjectStrict","copyPrimitiveWrapper","primitiveObject","copyRegExp","copySelf","copySetLoose","set","copySetStrict","isArray","getPrototypeOf","DEFAULT_LOOSE_OPTIONS","DEFAULT_STRICT_OPTIONS","getTagSpecificCopiers","createCopier","normalizedOptions","tagSpecificCopiers","copier","tagSpecificCopier","createStrictCopier","copyStrict","resolveIfSchema","ifErrors","validateIf","resolvedSchema","resolveSchema","schemaToResolve","ifSchema","resolveAllOf","mergedSchema","copy","allOfSchema","mergeAllOfSchema","allOf","subschema","validateAllOf","subSchema","uniqueItems","isObject","resolveDependencies","dependencies","updated","_b","dependency","validateDependencies","dependencyErrors","missingProperty","mergeValidAnyOfSchema","anySchema","resolveAnyOf","anyOf","validateAnyOf","toOmit","dynamicProperties","isDynamicSchema","givenProps","resolveDynamicSchema","anyOfSchema","dependenciesSchema","nestedSchema","reduceSchema","Draft","rootSchema","callback","addRemoteSchema","propertyRegex","jsonQueryGrammar","valid","subset","toJSON","ast","toSmallJSON","parser","query","reduce","VALUE_INDEX","KEY_INDEX","PARENT_INDEX","POINTER_INDEX","join","rContainer","isContainer","nodeAsRegex","node","parent","getKeys","cache","expand","childEntry","checkedTyped","or","expr","isValid","cmp","test","expressionMatches","valueString","collect","func","output","runPatternOnce","inputSet","resultingSet","workingSet","runNode","getIterationCount","quantifier","pattern","iterationCount","skip","run","returnTypes","ReturnType","queryString","returnType","buildPath","path","split","cp","getType","isProperty","ignoreTypes","arrayHasIndex","isEscaped","isArrayProp","convertToIndex","removeEscape","insert","nextSet","addToArray","target","arrayIndex","keyIsArray","container","containerType","itemType","InsertMode","arrayWithoutIndex","nextKey","insertArray","targetValue","unescapedProp","remove","returnRemoved","removed","typeKeywords","getTypeId","ids","getTypeDefs","defs","nextTypeDefs","eachDefinition","walk","defId","eachSchema","defschema","schemaPointer","suffixes","trailingHash","isDomain","trailingFragments","idAndPointer","joinScope","emptyValues","splitRef","$ref","getRef","context","$remote","fragments","COMPILED","COMPILED_REF","GET_REF","GET_ROOT","compileSchema","schemaToCompile","rootSchemaAsString","compiledSchema","scopes","getRoot","parentPointer","parentSchema","previousPointer","previousScope","scope","each","dataType","nextSchema","isValidDateTime","isValidIPV4","isValidIPV6","isValidHostname","matchDate","matchTime","DAYS","isValidJsonPointer","isValidRelativeJsonPointer","isValidURIRef","isValidURITemplate","host","rest","emptyObject","getSchema","withSchemaWarning","_getSchema","isEmpty","defaultOptions","shouldResolveRef","resolveRef","convertValue","createTemplateSchema","templateSchema","resolvedAnyOf","merge","before","extendedData","getTemplate","isJsonSchema","_schema","selectType","javascriptTypeOfData","TYPE","defaultValue","defaultType","getDefault","isRequired","dependencyData","additionalData","minItems","itemCount","templateValue","initValue","ucs2decode","counter","extra","getPrecision","hasProperty","receivedProperties","expectedProperties","additionalIsObject","valueStr","itemData","itemSchema","itemErrors","lengthOfString","propertyCount","valuePrecision","multiplePrecision","precision","multiple","pp","patternFound","valErrors","keyErrors","duplicates","createSchemaOf","stepType","itemValue","itemsType","targetSchema","patternProperties","additionalProperties","step","typeOfData","schemaType","stepFunction","schemaResult","getChildSchemaSelection","getJsonSchemaType","expectedType","jsType","validate","receivedType","draft04Config","Draft04","propertySchema","validationResult","draft06Config","Draft06","draft07Config","Draft07","resolveRefMerge","draftJsonEditorConfig","JsonEditor","$parse","$stringify","Primitive","primitive","ignore","noop","primitives","Primitives","revive","$","lazy","ke","y","tmp","known","reviver","replacer","space","firstRun","replace","after","fromJSON","extractUiSchema","uiSchema","then","_else","propName","schemaNode","innerUiSchema","depName","extractSchemaFromStep","inputStep","returnSchema","createFieldValidation","fieldValidation","message","isFieldValidation","hasErrors","createAsyncValidators","validators","formData","pathPrefix","parsedSchema","formValidation","validateForm","validatorName","validator","definitionInSchema","hasItems","doValidateItem","propValue","itemUiSchema","doValidate","itemsSchema","itemsUiSchema","tableTitleCellStyles","createStyles","tableContentCellStyles","listStyles","listItemStyles","TitleCell","withStyles","ContentCell","MetadataTable","dense","MetadataTableItem","MetadataList","MetadataListItem","ListItem","listStyle","nestedListStyle","StyledList","StyledNestedList","renderList","nested","toValue","renderMap","ItemValue","TableItem","mapToItems","info","StructuredMetadataTable","metadata","metadataItems","ReviewState","reviewData","backstageReviewOptions","useFormDataFromQuery","initialState","useTemplateSchema","manifest","featureFlags","returningSteps","stepFeatureFlag","strippedSchema","allowAdditionalItems","ADDITIONAL_PROPERTY_FLAG","ADDITIONAL_PROPERTIES_KEY","ALL_OF_KEY","ANY_OF_KEY","CONST_KEY","DEFAULT_KEY","DEFINITIONS_KEY","DEPENDENCIES_KEY","ENUM_KEY","ERRORS_KEY","IF_KEY","NAME_KEY","ONE_OF_KEY","REQUIRED_KEY","SUBMIT_BTN_OPTIONS_KEY","REF_KEY","RJSF_ADDITONAL_PROPERTIES_FLAG","RJSF_ADDITIONAL_PROPERTIES_FLAG","ROOT_SCHEMA_PREFIX","UI_FIELD_KEY","UI_WIDGET_KEY","UI_OPTIONS_KEY","UI_GLOBAL_OPTIONS_KEY","getUiOptions","globalOptions","canExpand","expandable","createErrorHandler","handler","formObject","deepEquals","splitKeyElementFromObject","findSchemaDefinitionRecursive","recurseList","ref","decodedRef","jsonpointer","nextRef","firstRef","restRefs","circularPath","remaining","theRef","findSchemaDefinition","getOptionMatchingSimpleDiscriminator","discriminatorField","discriminator","getMatchingOption","simpleDiscriminatorMatch","requiresAnyOf","augmentedSchema","shallowClone","getFirstMatchingOption","getDiscriminatorFieldFromSchema","maybeString","guessType","getSchemaType","mergeSchemas","obj1","obj2","left","right","rawFormData","resolveCondition","expandAllBranches","expression","otherwise","resolvedSchemaLessConditional","conditionValue","resolvedSchemas","schemas","conditionalSchema","getAllPermutationsOfXxxOf","listOfLists","permutations","element","permutation","updatedSchemas","resolveReference","allOfSchemaElements","allOfSubschema","updatedSchema","resolveAllReferences","localSchema","childrenLists","updatedProps","childList","stubExistingAdditionalProperties","theSchema","aFormData","restOfSchema","resolvedSchemaWithoutAllOf","anyOrOneOf","remainingSchema","processDependencies","dependencyKey","remainingDependencies","dependencyValue","withDependentProperties","withDependentSchema","additionallyRequired","dependent","dependentSchema","resolvedOneOfs","resolvedOneOf","withExactlyOneSubschema","validSubschemas","conditionPropertySchema","conditionSchema","dependentSubschema","JUNK_OPTION","calculateIndexScore","totalScore","score","formValue","newSchema","getClosestMatchingOption","newScore","selectedOption","resolvedOptions","allValidIndexes","validList","scoreCount","bestIndex","scoreData","bestScore","isFixedItems","mergeDefaultsWithFormData","defaults","mergeExtraArrayDefaults","defaultsArray","mergeObjects","concatArrays","toMerge","isConstant","isSelect","altSchemas","isMultiSelect","AdditionalItemsHandling","getInnerSchemaForArrayItem","additionalItems","maybeAddDefaultToObject","computedDefault","includeUndefinedValues","isParentRequired","requiredFields","experimental_defaultFormStateBehavior","emptyObjectFields","isSelfOrParentRequired","computeDefaults","rawSchema","parentDefaults","_recurseList","_c","_d","schemaToCompute","updatedRecurseList","refName","retrievedSchema","objectDefaults","additionalPropertiesSchema","formDataRequired","neverPopulate","ignoreMinItemsFlagSet","isSkipEmptyDefaults","computeSkipPopulate","emptyDefault","schemaItem","defaultsLength","defaultEntries","fillerSchema","fillerDefault","fillerEntries","getDefaultFormState","mergeExtraDefaults","isCustomWidget","isFilesArray","getDisplayLabel","uiOptions","label","mergeValidationData","validationData","additionalErrorSchema","oldErrors","oldErrorSchema","errorSchema","NO_VALUE","sanitizeDataForNewSchema","oldSchema","newFormData","removeOldSchemaData","nestedData","oldKeyedSchema","newKeyedSchema","oldSchemaTypeForKey","newSchemaTypeForKey","newOptionDefault","oldOptionDefault","newOptionConst","oldOptionConst","oldSchemaItems","newSchemaItems","oldSchemaType","newSchemaType","maxItems","newValue","aValue","toIdSchemaInternal","idPrefix","idSeparator","idSchema","fieldId","toIdSchema","toPathSchemaInternal","pathSchema","xxxOf","schemaItems","schemaAdditionalItems","toPathSchema","SchemaUtils","createSchemaUtils","dataURItoBlob","dataURILike","splitted","media","base64","mime","mediaparams","param","binary","replaceStringParameters","inputString","partIndex","englishStringTranslator","stringToTranslate","enumOptionsValueForIndex","valueIndex","allEnumOptions","emptyValue","enumOptionsDeselectValue","enumOptionsIsSelected","sel","enumOptionsIndexForValue","selectedIndexes","opt","enumOptionsSelectValue","ErrorSchemaBuilder","initialSchema","pathOfError","errorBlock","errorOrList","errorsList","listToAdd","getDateElementProps","time","yearRange","dayObj","monthObj","yearObj","dateElementProp","rangeSpec","spec","getInputProps","autoDefaultStepAny","inputProps","DEFAULT_OPTIONS","getSubmitButtonOptions","registry","widgetMap","mergeWidgetOptions","AWidget","MergedWidget","getWidget","widget","registeredWidgets","registeredWidget","hashString","hash","chr","allKeys","hasWidget","err","idGenerator","suffix","descriptionId","errorId","examplesId","helpId","titleId","ariaDescribedByIds","includeExamples","examples","optionId","optionIndex","labelValue","hideLabel","localToUTC","dateString","toConstant","optionsList","schemaWithEnumNames","aSchemaDef","aSchema","orderProperties","order","arrayToHash","prev","curr","errorPropList","propertyHash","orderFiltered","orderHash","restIndex","complete","pad","width","parseDateString","includeTime","schemaRequiresTrueValue","schemaSome","shouldRender","component","nextProps","nextState","toDateString","dateObject","utcTime","datetime","fieldPath","errorList","toErrorSchema","builder","unwrapErrorHandler","errorHandler","utcToLocal","jsonDate","yyyy","MM","dd","hh","mm","ss","SSS","validationDataMerge","withIdRefPrefixObject","realObj","withIdRefPrefix","withIdRefPrefixArray","TranslatableString","identifiedSchema","existing","_formData","_errorSchema","_fieldPath","_customValidate","_transformErrors","_uiSchema","parseSchema","schemaParser","AJV_CONFIG","COLOR_FORMAT_REGEX","DATA_URL_FORMAT_REGEX","createAjvInstance","additionalMetaSchemas","customFormats","ajvOptionsOverrides","ajvFormatOptions","AjvClass","ajv","formatName","transformRJSFValidationErrors","instancePath","schemaPath","stack","currentProperty","uiSchemaTitle","parentSchemaTitle","customValidate","transformErrors","invalidSchemaError","userErrorSchema","AJV8Validator","localizer","compilationError","compiledValidator","rootSchemaId","schemaWithIdRefPrefix","schemaId","customizeValidator","validateFns","resolvedRootSchema","createPrecompiledValidator","useTransformSchemaToProps","layouts","objectFieldTemplate","Layout","layout","DescriptionField","random","bytes","customRandom","alphabet","defaultSize","getRandom","mask","size","j","customAlphabet","nanoid","byte","generateRowId","generateKeyedFormData","keyedToPlainFormData","keyedFormData","keyedItem","ArrayField","schemaUtils","newErrorSchema","newKeyedFormDataRow","newKeyedFormData","newIndex","reOrderArray","_newKeyedFormData","nextFormData","previousKeyedFormData","previousKeyedFormDatum","translateString","formItems","addable","UnsupportedFieldTemplate","readonly","autofocus","onBlur","onFocus","fieldTitle","formContext","_schemaItems","canAdd","arrayProps","itemCast","itemErrorSchema","itemIdPrefix","itemIdSchema","Template","hideError","placeholder","widgets","globalUiOptions","uiTitle","Widget","enumOptions","itemSchemas","additionalSchema","additional","canRemove","canMoveUp","canMoveDown","totalItems","ArraySchemaField","SchemaField","ItemSchemaField","orderable","removable","copyable","has","BooleanField","schemaTitle","yes","no","enums","AnyOfField","retrievedOptions","intOption","newOption","oldOption","prevProps","newState","matchingOption","fields","_SchemaField","autocomplete","fieldErrorSchema","optionSchema","optionsUiSchema","optionUiSchema","translateEnum","translateParams","trailingCharMatcherWithPrefix","trailingCharMatcher","NumberField","initialValue","lastValue","setLastValue","StringField","handleChange","processed","re","g","E","w","S","C","A","O","T","L","R","M","I","U","B","N","H","D","P","F","W","G","Z","V","X","Q","J","K","Y","ee","ne","te","ie","le","oe","ce","ae","se","de","ue","pe","fe","he","me","ge","ye","xe","ve","be","$e","Ee","we","Se","Ce","Ae","Oe","Te","Le","Re","ze","Me","Ie","Ue","je","Be","Ne","He","De","Pe","_e","Fe","We","Ge","Ze","ObjectField","addedByAdditionalProperties","copiedFormData","preferredKey","duplicateKeySuffixSeparator","newKey","oldValue","newKeys","keyValues","renamedObj","apSchema","schemaProperties","templateTitle","orderedProperties","templateProps","fieldUiSchema","fieldIdSchema","COMPONENT_TYPES","getFieldComponent","componentName","SchemaFieldRender","_idSchema","onKeyChange","onDropPropertyClick","wasPropertyKeyModified","FieldTemplate","DescriptionFieldTemplate","FieldHelpTemplate","FieldErrorTemplate","handleFieldComponentChange","FieldComponent","uiSchemaHideError","__errors","richDescription","classNames","helpComponent","errorsComponent","fieldProps","_AnyOfField","_OneOfField","isReplacingAnyOrOneOf","defaultWidget","NullField","MultiSchemaField","ArrayFieldDescriptionTemplate","ArrayFieldItemTemplate","hasToolbar","hasMoveDown","hasMoveUp","hasRemove","hasCopy","onCopyIndexClick","onDropIndexClick","onReorderClick","CopyButton","MoveDownButton","MoveUpButton","RemoveButton","btnStyle","ArrayFieldTemplate","onAddClick","ArrayFieldTitleTemplate","AddButton","itemProps","TitleFieldTemplate","BaseInputTemplate","onChangeOverride","inputValue","_onChange","_onBlur","_onFocus","SubmitButton","submitText","norender","submitButtonProps","iconType","onClick","buttonTemplates","ErrorList","REQUIRED_FIELD_SYMBOL","Label","WrapIfAdditionalTemplate","elem","ObjectFieldTemplate","TitleField","UnsupportedField","keyLabel","ButtonTemplates","rangeOptions","stop","readyForChange","DateElement","range","select","rootId","SelectWidget","AltDateWidget","setState","stateValue","handleSetNow","handleClear","elemProps","AltDateTimeWidget","CheckboxWidget","handleBlur","handleFocus","CheckboxesWidget","inline","enumDisabled","checkboxesValues","checked","itemDisabled","disabledCls","checkbox","ColorWidget","DateWidget","DateTimeWidget","EmailWidget","addNameToDataURL","dataURL","processFile","file","resolve","reject","reader","processFiles","files","FileInfoPreview","fileInfo","FilesInfo","filesInfo","preview","onRemove","handleRemove","extractFileInfo","dataURLs","FileWidget","filesInfoEvent","rmFile","HiddenWidget","PasswordWidget","RadioWidget","radio","RangeWidget","getValue","optEmptyVal","TextareaWidget","TextWidget","TimeWidget","URLWidget","UpDownWidget","getDefaultRegistry","getAllPaths","_obj","paths","newPaths","extraErrors","omitExtraData","liveOmit","noValidate","liveValidate","mustValidate","_retrievedSchema","fieldNames","schemaValidation","schemaValidationErrors","schemaValidationErrorSchema","merged","onSubmit","submitCustomEvent","isSchemaChanged","isFormDataChanged","shouldUpdate","snapshot","inputFormData","edit","getCurrentErrors","currentErrors","altSchemaUtils","ErrorListTemplate","customTranslateString","elementId","extraErrorsBlockSubmit","focusOnFirstError","onError","prevErrors","hasError","tagName","method","autoComplete","enctype","acceptcharset","acceptCharset","noHtml5Validate","showErrorList","_internalFormWrapper","as","FormTag","submitOptions","submitUiSchema","withTheme","themeProps","directProps","Add","TYPES_THAT_SHRINK_LABEL","InputLabelProps","textFieldProps","DisplayInputLabelProps","MuiIconButton","color","ArrowDownward","ArrowUpward","Remove","FormHelperText","generateTemplates","FormLabel","FormGroup","selectedIndex","RadioGroup","Radio","sliderProps","Slider","generateWidgets","generateTheme","generateForm","WrappedForm","Theme","wrappedFields","Component","wrapperProps","formatErrorMessage","propertyName","stepperProps","components","ReviewStateComponent","ReviewStepComponent","backButtonText","createButtonText","reviewButtonText","presentation","steps","apiHolder","activeStep","setActiveStep","isValidating","setIsValidating","formState","setFormState","setErrors","backLabel","createLabel","reviewLabel","extensions","validation2","validation","handleBack","prevActiveStep","handleCreate","currentStep","handleNext","returnedValidation","stepNum","LinearProgress","isAllowedLabelClick","useFilteredSchemaProperties","featureFlagKey","featureFlagApi","filteredSteps","featureFlag","filteredStep","removedPropertyKeys","useTemplateTimeSavedMinutes","timeSavedMinutes","entity","timeSaved","durationMs","Workflow","workflowProps","templateName","onCreate","sortedManifest","minutesSaved","workflowOnCreate","EmbeddableWorkflow","TemplateWizardPageContextMenu","editUrl","TemplateWizardPage","rootRef","taskRoute","taskId","nn","rn","tn","en","on","un","an","cn","sn","vn","pn","ln","dn","reducer","entries","logLine","currentStepLog","stepId","useTaskEventStream","dispatch","didCancel","subscription","logPusher","retryCount","startStreamLogProcess","task","observable","collectedLogEvents","emitLogs","logs","maxRetries","fontColor","ContextMenu","cancelEnabled","logsVisible","buttonBarVisible","onStartOver","onToggleLogs","onToggleButtonBar","pageTheme","cancelStatus","cancel","canCancelTask","canReadTask","canStartOver","Toc","ControlPoint","Cancel","LinkOutputs","links","entityRoute","Link","entityName","TextOutputs","setIndex","content","DefaultTemplateOutputs","textOutputIndex","setTextOutputIndex","defaultIndex","textOutput","emptyOutput","useStepIconStyles","StepIcon","active","completed","skipped","getMiddle","CircularProgress","RemoveCircleOutline","PanoramaFishEye","useInterval","delay","savedCallback","interval_1","StepTime","setTime","getDelay","calculate","startedAt","useMountEffect","TaskBorder","TaskSteps","isCompleted","isFailed","isActive","isSkipped","stepIconProps","TaskLogStream","OngoingTask","templateRouteRef","taskStream","setLogVisibleState","setButtonBarVisibleState","startOver","triggerCancel","Outputs","showDirectoryPicker","WebFileAccess","handle","writable","WebDirectoryAccess","dirHandle","basePath","WebFileSystemAccess","DefaultBufferLength","nextPropID","Range","from","NodeProp","NodeType","MountedTree","tree","overlay","noProps","src","direct","NodeSet","newProps","source","add","CachedNode","CachedInnerNode","IterMode","Tree","positions","mounted","ch","TreeCursor","side","TreeNode","resolveNode","stackIterator","enter","leave","anon","entered","balanceRange","buildTree","FlatBufferCursor","buffer","TreeBuffer","endIndex","dir","pick","checkSide","startI","endI","len","overlays","scan","inner","BaseNode","getChildren","matchNodeContext","last","_tree","_parent","BufferNode","BufferContext","hasChild","rPos","cur","parentStart","iterStack","heads","picked","newHeads","StackIterator","layers","mount","root","child","depth","mustLeave","nodeSet","maxBufferLength","reused","minRepeatType","contextHash","lookAhead","takeNode","minPos","inRepeat","lookAheadAtStart","startPos","findBufferSize","endPos","copyToBuffer","localChildren","localPositions","localInRepeat","lastGroup","lastEnd","makeRepeatLeaf","takeFlatNode","make","makeBalanced","makeTree","nodes","nodeCount","stopAt","lastI","lookAheadProp","maxSize","fork","minStart","nodeSize","localSkipped","nodeStart","bufferStart","nodeSizeCache","balanceType","mkTop","mkTree","total","maxChild","divide","groupFrom","groupStart","groupSize","nextSize","only","NodeWeakMap","TreeFragment","openStart","openEnd","partial","changes","minGap","fI","nextF","cI","off","nextC","nextPos","cut","fFrom","fTo","Parser","ranges","StringInput","done","parseMixed","nest","MixedParse","InnerParse","checkRanges","ActiveOverlay","predicate","mounts","stoppedInner","fragmentCursor","FragmentCursor","covered","isCovered","checkCover","materialize","oldMounts","punchRanges","enterFragments","sliceBuf","buf","newStack","innerOffset","stackPos","targetI","StructureCursor","first","frag","outer","gapFrom","gapTo","findCoverChanges","iA","iB","inA","inB","nextA","nextB","clip","TextNode","RawTextCursor","PartialTextCursor","LineCursor","lines","TextLeaf","textLength","isLine","line","Line","open","sliceText","joined","appendText","mid","newLen","lineSep","endLine","childOpen","totalLines","eA","eB","chA","chB","flat","chunk","maxChunk","minChunk","chunked","currentLines","currentLen","currentChunk","flush","offsetValue","limit","lineBreak","extend","isExtendingChar","isRegionalIndicator","ZWJ","findClusterBreak","forward","includeExtending","nextClusterBreak","prevClusterBreak","surrogateLow","surrogateHigh","codePointAt","codePointSize","countBefore","code0","code1","fromCodePoint","DefaultSplit","MapMode","ChangeDesc","sections","ins","posA","posB","individual","iterChanges","composeSets","mapSet","assoc","endA","json","ChangeSet","inserted","doc","fromA","toA","fromB","_toB","resultSections","resultInserted","filteredSections","iter","SectionIter","addSection","addInsert","process","sub","insText","insLen","forceJoin","desc","endB","setA","setB","mkSet","piece","sectionLen","insB","SelectionRange","level","change","head","includeAssoc","mainIndex","main","which","anchor","bidiLevel","goalColumn","checkSelection","selection","docLength","nextID","Facet","combine","compareInput","isStatic","enables","sameArray","FacetProvider","deps","get","facet","addresses","getter","multi","depDoc","depSel","depAddrs","dep","tr","ensureAll","newVal","compareArray","oldState","oldAddr","oldVal","getAddr","StateField","addrs","changed","addr","ensureAddr","dynamicFacetSlot","providers","providerAddrs","providerTypes","dynamic","depChanged","oldProviders","initField","createF","updateF","compareF","init","Prec_","prec","PrecExtension","Prec","Compartment","CompartmentInstance","compartment","Configuration","compartments","dynamicSlots","address","staticValues","newCompartments","flatten","extension","seen","languageData","allowMultipleSelections","lineSeparator","changeFilter","transactionFilter","transactionExtender","readOnly","Annotation","AnnotationType","StateEffectType","mapping","effects","effect","startState","annotations","scrollIntoView","ann","joinRanges","mergeTransaction","sequential","mapForA","mapForB","resolveTransactionInner","docSize","asArray","resolveTransaction","specs","seq","extendTransaction","filterTransaction","back","extenders","none","CharCategory","nonASCIISingleCaseWordChar","wordChar","hasWordChar","makeCategorizer","wordChars","char","EditorState","computeSlot","require","startValues","slot","result1","newChanges","newMapped","mapBy","fieldInit","configuration","phrase","provider","at","cat","kA","kB","combineConfig","configs","RangeValue","cmpRange","Chunk","maxPoint","startAt","lo","hi","newPos","curFrom","curTo","newFrom","newTo","chunkPos","nextLayer","updateSpec","sort","filterFrom","filterTo","LayerCursor","spill","RangeSetBuilder","chunks","touch","HeapCursor","sets","oldSets","newSets","textDiff","comparator","minPointSize","sharedChunks","findSharedChunks","sideA","SpanCursor","sideB","sameValues","iterator","openRanges","openCount","build","lazySort","layer","newArrays","shared","minPoint","rank","rangeIndex","heap","heapBubble","childIndex","findMinIndex","trackOpen","wasPoint","nextVal","startA","startB","dPos","clipEnd","foundPos","countColumn","tabSize","findColumn","col","strict","COUNT","SET","StyleModule","finish","splitSelector","selector","selectors","isKeyframes","isAt","keyframes","modules","nonce","StyleSet","adoptedSet","win","adopted","sheet","mod","shift","mac","keyName","ignoreKey","getSelection","contains","dom","deepActiveElement","elt","hasSelection","clientRectsFor","textRange","isEquivalentPosition","targetNode","targetOff","scanFor","domIndex","isBlockElement","maxOffset","flattenRect","rect","windowRect","vp","getScale","scaleX","scaleY","scrollRectIntoView","xMargin","yMargin","ltr","bounding","moveX","moveY","rectHeight","boundingHeight","movedX","movedY","scrollableParents","DOMSelectionState","domSel","anchorNode","focusNode","anchorOffset","focusOffset","preventScrollSupported","focusPreventScroll","scratchRange","dispatchKey","mods","down","up","clearAttributes","atElementStart","isScrolledToBottom","textNodeBefore","startNode","startOffset","textNodeAfter","DOMPos","precise","noChildren","ContentView","view","track","contentView","rm$1","_dom","bias","fromI","fromStart","toI","toEnd","prevEnd","andParent","_rec","_event","ChildCursor","hasStart","replaceRange","fromOff","toOff","breakAtStart","breakAtEnd","mergeChildrenInto","dLen","nav","ie_edge","ie_upto10","ie_11up","gecko","chrome","webkit","safari","ios","browser","MaxJoinLen","TextView","textDOM","_from","_to","textCoords","MarkView","mark","_hasStart","detachFrom","inlineDOMAtPos","coordsInChildren","rects","WidgetView","custom","fromBack","WidgetBufferView","joinInlineInto","beforePos","afterPos","fallbackRect","combineAttrs","noAttrs","attrsEq","keysA","keysB","updateAttrs","attrs","getAttrs","attr","LineView","deco","cls","hack","totalWidth","textHeight","heightOracle","height","dist","docView","block","BlockWidgetView","_takeDeco","startSide","endSide","WidgetType","BlockType","Decoration","MarkDecoration","PointDecoration","getInclusive","LineDecoration","of","isReplace","widgetsEq","addRange","margin","ContentBuilder","disallowBlockEffectsFor","wrapMarks","take","NullWidget","cursorBefore","cursorAfter","decorations","dynamicDecorationMap","Direction","LTR","RTL","dec","LowTypes","ArabicTypes","Brackets","BracketStack","charType","BidiRE","BidiSpan","maybe","span","isolatesEq","computeCharTypes","rFrom","rTo","isolates","outerType","iI","prevType","prevStrong","processBracketPairs","oppositeType","sI","br","sJ","embed","processNeutrals","beforeL","afterL","jI","fromJ","emitSpans","baseLevel","ourType","iCh","sameDir","isNum","recurse","localLevel","iScan","iso","upto","dirSwap","computeSectionOrder","computeOrder","direction","trivialOrder","movedOver","moveVisually","spanI","spanEnd","nextI","nextIndex","nextSpan","autoDirection","clickAddsSelectionRange","dragMovesSelection$1","mouseSelectionStyle","exceptionSink","updateListener","inputHandler","focusChangeEffect","perLineTextDirection","nativeSelectionHidden","scrollHandler","ScrollTarget","isSnapshot","setEditContextFormatting","exception","editable","nextPluginID","viewPlugin","domEventHandlers","domEventObservers","buildExtensions","eventHandlers","eventObservers","provide","plugin","pluginInst","PluginInstance","update","editorAttributes","contentAttributes","outerDecorations","atomicRanges","bidiIsolatedRanges","getIsolatedRanges","fromDoc","toDoc","scrollMargins","getScrollMargins","styleModule","ChangedRange","toB","dI","rI","ViewUpdate","transactions","changedRanges","DocView","readCompositionAt","touchesComposition","composition","findCompositionRange","prevDeco","decoDiff","findChangedDeco","oldLength","observer","cView","gaps","BlockGapWidget","compLine","fix","mustRead","fromPointer","activeElt","focused","selectionNotFocus","betweenUneditable","dummy","inUneditable","rawSel","nextTo","nextToUneditable","lineStart","newRange","domView","bestPos","childOff","viewport","contentWidth","isWider","widest","childRect","measure","lineHeight","charWidth","vs","allDeco","dynamicOuter","outerDeco","margins","targetRect","offsetWidth","offsetHeight","findCompositionNode","headPos","textBefore","textAfter","textNode","descAfter","descBefore","inv","marks","parentView","DecorationComparator$1","comp","inside","touched","groupAt","categorize","linePos","getdx","getdy","yOverlap","upTop","upBot","domPosAtCoords","closest","closestRect","closestX","closestY","closestOverlap","above","below","aboveRect","belowRect","dx","dy","domPosInText","clipX","closestOffset","closestDY","generalSide","posAtCoords","coords","docTop","docHeight","yOffset","halfLine","bounced","posAtCoordsImprecise","isSuspiciousSafariCaretResult","isSuspiciousChromeCaretResult","nearest","contentRect","into","blockAt","moveToLineBoundary","includeWrap","editorRect","moveByChar","spans","check","byGroup","nextCat","moveVertically","distance","goal","startY","startCoords","resolvedGoal","curY","charRect","skipAtomicRanges","atoms","moved","skipAtoms","oldPos","InputState","origin","firefoxCopyCutHack","eventBelongsToEditor","plugins","computeHandlers","passive","exists","modifierCodes","pending","PendingKeys","EmacsyPendingKeys","mouseSelection","bindHandler","record","observers","dragScrollMargin","dragScrollSpeed","MouseSelection","startEvent","mustSelect","addsSelectionRange","isInPrimarySelection","getClickType","sx","sy","dragMovesSelection","brokenClipboardAPI","capturePaste","doPaste","byLine","lastLinewiseCopy","lastLine","makeStyle","basicMouseSelection","mustFocus","mouseSel","rangeForClick","visual","insideY","findPositionSide","queryPos","BadMouseDetail","lastMouseDown","lastMouseDownCount","lastMouseDownTime","lastTime","startSel","startRange","removeRangeAround","inputState","dropText","dropPos","draggedContent","del","read","finishFile","captureCopy","copiedRange","linewise","isFocusChange","focusChangeTransaction","focus","getEffect","updateForFocusChange","startViewHeight","appliedFirefoxHack","wrappingWhiteSpace","HeightOracle","lineWrapping","whiteSpace","lineHeights","newHeight","lineLength","knownHeights","MeasuredHeights","heights","BlockInfo","_content","QueryType","Epsilon","HeightMap","oracle","oldDoc","NodeBuilder","HeightMapText","brk","HeightMapBranch","HeightMapBlock","_height","_oracle","_value","_type","_force","measured","HeightMapGap","firstLine","perLine","perChar","totalPerLine","guess","lineTop","linesAbove","singleHeight","rightTop","rightOffset","subQuery","rightStart","mergeGaps","rebalance","around","relevantWidgetHeight","breaks","gap","heightRelevantDecoChanges","DecorationComparator","visiblePixelRange","paddingTop","parentRect","fullPixelRange","LineGap","gA","gB","viewState","wrapping","LineGapWidget","vertical","ViewState","IdScaler","guessWrapping","viewports","Viewport","scaler","BigScaler","scaleBlock","scrollTarget","contentChanges","heightChanges","prevHeight","scrollAnchor","viewportChange","refresh","domRect","measureContent","paddingBottom","scrollTop","pixelViewport","dTop","dBottom","inView","marginTop","visibleTop","visibleBottom","viewHeight","topPos","mayMeasure","halfMargin","doubleMargin","addGap","structure","avoid","find","checkLine","lineStructure","viewFrom","viewTo","marginHeight","bot","targetFrac","findFraction","spaceFrac","findPosition","marginWidth","stateDeco","ratio","counted","heightMap","vpHeight","domBase","bTop","bBottom","strs","darkTheme","baseThemeID","baseLightID","baseDarkID","lightDarkIDs","buildTheme","baseTheme$1","LineBreakPlaceholder","DOMReader","points","oldLen","nextView","point","nextBreak","breakSize","fromView","isAtEnd","DOMPoint","DOMChange","typeOver","iHead","iAnchor","selPoints","selectionPoints","selectionFromPoints","offFrom","offTo","applyDOMChange","domChange","newSel","lastKey","preferredPos","preferredSide","findDiff","applyDOMChangeInner","userEvent","defaultTr","defaultInsert","applyDefaultInsert","mainSel","replaced","compositionRange","rangeChanges","selOff","minLen","adjust","move","observeOptions","useCharData","DOMObserver","mutations","mut","EditContextManager","wasChanged","safariSelectionRangeHack","keyCode","records","readSelection","handled","rec","childBefore","findChild","childAfter","curView","buildSelectionRangeFromRange","curAnchor","lineStyle","thickness","abort","_fromB","contextPos","editorPos","EditorView","trs","redrawn","attrsChanged","focusFlag","dispatchFocus","pendingKey","CachedOrder","listener","hadFocus","prevSpecs","newPlugins","sDOM","scrollAnchorPos","scrollAnchorHeight","measuring","BadMeasure","editorAttrs","attrsFromFacet","contentAttrs","changedContent","changedEditor","div","request","initial","MaxBidiLine","scrollLeft","prefix","fresh","lastDir","sources","currentPlatform","normalizeKeyName","platform","alt","ctrl","meta","modifiers","handleKeyEvents","runHandlers","getKeymap","Keymaps","bindings","buildKeymap","runScopeHandlers","storedPrefix","PrefixTimeout","bound","isPrefix","checkPrefix","is","command","preventDefault","stopPropagation","scopeObj","ourObj","binding","any","currentKeyEvent","charCode","isChar","prevented","ran","runFor","cmd","baseName","shiftName","RectangleMarker","getBase","rectanglesForRange","wrappedLine","lineElt","leftSide","rightSide","startBlock","endBlock","visualStart","visualEnd","pieces","drawForLine","drawForWidget","between","horizontal","addSpan","fromOpen","toOpen","fromCoords","toCoords","docLine","spanFrom","spanTo","sameMarker","LayerView","layerOrder","markers","old","oldI","marker","CanHidePrimary","selectionConfig","cursorLayer","selectionLayer","hideNativeSelection","getDrawSelectionConfig","configChanged","cursors","prim","confChange","setBlinkRate","themeSpec","setDropCursorPos","dropCursorPos","drawDropCursor","cursorPos","dropCursor","iterMatches","matchRanges","maxLength","visible","MatchDecorator","regexp","decoration","decorate","boundary","_view","changeFrom","changeTo","_f","_t","updateFrom","updateTo","fromLine","toLine","UnicodeRegexpSupport","Specials","Names","_supportsTabSize","supportsTabSize","specialCharConfig","specialCharPlugin","_plugin","TabWidget","SpecialCharWidget","DefaultPlaceholder","placeholder$1","ph","scrollPastEnd","highlightActiveLine","activeLineHighlighter","lineDeco","lastLineStart","Placeholder","wrap","MaxOff","rectangleFor","startLine","startOff","endOff","startCol","endCol","absoluteColumn","getPos","rectangleSelectionStyle","newStart","newLine","_extend","rectangularSelection","showCrosshair","crosshairCursor","isDown","Outside","TooltipViewManager","createTooltipView","removeTooltipView","tooltips","tooltipViews","newAbove","tip","tooltipView","tooltipConfig","windowSpace","knownHeight","tooltipPlugin","showTooltip","tooltip","shouldMeasure","newConfig","arrow","editor","makeAbsolute","tv","others","tView","arrowHeight","noOffset","spaceVert","arrowLeft","baseTheme","showHoverTooltip","inputs","HoverTooltipHost","hostedView","given","showHoverTooltipHost","HoverPlugin","setHover","hoverTime","hovered","lastMove","posCoords","bidi","rtl","isInTooltip","isOverRange","watch","tooltipMargin","docBottom","hoverTooltip","hoverState","closeHoverTooltipEffect","getTooltip","hasHoverTooltips","closeHoverTooltips","repositionTooltips","panelConfig","topContainer","bottomContainer","panels","getPanel","panel","panelPlugin","showPanel","PanelGroup","curDOM","rm","GutterMarker","gutterLineClass","activeGutters","gutter","gutters","unfixGutters","gutterView","SingleGutterView","vpA","vpB","vpOverlap","detach","lineClasses","classSet","contexts","UpdateContext","advanceCursor","cx","newElt","GutterElement","extraMarkers","localMarkers","forLine","prevMarkers","sameMarkers","domPos","iNew","iOld","skipTo","matched","lineNumberMarkers","lineNumberConfig","NumberMarker","formatNumber","lineNumberGutter","maxLineNumber","spacer","lineNumbers","activeLineGutterMarker","activeLineGutterHighlighter","highlightActiveLineGutter","WhitespaceDeco","getWhitespaceDeco","matcher","decorator","whitespaceHighlighter","highlightWhitespace","trailingHighlighter","highlightTrailingWhitespace","__test","nextTagID","Tag","Modifier","nextModifierID","powerSet","styleTags","byName","tags","rule","Rule","ruleNodeProp","tagHighlighter","tagClass","highlightTags","highlighters","highlighter","highlightTree","putStyle","HighlightBuilder","highlightCode","putText","putBreak","writeTo","inheritedClass","getStyleTags","tagCls","innerHighlighters","rangeFrom","rangeTo","comment","typeName","heading","operator","punctuation","bracket","classHighlighter","languageDataProp","defineLanguageFacet","baseData","sublanguageProp","extraExtensions","language","topNodeAt","innerNode","sublang","lang","explore","topLang","LRLanguage","ensureSyntaxTree","timeout","oldVieport","syntaxTreeAvailable","forceParsing","success","syntaxParserRunning","parseWorker","DocInput","stringStart","currentContext","ParseContext","treeLen","scheduleOn","until","endTime","cutFragments","startLen","frags","LanguageState","newCx","vpTo","parseState","requestIdle","idle","isInputPending","deadline","viewportFirst","languages","LanguageSupport","support","LanguageDescription","alias","filename","loadFunc","load","descs","fuzzy","indentService","getIndentUnit","indentString","cols","getIndentation","IndentContext","service","syntaxIndentation","indentRange","indent","norm","simulateBreak","simulateDoubleBreak","override","overriden","indentNodeProp","indentFor","strategy","indentStrategy","TreeIndentContext","ignoreClosed","close","closed","delimitedStrategy","topIndent","atBreak","isParent","bracketedAligned","openToken","sim","openLine","lineEnd","delimitedIndent","closing","align","closedAt","aligned","flatIndent","continuedIndent","except","matchExcept","DontIndentBeyond","indentOnInput","rules","foldService","foldNodeProp","foldInside","syntaxFolding","isUnfinished","foldable","mapRange","foldEffect","unfoldEffect","selectedLines","foldState","folded","foldExists","preparePlaceholder","foldConfig","PreparedFoldWidget","foldWidget","onSelection","foldedRanges","findFold","maybeEnable","codeFolding","foldCode","announceFold","unfoldCode","fold","lineFrom","lineTo","foldAll","unfoldAll","foldableContainer","lineBlock","foldableRegion","toggleFold","foldRange","foldKeymap","defaultConfig","widgetToDOM","prepared","onclick","foldGutterDefaults","FoldMarker","foldGutter","fullConfig","canFold","canUnfold","HighlightStyle","modSpec","def","scopeOpt","highlighterFacet","fallbackHighlighter","getHighlighters","treeHighlighter","themeType","highlightingFor","TreeHighlighter","styleChange","decoratedToMapped","DefaultScanDist","DefaultBrackets","bracketMatchingConfig","defaultRenderMatch","matchingMark","nonmatchingMark","bracketMatchingUnique","matchBrackets","bracketMatching","bracketMatchingHandle","matchingNodes","brackets","byProp","findHandle","hasHandle","maxScanDistance","matchMarkedBrackets","matchPlainBrackets","_pos","firstToken","endHandle","tokenType","startCh","startToken","basePos","countCol","startValue","StringStream","indentUnit","overrideIndent","ok","consume","caseInsensitive","cased","substr","fullParser","defaultCopyState","noTokens","IndentedFrom","StreamLanguage","self","impl","Parse","docID","TokenTable","defaultTokenTable","overrideIndentation","findState","statePos","indentation","stream","readToken","cutTree","findStartInFragments","editorState","parseEnd","eol","rangeEnd","rangeStart","offPos","len0","streamParser","typeArray","warned","byTag","defaultTable","legacyName","createTokenType","warnForPart","msg","tagStr","tags$1","buildForLine","textHasRTL","changeAddsRTL","fA","tA","fB","tB","alwaysIsolate","bidiIsolates","isolateMarks","buildDeco","always","access","clipRTLLines","cons","keywordRegex","yaml","esc","toggleComment","getConfig","toggleLineComment","toggleBlockCommentByLine","changeLineComment","lineComment","lineUncomment","toggleBlockComment","changeBlockComment","blockComment","blockUncomment","selectedLineRanges","SearchMargin","findBlockComment","spaceBefore","spaceAfter","beforeOff","startText","endText","startSpace","endSpace","comments","prevLine","minIndent","empty","single","changeSet","fromHistory","isolateHistory","invertedEffects","historyConfig","isAdjacent","adj","historyField_","HistoryState","fromHist","HistEvent","updateBranch","addSelection","isolate","undo","redo","historyField","historyState","undoSelection","redoSelection","histState","branch","undoDepth","redoDepth","startSelection","selectionsAfter","invert","selections","maxLen","newEvent","newBranch","eqSelectionShape","conc","MaxSelectionsPerEvent","lastEvent","sels","popSelection","addMappingToBranch","mapEvent","extraSelections","mappedChanges","fullMapping","joinableUserEvent","undone","prevTime","prevUserEvent","newGroupDelay","onlySelection","updateSel","setSel","moveSel","how","cursorByChar","ltrAtCursor","cursorCharLeft","cursorCharRight","cursorCharForward","cursorCharBackward","cursorByGroup","cursorGroupLeft","cursorGroupRight","cursorGroupForward","cursorGroupBackward","segmenter","moveBySubword","sawUpper","sawLower","ahead","segments","cursorBySubword","cursorSubwordForward","cursorSubwordBackward","interestingNode","bracketProp","moveBySyntax","cursorSyntaxLeft","cursorSyntaxRight","cursorByLine","cursorLineUp","cursorLineDown","pageInfo","selfScroll","marginBottom","cursorByPage","page","scrollRect","scrollBottom","cursorPageUp","cursorPageDown","moveByLineBoundary","cursorLineBoundaryForward","cursorLineBoundaryBackward","cursorLineBoundaryLeft","cursorLineBoundaryRight","cursorLineStart","cursorLineEnd","toMatchingBracket","cursorMatchingBracket","selectMatchingBracket","extendSel","selectByChar","selectCharLeft","selectCharRight","selectCharForward","selectCharBackward","selectByGroup","selectGroupLeft","selectGroupRight","selectGroupForward","selectGroupBackward","selectBySubword","selectSubwordForward","selectSubwordBackward","selectSyntaxLeft","selectSyntaxRight","selectByLine","selectLineUp","selectLineDown","selectByPage","selectPageUp","selectPageDown","selectLineBoundaryForward","selectLineBoundaryBackward","selectLineBoundaryLeft","selectLineBoundaryRight","selectLineStart","selectLineEnd","cursorDocStart","cursorDocEnd","selectDocStart","selectDocEnd","selectAll","selectLine","selectedLineBlocks","selectParentSyntax","simplifySelection","deleteBy","towards","skipAtomic","deleteByChar","byIndentUnit","targetPos","drop","deleteCharBackward","deleteCharBackwardStrict","deleteCharForward","deleteByGroup","nextChar","deleteGroupBackward","deleteGroupForward","deleteToLineEnd","deleteToLineStart","deleteLineBoundaryBackward","deleteLineBoundaryForward","deleteTrailingWhitespace","trailing","splitLine","transposeChars","blocks","moveLine","nextLine","moveLineUp","moveLineDown","copyLine","copyLineUp","copyLineDown","deleteLine","insertNewline","insertNewlineKeepIndent","isBetweenBrackets","closedBy","insertNewlineAndIndent","newlineAndIndent","insertBlankLine","atEof","explode","changeBySelectedLine","atLine","indentSelection","indentMore","indentLess","keep","toggleTabFocusMode","temporarilySetTabFocusMode","insertTab","emacsStyleKeymap","standardKeymap","indentWithTab","crelt","basicNormalize","SearchCursor","normalize","baseFlags","RegExpCursor","MultilineRegExpCursor","toCharEnd","FlattenedDoc","cached","cachedFrom","validRegExp","createLineDialog","dialogEffect","go","cl","percent","pc","dialogField","gotoLine","defaultHighlightOptions","highlightConfig","highlightSelectionMatches","defaultTheme","matchHighlighter","matchDeco","mainMatchDeco","insideWordBoundaries","insideWord","word","selectWord","findNextOccurrence","fullWord","cycled","selectNextOccurrence","searchedText","searchConfigFacet","SearchPanel","searchExtensions","SearchQuery","RegExpQuery","StringQuery","st","regexpCursor","stringCursor","stringWordTest","categorizer","bufPos","charBefore","charAfter","_result","regexpWordTest","setSearchQuery","togglePanel","searchState","SearchState","defaultQuery","createSearchPanel","getSearchQuery","curState","searchPanelOpen","matchMark","selectedMatchMark","searchHighlighter","searchCommand","openSearchPanel","findNext","announceMatch","selectSearchInput","findPrevious","selectMatches","selectSelectionMatches","replaceNext","replacement","replaceAll","announceText","selText","getSearchInput","searchInput","closeSearchPanel","searchKeymap","button","AnnounceMargin","Break","CompletionContext","explicit","ensureAnchor","toSet","chars","words","prefixMatch","completeFromList","validFor","ifIn","ifNotIn","Option","completion","addStart","addEnd","pickedCompletion","insertCompletionText","SourceCache","asSource","startCompletionEffect","closeCompletionEffect","FuzzyMatcher","upper","byWord","firstSize","anyTo","preciseTo","byWordTo","byWordFolded","adjacentTo","adjacentStart","adjacentEnd","hasLower","wordAdjacent","StrictMatcher","completionConfig","defaultPositionInfo","joinClass","maxWidth","spaceLeft","spaceRight","infoWidth","infoHeight","spaceBelow","optionContent","_s","_v","labelElt","detailElt","rangeAroundSelected","CompletionTooltip","stateField","applyCompletion","cState","infoResult","destroy","listRect","infoRect","selRect","ul","curSection","section","header","li","completionTooltip","sortOptions","addOption","getMatch","sectionOrder","CompletionDialog","timestamp","makeAttrs","selectedValue","createTooltip","CompletionState","ActiveSource","sameResults","setSelectedEffect","baseAttrs","getUpdateType","typing","explicitPos","setActiveEffect","ActiveResult","checkValid","completionState","apply","moveCompletionSelection","acceptCompletion","startCompletion","closeCompletion","RunningQuery","MaxUpdateCount","MinAbortTime","completionPlugin","doesReset","dialog","windows","commitCharacters","commitChars","FieldPos","FieldRange","Snippet","fieldPositions","lineObj","baseIndent","tabs","rawName","brace","fieldMarker","fieldRange","ActiveSnippet","setActive","moveToField","snippetState","fieldSelection","snippet","addSnippetKeymap","snippetPointerHandler","moveField","clearSnippet","nextSnippetField","prevSnippetField","hasNextSnippetField","hasPrevSnippetField","defaultSnippetKeymap","snippetKeymap","maps","snippetCompletion","wordRE","escaped","mapRE","wordCaches","wordCache","storeWords","ignoreAt","collectWords","big","completeAnyWord","closeBracketEffect","closedBracket","bracketState","closeBrackets","definedClosing","android","insertBracket","closeBracketsKeymap","dont","prevChar","tok","handleSame","handleOpen","closedBracketAt","handleClose","closeBefore","_open","allowTriple","stringPrefixes","canStartStringAt","probablyInString","quoteToken","prefixes","maxPrefix","quotePos","charCat","autocompletion","completionKeymapExt","completionKeymap","completionStatus","completionArrayCache","currentCompletions","completions","selectedCompletion","selectedCompletionIndex","setSelectedCompletion","SelectedDiagnostic","diagnostic","LintState","diagnostics","markedDiagnostics","diagnosticFilter","lintConfig","DiagnosticWidget","findDiagnostic","hideTooltip","setDiagnosticsEffect","maybeEnableLint","lintState","lintExtensions","setDiagnostics","movePanelSelection","selPos","LintPanel","diagnosticCount","lint","activeMark","lintTooltip","stackStart","stackEnd","diagnosticsTooltip","renderDiagnostic","openLintPanel","closeLintPanel","nextDiagnostic","previousDiagnostic","prevFrom","prevTo","lastFrom","lastTo","lintKeymap","lintPlugin","linter","forceLinting","assignKeys","actions","assigned","inPanel","fired","click","keyIndex","nameElt","PanelItem","onkeydown","needsSync","newSelectedItem","_start","_end","svg","underline","severityWeight","sev","LintGutterMarker","diagnosticsFilter","lintGutterConfig","gutterMarkerMouseOver","trackHoverOn","mousemove","lintGutterTooltip","setLintGutterTooltip","hoverTimeout","markersForDiagnostics","lintGutterExtension","lintGutterMarkers","lintGutterTheme","lintGutter","forEachDiagnostic","lState","basicSetup","initCrosshairCursor","keymaps","minimalSetup","chalky","coral","cyan","ivory","stone","malibu","sage","whiskey","violet","darkBackground","highlightBackground","background","tooltipBackground","oneDarkTheme","oneDarkHighlightStyle","oneDark","defaultLightThemeOption","getDefaultExtensions","optios","defaultIndentWithTab","placeholderStr","defaultBasicSetup","getExtensions","getStatistics","External","emptyExtensions","useCodeMirror","onStatistics","onCreateEditor","onUpdate","autoFocus","minHeight","maxHeight","minWidth","setContainer","setView","defaultThemeOption","vu","defaultExtensions","stateCurrent","viewCurrent","currentValue","_excluded","ReactCodeMirror","defaultClassNames","MAX_CONTENT_SIZE","CHUNK_SIZE","DryRunContext","base64EncodeContent","DryRunProvider","idRef","selectResult","deleteResult","newResults","deleted","execute","dryRun","useDryRun","stateChanger","useRerender","MAX_SIZE","MAX_SIZE_MESSAGE","DirectoryEditorFileManager","signalUpdate","DirectoryEditorManager","selectedPath","fileManagers","manager","DirectoryEditorContext","useDirectoryEditor","rerender","DirectoryEditorProvider","directory","firstYaml","ErrorBoundary","isJsonObject","TemplateEditorForm","contentIsSpec","onDryRun","setErrorText","fieldExtensions","setSteps","useDebounce","rootObj","parameters","fieldValidators","TemplateEditorFormDirectoryEditorDryRun","directoryEditor","selectedFile","handleDryRun","CustomFieldExplorer","customFieldExtensions","fieldOptions","selectedField","setSelectedField","fieldFormState","setFieldFormState","refreshKey","setRefreshKey","sampleFieldTemplate","fieldComponents","handleSelectionChange","handleFieldConfigChange","Select","Close","TreeViewContext","arrayDiff","arr1","arr2","findNextFirstChar","firstChars","defaultExpandedDefault","defaultSelectedDefault","TreeView","defaultCollapseIcon","defaultEndIcon","_props$defaultExpande","defaultExpanded","defaultExpandIcon","defaultParentIcon","_props$defaultSelecte","defaultSelected","_props$disableSelecti","disableSelection","_props$multiSelect","multiSelect","expandedProp","onNodeSelect","onNodeToggle","selectedProp","_React$useState","tabbable","setTabbable","_React$useState2","focusedNodeId","setFocusedNodeId","nodeMap","firstCharMap","visibleNodes","_useControlled","useControlled","_useControlled2","expanded","setExpandedState","_useControlled3","_useControlled4","setSelectedState","isSelected","isTabbable","isFocused","getNextNode","nodeIndex","getPreviousNode","getLastNode","getFirstNode","getParent","getNodesInRange","aIndex","bIndex","focusNextNode","focusPreviousNode","focusFirstNode","focusLastNode","focusByFirstCharacter","lowercaseChar","firstCharIds","nodeId","firstChar","toggleExpansion","newExpanded","oldTabbable","expandAllSiblings","topLevelNodes","lastSelectedNode","lastSelectionWasRange","currentRangeSelection","handleRangeArrowSelect","handleRangeSelect","newSelected","handleMultipleSelect","handleSingleSelect","selectNode","selectRange","stacked","_nodes$start","rangeSelectToFirst","rangeSelectToLast","selectNextNode","selectPreviousNode","selectAllNodes","addNodeToNodeMap","childrenIds","currentMap","childId","currentChildMap","getNodesToRemove","cleanUpFirstCharMap","newMap","removeNodeFromNodeMap","parentMap","parentChildren","oldFocusedNodeId","mapFirstChar","prevChildIds","_React$useState3","childrenCalculated","setChildrenCalculated","childIds","buildVisible","childs","noopSelection","isPrintableCharacter","TreeItem","collapseIcon","endIcon","expandIcon","iconProp","onLabelClick","onIconClick","onKeyDown","onMouseDown","_props$TransitionComp","TransitionComponent","TransitionProps","_React$useContext","contextIcons","nodeRef","contentRef","handleRef","useForkRef","icons","handleClick","handleMouseDown","handleNextArrow","handlePreviousArrow","handleKeyDown","flag","ctrlPressed","ariaSelected","parseFileEntires","entryPath","newEntry","firstFileIndex","FileTreeItem","FileBrowser","fileTree","ChevronRight","TemplateEditorBrowser","changedFiles","Tooltip","Save","Refresh","useIsMounted","isMounted","useEventListener","listenerRef","useSyncedRef","eventListener","tgt","isRefObject","restParams","createKeyPredicate","keyFilter","ev","WINDOW_OR_NULL","useKeyboardEvent","keyOrPredicate","eventOptions","cbRef","TemplateEditorTextArea","errorText","panelExtension","TemplateEditorDirectoryEditorTextArea","usePrevious","downloadBlob","DryRunResultsList","failed","isLoading","downloadResult","downloadDirectoryContents","Check","ListItemSecondaryAction","Delete","directoryContents","JSZip","zip","converted","DryRunResultsSplitView","childArray","IconLink","href","linkProps","TaskPageLinks","StepTimeTicker","TaskStepIconComponent","FiberManualRecord","TaskStatusStepper","currentStepId","onUserStepChange","Stepper","isCancelled","Step","StepButton","StepLabel","FilesContent","selectedResult","setSelectedPath","firstFile","LogContent","setUserSelectedStepId","stepLog","selectedStep","OutputContent","DryRunResultsView","selectedTab","setSelectedTab","Tabs","Tab","DryRunResults","setExpanded","setHidden","resultsLength","prevResultsLength","exp","TemplateEditor","EXAMPLE_TEMPLATE_PARAMS_YAML","TemplateFormPreviewer","defaultPreviewTemplate","selectedTemplate","setSelectedTemplate","templateOptions","setTemplateOptions","templateYaml","setTemplateYaml","handleSelectChange","TemplateEditorIntro","supportsLoad","cardLoadLocal","CardActionArea","InfoOutlined","cardFormEditor","cardFieldExplorer","TemplateEditorPage","setSelection","Router","TaskPageComponent","TemplateOutputsComponent","TemplateListPageComponent","TemplateWizardPageComponent","customFieldExtension","customLayouts","_interopRequireDefault","_interopRequireWildcard","exports","React","_createSvgIcon","_default","module","fmtDef","compareDate","compareTime","date_time","compareDateTime","uri","validateInt32","validateInt64","validateNumber","DATE","d1","d2","TIME","withTimeZone","t1","t2","a1","a2","DATE_TIME_SEPARATOR","dt1","dt2","res","NOT_URI_FRAGMENT","URI","BYTE","MIN_INT32","MAX_INT32","Z_ANCHOR","formats_1","limit_1","codegen_1","fullName","fastName","formatsPlugin","addFormats","formats","exportName","fs","ajv_1","ops","KWDs","schemaCode","cxt","gen","it","fCxt","validate$DataFormat","validateFormat","fmts","compareCode","formatLimitPlugin","isIntegerArray","isFunction","MAXINT","gcd","bitwise","compute","nargs","clbk","lcm","Parser_1","BNF","preDecorationRE","decorationRE","subExpressionRE","getBNFRule","decorationText","isLonelyRule","getBNFBody","getBNFChoice","emit","acumulator","recover","subitems","restar","resta","convertRegex","txt","getSubItems","tmpRules","parentName","anterior","bnfSeq","preDecoration","createRule","newRule","bnf","getRules","Transform","subParser","UPPER_SNAKE_RE","WS_RULE","TokenError_1","escapeRegExp","fixRest","fixPositions","agregateErrors","parseRuleName","postDecoration","postDecorationText","preDecorationText","out","findRuleByName","stripRules","localRules","indexOnChildren","ignoreMissingRules","grammarRules","neededRules","parsedName","ruleName","recursion","printable","realType","targetLex","phases","pinned","tmpTxt","position","allOptional","foundSomething","localTarget","got","foundAtLeastOne","WS","recoverableToken","TokenError","assign","destination","arg","GREEK","LANGUAGES","getArabicForm","getSlavicForm","getCzechOrSlovakForm","mod10","getLithuanianForm","getLatvianForm","getPolishForm","mo","decimal","getLanguage","possibleLanguages","languageToTry","renderPiece","unitName","unitCount","maxDecimalPoints","digitReplacements","formattedCount","normalizedUnitCount","countStr","languageWord","getPieces","msRemaining","unitMeasures","largest","unitCounts","unitMs","isLast","unitsRemainingBeforeRound","smallerUnitName","smallerUnitCount","rounded","previousUnitName","previousUnitMs","amountOfPreviousUnit","formatPieces","smallestUnitName","conjunction","serialComma","delimiter","renderedPieces","humanizer","passedOptions","humanizerOptions","humanizeDuration","isEqual","sortBy","uniq","uniqWith","intersectionWith","isPlainObject","isBoolean","normalizeArray","undef","stringArray","undefEmpty","keyValEqual","undefAndZero","falseUndefined","emptySchema","emptyObjUndef","isSchema","undefArrayEqual","unsortedNormalizedArray","schemaGroup","allProps","aVal","bVal","unsortedArray","uniqueA","uniqueB","inter","comparers","acceptsUndefined","schemaProps","innerCompare","bValue","comparer","flattenDeep","without","deleteUndefinedProps","returnObject","isEmptySchema","allUniqueKeys","getValues","notUndefined","withoutArr","forEach","removeFalseSchemasFromArray","getItemSchemas","subSchemas","schemaAtPos","getAdditionalSchemas","mergeItems","compacted","parents","mergers","itemsCompacted","schemasAtLastPos","removeFalseSchemas","mergeSchemaGroup","otherSubSchemas","ownKeys","ownPatterns","allOtherKeys","keysMatchingPattern","pk","ownPatternKeys","allOtherPatterns","cloneDeep","computeLcm","defaultsDeep","intersection","pullAll","propertiesResolver","itemsResolver","isFalse","isTrue","schemaResolver","maximumValue","minimumValue","compareProp","getAllOf","tryMergeSchemaGroups","schemaGroups","getAnyOfCombinations","arrOfArrays","combinations","combination","throwIncompatible","asJSON","callGroupResolver","complexKeywords","resolverName","resolverConfig","extractedKeywordsOnly","unique","extraKey","createRequiredMetaArray","schemaGroupProps","schemaArrays","defaultResolvers","common","childKey","childSchemas","innerCompacted","innerArrays","innerSchemas","arrayMetaScheams","integers","defaultComplexResolvers","merger","totalSchemas","complexResolvers","complexKeysArr","mainKeyWord","resolverConf","resolver","resolverKeyword","allSchemas","hasExcape","escapeMatcher","escapeReplacer","untilde","setter","hasNextPart","compilePointer","compile","compiled","SetCache","arrayIncludes","arrayIncludesWith","arrayMap","baseUnary","cacheHas","LARGE_ARRAY_SIZE","baseDifference","iteratee","includes","isCommon","valuesLength","computed","valuesIndex","baseIndexOfWith","fromIndex","nativeMin","baseIntersection","arrays","othLength","othIndex","caches","baseIndexOf","copyArray","arrayProto","splice","basePullAll","indexOf","isArrayLikeObject","castArrayLikeObject","baseMerge","customDefaultsMerge","objValue","srcValue","baseRest","mergeWith","baseFlatten","INFINITY","baseIsEqual","isEqualWith","customizer","isNil","createAssigner","srcIndex","baseSet","createCompounder","upperFirst","startCase","baseTimes","castFunction","toInteger","MAX_SAFE_INTEGER","MAX_ARRAY_LENGTH","times","baseUniq","baseUnset","unset","factory","postprocess","withCursorAt","symbolSequence","getSymbolShortDisplay","State","dot","reference","wantedBy","Column","grammar","nextColumn","states","wants","nulls","Grammar","lexer","StreamLexer","nextLineBreak","lastLineDigits","column","scannable","expect","lexerError","tokenDisplay","lexerMessage","lastColumnIndex","lastColumn","expectantStates","nextSymbol","stateStacks","stateStack","symbolDisplay","lastDisplay","sameDisplayCount","display","getSymbolLongDisplay","visited","childVisited","childResult","considerations","_DraggableCore","_propTypes","_reactDom","_clsx","_domFns","_positionFns","_shims","_log","_getRequireWildcardCache","nodeInterop","cacheBabelInterop","cacheNodeInterop","newObj","hasPropertyDescriptor","_extends","_defineProperty","_toPropertyKey","_toPrimitive","hint","Draggable","_ref","_ref2","prevPropsPosition","coreData","uiData","newStateX","newStateY","_this$props$nodeRef$c","_this$props","axis","bounds","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","positionOffset","scale","draggableCoreProps","svgTransform","draggable","validPosition","transformOpts","eventsFor","dragEventFor","DraggableCore","thisNode","ownerDocument","touchIdentifier","coreEvent","deltaX","deltaY","_this$props2","addClassName","addEvent","addUserSelectStyles","createCSSTransform","createSVGTransform","getTouch","getTouchIdentifier","getTranslation","innerHeight","innerWidth","matchesSelector","matchesSelectorAndParentsTo","offsetXYFromParent","outerHeight","outerWidth","removeClassName","removeEvent","removeUserSelectStyles","_getPrefix","matchesSelectorFunc","el","baseNode","inputOptions","computedStyle","evt","offsetParent","offsetParentRect","controlPos","translation","unitSuffix","defaultX","defaultY","identifier","styleEl","browserPrefixToKey","browserPrefixToStyle","getPrefix","_window$document","kebabToTitleCase","shouldCapitalize","log","canDragX","canDragY","createCoreData","createDraggableData","getBoundPosition","getControlPosition","snapToGrid","cloneBounds","findDOMNode","ownerWindow","boundNode","boundNodeEl","nodeStyle","boundNodeStyle","grid","pendingX","pendingY","draggableCore","touchObj","isStart","dontSetMe","findInArray","int","_reactDraggable","_utils","_objectWithoutPropertiesLoose","excluded","sourceKeys","enumerableOnly","sym","_objectSpread","_inheritsLoose","subClass","superClass","_setPrototypeOf","Resizable","_React$Component","_this","_len","_key","_proto","minConstraints","maxConstraints","lockAspectRatio","deltaW","deltaH","oldW","oldH","slackW","slackH","handlerName","_this2","axisV","axisH","handleRect","deltaLeftSinceLast","deltaTopSinceLast","_this2$runConstraints","dimensionsChanged","cb","shouldSkipCb","handleAxis","isDOMElement","_this3","draggableOpts","handleSize","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale","_this3$handleRefs$han","_Resizable","_propTypes2","ResizableBox","resizableProps","_PropTypes$number","_len2","_key2","_PropTypes$number2","cloneElement","_react","tslib_1","react_1","useTimeoutFn_1","isReady","reset","useTimeoutFn","ready","deepFlatten","flat_string","__importDefault","nearley","grammar_1","normalize_dot_string","dot_string","plus_loc","domain","canonicalize_quoted_string","quoted_string","canonicalize","is_iri","is_http_iri","is_https_iri","is_web_iri","splitUri","scheme","authority","fragment","allowHttps","port","asyncFn","promiseRef","argsRef","methods","promise"],"sourceRoot":""}